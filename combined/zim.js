(()=>{var wi=Object.create;var ti=Object.defineProperty;var _i=Object.getOwnPropertyDescriptor;var Ti=Object.getOwnPropertyNames;var Ci=Object.getPrototypeOf,Ai=Object.prototype.hasOwnProperty;var Ei=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(g,a)=>(typeof require<"u"?require:g)[a]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var bi=(e,g)=>()=>(g||e((g={exports:{}}).exports,g),g.exports);var ki=(e,g,a,u)=>{if(g&&typeof g=="object"||typeof g=="function")for(let c of Ti(g))!Ai.call(e,c)&&c!==a&&ti(e,c,{get:()=>g[c],enumerable:!(u=_i(g,c))||u.enumerable});return e};var Pi=(e,g,a)=>(a=e!=null?wi(Ci(e)):{},ki(g||!e||!e.__esModule?ti(a,"default",{value:e,enumerable:!0}):a,e));var ni=bi((Dn,dr)=>{var re=re||{};re.stageTransformable=!0,re.extend=function(e,g){"use strict";function a(){this.constructor=e}return a.prototype=g.prototype,e.prototype=new a},re.promote=function(e,g){"use strict";var a=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(a)||a.__proto__;if(u)for(var c in a[(g+="_")+"constructor"]=u.constructor,u)a.hasOwnProperty(c)&&typeof u[c]=="function"&&(a[g+c]=u[c]);return e},re.indexOf=function(e,g){"use strict";for(var a=0,u=e.length;a<u;a++)if(g===e[a])return a;return-1},function(){"use strict";function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},re.UID=e}(),re.deprecate=function(e,g){"use strict";return function(){var a="Deprecated property or method '"+g+"'. See docs for info.";return console&&(console.warn?console.warn(a):console.log(a)),e&&e.apply(this,arguments)}},function(){"use strict";function e(a,u,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!u,this.cancelable=!!c,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var g=e.prototype;g.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},g.stopPropagation=function(){this.propagationStopped=!0},g.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},g.remove=function(){this.removed=!0},g.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},g.set=function(a){for(var u in a)this[u]=a[u];return this},g.toString=function(){return"[Event (type="+this.type+")]"},re.Event=e}(),function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var g=e.prototype;e.initialize=function(a){a.addEventListener=g.addEventListener,a.on=g.on,a.removeEventListener=a.off=g.removeEventListener,a.removeAllEventListeners=g.removeAllEventListeners,a.hasEventListener=g.hasEventListener,a.dispatchEvent=g.dispatchEvent,a._dispatchEvent=g._dispatchEvent,a.willTrigger=g.willTrigger},g.addEventListener=function(a,u,c){var y=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},B=y[a];return B&&this.removeEventListener(a,u,c),(B=y[a])?B.push(u):y[a]=[u],u},g.on=function(a,u,c,y,B,j){return u.handleEvent&&(c=c||u,u=u.handleEvent),c=c||this,this.addEventListener(a,function(le){u.call(c,le,B),y&&le.remove()},j)},g.removeEventListener=function(a,u,c){var y=c?this._captureListeners:this._listeners;if(y){var B=y[a];if(B){for(var j=0,le=B.length;j<le;j++)if(B[j]==u){le==1?delete y[a]:B.splice(j,1);break}}}},g.off=g.removeEventListener,g.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},g.dispatchEvent=function(a,u,c){if(typeof a=="string"){var y=this._listeners;if(!(u||y&&y[a]))return!0;a=new re.Event(a,u,c)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(Pe){}if(a.bubbles&&this.parent){for(var B=this,j=[B];B.parent;)j.push(B=B.parent);for(var le=j.length,be=le-1;0<=be&&!a.propagationStopped;be--)j[be]._dispatchEvent(a,1+(be==0));for(be=1;be<le&&!a.propagationStopped;be++)j[be]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented},g.hasEventListener=function(a){var u=this._listeners,c=this._captureListeners;return!!(u&&u[a]||c&&c[a])},g.willTrigger=function(a){for(var u=this;u;){if(u.hasEventListener(a))return!0;u=u.parent}return!1},g.toString=function(){return"[EventDispatcher]"},g._dispatchEvent=function(a,u){var c,y,B=u<=2?this._captureListeners:this._listeners;if(a&&B&&(y=B[a.type])&&(c=y.length)){try{a.currentTarget=this}catch(be){}try{a.eventPhase=0|u}catch(be){}a.removed=!1,y=y.slice();for(var j=0;j<c&&!a.immediatePropagationStopped;j++){var le=y[j];le.handleEvent?le.handleEvent(a):le(a),a.removed&&(this.off(a.type,le,u==1),a.removed=!1)}}u===2&&this._dispatchEvent(a,2.1)},re.EventDispatcher=e}(),function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,re.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return e._inited||e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e._setInterval=function(u){e._interval=u,e._inited&&e._setupTick()},e.setInterval=re.deprecate(e._setInterval,"Ticker.setInterval"),e._getInterval=function(){return e._interval},e.getInterval=re.deprecate(e._getInterval,"Ticker.getInterval"),e._setFPS=function(u){e._setInterval(1e3/u)},e.setFPS=re.deprecate(e._setFPS,"Ticker.setFPS"),e._getFPS=function(){return 1e3/e._interval},e.getFPS=re.deprecate(e._getFPS,"Ticker.getFPS");try{Object.defineProperties(e,{interval:{get:e._getInterval,set:e._setInterval},framerate:{get:e._getFPS,set:e._setFPS}})}catch(u){console.log(u)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){var u;e._raf?(u=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&u(e._timerId):clearTimeout(e._timerId),e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=e._pausedTime=0,e._inited=!1},e.getMeasuredTickTime=function(u){var c=0,y=e._tickTimes;if(!y||y.length<1)return-1;u=Math.min(y.length,u||0|e._getFPS());for(var B=0;B<u;B++)c+=y[B];return c/u},e.getMeasuredFPS=function(u){var c=e._times;return!c||c.length<2?-1:(u=Math.min(c.length-1,u||0|e._getFPS()),1e3/((c[0]-c[u])/u))},e.getTime=function(u){return e._startTime?e._getTime()-(u?e._pausedTime:0):-1},e.getEventTime=function(u){return e._startTime?(e._lastTime||e._startTime)-(u?e._pausedTime:0):-1},e.getTicks=function(u){return e._ticks-(u?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(e._timerId==null){var u=e.timingMode;if(u==e.RAF_SYNCHED||u==e.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return e._timerId=c(u==e.RAF?e._handleRAF:e._handleSynch),void(e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var u,c,y=e.paused,B=e._getTime(),j=B-e._lastTime;for(e._lastTime=B,e._ticks++,y&&(e._pausedTicks++,e._pausedTime+=j),e.hasEventListener("tick")&&(u=new re.Event("tick"),c=e.maxDelta,u.delta=c&&c<j?c:j,u.paused=y,u.time=B,u.runTime=B-e._pausedTime,e.dispatchEvent(u)),e._tickTimes.unshift(e._getTime()-B);100<e._tickTimes.length;)e._tickTimes.pop();for(e._times.unshift(B);100<e._times.length;)e._times.pop()};var g=window,a=g.performance.now||g.performance.mozNow||g.performance.msNow||g.performance.oNow||g.performance.webkitNow;e._getTime=function(){return(a&&a.call(g.performance)||new Date().getTime())-e._startTime},re.Ticker=e}(),function(){"use strict";function e(a){this.readyState=a.readyState,this._video=a,this._canvas=null,this._lastTime=-1,this.readyState<2&&a.addEventListener("canplaythrough",this._videoReady.bind(this))}var g=e.prototype;g.getImage=function(){if(!(this.readyState<2)){var a,u=this._canvas,c=this._video;return u||((u=this._canvas=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=c.videoWidth,u.height=c.videoHeight),2<=c.readyState&&c.currentTime!==this._lastTime&&((a=u.getContext("2d")).clearRect(0,0,u.width,u.height),a.drawImage(c,0,0,u.width,u.height),this._lastTime=c.currentTime),u}},g._videoReady=function(){this.readyState=2},re.VideoBuffer=e}(),function(){"use strict";function e(a,u,c,y,B,j,le,be,Pe,t,r){this.Event_constructor(a,u,c),this.stageX=y,this.stageY=B,this.rawX=Pe==null?y:Pe,this.rawY=t==null?B:t,this.nativeEvent=j,this.pointerID=le,this.primary=!!be,this.relatedTarget=r}var g=re.extend(e,re.Event);g._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},g._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},g._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(g,{localX:{get:g._get_localX},localY:{get:g._get_localY},isTouch:{get:g._get_isTouch}})}catch(a){}g.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},g.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},re.MouseEvent=re.promote(e,"Event")}(),function(){"use strict";function e(a,u,c,y,B,j){this.setValues(a,u,c,y,B,j)}var g=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,g.setValues=function(a,u,c,y,B,j){return this.a=a==null?1:a,this.b=u||0,this.c=c||0,this.d=y==null?1:y,this.tx=B||0,this.ty=j||0,this},g.append=function(a,u,c,y,B,j){var le=this.a,be=this.b,Pe=this.c,t=this.d;return a==1&&u==0&&c==0&&y==1||(this.a=le*a+Pe*u,this.b=be*a+t*u,this.c=le*c+Pe*y,this.d=be*c+t*y),this.tx=le*B+Pe*j+this.tx,this.ty=be*B+t*j+this.ty,this},g.prepend=function(a,u,c,y,B,j){var le=this.a,be=this.c,Pe=this.tx;return this.a=a*le+c*this.b,this.b=u*le+y*this.b,this.c=a*be+c*this.d,this.d=u*be+y*this.d,this.tx=a*Pe+c*this.ty+B,this.ty=u*Pe+y*this.ty+j,this},g.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty)},g.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)},g.appendTransform=function(a,u,c,y,B,j,le,be,Pe){var t,r=B%360?(r=B*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return j||le?(j*=e.DEG_TO_RAD,le*=e.DEG_TO_RAD,this.append(Math.cos(le),Math.sin(le),-Math.sin(j),Math.cos(j),a,u),this.append(t*c,r*c,-r*y,t*y,0,0)):this.append(t*c,r*c,-r*y,t*y,a,u),(be||Pe)&&(this.tx-=be*this.a+Pe*this.c,this.ty-=be*this.b+Pe*this.d),this},g.prependTransform=function(a,u,c,y,B,j,le,be,Pe){var t,r=B%360?(r=B*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return(be||Pe)&&(this.tx-=be,this.ty-=Pe),j||le?(j*=e.DEG_TO_RAD,le*=e.DEG_TO_RAD,this.prepend(t*c,r*c,-r*y,t*y,0,0),this.prepend(Math.cos(le),Math.sin(le),-Math.sin(j),Math.cos(j),a,u)):this.prepend(t*c,r*c,-r*y,t*y,a,u),this},g.rotate=function(B){B*=e.DEG_TO_RAD;var u=Math.cos(B),c=Math.sin(B),y=this.a,B=this.b;return this.a=y*u+this.c*c,this.b=B*u+this.d*c,this.c=-y*c+this.c*u,this.d=-B*c+this.d*u,this},g.skew=function(a,u){return a*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(a),Math.cos(a),0,0),this},g.scale=function(a,u){return this.a*=a,this.b*=a,this.c*=u,this.d*=u,this},g.translate=function(a,u){return this.tx+=this.a*a+this.c*u,this.ty+=this.b*a+this.d*u,this},g.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},g.invert=function(){var a=this.a,u=this.b,c=this.c,y=this.d,B=this.tx,j=a*y-u*c;return this.a=y/j,this.b=-u/j,this.c=-c/j,this.d=a/j,this.tx=(c*this.ty-y*B)/j,this.ty=-(a*this.ty-u*B)/j,this},g.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},g.equals=function(a){return this.tx===a.tx&&this.ty===a.ty&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d},g.transformPoint=function(a,u,c){return(c=c||{}).x=a*this.a+u*this.c+this.tx,c.y=a*this.b+u*this.d+this.ty,c},g.decompose=function(a){a==null&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var u=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a);return Math.abs(1-u/c)<1e-5?(a.rotation=c/e.DEG_TO_RAD,this.a<0&&0<=this.d&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=u/e.DEG_TO_RAD,a.skewY=c/e.DEG_TO_RAD),a},g.copy=function(a){return this.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)},g.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},g.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,re.Matrix2D=e}(),function(){"use strict";function e(a,u,c,y,B){this.setValues(a,u,c,y,B)}var g=e.prototype;g.setValues=function(a,u,c,y,B){return this.visible=a==null||!!a,this.alpha=u==null?1:u,this.shadow=c,this.compositeOperation=y,this.matrix=B||this.matrix&&this.matrix.identity()||new re.Matrix2D,this},g.append=function(a,u,c,y,B){return this.alpha*=u,this.shadow=c||this.shadow,this.compositeOperation=y||this.compositeOperation,this.visible=this.visible&&a,B&&this.matrix.appendMatrix(B),this},g.prepend=function(a,u,c,y,B){return this.alpha*=u,this.shadow=this.shadow||c,this.compositeOperation=this.compositeOperation||y,this.visible=this.visible&&a,B&&this.matrix.prependMatrix(B),this},g.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},g.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},re.DisplayProps=e}(),function(){"use strict";function e(a,u){this.setValues(a,u)}var g=e.prototype;g.setValues=function(a,u){return this.x=a||0,this.y=u||0,this},g.copy=function(a){return this.x=a.x,this.y=a.y,this},g.clone=function(){return new e(this.x,this.y)},g.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},re.Point=e}(),function(){"use strict";function e(a,u,c,y){this.setValues(a,u,c,y)}var g=e.prototype;g.setValues=function(a,u,c,y){return this.x=a||0,this.y=u||0,this.width=c||0,this.height=y||0,this},g.extend=function(a,u,c,y){return y=y||0,a+(c=c||0)>this.x+this.width&&(this.width=a+c-this.x),u+y>this.y+this.height&&(this.height=u+y-this.y),a<this.x&&(this.width+=this.x-a,this.x=a),u<this.y&&(this.height+=this.y-u,this.y=u),this},g.pad=function(a,u,c,y){return this.x-=u,this.y-=a,this.width+=u+y,this.height+=a+c,this},g.copy=function(a){return this.setValues(a.x,a.y,a.width,a.height)},g.contains=function(a,u,c,y){return c=c||0,y=y||0,a>=this.x&&a+c<=this.x+this.width&&u>=this.y&&u+y<=this.y+this.height},g.union=function(a){return this.clone().extend(a.x,a.y,a.width,a.height)},g.intersection=function(B){var u=B.x,c=B.y,y=u+B.width,B=c+B.height;return this.x>u&&(u=this.x),this.y>c&&(c=this.y),this.x+this.width<y&&(y=this.x+this.width),this.y+this.height<B&&(B=this.y+this.height),y<=u||B<=c?null:new e(u,c,y-u,B-c)},g.intersects=function(a){return a.x<=this.x+this.width&&this.x<=a.x+a.width&&a.y<=this.y+this.height&&this.y<=a.y+a.height},g.isEmpty=function(){return this.width<=0||this.height<=0},g.clone=function(){return new e(this.x,this.y,this.width,this.height)},g.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},re.Rectangle=e}(),function(){"use strict";function e(a,u,c,y,B,j,le){a.addEventListener&&(this.target=a,this.overLabel=c==null?"over":c,this.outLabel=u==null?"out":u,this.downLabel=y==null?"down":y,this.play=B,this._isPressed=!1,this._isOver=!1,this._enabled=!1,a.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),j&&(le&&(j.actionsEnabled=!1,j.gotoAndStop&&j.gotoAndStop(le)),a.hitArea=j))}var g=e.prototype;g._setEnabled=function(a){var u;a!=this._enabled&&(u=this.target,(this._enabled=a)?(u.cursor="pointer",u.addEventListener("rollover",this),u.addEventListener("rollout",this),u.addEventListener("mousedown",this),u.addEventListener("pressup",this),u._reset&&(u.__reset=u._reset,u._reset=this._reset)):(u.cursor=null,u.removeEventListener("rollover",this),u.removeEventListener("rollout",this),u.removeEventListener("mousedown",this),u.removeEventListener("pressup",this),u.__reset&&(u._reset=u.__reset,delete u.__reset)))},g.setEnabled=re.deprecate(g._setEnabled,"ButtonHelper.setEnabled"),g._getEnabled=function(){return this._enabled},g.getEnabled=re.deprecate(g._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(g,{enabled:{get:g._getEnabled,set:g._setEnabled}})}catch(a){}g.toString=function(){return"[ButtonHelper]"},g.handleEvent=function(c){var u=this.target,c=c.type,c=c=="mousedown"?(this._isPressed=!0,this.downLabel):c=="pressup"?(this._isPressed=!1,this._isOver?this.overLabel:this.outLabel):c=="rollover"?(this._isOver=!0,this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,this._isPressed?this.overLabel:this.outLabel);this.play?u.gotoAndPlay&&u.gotoAndPlay(c):u.gotoAndStop&&u.gotoAndStop(c)},g._reset=function(){var a=this.paused;this.__reset(),this.paused=a},re.ButtonHelper=e}(),function(){"use strict";function e(a,u,c,y){this.color=a||"black",this.offsetX=u||0,this.offsetY=c||0,this.blur=y||0}var g=e.prototype;e.identity=new e("transparent",0,0,0),g.toString=function(){return"[Shadow]"},g.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},re.Shadow=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(a)}var g=re.extend(e,re.EventDispatcher);g._getAnimations=function(){return this._animations.slice()},g.getAnimations=re.deprecate(g._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(g,{animations:{get:g._getAnimations}})}catch(a){}g.getNumFrames=function(a){return a==null?this._frames?this._frames.length:this._numFrames||0:(a=this._data[a],a==null?0:a.frames.length)},g.getAnimation=function(a){return this._data[a]},g.getFrame=function(a){var u;return this._frames&&(u=this._frames[a])?u:null},g.getFrameBounds=function(a,u){return a=this.getFrame(a),a?(u||new re.Rectangle).setValues(-a.regX,-a.regY,a.rect.width,a.rect.height):null},g.toString=function(){return"[SpriteSheet]"},g.clone=function(){throw"SpriteSheet cannot be cloned."},g._parseData=function(a){var u,c,y,B;if(a!=null){if(this.framerate=a.framerate||0,a.images&&0<(c=a.images.length))for(i=this._images=[],u=0;u<c;u++){var j,le=a.images[u];typeof le=="string"&&(j=le,(le=document.createElement("img")).src=j),i.push(le),le.getContext||le.naturalWidth||(this._loadCount++,this.complete=!1,function(o,l){le.onload=function(){o._handleImageLoad(l)}}(this,j),function(o,l){le.onerror=function(){o._handleImageError(l)}}(this,j))}if(a.frames!=null)if(Array.isArray(a.frames))for(this._frames=[],u=0,c=(i=a.frames).length;u<c;u++){var be=i[u];this._frames.push({image:this._images[be[4]||0],rect:new re.Rectangle(be[0],be[1],be[2],be[3]),regX:be[5]||0,regY:be[6]||0})}else y=a.frames,this._frameWidth=y.width,this._frameHeight=y.height,this._regX=y.regX||0,this._regY=y.regY||0,this._spacing=y.spacing||0,this._margin=y.margin||0,this._numFrames=y.count,this._loadCount==0&&this._calculateFrames();if(this._animations=[],(y=a.animations)!=null)for(B in this._data={},y){var Pe={name:B},t=y[B];if(typeof t=="number")i=Pe.frames=[t];else if(Array.isArray(t))if(t.length==1)Pe.frames=[t[0]];else for(Pe.speed=t[3],Pe.next=t[2],i=Pe.frames=[],u=t[0];u<=t[1];u++)i.push(u);else{Pe.speed=t.speed,Pe.next=t.next;var r=t.frames,i=Pe.frames=typeof r=="number"?[r]:r.slice(0)}Pe.next!==!0&&Pe.next!==void 0||(Pe.next=B),(Pe.next===!1||i.length<2&&Pe.next==B)&&(Pe.next=null),Pe.speed||(Pe.speed=1),this._animations.push(B),this._data[B]=Pe}}},g._handleImageLoad=function(a){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},g._handleImageError=function(a){var u=new re.Event("error");u.src=a,this.dispatchEvent(u),--this._loadCount==0&&this.dispatchEvent("complete")},g._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];var a=this._numFrames||1e5,u=0,c=this._frameWidth,y=this._frameHeight,B=this._spacing,j=this._margin;e:for(var le=0,be=this._images;le<be.length;le++)for(var Pe=be[le],t=Pe.width||Pe.naturalWidth,r=Pe.height||Pe.naturalHeight,i=j;i<=r-j-y;){for(var o=j;o<=t-j-c;){if(a<=u)break e;u++,this._frames.push({image:Pe,rect:new re.Rectangle(o,i,c,y),regX:this._regX,regY:this._regY}),o+=c+B}i+=y+B}this._numFrames=u}},re.SpriteSheet=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var g=e.prototype,a=e;e.getRGB=function(c,y,B,j){return c!=null&&B==null&&(j=y,B=255&c,y=c>>8&255,c=c>>16&255),j==null?"rgb("+c+","+y+","+B+")":"rgba("+c+","+y+","+B+","+j+")"},e.getHSL=function(c,y,B,j){return j==null?"hsl("+c%360+","+y+"%,"+B+"%)":"hsla("+c%360+","+y+"%,"+B+"%,"+j+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var u=re.createCanvas?re.createCanvas():document.createElement("canvas");u.getContext&&(e._ctx=u.getContext("2d"),u.width=u.height=1),g._getInstructions=function(){return this._updateInstructions(),this._instructions},g.getInstructions=re.deprecate(g._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(g,{instructions:{get:g._getInstructions}})}catch(c){}g.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},g.draw=function(c,y){this._updateInstructions();for(var B=this._instructions,j=this._storeIndex,le=B.length;j<le;j++)B[j].exec(c,y)},g.drawAsPath=function(c){this._updateInstructions();for(var y,B=this._instructions,j=this._storeIndex,le=B.length;j<le;j++)(y=B[j]).path!==!1&&y.exec(c)},g.moveTo=function(c,y){return this.append(new a.MoveTo(c,y),!0)},g.lineTo=function(c,y){return this.append(new a.LineTo(c,y))},g.arcTo=function(c,y,B,j,le){return this.append(new a.ArcTo(c,y,B,j,le))},g.arc=function(c,y,B,j,le,be){return this.append(new a.Arc(c,y,B,j,le,be))},g.quadraticCurveTo=function(c,y,B,j){return this.append(new a.QuadraticCurveTo(c,y,B,j))},g.bezierCurveTo=function(c,y,B,j,le,be){return this.append(new a.BezierCurveTo(c,y,B,j,le,be))},g.rect=function(c,y,B,j){return this.append(new a.Rect(c,y,B,j))},g.closePath=function(){return this._activeInstructions.length?this.append(new a.ClosePath):this},g.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},g.beginFill=function(c){return this._setFill(c?new a.Fill(c):null)},g.beginLinearGradientFill=function(c,y,B,j,le,be){return this._setFill(new a.Fill().linearGradient(c,y,B,j,le,be))},g.beginRadialGradientFill=function(c,y,B,j,le,be,Pe,t){return this._setFill(new a.Fill().radialGradient(c,y,B,j,le,be,Pe,t))},g.beginBitmapFill=function(c,y,B){return this._setFill(new a.Fill(null,B).bitmap(c,y))},g.endFill=function(){return this.beginFill()},g.setStrokeStyle=function(c,y,B,j,le){return this._updateInstructions(!0),this._strokeStyle=this.command=new a.StrokeStyle(c,y,B,j,le),this._stroke&&(this._stroke.ignoreScale=le),this._strokeIgnoreScale=le,this},g.setStrokeDash=function(c,y){return this._updateInstructions(!0),this._strokeDash=this.command=new a.StrokeDash(c,y),this},g.beginStroke=function(c){return this._setStroke(c?new a.Stroke(c):null)},g.beginLinearGradientStroke=function(c,y,B,j,le,be){return this._setStroke(new a.Stroke().linearGradient(c,y,B,j,le,be))},g.beginRadialGradientStroke=function(c,y,B,j,le,be,Pe,t){return this._setStroke(new a.Stroke().radialGradient(c,y,B,j,le,be,Pe,t))},g.beginBitmapStroke=function(c,y){return this._setStroke(new a.Stroke().bitmap(c,y))},g.endStroke=function(){return this.beginStroke()},g.curveTo=g.quadraticCurveTo,g.drawRect=g.rect,g.drawRoundRect=function(c,y,B,j,le){return this.drawRoundRectComplex(c,y,B,j,le,le,le,le)},g.drawRoundRectComplex=function(c,y,B,j,le,be,Pe,t){return this.append(new a.RoundRect(c,y,B,j,le,be,Pe,t))},g.drawCircle=function(c,y,B){return this.append(new a.Circle(c,y,B))},g.drawEllipse=function(c,y,B,j){return this.append(new a.Ellipse(c,y,B,j))},g.drawPolyStar=function(c,y,B,j,le,be){return this.append(new a.PolyStar(c,y,B,j,le,be))},g.drawPolygon=function(c,y){return this.append(new a.Polygon(c,y))},g.append=function(c,y){return this._activeInstructions.push(c),this.command=c,y||(this._dirty=!0),this},g.decodePath=function(c){for(var y=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],B=[2,2,4,6,0],j=0,le=c.length,be=[],Pe=0,t=0,r=e.BASE_64;j<le;){var i=c.charAt(j),o=r[i],l=o>>3,f=y[l];if(!f||3&o)throw"bad path data (@"+j+"): "+i;var d=B[l];l||(Pe=t=0),j++;for(var p=2+(o>>2&1),_=be.length=0;_<d;_++){var P=(T=r[c.charAt(j)])>>5?-1:1,T=(31&T)<<6|r[c.charAt(j+1)];p==3&&(T=T<<6|r[c.charAt(j+2)]),T=P*T/10,_%2?Pe=T+=Pe:t=T+=t,be[_]=T,j+=p}f.apply(this,be)}return this},g.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},g.unstore=function(){return this._storeIndex=0,this},g.clone=function(){var c=new e;return c.command=this.command,c._stroke=this._stroke,c._strokeStyle=this._strokeStyle,c._strokeDash=this._strokeDash,c._strokeIgnoreScale=this._strokeIgnoreScale,c._fill=this._fill,c._instructions=this._instructions.slice(),c._commitIndex=this._commitIndex,c._activeInstructions=this._activeInstructions.slice(),c._dirty=this._dirty,c._storeIndex=this._storeIndex,c},g.toString=function(){return"[Graphics]"},g.mt=g.moveTo,g.lt=g.lineTo,g.at=g.arcTo,g.bt=g.bezierCurveTo,g.qt=g.quadraticCurveTo,g.a=g.arc,g.r=g.rect,g.cp=g.closePath,g.c=g.clear,g.f=g.beginFill,g.lf=g.beginLinearGradientFill,g.rf=g.beginRadialGradientFill,g.bf=g.beginBitmapFill,g.ef=g.endFill,g.ss=g.setStrokeStyle,g.sd=g.setStrokeDash,g.s=g.beginStroke,g.ls=g.beginLinearGradientStroke,g.rs=g.beginRadialGradientStroke,g.bs=g.beginBitmapStroke,g.es=g.endStroke,g.dr=g.drawRect,g.rr=g.drawRoundRect,g.rc=g.drawRoundRectComplex,g.dc=g.drawCircle,g.de=g.drawEllipse,g.dp=g.drawPolyStar,g.pg=g.drawPolygon,g.p=g.decodePath,g._updateInstructions=function(c){var y=this._instructions,B=this._activeInstructions,j=this._commitIndex;if(this._dirty&&B.length){y.length=j,y.push(e.beginCmd);var le=B.length,be=y.length;y.length=be+le;for(var Pe=0;Pe<le;Pe++)y[Pe+be]=B[Pe];this._fill&&y.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&y.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&y.push(this._strokeStyle),c&&(this._oldStrokeStyle=this._strokeStyle,this._oldStrokeDash=this._strokeDash),y.push(this._stroke)),this._dirty=!1}c&&(B.length=0,this._commitIndex=y.length)},g._setFill=function(c){return this._updateInstructions(!0),this.command=this._fill=c,this},g._setStroke=function(c){return this._updateInstructions(!0),(this.command=this._stroke=c)&&(c.ignoreScale=this._strokeIgnoreScale),this},(a.LineTo=function(c,y){this.x=c,this.y=y}).prototype.exec=function(c){c.lineTo(this.x,this.y)},(a.MoveTo=function(c,y){this.x=c,this.y=y}).prototype.exec=function(c){c.moveTo(this.x,this.y)},(a.ArcTo=function(c,y,B,j,le){this.x1=c,this.y1=y,this.x2=B,this.y2=j,this.radius=le}).prototype.exec=function(c){c.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(a.Arc=function(c,y,B,j,le,be){this.x=c,this.y=y,this.radius=B,this.startAngle=j,this.endAngle=le,this.anticlockwise=!!be}).prototype.exec=function(c){c.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(a.QuadraticCurveTo=function(c,y,B,j){this.cpx=c,this.cpy=y,this.x=B,this.y=j}).prototype.exec=function(c){c.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(a.BezierCurveTo=function(c,y,B,j,le,be){this.cp1x=c,this.cp1y=y,this.cp2x=B,this.cp2y=j,this.x=le,this.y=be}).prototype.exec=function(c){c.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(a.Rect=function(c,y,B,j){this.x=c,this.y=y,this.w=B,this.h=j}).prototype.exec=function(c){c.rect(this.x,this.y,this.w,this.h)},(a.ClosePath=function(){}).prototype.exec=function(c){c.closePath()},(a.BeginPath=function(){}).prototype.exec=function(c){c.beginPath()},(g=(a.Fill=function(c,y){this.style=c,this.matrix=y}).prototype).exec=function(c){var y;this.style&&(c.fillStyle=this.style,(y=this.matrix)&&(c.save(),c.transform(y.a,y.b,y.c,y.d,y.tx,y.ty)),c.fill(),y&&c.restore())},g.linearGradient=function(c,y,B,j,le,be){for(var Pe=this.style=e._ctx.createLinearGradient(B,j,le,be),t=0,r=c.length;t<r;t++)Pe.addColorStop(y[t],c[t]);return Pe.props={colors:c,ratios:y,x0:B,y0:j,x1:le,y1:be,type:"linear"},this},g.radialGradient=function(c,y,B,j,le,be,Pe,t){for(var r=this.style=e._ctx.createRadialGradient(B,j,le,be,Pe,t),i=0,o=c.length;i<o;i++)r.addColorStop(y[i],c[i]);return r.props={colors:c,ratios:y,x0:B,y0:j,r0:le,x1:be,y1:Pe,r1:t,type:"radial"},this},g.bitmap=function(c,y,B){return B&&(this.matrix=B),(c.naturalWidth||c.getContext||2<=c.readyState)&&((this.style=e._ctx.createPattern(c,y||"")).props={image:c,repetition:y,type:"bitmap"}),this},g.path=!1,(g=(a.Stroke=function(c,y){this.style=c,this.ignoreScale=y}).prototype).exec=function(c){this.style&&(c.strokeStyle=this.style,this.ignoreScale&&(c.save(),c.setTransform(1,0,0,1,0,0)),c.stroke(),this.ignoreScale&&c.restore())},g.linearGradient=a.Fill.prototype.linearGradient,g.radialGradient=a.Fill.prototype.radialGradient,g.bitmap=a.Fill.prototype.bitmap,g.path=!1,(g=(a.StrokeStyle=function(c,y,B,j,le){this.width=c,this.caps=y,this.joints=B,this.miterLimit=j,this.ignoreScale=le}).prototype).exec=function(c){c.lineWidth=this.width==null?"1":this.width,c.lineCap=this.caps==null?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],c.lineJoin=this.joints==null?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],c.miterLimit=this.miterLimit==null?"10":this.miterLimit,c.ignoreScale=this.ignoreScale!=null&&this.ignoreScale},g.path=!1,(a.StrokeDash=function(c,y){this.segments=c,this.offset=y||0}).prototype.exec=function(c){c.setLineDash&&(c.setLineDash(this.segments||a.StrokeDash.EMPTY_SEGMENTS),c.lineDashOffset=this.offset||0)},a.StrokeDash.EMPTY_SEGMENTS=[],(a.RoundRect=function(c,y,B,j,le,be,Pe,t){this.x=c,this.y=y,this.w=B,this.h=j,this.radiusTL=le,this.radiusTR=be,this.radiusBR=Pe,this.radiusBL=t}).prototype.exec=function(c){var y=(r<i?r:i)/2,B=0,j=0,le=0,be=0,Pe=this.x,t=this.y,r=this.w,i=this.h,o=this.radiusTL,l=this.radiusTR,f=this.radiusBR,d=this.radiusBL;o<0&&(o*=B=-1),y<o&&(o=y),l<0&&(l*=j=-1),y<l&&(l=y),f<0&&(f*=le=-1),y<f&&(f=y),d<0&&(d*=be=-1),y<d&&(d=y),c.moveTo(Pe+r-l,t),c.arcTo(Pe+r+l*j,t-l*j,Pe+r,t+l,l),c.lineTo(Pe+r,t+i-f),c.arcTo(Pe+r+f*le,t+i+f*le,Pe+r-f,t+i,f),c.lineTo(Pe+d,t+i),c.arcTo(Pe-d*be,t+i+d*be,Pe,t+i-d,d),c.lineTo(Pe,t+o),c.arcTo(Pe-o*B,t-o*B,Pe+o,t,o),c.closePath()},(a.Circle=function(c,y,B){this.x=c,this.y=y,this.radius=B}).prototype.exec=function(c){c.arc(this.x,this.y,this.radius,0,2*Math.PI)},(a.Ellipse=function(c,y,B,j){this.x=c,this.y=y,this.w=B,this.h=j}).prototype.exec=function(c){var y=this.x,B=this.y,t=this.w,r=this.h,j=t/2*.5522848,le=r/2*.5522848,be=y+t,Pe=B+r,t=y+t/2,r=B+r/2;c.moveTo(y,r),c.bezierCurveTo(y,r-le,t-j,B,t,B),c.bezierCurveTo(t+j,B,be,r-le,be,r),c.bezierCurveTo(be,r+le,t+j,Pe,t,Pe),c.bezierCurveTo(t-j,Pe,y,r+le,y,r)},(a.PolyStar=function(c,y,B,j,le,be){this.x=c,this.y=y,this.radius=B,this.sides=j,this.pointSize=le,this.angle=be}).prototype.exec=function(c){var y=this.x,B=this.y,j=this.radius,le=(this.angle||0)/180*Math.PI,be=this.sides,Pe=1-(this.pointSize||0),t=Math.PI/be;c.moveTo(y+Math.cos(le)*j,B+Math.sin(le)*j);for(var r=0;r<be+1&&(le+=t,Pe==1||(c.lineTo(y+Math.cos(le)*j*Pe,B+Math.sin(le)*j*Pe),r!=be));r++)le+=t,c.lineTo(y+Math.cos(le)*j,B+Math.sin(le)*j);c.closePath()},(a.Polygon=function(c,y){this.points=c,y==null&&(y=!0),this.close=y}).prototype.exec=function(c){var y,B,j=this.points,le=this.close,be=j[0];c.moveTo(be[0],be[1]);for(var Pe=1;Pe<j.length;Pe++)y=j[Pe],Pe==1&&(B=[y[0],y[1]]),c.lineTo(y[0],y[1]);le&&(c.lineTo(be[0],be[1]),c.lineTo(B[0],B[1])),c.closePath()},e.beginCmd=new a.BeginPath,re.Graphics=e}(),function(){"use strict";function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=re.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new re.DisplayProps,this._rectangle=new re.Rectangle,this._bounds=null,this._webGLRenderStyle=e._StageGL_NONE}var g=re.extend(e,re.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1,e._StageGL_NONE=0,e._StageGL_SPRITE=1,e._StageGL_BITMAP=2;var a=re.createCanvas?re.createCanvas():document.createElement("canvas");a.getContext&&(e._hitTestCanvas=a,e._hitTestContext=a.getContext("2d"),a.width=a.height=1),g._getStage=function(){for(var u=this,c=re.Stage;u.parent;)u=u.parent;return u instanceof c?u:null},g.getStage=re.deprecate(g._getStage,"DisplayObject.getStage");try{Object.defineProperties(g,{stage:{get:g._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(u){this.bitmapCache&&(this.bitmapCache.cacheID=u)}},scale:{get:function(){return this.scaleX},set:function(u){this.scaleX=this.scaleY=u}}})}catch(u){}g.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},g.draw=function(u,c){var y=this.bitmapCache;return!(!y||c)&&y.draw(u)},g.updateContext=function(u){var c=this,j=c.mask,y=c._props.matrix;j&&j.graphics&&!j.graphics.isEmpty()&&(j.getMatrix(y),u.transform(y.a,y.b,y.c,y.d,y.tx,y.ty),j.graphics.drawAsPath(u),u.clip(),y.invert(),u.transform(y.a,y.b,y.c,y.d,y.tx,y.ty)),this.getMatrix(y);var B=y.tx,j=y.ty;e._snapToPixelEnabled&&c.snapToPixel&&(B=B+(B<0?-.5:.5)|0,j=j+(j<0?-.5:.5)|0),u.transform(y.a,y.b,y.c,y.d,B,j),u.globalAlpha*=c.alpha,c.compositeOperation&&(u.globalCompositeOperation=c.compositeOperation),c.shadow&&this._applyShadow(u,c.shadow)},g.cache=function(u,c,y,B,j,le){this.bitmapCache||(this.bitmapCache=new re.BitmapCache),this.bitmapCache.define(this,u,c,y,B,j,le)},g.updateCache=function(u){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(u)},g.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},g.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getCacheDataURL():null},g.localToGlobal=function(u,c,y){return y=this.getConcatenatedMatrix(this._props.matrix).transformPoint(u,c,y||new re.Point),this.stage&&re.stageTransformable&&(y=this.stage.getConcatenatedMatrix(this._mtx).invert().transformPoint(y.x,y.y)),y},g.globalToLocal=function(u,c,y){var B;return this.stage&&re.stageTransformable&&(u=(B=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(u,c)).x,c=B.y),this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(u,c,y||new re.Point)},g.localToLocal=function(u,c,y,B){return B=this.localToGlobal(u,c,B),y.globalToLocal(B.x,B.y,B)},g.setTransform=function(u,c,y,B,j,le,be,Pe,t){return this.x=u||0,this.y=c||0,this.scaleX=y==null?1:y,this.scaleY=B==null?1:B,this.rotation=j||0,this.skewX=le||0,this.skewY=be||0,this.regX=Pe||0,this.regY=t||0,this},g.getMatrix=function(y){var c=this,y=y&&y.identity()||new re.Matrix2D;return c.transformMatrix?y.copy(c.transformMatrix):y.appendTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY)},g.getConcatenatedMatrix=function(u){for(var c=this,y=this.getMatrix(u);c=c.parent;)y.prependMatrix(c.getMatrix(c._props.matrix));return y},g.getConcatenatedDisplayProps=function(u){u=u?u.identity():new re.DisplayProps;for(var c=this,y=c.getMatrix(u.matrix);u.prepend(c.visible,c.alpha,c.shadow,c.compositeOperation),c!=this&&y.prependMatrix(c.getMatrix(c._props.matrix)),c=c.parent;);return u},g.hitTest=function(u,c){var y=e._hitTestContext;return y.setTransform(1,0,0,1,-u,-c),this.draw(y),c=this._testHit(y),y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,2,2),c},g.set=function(u){for(var c in u)this[c]=u[c];return this},g.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var u=this.cacheCanvas;if(u){var c=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,u.width/c,u.height/c)}return null},g.getTransformedBounds=function(){return this._getBounds()},g.setBounds=function(u,c,y,B){this._bounds=u!=null?(this._bounds||new re.Rectangle).setValues(u,c,y,B):u},g.clone=function(){return this._cloneProps(new e)},g.toString=function(){return"[DisplayObject (name="+this.name+")]"},g._updateState=null,g._cloneProps=function(u){return u.alpha=this.alpha,u.mouseEnabled=this.mouseEnabled,u.tickEnabled=this.tickEnabled,u.name=this.name,u.regX=this.regX,u.regY=this.regY,u.rotation=this.rotation,u.scaleX=this.scaleX,u.scaleY=this.scaleY,u.shadow=this.shadow,u.skewX=this.skewX,u.skewY=this.skewY,u.visible=this.visible,u.x=this.x,u.y=this.y,u.compositeOperation=this.compositeOperation,u.snapToPixel=this.snapToPixel,u.filters=this.filters==null?null:this.filters.slice(0),u.mask=this.mask,u.hitArea=this.hitArea,u.cursor=this.cursor,u._bounds=this._bounds,u},g._applyShadow=function(u,c){c=c||Shadow.identity,u.shadowColor=c.color,u.shadowOffsetX=c.offsetX,u.shadowOffsetY=c.offsetY,u.shadowBlur=c.blur},g._tick=function(u){var c=this._listeners;c&&c.tick&&(u.target=null,u.propagationStopped=u.immediatePropagationStopped=!1,this.dispatchEvent(u))},g._testHit=function(u){try{var c=1<u.getImageData(0,0,1,1).data[3]}catch(y){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},g._getBounds=function(u,c){return this._transformBounds(this.getBounds(),u,c)},g._transformBounds=function(u,o,i){if(!u)return u;var B=u.x,j=u.y,l=u.width,f=u.height,d=this._props.matrix,d=i?d.identity():this.getMatrix(d);(B||j)&&d.appendTransform(0,0,1,1,0,0,0,-B,-j),o&&d.prependMatrix(o);var le=l*d.a,be=l*d.b,Pe=f*d.c,t=f*d.d,r=d.tx,i=d.ty,o=r,l=r,f=i,d=i;return(B=le+r)<o?o=B:l<B&&(l=B),(B=le+Pe+r)<o?o=B:l<B&&(l=B),(B=Pe+r)<o?o=B:l<B&&(l=B),(j=be+i)<f?f=j:d<j&&(d=j),(j=be+t+i)<f?f=j:d<j&&(d=j),(j=t+i)<f?f=j:d<j&&(d=j),u.setValues(o,f,l-o,d-f)},g._hasMouseEventListener=function(){for(var u=e._MOUSE_EVENTS,c=0,y=u.length;c<y;c++)if(this.hasEventListener(u[c]))return!0;return!!this.cursor},re.DisplayObject=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var g=re.extend(e,re.DisplayObject);g._getNumChildren=function(){return this.children.length},g.getNumChildren=re.deprecate(g._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(g,{numChildren:{get:g._getNumChildren}})}catch(a){}g.initialize=e,g.isVisible=function(){var a=this.cacheCanvas||this.children.length;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},g.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;for(var c=this.children.slice(),y=0,B=c.length;y<B;y++){var j=c[y];j.isVisible()&&(a.save(),j.updateContext(a),j.draw(a),a.restore())}return!0},g.addChild=function(a){if(a==null)return a;var u=arguments.length;if(1<u){for(var c=0;c<u;c++)this.addChild(arguments[c]);return arguments[u-1]}var y=a.parent,B=y===this;return y&&y._removeChildAt(re.indexOf(y.children,a),B),(a.parent=this).children.push(a),B||a.dispatchEvent("added"),a},g.addChildAt=function(a,u){var c=arguments.length,y=arguments[c-1];if(y<0||y>this.children.length)return arguments[c-2];if(2<c){for(var B=0;B<c-1;B++)this.addChildAt(arguments[B],y+B);return arguments[c-2]}var j=a.parent,le=j===this;return j&&j._removeChildAt(re.indexOf(j.children,a),le),(a.parent=this).children.splice(u,0,a),le||a.dispatchEvent("added"),a},g.removeChild=function(a){var u=arguments.length;if(1<u){for(var c=!0,y=0;y<u;y++)c=c&&this.removeChild(arguments[y]);return c}return this._removeChildAt(re.indexOf(this.children,a))},g.removeChildAt=function(a){var u=arguments.length;if(1<u){for(var c=[],y=0;y<u;y++)c[y]=arguments[y];c.sort(function(j,le){return le-j});for(var B=!0,y=0;y<u;y++)B=B&&this._removeChildAt(c[y]);return B}return this._removeChildAt(a)},g.removeAllChildren=function(){for(var a=this.children;a.length;)this._removeChildAt(0)},g.getChildAt=function(a){return this.children[a]},g.getChildByName=function(a){for(var u=this.children,c=0,y=u.length;c<y;c++)if(u[c].name==a)return u[c];return null},g.sortChildren=function(a){this.children.sort(a)},g.getChildIndex=function(a){return re.indexOf(this.children,a)},g.swapChildrenAt=function(a,u){var c=this.children,y=c[a],B=c[u];y&&B&&(c[a]=B,c[u]=y)},g.swapChildren=function(a,u){for(var c,y,B=this.children,j=0,le=B.length;j<le&&(B[j]==a&&(c=j),B[j]==u&&(y=j),c==null||y==null);j++);j!=le&&(B[c]=u,B[y]=a)},g.setChildIndex=function(a,u){var c=this.children,y=c.length;if(!(a.parent!=this||u<0||y<=u)){for(var B=0;B<y&&c[B]!=a;B++);B!=y&&B!=u&&(c.splice(B,1),c.splice(u,0,a))}},g.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},g.hitTest=function(a,u){return this.getObjectUnderPoint(a,u)!=null},g.getObjectsUnderPoint=function(a,B,c){var y=[],B=this.localToGlobal(a,B);return this._getObjectsUnderPoint(B.x,B.y,y,0<c,c==1),y},g.getObjectUnderPoint=function(a,u,c){return u=this.localToGlobal(a,u),this._getObjectsUnderPoint(u.x,u.y,null,0<c,c==1)},g.getBounds=function(){return this._getBounds(null,!0)},g.getTransformedBounds=function(){return this._getBounds()},g.clone=function(a){var u=this._cloneProps(new e);return a&&this._cloneChildren(u),u},g.toString=function(){return"[Container (name="+this.name+")]"},g._tick=function(a){if(this.tickChildren)for(var u=this.children.length-1;0<=u;u--){var c=this.children[u];c.tickEnabled&&c._tick&&c._tick(a)}this.DisplayObject__tick(a)},g._cloneChildren=function(a){a.children.length&&a.removeAllChildren();for(var u=a.children,c=0,y=this.children.length;c<y;c++){var B=this.children[c].clone(!0);B.parent=a,u.push(B)}},g._removeChildAt=function(a,u){if(a<0||a>this.children.length-1)return!1;var c=this.children[a];return c&&(c.parent=null),this.children.splice(a,1),u||c.dispatchEvent("removed"),!0},g._getObjectsUnderPoint=function(a,u,c,y,B,j){var le,be,Pe;if(this.stage&&re.stageTransformable&&(le=a,be=u,a=(Pe=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(a,u)).x,u=Pe.y),!(j=j||0)&&!this._testMask(this,a,u))return null;var t=re.DisplayObject._hitTestContext;B=B||y&&this._hasMouseEventListener();for(var r=this.children,i=r.length-1;0<=i;i--){var o=r[i],l=o.hitArea;if(o.visible&&(l||o.isVisible())&&(!y||o.mouseEnabled)&&(l||this._testMask(o,a,u))){if(!l&&o instanceof e){var f=o._getObjectsUnderPoint(le!=null?le:a,be!=null?be:u,c,y,B,j+1);if(!c&&f)return y&&!this.mouseChildren?this:f}else if(!y||B||o._hasMouseEventListener()){var d=o.getConcatenatedDisplayProps(o._props),f=d.matrix;if(l&&(f.appendMatrix(l.getMatrix(l._props.matrix)),d.alpha=l.alpha),t.globalAlpha=d.alpha,t.setTransform(f.a,f.b,f.c,f.d,f.tx-a,f.ty-u),(l||o).draw(t),this._testHit(t)){if(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,2,2),!c)return y&&!this.mouseChildren?this:o;c.push(o)}}}}return null},g._testMask=function(B,u,c){var y=B.mask;if(!y||!y.graphics||y.graphics.isEmpty())return!0;var j=this._props.matrix,B=B.parent,j=B?B.getConcatenatedMatrix(j):j.identity();return j=y.getMatrix(y._props.matrix).prependMatrix(j),B=re.DisplayObject._hitTestContext,B.setTransform(j.a,j.b,j.c,j.d,j.tx-u,j.ty-c),y.graphics.drawAsPath(B),B.fillStyle="#000",B.fill(),!!this._testHit(B)&&(B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,2,2),!0)},g._getBounds=function(a,u){var c=this.DisplayObject_getBounds();if(c)return this._transformBounds(c,a,u);var y=this._props.matrix,y=u?y.identity():this.getMatrix(y);a&&y.prependMatrix(a);for(var B=this.children.length,j=null,le=0;le<B;le++){var be=this.children[le];be.visible&&(c=be._getBounds(y))&&(j?j.extend(c.x,c.y,c.width,c.height):j=c.clone())}return j},re.Container=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.Container_constructor(),this.autoClear=!0,this.canvas=typeof a=="string"?document.getElementById(a):a,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var g=re.extend(e,re.Container);g._get_nextStage=function(){return this._nextStage},g._set_nextStage=function(a){this._nextStage&&(this._nextStage._prevStage=null),a&&(a._prevStage=this),this._nextStage=a};try{Object.defineProperties(g,{nextStage:{get:g._get_nextStage,set:g._set_nextStage}})}catch(a){}g.update=function(a){var u;this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart",!1,!0)!==!1&&(re.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled,u=this.drawRect,(a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),this.autoClear&&(u?a.clearRect(u.x,u.y,u.width,u.height):a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),a.save(),this.drawRect&&(a.beginPath(),a.rect(u.x,u.y,u.width,u.height),a.clip()),this.updateContext(a),this.draw(a,!1),a.restore(),this.dispatchEvent("drawend")))},g.tick=function(a){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var u=new re.Event("tick");if(a)for(var c in a)a.hasOwnProperty(c)&&(u[c]=a[c]);this._tick(u),this.dispatchEvent("tickend")}},g.handleEvent=function(a){a.type=="tick"&&this.update(a)},g.clear=function(){var a;this.canvas&&((a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1))},g.toDataURL=function(a,u){var c,y,B=this.canvas.getContext("2d"),j=this.canvas.width,le=this.canvas.height;return a&&(c=B.getImageData(0,0,j,le),y=B.globalCompositeOperation,B.globalCompositeOperation="destination-over",B.fillStyle=a,B.fillRect(0,0,j,le)),u=this.canvas.toDataURL(u||"image/png"),a&&(B.putImageData(c,0,0),B.globalCompositeOperation=y),u},g.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,a==0&&this._testMouseOver(!0)),a==null)a=20;else if(a<=0)return;var u=this;this._mouseOverIntervalID=setInterval(function(){u._testMouseOver()},1e3/Math.min(50,a))},g.enableDOMEvents=function(a){a==null&&(a=!0);var u,c,y=this._eventListeners;if(!a&&y){for(u in y)(c=y[u]).t.removeEventListener(u,c.f,!1);this._eventListeners=null}else if(a&&!y&&this.canvas){var a=window.addEventListener?window:document,B=this;for(u in(y=this._eventListeners={}).mouseup={t:a,f:function(le){B._handleMouseUp(le)}},y.mousemove={t:a,f:function(le){B._handleMouseMove(le)}},y.dblclick={t:this.canvas,f:function(le){B._handleDoubleClick(le)}},y.mousedown={t:this.canvas,f:function(le){B._handleMouseDown(le)}},y)(c=y[u]).t.addEventListener(u,c.f,!1)}},g.clone=function(){throw"Stage cannot be cloned."},g.toString=function(){return"[Stage (name="+this.name+")]"},g._getElementRect=function(a){var u;try{u=a.getBoundingClientRect()}catch(Pe){u={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var c=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),y=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),be=window.getComputedStyle?getComputedStyle(a,null):a.currentStyle,B=parseInt(be.paddingLeft)+parseInt(be.borderLeftWidth),j=parseInt(be.paddingTop)+parseInt(be.borderTopWidth),le=parseInt(be.paddingRight)+parseInt(be.borderRightWidth),be=parseInt(be.paddingBottom)+parseInt(be.borderBottomWidth);return{left:u.left+c+B,right:u.right+c-le,top:u.top+y+j,bottom:u.bottom+y-be}},g._getPointerData=function(a){return this._pointerData[a]||(this._pointerData[a]={x:0,y:0})},g._handleMouseMove=function(a){a=a||window.event,this._handlePointerMove(-1,a,a.pageX,a.pageY)},g._handlePointerMove=function(a,u,c,y,B){var j,le;this._prevStage&&B===void 0||this.canvas&&(j=this._nextStage,B=(le=this._getPointerData(a)).inBounds,this._updatePointerPosition(a,u,c,y),(B||le.inBounds||this.mouseMoveOutside)&&(a===-1&&le.inBounds==!B&&this._dispatchMouseEvent(this,B?"mouseleave":"mouseenter",!1,a,le,u),this._dispatchMouseEvent(this,"stagemousemove",!1,a,le,u),this._dispatchMouseEvent(le.target,"pressmove",!0,a,le,u)),j&&j._handlePointerMove(a,u,c,y,null))},g._updatePointerPosition=function(a,u,c,y){var be=this._getElementRect(this.canvas);c-=be.left,y-=be.top;var B=this.canvas.width,j=this.canvas.height;c/=(be.right-be.left)/B,y/=(be.bottom-be.top)/j;var le,be=this._getPointerData(a);re.stageTransformable?(this._mtx=this.getConcatenatedMatrix(this._mtx).invert(),(be.inBounds=0<=c&&0<=y&&c<=B-1&&y<=j-1)?(be.x=c,be.y=y,le=this._mtx.transformPoint(be.x,be.y),be.x=le.x,be.y=le.y):this.mouseMoveOutside&&(be.x=c<0?0:B-1<c?B-1:c,be.y=y<0?0:j-1<y?j-1:y,le=this._mtx.transformPoint(be.x,be.y),be.x=le.x,be.y=le.y),be.rawX=c,be.rawY=y,le=this._mtx.transformPoint(be.rawX,be.rawY),be.rawX=le.x,be.rawY=le.y):((be.inBounds=0<=c&&0<=y&&c<=B-1&&y<=j-1)?(be.x=c,be.y=y):this.mouseMoveOutside&&(be.x=c<0?0:B-1<c?B-1:c,be.y=y<0?0:j-1<y?j-1:y),be.rawX=c,be.rawY=y),be.posEvtObj=u,a!==this._primaryPointerID&&a!==-1||(this.mouseX=be.x,this.mouseY=be.y,this.mouseInBounds=be.inBounds)},g._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},g._handlePointerUp=function(a,u,c,y){var B,j,le=this._nextStage,be=this._getPointerData(a);this._prevStage&&y===void 0||(B=null,j=be.target,y||!j&&!le||(B=this._getObjectsUnderPoint(be.x,be.y,null,!0)),be.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,a,be,u,B),be.down=!1),B==j&&this._dispatchMouseEvent(j,"click",!0,a,be,u),this._dispatchMouseEvent(j,"pressup",!0,a,be,u),c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):be.target=null,le&&le._handlePointerUp(a,u,c,y||B&&this))},g._handleMouseDown=function(a){this._handlePointerDown(-1,a,a.pageX,a.pageY)},g._handlePointerDown=function(a,u,c,y,B){this.preventSelection&&u.preventDefault(),this._primaryPointerID!=null&&a!==-1||(this._primaryPointerID=a),y!=null&&this._updatePointerPosition(a,u,c,y);var j=null,le=this._nextStage,be=this._getPointerData(a);B||(j=be.target=this._getObjectsUnderPoint(be.x,be.y,null,!0)),be.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,a,be,u,j),be.down=!0),this._dispatchMouseEvent(j,"mousedown",!0,a,be,u),le&&le._handlePointerDown(a,u,c,y,B||j&&this)},g._testMouseOver=function(a,u,c){if(!this._prevStage||u!==void 0){var y=this._nextStage;if(this._mouseOverIntervalID){var B=this._getPointerData(-1);if(B&&(a||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var j,le,be=B.posEvtObj,Pe=c||be&&be.target==this.canvas,t=null,r=-1,i="";!u&&(a||this.mouseInBounds&&Pe)&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);for(var o=this._mouseOverTarget||[],l=o[o.length-1],f=this._mouseOverTarget=[],d=t;d;)f.unshift(d),i=i||d.cursor,d=d.parent;for(this.canvas.style.cursor=i,!u&&c&&(c.canvas.style.cursor=i),j=0,le=f.length;j<le&&f[j]==o[j];j++)r=j;for(l!=t&&this._dispatchMouseEvent(l,"mouseout",!0,-1,B,be,t),j=o.length-1;r<j;j--)this._dispatchMouseEvent(o[j],"rollout",!1,-1,B,be,t);for(j=f.length-1;r<j;j--)this._dispatchMouseEvent(f[j],"rollover",!1,-1,B,be,l);l!=t&&this._dispatchMouseEvent(t,"mouseover",!0,-1,B,be,l),y&&y._testMouseOver(a,u||t&&this,c||Pe&&this)}}else y&&y._testMouseOver(a,u,c)}},g._handleDoubleClick=function(a,u){var c=null,y=this._nextStage,B=this._getPointerData(-1);u||(c=this._getObjectsUnderPoint(B.x,B.y,null,!0),this._dispatchMouseEvent(c,"dblclick",!0,-1,B,a)),y&&y._handleDoubleClick(a,u||c&&this)},g._dispatchMouseEvent=function(a,u,c,y,B,j,le){a&&(c||a.hasEventListener(u))&&(le=new re.MouseEvent(u,c,!1,B.x,B.y,j,y,y===this._primaryPointerID||y===-1,B.rawX,B.rawY,le),a.dispatchEvent(le))},re.Stage=re.promote(e,"Container")}(),function(){"use strict";function e(a,u){if(this.Stage_constructor(a),u!==void 0){if(typeof u!="object")throw"Invalid options object";var c=u.premultiply,y=u.transparent,B=u.antialias,j=u.preserveBuffer,le=u.autoPurge}this.vocalDebug=!1,this._preserveBuffer=j||!1,this._antialias=B||!1,this._transparent=y||!1,this._premultiply=c||!1,this._autoPurge=void 0,this.autoPurge=le,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._clearColor={r:.5,g:.5,b:.5,a:0},this._maxCardsPerBatch=e.DEFAULT_MAX_BATCH_SIZE,this._activeShader=null,this._vertices=null,this._vertexPositionBuffer=null,this._uvs=null,this._uvPositionBuffer=null,this._indices=null,this._textureIndexBuffer=null,this._alphas=null,this._alphaBuffer=null,this._textureDictionary=[],this._textureIDs={},this._batchTextures=[],this._baseTextures=[],this._batchTextureCount=8,this._lastTextureInsert=-1,this._batchID=0,this._drawID=0,this._slotBlacklist=[],this._isDrawing=0,this._lastTrackedCanvas=0,this.isCacheControlled=!1,this._cacheContainer=new re.Container,this._initializeWebGL()}var g=re.extend(e,re.Stage);e.buildUVRects=function(a,u,c){if(!a||!a._frames)return null;u===void 0&&(u=-1),c===void 0&&(c=!1);for(var y=u!=-1&&c?u:0,B=u!=-1&&c?u+1:a._frames.length,j=y;j<B;j++){var le,be=a._frames[j];be.uvRect||be.image.width<=0||be.image.height<=0||(le=be.rect,be.uvRect={t:le.y/be.image.height,l:le.x/be.image.width,b:(le.y+le.height)/be.image.height,r:(le.x+le.width)/be.image.width})}return a._frames[u!=-1?u:0].uvRect||{t:0,l:0,b:1,r:1}},e.isWebGLActive=function(a){return a&&a instanceof WebGLRenderingContext&&typeof WebGLRenderingContext<"u"},e.VERTEX_PROPERTY_COUNT=6,e.INDICIES_PER_CARD=6,e.DEFAULT_MAX_BATCH_SIZE=1e4,e.WEBGL_MAX_INDEX_NUM=Math.pow(2,16),e.UV_RECT={t:0,l:0,b:1,r:1};try{e.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]),e.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),e.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch(a){}e.REGULAR_VERTEX_HEADER=(e.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",e.REGULAR_FRAGMENT_HEADER=e.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",e.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",e.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",e.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",e.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",e.PARTICLE_VERTEX_BODY=e.REGULAR_VERTEX_BODY,e.PARTICLE_FRAGMENT_BODY=e.REGULAR_FRAGMENT_BODY,e.COVER_VERTEX_HEADER=(e.COVER_VARYING_HEADER="precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;",e.COVER_FRAGMENT_HEADER=e.COVER_VARYING_HEADER+"uniform sampler2D uSampler;",e.COVER_VERTEX_BODY="void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}",e.COVER_FRAGMENT_BODY="void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}",g._get_isWebGL=function(){return!!this._webGLContext},g._set_autoPurge=function(a){(a=isNaN(a)?1200:a)!=-1&&(a=a<10?10:a),this._autoPurge=a},g._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(g,{isWebGL:{get:g._get_isWebGL},autoPurge:{get:g._get_autoPurge,set:g._set_autoPurge}})}catch(a){}g._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var a={depth:!1,alpha:this._transparent,stencil:!0,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer},a=this._webGLContext=this._fetchWebGLContext(this.canvas,a);if(!a)return null;this.updateSimultaneousTextureCount(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),this._maxTextureSlots=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._createBuffers(a),this._initTextures(a),a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply),this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else this._webGLContext=null;return this._webGLContext},g.update=function(a){this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext?(this._batchDraw(this,this._webGLContext),this._autoPurge==-1||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)):((a=this.canvas.getContext("2d")).save(),this.updateContext(a),this.draw(a,!1),a.restore()),this.dispatchEvent("drawend"))},g.clear=function(){var a,u,c;this.canvas&&(e.isWebGLActive(this._webGLContext)?(a=this._webGLContext,u=this._clearColor,c=this._transparent?u.a:1,this._webGLContext.clearColor(u.r*c,u.g*c,u.b*c,c),a.clear(a.COLOR_BUFFER_BIT),this._webGLContext.clearColor(u.r,u.g,u.b,u.a)):this.Stage_clear())},g.draw=function(a,u){if(a===this._webGLContext&&e.isWebGLActive(this._webGLContext)){var c=this._webGLContext;return this._batchDraw(this,c,u),!0}return this.Stage_draw(a,u)},g.cacheDraw=function(a,u,c){if(e.isWebGLActive(this._webGLContext)){var y=this._webGLContext;return this._cacheDraw(y,a,u,c),!0}return!1},g.protectTextureSlot=function(a,u){if(a>this._maxTextureSlots||a<0)throw"Slot outside of acceptable range";this._slotBlacklist[a]=!!u},g.getTargetRenderTexture=function(a,u,c){var y=!1,B=this._webGLContext;if(a.__lastRT!==void 0&&a.__lastRT===a.__rtA&&(y=!0),!(B=y?(a.__rtB===void 0?a.__rtB=this.getRenderBufferTexture(u,c):(u==a.__rtB._width&&c==a.__rtB._height||this.resizeTexture(a.__rtB,u,c),this.setTextureParams(B)),a.__rtB):(a.__rtA===void 0?a.__rtA=this.getRenderBufferTexture(u,c):(u==a.__rtA._width&&c==a.__rtA._height||this.resizeTexture(a.__rtA,u,c),this.setTextureParams(B)),a.__rtA)))throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances";return a.__lastRT=B},g.releaseTexture=function(a){var u,c;if(a){if(a.children)for(u=0,c=a.children.length;u<c;u++)this.releaseTexture(a.children[u]);a.cacheCanvas&&a.uncache();var y=void 0;if(a._storeID!==void 0){if(a===this._textureDictionary[a._storeID])return this._killTextureObject(a),void(a._storeID=void 0);y=a}else if(a._webGLRenderStyle===2)y=a.image;else if(a._webGLRenderStyle===1){for(u=0,c=a.spriteSheet._images.length;u<c;u++)this.releaseTexture(a.spriteSheet._images[u]);return}y!==void 0?(this._killTextureObject(this._textureDictionary[y._storeID]),y._storeID=void 0):this.vocalDebug&&console.log("No associated texture found on release")}},g.purgeTextures=function(a){a==null&&(a=100);for(var u=this._textureDictionary,c=u.length,y=0;y<c;y++){var B=u[y];B&&B._drawID+a<=this._drawID&&this._killTextureObject(B)}},g.updateSimultaneousTextureCount=function(a){var u=this._webGLContext,c=!1;for((a<1||isNaN(a))&&(a=1),this._batchTextureCount=a;!c;)try{this._activeShader=this._fetchShaderProgram(u),c=!0}catch(y){if(this._batchTextureCount==1)throw"Cannot compile shader "+y;this._batchTextureCount-=4,this._batchTextureCount<1&&(this._batchTextureCount=1),this.vocalDebug&&console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}},g.updateViewport=function(a,u){this._viewportWidth=0|a,this._viewportHeight=0|u,u=this._webGLContext,u&&(u.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,.1,0]),this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._projectionMatrixFlip.set(this._projectionMatrix),this._projectionMatrixFlip[5]*=-1,this._projectionMatrixFlip[13]*=-1)},g.getFilterShader=function(a){a=a||this;var u=this._webGLContext,c=this._activeShader;if(a._builtShader)c=a._builtShader,a.shaderParamSetup&&(u.useProgram(c),a.shaderParamSetup(u,this,c));else try{c=this._fetchShaderProgram(u,"filter",a.VTX_SHADER_BODY,a.FRAG_SHADER_BODY,a.shaderParamSetup&&a.shaderParamSetup.bind(a)),(a._builtShader=c)._name=a.toString()}catch(y){console&&console.log("SHADER SWITCH FAILURE",y)}return c},g.getBaseTexture=function(B,j){var c=Math.ceil(0<B?B:1)||1,y=Math.ceil(0<j?j:1)||1,B=this._webGLContext,j=B.createTexture();return this.resizeTexture(j,c,y),this.setTextureParams(B,!1),j},g.resizeTexture=function(a,u,c){var y=this._webGLContext;y.bindTexture(y.TEXTURE_2D,a),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,u,c,0,y.RGBA,y.UNSIGNED_BYTE,null),a.width=u,a.height=c},g.getRenderBufferTexture=function(a,u){var c=this._webGLContext,y=this.getBaseTexture(a,u);if(!y)return null;var B=c.createFramebuffer();return B?(y.width=a,y.height=u,c.bindFramebuffer(c.FRAMEBUFFER,B),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,y,0),(B._renderTexture=y)._frameBuffer=B,y._storeID=this._textureDictionary.length,this._textureDictionary[y._storeID]=y,c.bindFramebuffer(c.FRAMEBUFFER,null),y):null},g.setTextureParams=function(a,u){u&&this._antialias?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},g.setClearColor=function(a){var u,c,y,B,j;typeof a=="string"?a.indexOf("#")==0?(a.length==4&&(a="#"+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)+a.charAt(3)+a.charAt(3)),u=+("0x"+a.slice(1,3))/255,c=+("0x"+a.slice(3,5))/255,y=+("0x"+a.slice(5,7))/255,B=+("0x"+a.slice(7,9))/255):a.indexOf("rgba(")==0&&(j=a.slice(5,-1).split(","),u=Number(j[0])/255,c=Number(j[1])/255,y=Number(j[2])/255,B=Number(j[3])):(u=((4278190080&a)>>>24)/255,c=((16711680&a)>>>16)/255,y=((65280&a)>>>8)/255,B=(255&a)/255),this._clearColor.r=u||0,this._clearColor.g=c||0,this._clearColor.b=y||0,this._clearColor.a=B||0,this._webGLContext&&this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)},g.toString=function(){return"[StageGL (name="+this.name+")]"},g._fetchWebGLContext=function(a,u){var c,y;try{c=a.getContext("webgl",u)||a.getContext("experimental-webgl",u)}catch(B){}return c?(c.viewportWidth=a.width,c.viewportHeight=a.height):(y="Could not initialize WebGL",console.error?console.error(y):console.log(y)),c},g._fetchShaderProgram=function(a,u,c,y,B){var j,le;switch(a.useProgram(null),u){case"filter":le=e.COVER_VERTEX_HEADER+(c||e.COVER_VERTEX_BODY),j=e.COVER_FRAGMENT_HEADER+(y||e.COVER_FRAGMENT_BODY);break;case"particle":le=e.REGULAR_VERTEX_HEADER+e.PARTICLE_VERTEX_BODY,j=e.REGULAR_FRAGMENT_HEADER+e.PARTICLE_FRAGMENT_BODY;break;case"override":le=e.REGULAR_VERTEX_HEADER+(c||e.REGULAR_VERTEX_BODY),j=e.REGULAR_FRAGMENT_HEADER+(y||e.REGULAR_FRAGMENT_BODY);break;case"regular":default:le=e.REGULAR_VERTEX_HEADER+e.REGULAR_VERTEX_BODY,j=e.REGULAR_FRAGMENT_HEADER+e.REGULAR_FRAGMENT_BODY}var be=this._createShader(a,a.VERTEX_SHADER,le),Pe=this._createShader(a,a.FRAGMENT_SHADER,j),t=a.createProgram();if(a.attachShader(t,be),a.attachShader(t,Pe),a.linkProgram(t),t._type=u,!a.getProgramParameter(t,a.LINK_STATUS))throw a.useProgram(this._activeShader),a.getProgramInfoLog(t);switch(a.useProgram(t),u){case"filter":t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1i(t.samplerUniform,0),t.uprightUniform=a.getUniformLocation(t,"uUpright"),a.uniform1f(t.uprightUniform,0),B&&B(a,this,t);break;case"override":case"particle":case"regular":default:t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.textureIndexAttribute=a.getAttribLocation(t,"textureIndex"),a.enableVertexAttribArray(t.textureIndexAttribute),t.alphaAttribute=a.getAttribLocation(t,"objectAlpha"),a.enableVertexAttribArray(t.alphaAttribute);for(var r=[],i=0;i<this._batchTextureCount;i++)r[i]=i;t.samplerData=r,t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1iv(t.samplerUniform,r),t.pMatrixUniform=a.getUniformLocation(t,"pMatrix")}return a.useProgram(this._activeShader),t},g._createShader=function(a,u,c){c=c.replace(/{{count}}/g,this._batchTextureCount);for(var y="",B=1;B<this._batchTextureCount;B++)y+="} else if (indexPicker <= "+B+".5) { color = texture2D(uSampler["+B+"], vTextureCoord);";if(c=(c=c.replace(/{{alternates}}/g,y)).replace(/{{fragColor}}/g,this._premultiply?e.REGULAR_FRAG_COLOR_PREMULTIPLY:e.REGULAR_FRAG_COLOR_NORMAL),u=a.createShader(u),a.shaderSource(u,c),a.compileShader(u),!a.getShaderParameter(u,a.COMPILE_STATUS))throw a.getShaderInfoLog(u);return u},g._createBuffers=function(a){var u,c=this._maxCardsPerBatch*e.INDICIES_PER_CARD,y=this._vertexPositionBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,y),u=2;for(var B=this._vertices=new Float32Array(c*u),j=0,le=B.length;j<le;j+=u)B[j]=B[j+1]=0;a.bufferData(a.ARRAY_BUFFER,B,a.DYNAMIC_DRAW),y.itemSize=u,y.numItems=c,y=this._uvPositionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,y),u=2;var be=this._uvs=new Float32Array(c*u);for(j=0,le=be.length;j<le;j+=u)be[j]=be[j+1]=0;a.bufferData(a.ARRAY_BUFFER,be,a.DYNAMIC_DRAW),y.itemSize=u,y.numItems=c,y=this._textureIndexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,y),u=1;var Pe=this._indices=new Float32Array(c*u);for(j=0,le=Pe.length;j<le;j++)Pe[j]=0;a.bufferData(a.ARRAY_BUFFER,Pe,a.DYNAMIC_DRAW),y.itemSize=u,y.numItems=c,y=this._alphaBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,y),u=1;var t=this._alphas=new Float32Array(c*u);for(j=0,le=t.length;j<le;j++)t[j]=1;a.bufferData(a.ARRAY_BUFFER,t,a.DYNAMIC_DRAW),y.itemSize=u,y.numItems=c},g._initTextures=function(){this._lastTextureInsert=-1,this._textureDictionary=[],this._textureIDs={},this._baseTextures=[],this._batchTextures=[];for(var a=0;a<this._batchTextureCount;a++){var u=this.getBaseTexture();if(!(this._baseTextures[a]=this._batchTextures[a]=u))throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}},g._loadTextureImage=function(a,u){var c=u.src;c||(u._isCanvas=!0,c=u.src="canvas_"+this._lastTrackedCanvas++);var y=this._textureIDs[c];return y===void 0&&(y=this._textureIDs[c]=this._textureDictionary.length),this._textureDictionary[y]===void 0&&(this._textureDictionary[y]=this.getBaseTexture()),c=this._textureDictionary[y],c?(c._batchID=this._batchID,c._storeID=y,c._imageData=u,this._insertTextureInBatch(a,c),u._storeID=y,u.complete||u.naturalWidth||u._isCanvas?this._updateTextureImageData(a,u):u.addEventListener("load",this._updateTextureImageData.bind(this,a,u))):(u="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances",console.error&&console.error(u)||console.log(u),(c=this._baseTextures[0])._batchID=this._batchID,c._storeID=-1,c._imageData=c,this._insertTextureInBatch(a,c)),c},g._updateTextureImageData=function(a,u){var c=u.width&u.width-1||u.height&u.height-1,y=this._textureDictionary[u._storeID];a.activeTexture(a.TEXTURE0+y._activeIndex),a.bindTexture(a.TEXTURE_2D,y),y.isPOT=!c,this.setTextureParams(a,y.isPOT);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,u)}catch(j){var B="\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins";console.error?(console.error(B),console.error(j)):console&&(console.log(B),console.log(j))}u._invalid=!1,y._w=u.width,y._h=u.height,this.vocalDebug&&(c&&console.warn("NPOT(Non Power of Two) Texture: "+u.src),(u.width>a.MAX_TEXTURE_SIZE||u.height>a.MAX_TEXTURE_SIZE)&&console&&console.error("Oversized Texture: "+u.width+"x"+u.height+" vs "+a.MAX_TEXTURE_SIZE+"max"))},g._insertTextureInBatch=function(a,u){if(this._batchTextures[u._activeIndex]!==u){var c=-1,y=(this._lastTextureInsert+1)%this._batchTextureCount,B=y;do if(this._batchTextures[B]._batchID!=this._batchID&&!this._slotBlacklist[B]){c=B;break}while((B=(B+1)%this._batchTextureCount)!==y);c===-1&&(this.batchReason="textureOverflow",this._drawBuffers(a),this.batchCardCount=0,c=y),(this._batchTextures[c]=u)._activeIndex=c,(j=u._imageData)&&j._invalid&&u._drawID!==void 0?this._updateTextureImageData(a,j):(a.activeTexture(a.TEXTURE0+c),a.bindTexture(a.TEXTURE_2D,u),this.setTextureParams(a)),this._lastTextureInsert=c}else{var j=u._imageData;u._storeID!=null&&j&&j._invalid&&this._updateTextureImageData(a,j)}u._drawID=this._drawID,u._batchID=this._batchID},g._killTextureObject=function(a){if(a){var u=this._webGLContext;if(a._storeID!==void 0&&0<=a._storeID){for(var c in this._textureDictionary[a._storeID]=void 0,this._textureIDs)this._textureIDs[c]==a._storeID&&delete this._textureIDs[c];a._imageData&&(a._imageData._storeID=void 0),a._imageData=a._storeID=void 0}a._activeIndex!==void 0&&this._batchTextures[a._activeIndex]===a&&(this._batchTextures[a._activeIndex]=this._baseTextures[a._activeIndex]);try{a._frameBuffer&&u.deleteFramebuffer(a._frameBuffer),a._frameBuffer=void 0}catch(y){this.vocalDebug&&console.log(y)}try{u.deleteTexture(a)}catch(y){this.vocalDebug&&console.log(y)}}},g._backupBatchTextures=function(a,u){var c=this._webGLContext;this._backupTextures||(this._backupTextures=[]),u===void 0&&(u=this._backupTextures);for(var y=0;y<this._batchTextureCount;y++)c.activeTexture(c.TEXTURE0+y),a?this._batchTextures[y]=u[y]:(u[y]=this._batchTextures[y],this._batchTextures[y]=this._baseTextures[y]),c.bindTexture(c.TEXTURE_2D,this._batchTextures[y]),this.setTextureParams(c,this._batchTextures[y].isPOT);a&&u===this._backupTextures&&(this._backupTextures=[])},g._batchDraw=function(a,u,c){0<this._isDrawing&&this._drawBuffers(u),this._isDrawing++,this._drawID++,this.batchCardCount=0,this.depth=0,this._appendToBatchGroup(a,u,new re.Matrix2D,this.alpha,c),this.batchReason="drawFinish",this._drawBuffers(u),this._isDrawing--},g._cacheDraw=function(a,u,c,y){var B=this._activeShader,j=this._slotBlacklist,le=this._maxTextureSlots-1,be=this._viewportWidth,Pe=this._viewportHeight;this.protectTextureSlot(le,!0);var t=u.getMatrix();(t=t.clone()).scale(1/y.scale,1/y.scale),(t=t.invert()).translate(-y.offX/y.scale*u.scaleX,-y.offY/y.scale*u.scaleY);var r=this._cacheContainer;r.children=[u],r.transformMatrix=t,this._backupBatchTextures(!1),c&&c.length?this._drawFilters(u,c,y):this.isCacheControlled?(a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0)):(a.activeTexture(a.TEXTURE0+le),u.cacheCanvas=this.getTargetRenderTexture(u,y._drawWidth,y._drawHeight),u=u.cacheCanvas,a.bindFramebuffer(a.FRAMEBUFFER,u._frameBuffer),this.updateViewport(y._drawWidth,y._drawHeight),this._projectionMatrix=this._projectionMatrixFlip,a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0),a.bindFramebuffer(a.FRAMEBUFFER,null),this.updateViewport(be,Pe)),this._backupBatchTextures(!0),this.protectTextureSlot(le,!1),this._activeShader=B,this._slotBlacklist=j},g._drawFilters=function(a,u,c){var y,B=this._webGLContext,j=this._maxTextureSlots-1,le=this._viewportWidth,be=this._viewportHeight,Pe=this._cacheContainer,t=u.length;B.activeTexture(B.TEXTURE0+j),y=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,y._frameBuffer),this.updateViewport(c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._batchDraw(Pe,B,!0),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,y),this.setTextureParams(B);for(var r=!1,i=0,o=u[i];this._activeShader=this.getFilterShader(o),this._activeShader&&(B.activeTexture(B.TEXTURE0+j),y=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,y._frameBuffer),B.viewport(0,0,c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,r),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,y),this.setTextureParams(B),(1<t||u[0]._multiPass)&&(r=!r),o=o._multiPass!==null?o._multiPass:u[++i]),o;);this.isCacheControlled?(B.bindFramebuffer(B.FRAMEBUFFER,null),this.updateViewport(le,be),this._activeShader=this.getFilterShader(this),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,r)):(r&&(B.activeTexture(B.TEXTURE0+j),y=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,y._frameBuffer),this._activeShader=this.getFilterShader(this),B.viewport(0,0,c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,!r)),B.bindFramebuffer(B.FRAMEBUFFER,null),this.updateViewport(le,be),a.cacheCanvas=y)},g._appendToBatchGroup=function(a,u,c,y,B){a._glMtx||(a._glMtx=new re.Matrix2D);var j,le,be,Pe,t=a._glMtx;t.copy(c),a.transformMatrix?t.appendMatrix(a.transformMatrix):t.appendTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.regX,a.regY);for(var r=a.children.length,i=0;i<r;i++){var o=a.children[i];if(o.visible&&y)if(o.cacheCanvas&&!B||(o._updateState&&o._updateState(),!o.children)){this.batchCardCount+1>this._maxCardsPerBatch&&(this.batchReason="vertexOverflow",this._drawBuffers(u),this.batchCardCount=0),o._glMtx||(o._glMtx=new re.Matrix2D);var l,f,d,p,_=o._glMtx;_.copy(t),o.transformMatrix?_.appendMatrix(o.transformMatrix):_.appendTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.skewX,o.skewY,o.regX,o.regY);var P=o.cacheCanvas&&!B;if(o._webGLRenderStyle===2||P)l=!B&&o.cacheCanvas||o.image;else{if(o._webGLRenderStyle!==1||(f=o.spriteSheet.getFrame(o.currentFrame))===null)continue;l=f.image}var T=this._uvs,R=this._vertices,b=this._indices,L=this._alphas;if(l){if(l._storeID===void 0)d=this._loadTextureImage(u,l),this._insertTextureInBatch(u,d);else{if(!(d=this._textureDictionary[l._storeID])){this.vocalDebug&&console.log("Texture should not be looked up while not being stored.");continue}d._batchID!==this._batchID&&this._insertTextureInBatch(u,d)}var S,k=d._activeIndex;o._webGLRenderStyle===2||P?Pe=!P&&o.sourceRect?(o._uvRect||(o._uvRect={}),p=o.sourceRect,(S=o._uvRect).t=p.y/l.height,S.l=p.x/l.width,S.b=(p.y+p.height)/l.height,S.r=(p.x+p.width)/l.width,le=j=0,be=p.width+j,p.height+le):(S=e.UV_RECT,P?(j=(p=o.bitmapCache).x+p._filterOffX/p.scale,le=p.y+p._filterOffY/p.scale,be=p._drawWidth/p.scale+j,p._drawHeight/p.scale+le):(le=j=0,be=l.width+j,l.height+le)):o._webGLRenderStyle===1&&(m=f.rect,S=(S=f.uvRect)||e.buildUVRects(o.spriteSheet,o.currentFrame,!1),j=-f.regX,le=-f.regY,be=m.width-f.regX,Pe=m.height-f.regY);var P=this.batchCardCount*e.INDICIES_PER_CARD,m=2*P;R[m]=j*_.a+le*_.c+_.tx,R[1+m]=j*_.b+le*_.d+_.ty,R[2+m]=j*_.a+Pe*_.c+_.tx,R[3+m]=j*_.b+Pe*_.d+_.ty,R[4+m]=be*_.a+le*_.c+_.tx,R[5+m]=be*_.b+le*_.d+_.ty,R[6+m]=R[2+m],R[7+m]=R[3+m],R[8+m]=R[4+m],R[9+m]=R[5+m],R[10+m]=be*_.a+Pe*_.c+_.tx,R[11+m]=be*_.b+Pe*_.d+_.ty,T[m]=S.l,T[1+m]=S.t,T[2+m]=S.l,T[3+m]=S.b,T[4+m]=S.r,T[5+m]=S.t,T[6+m]=S.l,T[7+m]=S.b,T[8+m]=S.r,T[9+m]=S.t,T[10+m]=S.r,T[11+m]=S.b,b[P]=b[1+P]=b[2+P]=b[3+P]=b[4+P]=b[5+P]=k,L[P]=L[1+P]=L[2+P]=L[3+P]=L[4+P]=L[5+P]=o.alpha*y,this.batchCardCount++}}else this._appendToBatchGroup(o,u,t,o.alpha*y)}},g._drawBuffers=function(a){if(!(this.batchCardCount<=0)){this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason);var u=this._activeShader,c=this._vertexPositionBuffer,y=this._textureIndexBuffer,B=this._uvPositionBuffer,j=this._alphaBuffer;a.useProgram(u),a.bindBuffer(a.ARRAY_BUFFER,c),a.vertexAttribPointer(u.vertexPositionAttribute,c.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._vertices),a.bindBuffer(a.ARRAY_BUFFER,y),a.vertexAttribPointer(u.textureIndexAttribute,y.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._indices),a.bindBuffer(a.ARRAY_BUFFER,B),a.vertexAttribPointer(u.uvPositionAttribute,B.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._uvs),a.bindBuffer(a.ARRAY_BUFFER,j),a.vertexAttribPointer(u.alphaAttribute,j.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._alphas),a.uniformMatrix4fv(u.pMatrixUniform,a.FALSE,this._projectionMatrix);for(var le=0;le<this._batchTextureCount;le++){var be=this._batchTextures[le];a.activeTexture(a.TEXTURE0+le),a.bindTexture(a.TEXTURE_2D,be),this.setTextureParams(a,be.isPOT)}a.drawArrays(a.TRIANGLES,0,this.batchCardCount*e.INDICIES_PER_CARD),this._batchID++}},g._drawCover=function(a,u){0<this._isDrawing&&this._drawBuffers(a),this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover");var c=this._activeShader,y=this._vertexPositionBuffer,B=this._uvPositionBuffer;a.clear(a.COLOR_BUFFER_BIT),a.useProgram(c),a.bindBuffer(a.ARRAY_BUFFER,y),a.vertexAttribPointer(c.vertexPositionAttribute,y.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,e.COVER_VERT),a.bindBuffer(a.ARRAY_BUFFER,B),a.vertexAttribPointer(c.uvPositionAttribute,B.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,u?e.COVER_UV_FLIP:e.COVER_UV),a.uniform1i(c.samplerUniform,0),a.uniform1f(c.uprightUniform,u?0:1),a.drawArrays(a.TRIANGLES,0,e.INDICIES_PER_CARD)},re.StageGL=re.promote(e,"Stage")}(),function(){function e(a){this.DisplayObject_constructor(),typeof a=="string"?(this.image=document.createElement("img"),this.image.src=a):this.image=a,this.sourceRect=null,this._webGLRenderStyle=re.DisplayObject._StageGL_BITMAP}var g=re.extend(e,re.DisplayObject);g.initialize=e,g.isVisible=function(){var a=this.image,a=this.cacheCanvas||a&&(a.naturalWidth||a.getContext||2<=a.readyState);return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},g.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;var c,y,B,j,le,be=this.image,Pe=this.sourceRect;return be.getImage&&(be=be.getImage()),be&&(Pe?(c=Pe.x,y=Pe.y,B=c+Pe.width,j=y+Pe.height,c<(u=le=0)&&(le-=c,c=0),(Pe=be.width)<B&&(B=Pe),y<0&&(u-=y,y=0),(Pe=be.height)<j&&(j=Pe),a.drawImage(be,c,y,B-c,j-y,le,u,B-c,j-y)):a.drawImage(be,0,0)),!0},g.cache=function(a,u,c,y,B,j){this.bitmapCache||(this.bitmapCache=new re.BitmapCache),this.bitmapCache.define(this,a,u,c,y,B,j)},g.updateCache=function(a){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(a)},g.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},g.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},g.getBounds=function(){var u=this.DisplayObject_getBounds();if(u)return u;var a=this.image,u=this.sourceRect||a;return a&&(a.naturalWidth||a.getContext||2<=a.readyState)?this._rectangle.setValues(0,0,u.width,u.height):null},g.clone=function(a){var u=this.image;return u&&a&&(u=u.cloneNode()),u=new e(u),this.sourceRect&&(u.sourceRect=this.sourceRect.clone()),this._cloneProps(u),u},g.toString=function(){return"[Bitmap (name="+this.name+")]"},re.Bitmap=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=a,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=re.DisplayObject._StageGL_SPRITE,u!=null&&this.gotoAndPlay(u)}var g=re.extend(e,re.DisplayObject);g.initialize=e,g.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},g.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(0|this._currentFrame);return c?(u=c.rect,u.width&&u.height&&a.drawImage(c.image,u.x,u.y,u.width,u.height,-c.regX,-c.regY,u.width,u.height),!0):!1},g.play=function(){this.paused=!1},g.stop=function(){this.paused=!0},g.gotoAndPlay=function(a){this.paused=!1,this._skipAdvance=!0,this._goto(a)},g.gotoAndStop=function(a){this.paused=!0,this._goto(a)},g.advance=function(a){var u=this.framerate||this.spriteSheet.framerate,u=u&&a!=null?a/(1e3/u):1;this._normalizeFrame(u)},g.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},g.clone=function(){return this._cloneProps(new e(this.spriteSheet))},g.toString=function(){return"[Sprite (name="+this.name+")]"},g._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.currentAnimationFrame=this.currentAnimationFrame,a.framerate=this.framerate,a._animation=this._animation,a._currentFrame=this._currentFrame,a._skipAdvance=this._skipAdvance,a},g._tick=function(a){this.paused||(this._skipAdvance||this.advance(a&&a.delta),this._skipAdvance=!1),this.DisplayObject__tick(a)},g._normalizeFrame=function(a){a=a||0;var u=this._animation,c=this.paused,y=this._currentFrame;if(u){var B,j=u.speed||1,le=this.currentAnimationFrame;if((B=u.frames.length)<=le+a*j){var be=u.next;if(this._dispatchAnimationEnd(u,y,c,be,B-1))return;if(be)return this._goto(be,a-(B-le)/j);this.paused=!0,le=u.frames.length-1}else le+=a*j;this.currentAnimationFrame=le,this._currentFrame=u.frames[0|le]}else if(y=this._currentFrame+=a,B=this.spriteSheet.getNumFrames(),B<=y&&0<B&&!this._dispatchAnimationEnd(u,y,c,B-1)&&(this._currentFrame-=B)>=B)return this._normalizeFrame();y=0|this._currentFrame,this.currentFrame!=y&&(this.currentFrame=y,this.dispatchEvent("change"))},g._dispatchAnimationEnd=function(a,u,c,y,B){var j,le=a?a.name:null;return this.hasEventListener("animationend")&&((j=new re.Event("animationend")).name=le,j.next=y,this.dispatchEvent(j)),u=this._animation!=a||this._currentFrame!=u,u||c||!this.paused||(this.currentAnimationFrame=B,u=!0),u},g._goto=function(a,u){var c;this.currentAnimationFrame=0,isNaN(a)?(c=this.spriteSheet.getAnimation(a))&&(this._animation=c,this.currentAnimation=a,this._normalizeFrame(u)):(this.currentAnimation=this._animation=null,this._currentFrame=a,this._normalizeFrame())},re.Sprite=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),this.graphics=a||new re.Graphics}var g=re.extend(e,re.DisplayObject);g.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},g.draw=function(a,u){return this.DisplayObject_draw(a,u)||this.graphics.draw(a,this),!0},g.clone=function(a){return a=a&&this.graphics?this.graphics.clone():this.graphics,this._cloneProps(new e(a))},g.toString=function(){return"[Shape (name="+this.name+")]"},re.Shape=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(u,c,y){this.DisplayObject_constructor(),this.text=u,this.font=c,this.color=y,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var g=re.extend(e,re.DisplayObject),a=re.createCanvas?re.createCanvas():document.createElement("canvas");a.getContext&&(e._workingContext=a.getContext("2d"),a.width=a.height=1),e.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},g.isVisible=function(){var u=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&u)},g.draw=function(u,c){return this.DisplayObject_draw(u,c)?!0:(c=this.color||"#000",this.outline?(u.strokeStyle=c,u.lineWidth=+this.outline):u.fillStyle=c,this._drawText(this._prepContext(u)),!0)},g.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},g.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},g.getMeasuredHeight=function(){return this._drawText(null,{}).height},g.getBounds=function(){var B=this.DisplayObject_getBounds();if(B)return B;if(this.text==null||this.text==="")return null;var u=this._drawText(null,{}),c=this.maxWidth&&this.maxWidth<u.width?this.maxWidth:u.width,y=c*e.H_OFFSETS[this.textAlign||"left"],B=(this.lineHeight||this.getMeasuredLineHeight())*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(y,B,c,u.height)},g.getMetrics=function(){var u={lines:[]};return u.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),u.vOffset=u.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,u,u.lines)},g.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},g.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},g._cloneProps=function(u){return this.DisplayObject__cloneProps(u),u.textAlign=this.textAlign,u.textBaseline=this.textBaseline,u.maxWidth=this.maxWidth,u.outline=this.outline,u.lineHeight=this.lineHeight,u.lineWidth=this.lineWidth,u},g._prepContext=function(u){return u.font=this.font||"10px sans-serif",u.textAlign=this.textAlign||"left",u.textBaseline=this.textBaseline||"top",u.lineJoin="miter",u.miterLimit=2.5,u},g._drawText=function(u,c,y){var B=!!u;B||((u=e._workingContext).save(),this._prepContext(u));for(var j=this.lineHeight||this.getMeasuredLineHeight(),le=0,be=0,Pe=String(this.text).split(/(?:\r\n|\r|\n)/),t=0,r=Pe.length;t<r;t++){var i=Pe[t],o=null;if(this.lineWidth!=null&&(o=u.measureText(i).width)>this.lineWidth)for(var l=i.split(/(\s)/),i=l[0],o=u.measureText(i).width,f=1,d=l.length;f<d;f+=2){var p=u.measureText(l[f]+l[f+1]).width;o+p>this.lineWidth?(B&&this._drawTextLine(u,i,be*j),y&&y.push(i),le<o&&(le=o),i=l[f+1],o=u.measureText(i).width,be++):(i+=l[f]+l[f+1],o+=p)}B&&this._drawTextLine(u,i,be*j),y&&y.push(i),c&&o==null&&(o=u.measureText(i).width),le<o&&(le=o),be++}return c&&(c.width=le,c.height=be*j),B||u.restore(),c},g._drawTextLine=function(u,c,y){this.outline?u.strokeText(c,0,y,this.maxWidth||65535):u.fillText(c,0,y,this.maxWidth||65535)},g._getMeasuredWidth=function(u){var c=e._workingContext;return c.save(),u=this._prepContext(c).measureText(u).width,c.restore(),u},re.Text=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.Container_constructor(),this.text=a||"",this.spriteSheet=u,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}var g=re.extend(e,re.Container);e.maxPoolSize=100,e._spritePool=[],g.draw=function(a,u){this.DisplayObject_draw(a,u)||(this._updateState(),this.Container_draw(a,u))},g.getBounds=function(){return this._updateText(),this.Container_getBounds()},g.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&0<this.alpha&&this.scaleX!==0&&this.scaleY!==0&&a)},g.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},g.addChild=g.addChildAt=g.removeChild=g.removeChildAt=g.removeAllChildren=function(){},g._updateState=function(){this._updateText()},g._cloneProps=function(a){return this.Container__cloneProps(a),a.lineHeight=this.lineHeight,a.letterSpacing=this.letterSpacing,a.spaceWidth=this.spaceWidth,a},g._getFrameIndex=function(a,u){var c,y=u.getAnimation(a);return y||(a!=(c=a.toUpperCase())||a!=(c=a.toLowerCase())||(c=null),c&&(y=u.getAnimation(c))),y&&y.frames[0]},g._getFrame=function(a,u){return a=this._getFrameIndex(a,u),a==null?a:u.getFrame(a)},g._getLineHeight=function(a){return a=this._getFrame("1",a)||this._getFrame("T",a)||this._getFrame("L",a)||a.getFrame(0),a?a.rect.height:1},g._getSpaceWidth=function(a){return a=this._getFrame("1",a)||this._getFrame("l",a)||this._getFrame("e",a)||this._getFrame("a",a)||a.getFrame(0),a?a.rect.width:1},g._updateText=function(){var a,u,c=0,y=0,B=this._oldProps,j=!1,le=this.spaceWidth,be=this.lineHeight,Pe=this.spriteSheet,t=e._spritePool,r=this.children,i=0,o=r.length;for(u in B)B[u]!=this[u]&&(B[u]=this[u],j=!0);if(j){var l=!!this._getFrame(" ",Pe);l||le||(le=this._getSpaceWidth(Pe)),be=be||this._getLineHeight(Pe);for(var f=0,d=this.text.length;f<d;f++){var p,_=this.text.charAt(f);_!=" "||l?_!="\n"&&_!="\r"?(p=this._getFrameIndex(_,Pe))!=null&&(i<o?a=r[i]:(r.push(a=t.length?t.pop():new re.Sprite),a.parent=this,o++),a.spriteSheet=Pe,a.gotoAndStop(p),a.x=c,a.y=y,i++,c+=a.getBounds().width+this.letterSpacing):(_=="\r"&&this.text.charAt(f+1)=="\n"&&f++,c=0,y+=be):c+=le}for(;i<o;)t.push(a=r.pop()),a.parent=null,o--;t.length>e.maxPoolSize&&(t.length=e.maxPoolSize)}},re.BitmapText=re.promote(e,"Container")}(),function(){"use strict";function e(u){var c,y,B,j;this.Container_constructor(),e.inited||e.init(),u instanceof String||1<arguments.length?(c=u,y=arguments[1],B=arguments[2],j=arguments[3],B==null&&(B=-1),u=null):u&&(c=u.mode,y=u.startPosition,B=u.loop,j=u.labels),u=u||{labels:j},this.mode=c||e.INDEPENDENT,this.startPosition=y||0,this.loop=B===!0?-1:B||0,this.currentFrame=0,this.paused=u.paused||!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||u.frameBounds,this.framerate=null,u.useTicks=u.paused=!0,this.timeline=new re.Timeline(u),this._synchOffset=0,this._rawPosition=-1,this._bound_resolveState=this._resolveState.bind(this),this._t=0,this._managed={}}var g=re.extend(e,re.Container);e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",e.inited=!1,e.init=function(){e.inited||(a.install(),e.inited=!0)},g._getLabels=function(){return this.timeline.getLabels()},g.getLabels=re.deprecate(g._getLabels,"MovieClip.getLabels"),g._getCurrentLabel=function(){return this.timeline.currentLabel},g.getCurrentLabel=re.deprecate(g._getCurrentLabel,"MovieClip.getCurrentLabel"),g._getDuration=function(){return this.timeline.duration},g.getDuration=re.deprecate(g._getDuration,"MovieClip.getDuration");try{Object.defineProperties(g,{labels:{get:g._getLabels},currentLabel:{get:g._getCurrentLabel},totalFrames:{get:g._getDuration},duration:{get:g._getDuration}})}catch(u){}function a(){throw"MovieClipPlugin cannot be instantiated."}g.initialize=e,g.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},g.draw=function(u,c){return this.DisplayObject_draw(u,c)||(this._updateState(),this.Container_draw(u,c)),!0},g.play=function(){this.paused=!1},g.stop=function(){this.paused=!0},g.gotoAndPlay=function(u){this.paused=!1,this._goto(u)},g.gotoAndStop=function(u){this.paused=!0,this._goto(u)},g.advance=function(u){var c=e.INDEPENDENT;if(this.mode===c){for(var y=this,B=y.framerate;(y=y.parent)&&B===null;)y.mode===c&&(B=y._framerate);if(this._framerate=B,!(this.totalFrames<=1)){var u=B!==null&&B!==-1&&u!==null?u/(1e3/B)+this._t:1,j=0|u;for(this._t=u-j;!this.paused&&j--;)this._updateTimeline(this._rawPosition+1,!1)}}},g.clone=function(){throw"MovieClip cannot be cloned."},g.toString=function(){return"[MovieClip (name="+this.name+")]"},g._updateState=function(){this._rawPosition!==-1&&this.mode===e.INDEPENDENT||this._updateTimeline(-1)},g._tick=function(u){this.advance(u&&u.delta),this.Container__tick(u)},g._goto=function(u){u=this.timeline.resolve(u),u!=null&&(this._t=0,this._updateTimeline(u,!0))},g._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},g._updateTimeline=function(u,c){var y=this.mode!==e.INDEPENDENT,B=this.timeline;y&&(u=this.startPosition+(this.mode===e.SINGLE_FRAME?0:this._synchOffset)),u<0&&(u=0),this._rawPosition===u&&!y||(this._rawPosition=u,B.loop=this.loop,B.setPosition(u,y||!this.actionsEnabled,c,this._bound_resolveState))},g._renderFirstFrame=function(){var u=this.timeline,c=u.rawPosition;u.setPosition(0,!0,!0,this._bound_resolveState),u.rawPosition=c},g._resolveState=function(){var u,c=this.timeline;for(u in this.currentFrame=c.position,this._managed)this._managed[u]=1;for(var y=c.tweens,B=0,j=y.length;B<j;B++){var le=y[B],be=le.target;be===this||le.passive||(le=le._stepPosition,be instanceof re.DisplayObject?this._addManagedChild(be,le):this._setState(be.state,le))}for(var Pe=this.children,B=Pe.length-1;0<=B;B--){var t=Pe[B].id;this._managed[t]===1&&(this.removeChildAt(B),delete this._managed[t])}},g._setState=function(u,c){if(u)for(var y=u.length-1;0<=y;y--){var B,j=u[y],le=j.t,be=j.p;for(B in be)le[B]=be[B];this._addManagedChild(le,c)}},g._addManagedChild=function(u,c){u._off||(this.addChildAt(u,0),u instanceof e&&(u._synchOffset=c,u.mode===e.INDEPENDENT&&u.autoReset&&!this._managed[u.id]&&u._reset()),this._managed[u.id]=2)},g._getBounds=function(u,c){var y=this.DisplayObject_getBounds();return y||this.frameBounds&&(y=this._rectangle.copy(this.frameBounds[this.currentFrame])),y?this._transformBounds(y,u,c):this.Container__getBounds(u,c)},re.MovieClip=re.promote(e,"Container"),a.priority=100,a.ID="MovieClip",a.install=function(){re.Tween._installPlugin(a)},a.init=function(u,c,y){c==="startPosition"&&u.target instanceof e&&u._addPlugin(a)},a.step=function(u,c,y){},a.change=function(u,c,y,B,j,le){if(y==="startPosition")return(j===1?c:c.prev).props[y]}}(),function(){"use strict";function e(){throw"SpriteSheetUtils cannot be instantiated"}var g=re.createCanvas?re.createCanvas():document.createElement("canvas");g.getContext&&(e._workingCanvas=g,e._workingContext=g.getContext("2d"),g.width=g.height=1),e.extractFrame=function(a,u){isNaN(u)&&(u=a.getAnimation(u).frames[0]);var c=a.getFrame(u);return c?(a=c.rect,u=e._workingCanvas,u.width=a.width,u.height=a.height,e._workingContext.drawImage(c.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),a=document.createElement("img"),a.src=u.toDataURL("image/png"),a):null},e.addFlippedFrames=re.deprecate(null,"SpriteSheetUtils.addFlippedFrames"),e.mergeAlpha=re.deprecate(null,"SpriteSheetUtils.mergeAlpha"),e._flip=function(a,u,c,y){for(var B=a._images,j=e._workingCanvas,le=e._workingContext,be=B.length/u,Pe=0;Pe<be;Pe++){var t=B[Pe];t.__tmp=Pe,le.setTransform(1,0,0,1,0,0),le.clearRect(0,0,j.width+1,j.height+1),j.width=t.width,j.height=t.height,le.setTransform(c?-1:1,0,0,y?-1:1,c?t.width:0,y?t.height:0),le.drawImage(t,0,0);var r=document.createElement("img");r.src=j.toDataURL("image/png"),r.width=t.width||t.naturalWidth,r.height=t.height||t.naturalHeight,B.push(r)}for(var i=a._frames,o=i.length/u,Pe=0;Pe<o;Pe++){var l=(t=i[Pe]).rect.clone(),f={image:r=B[t.image.__tmp+be*u],rect:l,regX:t.regX,regY:t.regY};c&&(l.x=(r.width||r.naturalWidth)-l.x-l.width,f.regX=l.width-t.regX),y&&(l.y=(r.height||r.naturalHeight)-l.y-l.height,f.regY=l.height-t.regY),i.push(f)}var d="_"+(c?"h":"")+(y?"v":""),p=a._animations,_=a._data,P=p.length/u;for(Pe=0;Pe<P;Pe++){var T=p[Pe],R={name:T+d,speed:(t=_[T]).speed,next:t.next,frames:[]};t.next&&(R.next+=d);for(var b=0,L=(i=t.frames).length;b<L;b++)R.frames.push(i[b]+o*u);_[R.name]=R,p.push(R.name)}},re.SpriteSheetUtils=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=a||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var g=re.extend(e,re.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",g.addFrame=function(a,u,c,y,B){if(this._data)throw e.ERR_RUNNING;return u=u||a.bounds||a.nominalBounds,!u&&a.getBounds&&(u=a.getBounds()),u?(c=c||1,this._frames.push({source:a,sourceRect:u,scale:c,funct:y,data:B,index:this._frames.length,height:u.height*c})-1):null},g.addAnimation=function(a,u,c,y){if(this._data)throw e.ERR_RUNNING;this._animations[a]={frames:u,next:c,speed:y}},g.addMovieClip=function(a,u,c,y,B,j){if(this._data)throw e.ERR_RUNNING;var le=a.frameBounds,be=u||a.bounds||a.nominalBounds;if(!be&&a.getBounds&&(be=a.getBounds()),be||le){for(var Pe,t=this._frames.length,r=a.timeline.duration,i=0;i<r;i++){var o=le&&le[i]?le[i]:be;this.addFrame(a,o,c,this._setupMovieClipFrame,{i,f:y,d:B})}var l,f=a.timeline._labels,d=[];for(l in f)d.push({index:f[l],label:l});if(d.length)for(d.sort(function(b,L){return b.index-L.index}),i=0,Pe=d.length;i<Pe;i++){for(var p=d[i].label,_=t+d[i].index,P=t+(i==Pe-1?r:d[i+1].index),T=[],R=_;R<P;R++)T.push(R);j&&!(p=j(p,a,_,P))||this.addAnimation(p,T,!0)}}},g.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},g.buildAsync=function(a){if(this._data)throw e.ERR_RUNNING;this.timeSlice=a,this._startBuild();var u=this;this._timerID=setTimeout(function(){u._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},g.stopAsync=function(){clearTimeout(this._timerID),this._data=null},g.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},g.toString=function(){return"[SpriteSheetBuilder]"},g._startBuild=function(){var a=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var u=[];this._data={images:[],frames:u,framerate:this.framerate,animations:this._animations};var c=this._frames.slice();if(c.sort(function(Pe,t){return Pe.height<=t.height?-1:1}),c[c.length-1].height+2*a>this.maxHeight)throw e.ERR_DIMENSIONS;for(var y=0,B=0,j=0;c.length;){var le,be=this._fillRow(c,y,j,u,a);be.w>B&&(B=be.w),y+=be.h,be.h&&c.length||((le=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=this._getSize(B,this.maxWidth),le.height=this._getSize(y,this.maxHeight),this._data.images[j]=le,be.h||(B=y=0,j++))}},g._setupMovieClipFrame=function(a,u){var c=a.actionsEnabled;a.actionsEnabled=!1,a.gotoAndStop(u.i),a.actionsEnabled=c,u.f&&u.f(a,u.d,u.i)},g._getSize=function(a,u){for(var c=4;Math.pow(2,++c)<a;);return Math.min(u,Math.pow(2,c))},g._fillRow=function(a,u,c,y,B){for(var j=this.maxWidth,le=this.maxHeight-(u+=B),be=B,Pe=0,t=a.length-1;0<=t;t--){var r=a[t],i=this._scale*r.scale,p=r.sourceRect,o=r.source,l=Math.floor(i*p.x-B),f=Math.floor(i*p.y-B),d=Math.ceil(i*p.height+2*B),p=Math.ceil(i*p.width+2*B);if(j<p)throw e.ERR_DIMENSIONS;le<d||j<be+p||(r.img=c,r.rect=new re.Rectangle(be,u,p,d),Pe=Pe||d,a.splice(t,1),y[r.index]=[be,u,p,d,c,Math.round(-l+i*o.regX-B),Math.round(-f+i*o.regY-B)],be+=p)}return{w:be,h:Pe}},g._endBuild=function(){this.spriteSheet=new re.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},g._run=function(){for(var a,u=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),c=new Date().getTime()+u,y=!1;c>new Date().getTime();)if(!this._drawNext()){y=!0;break}y?this._endBuild():(a=this)._timerID=setTimeout(function(){a._run()},50-u);var B=this.progress=this._index/this._frames.length;this.hasEventListener("progress")&&((u=new re.Event("progress")).progress=B,this.dispatchEvent(u))},g._drawNext=function(){var a=this._frames[this._index],u=a.scale*this._scale,c=a.rect,y=a.sourceRect,B=this._data.images[a.img].getContext("2d");return a.funct&&a.funct(a.source,a.data),B.save(),B.beginPath(),B.rect(c.x,c.y,c.width,c.height),B.clip(),B.translate(Math.ceil(c.x-y.x*u),Math.ceil(c.y-y.y*u)),B.scale(u,u),a.source.draw(B),B.restore(),++this._index<this._frames.length},re.SpriteSheetBuilder=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),typeof a=="string"&&(a=document.getElementById(a)),this.mouseEnabled=!1;var u=a.style;u.position="absolute",u.transformOrigin=u.WebkitTransformOrigin=u.msTransformOrigin=u.MozTransformOrigin=u.OTransformOrigin="0% 0%",this.htmlElement=a,this._oldProps=null,this._oldStage=null,this._drawAction=null}var g=re.extend(e,re.DisplayObject);g.isVisible=function(){return this.htmlElement!=null},g.draw=function(a,u){return!0},g.cache=function(){},g.uncache=function(){},g.updateCache=function(){},g.hitTest=function(){},g.localToGlobal=function(){},g.globalToLocal=function(){},g.localToLocal=function(){},g.clone=function(){throw"DOMElement cannot be cloned."},g.toString=function(){return"[DOMElement (name="+this.name+")]"},g._tick=function(a){var u=this.stage;u&&u!==this._oldStage&&(this._drawAction&&u.off("drawend",this._drawAction),this._drawAction=u.on("drawend",this._handleDrawEnd,this),this._oldStage=u),this.DisplayObject__tick(a)},g._handleDrawEnd=function(a){var u,c,y,B,j,le=this.htmlElement;le&&(u=le.style,y=(c=this.getConcatenatedDisplayProps(this._props)).matrix,(j=c.visible?"visible":"hidden")!=u.visibility&&(u.visibility=j),c.visible&&(B=1e4,(j=(le=this._oldProps)&&le.matrix)&&j.equals(y)||(j="matrix("+(y.a*B|0)/B+","+(y.b*B|0)/B+","+(y.c*B|0)/B+","+(y.d*B|0)/B+","+(y.tx+.5|0),u.transform=u.WebkitTransform=u.OTransform=u.msTransform=j+","+(y.ty+.5|0)+")",u.MozTransform=j+"px,"+(y.ty+.5|0)+"px)",(le=le||(this._oldProps=new re.DisplayProps(!0,null))).matrix.copy(y)),le.alpha!=c.alpha&&(u.opacity=""+(c.alpha*B|0)/B,le.alpha=c.alpha)))},re.DOMElement=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}var g=e.prototype;g.getBounds=function(a){return a},g.shaderParamSetup=function(a,u,c){},g.applyFilter=function(a,u,c,y,B,j,le,be){j=j||a,le==null&&(le=u),be==null&&(be=c);try{var Pe=a.getImageData(u,c,y,B)}catch(t){return!1}return!!this._applyFilter(Pe)&&(j.putImageData(Pe,le,be),!0)},g.toString=function(){return"[Filter]"},g.clone=function(){return new e},g._applyFilter=function(a){return!0},re.Filter=e}(),function(){"use strict";function e(){this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0}var g=e.prototype;e.getFilterBounds=function(a,u){u=u||new re.Rectangle;var c=a.filters,y=c&&c.length;if(!!y<=0)return u;for(var B=0;B<y;B++){var j=c[B];j&&j.getBounds&&(j=j.getBounds())&&(B==0?u.setValues(j.x,j.y,j.width,j.height):u.extend(j.x,j.y,j.width,j.height))}return u},g.toString=function(){return"[BitmapCache]"},g.define=function(a,u,c,y,B,j,le){if(!a)throw"No symbol to cache";this._options=le,this.target=a,this.width=1<=y?y:1,this.height=1<=B?B:1,this.x=u||0,this.y=c||0,this.scale=j||1,this.update()},g.update=function(a){if(!this.target)throw"define() must be called before update()";var u=e.getFilterBounds(this.target),c=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+u.width,this._drawHeight=Math.ceil(this.height*this.scale)+u.height,c&&this._drawWidth==c.width&&this._drawHeight==c.height||this._updateSurface(),this._filterOffX=u.x,this._filterOffY=u.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(a),this.cacheID=this.cacheID?this.cacheID+1:1},g.release=function(){var a;this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):(a=this.target.stage)instanceof re.StageGL&&a.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},g.getCacheDataURL=function(){var a=this.target&&this.target.cacheCanvas;return a?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=a.toDataURL?a.getCacheDataURL():null),this._cacheDataURL):null},g.draw=function(a){return!!this.target&&(a.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)},g._updateSurface=function(){if(!this._options||!this._options.useGL)return(a=(a=this.target.cacheCanvas)||(this.target.cacheCanvas=re.createCanvas?re.createCanvas():document.createElement("canvas"))).width=this._drawWidth,void(a.height=this._drawHeight);if(!this._webGLCache)if(this._options.useGL==="stage"){if(!this.target.stage||!this.target.stage.isWebGL){var u="Cannot use 'stage' for cache because the object's parent stage is ";throw u+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage."}this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else if(this._options.useGL==="new")this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new re.StageGL(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0;else{if(!(this._options.useGL instanceof re.StageGL))throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=!0,this._webGLCache=this._options.useGL,this._webGLCache.isCacheControlled=!0}var a=this.target.cacheCanvas,u=this._webGLCache;u.isCacheControlled&&(a.width=this._drawWidth,a.height=this._drawHeight,u.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):u.isCacheControlled||u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},g._drawToCache=function(a){var u=this.target.cacheCanvas,c=this.target,y=this._webGLCache;y?(y.cacheDraw(c,c.filters,this),(u=this.target.cacheCanvas).width=this._drawWidth,u.height=this._drawHeight):(y=u.getContext("2d"),a||y.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),y.save(),y.globalCompositeOperation=a,y.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),y.translate(-this.x,-this.y),c.draw(y,!0),y.restore(),c.filters&&c.filters.length&&this._applyFilters(y)),u._invalid=!0},g._applyFilters=function(a){for(var u,c=this.target.filters,y=this._drawWidth,B=this._drawHeight,j=0,le=c[j];le.usesContext?(u&&(a.putImageData(u,0,0),u=null),le.applyFilter(a,0,0,y,B)):(u=u||a.getImageData(0,0,y,B),le._applyFilter(u)),le=le._multiPass!==null?le._multiPass:c[++j],le;);u&&a.putImageData(u,0,0)},re.BitmapCache=e}(),function(){"use strict";function e(a,u,c){this.Filter_constructor(),this._blurX=a,this._blurXTable=[],this._lastBlurX=null,this._blurY=u,this._blurYTable=[],this._lastBlurY=null,this._quality,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}",(isNaN(c)||c<1)&&(c=1),this.setQuality(0|c)}var g=re.extend(e,re.Filter);g.getBlurX=function(){return this._blurX},g.getBlurY=function(){return this._blurY},g.setBlurX=function(a){(isNaN(a)||a<0)&&(a=0),this._blurX=a},g.setBlurY=function(a){(isNaN(a)||a<0)&&(a=0),this._blurY=a},g.getQuality=function(){return this._quality},g.setQuality=function(a){(isNaN(a)||a<0)&&(a=0),this._quality=0|a},g._getShader=function(){var a=this._lastBlurX!==this._blurX,u=this._lastBlurY!==this._blurY,c=this._lastQuality!==this._quality;return a||u||c?((a||c)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(u||c)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader},g._setShader=function(){this._compiledShader};try{Object.defineProperties(g,{blurX:{get:g.getBlurX,set:g.setBlurX},blurY:{get:g.getBlurY,set:g.setBlurY},quality:{get:g.getQuality,set:g.setQuality},_builtShader:{get:g._getShader,set:g._setShader}})}catch(a){console.log(a)}g._getTable=function(a){if(a<=1)return[1];for(var u=[],a=Math.ceil(2*a),c=(a+=a%2?0:1)/2|0,y=-c;y<=c;y++){var B=y/c*4.2;u.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(B,2)/4))}var j=u.reduce(function(le,be){return le+be});return u.map(function(le,be,Pe){return le/j})},g._updateShader=function(){var a;this._blurX!==void 0&&this._blurY!==void 0&&(a=(a=(a=this.FRAG_SHADER_TEMPLATE).replace(/\{\{blurX\}\}/g,this._blurXTable.length.toFixed(0))).replace(/\{\{blurY\}\}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=a)},g.shaderParamSetup=function(a,u,c){a.uniform1fv(a.getUniformLocation(c,"xWeight"),this._blurXTable),a.uniform1fv(a.getUniformLocation(c,"yWeight"),this._blurYTable),a.uniform2f(a.getUniformLocation(c,"textureOffset"),2/(u._viewportWidth*this._quality),2/(u._viewportHeight*this._quality))},e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],g.getBounds=function(a){var u=0|this.blurX,c=0|this.blurY;if(u<=0&&c<=0)return a;var y=Math.pow(this.quality,.2);return(a||new re.Rectangle).pad(c*y+1,u*y+1,c*y+1,u*y+1)},g.clone=function(){return new e(this.blurX,this.blurY,this.quality)},g.toString=function(){return"[BlurFilter]"},g._applyFilter=function(a){var u=this._blurX>>1;if(isNaN(u)||u<0)return!1;var c=this._blurY>>1;if(isNaN(c)||c<0||u==0&&c==0)return!1;var y=this.quality;(isNaN(y)||y<1)&&(y=1),3<(y|=0)&&(y=3),y<1&&(y=1);for(var B=a.data,j=0,le=0,E=0,be=0,Pe=0,t=0,r=0,i=0,o=0,l=0,f=0,d=0,p=0,_=0,P=0,T=u+u+1|0,R=c+c+1|0,b=0|a.width,L=0|a.height,S=b-1|0,k=L-1|0,m=1+u|0,A=1+c|0,D={r:0,b:0,g:0,a:0},C=D,E=1;E<T;E++)C=C.n={r:0,b:0,g:0,a:0};C.n=D;var X={r:0,b:0,g:0,a:0},Z=X;for(E=1;E<R;E++)Z=Z.n={r:0,b:0,g:0,a:0};Z.n=X;for(var V=null,O=0|e.MUL_TABLE[u],ne=0|e.SHG_TABLE[u],N=0|e.MUL_TABLE[c],q=0|e.SHG_TABLE[c];0<y--;){r=t=0;for(var U=O,z=ne,le=L;-1<--le;){for(i=m*(d=B[0|t]),o=m*(p=B[t+1|0]),l=m*(_=B[t+2|0]),f=m*(P=B[t+3|0]),C=D,E=m;-1<--E;)C.r=d,C.g=p,C.b=_,C.a=P,C=C.n;for(E=1;E<m;E++)be=t+((S<E?S:E)<<2)|0,i+=C.r=B[be],o+=C.g=B[be+1],l+=C.b=B[be+2],f+=C.a=B[be+3],C=C.n;for(V=D,j=0;j<b;j++)B[t++]=i*U>>>z,B[t++]=o*U>>>z,B[t++]=l*U>>>z,B[t++]=f*U>>>z,be=r+((be=j+u+1)<S?be:S)<<2,i-=V.r-(V.r=B[be]),o-=V.g-(V.g=B[be+1]),l-=V.b-(V.b=B[be+2]),f-=V.a-(V.a=B[be+3]),V=V.n;r+=b}for(U=N,z=q,j=0;j<b;j++){for(i=A*(d=B[t=j<<2|0])|0,o=A*(p=B[t+1|0])|0,l=A*(_=B[t+2|0])|0,f=A*(P=B[t+3|0])|0,Z=X,E=0;E<A;E++)Z.r=d,Z.g=p,Z.b=_,Z.a=P,Z=Z.n;for(Pe=b,E=1;E<=c;E++)t=Pe+j<<2,i+=Z.r=B[t],o+=Z.g=B[t+1],l+=Z.b=B[t+2],f+=Z.a=B[t+3],Z=Z.n,E<k&&(Pe+=b);if(t=j,V=X,0<y)for(le=0;le<L;le++)B[(be=t<<2)+3]=P=f*U>>>z,0<P?(B[be]=i*U>>>z,B[be+1]=o*U>>>z,B[be+2]=l*U>>>z):B[be]=B[be+1]=B[be+2]=0,be=j+((be=le+A)<k?be:k)*b<<2,i-=V.r-(V.r=B[be]),o-=V.g-(V.g=B[be+1]),l-=V.b-(V.b=B[be+2]),f-=V.a-(V.a=B[be+3]),V=V.n,t+=b;else for(le=0;le<L;le++)B[(be=t<<2)+3]=P=f*U>>>z,0<P?(P=255/P,B[be]=(i*U>>>z)*P,B[be+1]=(o*U>>>z)*P,B[be+2]=(l*U>>>z)*P):B[be]=B[be+1]=B[be+2]=0,be=j+((be=le+A)<k?be:k)*b<<2,i-=V.r-(V.r=B[be]),o-=V.g-(V.g=B[be+1]),l-=V.b-(V.b=B[be+2]),f-=V.a-(V.a=B[be+3]),V=V.n,t+=b}}return!0},re.BlurFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.alphaMap=a,this._alphaMap=null,this._mapData=null,this._mapTexture=null,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}"}var g=re.extend(e,re.Filter);g.shaderParamSetup=function(a,u,c){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.alphaMap),a.uniform1i(a.getUniformLocation(c,"uAlphaSampler"),1)},g.clone=function(){var a=new e(this.alphaMap);return a._alphaMap=this._alphaMap,a._mapData=this._mapData,a},g.toString=function(){return"[AlphaMapFilter]"},g._applyFilter=function(a){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var u=a.data,c=this._mapData,y=0,B=u.length;y<B;y+=4)u[y+3]=c[y]||0;return!0},g._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var a,u=this._alphaMap=this.alphaMap,c=u;u instanceof HTMLCanvasElement?a=c.getContext("2d"):((c=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=u.width,c.height=u.height,(a=c.getContext("2d")).drawImage(u,0,0));try{var y=a.getImageData(0,0,u.width,u.height)}catch(B){return!1}return this._mapData=y.data,!0},re.AlphaMapFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.mask=a,this.usesContext=!0,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}"}var g=re.extend(e,re.Filter);g.shaderParamSetup=function(a,u,c){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.mask),a.uniform1i(a.getUniformLocation(c,"uAlphaSampler"),1)},g.applyFilter=function(a,u,c,y,B,j,le,be){return!this.mask||(le==null&&(le=u),be==null&&(be=c),(j=j||a).save(),a==j&&(j.globalCompositeOperation="destination-in",j.drawImage(this.mask,le,be),j.restore(),!0))},g.clone=function(){return new e(this.mask)},g.toString=function(){return"[AlphaMaskFilter]"},re.AlphaMaskFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a,u,c,y,B,j,le,be){this.Filter_constructor(),this.redMultiplier=a!=null?a:1,this.greenMultiplier=u!=null?u:1,this.blueMultiplier=c!=null?c:1,this.alphaMultiplier=y!=null?y:1,this.redOffset=B||0,this.greenOffset=j||0,this.blueOffset=le||0,this.alphaOffset=be||0,this.FRAG_SHADER_BODY="uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}"}var g=re.extend(e,re.Filter);g.shaderParamSetup=function(a,u,c){a.uniform4f(a.getUniformLocation(c,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),a.uniform4f(a.getUniformLocation(c,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},g.toString=function(){return"[ColorFilter]"},g.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},g._applyFilter=function(a){for(var u=a.data,c=u.length,y=0;y<c;y+=4)u[y]=u[y]*this.redMultiplier+this.redOffset,u[y+1]=u[y+1]*this.greenMultiplier+this.greenOffset,u[y+2]=u[y+2]*this.blueMultiplier+this.blueOffset,u[y+3]=u[y+3]*this.alphaMultiplier+this.alphaOffset;return!0},re.ColorFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a,u,c,y){this.setColor(a,u,c,y)}var g=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.LENGTH=(e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]).length,g.setColor=function(a,u,c,y){return this.reset().adjustColor(a,u,c,y)},g.reset=function(){return this.copy(e.IDENTITY_MATRIX)},g.adjustColor=function(a,u,c,y){return this.adjustHue(y),this.adjustContrast(u),this.adjustBrightness(a),this.adjustSaturation(c)},g.adjustBrightness=function(a){return a==0||isNaN(a)||(a=this._cleanValue(a,255),this._multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1])),this},g.adjustContrast=function(a){return a==0||isNaN(a)||(u=(a=this._cleanValue(a,100))<0?127+a/100*127:127*(u=(u=a%1)==0?e.DELTA_INDEX[a]:e.DELTA_INDEX[a<<0]*(1-u)+e.DELTA_INDEX[1+(a<<0)]*u)+127,this._multiplyMatrix([u/127,0,0,0,.5*(127-u),0,u/127,0,0,.5*(127-u),0,0,u/127,0,.5*(127-u),0,0,0,1,0,0,0,0,0,1])),this;var u},g.adjustSaturation=function(a){return a==0||isNaN(a)?this:(a=1+(0<(a=this._cleanValue(a,100))?3*a/100:a/100),this._multiplyMatrix([.3086*(1-a)+a,.6094*(1-a),.082*(1-a),0,0,.3086*(1-a),.6094*(1-a)+a,.082*(1-a),0,0,.3086*(1-a),.6094*(1-a),.082*(1-a)+a,0,0,0,0,0,1,0,0,0,0,0,1]),this)},g.adjustHue=function(j){if(j==0||isNaN(j))return this;j=this._cleanValue(j,180)/180*Math.PI;var u=Math.cos(j),c=Math.sin(j),y=.213,B=.715,j=.072;return this._multiplyMatrix([y+.787*u+c*-y,B+u*-B+c*-B,j+u*-j+.928*c,0,0,y+u*-y+.143*c,B+u*(1-B)+.14*c,j+u*-j+-.283*c,0,0,y+u*-y+-.787*c,B+u*-B+c*B,j+.928*u+c*j,0,0,0,0,0,1,0,0,0,0,0,1]),this},g.concat=function(a){return(a=this._fixMatrix(a)).length!=e.LENGTH||this._multiplyMatrix(a),this},g.clone=function(){return new e().copy(this)},g.toArray=function(){for(var a=[],u=0,c=e.LENGTH;u<c;u++)a[u]=this[u];return a},g.copy=function(a){for(var u=e.LENGTH,c=0;c<u;c++)this[c]=a[c];return this},g.toString=function(){return"[ColorMatrix]"},g._multiplyMatrix=function(a){for(var u,c=[],y=0;y<5;y++){for(u=0;u<5;u++)c[u]=this[u+5*y];for(u=0;u<5;u++){for(var B=0,j=0;j<5;j++)B+=a[u+5*j]*c[j];this[u+5*y]=B}}},g._cleanValue=function(a,u){return Math.min(u,Math.max(-u,a))},g._fixMatrix=function(a){return a instanceof e&&(a=a.toArray()),a.length<e.LENGTH?a=a.slice(0,a.length).concat(e.IDENTITY_MATRIX.slice(a.length,e.LENGTH)):a.length>e.LENGTH&&(a=a.slice(0,e.LENGTH)),a},re.ColorMatrix=e}(),function(){"use strict";function e(a){this.Filter_constructor(),this.matrix=a,this.FRAG_SHADER_BODY="uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}"}var g=re.extend(e,re.Filter);g.shaderParamSetup=function(a,u,c){var y=this.matrix,B=new Float32Array([y[0],y[1],y[2],y[3],y[5],y[6],y[7],y[8],y[10],y[11],y[12],y[13],y[15],y[16],y[17],y[18]]);a.uniformMatrix4fv(a.getUniformLocation(c,"uColorMatrix"),!1,B),a.uniform4f(a.getUniformLocation(c,"uColorMatrixOffset"),y[4]/255,y[9]/255,y[14]/255,y[19]/255)},g.toString=function(){return"[ColorMatrixFilter]"},g.clone=function(){return new e(this.matrix)},g._applyFilter=function(a){for(var u,c,y,B,j=a.data,le=j.length,a=this.matrix,be=a[0],Pe=a[1],t=a[2],r=a[3],i=a[4],o=a[5],l=a[6],f=a[7],d=a[8],p=a[9],_=a[10],P=a[11],T=a[12],R=a[13],b=a[14],L=a[15],S=a[16],k=a[17],m=a[18],A=a[19],D=0;D<le;D+=4)u=j[D],c=j[D+1],y=j[D+2],B=j[D+3],j[D]=u*be+c*Pe+y*t+B*r+i,j[D+1]=u*o+c*l+y*f+B*d+p,j[D+2]=u*_+c*P+y*T+B*R+b,j[D+3]=u*L+c*S+y*k+B*m+A;return!0},re.ColorMatrixFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.MSPointerEvent&&0<window.navigator.msMaxTouchPoints||window.PointerEvent&&0<window.navigator.maxTouchPoints)},e.enable=function(g,a,u,c){return!!(g&&g.canvas&&e.isSupported())&&(g.__touch||(g.__touch={pointers:{},multitouch:!a,preventDefault:!u,count:0},c?"ontouchstart"in window?e._enable(g):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(g):"ontouchstart"in window||re.BrowserDetect.isChrome||re.BrowserDetect.isEdge||re.BrowserDetect.isFirefox?e._enable(g):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(g)),!0)},e.disable=function(g){g&&("ontouchstart"in window||re.BrowserDetect.isChrome||re.BrowserDetect.isFirefox?e._disable(g):(window.PointerEvent||window.MSPointerEvent)&&e._IE_disable(g),delete g.__touch)},e._enable=function(g){var a=g.canvas,u=g.__touch.f=function(c){e._handleEvent(g,c)};a.addEventListener("pointerdown",function(c){c.pointerType=="touch"?g.enableDOMEvents(!1):c.pointerType=="mouse"&&g.enableDOMEvents(!0)},!1),a.addEventListener("touchstart",u,!1),a.addEventListener("touchmove",u,!1),a.addEventListener("touchend",u,!1),a.addEventListener("touchcancel",u,!1)},e._disable=function(g){var a=g.canvas;a&&(g=g.__touch.f,a.removeEventListener("touchstart",g,!1),a.removeEventListener("touchmove",g,!1),a.removeEventListener("touchend",g,!1),a.removeEventListener("touchcancel",g,!1))},e._handleEvent=function(g,a){if(g){g.__touch.preventDefault&&a.preventDefault&&a.preventDefault();for(var u=a.changedTouches,c=a.type,y=0,B=u.length;y<B;y++){var j=u[y],le=j.identifier;j.target==g.canvas&&(c==="touchstart"?this._handleStart(g,le,a,j.pageX,j.pageY):c==="touchmove"?this._handleMove(g,le,a,j.pageX,j.pageY):c!=="touchend"&&c!=="touchcancel"||this._handleEnd(g,le,a))}}},e._IE_enable=function(g){var a=g.canvas,u=g.__touch.f=function(c){e._IE_handleEvent(g,c)};a.style["-webkit-tap-highlight-color"]="transparent",window.PointerEvent===void 0?(a.addEventListener("MSPointerDown",u,!1),window.addEventListener("MSPointerMove",u,!1),window.addEventListener("MSPointerUp",u,!1),window.addEventListener("MSPointerCancel",u,!1),g.__touch.preventDefault&&(a.style.msTouchAction="none")):(a.addEventListener("pointerdown",u,!1),window.addEventListener("pointermove",u,!1),window.addEventListener("pointerup",u,!1),window.addEventListener("pointercancel",u,!1),g.__touch.preventDefault&&(a.style.touchAction="none")),g.__touch.activeIDs={}},e._IE_disable=function(g){var a=g.__touch.f;window.PointerEvent===void 0?(window.removeEventListener("MSPointerMove",a,!1),window.removeEventListener("MSPointerUp",a,!1),window.removeEventListener("MSPointerCancel",a,!1),g.canvas&&g.canvas.removeEventListener("MSPointerDown",a,!1)):(window.removeEventListener("pointermove",a,!1),window.removeEventListener("pointerup",a,!1),window.removeEventListener("pointercancel",a,!1),g.canvas&&g.canvas.removeEventListener("pointerdown",a,!1))},e._IE_handleEvent=function(g,a){if(g){g.__touch.preventDefault&&a.preventDefault&&a.preventDefault();var u=a.type,c=a.pointerId,y=g.__touch.activeIDs;if(u==="MSPointerDown"||u==="pointerdown"){if(a.srcElement==g.canvas)switch(y[c]=!0,this._handleStart(g,c,a,a.pageX,a.pageY),a.pointerType){case"mouse":g.enableDOMEvents(!0);break;case"touch":g.enableDOMEvents(!1)}}else y[c]&&(u==="MSPointerMove"||u==="pointermove"?this._handleMove(g,c,a,a.pageX,a.pageY):u!=="MSPointerUp"&&u!=="MSPointerCancel"&&u!=="pointerup"&&u!=="pointercancel"||(delete y[c],this._handleEnd(g,c,a)))}},e._handleStart=function(g,a,u,c,y){var B,j=g.__touch;!j.multitouch&&j.count||(B=j.pointers)[a]||(B[a]=!0,j.count++,g._handlePointerDown(a,u,c,y))},e._handleMove=function(g,a,u,c,y){g.__touch.pointers[a]&&g._handlePointerMove(a,u,c,y)},e._handleEnd=function(g,a,u){var c=g.__touch,y=c.pointers;y[a]&&(c.count--,g._handlePointerUp(a,u,!0),delete y[a])},re.Touch=e}(),function(){"use strict";var e=re.EaselJS=re.EaselJS||{};e.version="1.0.0",e.buildDate="Thu, 12 Oct 2017 16:34:05 GMT"}(),function(){"use strict";var e=re.PreloadJS=re.PreloadJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";re.proxy=function(e,g){var a=Array.prototype.slice.call(arguments,2);return function(){return e.apply(g,Array.prototype.slice.call(arguments,0).concat(a))}}}(),function(){"use strict";function e(g,a,u){this.Event_constructor("error"),this.title=g,this.message=a,this.data=u}re.extend(e,re.Event).clone=function(){return new re.ErrorEvent(this.title,this.message,this.data)},re.ErrorEvent=re.promote(e,"Event")}(),function(){"use strict";function e(g,a){this.Event_constructor("progress"),this.loaded=g,this.total=a==null?1:a,this.progress=a==0?0:this.loaded/this.total}re.extend(e,re.Event).clone=function(){return new re.ProgressEvent(this.loaded,this.total)},re.ProgressEvent=re.promote(e,"Event")}(window),(function(){var e,g,a,u,c=typeof define=="function"&&define.amd,y={function:!0,object:!0},B=y[typeof Dn]&&Dn&&!Dn.nodeType&&Dn,j=y[typeof window]&&window||this,le=B&&y[typeof dr]&&dr&&!dr.nodeType&&typeof global=="object"&&global;function be(p,t){p=p||j.Object(),t=t||j.Object();var r=p.Number||j.Number,i=p.String||j.String,he=p.Object||j.Object,o=p.Date||j.Date,l=p.SyntaxError||j.SyntaxError,f=p.TypeError||j.TypeError,d=p.Math||j.Math,p=p.JSON||j.JSON;typeof p=="object"&&p&&(t.stringify=p.stringify,t.parse=p.parse);var _,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he=he.prototype,$=he.toString,G=new o(-0xc782b5b800cec);try{G=G.getUTCFullYear()==-109252&&G.getUTCMonth()===0&&G.getUTCDate()===1&&G.getUTCHours()==10&&G.getUTCMinutes()==37&&G.getUTCSeconds()==6&&G.getUTCMilliseconds()==708}catch(w){}function v(w){if(v[w]!==T)return v[w];var h;if(w=="bug-string-char-index")h="a"[0]!="a";else if(w=="json")h=v("json-stringify")&&v("json-parse");else{var I,Q='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(w=="json-stringify"){var x=t.stringify,F=typeof x=="function"&&G;if(F){(I=function(){return 1}).toJSON=I;try{F=x(0)==="0"&&x(new r)==="0"&&x(new i)=='""'&&x($)===T&&x(T)===T&&x()===T&&x(I)==="1"&&x([I])=="[1]"&&x([T])=="[null]"&&x(null)=="null"&&x([T,$,null])=="[null,null,null]"&&x({a:[I,!0,!1,null,"\0\b\n\f\r	"]})==Q&&x(null,I)==="1"&&x([1,2],null,1)=="[\n 1,\n 2\n]"&&x(new o(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&x(new o(864e13))=='"+275760-09-13T00:00:00.000Z"'&&x(new o(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&x(new o(-1))=='"1969-12-31T23:59:59.999Z"'}catch(K){F=!1}}h=F}if(w=="json-parse"){var Ae=t.parse;if(typeof Ae=="function")try{if(Ae("0")===0&&!Ae(!1)){var Y=(I=Ae(Q)).a.length==5&&I.a[0]===1;if(Y){try{Y=!Ae('"	"')}catch(K){}if(Y)try{Y=Ae("01")!==1}catch(K){}if(Y)try{Y=Ae("1.")!==1}catch(K){}}}}catch(K){Y=!1}h=Y}}return v[w]=!!h}return v("json")||(R="[object Function]",b="[object Number]",L="[object String]",S="[object Array]",k=v("bug-string-char-index"),G||(m=d.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(w,h){return A[h]+365*(w-1970)+m((w-1969+(h=+(1<h)))/4)-m((w-1901+h)/100)+m((w-1601+h)/400)}),(_=he.hasOwnProperty)||(_=function(w){var h,I={__proto__:null};return I.__proto__={toString:1},_=I.toString!=$?function(F){var x=this.__proto__,F=F in(this.__proto__=null,this);return this.__proto__=x,F}:(h=I.constructor,function(Q){var x=(this.constructor||h).prototype;return Q in this&&!(Q in x&&this[Q]===x[Q])}),I=null,_.call(this,w)}),P=function(w,h){var I,Q,x,F=0;for(x in(I=function(){this.valueOf=0}).prototype.valueOf=0,Q=new I)_.call(Q,x)&&F++;return I=Q=null,(P=F?F==2?function(Ae,Y){var K,ge={},ye=$.call(Ae)==R;for(K in Ae)ye&&K=="prototype"||_.call(ge,K)||!(ge[K]=1)||!_.call(Ae,K)||Y(K)}:function(Ae,Y){var K,ge,ye=$.call(Ae)==R;for(K in Ae)ye&&K=="prototype"||!_.call(Ae,K)||(ge=K==="constructor")||Y(K);(ge||_.call(Ae,K="constructor"))&&Y(K)}:(Q=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(Ae,Y){var K,ge,ye=$.call(Ae)==R,ee=!ye&&typeof Ae.constructor!="function"&&y[typeof Ae.hasOwnProperty]&&Ae.hasOwnProperty||_;for(K in Ae)ye&&K=="prototype"||!ee.call(Ae,K)||Y(K);for(ge=Q.length;K=Q[--ge];ee.call(Ae,K)&&Y(K));}))(w,h)},v("json-stringify")||(C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E=function(w,h){return("000000"+(h||0)).slice(-w)},X=function(w){for(var h='"',I=0,Q=w.length,x=!k||10<Q,F=x&&(k?w.split(""):w);I<Q;I++){var Ae=w.charCodeAt(I);switch(Ae){case 8:case 9:case 10:case 12:case 13:case 34:case 92:h+=C[Ae];break;default:if(Ae<32){h+="\\u00"+E(2,Ae.toString(16));break}h+=x?F[I]:w.charAt(I)}}return h+'"'},Z=function(w,h,I,Q,x,F,Ae){var Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we;try{Y=h[w]}catch(ke){}if(typeof Y=="object"&&Y)if((K=$.call(Y))!="[object Date]"||_.call(Y,"toJSON"))typeof Y.toJSON=="function"&&(K!=b&&K!=L&&K!=S||_.call(Y,"toJSON"))&&(Y=Y.toJSON(w));else if(-1/0<Y&&Y<1/0){if(D){for(ee=m(Y/864e5),ge=m(ee/365.2425)+1970-1;D(ge+1,0)<=ee;ge++);for(ye=m((ee-D(ge,0))/30.42);D(ge,ye+1)<=ee;ye++);ee=1+ee-D(ge,ye),ce=m((te=(Y%864e5+864e5)%864e5)/36e5)%24,ve=m(te/6e4)%60,Re=m(te/1e3)%60,te=te%1e3}else ge=Y.getUTCFullYear(),ye=Y.getUTCMonth(),ee=Y.getUTCDate(),ce=Y.getUTCHours(),ve=Y.getUTCMinutes(),Re=Y.getUTCSeconds(),te=Y.getUTCMilliseconds();Y=(ge<=0||1e4<=ge?(ge<0?"-":"+")+E(6,ge<0?-ge:ge):E(4,ge))+"-"+E(2,ye+1)+"-"+E(2,ee)+"T"+E(2,ce)+":"+E(2,ve)+":"+E(2,Re)+"."+E(3,te)+"Z"}else Y=null;if(I&&(Y=I.call(h,w,Y)),Y===null)return"null";if((K=$.call(Y))=="[object Boolean]")return""+Y;if(K==b)return-1/0<Y&&Y<1/0?""+Y:"null";if(K==L)return X(""+Y);if(typeof Y=="object"){for(xe=Ae.length;xe--;)if(Ae[xe]===Y)throw f();if(Ae.push(Y),se=[],te=F,F+=x,K==S){for(J=0,xe=Y.length;J<xe;J++)Oe=Z(J,Y,I,Q,x,F,Ae),se.push(Oe===T?"null":Oe);we=se.length?x?"[\n"+F+se.join(",\n"+F)+"\n"+te+"]":"["+se.join(",")+"]":"[]"}else P(Q||Y,function(ke){var pe=Z(ke,Y,I,Q,x,F,Ae);pe!==T&&se.push(X(ke)+":"+(x?" ":"")+pe)}),we=se.length?x?"{\n"+F+se.join(",\n"+F)+"\n"+te+"}":"{"+se.join(",")+"}":"{}";return Ae.pop(),we}},t.stringify=function(w,h,I){var Q,x,F,Ae;if(y[typeof h]&&h){if((Ae=$.call(h))==R)x=h;else if(Ae==S){F={};for(var Y,K=0,ge=h.length;K<ge;Y=h[K++],(Ae=$.call(Y))!=L&&Ae!=b||(F[Y]=1));}}if(I)if((Ae=$.call(I))==b){if(0<(I-=I%1))for(Q="",10<I&&(I=10);Q.length<I;Q+=" ");}else Ae==L&&(Q=I.length<=10?I:I.slice(0,10));return Z("",((Y={})[""]=w,Y),x,F,Q,"",[])}),v("json-parse")||(V=i.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},q=function(){throw ne=N=null,l()},U=function(){for(var w,h,I,Q,x,F=N,Ae=F.length;ne<Ae;)switch(x=F.charCodeAt(ne)){case 9:case 10:case 13:case 32:ne++;break;case 123:case 125:case 91:case 93:case 58:case 44:return w=k?F.charAt(ne):F[ne],ne++,w;case 34:for(w="@",ne++;ne<Ae;)if((x=F.charCodeAt(ne))<32)q();else if(x==92)switch(x=F.charCodeAt(++ne)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:w+=O[x],ne++;break;case 117:for(h=++ne,I=ne+4;ne<I;ne++)48<=(x=F.charCodeAt(ne))&&x<=57||97<=x&&x<=102||65<=x&&x<=70||q();w+=V("0x"+F.slice(h,ne));break;default:q()}else{if(x==34)break;for(x=F.charCodeAt(ne),h=ne;32<=x&&x!=92&&x!=34;)x=F.charCodeAt(++ne);w+=F.slice(h,ne)}if(F.charCodeAt(ne)==34)return ne++,w;q();default:if(h=ne,x==45&&(Q=!0,x=F.charCodeAt(++ne)),48<=x&&x<=57){for(x==48&&48<=(x=F.charCodeAt(ne+1))&&x<=57&&q(),Q=!1;ne<Ae&&48<=(x=F.charCodeAt(ne))&&x<=57;ne++);if(F.charCodeAt(ne)==46){for(I=++ne;I<Ae&&48<=(x=F.charCodeAt(I))&&x<=57;I++);I==ne&&q(),ne=I}if((x=F.charCodeAt(ne))==101||x==69){for((x=F.charCodeAt(++ne))!=43&&x!=45||ne++,I=ne;I<Ae&&48<=(x=F.charCodeAt(I))&&x<=57;I++);I==ne&&q(),ne=I}return+F.slice(h,ne)}if(Q&&q(),F.slice(ne,ne+4)=="true")return ne+=4,!0;if(F.slice(ne,ne+5)=="false")return ne+=5,!1;if(F.slice(ne,ne+4)=="null")return ne+=4,null;q()}return"$"},z=function(w){var h,I;if(w=="$"&&q(),typeof w=="string"){if((k?w.charAt(0):w[0])=="@")return w.slice(1);if(w=="["){for(h=[];(w=U())!="]";I=I||!0)!I||w==","&&(w=U())!="]"||q(),w==","&&q(),h.push(z(w));return h}if(w=="{"){for(h={};(w=U())!="}";I=I||!0)!I||w==","&&(w=U())!="}"||q(),w!=","&&typeof w=="string"&&(k?w.charAt(0):w[0])=="@"&&U()==":"||q(),h[w.slice(1)]=z(U());return h}q()}return w},ie=function(w,h,I){I=ae(w,h,I),I===T?delete w[h]:w[h]=I},ae=function(w,h,I){var Q,x=w[h];if(typeof x=="object"&&x)if($.call(x)==S)for(Q=x.length;Q--;)ie(x,Q,I);else P(x,function(F){ie(x,F,I)});return I.call(w,h,x)},t.parse=function(w,h){var I;return ne=0,N=""+w,I=z(U()),U()!="$"&&q(),ne=N=null,h&&$.call(h)==R?ae(((w={})[""]=I,w),"",h):I})),t.runInContext=be,t}!le||le.global!==le&&le.window!==le&&le.self!==le||(j=le),B&&!c?be(j,B):(e=j.JSON,g=j.JSON3,a=!1,u=be(j,j.JSON3={noConflict:function(){return a||(a=!0,j.JSON=e,j.JSON3=g,e=g=null),u}}),j.JSON={parse:u.parse,stringify:u.stringify}),c&&define(function(){return u})}).call(Dn),function(){var e={a:function(){return e.el("a")},svg:function(){return e.el("svg")},object:function(){return e.el("object")},image:function(){return e.el("image")},img:function(){return e.el("img")},style:function(){return e.el("style")},link:function(){return e.el("link")},script:function(){return e.el("script")},audio:function(){return e.el("audio")},video:function(){return e.el("video")},text:function(g){return document.createTextNode(g)},el:function(g){return document.createElement(g)}};re.Elements=e}(),function(){var e={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(g){var a={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(g==null)return a;var u,c=re.Elements.a();for(u in c.href=g,a)u in c&&(a[u]=c[u]);var y=g.indexOf("?");return-1<y&&(g=g.substr(0,y)),e.ABSOLUTE_PATT.test(g)?a.absolute=!0:e.RELATIVE_PATT.test(g)&&(a.relative=!0),(g=g.match(e.EXTENSION_PATT))&&(a.extension=g[1].toLowerCase()),a},formatQueryString:function(g,a){if(g==null)throw new Error("You must specify data.");var u,c=[];for(u in g)c.push(u+"="+escape(g[u]));return a&&(c=c.concat(a)),c.join("&")},buildURI:function(g,a){if(a==null)return g;var u,c=[],y=g.indexOf("?");return y!=-1&&(u=g.slice(y+1),c=c.concat(u.split("&"))),y!=-1?g.slice(0,y)+"?"+this.formatQueryString(a,c):g+"?"+this.formatQueryString(a,c)},isCrossDomain:function(g){var a=re.Elements.a();return a.href=g.src,g=re.Elements.a(),g.href=location.href,a.hostname!=""&&(a.port!=g.port||a.protocol!=g.protocol||a.hostname!=g.hostname)},isLocal:function(g){var a=re.Elements.a();return a.href=g.src,a.hostname==""&&a.protocol=="file:"}};re.URLUtils=e}(),function(){var e={container:null,appendToHead:function(g){e.getHead().appendChild(g)},appendToBody:function(g){var a;e.container==null&&(e.container=document.createElement("div"),e.container.id="preloadjs-container",(a=e.container.style).visibility="hidden",a.position="absolute",a.width=e.container.style.height="10px",a.overflow="hidden",a.transform=a.msTransform=a.webkitTransform=a.oTransform="translate(-10px, -10px)",e.getBody().appendChild(e.container)),e.container.appendChild(g)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]},removeChild:function(g){g.parent&&g.parent.removeChild(g)},isImageTag:function(g){return g instanceof HTMLImageElement},isAudioTag:function(g){return!!window.HTMLAudioElement&&g instanceof HTMLAudioElement},isVideoTag:function(g){return!!window.HTMLVideoElement&&g instanceof HTMLVideoElement}};re.DomUtils=e}(),function(){var e={parseXML:function(g){var a=null;try{window.DOMParser&&(a=new DOMParser().parseFromString(g,"text/xml"))}catch(u){}if(!a)try{(a=new ActiveXObject("Microsoft.XMLDOM")).async=!1,a.loadXML(g)}catch(u){a=null}return a},parseJSON:function(g){if(g==null)return null;try{return JSON.parse(g)}catch(a){throw a}}};re.DataUtils=e}(),function(){var e={BINARY:"binary",CSS:"css",FONT:"font",FONTCSS:"fontcss",IMAGE:"image",JAVASCRIPT:"javascript",JSON:"json",JSONP:"jsonp",MANIFEST:"manifest",SOUND:"sound",VIDEO:"video",SPRITESHEET:"spritesheet",SVG:"svg",TEXT:"text",XML:"xml"};re.Types=e}(),function(){var e={POST:"POST",GET:"GET"};re.Methods=e}(),function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=re.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=a.LOAD_TIMEOUT_DEFAULT}var g=e.prototype={},a=e;a.LOAD_TIMEOUT_DEFAULT=8e3,a.create=function(u){if(typeof u=="string"){var c=new e;return c.src=u,c}if(u instanceof a)return u;if(u instanceof Object&&u.src)return u.loadTimeout==null&&(u.loadTimeout=a.LOAD_TIMEOUT_DEFAULT),u;throw new Error("Type not recognized.")},g.set=function(u){for(var c in u)this[c]=u[c];return this},re.LoadItem=a}(),function(){var e={isBinary:function(g){switch(g){case re.Types.IMAGE:case re.Types.BINARY:return!0;default:return!1}},isText:function(g){switch(g){case re.Types.TEXT:case re.Types.JSON:case re.Types.MANIFEST:case re.Types.XML:case re.Types.CSS:case re.Types.SVG:case re.Types.JAVASCRIPT:case re.Types.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(g){if(g==null)return re.Types.TEXT;switch(g.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return re.Types.IMAGE;case"ogg":case"mp3":case"webm":return re.Types.SOUND;case"mp4":case"webm":case"ts":return re.Types.VIDEO;case"json":return re.Types.JSON;case"xml":return re.Types.XML;case"css":return re.Types.CSS;case"js":return re.Types.JAVASCRIPT;case"svg":return re.Types.SVG;default:return re.Types.TEXT}}};re.RequestUtils=e}(),function(){"use strict";function e(u,c,y){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=y,this.resultFormatter=null,this._item=u?re.LoadItem.create(u):null,this._preferXHR=c,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var g=re.extend(e,re.EventDispatcher),a=e;try{Object.defineProperties(a,{POST:{get:re.deprecate(function(){return re.Methods.POST},"AbstractLoader.POST")},GET:{get:re.deprecate(function(){return re.Methods.GET},"AbstractLoader.GET")},BINARY:{get:re.deprecate(function(){return re.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:re.deprecate(function(){return re.Types.CSS},"AbstractLoader.CSS")},FONT:{get:re.deprecate(function(){return re.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:re.deprecate(function(){return re.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:re.deprecate(function(){return re.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:re.deprecate(function(){return re.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:re.deprecate(function(){return re.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:re.deprecate(function(){return re.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:re.deprecate(function(){return re.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:re.deprecate(function(){return re.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:re.deprecate(function(){return re.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:re.deprecate(function(){return re.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:re.deprecate(function(){return re.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:re.deprecate(function(){return re.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:re.deprecate(function(){return re.Types.XML},"AbstractLoader.XML")}})}catch(u){}g.getItem=function(){return this._item},g.getResult=function(u){return u?this._rawResult:this._result},g.getTag=function(){return this._tag},g.setTag=function(u){this._tag=u},g.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var u=new re.Event("initialize");u.loader=this._request,this.dispatchEvent(u),this._request.load()},g.cancel=function(){this.canceled=!0,this.destroy()},g.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},g.getLoadedItems=function(){return this._loadedItems},g._createRequest=function(){this._preferXHR?this._request=new re.XHRRequest(this._item):this._request=new re.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},g._createTag=function(u){return null},g._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},g._sendProgress=function(u){var c;this._isCanceled()||(c=null,typeof u=="number"?(this.progress=u,c=new re.ProgressEvent(this.progress)):(c=u,this.progress=u.loaded/u.total,c.progress=this.progress,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(c))},g._sendComplete=function(){var u;this._isCanceled()||(this.loaded=!0,(u=new re.Event("complete")).rawResult=this._rawResult,this._result!=null&&(u.result=this._result),this.dispatchEvent(u))},g._sendError=function(u){!this._isCanceled()&&this.hasEventListener("error")&&(u==null&&(u=new re.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(u))},g._isCanceled=function(){return!(window.createjs!=null&&!this.canceled)},g.resultFormatter=null,g.handleEvent=function(u){switch(u.type){case"complete":this._rawResult=u.target._response;var c=this.resultFormatter&&this.resultFormatter(this);c instanceof Function?c.call(this,re.proxy(this._resultFormatSuccess,this),re.proxy(this._resultFormatFailed,this)):(this._result=c||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(u);break;case"error":this._sendError(u);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new re.ErrorEvent("PRELOAD_"+u.type.toUpperCase()+"_ERROR"))}},g._resultFormatSuccess=function(u){this._result=u,this._sendComplete()},g._resultFormatFailed=function(u){this._sendError(u)},g.toString=function(){return"[PreloadJS AbstractLoader]"},re.AbstractLoader=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,c){this.AbstractLoader_constructor(a,u,c),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var g=re.extend(e,re.AbstractLoader);g.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},g._createTag=function(){},g._createRequest=function(){this._preferXHR?this._request=new re.XHRRequest(this._item):this._request=new re.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},g._updateXHR=function(a){a.loader.setResponseType&&a.loader.setResponseType("blob")},g._formatResult=function(a){var u,c;return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(u=window.URL||window.webkitURL,c=a.getResult(!0),a.getTag().src=u.createObjectURL(c)),a.getTag()},re.AbstractMediaLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this._item=a}var g=re.extend(e,re.EventDispatcher);g.load=function(){},g.destroy=function(){},g.cancel=function(){},re.AbstractRequest=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,c){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=c,this._loadedHandler=re.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var g=re.extend(e,re.AbstractRequest);g.load=function(){this._tag.onload=re.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=re.proxy(this._handleReadyStateChange,this),this._tag.onerror=re.proxy(this._handleError,this);var a=new re.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,this._tag.parentNode==null&&(re.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},g.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},g._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},g._handleError=function(){this._clean(),this.dispatchEvent("error")},g._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},g._handleTimeout=function(){this._clean(),this.dispatchEvent(new re.Event("timeout"))},g._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&this._tag.parentNode!=null&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},g._handleStalled=function(){},re.TagRequest=re.promote(e,"AbstractRequest")}(),function(){"use strict";function e(a,u,c){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=c,this._loadedHandler=re.proxy(this._handleTagComplete,this)}var g=re.extend(e,re.TagRequest);g.load=function(){var a=re.proxy(this._handleStalled,this);this._stalledCallback=a;var u=re.proxy(this._handleProgress,this);this._handleProgress=u,this._tag.addEventListener("stalled",a),this._tag.addEventListener("progress",u),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},g._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},g._handleStalled=function(){},g._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new re.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},g._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},re.MediaTagRequest=re.promote(e,"TagRequest")}(),function(){"use strict";function e(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=re.proxy(this._handleLoadStart,this),this._handleProgressProxy=re.proxy(this._handleProgress,this),this._handleAbortProxy=re.proxy(this._handleAbort,this),this._handleErrorProxy=re.proxy(this._handleError,this),this._handleTimeoutProxy=re.proxy(this._handleTimeout,this),this._handleLoadProxy=re.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=re.proxy(this._handleReadyStateChange,this),this._createXHR(a)}var g=re.extend(e,re.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],g.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},g.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},g.load=function(){if(this._request!=null){this._request.addEventListener!=null?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),this._xhrLevel==1&&(this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(re.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new re.ErrorEvent("XHR_SEND",null,a))}}else this._handleError()},g.setResponseType=function(a){a==="blob"&&(a=window.URL?"blob":"arraybuffer",this._responseType=a),this._request.responseType=a},g.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},g.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},g._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new re.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},g._handleLoadStart=function(a){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},g._handleAbort=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent("XHR_ABORTED",null,a))},g._handleError=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent(a.message))},g._handleReadyStateChange=function(a){this._request.readyState==4&&this._handleLoad()},g._handleLoad=function(a){if(!this.loaded){this.loaded=!0;var u=this._checkError();if(u)this._handleError(u);else{if(this._response=this._getResponse(),this._responseType==="arraybuffer")try{this._response=new Blob([this._response])}catch(c){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,c.name==="TypeError"&&window.BlobBuilder&&((u=new BlobBuilder).append(this._response),this._response=u.getBlob())}this._clean(),this.dispatchEvent(new re.Event("complete"))}}},g._handleTimeout=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent("PRELOAD_TIMEOUT",null,a))},g._checkError=function(){var a=parseInt(this._request.status);return 400<=a&&a<=599?new Error(a):a==0&&/^https?:/.test(location.protocol)?new Error(0):null},g._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;try{if(this._request.responseText!=null)return this._request.responseText}catch(a){}try{if(this._request.responseXML!=null)return this._request.responseXML}catch(a){}return null},g._createXHR=function(a){var u=re.URLUtils.isCrossDomain(a),c={},y=null;if(window.XMLHttpRequest)y=new XMLHttpRequest,u&&y.withCredentials===void 0&&window.XDomainRequest&&(y=new XDomainRequest);else{for(var B=0,j=s.ACTIVEX_VERSIONS.length;B<j;B++){var le=s.ACTIVEX_VERSIONS[B];try{y=new ActiveXObject(le);break}catch(t){}}if(y==null)return!1}a.mimeType==null&&re.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset=utf-8"),a.mimeType&&y.overrideMimeType&&y.overrideMimeType(a.mimeType),this._xhrLevel=typeof y.responseType=="string"?2:1;var be=null,be=a.method==re.Methods.GET?re.URLUtils.buildURI(a.src,a.values):a.src;if(y.open(a.method||re.Methods.GET,be,!0),u&&y instanceof XMLHttpRequest&&this._xhrLevel==1&&(c.Origin=location.origin),a.values&&a.method==re.Methods.POST&&(c["Content-Type"]="application/x-www-form-urlencoded"),u||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var Pe in a.headers)c[Pe]=a.headers[Pe];for(Pe in c)y.setRequestHeader(Pe,c[Pe]);return y instanceof XMLHttpRequest&&a.withCredentials!==void 0&&(y.withCredentials=a.withCredentials),this._request=y,!0},g._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener!=null?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},g.toString=function(){return"[PreloadJS XHRRequest]"},re.XHRRequest=re.promote(e,"AbstractRequest")}(),function(){"use strict";function e(u,c,y){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[re.FontLoader,re.ImageLoader,re.JavaScriptLoader,re.CSSLoader,re.JSONLoader,re.JSONPLoader,re.SoundLoader,re.ManifestLoader,re.SpriteSheetLoader,re.XMLLoader,re.SVGLoader,re.BinaryLoader,re.VideoLoader,re.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(u,c,y)}var g=re.extend(e,re.AbstractLoader),a=e;try{Object.defineProperties(a,{POST:{get:re.deprecate(function(){return re.Methods.POST},"AbstractLoader.POST")},GET:{get:re.deprecate(function(){return re.Methods.GET},"AbstractLoader.GET")},BINARY:{get:re.deprecate(function(){return re.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:re.deprecate(function(){return re.Types.CSS},"AbstractLoader.CSS")},FONT:{get:re.deprecate(function(){return re.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:re.deprecate(function(){return re.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:re.deprecate(function(){return re.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:re.deprecate(function(){return re.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:re.deprecate(function(){return re.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:re.deprecate(function(){return re.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:re.deprecate(function(){return re.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:re.deprecate(function(){return re.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:re.deprecate(function(){return re.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:re.deprecate(function(){return re.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:re.deprecate(function(){return re.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:re.deprecate(function(){return re.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:re.deprecate(function(){return re.Types.XML},"AbstractLoader.XML")}})}catch(u){}g.init=function(u,c,y){this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(u),this._paused=!1,this._basePath=c,this._crossOrigin=y,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},g.registerLoader=function(u){if(!u||!u.canLoadItem)throw new Error("loader is of an incorrect type.");if(this._availableLoaders.indexOf(u)!=-1)throw new Error("loader already exists.");this._availableLoaders.unshift(u)},g.unregisterLoader=function(u){u=this._availableLoaders.indexOf(u),u!=-1&&u<this._defaultLoaderLength-1&&this._availableLoaders.splice(u,1)},g.setPreferXHR=function(u){return this.preferXHR=u!=0&&window.XMLHttpRequest!=null,this.preferXHR},g.removeAll=function(){this.remove()},g.remove=function(u){var c=null;if(u&&!Array.isArray(u))c=[u];else if(u)c=u;else if(0<arguments.length)return;var y=!1;if(c){for(;c.length;){for(var B=c.pop(),j=this.getResult(B),le=this._loadQueue.length-1;0<=le;le--)if((be=this._loadQueue[le].getItem()).id==B||be.src==B){this._loadQueue.splice(le,1)[0].cancel();break}for(le=this._loadQueueBackup.length-1;0<=le;le--)if((be=this._loadQueueBackup[le].getItem()).id==B||be.src==B){this._loadQueueBackup.splice(le,1)[0].cancel();break}if(j)this._disposeItem(this.getItem(B));else for(var le=this._currentLoads.length-1;0<=le;le--){var be=this._currentLoads[le].getItem();if(be.id==B||be.src==B){this._currentLoads.splice(le,1)[0].cancel(),y=!0;break}}}y&&this._loadNext()}else{for(var Pe in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[Pe]);this.init(this.preferXHR,this._basePath)}},g.reset=function(){for(var u in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[u]);for(var c=[],y=0,B=this._loadQueueBackup.length;y<B;y++)c.push(this._loadQueueBackup[y].getItem());this.loadManifest(c,!1)},g.installPlugin=function(u){if(u!=null&&u.getPreloadHandlers!=null){this._plugins.push(u);var c=u.getPreloadHandlers();if(c.scope=u,c.types!=null)for(var y=0,B=c.types.length;y<B;y++)this._typeCallbacks[c.types[y]]=c;if(c.extensions!=null)for(y=0,B=c.extensions.length;y<B;y++)this._extensionCallbacks[c.extensions[y]]=c}},g.setMaxConnections=function(u){this._maxConnections=u,!this._paused&&0<this._loadQueue.length&&this._loadNext()},g.loadFile=function(u,c,y){u!=null?(this._addItem(u,null,y),c!==!1?this.setPaused(!1):this.setPaused(!0)):(c=new re.ErrorEvent("PRELOAD_NO_FILE"),this._sendError(c))},g.loadManifest=function(u,c,y){var B=null,j=null;if(Array.isArray(u)){if(u.length==0){var le=new re.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(le)}B=u}else if(typeof u=="string")B=[{src:u,type:a.MANIFEST}];else{if(typeof u!="object")return le=new re.ErrorEvent("PRELOAD_MANIFEST_NULL"),void this._sendError(le);u.src!==void 0?(u.type==null?u.type=a.MANIFEST:u.type!=a.MANIFEST&&(le=new re.ErrorEvent("PRELOAD_MANIFEST_TYPE"),this._sendError(le)),B=[u]):u.manifest!==void 0&&(B=u.manifest,j=u.path)}for(var be=0,Pe=B.length;be<Pe;be++)this._addItem(B[be],j,y);c!==!1?this.setPaused(!1):this.setPaused(!0)},g.load=function(){this.setPaused(!1)},g.getItem=function(u){return this._loadItemsById[u]||this._loadItemsBySrc[u]},g.getResult=function(u,c){return u=this._loadItemsById[u]||this._loadItemsBySrc[u],u==null?null:(u=u.id,(c&&this._loadedRawResults[u]?this._loadedRawResults:this._loadedResults)[u])},g.getItems=function(u){var c,y=[];for(c in this._loadItemsById){var B=this._loadItemsById[c],j=this.getResult(c);u===!0&&j==null||y.push({item:B,result:j,rawResult:this.getResult(c,!0)})}return y},g.setPaused=function(u){this._paused=u,this._paused||this._loadNext()},g.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},g._addItem=function(u,c,y){c=this._createLoadItem(u,c,y),c==null||(y=this._createLoader(c))!=null&&("plugins"in y&&(y.plugins=this._plugins),c._loader=y,this._loadQueue.push(y),this._loadQueueBackup.push(y),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&c.type==re.Types.JAVASCRIPT||c.maintainOrder===!0)&&(this._scriptOrder.push(c),this._loadedScripts.push(null)))},g._createLoadItem=function(u,c,y){var B=re.LoadItem.create(u);if(B==null)return null;if(u="",y=y||this._basePath,B.src instanceof Object){if(!B.type)return null;c?(u=c,le=re.URLUtils.parseURI(c),y==null||le.absolute||le.relative||(u=y+u)):y!=null&&(u=y)}else{var j=re.URLUtils.parseURI(B.src);j.extension&&(B.ext=j.extension),B.type==null&&(B.type=re.RequestUtils.getTypeByExtension(B.ext));var le,be=B.src;j.absolute||j.relative||(c?(u=c,le=re.URLUtils.parseURI(c),be=c+be,y==null||le.absolute||le.relative||(u=y+u)):y!=null&&(u=y)),B.src=u+B.src}if(B.path=u,B.id!==void 0&&B.id!==null&&B.id!==""||(B.id=be),be=this._typeCallbacks[B.type]||this._extensionCallbacks[B.ext],be){if(be=be.callback.call(be.scope,B,this),be===!1)return null;be===!0||be!=null&&(B._loader=be),(j=re.URLUtils.parseURI(B.src)).extension!=null&&(B.ext=j.extension)}return this._loadItemsById[B.id]=B,(this._loadItemsBySrc[B.src]=B).crossOrigin==null&&(B.crossOrigin=this._crossOrigin),B},g._createLoader=function(u){if(u._loader!=null)return u._loader;for(var c=this.preferXHR,y=0;y<this._availableLoaders.length;y++){var B=this._availableLoaders[y];if(B&&B.canLoadItem(u))return new B(u,c)}return null},g._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var u=0;u<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);u++){var c=this._loadQueue[u];this._canStartLoad(c)&&(this._loadQueue.splice(u,1),u--,this._loadItem(c))}}},g._loadItem=function(u){u.on("fileload",this._handleFileLoad,this),u.on("progress",this._handleProgress,this),u.on("complete",this._handleFileComplete,this),u.on("error",this._handleError,this),u.on("fileerror",this._handleFileError,this),this._currentLoads.push(u),this._sendFileStart(u.getItem()),u.load()},g._handleFileLoad=function(u){u.target=null,this.dispatchEvent(u)},g._handleFileError=function(u){u=new re.ErrorEvent("FILE_LOAD_ERROR",null,u.item),this._sendError(u)},g._handleError=function(u){var c=u.target;this._numItemsLoaded++,this._finishOrderedItem(c,!0),this._updateProgress(),u=new re.ErrorEvent("FILE_LOAD_ERROR",null,c.getItem()),this._sendError(u),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(c),this._cleanLoadItem(c),this._loadNext())},g._handleFileComplete=function(u){var c=u.target,y=c.getItem(),B=c.getResult();this._loadedResults[y.id]=B,u=c.getResult(!0),u!=null&&u!==B&&(this._loadedRawResults[y.id]=u),this._saveLoadedItems(c),this._removeLoadItem(c),this._finishOrderedItem(c)||this._processFinishedLoad(y,c),this._cleanLoadItem(c)},g._saveLoadedItems=function(u){var c=u.getLoadedItems();if(c!==null)for(var y=0;y<c.length;y++){var B=c[y].item;this._loadItemsBySrc[B.src]=B,this._loadItemsById[B.id]=B,this._loadedResults[B.id]=c[y].result,this._loadedRawResults[B.id]=c[y].rawResult}},g._finishOrderedItem=function(u,c){var y=u.getItem();return this.maintainScriptOrder&&y.type==re.Types.JAVASCRIPT||y.maintainOrder?(u instanceof re.JavaScriptLoader&&(this._currentlyLoadingScript=!1),u=re.indexOf(this._scriptOrder,y),u==-1?!1:(this._loadedScripts[u]=c===!0||y,this._checkScriptLoadOrder(),!0)):!1},g._checkScriptLoadOrder=function(){for(var u=this._loadedScripts.length,c=0;c<u;c++){var y,B=this._loadedScripts[c];if(B===null)break;B!==!0&&(y=this._loadedResults[B.id],B.type==re.Types.JAVASCRIPT&&re.DomUtils.appendToHead(y),y=B._loader,this._processFinishedLoad(B,y),this._loadedScripts[c]=!0)}},g._processFinishedLoad=function(u,c){var y;this._numItemsLoaded++,this.maintainScriptOrder||u.type!=re.Types.JAVASCRIPT||(y=c.getTag(),re.DomUtils.appendToHead(y)),this._updateProgress(),this._sendFileComplete(u,c),this._loadNext()},g._canStartLoad=function(u){if(!this.maintainScriptOrder||u.preferXHR||(u=u.getItem(),u.type!=re.Types.JAVASCRIPT))return!0;if(this._currentlyLoadingScript)return!1;for(var c=this._scriptOrder.indexOf(u),y=0;y<c;){if(this._loadedScripts[y]==null)return!1;y++}return this._currentlyLoadingScript=!0},g._removeLoadItem=function(u){for(var c=this._currentLoads.length,y=0;y<c;y++)if(this._currentLoads[y]==u){this._currentLoads.splice(y,1);break}},g._cleanLoadItem=function(u){u=u.getItem(),u&&delete u._loader},g._handleProgress=function(u){u=u.target,this._sendFileProgress(u.getItem(),u.progress),this._updateProgress()},g._updateProgress=function(){var u=this._numItemsLoaded/this._numItems,c=this._numItems-this._numItemsLoaded;if(0<c){for(var y=0,B=0,j=this._currentLoads.length;B<j;B++)y+=this._currentLoads[B].progress;u+=y/c*(c/this._numItems)}this._lastProgress!=u&&(this._sendProgress(u),this._lastProgress=u)},g._disposeItem=function(u){delete this._loadedResults[u.id],delete this._loadedRawResults[u.id],delete this._loadItemsById[u.id],delete this._loadItemsBySrc[u.src]},g._sendFileProgress=function(u,c){var y;this._isCanceled()||this._paused||this.hasEventListener("fileprogress")&&((y=new re.Event("fileprogress")).progress=c,y.loaded=c,y.total=1,y.item=u,this.dispatchEvent(y))},g._sendFileComplete=function(u,c){var y;this._isCanceled()||this._paused||((y=new re.Event("fileload")).loader=c,y.item=u,y.result=this._loadedResults[u.id],y.rawResult=this._loadedRawResults[u.id],u.completeHandler&&u.completeHandler(y),this.hasEventListener("fileload")&&this.dispatchEvent(y))},g._sendFileStart=function(u){var c=new re.Event("filestart");c.item=u,this.hasEventListener("filestart")&&this.dispatchEvent(c)},g.toString=function(){return"[PreloadJS LoadQueue]"},re.LoadQueue=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(g){this.AbstractLoader_constructor(g,!0,re.Types.TEXT)}re.extend(e,re.AbstractLoader),e.canLoadItem=function(g){return g.type==re.Types.TEXT},re.TextLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.BINARY),this.on("initialize",this._updateXHR,this)}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.BINARY},g._updateXHR=function(a){a.loader.setResponseType("arraybuffer")},re.BinaryLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=u?re.Elements.style():re.Elements.link(),this._tag.rel="stylesheet",this._tag.type="text/css"}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.CSS},g._formatResult=function(a){var u;return this._preferXHR?(u=a.getTag()).styleSheet?u.styleSheet.cssText=a.getResult(!0):(a=re.Elements.text(a.getResult(!0)),u.appendChild(a)):u=this._tag,re.DomUtils.appendToHead(u),u},re.CSSLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,a.type),this._faces={},this._watched=[],this._count=0,this._watchInterval=null,this._loadTimeout=null,this._injectCSS=a.injectCSS===void 0||a.injectCSS,this.dispatchEvent("initialize")}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.FONT||a.type==re.Types.FONTCSS},e.sampleText="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",e._ctx=document.createElement("canvas").getContext("2d"),e._referenceFonts=["serif","monospace"],e.WEIGHT_REGEX=/[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/gi,e.STYLE_REGEX=/[- ._]*(italic|oblique)[- ._]*/gi,e.FONT_FORMAT={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"truetype"},e.FONT_WEIGHT={thin:100,extralight:200,ultralight:200,light:300,semilight:300,demilight:300,book:"normal",regular:"normal",semibold:600,demibold:600,extrabold:800,ultrabold:800,black:900,heavy:900},e.WATCH_DURATION=10,g.load=function(){var a;if(this.type==re.Types.FONTCSS){if(!this._watchCSS())return void this.AbstractLoader_load()}else this._item.src instanceof Array?this._watchFontArray():(a=this._defFromSrc(this._item.src),this._watchFont(a),this._injectStyleTag(this._cssFromDef(a)));this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this.dispatchEvent("loadstart")},g._handleTimeout=function(){this._stopWatching(),this.dispatchEvent(new re.ErrorEvent("PRELOAD_TIMEOUT"))},g._createRequest=function(){return this._request},g.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response,this._result=!0,this._parseCSS(this._rawResult);break;case"error":this._stopWatching(),this.AbstractLoader_handleEvent(a)}},g._watchCSS=function(){var a=this._item.src;return a instanceof HTMLStyleElement&&(this._injectCSS&&!a.parentNode&&(document.head||document.getElementsByTagName("head")[0]).appendChild(a),this._injectCSS=!1,a="\n"+a.textContent),a.search(/\n|\r|@font-face/i)!==-1?(this._parseCSS(a),!0):(this._request=new re.XHRRequest(this._item),!1)},g._parseCSS=function(a){for(var u=/@font-face\s*\{([^}]+)}/g;;){var c=u.exec(a);if(!c)break;this._watchFont(this._parseFontFace(c[1]))}this._injectStyleTag(a)},g._watchFontArray=function(){for(var a=this._item.src,u="",c=a.length-1;0<=c;c--){var y=a[c],y=typeof y=="string"?this._defFromSrc(y):this._defFromObj(y);this._watchFont(y),u+=this._cssFromDef(y)+"\n"}this._injectStyleTag(u)},g._injectStyleTag=function(a){var u,c;this._injectCSS&&(u=document.head||document.getElementsByTagName("head")[0],(c=document.createElement("style")).type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),u.appendChild(c))},g._parseFontFace=function(a){var u=this._getCSSValue(a,"font-family"),c=this._getCSSValue(a,"src");return u&&c?this._defFromObj({family:u,src:c,style:this._getCSSValue(a,"font-style"),weight:this._getCSSValue(a,"font-weight")}):null},g._watchFont=function(a){a&&!this._faces[a.id]&&(this._faces[a.id]=a,this._watched.push(a),this._count++,this._calculateReferenceSizes(a),this._startWatching())},g._startWatching=function(){this._watchInterval==null&&(this._watchInterval=setInterval(re.proxy(this._watch,this),e.WATCH_DURATION))},g._stopWatching=function(){clearInterval(this._watchInterval),clearTimeout(this._loadTimeout),this._watchInterval=null},g._watch=function(){for(var a=this._watched,u=e._referenceFonts,c=a.length,y=c-1;0<=y;y--)for(var B=a[y],j=B.refs,le=j.length-1;0<=le;le--)if(this._getTextWidth(B.family+","+u[le],B.weight,B.style)!=j[le]){var be=new re.Event("fileload");B.type="font-family",be.item=B,this.dispatchEvent(be),a.splice(y,1);break}c!==a.length&&(be=new re.ProgressEvent(this._count-a.length,this._count),this.dispatchEvent(be)),c===0&&(this._stopWatching(),this._sendComplete())},g._calculateReferenceSizes=function(a){for(var u=e._referenceFonts,c=a.refs=[],y=0;y<u.length;y++)c[y]=this._getTextWidth(u[y],a.weight,a.style)},g._defFromSrc=function(a){var u=/[- ._]+/g,c=a,y=null,B=c.search(/[?#]/);B!==-1&&(c=c.substr(0,B)),(B=c.lastIndexOf("."))!==-1&&(y=c.substr(B+1),c=c.substr(0,B)),(B=c.lastIndexOf("/"))!==-1&&(c=c.substr(B+1));var j=c,le=j.match(e.WEIGHT_REGEX);return le&&(le=le[0],j=j.replace(le,""),le=le.replace(u,"").toLowerCase()),B=c.match(e.STYLE_REGEX),B&&(j=j.replace(B[0],""),B="italic"),j=j.replace(u,""),a="local('"+c.replace(u," ")+"'), url('"+a+"')",y=e.FONT_FORMAT[y],y&&(a+=" format('"+y+"')"),this._defFromObj({family:j,weight:e.FONT_WEIGHT[le]||le,style:B,src:a})},g._defFromObj=function(a){return a={family:a.family,src:a.src,style:a.style||"normal",weight:a.weight||"normal"},a.id=a.family+";"+a.style+";"+a.weight,a},g._cssFromDef=function(a){return"@font-face {\n	font-family: '"+a.family+"';\n	font-style: "+a.style+";\n	font-weight: "+a.weight+";\n	src: "+a.src+";\n}"},g._getTextWidth=function(a,u,c){var y=e._ctx;return y.font=c+" "+u+" 72px "+a,y.measureText(e.sampleText).width},g._getCSSValue=function(a,u){return a=new RegExp(u+":s*([^;}]+?)s*[;}]").exec(a),a&&a[1]?a[1]:null},re.FontLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",re.DomUtils.isImageTag(a)?this._tag=a:re.DomUtils.isImageTag(a.src)?this._tag=a.src:re.DomUtils.isImageTag(a.tag)&&(this._tag=a.tag),this._tag!=null?this._preferXHR=!1:this._tag=re.Elements.img(),this.on("initialize",this._updateXHR,this)}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.IMAGE},g.load=function(){var a;this._tag.src!=""&&this._tag.complete?this._sendComplete():((a=this._item.crossOrigin)==1&&(a="Anonymous"),a==null||re.URLUtils.isLocal(this._item)||(this._tag.crossOrigin=a),this.AbstractLoader_load())},g._updateXHR=function(a){a.loader.mimeType="text/plain; charset=x-user-defined-binary",a.loader.setResponseType&&a.loader.setResponseType("blob")},g._formatResult=function(a){return this._formatImage},g._formatImage=function(a,u){var c=this._tag,y=window.URL||window.webkitURL;this._preferXHR&&(y?(this.getResult(!0)&&(y=y.createObjectURL(this.getResult(!0)),c.src=y),c.addEventListener("load",this._cleanUpURL,!1),c.addEventListener("error",this._cleanUpURL,!1)):c.src=this._item.src),c.complete?a(c):(c.onload=re.proxy(function(){a(this._tag),c.onload=c.onerror=null},this),c.onerror=re.proxy(function(B){u(new re.ErrorEvent("IMAGE_FORMAT",null,B)),c.onload=c.onerror=null},this))},g._cleanUpURL=function(a){(window.URL||window.webkitURL).revokeObjectURL(a.target.src)},re.ImageLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(re.Elements.script())}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JAVASCRIPT},g._formatResult=function(a){var u=a.getTag();return this._preferXHR&&(u.text=a.getResult(!0)),u},re.JavaScriptLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.JSON),this.resultFormatter=this._formatResult}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JSON},g._formatResult=function(a){var u=null;try{u=re.DataUtils.parseJSON(a.getResult(!0))}catch(y){var c=new re.ErrorEvent("JSON_FORMAT",null,y);return this._sendError(c),y}return u},re.JSONLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!1,re.Types.JSONP),this.setTag(re.Elements.script()),this.getTag().type="text/javascript"}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JSONP},g.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},g.load=function(){if(this._item.callback==null)throw new Error("callback is required for loading JSONP requests.");if(window[this._item.callback]!=null)throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=re.proxy(this._handleLoad,this),re.DomUtils.appendToBody(this._tag),this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},g._handleLoad=function(a){this._result=this._rawResult=a,this._sendComplete(),this._dispose()},g._handleTimeout=function(){this._dispose(),this.dispatchEvent(new re.ErrorEvent("timeout"))},g._dispose=function(){re.DomUtils.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},re.JSONPLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,c){this.AbstractLoader_constructor(u,c,re.Types.MANIFEST),this.plugins=null,this._manifestQueue=null}var g=re.extend(e,re.AbstractLoader),a=e;a.MANIFEST_PROGRESS=.25,a.canLoadItem=function(u){return u.type==re.Types.MANIFEST},g.load=function(){this.AbstractLoader_load()},g._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?re.JSONPLoader:re.JSONLoader)(this._item)},g.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.MANIFEST_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},g.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},g._loadManifest=function(u){if(u&&u.manifest){var c=this._manifestQueue=new re.LoadQueue(this._preferXHR);c.on("fileload",this._handleManifestFileLoad,this),c.on("progress",this._handleManifestProgress,this),c.on("complete",this._handleManifestComplete,this,!0),c.on("error",this._handleManifestError,this,!0);for(var y=0,B=this.plugins.length;y<B;y++)c.installPlugin(this.plugins[y]);c.loadManifest(u)}else this._sendComplete()},g._handleManifestFileLoad=function(u){u.target=null,this.dispatchEvent(u)},g._handleManifestComplete=function(u){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},g._handleManifestProgress=function(u){this.progress=u.progress*(1-a.MANIFEST_PROGRESS)+a.MANIFEST_PROGRESS,this._sendProgress(this.progress)},g._handleManifestError=function(u){var c=new re.Event("fileerror");c.item=u.data,this.dispatchEvent(c)},re.ManifestLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,re.Types.SOUND),re.DomUtils.isAudioTag(a)||re.DomUtils.isAudioTag(a.src)?this._tag=a:re.DomUtils.isAudioTag(a.tag)&&(this._tag=re.DomUtils.isAudioTag(a)?a:a.src),this._tag!=null&&(this._preferXHR=!1)}var g=re.extend(e,re.AbstractMediaLoader);e.canLoadItem=function(a){return a.type==re.Types.SOUND},g._createTag=function(a){var u=re.Elements.audio();return u.autoplay=!1,u.preload="none",u.src=a,u},re.SoundLoader=re.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,re.Types.VIDEO),re.DomUtils.isVideoTag(a)||re.DomUtils.isVideoTag(a.src)?(this.setTag(re.DomUtils.isVideoTag(a)?a:a.src),this._preferXHR=!1):this.setTag(this._createTag())}var g=e;re.extend(e,re.AbstractMediaLoader)._createTag=function(){return re.Elements.video()},g.canLoadItem=function(a){return a.type==re.Types.VIDEO},re.VideoLoader=re.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(u,c){this.AbstractLoader_constructor(u,c,re.Types.SPRITESHEET),this._manifestQueue=null}var g=re.extend(e,re.AbstractLoader),a=e;a.SPRITESHEET_PROGRESS=.25,a.canLoadItem=function(u){return u.type==re.Types.SPRITESHEET},g.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},g._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?re.JSONPLoader:re.JSONLoader)(this._item)},g.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.SPRITESHEET_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},g._loadManifest=function(u){var c;u&&u.images&&((c=this._manifestQueue=new re.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin)).on("complete",this._handleManifestComplete,this,!0),c.on("fileload",this._handleManifestFileLoad,this),c.on("progress",this._handleManifestProgress,this),c.on("error",this._handleManifestError,this,!0),c.loadManifest(u.images))},g._handleManifestFileLoad=function(u){var c,y=u.result;y!=null&&(u=(c=this.getResult().images).indexOf(u.item.src),c[u]=y)},g._handleManifestComplete=function(u){this._result=new re.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},g._handleManifestProgress=function(u){this.progress=u.progress*(1-a.SPRITESHEET_PROGRESS)+a.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},g._handleManifestError=function(u){var c=new re.Event("fileerror");c.item=u.data,this.dispatchEvent(c)},re.SpriteSheetLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",u?this.setTag(re.Elements.svg()):(this.setTag(re.Elements.object()),this.getTag().type="image/svg+xml")}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.SVG},g._formatResult=function(c){var u=re.DataUtils.parseXML(c.getResult(!0)),c=c.getTag();return!this._preferXHR&&document.body.contains(c)&&document.body.removeChild(c),u.documentElement==null?u:(u=u.documentElement,document.importNode&&(u=document.importNode(u,!0)),c.appendChild(u),c)},re.SVGLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.XML),this.resultFormatter=this._formatResult}var g=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.XML},g._formatResult=function(a){return re.DataUtils.parseXML(a.getResult(!0))},re.XMLLoader=re.promote(e,"AbstractLoader")}(),function(){var e=re.SoundJS=re.SoundJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var g=e.agent=window.navigator.userAgent;e.isWindowPhone=-1<g.indexOf("IEMobile")||-1<g.indexOf("Windows Phone"),e.isFirefox=-1<g.indexOf("Firefox"),e.isOpera=window.opera!=null,e.isChrome=-1<g.indexOf("Chrome"),e.isIOS=(-1<g.indexOf("iPod")||-1<g.indexOf("iPhone")||-1<g.indexOf("iPad"))&&!e.isWindowPhone,e.isAndroid=-1<g.indexOf("Android")&&!e.isWindowPhone,e.isBlackberry=-1<g.indexOf("Blackberry"),e.isEdge=-1<g.indexOf("Edg"),re.BrowserDetect=e}(),function(){"use strict";function e(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null}var g=e.prototype={},a=e;a.create=function(u){if(typeof u=="string")return console&&(console.warn||console.log)("Deprecated behaviour. Sound.play takes a configuration object instead of individual arguments. See docs for info."),new re.PlayPropsConfig().set({interrupt:u});if(u==null||u instanceof a||u instanceof Object)return new re.PlayPropsConfig().set(u);if(u==null)throw new Error("PlayProps configuration not recognized.")},g.set=function(u){if(u!=null)for(var c in u)this[c]=u[c];return this},g.toString=function(){return"[PlayPropsConfig]"},re.PlayPropsConfig=a}(),function(){"use strict";function e(){throw"Sound cannot be instantiated"}var g=e;function a(c,y){this.init(c,y)}g.INTERRUPT_ANY="any",g.INTERRUPT_EARLY="early",g.INTERRUPT_LATE="late",g.INTERRUPT_NONE="none",g.PLAY_INITED="playInited",g.PLAY_SUCCEEDED="playSucceeded",g.PLAY_INTERRUPTED="playInterrupted",g.PLAY_FINISHED="playFinished",g.PLAY_FAILED="playFailed",g.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],g.EXTENSION_MAP={m4a:"mp4"},g.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,g.defaultInterruptBehavior=g.INTERRUPT_NONE,g.alternateExtensions=[],g.activePlugin=null,g._masterVolume=1,g._getMasterVolume=function(){return this._masterVolume},g.getVolume=re.deprecate(g._getMasterVolume,"Sound.getVolume"),g._setMasterVolume=function(c){if(Number(c)!=null&&(c=Math.max(0,Math.min(1,c)),g._masterVolume=c,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(c)))for(var y=this._instances,B=0,j=y.length;B<j;B++)y[B].setMasterVolume(c)},g.setVolume=re.deprecate(g._setMasterVolume,"Sound.setVolume"),g._masterMute=!1,g._getMute=function(){return this._masterMute},g.getMute=re.deprecate(g._getMute,"Sound.getMute"),g._setMute=function(c){if(c!=null&&(this._masterMute=c,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(c)))for(var y=this._instances,B=0,j=y.length;B<j;B++)y[B].setMasterMute(c)},g.setMute=re.deprecate(g._setMute,"Sound.setMute"),g._getCapabilities=function(){return g.activePlugin==null?null:g.activePlugin._capabilities},g.getCapabilities=re.deprecate(g._getCapabilities,"Sound.getCapabilities"),Object.defineProperties(g,{volume:{get:g._getMasterVolume,set:g._setMasterVolume},muted:{get:g._getMute,set:g._setMute},capabilities:{get:g._getCapabilities}}),g._pluginsRegistered=!1,g._lastID=0,g._instances=[],g._idHash={},g._preloadHash={},g._defaultPlayPropsHash={},g.addEventListener=null,g.removeEventListener=null,g.removeAllEventListeners=null,g.dispatchEvent=null,g.hasEventListener=null,g._listeners=null,re.EventDispatcher.initialize(g),g.getPreloadHandlers=function(){return{callback:re.proxy(g.initLoad,g),types:["sound"],extensions:g.SUPPORTED_EXTENSIONS}},g._handleLoadComplete=function(c){var y=c.target.getItem().src;if(g._preloadHash[y])for(var B=0,j=g._preloadHash[y].length;B<j;B++){var le=g._preloadHash[y][B];g._preloadHash[y][B]=!0,g.hasEventListener("fileload")&&((c=new re.Event("fileload")).src=le.src,c.id=le.id,c.data=le.data,c.sprite=le.sprite,g.dispatchEvent(c))}},g._handleLoadError=function(c){var y=c.target.getItem().src;if(g._preloadHash[y])for(var B=0,j=g._preloadHash[y].length;B<j;B++){var le=g._preloadHash[y][B];g._preloadHash[y][B]=!1,g.hasEventListener("fileerror")&&((c=new re.Event("fileerror")).src=le.src,c.id=le.id,c.data=le.data,c.sprite=le.sprite,g.dispatchEvent(c))}},g._registerPlugin=function(c){return!!c.isSupported()&&(g.activePlugin=new c,!0)},g.registerPlugins=function(c){g._pluginsRegistered=!0;for(var y=0,B=c.length;y<B;y++)if(g._registerPlugin(c[y]))return!0;return!1},g.initializeDefaultPlugins=function(){return g.activePlugin!=null||!g._pluginsRegistered&&!!g.registerPlugins([re.WebAudioPlugin,re.HTMLAudioPlugin])},g.isReady=function(){return g.activePlugin!=null},g.initLoad=function(c){return c.type=="video"||g._registerSound(c)},g._registerSound=function(c){if(!g.initializeDefaultPlugins()||(c.src instanceof Object?(be=g._parseSrc(c.src)).src=c.path+be.src:be=g._parsePath(c.src),be==null))return!1;c.src=be.src,c.type="sound";var y=c.data,B=null;if(y!=null&&(isNaN(y.channels)?isNaN(y)||(B=parseInt(y)):B=parseInt(y.channels),y.audioSprite))for(var j,le=y.audioSprite.length;le--;)j=y.audioSprite[le],g._idHash[j.id]={src:c.src,startTime:parseInt(j.startTime),duration:parseInt(j.duration)},j.defaultPlayProps&&(g._defaultPlayPropsHash[j.id]=re.PlayPropsConfig.create(j.defaultPlayProps));c.id!=null&&(g._idHash[c.id]={src:c.src});var be=g.activePlugin.register(c);return a.create(c.src,B),y!=null&&isNaN(y)?c.data.channels=B||a.maxPerChannel():c.data=B||a.maxPerChannel(),be.type&&(c.type=be.type),c.defaultPlayProps&&(g._defaultPlayPropsHash[c.src]=re.PlayPropsConfig.create(c.defaultPlayProps)),be},g.registerSound=function(c,y,B,j,le){if(le={src:c,id:y,data:B,defaultPlayProps:le},c instanceof Object&&c.src&&(j=y,le=c),((le=re.LoadItem.create(le)).path=j)==null||le.src instanceof Object||(le.src=j+le.src),j=g._registerSound(le),!j)return!1;if(g._preloadHash[le.src]||(g._preloadHash[le.src]=[]),g._preloadHash[le.src].push(le),g._preloadHash[le.src].length==1)j.on("complete",this._handleLoadComplete,this),j.on("error",this._handleLoadError,this),g.activePlugin.preload(j);else if(g._preloadHash[le.src][0]==1)return!0;return le},g.registerSounds=function(c,y){var B=[];c.path&&(y?y+=c.path:y=c.path,c=c.manifest);for(var j=0,le=c.length;j<le;j++)B[j]=re.Sound.registerSound(c[j].src,c[j].id,c[j].data,y,c[j].defaultPlayProps);return B},g.removeSound=function(c,y){if(g.activePlugin==null)return!1;var B,j;if(c instanceof Object&&c.src&&(c=c.src),(B=c instanceof Object?g._parseSrc(c):(c=g._getSrcById(c).src,g._parsePath(c)))==null)return!1;for(j in c=B.src,y!=null&&(c=y+c),g._idHash)g._idHash[j].src==c&&delete g._idHash[j];return a.removeSrc(c),delete g._preloadHash[c],g.activePlugin.removeSound(c),!0},g.removeSounds=function(c,y){var B=[];c.path&&(y?y+=c.path:y=c.path,c=c.manifest);for(var j=0,le=c.length;j<le;j++)B[j]=re.Sound.removeSound(c[j].src,y);return B},g.removeAllSounds=function(){g._idHash={},g._preloadHash={},a.removeAll(),g.activePlugin&&g.activePlugin.removeAllSounds()},g.loadComplete=function(c){if(!g.isReady())return!1;var y=g._parsePath(c);return c=(y?g._getSrcById(y.src):g._getSrcById(c)).src,g._preloadHash[c]!=null&&g._preloadHash[c][0]==1},g._parsePath=function(c){typeof c!="string"&&(c=c.toString());var y=c.match(g.FILE_PATTERN);if(y==null)return!1;for(var B=y[4],j=y[5],le=g.capabilities,be=0;!le[j];)if(j=g.alternateExtensions[be++],be>g.alternateExtensions.length)return null;return{name:B,src:c=c.replace("."+y[5],"."+j),extension:j}},g._parseSrc=function(c){var y,B={name:void 0,src:void 0,extension:void 0},j=g.capabilities;for(y in c)if(c.hasOwnProperty(y)&&j[y]){B.src=c[y],B.extension=y;break}if(!B.src)return!1;var le=B.src.lastIndexOf("/");return B.name=le!=-1?B.src.slice(le+1):B.src,B},g.play=function(c,y){var B;return re.WebAudioPlugin&&re.WebAudioPlugin.context&&(console.log("audio context available"),(B=re.WebAudioPlugin.context).state!=="interrupted"&&B.state!=="suspended"||B.resume()),y=re.PlayPropsConfig.create(y),c=g.createInstance(c,y.startTime,y.duration),B&&(c.audioCtx=B),g._playInstance(c,y)||c._playFailed(),c},g.createInstance=function(c,y,B){if(!g.initializeDefaultPlugins())return new re.DefaultSoundInstance(c,y,B);var j=g._defaultPlayPropsHash[c];c=g._getSrcById(c);var le=g._parsePath(c.src),be=null;return le!=null&&le.src!=null?(a.create(le.src),y==null&&(y=c.startTime),be=g.activePlugin.create(le.src,y,B||c.duration),(j=j||g._defaultPlayPropsHash[le.src])&&be.applyPlayProps(j)):be=new re.DefaultSoundInstance(c,y,B),be.uniqueId=g._lastID++,be},g.stop=function(){for(var c=this._instances,y=c.length;y--;)c[y].stop()},g.setDefaultPlayProps=function(c,y){c=g._getSrcById(c),g._defaultPlayPropsHash[g._parsePath(c.src).src]=re.PlayPropsConfig.create(y)},g.getDefaultPlayProps=function(c){return c=g._getSrcById(c),g._defaultPlayPropsHash[g._parsePath(c.src).src]},g._playInstance=function(c,y){var B=g._defaultPlayPropsHash[c.src]||{};if(y.interrupt==null&&(y.interrupt=B.interrupt||g.defaultInterruptBehavior),y.delay==null&&(y.delay=B.delay||0),y.offset==null&&(y.offset=c.position),y.loop==null&&(y.loop=c.loop),y.volume==null&&(y.volume=c.volume),y.pan==null&&(y.pan=c.pan),y.delay==0){if(!g._beginPlaying(c,y))return!1}else B=setTimeout(function(){g._beginPlaying(c,y)},y.delay),c.delayTimeoutId=B;return this._instances.push(c),!0},g._beginPlaying=function(c,y){return a.add(c,y.interrupt)?c._beginPlaying(y)?!0:(c=re.indexOf(this._instances,c),-1<c&&this._instances.splice(c,1),!1):!1},g._getSrcById=function(c){return g._idHash[c]||{src:c}},g._playFinished=function(c){a.remove(c),c=re.indexOf(this._instances,c),-1<c&&this._instances.splice(c,1)},re.Sound=e,a.channels={},a.create=function(c,y){return a.get(c)==null&&(a.channels[c]=new a(c,y),!0)},a.removeSrc=function(c){var y=a.get(c);return y!=null&&(y._removeAll(),delete a.channels[c],!0)},a.removeAll=function(){for(var c in a.channels)a.channels[c]._removeAll();a.channels={}},a.add=function(c,y){var B=a.get(c.src);return B!=null&&B._add(c,y)},a.remove=function(c){var y=a.get(c.src);return y!=null&&(y._remove(c),!0)},a.maxPerChannel=function(){return u.maxDefault},a.get=function(c){return a.channels[c]};var u=a.prototype;u.constructor=a,u.src=null,u.max=null,u.maxDefault=100,u.length=0,u.init=function(c,y){this.src=c,this.max=y||this.maxDefault,this.max==-1&&(this.max=this.maxDefault),this._instances=[]},u._get=function(c){return this._instances[c]},u._add=function(c,y){return!!this._getSlot(y,c)&&(this._instances.push(c),this.length++,!0)},u._remove=function(c){return c=re.indexOf(this._instances,c),c!=-1&&(this._instances.splice(c,1),this.length--,!0)},u._removeAll=function(){for(var c=this.length-1;0<=c;c--)this._instances[c].stop()},u._getSlot=function(c,y){var B,j;if(c!=e.INTERRUPT_NONE&&(j=this._get(0))==null)return!0;for(var le=0,be=this.max;le<be;le++){if((B=this._get(le))==null)return!0;if(B.playState==e.PLAY_FINISHED||B.playState==e.PLAY_INTERRUPTED||B.playState==e.PLAY_FAILED){j=B;break}c!=e.INTERRUPT_NONE&&(c==e.INTERRUPT_EARLY&&B.position<j.position||c==e.INTERRUPT_LATE&&B.position>j.position)&&(j=B)}return j!=null&&(j._interrupt(),this._remove(j),!0)},u.toString=function(){return"[Sound SoundChannel]"}}(),function(){"use strict";function e(a,u,c,y){this.EventDispatcher_constructor(),this.src=a,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this._getVolume,set:this._setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this._getPan,set:this._setPan}),this._startTime=Math.max(0,u||0),Object.defineProperty(this,"startTime",{get:this._getStartTime,set:this._setStartTime}),this._duration=Math.max(0,c||0),Object.defineProperty(this,"duration",{get:this._getDuration,set:this._setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this._getPlaybackResource,set:this._setPlaybackResource}),y!==!1&&y!==!0&&this._setPlaybackResource(y),this._position=0,Object.defineProperty(this,"position",{get:this._getPosition,set:this._setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this._getLoop,set:this._setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this._getMuted,set:this._setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this._getPaused,set:this._setPaused})}var g=re.extend(e,re.EventDispatcher);g.play=function(a){return a=re.PlayPropsConfig.create(a),this.playState==re.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this._setPaused(!1))):(this._cleanUp(),re.Sound._playInstance(this,a),this)},g.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=re.Sound.PLAY_FINISHED,this},g.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},g.applyPlayProps=function(a){return a.offset!=null&&this._setPosition(a.offset),a.loop!=null&&this._setLoop(a.loop),a.volume!=null&&this._setVolume(a.volume),a.pan!=null&&this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this},g.toString=function(){return"[AbstractSoundInstance]"},g._getPaused=function(){return this._paused},g._setPaused=function(a){if(!(a!==!0&&a!==!1||this._paused==a||a==1&&this.playState!=re.Sound.PLAY_SUCCEEDED))return(this._paused=a)?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},g._setVolume=function(a){return a==this._volume||(this._volume=Math.max(0,Math.min(1,a)),this._muted||this._updateVolume()),this},g._getVolume=function(){return this._volume},g._setMuted=function(a){if(a===!0||a===!1)return this._muted=a,this._updateVolume(),this},g._getMuted=function(){return this._muted},g._setPan=function(a){return a==this._pan||(this._pan=Math.max(-1,Math.min(1,a)),this._updatePan()),this},g._getPan=function(){return this._pan},g._getPosition=function(){return this._paused||this.playState!=re.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},g._setPosition=function(a){return this._position=Math.max(0,a),this.playState==re.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},g._getStartTime=function(){return this._startTime},g._setStartTime=function(a){return a==this._startTime||(this._startTime=Math.max(0,a||0),this._updateStartTime()),this},g._getDuration=function(){return this._duration},g._setDuration=function(a){return a==this._duration||(this._duration=Math.max(0,a||0),this._updateDuration()),this},g._setPlaybackResource=function(a){return this._playbackResource=a,this._duration==0&&this._playbackResource&&this._setDurationFromSource(),this},g._getPlaybackResource=function(){return this._playbackResource},g._getLoop=function(){return this._loop},g._setLoop=function(a){this._playbackResource!=null&&(this._loop!=0&&a==0?this._removeLooping(a):this._loop==0&&a!=0&&this._addLooping(a)),this._loop=a},g._sendEvent=function(a){a=new re.Event(a),this.dispatchEvent(a)},g._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,re.Sound._playFinished(this)},g._interrupt=function(){this._cleanUp(),this.playState=re.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},g._beginPlaying=function(a){return this._setPosition(a.offset),this._setLoop(a.loop),this._setVolume(a.volume),this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this._playbackResource!=null&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=re.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},g._playFailed=function(){this._cleanUp(),this.playState=re.Sound.PLAY_FAILED,this._sendEvent("failed")},g._handleSoundComplete=function(a){if((this._position=0)!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=re.Sound.PLAY_FINISHED,this._sendEvent("complete")},g._handleSoundReady=function(){},g._updateVolume=function(){},g._updatePan=function(){},g._updateStartTime=function(){},g._updateDuration=function(){},g._setDurationFromSource=function(){},g._calculateCurrentPosition=function(){},g._updatePosition=function(){},g._removeLooping=function(a){},g._addLooping=function(a){},g._pause=function(){},g._resume=function(){},g._handleStop=function(){},g._handleCleanUp=function(){},g._handleLoop=function(){},re.AbstractSoundInstance=re.promote(e,"EventDispatcher"),re.DefaultSoundInstance=re.AbstractSoundInstance}(),function(){"use strict";function e(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass}var g=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},g.register=function(a){var u=this._loaders[a.src];return u&&!u.canceled?this._loaders[a.src]:(this._audioSources[a.src]=!0,this._soundInstances[a.src]=[],(u=new this._loaderClass(a)).on("complete",this._handlePreloadComplete,this),this._loaders[a.src]=u)},g.preload=function(a){a.on("error",this._handlePreloadError,this),a.load()},g.isPreloadStarted=function(a){return this._audioSources[a]!=null},g.isPreloadComplete=function(a){return!(this._audioSources[a]==null||this._audioSources[a]==1)},g.removeSound=function(a){if(this._soundInstances[a]){for(var u=this._soundInstances[a].length;u--;)this._soundInstances[a][u].destroy();delete this._soundInstances[a],delete this._audioSources[a],this._loaders[a]&&this._loaders[a].destroy(),delete this._loaders[a]}},g.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)},g.create=function(a,u,c){return this.isPreloadStarted(a)||this.preload(this.register(a)),c=new this._soundInstanceClass(a,u,c,this._audioSources[a]),this._soundInstances[a]&&this._soundInstances[a].push(c),c.setMasterVolume&&c.setMasterVolume(re.Sound.volume),c.setMasterMute&&c.setMasterMute(re.Sound.muted),c},g.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},g.getVolume=function(){return this._volume},g.setMute=function(a){return this._updateVolume(),!0},g.toString=function(){return"[AbstractPlugin]"},g._handlePreloadComplete=function(a){var u=a.target.getItem().src;this._audioSources[u]=a.result;for(var c=0,y=this._soundInstances[u].length;c<y;c++)this._soundInstances[u][c].setPlaybackResource(this._audioSources[u]),this._soundInstances[u]=null},g._handlePreloadError=function(a){},g._updateVolume=function(){},re.AbstractPlugin=e}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.SOUND)}var g=re.extend(e,re.AbstractLoader);e.context=null,g.toString=function(){return"[WebAudioLoader]"},g._createRequest=function(){this._request=new re.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},g._sendComplete=function(a){e.context.decodeAudioData(this._rawResult,re.proxy(this._handleAudioDecoded,this),re.proxy(this._sendError,this))},g._handleAudioDecoded=function(a){this._result=a,this.AbstractLoader__sendComplete()},re.WebAudioLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,c,y,B){this.AbstractSoundInstance_constructor(u,c,y,B),this.gainNode=a.context.createGain(),this.panNode=a.context.createPanner(),this.panNode.panningModel=a._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=re.proxy(this._handleSoundComplete,this)}var g=re.extend(e,re.AbstractSoundInstance),a=e;a.context=null,a._scratchBuffer=null,a.destinationNode=null,a._panningModel="equalpower",g.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},g.toString=function(){return"[WebAudioSoundInstance]"},g._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},g._removeLooping=function(u){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},g._addLooping=function(u){this.playState==re.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},g._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},g._handleCleanUp=function(){this.sourceNode&&this.playState==re.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},g._cleanUpAudioNode=function(u){if(u){if(u.stop(0),u.disconnect(0),re.BrowserDetect.isIOS)try{u.buffer=a._scratchBuffer}catch(c){}u=null}return u},g._handleSoundReady=function(u){this.gainNode.connect(a.destinationNode);var c=.001*this._duration,y=Math.min(.001*Math.max(0,this._position),c);this.sourceNode=this._createAndPlayAudioNode(a.context.currentTime-c,y),this._playbackStartTime=this.sourceNode.startTime-y,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(c-y)),this._loop!=0&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},g._createAndPlayAudioNode=function(u,c){var y=a.context.createBufferSource();y.buffer=this.playbackResource,y.connect(this.panNode);var B=.001*this._duration;return y.startTime=u+B,y.start(y.startTime,c+.001*this._startTime,B-c),y},g._pause=function(){this._position=1e3*(a.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},g._resume=function(){this._handleSoundReady()},g._updateVolume=function(){var u=this._muted?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},g._calculateCurrentPosition=function(){return 1e3*(a.context.currentTime-this._playbackStartTime)},g._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},g._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},g._updateDuration=function(){this.playState==re.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},re.WebAudioSoundInstance=re.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=a._panningModel,this.context=a.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),re.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=a._capabilities,this._loaderClass=re.WebAudioLoader,this._soundInstanceClass=re.WebAudioSoundInstance,this._addPropsToClasses()}var g=re.extend(e,re.AbstractPlugin),a=e;a._capabilities=null,a._panningModel="equalpower",a.context=null,a._scratchBuffer=null,a._unlocked=!1,a.DEFAULT_SAMPLE_RATE=44100,a.isSupported=function(){var u=re.BrowserDetect.isIOS||re.BrowserDetect.isAndroid||re.BrowserDetect.isBlackberry;return!(location.protocol=="file:"&&!u&&!this._isFileXHRSupported())&&(a._generateCapabilities(),a.context!=null)},a.playEmptySound=function(){var u;a.context!=null&&((u=a.context.createBufferSource()).buffer=a._scratchBuffer,u.connect(a.context.destination),u.start(0,0,0))},a._isFileXHRSupported=function(){return document.location.host},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null||a.context==null&&(a.context=a._createAudioContext(),a.context==null))return null;a._scratchBuffer==null&&(a._scratchBuffer=a.context.createBuffer(1,1,22050)),a._compatibilitySetUp(),"ontouchstart"in window&&a.context.state!="running"&&(a._unlock(),document.addEventListener("mousedown",a._unlock,!0),document.addEventListener("touchstart",a._unlock,!0),document.addEventListener("touchend",a._unlock,!0)),a._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=re.Sound.SUPPORTED_EXTENSIONS,y=re.Sound.EXTENSION_MAP,B=0,j=c.length;B<j;B++){var le=c[B],be=y[le]||le;a._capabilities[le]=u.canPlayType("audio/"+le)!="no"&&u.canPlayType("audio/"+le)!=""||u.canPlayType("audio/"+be)!="no"&&u.canPlayType("audio/"+be)!=""}a.context.destination.numberOfChannels<2&&(a._capabilities.panning=!1)}},a._createAudioContext=function(){var u=window.AudioContext||window.webkitAudioContext;if(u==null)return null;var c,y,B=new u;return console.warn("The AudioContext is ready"),/(iPhone|iPad)/i.test(navigator.userAgent)&&B.sampleRate!==a.DEFAULT_SAMPLE_RATE&&(c=B.createBuffer(1,1,a.DEFAULT_SAMPLE_RATE),(y=B.createBufferSource()).buffer=c,y.connect(B.destination),y.start(0),y.disconnect(),B.close(),B=new u),B},a._compatibilitySetUp=function(){var u;a._panningModel="equalpower",a.context.createGain||(a.context.createGain=a.context.createGainNode,(u=a.context.createBufferSource()).__proto__.start=u.__proto__.noteGrainOn,u.__proto__.stop=u.__proto__.noteOff,a._panningModel=0)},a._unlock=function(){a._unlocked||(a.playEmptySound(),a.context.state=="running"&&(document.removeEventListener("mousedown",a._unlock,!0),document.removeEventListener("touchend",a._unlock,!0),document.removeEventListener("touchstart",a._unlock,!0),a._unlocked=!0))},g.toString=function(){return"[WebAudioPlugin]"},g._addPropsToClasses=function(){var u=this._soundInstanceClass;u.context=this.context,u._scratchBuffer=a._scratchBuffer,u.destinationNode=this.gainNode,u._panningModel=this._panningModel,this._loaderClass.context=this.context},g._updateVolume=function(){var u=re.Sound._masterMute?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},re.WebAudioPlugin=re.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(){throw"HTMLAudioTagPool cannot be instantiated"}var g=e;function a(c){this._tags=[]}g._tags={},g._tagPool=new a,g._tagUsed={},g.get=function(c){var y=g._tags[c];return y==null?(y=g._tags[c]=g._tagPool.get()).src=c:g._tagUsed[c]?(y=g._tagPool.get()).src=c:g._tagUsed[c]=!0,y},g.set=function(c,y){y==g._tags[c]?g._tagUsed[c]=!1:g._tagPool.set(y)},g.remove=function(c){var y=g._tags[c];return y!=null&&(g._tagPool.set(y),delete g._tags[c],delete g._tagUsed[c],!0)},g.getDuration=function(c){return c=g._tags[c],c!=null&&c.duration?1e3*c.duration:0},re.HTMLAudioTagPool=e;var u=a.prototype;u.constructor=a,u.get=function(){var c=this._tags.length==0?this._createTag():this._tags.pop();return c.parentNode==null&&document.body.appendChild(c),c},u.set=function(c){re.indexOf(this._tags,c)==-1&&(this._tags.src=null,this._tags.push(c))},u.toString=function(){return"[TagPool]"},u._createTag=function(){var c=document.createElement("audio");return c.autoplay=!1,c.preload="none",c}}(),function(){"use strict";function e(a,u,c,y){this.AbstractSoundInstance_constructor(a,u,c,y),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=re.proxy(this._handleSoundComplete,this),this._readyHandler=re.proxy(this._handleTagReady,this),this._stalledHandler=re.proxy(this._playFailed,this),this._audioSpriteEndHandler=re.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=re.proxy(this._handleSoundComplete,this),c?this._audioSpriteStopTime=.001*(u+c):this._duration=re.HTMLAudioTagPool.getDuration(this.src)}var g=re.extend(e,re.AbstractSoundInstance);g.setMasterVolume=function(a){this._updateVolume()},g.setMasterMute=function(a){this._updateVolume()},g.toString=function(){return"[HTMLAudioSoundInstance]"},g._removeLooping=function(){this._playbackResource!=null&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},g._addLooping=function(){this._playbackResource==null||this._audioSpriteStopTime||(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},g._handleCleanUp=function(){var a=this._playbackResource;if(a!=null){a.pause(),a.loop=!1,a.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(u){}re.HTMLAudioTagPool.set(this.src,a),this._playbackResource=null}},g._beginPlaying=function(a){return this._playbackResource=re.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(a)},g._handleSoundReady=function(a){if(this._playbackResource.readyState!==4){var u=this._playbackResource;return u.addEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),u.addEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),u.preload="auto",void u.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._loop!=0&&(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},g._handleTagReady=function(a){this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},g._pause=function(){this._playbackResource.pause()},g._resume=function(){this._playbackResource.play()},g._updateVolume=function(){var a;this._playbackResource==null||(a=this._muted||re.Sound._masterMute?0:this._volume*re.Sound._masterVolume)!=this._playbackResource.volume&&(this._playbackResource.volume=a)},g._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},g._updatePosition=function(){this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(a){this._handleSetPositionSeek(null)}},g._handleSetPositionSeek=function(a){this._playbackResource!=null&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},g._handleAudioSpriteLoop=function(a){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),this._loop==0?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},g._handleLoop=function(a){this._loop==0&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},g._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==re.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},g._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==re.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},g._setDurationFromSource=function(){this._duration=re.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},re.HTMLAudioSoundInstance=re.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._capabilities=a._capabilities,this._loaderClass=re.SoundLoader,this._soundInstanceClass=re.HTMLAudioSoundInstance}var g=re.extend(e,re.AbstractPlugin),a=e;a.MAX_INSTANCES=30,a._AUDIO_READY="canplaythrough",a._AUDIO_ENDED="ended",a._AUDIO_SEEKED="seeked",a._AUDIO_STALLED="stalled",a._TIME_UPDATE="timeupdate",a._capabilities=null,a.isSupported=function(){return a._generateCapabilities(),a._capabilities!=null},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null)return null;a._capabilities={panning:!1,volume:!0,tracks:-1};for(var c=re.Sound.SUPPORTED_EXTENSIONS,y=re.Sound.EXTENSION_MAP,B=0,j=c.length;B<j;B++){var le=c[B],be=y[le]||le;a._capabilities[le]=u.canPlayType("audio/"+le)!="no"&&u.canPlayType("audio/"+le)!=""||u.canPlayType("audio/"+be)!="no"&&u.canPlayType("audio/"+be)!=""}}},g.register=function(y){var c=re.HTMLAudioTagPool.get(y.src),y=this.AbstractPlugin_register(y);return y.setTag(c),y},g.removeSound=function(u){this.AbstractPlugin_removeSound(u),re.HTMLAudioTagPool.remove(u)},g.create=function(u,c,y){return y=this.AbstractPlugin_create(u,c,y),y.playbackResource=null,y},g.toString=function(){return"[HTMLAudioPlugin]"},g.setVolume=g.getVolume=g.setMute=null,re.HTMLAudioPlugin=re.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,this._status=-1,this._lastTick=0,a&&(this.useTicks=!!a.useTicks,this.ignoreGlobalPause=!!a.ignoreGlobalPause,this.loop=a.loop===!0?-1:a.loop||0,this.reversed=!!a.reversed,this.bounce=!!a.bounce,this.timeScale=a.timeScale||1,a.onChange&&this.addEventListener("change",a.onChange),a.onComplete&&this.addEventListener("complete",a.onComplete))}var g=re.extend(e,re.EventDispatcher);g._setPaused=function(a){return re.Tween._register(this,a),this},g.setPaused=re.deprecate(g._setPaused,"AbstractTween.setPaused"),g._getPaused=function(){return this._paused},g.getPaused=re.deprecate(g._getPaused,"AbstactTween.getPaused"),g._getCurrentLabel=function(a){var u=this.getLabels();a==null&&(a=this.position);for(var c=0,y=u.length;c<y&&!(a<u[c].position);c++);return c===0?null:u[c-1].label},g.getCurrentLabel=re.deprecate(g._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(g,{paused:{set:g._setPaused,get:g._getPaused},currentLabel:{get:g._getCurrentLabel}})}catch(a){}g.advance=function(a,u){this.setPosition(this.rawPosition+a*this.timeScale,u)},g.setPosition=function(a,u,c,y){var B=this.duration,j=this.loop,le=this.rawPosition,be=0,Pe=0,t=!1;if(a<0&&(a=0),B===0){if(t=!0,le!==-1)return t}else{if(Pe=a-(be=a/B|0)*B,(t=j!==-1&&j*B+B<=a)&&(a=(Pe=B)*(be=j)+B),a===le)return t;!this.reversed!=!(this.bounce&&be%2)&&(Pe=B-Pe)}this.position=Pe,this.rawPosition=a,this._updatePosition(c,t),t&&(this.paused=!0),y&&y(this),u||this._runActions(le,a,c,!c&&le===-1),this.dispatchEvent("change"),t&&this.dispatchEvent("complete")},g.calculatePosition=function(a){var u=this.duration,c=this.loop,y=0,B=0;return u===0?0:(c!==-1&&c*u+u<=a?(B=u,y=c):B=a<0?0:a-(y=a/u|0)*u,!this.reversed!=!(this.bounce&&y%2)?u-B:B)},g.getLabels=function(){var a=this._labelList;if(!a){a=this._labelList=[];var u,c=this._labels;for(u in c)a.push({label:u,position:c[u]});a.sort(function(y,B){return y.position-B.position})}return a},g.setLabels=function(a){this._labels=a,this._labelList=null},g.addLabel=function(a,u){this._labels||(this._labels={}),this._labels[a]=u;var c=this._labelList;if(c){for(var y=0,B=c.length;y<B&&!(u<c[y].position);y++);c.splice(y,0,{label:a,position:u})}},g.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},g.gotoAndStop=function(a){this.paused=!0,this._goto(a)},g.resolve=function(a){var u=Number(a);return isNaN(u)&&(u=this._labels&&this._labels[a]),u},g.toString=function(){return"[AbstractTween]"},g.clone=function(){throw"AbstractTween can not be cloned."},g._init=function(a){a&&a.paused||(this.paused=!1),a&&a.position!=null&&this.setPosition(a.position)},g._updatePosition=function(a,u){},g._goto=function(a){a=this.resolve(a),a!=null&&this.setPosition(a,!1,!0)},g._runActions=function(a,u,c,y){if(this._actionHead||this.tweens){var B,j,le,be,Pe=this.duration,t=this.reversed,r=this.bounce,i=this.loop;if(Pe===0?(B=j=le=be=0,t=r=!1):(le=a-(B=a/Pe|0)*Pe,be=u-(j=u/Pe|0)*Pe),i!==-1&&(i<j&&(be=Pe,j=i),i<B&&(le=Pe,B=i)),c)return this._runActionsRange(be,be,c,y);if(B!==j||le!==be||c||y){B===-1&&(B=le=0);var o=a<=u,l=B;do{var f=!t!=!(r&&l%2),d=l===B?le:o?0:Pe,p=l===j?be:o?Pe:0;if(f&&(d=Pe-d,p=Pe-p),(!r||l===B||d!==p)&&this._runActionsRange(d,p,c,y||l!==B&&!r))return!0}while(y=!1,o&&++l<=j||!o&&--l>=j)}}},g._runActionsRange=function(a,u,c,y){},re.AbstractTween=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(c,y){this.AbstractTween_constructor(y),this.pluginData=null,this.target=c,this.passive=!1,this._stepHead=new a(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,y&&(this.pluginData=y.pluginData,y.override&&e.removeTweens(c)),this.pluginData||(this.pluginData={}),this._init(y)}var g=re.extend(e,re.AbstractTween);function a(c,y,B,j,le,be){this.next=null,this.prev=c,this.t=y,this.d=B,this.props=j,this.ease=le,this.passive=be,this.index=c?c.index+1:0}function u(c,y,B,j,le){this.next=null,this.prev=c,this.t=y,this.d=0,this.scope=B,this.funct=j,this.params=le}e.IGNORE={},e._tweens=[],e._plugins=null,e._tweenHead=null,e._tweenTail=null,e._inTick=0,e.get=function(c,y){return new e(c,y)},e.tick=function(c,y){for(var B=e._tweenHead,j=e._inTick=Date.now();B;){var le=B._next,be=B._status;B._lastTick=j,be===1?B._status=0:be===-1?e._delist(B):y&&!B.ignoreGlobalPause||B._paused||B.advance(B.useTicks?1:c),B=le}e._inTick=0},e.handleEvent=function(c){c.type==="tick"&&this.tick(c.delta,c.paused)},e.removeTweens=function(c){if(c.tweenjs_count){for(var y=e._tweenHead;y;){var B=y._next;y.target===c&&e._register(y,!0),y=B}c.tweenjs_count=0}},e.removeAllTweens=function(){for(var c=e._tweenHead;c;){var y=c._next;c._paused=!0,c.target&&(c.target.tweenjs_count=0),c._next=c._prev=null,c=y}e._tweenHead=e._tweenTail=null},e.hasActiveTweens=function(c){return c?!!c.tweenjs_count:!!e._tweenHead},e._installPlugin=function(c){for(var y=c.priority=c.priority||0,B=e._plugins=e._plugins||[],j=0,le=B.length;j<le&&!(y<B[j].priority);j++);B.splice(j,0,c)},e._register=function(c,y){var B,j=c.target;!y&&c._paused?(j&&(j.tweenjs_count=j.tweenjs_count?j.tweenjs_count+1:1),(B=e._tweenTail)?(e._tweenTail=B._next=c)._prev=B:e._tweenHead=e._tweenTail=c,c._status=e._inTick?1:0,!e._inited&&re.Ticker&&(re.Ticker.addEventListener("tick",e),e._inited=!0)):y&&!c._paused&&(j&&j.tweenjs_count--,e._inTick&&c._lastTick!==e._inTick||e._delist(c),c._status=-1),c._paused=y},e._delist=function(c){var y=c._next,B=c._prev;y?y._prev=B:e._tweenTail=B,B?B._next=y:e._tweenHead=y,c._next=c._prev=null},g.wait=function(c,y){return 0<c&&this._addStep(+c,this._stepTail.props,null,y),this},g.to=function(c,y,B){return(y==null||y<0)&&(y=0),B=this._addStep(+y,null,B),this._appendProps(c,B),this},g.label=function(c){return this.addLabel(c,this.duration),this},g.call=function(c,y,B){return this._addAction(B||this.target,c,y||[this])},g.set=function(c,y){return this._addAction(y||this.target,this._set,[c])},g.play=function(c){return this._addAction(c||this,this._set,[{paused:!1}])},g.pause=function(c){return this._addAction(c||this,this._set,[{paused:!0}])},g.w=g.wait,g.t=g.to,g.c=g.call,g.s=g.set,g.toString=function(){return"[Tween]"},g.clone=function(){throw"Tween can not be cloned."},g._addPlugin=function(c){var y=this._pluginIds||(this._pluginIds={}),B=c.ID;if(B&&!y[B]){y[B]=!0;for(var j=this._plugins||(this._plugins=[]),le=c.priority||0,be=0,Pe=j.length;be<Pe;be++)if(le<j[be].priority)return void j.splice(be,0,c);j.push(c)}},g._updatePosition=function(c,y){var B=this._stepHead.next,j=this.position,le=this.duration;if(this.target&&B){for(var be=B.next;be&&be.t<=j;)be=(B=B.next).next;le=y?le===0?1:j/le:(j-B.t)/B.d,this._updateTargetProps(B,le,y)}this._stepPosition=B?j-B.t:0},g._updateTargetProps=function(c,y,B){if(!(this.passive=!!c.passive)){var j,le,be,Pe,t=c.prev.props,r=c.props;(Pe=c.ease)&&(y=Pe(y,0,1,1));var i=this._plugins;e:for(var o in t){if(j=(le=t[o])!==(be=r[o])&&typeof le=="number"?le+(be-le)*y:1<=y?be:le,i)for(var l=0,f=i.length;l<f;l++){var d=i[l].change(this,c,o,j,y,B);if(d===e.IGNORE)continue e;d!==void 0&&(j=d)}this.target[o]=j}}},g._runActionsRange=function(c,y,B,j){var le=y<c,be=le?this._actionTail:this._actionHead,Pe=y,t=c;le&&(Pe=c,t=y);for(var r=this.position;be;){var i=be.t;if((i===y||t<i&&i<Pe||j&&i===c)&&(be.funct.apply(be.scope,be.params),r!==this.position))return!0;be=le?be.prev:be.next}},g._appendProps=function(c,y,B){var j,le,be,Pe,t=this._stepHead.props,r=this.target,i=e._plugins,o=y.prev,l=o.props,f=y.props||(y.props=this._cloneProps(l)),d={};for(j in c)if(c.hasOwnProperty(j)&&(d[j]=f[j]=c[j],t[j]===void 0)){if(Pe=void 0,i){for(le=i.length-1;0<=le;le--)if((be=i[le].init(this,j,Pe))!==void 0&&(Pe=be),Pe===e.IGNORE){delete f[j],delete d[j];break}}Pe!==e.IGNORE&&(Pe===void 0&&(Pe=r[j]),l[j]=Pe===void 0?null:Pe)}for(j in d){be=c[j];for(var p,_=o;(p=_)&&(_=p.prev);)if(_.props!==p.props){if(_.props[j]!==void 0)break;_.props[j]=l[j]}}if(B!==!1&&(i=this._plugins))for(le=i.length-1;0<=le;le--)i[le].step(this,y,d);(B=this._injected)&&(this._injected=null,this._appendProps(B,y,!1)),this.step=y},g._injectProp=function(c,y){(this._injected||(this._injected={}))[c]=y},g._addStep=function(c,y,B,j){return j=new a(this._stepTail,this.duration,c,y,B,j||!1),this.duration+=c,this._stepTail=this._stepTail.next=j},g._addAction=function(c,y,B){return B=new u(this._actionTail,this.duration,c,y,B),this._actionTail?this._actionTail.next=B:this._actionHead=B,this._actionTail=B,this},g._set=function(c){for(var y in c)this[y]=c[y]},g._cloneProps=function(c){var y,B={};for(y in c)B[y]=c[y];return B},re.Tween=re.promote(e,"AbstractTween")}(),function(){"use strict";function e(a){var u,c;a instanceof Array||a==null&&1<arguments.length?(u=a,c=arguments[1],a=arguments[2]):a&&(u=a.tweens,c=a.labels),this.AbstractTween_constructor(a),this.tweens=[],u&&this.addTween.apply(this,u),this.setLabels(c),this._init(a)}var g=re.extend(e,re.AbstractTween);g.addTween=function(a){a._parent&&a._parent.removeTween(a);var u=arguments.length;if(1<u){for(var c=0;c<u;c++)this.addTween(arguments[c]);return arguments[u-1]}if(u===0)return null;this.tweens.push(a),a._parent=this,a.paused=!0;var y=a.duration;return 0<a.loop&&(y*=a.loop+1),y>this.duration&&(this.duration=y),0<=this.rawPosition&&a.setPosition(this.rawPosition),a},g.removeTween=function(a){var u=arguments.length;if(1<u){for(var c=!0,y=0;y<u;y++)c=c&&this.removeTween(arguments[y]);return c}if(u===0)return!0;for(var B=this.tweens,y=B.length;y--;)if(B[y]===a)return B.splice(y,1),a._parent=null,a.duration>=this.duration&&this.updateDuration(),!0;return!1},g.updateDuration=function(){for(var a=this.duration=0,u=this.tweens.length;a<u;a++){var c=this.tweens[a],y=c.duration;0<c.loop&&(y*=c.loop+1),y>this.duration&&(this.duration=y)}},g.toString=function(){return"[Timeline]"},g.clone=function(){throw"Timeline can not be cloned."},g._updatePosition=function(a,u){for(var c=this.position,y=0,B=this.tweens.length;y<B;y++)this.tweens[y].setPosition(c,!0,a)},g._runActionsRange=function(a,u,c,y){for(var B=this.position,j=0,le=this.tweens.length;j<le;j++)if(this.tweens[j]._runActions(a,u,c,y),B!==this.position)return!0},re.Timeline=re.promote(e,"AbstractTween")}(),function(){"use strict";function e(){throw"Ease cannot be instantiated."}e.none=e.linear=function(g){return g},e.get=function(g){return g<-1?g=-1:1<g&&(g=1),function(a){return g==0?a:g<0?a*(a*-g+1+g):a*((2-a)*g+(1-g))}},e.getPowIn=function(g){return function(a){return Math.pow(a,g)}},e.getPowOut=function(g){return function(a){return 1-Math.pow(1-a,g)}},e.getPowInOut=function(g){return function(a){return(a*=2)<1?.5*Math.pow(a,g):1-.5*Math.abs(Math.pow(2-a,g))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(g){return 1-Math.cos(g*Math.PI/2)},e.sineOut=function(g){return Math.sin(g*Math.PI/2)},e.sineInOut=function(g){return-.5*(Math.cos(Math.PI*g)-1)},e.backIn=(e.getBackIn=function(g){return function(a){return a*a*((g+1)*a-g)}})(1.7),e.backOut=(e.getBackOut=function(g){return function(a){return--a*a*((g+1)*a+g)+1}})(1.7),e.backInOut=(e.getBackInOut=function(g){return g*=1.525,function(a){return(a*=2)<1?a*a*((g+1)*a-g)*.5:.5*((a-=2)*a*((g+1)*a+g)+2)}})(1.7),e.circIn=function(g){return-(Math.sqrt(1-g*g)-1)},e.circOut=function(g){return Math.sqrt(1- --g*g)},e.circInOut=function(g){return(g*=2)<1?-.5*(Math.sqrt(1-g*g)-1):.5*(Math.sqrt(1-(g-=2)*g)+1)},e.bounceIn=function(g){return 1-e.bounceOut(1-g)},e.bounceOut=function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375},e.bounceInOut=function(g){return g<.5?.5*e.bounceIn(2*g):.5*e.bounceOut(2*g-1)+.5},e.elasticIn=(e.getElasticIn=function(g,a){var u=2*Math.PI;return function(c){if(c==0||c==1)return c;var y=a/u*Math.asin(1/g);return-(g*Math.pow(2,10*--c)*Math.sin((c-y)*u/a))}})(1,.3),e.elasticOut=(e.getElasticOut=function(g,a){var u=2*Math.PI;return function(c){if(c==0||c==1)return c;var y=a/u*Math.asin(1/g);return g*Math.pow(2,-10*c)*Math.sin((c-y)*u/a)+1}})(1,.3),e.elasticInOut=(e.getElasticInOut=function(g,a){var u=2*Math.PI;return function(c){var y=a/u*Math.asin(1/g);return(c*=2)<1?g*Math.pow(2,10*--c)*Math.sin((c-y)*u/a)*-.5:g*Math.pow(2,-10*--c)*Math.sin((c-y)*u/a)*.5+1}})(1,.3*1.5),re.Ease=e}(),function(){"use strict";function e(){throw"MotionGuidePlugin cannot be instantiated."}var g=e;g.priority=0,g.ID="MotionGuide",g.install=function(){return re.Tween._installPlugin(e),re.Tween.IGNORE},g.init=function(a,u,c){u=="guide"&&a._addPlugin(g)},g.step=function(a,u,c){for(var y in c)if(y==="guide"){var B=u.props.guide,j=g._solveGuideData(c.guide,B);B.valid=!j;var le=B.endData;if(a._injectProp("x",le.x),a._injectProp("y",le.y),j||!B.orient)break;if(j=u.prev.props.rotation===void 0?a.target.rotation||0:u.prev.props.rotation,B.startOffsetRot=j-B.startData.rotation,B.orient=="fixed")B.endAbsRot=le.rotation+B.startOffsetRot,B.deltaRotation=0;else{var le=c.rotation===void 0?a.target.rotation||0:c.rotation,be=le-B.endData.rotation-B.startOffsetRot,Pe=be%360;switch(B.endAbsRot=le,B.orient){case"auto":B.deltaRotation=be;break;case"cw":B.deltaRotation=(360+Pe)%360+360*Math.abs(be/360|0);break;case"ccw":B.deltaRotation=(Pe-360)%360+-360*Math.abs(be/360|0)}}a._injectProp("rotation",B.endAbsRot)}},g.change=function(a,u,c,y,B,j){var le=u.props.guide;if(le&&u.props!==u.prev.props&&le!==u.prev.props.guide)return c==="guide"&&!le.valid||c=="x"||c=="y"||c==="rotation"&&le.orient?re.Tween.IGNORE:void g._ratioToPositionData(B,le,a.target)},g.debug=function(a,u,c){a=a.guide||a;var y=g._findPathProblems(a);if(y&&console.error("MotionGuidePlugin Error found: \n"+y),!u)return y;var B=a.path,j=B.length;for(u.save(),u.lineCap="round",u.lineJoin="miter",u.beginPath(),u.moveTo(B[0],B[1]),t=2;t<j;t+=4)u.quadraticCurveTo(B[t],B[t+1],B[t+2],B[t+3]);u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="white",u.lineWidth=3,u.stroke(),u.closePath();var le=c.length;if(c&&le){var be={},Pe={};g._solveGuideData(a,be);for(var t=0;t<le;t++)be.orient="fixed",g._ratioToPositionData(c[t],be,Pe),u.beginPath(),u.moveTo(Pe.x,Pe.y),u.lineTo(Pe.x+9*Math.cos(.0174533*Pe.rotation),Pe.y+9*Math.sin(.0174533*Pe.rotation)),u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="red",u.lineWidth=3,u.stroke(),u.closePath()}return u.restore(),y},g._solveGuideData=function(b,u){if(R=g.debug(b))return R;var c=u.path=b.path;u.orient=b.orient,u.subLines=[],u.totalLength=0,u.startOffsetRot=0,u.deltaRotation=0,u.startData={ratio:0},u.endData={ratio:1},u.animSpan=1;for(var y,B,j,le,be=c.length,Pe={},t=c[0],r=c[1],i=2;i<be;i+=4){y=c[i],B=c[i+1],j=c[i+2],le=c[i+3];for(var o={weightings:[],estLength:0,portion:0},l=t,f=r,d=1;d<=10;d++){g._getParamsForCurve(t,r,y,B,j,le,d/10,!1,Pe);var p=Pe.x-l,_=Pe.y-f,P=Math.sqrt(p*p+_*_);o.weightings.push(P),o.estLength+=P,l=Pe.x,f=Pe.y}for(u.totalLength+=o.estLength,d=0;d<10;d++)P=o.estLength,o.weightings[d]=o.weightings[d]/P;u.subLines.push(o),t=j,r=le}P=u.totalLength;var T=u.subLines.length;for(i=0;i<T;i++)u.subLines[i].portion=u.subLines[i].estLength/P;var R=isNaN(b.start)?0:b.start,b=isNaN(b.end)?1:b.end;g._ratioToPositionData(R,u,u.startData),g._ratioToPositionData(b,u,u.endData),u.startData.ratio=R,u.endData.ratio=b,u.animSpan=u.endData.ratio-u.startData.ratio},g._ratioToPositionData=function(a,u,c){for(var y,B,j,le=u.subLines,be=0,Pe=a*u.animSpan+u.startData.ratio,t=le.length,r=0;r<t;r++){if(Pe<=be+(B=le[r].portion)){j=r;break}be+=B}j===void 0&&(j=t-1,be-=B);var i=le[j].weightings,o=B;for(t=i.length,r=0;r<t&&!(Pe<=be+(B=i[r]*o));r++)be+=B;j=4*j+2,y=r/10+(Pe-be)/B*.1;var l=u.path;return g._getParamsForCurve(l[j-2],l[j-1],l[j],l[j+1],l[j+2],l[j+3],y,u.orient,c),u.orient&&(.99999<=a&&a<=1.00001&&u.endAbsRot!==void 0?c.rotation=u.endAbsRot:c.rotation+=u.startOffsetRot+a*u.deltaRotation),c},g._getParamsForCurve=function(a,u,c,y,B,j,le,be,Pe){var t=1-le;Pe.x=t*t*a+2*t*le*c+le*le*B,Pe.y=t*t*u+2*t*le*y+le*le*j,be&&(Pe.rotation=57.2957795*Math.atan2((y-u)*t+(j-y)*le,(c-a)*t+(B-c)*le))},g._findPathProblems=function(a){var u=a.path,c=u&&u.length||0;if(c<6||(c-2)%4){var y="	Cannot parse 'path' array due to invalid number of entries in path. ";return y+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",y+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",y+="Only [ "+c+" ] values found. Expected: "+Math.max(4*Math.ceil((c-2)/4)+2,6)}for(var B=0;B<c;B++)if(isNaN(u[B]))return"All data in path array must be numeric";return y=a.start,isNaN(y)&&y!==void 0?"'start' out of bounds. Expected 0 to 1, got: "+y:(y=a.end,isNaN(y)&&y!==void 0?"'end' out of bounds. Expected 0 to 1, got: "+y:(a=a.orient,a&&a!="fixed"&&a!="auto"&&a!="cw"&&a!="ccw"?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a:void 0))},re.MotionGuidePlugin=e}(),function(){"use strict";var e=re.TweenJS=re.TweenJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),Dn.createjs=Dn.createjs||{},function(){"use strict";function e(){throw"CSSPlugin cannot be instantiated."}var g=e;function a(u,c){for(var y,B,j,le=[!1,u];y=g.TRANSFORM_RE.exec(u);)y[3]!=="*"?(B=[y[1]],j=c&&c[le.length],!c||j&&B[0]===j[0]||(console.log("transforms don't match: ",B[0],j&&j[0]),c=null),function(be,Pe,t){for(;;){var r=g.TRANSFORM_VALUE_RE.exec(be);if(!r)return;(t=t||[]).push(+r[1],r[2]),Pe&&Pe[t.length-1]!==r[2]&&(console.log("transform units don't match: ",t[0],Pe[t.length-1],r[2]),Pe=null)}}(y[2],j,B),le.push(B)):le.push(c[le.length]);return le[0]=!!c,le}g.priority=100,g.ID="CSS",g.VALUE_RE=/^(-?[\d.]+)([a-z%]*)$/,g.TRANSFORM_VALUE_RE=/(?:^| |,)(-?[\d.]+)([a-z%]*)/g,g.TRANSFORM_RE=/(\w+?)\(([^)]+)\)|(?:^| )(\*)(?:$| )/g,g.compute=!1,g.install=function(){re.Tween._installPlugin(e)},g.init=function(u,c,y){var B=u.pluginData;if(!B.CSS_disabled&&u.target instanceof HTMLElement){var j,le=y||(j=u.target,le=c,((y=B.CSS_compute)||y==null&&g.compute?window.getComputedStyle(j):j.style)[le]);if(le!==void 0)return u._addPlugin(e),u=B.CSS||(B.CSS={}),c==="transform"?(u[c]="_t",a(le)):(B=g.VALUE_RE.exec(le),B===null?(u[c]="",le):(u[c]=B[2],parseFloat(B[1])))}},g.step=function(u,c,y){y.transform&&(c.props.transform=a(c.props.transform,c.prev.props.transform))},g.change=function(u,c,y,B,j,le){var be=u.pluginData.CSS[y];if(be!==void 0)return y==="transform"?B=function(Pe,t,r){if(r===1)return t[1];if(r===0||!t[0])return Pe[1];for(var i,o,l="",f=Pe.length,d=2;d<f;d++){var p=Pe[d],_=t[d];for(l+=p[0]+"(",i=1,o=p.length;i<o;i+=2)l+=p[i]+(_[i]-p[i])*r,l+=_[i+1]||p[i+1],i<o-2&&(l+=", ");l+=")",d<f-1&&(l+=" ")}return l}(c.prev.props[y],c.props[y],j):B+=be,u.target.style[y]=B,re.Tween.IGNORE},re.CSSPlugin=g}(),re.CSSPlugin.install(),Dn.createjs=Dn.createjs||{},function(){"use strict";function e(){throw"DotPlugin cannot be instantiated."}var g=e;g.priority=100,g.ID="Dot",g.install=function(){re.Tween._installPlugin(e)},g.init=function(a,u,c){var y=a.pluginData;if(!y.Dot_disabled&&u[0]==="."){a._addPlugin(e);for(var B=a.target,j=u.split("."),le=1,be=j.length;le<be-1;le++)if(!(B=B[j[le]]))return re.Tween.IGNORE;var Pe=j[le],a=B[Pe],c=c===void 0?a:c;return y.Dot=y.Dot||{},y.Dot[u]={t:B,n:Pe},c}},g.step=function(a,u,c){},g.change=function(be,u,c,y,B,j){var le,be=be.pluginData.Dot;if(be&&(le=be[c]))return le.t[le.n]=y,re.Tween.IGNORE},re.DotPlugin=g}(),Dn.createjs=Dn.createjs||{},function(){"use strict";function e(){throw"RelativePlugin plugin cannot be instantiated."}var g=e;g.ID="Relative",g.install=function(){re.Tween._installPlugin(e)},g.init=function(a,u,c){a.pluginData.Relative_disabled||a._addPlugin(g)},g.step=function(a,u,c){for(var y in c){var B,j,le=c[y];typeof le=="string"&&(B=u.prev.props[y],(j=le[0])!=="+"&&j!=="-"||isNaN(le=+le+B)||(u.props[y]=le))}},g.change=function(a,u,c,y,B,j){},re.RelativePlugin=g}(),re.DotPlugin.install(),re.RelativePlugin.install(),window.addEventListener("DOMContentLoaded",function(){var e=document.createElement("style");e.innerHTML="canvas {-webkit-tap-highlight-color: transparent;}",document.body.appendChild(e)});window.createjs=re;dr.exports=function(){return re}});var Xi=Pi(ni(),1);var fe=window||{},je=fe.createjs,Lt=fe.zns,kt=fe.zon==null?!0:fe.zon,Si,Ii,pn,qn=kt?console.log.bind(console):function(){},tr=" border:thin solid black; color: black",ui=kt?console.log.bind(console,"%c Z ","background: #acd241;"+tr):function(){},Mi=kt?console.log.bind(console,"%c Z ","background: #e472c4;"+tr):function(){},Gr=kt?console.log.bind(console,"%c Z ","background: #50c4b7;"+tr):function(){},fi=kt?console.log.bind(console,"%c Z ","background: #fb4758;"+tr):function(){},ht=kt?console.log.bind(console,"%c Z ","background: #ebcb35;"+tr):function(){},ci=kt?console.log.bind(console,"%c Z ","background: #f58e25;"+tr):function(){},Sr=kt?console.log.bind(console,"%c Z ","background: #eeeeee;"+tr):function(){},Ir=kt?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function Tn(e){return qe("1"),document.getElementById(e)}function Oi(e){if(qe("2"),document.getElementById(e))return document.getElementById(e).style;kt&&ht("zss(): id not found")}function or(e,g,a,u,c,y){if(qe("3"),n(g)&&g!=""||g=="_self")fe.location.href=e;else{var B="";return a&&(B+="width="+a+","),u&&(B+="height="+u+","),c&&(B+="fullscreen=yes,"),y&&(B+="modal=yes,alwaysRaised=yes"),fe.open(e,g,B)}}function jn(e){if(qe("4"),!n(e))return Number(String(e).replace(/[^\d.-]/g,""))}function n(e){return e==null}function Li(e){qe("5"),!n(e)&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),fe.event&&(fe.event.cancelBubble=!0))}function Ur(){return qe("6"),fe.zilK&&(fe.removeEventListener("keydown",fe.zilK),fe.removeEventListener("wheel",fe.zilW),fe.removeEventListener("DOMMouseScroll",fe.zilS)),fe.zilK=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},fe.zilW=function(e){e||(e=event),e.preventDefault()},fe.zilS=fe.zilW,fe.addEventListener("keydown",fe.zilK,{passive:!1}),fe.addEventListener("wheel",fe.zilW,{passive:!1}),fe.addEventListener("DOMMouseScroll",fe.zilS,{passive:!1}),[fe.zilK,fe.zilW,fe.zilS]}function gr(e,g){qe("6.1");function a(){var u=this;this.on=function(c,y){if(!(n(e)||n(c)||n(y)))for(var B=u.tags,j=0;j<B.length;j++)B[j].addEventListener(c,y)},this.off=function(c,y){if(!(n(e)||n(c)||n(y)))for(var B=u.tags,j=0;j<B.length;j++)B[j].removeEventListener(c,y)},Object.defineProperty(u,"tags",{get:function(){return n(e)?[]:typeof e=="string"||e instanceof String?(g&&ci(e,document.querySelector(e)),g?[document.querySelector(e)]:document.querySelectorAll(e)):typeof e.innerHTML=="string"?[e]:[]},set:function(){}}),this.css=function(c,y){for(var B=u.tags,j=0;j<B.length;j++)if(arguments.length==1&&arguments[0].constructor==={}.constructor)for(var le in c)B[j].style[le]=c[le];else{if(arguments.length==1)return u.tags[0].style[c];B[j].style[c]=y}},this.prop=function(c,y){if(!n(c)){for(var B=u.tags,j=[],le=0;le<B.length;le++)if(n(y))if(c.constructor==={}.constructor)for(var be in c)B[le][be]=c[be];else j.push(B[le][c]);else B[le][c]=y;if(n(y))return j}}}return new a}function gn(e){return e.length==1&&e[0]!=null&&e[0].constructor==={}.constructor}function mt(e,g,a,u){var c=Ie&&(Ie.ZIMONON||hi);if(gn(g)){qe("7");var y=g[0],B;for(var j in y)(B=j.match(/^(.+)gColor$/))&&(y[B[1]+"ackgroundColor"]=y[j],delete y[j]);var le=n(a)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):a.replace(/\s+/g,"").split(","),be=[],Pe,t;for(Pe=0;Pe<le.length;Pe++)t=le[Pe].split("=")[0],le[Pe]=t,be.push(y[t]);for(Pe in y)le.indexOf(Pe)<0&&kt&&ht(e,"bad argument "+Pe);var r;return(r=Object.prototype.isPrototypeOf.call(e.prototype,u)?new(e.bind.apply(e,[null].concat(be))):e.apply(null,be))?(c&&!r.arguments&&(r.arguments=[y]),r):!0}else c&&u&&g&&n(u.arguments)&&(u.arguments=Array.prototype.slice.call(g))}function dt(e){if(qe("7.5"),qe("17.6"),!n(e))return Ie.Pick.choose(e)}var Di=console.table&&kt?console.table.bind(console):function(){},Ri=function(){for(var e=0;e<arguments.length;e++)if(!n(arguments[e]))return arguments[e]},Ie=function(e){e.chop=function(t,r,i,o,l,f){if(qe("7.8"),!n(t)){n(r)&&(r=3),n(i)&&(i=3),n(o)&&(o=!0),n(l)&&(l=0),n(f)&&(f=1),t.getBounds||(t=new e.Bitmap(t));var d=t.getBounds();n(d)&&ht("ZIM chop() - obj must have bounds");var p=d.width/r,_=d.height/i,P=l,T=[];return e.loop(i,function(R){e.loop(r,function(b){var L=new e.Bitmap(t,p+P*2,_+P*2,b*p-P,R*_-P,f);l!=0?(L.setBounds(P,P,p,_),L.regX=P,L.regY=P):L.setBounds(P,P,p,_),T.push(L)})}),o?new e.Tile(T,r,i,0,0,!0).sca(t.scaleX,t.scaleY):T}},e.shuffle=function(t,r){if(qe("8"),!n(t)){Array.isArray(t)||(t=Object.values(arguments));var i=t.length,o,l;if(i==0)return t;if(r){for(var f=e.copy(t);e.arraysEqual(f,t);)e.shuffle(t);return t}else{for(;--i;)o=Math.floor(Math.random()*(i+1)),l=t[i],t[i]=t[o],t[o]=l;return t}}},e.pluck=function(t,r){if(qe("9.26"),n(t)||t.length==0)return null;Array.isArray(t)||(t=Object.values(arguments));var i=Math.floor(Math.random()*t.length),o=t[i];return r&&t.splice(i,1),o},e.rand=function(t,r,i,o){if(qe("9"),n(t)&&n(r))return Math.random();(n(t)||isNaN(t))&&(t=0),(n(r)||isNaN(r))&&(r=0),(t%1!=0||r%1!=0)&&(i=!1),n(i)&&(i=!0),o&&Math.random()>.5&&(t*=-1,r*=-1),i&&(t>r?t++:r>t&&r++);var l;return t==0&&r==0?0:(r==0?l=Math.random()*t:l=Math.min(t,r)+Math.random()*(Math.max(t,r)-Math.min(t,r)),i?Math.floor(l):l)},e.seedRandom=function(t){return qe("9.01"),function(r,i,o,l,f,d,p,_,P){function T(X){var Z,V=X.length,O=this,ne=0,N=O.i=O.j=0,q=O.S=[];for(V||(X=[V++]);l>ne;)q[ne]=ne++;for(ne=0;l>ne;ne++)q[ne]=q[N=C&N+X[ne%V]+(Z=q[ne])],q[N]=Z;(O.g=function(U){for(var z,ie=0,ae=O.i,he=O.j,$=O.S;U--;)z=$[ae=C&ae+1],ie=ie*l+$[C&($[ae]=$[he=C&he+z])+($[he]=z)];return O.i=ae,O.j=he,ie})(l)}function R(X,Z){var V,O=[],ne=typeof X;if(Z&&ne=="object")for(V in X)try{O.push(R(X[V],Z-1))}catch(N){+function(){}()}return O.length?O:ne=="string"?X:X+"\0"}function b(X,Z){for(var V,O=X+"",ne=0;ne<O.length;)Z[C&ne]=C&(V^=19*Z[C&ne])+O.charCodeAt(ne++);return S(Z)}function L(X){try{return k?S(k.randomBytes(l)):(r.crypto.getRandomValues(X=new Uint8Array(l)),S(X))}catch(Z){return[+new Date,r,(X=r.navigator)&&X.plugins,r.screen,S(i)]}}function S(X){return String.fromCharCode.apply(0,X)}var k,m=o.pow(l,f),A=o.pow(2,d),D=2*A,C=l-1,E=o["seed"+P]=function(X,Z,V){var O=[];Z=Z==1?{entropy:!0}:Z||{};var ne=b(R(Z.entropy?[X,S(i)]:X==null?L():X,3),O),N=new T(O);return b(S(N.S),i),(Z.pass||V||function(q,U,z){return z?(o[P]=q,U):q})(function(){for(var q=N.g(f),U=m,z=0;A>q;)q=(q+z)*l,U*=l,z=N.g(1);for(;q>=D;)q/=2,U/=2,z>>>=1;return(q+z)/U},ne,"global"in Z?Z.global:this==o)};if(b(o[P](),i),p&&p.exports){p.exports=E;try{k=Ei("crypto")}catch(X){}}else _&&_.amd&&_(function(){return E})}(this,[],Math,256,6,52,typeof module=="object"&&module,typeof define=="function"&&define,"random"),e.randomO||(e.randomO=Math.random),n(t)?Math.random=e.randomO:Math.seedrandom(t),t},e.odds=function(t){return qe("9.1"),(n(t)||isNaN(t))&&(t=50),Math.random()<=t/100},e.rarity=function(t,r,i,o){if(qe("9.2"),n(t)||t.constructor!={}.constructor)return[];n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!1);var l=[];return e.loop(t,function(f,d){var p=e.colors.indexOf(f);p!=-1&&(f=e.colorsHex[p]);var _;Array.isArray(d)?(+f==+f?f=new Number(f):f=new String(f),f._payload=d[1],f.dynamicPayload=o,Object.defineProperty(f,"payload",{get:function(){return!this.dynamicPayload&&this._lastPayload!=null?this._lastPayload:(this._lastPayload=e.Pick.choose(this._payload),this._lastPayload)},set:function(P){this._lastPayload=null,this._payload=P}}),_=d[0],e.loop(_,function(){l.push(f)})):(_=d,e.loop(_,function(){+f==+f&&(f=+f),l.push(f)}))}),r&&e.shuffle(l),l},e.repeats=function(t,r){if(qe("9.25"),n(t)||!Array.isArray(t))return 0;var i={},o=0,l=0;return e.loop(t,function(f){i[f]!=null?(i[f]++,l++):i[f]=0,i[f]>o&&(o=i[f])}),r?l:o},e.series=function(){qe("13.61");var t,r;if(arguments[0]==null)return null;if(arguments.length==0)return function(){};arguments.length==1&&Array.isArray(arguments[0])?t=arguments[0]:arguments.length==1&&arguments[0].constructor=={}.constructor?(r=arguments[0],n(r.min)&&(r.min=0),n(r.max)&&(r.max=1),n(r.step)&&(r.step=1),t=[],e.loop(Math.floor(Math.abs(r.max-r.min)+r.step),function(m){t.push(m+r.min)},null,null,r.step),r=null):t=Array.prototype.slice.call(arguments);var i=0,o=1,l=1,f=0,d=0,p=!1,_=!1,P=!1,T=!1,R=!1,b,L,S=function(m,A){if(f&&d%f!=0)return d++,L;d++;var D=t.length,C;if((T||R)&&i%D==0&&e.shuffle(t),C=t[(D*10+i)%D],i==0&&(b=C),R&&i%D==0&&D>1)for(;C==L;)e.shuffle(t),C=t[(D*10+i)%D];return p?o>0&&i+o*l>=D?(o=-1,i=D-1-(i+l-(D-1))):o<0&&i+o*l<0?(o=1,i=l-i):i+=o*l:_?o>0&&i+o*l>=D?(o=-1,i=D-1-(i+l-(D-1))+l):o<0&&i+o*l<0?(o=1,i=l-i-l):i+=o*l:P?o>0&&i+o*l>=D?i=D-1:o<0&&i+o*l<0?i=0:i+=o*l:i+=o*l,L=C,e.isPick(C)?C.noPick&&A?C:e.Pick.choose(C):C},k=S.original=e.copy(t);return S.array=t,S.type="series",Object.defineProperty(S,"index",{get:function(){var m=t.length;return(m*10+i)%m},set:function(m){i=m,d=0}}),Object.defineProperty(S,"length",{get:function(){return t.length},set:function(){}}),S.jump=function(m){return i=m,S},S.reverse=function(m){return n(m)&&(m=!0),m?o=-1:o=1,i=t.length-1,S},S.bounce=function(m){n(m)&&(m=!0);var A=t.length;return i=(A*10+i)%A,p=m,S},S.flip=function(m){n(m)&&(m=!0);var A=t.length;return i=(A*10+i)%A,_=m,S},S.step=function(m){return n(m)&&(m=1),l=Math.floor(m),S},S.every=function(m){return n(m)&&(m=1),f=Math.abs(m),d=0,S},S.constrain=function(m){return n(m)&&(m=!0),P=m,S},S.random=function(m){return n(m)&&(m=!0),m||(t=k),T=m==!0,S},S.mix=function(m){return n(m)&&(m=!0),m||(t=k),R=m==!0,S},S.shuffle=function(m){return n(m)&&(m=!0),m?e.shuffle(t):t=k,S},S},e.makeSeries=function(t){if(qe("13.6"),n(t))return function(){};var r=0,i=function(){return t[r++%t.length]};return i.array=t,i},e.loop=function(t,r,i,o,l,f,d,p,_,P){var T="obj, call, reverse, interval, step, start, end, immediate, complete, completeParams",R;if(R=mt(e.loop,arguments,T))return R;if(qe("9.5"),n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(p)&&(p=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var b=o==0&&_&&typeof _=="function",L=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":typeof t=="string"?"string":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(L=="invalid")return;var S,k,m,A;if(L=="number"||L=="string"||L=="array"||L=="nodelist"||L=="htmlcollection"||L=="Dictionary"){if(L=="Dictionary"){var D=e.copy(t.values);t=e.copy(t.objects)}if(S=L=="number"?t:t.length,k=E(S-1),k==0)return;if(i)if(o===0){for(m=f;m>=d;m-=l)if(L=="number"?A=r(m,k,f,d,t):L=="array"||L=="string"?A=r(t[m],m,k,f,d,t):L=="Dictionary"?A=r(t[m],D[m],m,k,f,d,t):A=r(t.item(m),m,k,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(m=X.count,p||m--,l&&(m*=l),m=f-m,L=="number"?A=r(m,k,f,d,t):L=="array"||L=="string"?A=r(t[m],m,k,f,d,t):L=="Dictionary"?A=r(t[m],D[m],m,k,f,d,t):A=r(t.item(m),m,k,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},k,p,null,null,_,P);else if(o===0){for(m=f;m<=d;m+=l)if(L=="number"?A=r(m,k,f,d,t):L=="array"||L=="string"?A=r(t[m],m,k,f,d,t):L=="Dictionary"?A=r(t[m],D[m],m,k,f,d,t):A=r(t.item(m),m,k,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(m=X.count,p||m--,l&&(m*=l),L=="number"?A=r(m,k,f,d,t,X):L=="array"||L=="string"?A=r(t[m],m,k,f,d,t,X):L=="Dictionary"?A=r(t[m],D[m],m,k,f,d,t):A=r(t.item(m),m,k,f,d,t,X),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},k,p,null,null,_,P);return b&&_(P),!0}else if(L=="object"){S=0;var C=[];for(m in t)S++,C.push(m);if(k=E(S-1),k==0)return;if(i)if(o===0){for(m=f;m>=d;m-=l)if(A=r(C[m],t[C[m]],m,k,f,d,t),typeof A<"u")return A}else e.interval(o,function(X){if(m=X.count,p||m--,l&&(m*=l),m=f-m,A=r(C[m],t[C[m]],m,k,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},k,p,null,null,_,P);else if(o===0){for(m=f;m<=d;m+=l)if(A=r(C[m],t[C[m]],m,k,f,d,t),typeof A<"u")return A}else e.interval(o,function(X){if(m=X.count,p||m--,l&&(m*=l),A=r(C[m],t[C[m]],m,k,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},k,p,null,null,_,P);return b&&_(P),!0}function E(X){return n(f)&&(f=i?X:0),n(d)&&(d=i?0:X),i&&d>f||!i&&f>d||(f<0&&d)<0||f>X&&d>X?0:(f=Math.max(0,Math.min(f,X)),d=Math.max(0,Math.min(d,X)),Math.floor((i?f-d:d-f)/l)+1)}};function g(t,r,i,o,l){e.timeCheck||(qe("9.99"),e.timeCheck=!0);var f=n(fe.TIME)?n(e.TIME)?"seconds":e.TIME:fe.TIME;return f&&f.toLowerCase&&(f=f.toLowerCase()),f!="milliseconds"&&f!="ms"&&(f="seconds"),r&&r.toLowerCase&&(r=r.toLowerCase()),(r=="ms"||r=="milliseconds"||r=="seconds"||r=="s")&&(f=r),n(t)?f.charAt(0):(f=="ms"&&(f="milliseconds"),f=="s"&&(f="seconds"),f=f.charAt(0),l||a(t,f,i,o),f)}function a(t,r,i,o){n(i)&&(i=10),n(o)&&(o=9),!(!e.TIMECHECK&&!fe.TIMECHECK)&&(r!="m"&&t>i||r=="m"&&t<o)&&kt&&ht("TIME - warning: time is in "+(r=="m"?"milliseconds":"seconds")+" ("+t+")")}if(e.timeout=function(t,r,i,o){var l="time, call, pauseOnBlur, timeUnit",f;if(f=mt(e.timeout,arguments,l,this))return f;if(qe("9.7"),!n(r)&&typeof r=="function"){var d=e.interval(t,r,1,!1,i,o);return d.type="timeoutObj",d}},e.interval=function(t,r,i,o,l,f,d,p){var _="time, call, total, immediate, pauseOnBlur, timeUnit, complete, completeParams",P;if(P=mt(e.interval,arguments,_,this))return P;if(qe("9.8"),n(r)||typeof r!="function")return;var T=g(t,f);if(n(t)&&(t=T=="s"?1:1e3),n(o)&&(o=!1),!n(i)&&(isNaN(i)||i<=0))return;n(i)&&(i=-1);var R={count:0,total:i,paused:!1,time:t,active:!0,timeUnit:f};l&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(R));function b(){R.startTime=Date.now(),R.interval=e.Pick.choose(R.time),R.id=setTimeout(function(){R.paused||R.active&&(R.count++,r(R),b(),L())},R.interval*(T=="s"?1e3:1))}o&&setTimeout(function(){r(R),L()},10);function L(){i!=-1&&R.count>=(o?R.total-1:R.total)&&(d&&typeof d=="function"&&d(p),R.clear())}var S;return R.type="intervalOjbect",R.pause=function(k,m,A){n(k)&&(k=!0),k?(clearTimeout(S),clearTimeout(R.id),cancelAnimationFrame(R.rid),R.pauseTimeLeft=R.interval-(Date.now()-R.startTime)/(T=="s"?1e3:1)):(R.paused||R.pause(!0),S=setTimeout(function(){R.count++,r(R),b(),L()},m?0:(A?R.interval:R.pauseTimeLeft)*(T=="s"?1e3:1)),R.pauseTimeLeft=null),R.paused=k},R.next=function(){R.count++,r(R),L()},R.clear=function(){R.active=!1,clearTimeout(S),cancelAnimationFrame(R.rid),clearTimeout(R.id);var k=R.count;for(var m in R)delete R[m];R.active=!1,R.count=k,R.pause=function(){},R.clear=function(){}},b(),R},e.async=function(t,r,i,o,l){if(qe("29"),!n(t)){var f=document.createElement("script"),d=g(o);n(o)&&(o=d=="s"?2:2e3);var p;r?(i?p=i:p=r.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],e.asyncList||(e.asyncList={}),e.asyncList[p]||(e.asyncList[p]=[]),e.asyncList[p].push(r),e.async[p]=function(){var _=f,P=!1,T=setTimeout(function(){P=l,typeof r=="function"&&r("asyncError",l?"cancelled":"timeout")},o*(d=="s"?1e3:1));return function(R){clearTimeout(T),e.asyncList[p]&&(r=e.asyncList[p].shift()),typeof r=="function"&&!P&&r(R),_&&_.parentNode.removeChild(_),_=null}}()):(e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=f),t.match(/\?/)||(t+="?"),f.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(f)}},e.couple=function(t){if(qe("29.2"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=r[o];for(var f in l)i[o+"_"+f]=l[f]}return JSON.stringify(i)},e.decouple=function(t){if(qe("29.3"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=o.split("_",2);if(l.length!=2)return t;i[l[0]]||(i[l[0]]={}),i[l[0]][l[1]]=r[o]}return JSON.stringify(i)},e.convertColor=function(t,r,i){if(e.convertColorCheck||(qe("27.5"),e.convertColorCheck=!0),n(r)&&(r="hex"),n(t)||!t.toLowerCase)return;t=dt(t),t=t.toLowerCase(),r=r.toLowerCase();var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if(r=="zim"){var f=e.colorsHex.indexOf(t);return f<0?t:e.colors[e.colorsHex.indexOf(t)]}r=="hsv"&&r=="hsl";var d,p;if(d=t.match(/rgba\((.*)\)/)){p=d[1].split(",");var _=p.pop();if(n(i)&&(i=_),r=="array")return p.push(_),p;if(t="rgb("+p.join(",")+")",r=="rgb")return t;if(r=="hsl")return R(p[0],p[1],p[2])}function P(D){var C=Number(D).toString(16);return C.length<2&&(C="0"+C),C}function T(D,C,E,X,Z){return(Z-X)*(D-C)/(E-C)+X}function R(D,C,E){D/=255,C/=255,E/=255;let X=Math.max(D,C,E),Z=X-Math.min(D,C,E),V=Z?X===D?(C-E)/Z:X===C?2+(E-D)/Z:4+(D-C)/Z:0;return[60*V<0?60*V+360:60*V,100*(Z?X<=.5?Z/(2*X-Z):Z/(2-(2*X-Z)):0),100*(2*X-Z)/2]}function b(D){var C=D.split(","),E=P(C[0]),X=P(C[1]),Z=P(C[2]),V=n(V)?"":P(Math.round(Number(C[3])*255));return[E,X,Z,V]}n(i)&&(i=1);var L,S,k;if(d=t.match(/rgb\((.*)\)/))return r=="rgba"?"rgba("+d[1]+","+i+")":r=="hex"?(L=i!=1?","+i:"",S=b(d[1]+L),"#"+S[0]+S[1]+S[2]+S[3]):r=="hexnumber"?(L=i!=1?","+i:0,S=b(d[1]+L),parseInt(S[0]+""+S[1]+S[2],16)):r=="string"?(t=b(d[1]).join("").toLowerCase(),k=l.indexOf(t),k==-1?"#"+t:o[k]):r=="array"?(L=i!=1?","+i:0,b(d[1]+L)):r=="hsl"?(p=d[1].split(","),R(p[0],p[1],p[2])):t;function m(D){var C;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(D)?(C=D.substring(1).split(""),C.length==3&&(C=[C[0],C[0],C[1],C[1],C[2],C[2]]),C="0x"+C.join(""),r=="rgb"?"rgb("+[C>>16&255,C>>8&255,C&255]+")":r=="array"?[C>>16&255,C>>8&255,C&255,i]:"rgba("+[C>>16&255,C>>8&255,C&255].join(",")+","+i+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(D)?(C=D.substring(1).split(""),C.length==8&&(i=C.slice(-2).join(""),C=C.slice(0,6)),C.length==4&&(i=C[3]+""+C[3],C=[C[0],C[0],C[1],C[1],C[2],C[2]]),i=parseInt(i,16)/255,C="0x"+C.join(""),r=="rgb"?"rgb("+[C>>16&255,C>>8&255,C&255]+")":"rgba("+[C>>16&255,C>>8&255,C&255].join(",")+","+i+")"):r=="rgb"?"rgb(0,0,0)":"rgba(0,0,0,1)"}if(r=="hsl")return e.convertColor(e.convertColor(t,"rgb"),"hsl");if(r=="array"||r=="rgb"||r=="rgba")return t.charAt(0)=="#"?m(t):m(e.convertColor(t));if(r=="hex"){if(t.charAt(0)=="#")if(i!=1)if(L=P(Math.round(i*255)),t.length==4||t.length==5){var A=t.split("");return A[1]=A[1]+""+A[1],A[2]=A[2]+""+A[2],A[3]=A[3]+""+A[3],A[4]=L,A.join("")}else return t.length==9?t.substring(0,o.length-2)+L:t+L;else return t}else if(r=="hexnumber"){if(t.charAt(0)=="#")return parseInt(t.replace(/^#/,""),16)}else t.charAt(0)=="#"&&(t=t.replace("#",""),t.length==3&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)));return r=="string"?(k=l.indexOf(t),k==-1?"#"+t:o[k]):r=="hexnumber"?parseInt(l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0],16):(L=i!=1?P(Math.round(i*255)):"","#"+l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0]+L)},e.colorRange=function(t,r,i){e.colorRangeCheck||(qe("27.6"),e.colorRangeCheck=!0),n(i)&&(i=.5),i=Math.max(0,Math.min(1,i)),n(t)&&(t="white"),n(r)&&(r="black");var o=t,l=r,f=e.convertColor(t,"rgb"),d=e.convertColor(r,"rgb");t=f.substring(4,f.length-1).split(","),r=d.substring(4,d.length-1).split(",");var p,_="#",P;if(i==0)_=o;else if(i==1)_=l;else for(var T=0;T<t.length;T++)p=r[T]-t[T],P=Math.floor(parseInt(t[T],10)+p*i).toString(16),P.length<2&&(P="0"+P),_+=P;return _},e.lighten=function(t,r){return e.lightenCheck||(qe("27.65"),e.lightenCheck=!0),n(r)&&(r=.5),r>=0?e.colorRange(String(t),"#FFFFFF",r):e.colorRange(String(t),"#000000",-r)},e.darken=function(t,r){return n(r)&&(r=.5),e.darkenCheck||(qe("27.66"),e.darkenCheck=!0),r>=0?e.colorRange(String(t),"#000000",r):e.colorRange(String(t),"#ffffff",-r)},e.toColor=function(t,r,i){return e.toColorCheck||(qe("27.67"),e.toColorCheck=!0),n(i)&&(i=.5),e.colorRange(String(t),r,i)},e.toAlpha=function(t,r){return e.toAlphaCheck||(qe("27.68"),e.toAlphaCheck=!0),n(r)&&(r=.5),e.convertColor(String(t),"rgba",r)},e.toBW=function(t){if(t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return ht("ZIM toBW() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);return r*.299+i*.587+o*.114>186?"#000000":"#FFFFFF"},e.invertColor=function(t){if(e.invertColorCheck||(qe("27.86"),e.invertColorCheck=!0),t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return ht("ZIM invertColor() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);r=(255-r).toString(16),i=(255-i).toString(16),o=(255-o).toString(16);function l(f,d){d=d||2;var p=new Array(d).join("0");return(p+f).slice(-d)}return"#"+l(r)+l(i)+l(o)},e.zimEase=function(t,r,i,o,l){qe("27.69");var f=!1;n(l)&&(l=!0);var d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V;if(t){if(Array.isArray(t[1])){f=!0,V=t[1],t=t[0];var O=0,ne=V[0],N=V[1],q=V[2],U=V[3],z=1,ie=5*(ne-O),ae=10*(N-O)-4*ie,he=10*(q-O)+30*(ne-N),$=5*(U+O)-20*(q+ne)+30*N,G=z-O-$-he-ae-ie}d=0,p=t[0],_=t[1],P=t[2],T=t[3],R=1,b=5*(p-d),L=10*(_-d)-4*b,S=10*(P-d)+30*(p-_),k=5*(T+d)-20*(P+p)+30*_,m=R-d-k-S-L-b}else r?(m=r[0],k=r[1],S=r[2],L=r[3],b=r[4],p=b/5,_=(L+4*b)/10,P=(S+6*b+3*L)/10,T=(k+4*b+3*L+2*S)/5):(m=0,k=0,S=0,L=0,b=1);return i?(X=function(){return e.zimEase(null,[m,k,S,L,b],!0)},Z={reverse:X,points:[p,_,P,T],polynomials:[m,k,S,L,b]},Z.noPick=function(v){if(l){if(v<.025)return 0;if(v>.975)return 1}return v<.5?(v*=2,A=v*100,D=100,C=(A/=D)*A,E=C*A,(m*E*C+k*C*C+S*E+L*C+b*A)/2):(v=1-(v-.5)*2,A=v*100,D=100,C=(A/=D)*A,E=C*A,1-(m*E*C+k*C*C+S*E+L*C+b*A)/2)}):f?(X=function(){return kt&&ht("zimEase - multi array points cannot be reversed"),e.zimEase(null,[m,k,S,L,b])},Z={reverse:X,points:[[p,_,P,T],[ne,N,q,U]],polynomials:[[m,k,S,L,b],[G,$,he,ae,ie]]},Z.noPick=function(v){if(l){if(v<.025)return 0;if(v>.975)return 1}return v<.5?(v*=2,A=v*100,D=100,C=(A/=D)*A,E=C*A,(m*E*C+k*C*C+S*E+L*C+b*A)/2):(v=(v-.5)*2,A=v*100,D=100,C=(A/=D)*A,E=C*A,.5+(G*E*C+$*C*C+he*E+ae*C+ie*A)/2)}):(X=function(){return e.zimEase(null,[m,k,S,L,b],null,!0)},Z={reverse:X,points:[p,_,P,T],polynomials:[m,k,S,L,b]},o?Z.noPick=function(v){if(l){if(v<.025)return 0;if(v>.975)return 1}return A=100-v*100,D=100,C=(A/=D)*A,E=C*A,1-(m*E*C+k*C*C+S*E+L*C+b*A)}:Z.noPick=function(v){if(l){if(v<.025)return 0;if(v>.975)return 1}return A=v*100,D=100,C=(A/=D)*A,E=C*A,m*E*C+k*C*C+S*E+L*C+b*A}),Z.noPick.reverse=X,Z},e.spline=function(t,r,i,o,l){qe("27.695"),n(t)&&(t=[]),n(r)&&(r=1),n(i)&&(i=!1),n(l)&&(l=i);var f;function d(U,z){if(!Array.isArray(U[0]))for(f=0;f<U.length;f++)U[f]=[U[f].x,U[f].y];if(z){var ie=U[U.length-1],ae=U[U.length-2],he=U[0],$=U[1];U.unshift(ie),U.unshift(ae),U.push(he),U.push($)}var G=[];for(f=0;f<U.length;f++)G.push(U[f][0],U[f][1]);return G}t=d(t,i);var p=t.length,_=p-4,P=i?t[2]:t[0],T=i?t[3]:t[1],R="M"+[P,T];o&&o.mt(P,T);var b=i?2:0,L=i?p-4:p-2,S=2;for(f=b;f<L;f+=S){var k=f?t[f-2]:t[0],m=f?t[f-1]:t[1],A=t[f+0],D=t[f+1],C=t[f+2],E=t[f+3],X=f!==_?t[f+4]:C,Z=f!==_?t[f+5]:E,V=A+(C-k)/6*r,O=D+(E-m)/6*r,ne=C-(X-A)/6*r,N=E-(Z-D)/6*r;R+="C"+[V,O,ne,N,C,E],o&&o.bt(V,O,ne,N,C,E)}if(l){var q=R.split("C");q.pop(),R=q.join("C")}return R},e.pointAlongCurve=function(t,r,i,o){if(qe("27.7"),!(!t||!t[0]||!t[1]||!t[2]||!t[3])){n(o)&&(o=!1);var l=new e.Bezier(t[0],t[1],t[2],t[3]),f,d,p,_,P,T;if(o?(f=l.mx(r),d=l.my(r)):(f=l.x(r),d=l.y(r)),i){var R=r-.05,b=r+.05;R<0&&(R=0),b>1&&(b=1),o?(p=l.mx(R),_=l.my(R),P=l.mx(b),T=l.my(b)):(p=l.x(R),_=l.y(R),P=l.x(b),T=l.y(b));var L=e.angle(p,_,P,T);return{x:f,y:d,angle:L}}return{x:f,y:d}}},e.distanceAlongCurve=function(t){qe("27.8");var r=e.dist(t[0],t[3]),i=e.dist(t[0],t[1])+e.dist(t[1],t[2])+e.dist(t[2],t[3]);return(r+i)/2},e.closestPointAlongCurve=function(t,r,i,o,l){qe("27.9");var f=1e7,d,p=0,_=0;return n(i)&&(i=10),e.loop(r,function(P,T){var R=new e.Bezier(P[0],P[1],P[2],P[3]);e.loop(i,function(b,L){var S={x:R.x(b/L),y:R.y(b/L)},k=e.dist(t,S);k<f&&(f=k,d=S,p=T,_=b)})}),l?(p*i+_)/(r.length*i)*100:o?d:p},e.transformPoints=function(t,r,i,o,l){if(qe("27.95"),!(n(t)||!Array.isArray(t))){n(o)&&(o=0),n(l)&&(l=0),t=e.copy(t);var f=o,d=l;r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",-f)),l!=0&&(t=e.transformPoints(t,"y",-d)));for(var p,_=0;_<t.length;_++)if(p=t[_],!!Array.isArray(p)){if(r=="x")p[0]+=i;else if(r=="y")p[1]+=i;else if(r=="scaleX")p[0]=(p[0]-o)*i+o,p[4]=p[4]*i,p[6]=p[6]*i;else if(r=="scaleY")p[1]=(p[1]-l)*i+l,p[5]=p[5]*i,p[7]=p[7]*i;else if(r=="scale")p[0]=(p[0]-o)*i+o,p[4]=p[4]*i,p[6]=p[6]*i,p[1]=(p[1]-l)*i+l,p[5]=p[5]*i,p[7]=p[7]*i;else if(r=="rotation"){var P=i*Math.PI/180,T=p[0],R=p[1];p[0]=T*Math.cos(P)-R*Math.sin(P),p[1]=R*Math.cos(P)+T*Math.sin(P),T=p[4],R=p[5],p[4]=T*Math.cos(P)-R*Math.sin(P),p[5]=R*Math.cos(P)+T*Math.sin(P),T=p[6],R=p[7],p[6]=T*Math.cos(P)-R*Math.sin(P),p[7]=R*Math.cos(P)+T*Math.sin(P)}}return r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",f)),l!=0&&(t=e.transformPoints(t,"y",d))),t}},e.trimPointEnds=function(t){qe("27.97"),t[0][4]=0,t[0][5]=0,t[0][8]="free",t[t.length-1][6]=0,t[t.length-1][7]=0,t[t.length-1][8]="free"},e.reversePoints=function(t){return qe("27.975"),t.reverse(),e.loop(t,function(r){var i=r[6];r[6]=r[4],r[4]=i;var o=r[7];r[7]=r[5],r[5]=o}),t},e.appendPoints=function(t,r,i){return qe("27.98"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(t[t.length-1][6]=r[0][6],t[t.length-1][7]=r[0][7],i&&(t[t.length-1][8]=i),r.shift(),t=t.concat(r)),t)},e.prependPoints=function(t,r,i){return qe("27.985"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(r[r.length-1][6]=t[0][6],r[r.length-1][7]=t[0][7],i&&(t[t.length-1][8]=i),t.shift(),t=r.concat(t)),t)},e.splitPoints=function(t,r,i){if(qe("27.99"),!n(t)&&(n(r)&&(r=Math.floor(t.length/2)),!(r<0||r>t.length-1))){n(i)&&(i=!0);var o=e.copy(t.slice(0,r+1)),l=e.copy(t.slice(r));return i&&(e.trimPointEnds(o),e.trimPointEnds(l)),[o,l]}},e.makeID=function(t,r,i){qe("13.5"),n(t)&&(t="mixed"),n(r)&&(r=5),n(i)&&(i="uppercase");var o,l=[2,3,4,5,6,7,8,9],f="abcdefghjkmnpqrstuvwxyz".split("");t.constructor===Array?o=t:t=="numbers"?o=l:t=="letters"?o=f:o=l.concat(f);for(var d="",p,_,P=0;P<r;P++)p=o[Math.floor(Math.random()*o.length)],_=Math.random(),i=="uppercase"||i=="mixed"&&_>.5?p.toUpperCase&&(p=p.toUpperCase()):p.toLowerCase&&(p=p.toLowerCase()),d+=String(p);return d},e.makeSyllable=function(t,r){qe("13.55");var i="bcdfghjklmnprstvwxz",o="aeiouaeiouaeiouy";n(t)&&(t=3),n(r)&&(r=e.rand()<.3);function l(p){var _=e.rand(p.length-1),P=p.substring(_,_+1);return P}var f="",d=r?o:i;return e.loop(t,function(){f+=l(d),d=d==o?i:o}),f},e.makePrimitive=function(t){qe("13.56");function r(i){return Array.isArray(i)?(e.loop(i,function(o){o=r(o)}),i):i.constructor==={}.constructor?(e.loop(i,function(o,l){i[o]=r(l)}),i):i instanceof String?String(i):i instanceof Number?Number(i):i instanceof Boolean?!!i:i}return r(t)},e.makeMath=function(){qe("13.565");for(var t=Object.getOwnPropertyNames(Math),r=0;r<t.length;r++)fe[t[r]]=Math[t[r]]},e.swapProperties=function(t,r,i){if(qe("17.1"),n(r)||n(i)||n(r[t])||n(i[t]))return!1;var o=i[t];return i[t]=r[t],r[t]=o,!0},e.mobile=function(t){return qe("28"),!n(fe.MOBILE)&&fe.MOBILE!="default"?fe.MOBILE:!n(e.MOBILE)&&e.MOBILE!="default"?e.MOBILE:(n(t)&&(t=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":t&&fe.orientation!==void 0?/safari/i.test(navigator.userAgent)?"ios":!0:!1)},e.vee=function(t){return qe("28.5"),!n(t)&&(t.type=="Pick"||Array.isArray(t)||t.constructor=={}.constructor&&(!n(t.max)||!n(t.noPick))||typeof t=="function")},e.extend=function(t,r,i,o,l){var f="subclass, superclass, override, prefix, prototype",d;if(d=mt(e.extend,arguments,f))return d;if(n(t)||n(r)){kt&&t!=e.StageGL&&ht("zim.extend() - please supply a class and its superclass");return}n(o)&&(o="super"),n(i)&&(i=[]),Array.isArray(i)||(i=[i]),n(l)&&(l=!0);var p={};for(var _ in t.prototype)Object.defineProperty(p,_,Object.getOwnPropertyDescriptor(t.prototype,_));function P(){this.constructor=t}P.prototype=r.prototype,t.prototype=new P;for(_ in p)Object.defineProperty(t.prototype,_,Object.getOwnPropertyDescriptor(p,_));var T=t.prototype,R=Object.getPrototypeOf&&Object.getPrototypeOf(T)||T.__proto__;if(R){T[(o+="_")+"constructor"]=R.constructor;for(var b,L=0;L<i.length;L++)b=i[L],typeof R[b]=="function"&&(T[o+b]=R[b]);if(l)for(b in R)Object.prototype.hasOwnProperty.call(T,b)&&typeof R[b]=="function"&&(T[o+b]=R[b])}return t},e.copy=function(t,r,i){if(e.copyCheck||(qe("10"),e.copyCheck=!0),n(r)&&(r=!1),n(i)&&(i=!0),t==null||!(t instanceof Array||t.constructor=={}.constructor))return r&&t!=null&&t.clone&&t.type&&(t.type!="Container"&&t.type!="Stage"&&t.type!="StageGL"||i)?t.clone():t;if(t instanceof Array){for(var o=[],l=0;l<t.length;l++)o[l]=e.copy(t[l],r,i);return o}if(t.constructor=={}.constructor){var f={};for(var d in t){var p=e.copy(t[d],r,i);Object.prototype.hasOwnProperty.call(t,d)&&(f[d]=p)}return f}},e.merge=function(){e.mergeCheck||(qe("12"),e.mergeCheck=!0);var t={},r,i;for(r=0;r<arguments.length;r++)for(i in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],i)&&(t[i]=arguments[r][i]);return t},e.sortObject=function(t,r,i){qe("12.1");var o=function(p){return p[r]},l=Object.entries(t).sort(function(p,_){return i?o(p[1])<o(_[1])?1:o(p[1])>o(_[1])?-1:0:o(p[1])>o(_[1])?1:o(p[1])<o(_[1])?-1:0}),f=new Map(l),d={};return f.forEach((p,_)=>{d[_]=p}),d},e.arraysEqual=function(t,r,i){if(qe("11"),n(t)||n(r)||(n(i)&&(i=!0),t.length!=r.length))return!1;for(var o=0;o<t.length;o++)if(t[o]instanceof Array&&r[o]instanceof Array){if(!e.arraysEqual(t[o],r[o],i))return!1}else{if(i&&t[o]!=r[o])return!1;if(!i)return e.arraysEqual(t.sort(),r.sort(),!0)}return!0},e.arrayMinMax=function(t){if(qe("11.2"),!Array.isArray(t))return{min:null,max:null};for(var r=t[0],i=t[0],o=t.length;o--;)r=t[o]<r?t[o]:r,i=t[o]>i?t[o]:i;return r=isNaN(r)?null:r,i=isNaN(i)?null:i,{min:r,max:i}},e.isEmpty=function(t){if(e.zimEmptyCheck||(qe("11.5"),e.zimEmptyCheck=!0),!n(t)){var r=0;for(var i in t){r++;break}return r==0}},e.isPick=function(t){if(e.zimPickCheck||(qe("11.7"),e.zimPickCheck=!0),!n(t))return Array.isArray(t)||t.constructor=={}.constructor&&(t.min!=null&&t.max!=null||t.noPick)||t.constructor===Function&&(t.array!=null||t()!=null)},e.isJSON=function(t){if(qe("11.6"),typeof t!="string")return!1;try{return JSON.parse(t),!0}catch(r){return!1}},e.parseJSON=function(t){qe("11.65");function r(o){o=o.trim();try{return new Function("return "+o)()}catch(l){return ht("JSON did not parse"),null}}var i;try{i=JSON.parse(t)}catch(o){i=r(t)}return i},e.zut=function(t){if(n(t)||typeof t=="object")return!0},e.decimals=function(t,r,i,o,l,f,d){if(e.zimDecimalCheck||(qe("13"),e.zimDecimalCheck=!0),n(t))return 0;n(r)&&(r=1),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=!0),n(f)&&(f=!1);var p=Math.round(t*Math.pow(10,r))/Math.pow(10,r);if(f){var _=p-Math.floor(p);p=e.decimals(Math.floor(p)+_*60/100,2)}var P=e.sign(p),T,R,b;if(i>0)for(T=String(p).indexOf("."),R=String(p).length,T<0&&(T=R++,p+="."),b=0;b<i-(R-T-1);b++)p+="0";if(o>1){P==-1&&(p=p.substr(1,p.length-1)),T=String(p).indexOf("."),R=String(p).length;var L=T<0?R:T;for(b=0;b<o-L;b++)p="0"+p;P==-1&&(p="-"+p)}return o==0&&(p=p.toString().replace(/^0\./,".")),i+o>0&&!l&&Number(p)==0&&(p=0),f&&(p=String(p).replace(".",":")),e.zut(d)?p:null},e.countDecimals=function(t){return e.zimCountDecimalsCheck||(qe("13.05"),e.zimCountDecimalsCheck=!0),t%1?t.toString().split(".")[1].length:0},e.sign=function(t){return e.zimSignCheck||(qe("13.1"),e.zimSignCheck=!0),t?t<0?-1:1:0},e.constrain=function(t,r,i,o){if(qe("13.2"),!n(t)){if(n(r)&&(r=0),n(i)&&(i=Number.MAX_VALUE),i<r){var l=r;i=r,r=l}return n(o)&&(o=!1),o&&t<0?Math.max(-i,Math.min(t,-r)):Math.max(r,Math.min(t,i))}},e.dist=function(t,r,i,o){if(e.zimDistCheck||(qe("13.3"),e.zimDistCheck=!0),!(n(t)||n(r)))return!n(t.x)&&!n(r.x)?(o=r.y,i=r.x,r=t.y,t=t.x):(n(i)&&(i=0),n(o)&&(o=0)),Math.sqrt(Math.pow(i-t,2)+Math.pow(o-r,2))},e.rectIntersect=function(t,r,i){return e.zimRectIntersectCheck||(qe("13.32"),e.zimRectIntersectCheck=!0),n(i)&&(i=0),!(t.x>=r.x+r.width+i||t.x+t.width+i<=r.x||t.y>=r.y+r.height+i||t.y+t.height+i<=r.y)},e.boundsAroundPoints=function(t){e.zimBoundsAroundPointsCheck||(qe("13.34"),e.zimBoundsAroundPointsCheck=!0);for(var r=1e4,i=1e4,o=-1e4,l=-1e4,f=0;f<t.length;f++){var d=t[f];d.x<r&&(r=d.x),d.x>o&&(o=d.x),d.y<i&&(i=d.y),d.y>l&&(l=d.y)}return{x:r,y:i,width:o-r,height:l-i}},e.angle=function(t,r,i,o){if(e.angleCheck||(qe("13.4"),e.angleCheck=!0),!(n(t)||n(r)))return n(i)&&(i=t,t=0),n(o)&&(o=r,r=0),(Math.atan2(o-r,i-t)*180/Math.PI+360)%360},e.TAU=Math.PI*2,e.DEG=180/Math.PI,e.RAD=Math.PI/180,e.PHI=Math.pow(5,.5)*.5+.5,e.smoothStep=function(t,r,i){qe("13.7");var o=e.constrain((t-r)/(i-r),0,1);return o*o*o*(o*(o*6-15)+10)},e.unicodeToUTF=function(t){if(qe("13.75"),!!t){t!=" "&&(t=t.replace(/^\s+/g,""));var r,i="",o="";return r=t.charCodeAt(0),i=r,o=t.charCodeAt(1),o>=56320&&o<=57343&&(r=(i-55296)*1024+(o-56320)+65536),i=i.toString(16),o=o.toString(16),r=r.toString(16),"\\u"+i+"\\u"+o}},e.capitalizeFirst=function(t){return qe("13.78"),t.charAt(0).toUpperCase()+t.slice(1)},e.Ajax=function(t,r,i,o){qe("13.8");var l=new XMLHttpRequest;this.master=t,this.couple=r,this.lock=i,this.unique=o;var f=this;this.get=function(d,p){var _=n(f.master)?"":"&master="+encodeURI(t),P=n(f.lock)?"":"&lock="+encodeURI(i),T=f.unique?"&unique=true":"";l.open("GET",d+_+P+T,!0),l.onload=function(){l.status==200?p(e.isJSON(l.responseText)?JSON.parse(l.responseText):l.responseText):p(null,"Error: "+l.status)},l.send()},this.post=function(d,p,_,P,T){var R="url, data, command, extra, callback",b;if(b=mt(f.post,arguments,R))return b;if(!n(d)){l.open("POST",d,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onload=function(){var D=l.responseText;e.isJSON(D)&&(f.couple&&(D=e.decouple(D)),D=JSON.parse(D)),T(D)},e.isJSON(p)||(p=JSON.stringify(p)),f.couple&&(p=e.couple(p));var L=n(f.master)?"":"&master="+encodeURIComponent(f.master),S=n(f.lock)?"":"&lock="+encodeURIComponent(f.lock),k=f.unique?"&unique=true":"",m=n(_)?"":"&command="+encodeURIComponent(_),A=n(P)?"":"&extra="+encodeURIComponent(P);l.send("data="+encodeURIComponent(p)+L+S+m+A+k)}},this.put=function(d,p,_){l.open("PUT",d,!0),l.setRequestHeader("Content-type","application/json"),l.onload=function(){_(e.isJSON(l.responseText)?JSON.parse(l.responseText):f.http.responseText)},l.send(JSON.stringify(p))}},e.Noise=function(t){"use strict";qe("13.9"),n(t)&&(t=Math.random()*1e6);var r=t;this.seed=t;var i=this,o={};o.NORM_2D=1/47,o.NORM_3D=1/103,o.NORM_4D=1/30,o.SQUISH_2D=(Math.sqrt(2+1)-1)/2,o.SQUISH_3D=(Math.sqrt(3+1)-1)/3,o.SQUISH_4D=(Math.sqrt(4+1)-1)/4,o.STRETCH_2D=(1/Math.sqrt(2+1)-1)/2,o.STRETCH_3D=(1/Math.sqrt(3+1)-1)/3,o.STRETCH_4D=(1/Math.sqrt(4+1)-1)/4,o.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],o.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],o.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],o.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],o.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],o.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],o.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],o.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],o.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],o.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],o.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],o.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];function l(D){var C=new Uint32Array(1);return C[0]=D[0]*1664525+1013904223,C}function f(D,C,E){this.dx=-C-D*o.SQUISH_2D,this.dy=-E-D*o.SQUISH_2D,this.xsb=C,this.ysb=E}function d(D,C,E,X){this.dx=-C-D*o.SQUISH_3D,this.dy=-E-D*o.SQUISH_3D,this.dz=-X-D*o.SQUISH_3D,this.xsb=C,this.ysb=E,this.zsb=X}function p(D,C,E,X,Z){this.dx=-C-D*o.SQUISH_4D,this.dy=-E-D*o.SQUISH_4D,this.dz=-X-D*o.SQUISH_4D,this.dw=-Z-D*o.SQUISH_4D,this.xsb=C,this.ysb=E,this.zsb=X,this.wsb=Z}var _=[],P,T,R,b,L,S;for(P=0;P<o.p2D.length;P+=4){for(b=o.base2D[o.p2D[P]],L=null,S=null,T=0;T<b.length;T+=3)S=new f(b[T],b[T+1],b[T+2]),L===null?_[P/4]=S:L.next=S,L=S;S.next=new f(o.p2D[P+1],o.p2D[P+2],o.p2D[P+3])}for(this.lookup2D=[],P=0;P<o.lookupPairs2D.length;P+=2)this.lookup2D[o.lookupPairs2D[P]]=_[o.lookupPairs2D[P+1]];var k=[];for(P=0;P<o.p3D.length;P+=9){for(b=o.base3D[o.p3D[P]],L=null,S=null,T=0;T<b.length;T+=4)S=new d(b[T],b[T+1],b[T+2],b[T+3]),L===null?k[P/9]=S:L.next=S,L=S;S.next=new d(o.p3D[P+1],o.p3D[P+2],o.p3D[P+3],o.p3D[P+4]),S.next.next=new d(o.p3D[P+5],o.p3D[P+6],o.p3D[P+7],o.p3D[P+8])}for(this.lookup3D=[],P=0;P<o.lookupPairs3D.length;P+=2)this.lookup3D[o.lookupPairs3D[P]]=k[o.lookupPairs3D[P+1]];var m=[];for(P=0;P<o.p4D.length;P+=16){for(b=o.base4D[o.p4D[P]],L=null,S=null,T=0;T<b.length;T+=5)S=new p(b[T],b[T+1],b[T+2],b[T+3],b[T+4]),L===null?m[P/16]=S:L.next=S,L=S;S.next=new p(o.p4D[P+1],o.p4D[P+2],o.p4D[P+3],o.p4D[P+4],o.p4D[P+5]),S.next.next=new p(o.p4D[P+6],o.p4D[P+7],o.p4D[P+8],o.p4D[P+9],o.p4D[P+10]),S.next.next.next=new p(o.p4D[P+11],o.p4D[P+12],o.p4D[P+13],o.p4D[P+14],o.p4D[P+15])}for(this.lookup4D=[],P=0;P<o.lookupPairs4D.length;P+=2)this.lookup4D[o.lookupPairs4D[P]]=m[o.lookupPairs4D[P+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var A=new Uint8Array(256);for(P=0;P<256;P++)A[P]=P;for(t=new Uint32Array(1),t[0]=r,t=l(l(l(t))),P=255;P>=0;P--)t=l(t),R=new Uint32Array(1),R[0]=(t[0]+31)%(P+1),R[0]<0&&(R[0]+=P+1),this.perm[P]=A[R[0]],this.perm2D[P]=this.perm[P]&14,this.perm3D[P]=this.perm[P]%24*3,this.perm4D[P]=this.perm[P]&252,A[R[0]]=A[P];this.simplex1D=function(D){return i.simplex2D(D,1)},this.simplex2D=function(D,C){var E=(D+C)*o.STRETCH_2D,X=[D+E,C+E],Z=X[0],V=X[1],O=[Math.floor(Z),Math.floor(V)],ne=O[0],N=O[1],q=(ne+N)*o.SQUISH_2D,U=[D-(ne+q),C-(N+q)],z=U[0],ie=U[1],ae=[Z-ne,V-N],he=ae[0],$=ae[1],G=he+$,v=new Uint32Array(4);v[0]=he-$+1,v[1]=G,v[2]=G+$,v[3]=G+he;for(var w=v[0]|v[1]<<1|v[2]<<2|v[3]<<4,h=i.lookup2D[w],I=0;typeof h<"u";){var Q=[z+h.dx,ie+h.dy],x=Q[0],F=Q[1],Ae=2-x*x-F*F;if(Ae>0){var Y=[ne+h.xsb,N+h.ysb],K=Y[0],ge=Y[1],ye=i.perm2D[i.perm[K&255]+ge&255],ee=o.gradients2D[ye]*x+o.gradients2D[ye+1]*F;Ae*=Ae,I+=Ae*Ae*ee}h=h.next}return I*o.NORM_2D},this.simplex3D=function(D,C,E){var X=(D+C+E)*o.STRETCH_3D,Z=[D+X,C+X,E+X],V=Z[0],O=Z[1],ne=Z[2],N=[Math.floor(V),Math.floor(O),Math.floor(ne)],q=N[0],U=N[1],z=N[2],ie=(q+U+z)*o.SQUISH_3D,ae=[D-(q+ie),C-(U+ie),E-(z+ie)],he=ae[0],$=ae[1],G=ae[2],v=[V-q,O-U,ne-z],w=v[0],h=v[1],I=v[2],Q=w+h+I,x=new Uint32Array(7);x[0]=h-I+1,x[1]=w-h+1,x[2]=w-I+1,x[3]=Q,x[4]=Q+I,x[5]=Q+h,x[6]=Q+w;for(var F=x[0]|x[1]<<1|x[2]<<2|x[3]<<3|x[4]<<5|x[5]<<7|x[6]<<9,Ae=i.lookup3D[F],Y=0;typeof Ae<"u";){var K=[he+Ae.dx,$+Ae.dy,G+Ae.dz],ge=K[0],ye=K[1],ee=K[2],ce=2-ge*ge-ye*ye-ee*ee;if(ce>0){var ve=[q+Ae.xsb,U+Ae.ysb,z+Ae.zsb],Re=ve[0],se=ve[1],Oe=ve[2],J=i.perm3D[i.perm[i.perm[Re&255]+se&255]+Oe&255],xe=o.gradients3D[J]*ge+o.gradients3D[J+1]*ye+o.gradients3D[J+2]*ee;ce*=ce,Y+=ce*ce*xe}Ae=Ae.next}return Y*o.NORM_3D},this.simplex4D=function(D,C,E,X){var Z=(D+C+E+X)*o.STRETCH_4D,V=[D+Z,C+Z,E+Z,X+Z],O=V[0],ne=V[1],N=V[2],q=V[3],U=[Math.floor(O),Math.floor(ne),Math.floor(N),Math.floor(q)],z=U[0],ie=U[1],ae=U[2],he=U[3],$=(z+ie+ae+he)*o.SQUISH_4D,G=D-(z+$),v=C-(ie+$),w=E-(ae+$),h=X-(he+$),I=[O-z,ne-ie,N-ae,q-he],Q=I[0],x=I[1],F=I[2],Ae=I[3],Y=Q+x+F+Ae,K=new Uint32Array(11);K[0]=F-Ae+1,K[1]=x-F+1,K[2]=x-Ae+1,K[3]=Q-x+1,K[4]=Q-F+1,K[5]=Q-Ae+1,K[6]=Y<<6,K[7]=Y+Ae,K[8]=Y+F,K[9]=Y+x,K[10]=Y+Q;for(var ge=K[0]|K[1]<<1|K[2]<<2|K[3]<<3|K[4]<<4|K[5]<<5|K[6]<<6|K[7]<<8|K[8]<<11|K[9]<<14|K[10]<<17,ye=i.lookup4D[ge],ee=0;typeof ye<"u";){var ce=[G+ye.dx,v+ye.dy,w+ye.dz,h+ye.dw],ve=ce[0],Re=ce[1],se=ce[2],Oe=ce[3],J=2-ve*ve-Re*Re-se*se-Oe*Oe;if(J>0){var xe=[z+ye.xsb,ie+ye.ysb,ae+ye.zsb,he+ye.wsb],te=xe[0],we=xe[1],ke=xe[2],pe=xe[3],Me=i.perm4D[i.perm[i.perm[i.perm[te&255]+we&255]+ke&255]+pe&255],Ue=o.gradients4D[Me]*ve+o.gradients4D[Me+1]*Re+o.gradients4D[Me+2]*se+o.gradients4D[Me+3]*Oe;J*=J,ee+=J*J*Ue}ye=ye.next}return ee*o.NORM_4D}},typeof je<"u"&&(e.Point=function(t,r,i,o,l,f,d,p,_,P){qe("13.45"),n(t)&&(t=0),n(r)&&(r=0),n(i)&&(i=0),n(o)&&(o=0),n(l)&&(l=0),n(f)&&(f=0),n(d)&&(d=0),n(p)&&(p=0),n(_)&&(_=0),n(P)&&(P=0),this.createjsPoint_constructor(t,r),this.type="Point",this.x=t,this.y=r,this.z=i,this.q=o,this.r=l,this.s=f,this.t=d,this.u=p,this.v=_,this.w=P,this.angle=function(T){return this.createjsPoint_angle(T)*180/Math.PI},this.project=function(T,R){return this.createjsPoint_project(T*Math.PI/180,R)}},e.extend(e.Point,je.Point,["angle","project"],"createjsPoint")),e.Bezier=function(r,i,o,l){qe("13.47"),this.a=r,this.b=i,this.c=o,this.d=l,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var f=this.x(0),d=this.y(0),p=0,_=1;_<=this.len;_+=1){var P=this.x(_*.01),T=this.y(_*.01),R=f-P,b=d-T;p+=Math.sqrt(R*R+b*b),this.arcLengths[_]=p,f=P,d=T}this.length=p},e.Bezier.prototype={map:function(t){for(var r=t*this.arcLengths[this.len],i=0,o=this.len,l=0;i<o;)l=i+((o-i)/2|0),this.arcLengths[l]<r?i=l+1:o=l;this.arcLengths[l]>r&&l--;var f=this.arcLengths[l];return f===r?l/this.len:(l+(r-f)/(this.arcLengths[l+1]-f))/this.len},mx:function(t){return this.x(this.map(t))},my:function(t){return this.y(this.map(t))},x:function(t){return(1-t)*(1-t)*(1-t)*this.a.x+3*((1-t)*(1-t))*t*this.b.x+3*(1-t)*(t*t)*this.c.x+t*t*t*this.d.x},y:function(t){return(1-t)*(1-t)*(1-t)*this.a.y+3*((1-t)*(1-t))*t*this.b.y+3*(1-t)*(t*t)*this.c.y+t*t*t*this.d.y}},e.Boundary=function(t,r,i,o){qe("13.46"),t.x&&(o=t.height,i=t.width,r=t.y,t=t.x),!(n(t)||n(r)||n(i)||n(o))&&(this.x=t,this.y=r,this.width=i,this.height=o,this.contract=function(l,f,d,p){return n(l)?this:(n(f)&&(f=l),n(d)?d=l*2:d=d+l,n(p)?p=f*2:p=p+f,this.x+=l,this.y+=f,this.width-=d,this.height-=p,this)})},e.GradientColor=function(t,r,i,o,l,f){if(qe("13.465"),this.type="GradientColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=n(r)?0:r,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var d=0;d<this.colors.length;d++)this.ratios.push(d/(this.colors.length-1))}!n(i)&&(n(o)||n(l)||n(f))?(this.angle=i,i=null):n(this.angle)&&n(i)&&n(o)&&n(l)&&n(f)?this.angle=0:(this.x0=n(i)?0:i,this.y0=n(o)?0:o,this.x1=n(l)?0:l,this.y1=n(f)?100:f)},e.RadialColor=function(t,r,i,o,l,f,d,p){if(qe("13.466"),this.type="RadialColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=r,!Array.isArray(this.ratios)){this.ratios=[];for(var _=0;_<this.colors.length;_++)this.ratios.push(_/(this.colors.length-1))}this.x0=i,this.y0=o,this.r0=l,this.x1=f,this.y1=d,this.r1=p},e.BitmapColor=function(t,r,i){qe("13.467"),this.type="BitmapColor",typeof t=="string"&&fe.asset&&(t=fe.asset(t)),t.type!="Bitmap"&&t.bitmap&&(t=t.bitmap),this.image=t.type=="Bitmap"?t.image:t,this.repetition=r,this.matrix=i},e.Damp=function(t,r){qe("14");var i="startValue, damp",o;if(o=mt(e.Damp,arguments,i,this))return o;this.lastValue=n(t)?0:t,this.damp=n(r)?.1:r},e.Damp.prototype.convert=function(t){return this.lastValue=this.lastValue+(t-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(t){return this.lastValue=t,this},e.Proportion=function(t,r,i,o,l,f,d){var p="baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",_;if(_=mt(e.Proportion,arguments,p,this))return _;qe("15"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=1),n(f)&&(f=!1),n(d)&&(d=!0);var P,T;this.convert=function(R){if(n(R)&&(R=t),!(isNaN(R)||r-t==0))return d&&(R=Math.max(R,t),R=Math.min(R,r)),P=(R-t)/(r-t),l>0?T=i+(o-i)*P:T=o-(o-i)*P,f&&(T=Math.round(T)),T}},e.ProportionDamp=function(t,r,i,o,l,f,d,p){var _="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",P;if(P=mt(e.ProportionDamp,arguments,_,this))return P;qe("16"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=.1),n(f)&&(f=1),n(d)&&(d=!1),n(p)&&(p=!0),this.damp=l;var T=this,R,b,L,S,k,m=0,A=0;R=t,A=i;var D=setInterval(C,20);function C(){isNaN(R)||r-t==0||(p&&(R=Math.max(R,t),R=Math.min(R,r)),b=(R-t)/(r-t),L=o-i,f>0?S=i+L*b:S=o-L*b,m=S,k=m-A,A+=k*T.damp)}this.immediate=function(E){return T.convert(E),C(),A=S,d&&(A=Math.round(A)),T},this.immediateValue=function(E){return m=A=E,T},this.convert=function(E){return R=E,d?Math.round(A):A},this.dispose=function(){return clearInterval(D),!0}},e.Dictionary=function(t){qe("17"),this.length=0,this.unique=t;var r=this.objects=[],i=this.values=[];this.type="Dictionary",this.add=function(o,l){n(o)||(n(l)&&(l=!0),this.unique&&this.remove(o),r.push(o),i.push(l),this.length++)},this.at=function(o){if(!n(o)){var l=r.indexOf(o);return l>-1?i[l]:null}},this.remove=function(o){if(n(o))return!1;var l=r.indexOf(o);return l>-1?(r.splice(l,1),i.splice(l,1),this.length--,!0):!1},this.clear=function(){return r=this.objects=[],i=this.values=[],this.length=null,this},this.dispose=function(){return r=null,i=null,this.length=null,!0}},e.Hierarchy=function(t,r){qe("17.5");var i=this;if(n(t))return;n(r)&&(r=!1);var o;i.processSimple=function(p){var _=0,P={};function T(R,b,L,S){if(n(R)||(p=R),p.constructor=={}.constructor){var k;p.list&&(k=p,p=p.list),S&&k&&e.loop(k,function(m,A){m!="list"&&(S[m]=A)}),e.loop(p,function(m,A){var D={},C=b["id"+_]={obj:m,level:L,open:r,opened:!1,list:D};_++,T(A,D,L+1,C)})}else Array.isArray(p)&&e.loop(p,function(m){b["id"+_]={obj:m},_++})}return T(t,P,0),o=_,P},i.processComplex=function(p){var _=0;function P(T,R){e.loop(T,function(b,L){L.level=R,n(L.open)&&(L.open=r),n(L.opened)&&(L.opened=!1),L.list&&P(L.list,R+1),_++})}return P(p,0),o=_,p},n(t.id0)?i.data=i.processSimple(t):i.data=i.processComplex(t),i.getLinearList=function(p){return n(p)&&(p=i.data),l(p)[0]},i.getLinearIDs=function(p){return n(p)&&(p=i.data),l(p)[1]};function l(p){var _=[],P=[];function T(R,b){e.loop(R,function(L,S){_.push(S.obj),P.push(L),S.open&&T(S.list,b+1)})}return T(p,0),[_,P]}i.getData=function(p){var _;function P(T){e.loop(T,function(R,b){if(R==p)return _=b,_;P(b.list)})}return P(i.data),_},i.getNextSibling=function(p){var _,P;function T(R){e.loop(R,function(b,L){if(!P&&_)return P=b,P;b==p?_=L:T(L.list)})}return T(i.data),P},i.getPrevSibling=function(p){var _=[],P;function T(R,b){e.loop(R,function(L,S){if(L==p)return P=_[b]||_[b-1],P;_[b]=L,T(S.list,b+1)})}return T(i.data,0),P},i.insertBefore=function(p,_,P){return f("insertBefore",p,_,P)},i.insertAfter=function(p,_,P){return f("insertAfter",p,_,P)},i.removeItem=function(p){return f("removeItem",null,p)},i.replaceItem=function(p,_){var P=i.getData(_);return P.obj=p,f("replaceItem")};function f(p,_,P,T){var R=0,b={},L=i.data;function S(k,m,A,D){e.loop(k,function(C,E){if(!(p=="removeItem"&&C==P)){var X,Z,V;p=="insertBefore"&&C==P&&(R=d(m,R,A,_,T)),X={},Z=E.list,E.list=X,E.opened=!1,E.open=!1,V=m["id"+R]=E,V.obj.type&&V.obj.type=="TabsButton"&&(V.obj=V.obj.text),R++,S(Z,X,A+1),p=="insertAfter"&&C==P&&(R=d(m,R,A,_,T))}})}return S(L,b,0),o=R,b}function d(p,_,P,T,R){if(R){var b={};Array.isArray(T)&&(T=T[0]),p["id"+_]={obj:T,level:P,open:!1,opened:!1,list:b},_++,Array.isArray(R)||(R=[R]),e.loop(R,function(L){b["id"+_]={obj:L,level:P+1,open:!1,opened:!1,list:{}},_++})}else Array.isArray(T)||(T=[T]),e.loop(T,function(L){p["id"+_]={obj:L,level:P,open:!1,opened:!1,list:{}},_++});return _}i.getParent=function(p){var _=i.data;function P(T,R){var b=e.loop(T,function(L,S){if(L==p)return o-=1,R;if(S.list&&!e.isEmpty(S.list))return P(S.list,L)});if(b!==!0)return b}return P(_)},Object.defineProperty(i,"length",{get:function(){return o},set:function(){kt&&ht("Hierarchy() - length is read only")}})},e.Pick=function(t){e.pickCheck||(qe("17.6"),e.pickCheck=!0),this.choices=t,this.num=function(i){for(var o=[],l=0;l<i;l++)o.push(e.Pick.choose(this));return this.choices=e.Pick.series(o),this};var r=this;this.loop=function(i,o){for(var l,f=0;f<i;f++)if(l=o(e.Pick.choose(r),f,i),typeof l<"u")return l}},e.Pick.prototype.type="Pick",e.Pick.series=function(){return e.pickCheck||(qe("17.6"),e.pickCheck=!0),e.series.apply(null,arguments)},e.Pick.rand=function(t,r,i,o){return e.pickCheck||(qe("17.6"),e.pickCheck=!0),e.rand(t,r,i,o)},e.Pick.choose=function(t,r,i){if(e.pickCheck||(qe("17.6"),e.pickCheck=!0),r==null&&(r=!0),t==null)return t;if(t.type=="Pick"||r){var o=t.choices||t,l;return Array.isArray(o)?(l=o[Math.floor(Math.random()*o.length)],e.Pick.choose(l)):o.constructor==={}.constructor?n(o.noPick)?n(o.max)?o:(n(o.integer)&&(o.integer=!1),l=e.Pick.rand(o.min,o.max,o.integer,o.negative),l):o.noPick:o instanceof Function?(o.count==null?o.count=0:o.count++,e.Pick.choose(o(i,!0))):t}else return t},e.Pick.getMinMax=function(t){return!n(t.min)&&!n(t.max)?t:Array.isArray(t)?e.arrayMinMax(t):t.type=="series"?e.arrayMinMax(t.array):{min:null,max:null}},e.scrollX=function(t,r){return qe("18"),e.abstractScroll("X","Left",t,r)},e.scrollY=function(t,r){return qe("19"),e.abstractScroll("Y","Top",t,r)},e.abstractScroll=function(t,r,i,o){qe("20");var l=g(o),f=t=="X"?"Y":"X";if(n(i))return document.documentElement&&document.documentElement["scroll"+r]||document.body["scroll"+r];if(n(o))fe.scrollTo(e["scroll"+f](),i);else{var d=50,p=o*(l=="s"?1e3:1);p<d&&(p=d);var _=p/d,P=e["scroll"+t](),T=i-P,R=T/_,b=0,L=setInterval(function(){b++,P+=R,fe.scrollTo(e["scroll"+f](),P),b>=_&&(fe.scrollTo(e["scroll"+f](),i),clearInterval(L))},d)}return i},e.windowWidth=function(){qe("21");var t=isNaN(fe.innerWidth)?fe.clientWidth:fe.innerWidth,r=isNaN(fe.innerHeight)?fe.clientHeight:fe.innerHeight;if(e.mobile()&&!n(fe.orientation)&&!fe.parent&&(t>r&&Math.abs(fe.orientation)!=90||r>t&&Math.abs(fe.orientation)==90)){var i=t;t=r,r=i}return fe.zdf&&fe.zdf.swapRotation?r:t},e.windowHeight=function(){qe("22");var t=isNaN(fe.innerWidth)?fe.clientWidth:fe.innerWidth,r=isNaN(fe.innerHeight)?fe.clientHeight:fe.innerHeight;if(e.mobile()&&!n(fe.orientation)&&!fe.parent&&(t>r&&Math.abs(fe.orientation)!=90||r>t&&Math.abs(fe.orientation)==90)){var i=t;t=r,r=i}return fe.zdf&&fe.zdf.swapRotation?t:r},e.browserZoom=function(){if(e.zimBZ)return n(e.zimBZA)?e.decimals((fe.devicePixelRatio||1)/e.zimBZ1,2):e.zimBZA;if(qe("22.2"),e.zimBZ=!0,typeof t>"u")if(fe.zdf)var t=fe.zdf;else return e.zimBZA=1,1;if(t.retina)e.zimBZ1=fe.devicePixelRatio||1;else return e.zimBZA=1,1},e.getQueryString=function(t){if(qe("22.5"),n(t)&&(t=location.search.replace("?","")),t=="")return{};for(var r=t.split("&"),i={},o=0;o<r.length;o++){var l=r[o].split("=");typeof i[l[0]]>"u"?i[l[0]]=decodeURIComponent((l[1]+"").replace(/\+/g,"%20")):typeof i[l[0]]=="string"?i[l[0]]=[i[l[0]],decodeURIComponent((l[1]+"").replace(/\+/g,"%20"))]:i[l[0]].push(decodeURIComponent((l[1]+"").replace(/\+/g,"%20")))}return i},e.swapHTML=function(t,r){return qe("17.2"),e.swapProperties("innerHTML",Tn(t),Tn(r))},e.urlEncode=function(t){return qe("23"),t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(t){return qe("24"),decodeURIComponent((t+"").replace(/\+/g,"%20"))},e.setCookie=function(t,r,i){if(qe("25"),!(n(t)||n(r))){var o;if(i){var l=new Date;l.setTime(l.getTime()+i*24*60*60*1e3),o="; expires="+l.toGMTString()}else o="";return document.cookie=t+"="+escape(r)+o+"; path=/",!0}},e.getCookie=function(t){qe("26");for(var r=document.cookie.split(/;\s*/),i=new Array,o,l=0;l<r.length;l++)o=r[l].split("="),i[o[0]]=o[1];if(!(typeof i[t]>"u"))return unescape(i[t])},e.deleteCookie=function(t){return qe("27"),n(e.getCookie(t))?!1:(e.setCookie(t,"",-1),!0)},je==null)return kt&&fi("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.localToGlobal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var f=l.call(o,r,i),d=o.stage;if(!fe.zdf){if(!d)return f;fe.zdf={stage:d,canvas:d.canvas}}return f.x/=e.scaX,f.y/=e.scaY,f}},e.globalToLocal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var f=o.stage;if(!fe.zdf){if(!f)return l.call(o,r,i);fe.zdf={stage:f,canvas:f.canvas}}r*=e.scaX,i*=e.scaY;var d=l.call(o,r,i);return d}},e.localToLocal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null||o==null)){var f=l.localToGlobal(r,i),d=l.stage;if(!fe.zdf){if(!d)return o.globalToLocal(f.x,f.y);fe.zdf={stage:d,canvas:d.canvas}}if(d||(d=fe.zdf.stage),o==d)return f;if(f)return o.globalToLocal(f.x,f.y)}},e.displayBase=function(t){e.zimDBCheck||(qe("50.432"),e.zimDBCheck=!0);var r=t;if(Object.defineProperty(t,"width",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.width*this.scaleX)},set:function(p){if(t.scaleDimensions!==!1){var _=this.getBounds();if(n(_)||_.width==0){kt&&ht("DisplayObject() - width needs bounds set with setBounds()");return}var P=p/_.width;this.scaleX=this.scaleY=P}else{var T=t.width!=0?t.height/t.width:0;t.setWidth(p),t.setHeight(p*T),t.drawShape()}}}),Object.defineProperty(t,"height",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.height*this.scaleY)},set:function(p){if(t.scaleDimensions!==!1){var _=this.getBounds();if(n(_)||_.height==0){kt&&ht("DisplayObject() - height needs bounds set with setBounds()");return}var P=p/_.height;this.scaleX=this.scaleY=P}else{var T=t.height!=0?t.width/t.height:0;t.setHeight(p),t.setWidth(p*T),t.drawShape()}}}),Object.defineProperty(t,"widthOnly",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.width*this.scaleX)},set:function(p){if(t.scaleDimensions!==!1){var _=this.getBounds();if((n(_)||_.width==0)&&kt){ht("DisplayObject() - widthOnly needs bounds set with setBounds()");return}var P=p/_.width;this.scaleX=P}else t.setWidth(p),t.drawShape()}}),Object.defineProperty(t,"heightOnly",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.height*this.scaleY)},set:function(p){if(t.scaleDimensions!==!1){var _=this.getBounds();if((n(_)||_.height==0)&&kt){ht("DisplayObject() - heightOnly needs bounds set with setBounds()");return}var P=p/_.height;this.scaleY=P}else t.setHeight(p),t.drawShape()}}),Object.defineProperty(t,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(p){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(p,this.parent.numChildren-1)))}}),Object.defineProperty(t,"depth",{enumerable:!0,get:function(){return this._depth},set:function(p){if(this._depth=p,!n(this.vrChannel)){var _=this.vrParallaxDistance?p*this.vrParallax*this.vrParallaxDistance:0;this.vrChannel=="left"?this.x=this.vrStartX+p+_:this.vrChannel=="right"&&(this.x=this.vrStartX-p+_)}}}),Object.defineProperty(t,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(p){this.compositeOperation=p}}),!r.name){var i;Object.defineProperty(r,"name",{get:function(){return i},set:function(p){i=p,e.zimObjectIDs[p]=r}})}r._draggable,Object.defineProperty(r,"draggable",{get:function(){return this._draggable},set:function(p){p!=this._draggable&&(this._draggable=p,this._draggable?this.drag():this.noDrag())}});var o,l;r.on("mousedown",function(p){p.target.stage&&(o=p.target.stage.frame,o.allowDefault&&(l=!0,o.allowDefault=!1))}),r.on("pressup",function(){o&&l&&(o.allowDefault=!0)});for(var f=["hue","saturation","brightness","contrast"],d=0;d<f.length;d++)-function(){for(var p=f[d],_=0;_<2;_++)-function(){var P=_==0?"":"Batch";Object.defineProperty(r,p+P,{get:function(){return r.effects&&r.effects.multi?r.effects.multi[p]:0},set:function(T){!r.effects||!r.effects.multi?r.effect(new e.MultiEffect(p=="hue"?T:0,p=="saturation"?T:0,p=="brightness"?T:0,p=="contrast"?T:0)):r.effects.multi[p]=T,P==""&&r.updateEffects()}})}()}()},e.gD=function(t){if(e.zimGDCheck||(qe("50.435"),e.zimGDCheck=!0),!!t){if(t.z_bc){var r=t.z_bc;r.width=r.height=1,r.getContext&&r.getContext("2d").clearRect(0,0,1,1),delete t.z_bc}e.KEYFOCUS==t&&(e.KEYFOCUS=null),fe.KEYFOCUS==t&&(fe.KEYFOCUS=null),t.veeObj&&(t.veeObj=null),t.draggable&&t.noDrag(),t.zimTweens&&t.stopAnimate(),t.zimWire&&t.noWire(),t.zimWired&&t.noWired(),t.zimClickHoldDownEvent&&t.noHold(),t.transformControls&&t.transformControls.dispose(),t.zimClickDownEvent&&(t.zimClickDownEvent=null),t.zimClickUpEvent&&(t.zimClickUpEvent=null),t.physics&&t.removePhysics(),t.name&&e.zimObjectIDs[t.name]==t&&delete e.zimObjectIDs[t.name]}},e.Stage=function(t,r,i){if(qe("50.44"),!n(t)){var o=t.tagName=="CANVAS"?t:Tn(t);n(o)||(this.cjsStage_constructor(t),this.setBounds(0,0,o.width,o.height),this.type="Stage",fe.zdf||(fe.zimDefaultFrame=fe.zdf={stage:this}),i?je.Touch.enable(this,!0):r&&je.Touch.enable(this,!1),this.cache=function(l,f,d,p,_,P){if(n(d))if(n(l)){var T=this.getBounds();if(!n(T)){var R=this.borderWidth>0?this.borderWidth/2:0;l=T.x-R,f=T.y-R,d=T.width+R*2,p=T.height+R*2}}else d=l,p=f,l=0,f=0;return this.cjsStage_cache(l,f,d,p,_,P),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(l){var f=l.clone();f.type="pressdown",l.target.dispatchEvent(f)},void 0,!1,void 0,!0),this.loop=function(l,f,d,p,_,P){return e.loop(this,l,f,d,p,_,P)},this.hitTestGrid=function(l,f,d,p,_,P,T,R,b,L,S,k){return e.hitTestGrid(this,l,f,d,p,_,P,T,R,b,L,S,k)},this.disposeAllChildren=function(){for(var l=this.numChildren-1;l>=0;l--){var f=this.getChildAt(l);f.dispose&&f.dispose()}return this},this.frame=fe.zdf,je&&!je.stageTransformable&&(fe.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(l){this.cjsStage_scaleX=l,this.cjsStage_scaleY=l,e.scaX=je.stageTransformable?1:l,e.scaY=je.stageTransformable?1:l}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(l){this.cjsStage_scaleX=l,e.scaX=je.stageTransformable?1:l}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(l){this.cjsStage_scaleY=l,e.scaY=je.stageTransformable?1:l}}),this.localToGlobal=function(l,f){return e.localToGlobal(l,f,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(l,f){return e.globalToLocal(l,f,this,this.cjsStage_globalToLocal)},this.localToLocal=function(l,f,d){return e.localToLocal(l,f,d,this)}))}},e.extend(e.Stage,je.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),e.StageGL=function(t,r,i,o){if(qe("50.45"),!n(t)){var l=t.tagName=="CANVAS"?t:Tn(t);n(l)||(this.cjsStageGL_constructor(t,r),this.setBounds(0,0,l.width,l.height),this.type="StageGL",fe.zdf||(fe.zdf={stage:this}),o?je.Touch.enable(this,!0):i&&je.Touch.enable(this,!1),this.cache=function(f,d,p,_,P,T){if(n(p))if(n(f)){var R=this.getBounds();if(!n(R)){var b=this.borderWidth>0?this.borderWidth/2:0;f=R.x-b,d=R.y-b,p=R.width+b*2,_=R.height+b*2}}else p=f,_=d,f=0,d=0;return this.cjsStageGL_cache(f,d,p,_,P,T),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(f){var d=f.clone();d.type="pressdown",f.target.dispatchEvent(d)},void 0,!1,void 0,!0),this.loop=function(f,d,p,_,P,T){return e.loop(this,f,d,p,_,P,T)},this.hitTestGrid=function(f,d,p,_,P,T,R,b,L,S,k,m){return e.hitTestGrid(this,f,d,p,_,P,T,R,b,L,S,k,m)},this.disposeAllChildren=function(){for(var f=this.numChildren-1;f>=0;f--){var d=this.getChildAt(f);d.dispose&&d.dispose()}return this},this.frame=fe.zdf,je&&!je.stageTransformable&&(fe.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(f){this.cjsStage_scaleX=f,this.cjsStage_scaleY=f,e.scaX=je.stageTransformable?1:f,e.scaY=je.stageTransformable?1:f}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(f){this.cjsStage_scaleX=f,e.scaX=je.stageTransformable?1:f}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(f){this.cjsStage_scaleY=f,e.scaY=je.stageTransformable?1:f}}),this.localToGlobal=function(f,d){return e.localToGlobal(f,d,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(f,d){return e.globalToLocal(f,d,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(f,d,p){return e.localToLocal(f,d,p,this)}))}},e.extend(e.StageGL,je.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),e.Container=function(t,r,i,o,l,f,d){var p="a, b, c, d, style, group, inherit",_;if(_=mt(e.Container,arguments,p,this))return _;e.containerCheck||(qe("50.5"),qe("50.435"),e.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=f;var P=this,T=l===!1?{}:e.getStyle(this.type,this.group,d);n(t)&&(t=T.a!=null?T.a:null),n(r)&&(r=T.b!=null?T.b:null),n(i)&&(i=T.c!=null?T.c:null),n(o)&&(o=T.d!=null?T.d:null);var R=b(t,r,i,o);function b(S,k,m,A){var D=[];return n(S)?D=[S,k,m,A]:n(k)?S.x?D=[S.x,S.y,S.width,S.height]:(D[0]=0,D[1]=0,D[2]=S,D[3]=S):n(m)?(D[0]=0,D[1]=0,D[2]=S,D[3]=k):(D[0]=S,D[1]=k,D[2]=m,D[3]=A),n(D[3])&&(D[3]=D[2]),D}n(t)||this.setBounds(R[0],R[1],R[2],R[3]),this.cache=function(S,k,m,A,D,C,E,X,Z){if(P.type=="AC"&&fe.zdf)return fe.zdf.ac("cache",arguments,P),P;var V="a,b,c,d,scale,options,margin,rtl,willReadFrequently",O;if(O=mt(P.cache,arguments,V))return O;var ne=P.getBounds();if(n(m))if(n(S)){if(!n(ne)){var N=P.borderWidth>0?P.borderWidth/2:0;S=ne.x-N,k=ne.y-N,m=ne.width+N*2,A=ne.height+N*2}}else m=S,A=k,S=0,k=0;return P.type=="Triangle"&&(S-=P.borderWidth?P.borderWidth:0,m+=P.borderWidth?P.borderWidth*2:0,k-=P.borderWidth?P.borderWidth:0,A+=P.borderWidth?P.borderWidth*2:0),n(E)&&(E=0),P.cjsContainer_cache(S-E,k-E,m+E*2,A+E*2,D,C,X,Z),ne&&P.setBounds(ne.x,ne.y,ne.width,ne.height),P.z_bc=P.canvas=P.cacheCanvas,P},this.uncache=function(){return P.cjsContainer_uncache(),P},this.childrenToBitmap=function(){var S=this.cacheCanvas,k=new e.Bitmap(this.cache().cacheCanvas);return S||this.uncache(),this.removeAllChildren(),k.addTo(this),this};var L=fe.zdf||1;je&&!je.stageTransformable&&L.retina&&(this.localToGlobal=function(S,k){return e.localToGlobal(S,k,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(S,k){return e.globalToLocal(S,k,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(S,k,m){return e.localToLocal(S,k,m,this)}),this.setBounds=function(S,k,m,A){var D=b(S,k,m,A);return P.cjsContainer_setBounds(D[0],D[1],D[2],D[3]),P},this.getBounds=function(S){return S?P.boundsToGlobal(null,null,null,S):P.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var S=this.numChildren-1;S>=0;S--){var k=this.getChildAt(S);k.dispose&&k.dispose()}return this},e.displayBase(P),l!==!1&&e.styleTransforms(this,T),this.clone=function(S){if(this.type=="AC"&&fe.zdf)return kt&&ht("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),fe.zdf.ac("clone",arguments,this),this;var k=this.getBounds();return n(k)&&(k={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new e.Container(k.x,k.y,k.width,k.height,l,this.group,d)),S)},this.hasProp=function(S){return!n(this[S])||Object.prototype.hasOwnProperty.call(this,S)}},e.Container.prototype.dispose=function(t){return u(this,t),!0},e.Container.prototype.specialColor=function(t,r,i){if(r.type=="GradientColor"){if(!n(r.angle))if(i.width){var o=i.getBounds();if(r.angle+=360*1e5,r.angle%=360,i.type=="Circle"){var l=o.width/2*Math.cos(r.angle*RAD),f=o.width/2*Math.sin(r.angle*RAD);r.x0=-l,r.y0=-f,r.x1=l,r.y1=f}else{var d=r.angle%90,p=o.width*Math.sin(d*RAD),_=p*Math.sin(d*RAD),P=-p*Math.cos(d*RAD),T=o.height*Math.sin(d*RAD),R=o.width+T*Math.cos(d*RAD),b=T*Math.sin(d*RAD),L=o.height*Math.sin(d*RAD),S=-L*Math.cos(d*RAD),k=o.height-L*Math.sin(d*RAD);r.angle>=0&&r.angle<90?(r.x0=o.x+_,r.y0=o.y+P,r.x1=o.x+R,r.y1=o.y+b):r.angle>=90&&r.angle<180?(r.x0=o.x+_,r.y0=o.y+P,r.x1=o.x+S,r.y1=o.y+k):r.angle>=180&&r.angle<270?(r.x0=o.x+R,r.y0=o.y+b,r.x1=o.x+_,r.y1=o.y+P):(r.x0=o.x+S,r.y0=o.y+k,r.x1=o.x+_,r.y1=o.y+P)}}else{t.style=r.colors[0];return}t.linearGradient(r.colors,r.ratios,r.x0,r.y0,r.x1,r.y1)}else if(r.type=="RadialColor"){if(n(r.x0))if(i.width){var o=i.getBounds();r.r0=0,i.type=="Circle"?(r.x0=0,r.y0=0,r.r1=o.width/2):(r.x0=o.x+o.width/2,r.y0=o.y+o.height/2,r.r1=Math.sqrt(Math.pow(o.width/2,2)+Math.pow(o.height/2,2))),r.x1=r.x0,r.y1=r.y0}else{t.style=r.colors[0];return}t.radialGradient(r.colors,r.ratios,r.x0,r.y0,r.r0,r.x1,r.y1,r.r1)}else r.type=="BitmapColor"&&t.bitmap(r.image,r.repetition,r.matrix)};function u(t,r){if(t&&e.gD(t),!r&&t&&t.dispose&&t.dispose!==e.Container.prototype.dispose&&t.dispose(null,null,!0),t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var i=t.numChildren-1;i>=0;i--)u(t.getChildAt(i));t&&t.parent&&t.parent.removeChild(t)}e.extend(e.Container,je.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),Qn(e.Container.prototype),e.Shape=function(t,r,i,o,l,f,d,p,_){var P="a, b, c, d, graphics, optimize, style, group, inherit",T;if(T=mt(e.Shape,arguments,P,this))return T;qe("50.6"),this.cjsShape_constructor(l),this.type="Shape",this.group=p;var R=d===!1?{}:e.getStyle(this.type,this.group,_),b=this;n(t)&&(t=R.a!=null?R.a:null),n(r)&&(r=R.b!=null?R.b:null),n(i)&&(i=R.c!=null?R.c:null),n(o)&&(o=R.d!=null?R.d:null),n(l)&&(l=R.graphics!=null?R.graphics:null),n(f)&&(f=R.optimize!=null?R.optimize:!1);var L=S(t,r,i,o);function S(D,C,E,X){var Z=[];return n(D)?Z=[D,C,E,X]:n(C)?D.x?Z=[D.x,D.y,D.width,D.height]:(Z[0]=0,Z[1]=0,Z[2]=D,Z[3]=D):n(E)?(Z[0]=0,Z[1]=0,Z[2]=D,Z[3]=C):(Z[0]=D,Z[1]=C,Z[2]=E,Z[3]=X),n(Z[3])&&(Z[3]=Z[2]),Z}if(n(t)||this.setBounds(L[0],L[1],L[2],L[3]),!f)for(var k=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],m=0;m<k.length;m++)~function(){var D=m;b[k[D]]=function(){return k[D]=="ct"?b.graphics.curveTo.apply(b.graphics,arguments):b.graphics[k[D]].apply(b.graphics,arguments),b}}();Object.defineProperty(b,"command",{get:function(){return b.graphics.command},set:function(){}}),this.cache=function(D,C,E,X,Z,V,O,ne,N){var q="a,b,c,d,scale,options,margin,rtl,willReadFrequently",U;if(U=mt(b.cache,arguments,q))return U;var z=b.getBounds();if(n(E))if(n(D)){if(!n(z)){var ie=b.borderWidth>0?b.borderWidth/2:0;D=z.x-ie,C=z.y-ie,E=z.width+ie*2,X=z.height+ie*2}}else E=D,X=C,D=0,C=0;return n(O)&&(O=0),b.cjsShape_cache(D-O,C-O,E+O*2,X+O*2,Z,V,ne,N),b.z_bc=b.canvas=b.cacheCanvas,b},this.setBounds=function(D,C,E,X){var Z=S(D,C,E,X);return this.cjsShape_setBounds(Z[0],Z[1],Z[2],Z[3]),this},this.getBounds=function(D){return D?b.boundsToGlobal(null,null,null,D):b.cjsShape_getBounds()},d!==!1&&e.styleTransforms(this,R),this.clone=function(D){n(D)&&(D=!0);var C=this.getBounds();n(C)&&(C={x:null,y:null,width:null,height:null});var E=b.cloneProps(new e.Shape(C.x,C.y,C.width,C.height,l,d,p,_));return D?E.graphics=b.graphics.clone():E.graphics=b.graphics,E};var A=fe.zdf||1;je&&!je.stageTransformable&&A.retina&&(this.localToGlobal=function(D,C){return e.localToGlobal(D,C,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(D,C){return e.globalToLocal(D,C,this,this.cjsShape_globalToLocal)},this.localToLocal=function(D,C,E){return e.localToLocal(D,C,E,this)}),this.hasProp=function(D){return!n(this[D])||Object.prototype.hasOwnProperty.call(this,D)},e.displayBase(b),this.dispose=function(){e.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Shape,je.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),Qn(e.Shape.prototype),e.Bitmap=function(t,r,i,o,l,f,d,p,_){var P="image, width, height, left, top, scale, style, group, inherit",T;if(T=mt(e.Bitmap,arguments,P,this))return T;qe("50.7"),this.group=p;var R=d===!1?{}:e.getStyle("Bitmap",this.group,_);n(f)&&(f=R.scale!=null?R.scale:1),n(r)&&(r=R.width!=null?R.width:t?t.width:100),n(i)&&(i=R.height!=null?R.height:t?t.height:100),n(o)&&(o=R.left!=null?R.left:0),n(l)&&(l=R.top!=null?R.top:0);var b=!1,L=t;if(!n(t)&&t.uncache){b=!0;var S=t.cacheCanvas,k=t;t.cache(o,l,r,i,f),this.z_bc=t=t.cacheCanvas}this.cjsBitmap_constructor(t),k&&!S&&k.uncache();var m=this;this.type="Bitmap",!n(r)&&!n(i)&&this.setBounds(0,0,r,i),this.drawImageData=function(E,X,Z,V,O,ne){if(n(E)&&(E=0),n(X)&&(X=0),n(Z)&&(Z=0),n(V)&&(V=0),n(O)&&(O=r),n(ne)&&(ne=i),!m.proxyCanvas){var N=m.proxyCanvas=document.createElement("canvas");N.setAttribute("width",r),N.setAttribute("height",i),m.proxyContext=N.getContext("2d"),t=L=m.image=N}m.proxyContext&&m.proxyContext.putImageData(m.imageData,E,X,Z,V,O,ne)},fe.zdf&&(fe.zdf.canvas.getContext("2d")?this.imageData=fe.zdf.canvas.getContext("2d").createImageData(r,i):this.imageData=document.createElement("canvas").getContext("2d").createImageData(r,i),n(t)&&m.drawImageData(),t&&t.match&&t.match(/data:image/i)&&setTimeout(function(){m.stage&&m.stage.update(),setTimeout(function(){m.stage&&m.stage.update()},50)},50)),t&&t.nodeName&&t.nodeName.toLowerCase()!="video"&&(b?m.sourceRect={x:0,y:0,width:r*f,height:i*f}:m.sourceRect={x:o,y:l,width:r,height:i});function A(E,X,Z,V){var O=[];return n(E)?O=[E,X,Z,V]:n(X)?E.x?O=[E.x,E.y,E.width,E.height]:(O[0]=0,O[1]=0,O[2]=E,O[3]=E):n(Z)?(O[0]=0,O[1]=0,O[2]=E,O[3]=X):(O[0]=E,O[1]=X,O[2]=Z,O[3]=V),n(O[3])&&(O[3]=O[2]),O}this.setBounds=function(E,X,Z,V){var O=A(E,X,Z,V);return m.cjsBitmap_setBounds(O[0],O[1],O[2],O[3]),m},this.getBounds=function(E){return E?m.boundsToGlobal(null,null,null,E):m.cjsBitmap_getBounds()},this.cache=function(E,X,Z,V,O,ne,N,q){var U="a,b,c,d,scale,options,rtl,willReadFrequently",z;if(z=mt(m.cache,arguments,U))return z;var ie;if(n(Z))if(n(E)){if(ie=this.getBounds(),!n(ie)){var ae=this.borderWidth>0?this.borderWidth/2:0;E=ie.x-ae,X=ie.y-ae,Z=ie.width+ae*2,V=ie.height+ae*2}}else Z=E,V=X,E=0,X=0;return ie=m.getBounds(),m.cjsBitmap_cache(E,X,Z,V,O,ne,N,q),m.setBounds(ie.x,ie.y,ie.width,ie.height),m.z_bc=m.canvas=m.cacheCanvas,m},this.clone=function(){var E=this.cloneProps(new e.Bitmap(L,r,i,o,l,f,d,this.group,_));return E.cloned=!0,E.src=m.src,E.file=m.file,E.image=m.image,E.svg=m.svg,E.item=m.item,E};var D=fe.zdf||1;je&&!je.stageTransformable&&D.retina&&(this.localToGlobal=function(E,X){return e.localToGlobal(E,X,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(E,X){return e.globalToLocal(E,X,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(E,X,Z){return e.localToLocal(E,X,Z,this)}),this.hasProp=function(E){return!n(this[E])||Object.prototype.hasOwnProperty.call(this,E)};var C;this.getColorAt=function(E,X,Z){C||(m.cache(null,null,null,null,null,null,null,!0),C=m.cacheCanvas.getContext("2d"),m.uncache());var V=C.getImageData(E,X,1,1).data;return V[3]/=255,Z?V:"rgba("+V[0]+","+V[1]+","+V[2]+","+V[3]+")"},this.keyOut=function(E,X,Z){n(E)&&(E="#389b26"),n(X)&&(X=.1),Array.isArray(E)||(E=[E]),Array.isArray(X)||(X=[X]),!n(Z)&&!Array.isArray(Z)&&(Z=[Z]);var V,O,ne=[],N=[],q=[];for(V=0;V<E.length;V++)ne[V]=e.convertColor(E[V],"array"),X[V]!=null?N[V]=X[V]*255:N[V]=X[0]*255,Z&&(Z[V]!=null?(q[V]=e.convertColor(Z[V],"array"),q[V][3]*=255):(q[V]=e.convertColor(Z[0],"array"),q[V][3]*=255));m.cacheCanvas&&m.updateCache(),C||(m.cache(null,null,null,null,null,null,null,!0),C=m.cacheCanvas.getContext("2d"));var U=C.getImageData(o,l,r,i),z=U.data,ie=z.length/4;if(Z)for(V=0;V<ie;V++){var ae=z[V*4+0],he=z[V*4+1],$=z[V*4+2];for(O=0;O<E.length;O++)ae>ne[O][0]-N[O]&&ae<ne[O][0]+N[O]&&he>ne[O][1]-N[O]&&he<ne[O][1]+N[O]&&$>ne[O][2]-N[O]&&$<ne[O][2]+N[O]&&(z[V*4+0]=q[O][0],z[V*4+1]=q[O][1],z[V*4+2]=q[O][2],z[V*4+3]=q[O][3])}else for(V=0;V<ie;V++){var ae=z[V*4+0],he=z[V*4+1],$=z[V*4+2];for(O=0;O<E.length;O++)ae>ne[O][0]-N[O]&&ae<ne[O][0]+N[O]&&he>ne[O][1]-N[O]&&he<ne[O][1]+N[O]&&$>ne[O][2]-N[O]&&$<ne[O][2]+N[O]&&(z[V*4+3]=0)}return C.putImageData(U,l,o),this},e.displayBase(m),d!==!1&&e.styleTransforms(this,R),this.doDispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&(this.stage&&this.stage.frame?D=this.stage.frame:D=fe.zdf,D&&D.assets&&D.assets[this.id]&&delete D.assets[this.id],e.assets[this.id]&&delete e.assets[this.id]),this.parent&&this.parent.removeChild(this)}},e.Bitmap.fromData=function(t,r){var i=100,o=100,l=new Image;l.onload=function(){i=l.naturalWidth,o=l.naturalHeight,n(i)&&(i=l.width),n(o)&&(o=l.height);var f=new e.Bitmap(t,i,o);setTimeout(function(){r(f)},50)},l.src=t},e.extend(e.Bitmap,je.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),e.Bitmap.prototype.dispose=function(){return this.doDispose()},Qn(e.Bitmap.prototype),e.Sprite=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C){var E="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",X;if(X=mt(e.Sprite,arguments,E,this))return X;qe("50.8"),this.type="Sprite",this.group=D;var Z=A===!1?{}:e.getStyle(this.type,this.group,C),V=this,O;if(n(m)&&(m=Z.frame!=null?Z.frame:fe.zdf),t&&typeof t=="string"&&(t=m.asset(t)),n(R)&&!n(t)){n(r)&&(r=Z.cols!=null?Z.cols:1),n(i)&&(i=Z.rows!=null?Z.rows:1),n(o)&&(o=Z.count!=null?Z.count:r*i),n(l)&&(l=Z.offsetX!=null?Z.offsetX:0),n(f)&&(f=Z.offsetY!=null?Z.offsetY:0),n(d)&&(d=Z.spacingX!=null?Z.spacingX:0),n(p)&&(p=Z.spacingY!=null?Z.spacingY:0),n(_)&&(_=Z.width!=null?Z.width:t.width),n(P)&&(P=Z.height!=null?Z.height:t.height),t.bitmap&&(t=t.bitmap);var ne=(_-l+d)/r-d,N=(P-f+p)/i-p,q=[],U=0;e:for(var z=0;z<i;z++)for(var ie=0;ie<r;ie++){if(++U>o)break e;q.push([l+ie*(ne+d),f+z*(N+p),ne,N])}w(t,q,T)}else if(S)O=S,T=O.animations;else if(R){var m=V.stage?V.stage.frame:fe.zdf;typeof R=="string"&&(R=m.asset(R));var ae,he,$;if(R.frames&&!Array.isArray(R.frames)){ae=[];for(he in R.frames)$=R.frames[he].frame,ae.push([$.x,$.y,$.w,$.h]);R.frames=ae}if(R.frames&&!Array.isArray(R.frames[0])){for(ae=[],he=0;he<R.frames.length;he++){var $=R.frames[he].frame;ae.push([$.x,$.y,$.w,$.h])}R.frames=ae}if(!R.images&&R.meta&&R.meta.image&&(R.images=[R.meta.image]),q=R.frames,T=R.animations,!n(t))w(t,q,T);else{var G=R.images?R.images[0]:null;if(!G||!G.split)O=new je.SpriteSheet(R);else{var v=[];e.loop(R.images,function(F){var Ae=F.split("/").pop();m.asset(Ae)&&m.asset(Ae).type!="EmptyAsset"?v.push(m.asset(Ae)):m.asset(F)&&m.asset(F).type!="EmptyAsset"||m.asset(F).type!="EmptyAsset"?v.push(m.asset(F)):kt&&ht("Sprite() - please preload Sprite in Frame or with loadAssets")}),w(v,q,T)}}}else return;function w(x,F,Ae){Array.isArray(x)||(x=[x]),e.loop(x,function(K,ge){x[ge]=K.image});var Y={images:x,frames:F,animations:Ae||[]};O=new je.SpriteSheet(Y)}this.animations=T,this.cjsSprite_constructor(O,k),n(k)||this.stop(),n(b)&&(b=e.makeID()),this.id=b,n(L)&&(L=!0),V.globalControl=L;var h=0,I;this.parseFrames=function(x,F,Ae,Y){var K=[],ge=Number.MAX_VALUE,ye=0;if(n(x))n(F)&&(F=0),n(Ae)&&(Ae=V.totalFrames-1),se(F,Ae);else{if(n(V.animations)||n(V.animations[x]))return[];var ee=V.animations[x];ce(ee)}function ce(ke){Array.isArray(ke)?ve(ke):ke.constructor=={}.constructor?Re(ke):isNaN(ke)||K.push({f:Math.floor(ke),s:1})}function ve(ke){se(ke[0],ke[1],ke[3]),ke[2]&&!n(V.animations[ke[2]])&&ce(V.animations[ke[2]])}function Re(ke){if(!n(ke.frames)){n(ke.speed)&&(ke.speed=1);for(var pe=0;pe<ke.frames.length;pe++)ke.speed<ge&&(ge=ke.speed),ke.speed>ye&&(ye=ke.speed),K.push({f:ke.frames[pe],s:ke.speed});ke.next&&!n(V.animations[ke.next])&&ce(V.animations[ke.next])}}function se(ke,pe,Me){n(Me)&&(Me=1);var Ue;if(pe>ke)for(Ue=ke;Ue<=pe;Ue++)ue(Ue);else for(Ue=pe;Ue<=ke;Ue++)ue(ke-(Ue-pe));function ue(Ee){Me<ge&&(ge=Me),Me>ye&&(ye=Me),K.push({f:Ee,s:Me})}}if(Y)return K;ge=e.constrain(e.decimals(ge),.1),ye=e.constrain(e.decimals(ye),.1);for(var Oe=[],J=ge!=ye,xe,te=0;te<K.length;te++)if(xe=K[te],J)for(var we=0;we<e.constrain(Math.round(ge<1?xe.s/ge:xe.s),.1);we++)Oe.push(xe.f);else Oe.push(xe.f);return Oe},this.run=function(x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we,ke,pe,Me,Ue,ue,Ee,Te,_e,We,oe,Ye,Ve){var De="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur",de;if(de=mt(V.run,arguments,De))return de;var Be=g(),Qe;n(We)&&(We=1),n(oe)||(V.id=oe),n(Ye)||(V.globalControl=Ye);var Ke;if(Array.isArray(F)){var lt,gt;Qe=[],Ke=0;for(var He,it=0;it<F.length;it++){lt=F[it],lt.lookup=V.parseFrames(lt.label,lt.startFrame,lt.endFrame),it==0&&(He=lt.lookup[0]),delete lt.startFrame,delete lt.endFrame,lt.obj=e.merge(lt.obj,{normalizedFrame:lt.lookup.length-1}),lt.set=e.merge(lt.set,{normalizedFrames:{noPick:lt.lookup},normalizedFrame:0}),n(lt.wait)&&(lt.wait=Ke*We),gt=lt.label,delete lt.label,Qe.push(lt),Ke=0;var ft=n(lt.time)?x:lt.time;_e-Te>0&&(Ke=ft/(_e-Te)/2)}if(Qe.length==0)return this;Qe.length==1?(x=Qe[0].time,F=gt,Se()):V.gotoAndStop(He)}else Se();function Se(){I=V.parseFrames(F,Te,_e),h=0,V.gotoAndStop(I[h]),Te=_e=null,Qe={normalizedFrame:I.length-1}}n(x)&&(x=Be=="s"?1:1e3),V.running&&V.stopAnimate(V.id),V.running=!0,Array.isArray(Qe)||(Ke=0,_e-Te>0&&(Ke=x/Math.abs(_e-Te)/2),I&&I.length>0&&(Ke=x/I.length/2),!n(ee)&&n(ve)&&(ve=Ke*We),!n(te)&&n(we)&&(we=Ke*We));var Fe=function(){V.running=!1,V.stop(),Ae&&typeof Ae=="function"&&Ae(Y||V)};return e.animate({target:V,obj:Qe,time:x,ease:"linear",call:Fe,params:Y,wait:K,waitedCall:ge,waitedParams:ye,loop:ee,loopCount:ce,loopWait:ve,loopPick:xe,loopCall:Re,loopParams:se,loopWaitCall:Oe,loopWaitParams:J,rewind:te,rewindWait:we,rewindCall:ke,rewindParams:pe,rewindWaitCall:Me,rewindWaitParams:Ue,rewindTime:ue,rewindEase:Ee,override:!1,pauseOnBlur:Ve,id:V.id}),V.runPaused=!1,V.pauseAnimate(!1),V},this.runPaused=!0,this.pauseRun=function(x){return n(x)&&(x=!0),V.runPaused=x,V.globalControl?e.pauseAnimate(x,V.id):V.pauseAnimate(x,V.id),V},this.stopRun=function(){return V.runPaused=!0,V.running=!1,V.globalControl?e.stopAnimate(V.id):V.stopAnimate(V.id),V},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(x){x=Math.round(x),this.paused?this.gotoAndStop(x):this.gotoAndPlay(x)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return h},set:function(x){h=Math.round(x),this.gotoAndStop(I[h])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return I},set:function(x){I=x}}),Object.defineProperty(this,"totalFrames",{get:function(){return O.getNumFrames()},set:function(){ht("zim.Sprite - totalFrames is read only")}}),A!==!1&&e.styleTransforms(this,Z),this.clone=function(){var x=this.cloneProps(new e.Sprite(t,r,i,o,l,f,d,p,_,P,T,R,null,L,S,k,m,A,this.group,C));return V.frame>=0&&x.run({startFrame:V.frame,endFrame:V.frame}),x},je&&!je.stageTransformable&&m.retina&&(this.localToGlobal=function(x,F){return e.localToGlobal(x,F,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(x,F){return e.globalToLocal(x,F,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(x,F,Ae){return e.localToLocal(x,F,Ae,this)}),this.hasProp=function(x){return!n(this[x])||Object.prototype.hasOwnProperty.call(this,x)},e.displayBase(V);function Q(x,F,Ae,Y){var K=[];return n(x)?K=[x,F,Ae,Y]:n(F)?x.x?K=[x.x,x.y,x.width,x.height]:(K[0]=0,K[1]=0,K[2]=x,K[3]=x):n(Ae)?(K[0]=0,K[1]=0,K[2]=x,K[3]=F):(K[0]=x,K[1]=F,K[2]=Ae,K[3]=Y),n(K[3])&&(K[3]=K[2]),K}this.setBounds=function(x,F,Ae,Y){var K=Q(x,F,Ae,Y);return V.cjsSprite_setBounds(K[0],K[1],K[2],K[3]),V},this.getBounds=function(x){return x?V.boundsToGlobal(null,null,null,x):V.cjsSprite_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Sprite,je.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),Qn(e.Sprite.prototype),e.MovieClip=function(t,r,i,o,l,f,d){var p="mode, startPosition, loop, labels, style, group, inherit",_;if(_=mt(e.MovieClip,arguments,p,this))return _;qe("50.9"),this.type="MovieClip",this.group=f;var P=l===!1?{}:e.getStyle(this.type,this.group,d);n(t)&&(t=P.mode!=null?P.mode:null),n(r)&&(r=P.startPosition!=null?P.startPosition:null),n(i)&&(i=P.loop!=null?P.loop:null),n(o)&&(o=P.labels!=null?P.labels:null),this.cjsMovieClip_constructor(t,r,i,o),l!==!1&&e.styleTransforms(this,P),this.clone=function(){return this.cloneProps(new e.MovieClip(t,r,i,o,l,this.group,d))},this.hasProp=function(b){return!n(this[b])||Object.prototype.hasOwnProperty.call(this,b)};var T=fe.zdf||1;je&&!je.stageTransformable&&T.retina&&(this.localToGlobal=function(b,L){return e.localToGlobal(b,L,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(b,L){return e.globalToLocal(b,L,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(b,L,S){return e.localToLocal(b,L,S,this)}),e.displayBase(this);function R(b,L,S,k){var m=[];return n(b)?m=[b,L,S,k]:n(L)?b.x?m=[b.x,b.y,b.width,b.height]:(m[0]=0,m[1]=0,m[2]=b,m[3]=b):n(S)?(m[0]=0,m[1]=0,m[2]=b,m[3]=L):(m[0]=b,m[1]=L,m[2]=S,m[3]=k),n(m[3])&&(m[3]=m[2]),m}this.setBounds=function(b,L,S,k){var m=R(b,L,S,k);return that.cjsMovieClip_setBounds(m[0],m[1],m[2],m[3]),that},this.getBounds=function(b){return b?that.boundsToGlobal(null,null,null,b):that.cjsMovieClip_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.MovieClip,je.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),Qn(e.MovieClip.prototype),e.SVGContainer=function(t,r,i,o,l,f,d,p){var _="svg, splitTypes, geometric, showControls, interactive, style, group, inherit",P;if(P=mt(e.SVGContainer,arguments,_,this))return P;qe("50.95"),this.group=d;var T=f===!1?{}:e.getStyle("SVGContainer",this.group,p);t&&t.type=="Bitmap"&&(t=t.svg);var R=this,b=new e.Point(0,0),L;function S(){function Q(Re,se){return K(Re)||Y(Re,se)||F(Re,se)||x()}function x(){throw new TypeError("Invalid")}function F(Re,se){if(Re){if(typeof Re=="string")return Ae(Re,se);var Oe=Object.prototype.toString.call(Re).slice(8,-1);if(Oe==="Object"&&Re.constructor&&(Oe=Re.constructor.name),Oe==="Map"||Oe==="Set")return Array.from(Re);if(Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return Ae(Re,se)}}function Ae(Re,se){(se==null||se>Re.length)&&(se=Re.length);for(var Oe=0,J=new Array(se);Oe<se;Oe++)J[Oe]=Re[Oe];return J}function Y(Re,se){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Re)))){var Oe=[],J=!0,xe=!1,te=void 0;try{for(var we=Re[Symbol.iterator](),ke;!(J=(ke=we.next()).done)&&(Oe.push(ke.value),!(se&&Oe.length===se));J=!0);}catch(pe){xe=!0,te=pe}finally{try{!J&&we.return!=null&&we.return()}finally{if(xe)throw te}}return Oe}}function K(Re){if(Array.isArray(Re))return Re}var ge=Math.PI*2,ye=function(se,Oe,J,xe,te,we,ke){var pe=se.x,Me=se.y;pe*=Oe,Me*=J;var Ue=xe*pe-te*Me,ue=te*pe+xe*Me;return{x:Ue+we,y:ue+ke}},ee=function(se,Oe){var J=Oe===1.5707963267948966?.551915024494:Oe===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(Oe/4),xe=Math.cos(se),te=Math.sin(se),we=Math.cos(se+Oe),ke=Math.sin(se+Oe);return[{x:xe-te*J,y:te+xe*J},{x:we+ke*J,y:ke-we*J},{x:we,y:ke}]},ce=function(se,Oe,J,xe){var te=se*xe-Oe*J<0?-1:1,we=se*J+Oe*xe;return we>1&&(we=1),we<-1&&(we=-1),te*Math.acos(we)},ve=function(se,Oe,J,xe,te,we,ke,pe,Me,Ue,ue,Ee){var Te=Math.pow(te,2),_e=Math.pow(we,2),We=Math.pow(ue,2),oe=Math.pow(Ee,2),Ye=Te*_e-Te*oe-_e*We;Ye<0&&(Ye=0),Ye/=Te*oe+_e*We,Ye=Math.sqrt(Ye)*(ke===pe?-1:1);var Ve=Ye*te/we*Ee,De=Ye*-we/te*ue,de=Ue*Ve-Me*De+(se+J)/2,Be=Me*Ve+Ue*De+(Oe+xe)/2,Qe=(ue-Ve)/te,Ke=(Ee-De)/we,lt=(-ue-Ve)/te,gt=(-Ee-De)/we,He=ce(1,0,Qe,Ke),it=ce(Qe,Ke,lt,gt);return pe===0&&it>0&&(it-=ge),pe===1&&it<0&&(it+=ge),[de,Be,He,it]};return function(se){var Oe=se.px,J=se.py,xe=se.cx,te=se.cy,we=se.rx,ke=se.ry,pe=se.xAxisRotation,Me=pe===void 0?0:pe,Ue=se.largeArcFlag,ue=Ue===void 0?0:Ue,Ee=se.sweepFlag,Te=Ee===void 0?0:Ee,_e=[];if(we===0||ke===0)return[];var We=Math.sin(Me*ge/360),oe=Math.cos(Me*ge/360),Ye=oe*(Oe-xe)/2+We*(J-te)/2,Ve=-We*(Oe-xe)/2+oe*(J-te)/2;if(Ye===0&&Ve===0)return[];we=Math.abs(we),ke=Math.abs(ke);var De=Math.pow(Ye,2)/Math.pow(we,2)+Math.pow(Ve,2)/Math.pow(ke,2);De>1&&(we*=Math.sqrt(De),ke*=Math.sqrt(De));var de=ve(Oe,J,xe,te,we,ke,ue,Te,We,oe,Ye,Ve),Be=Q(de,4),Qe=Be[0],Ke=Be[1],lt=Be[2],gt=Be[3],He=Math.abs(gt)/(ge/4);Math.abs(1-He)<1e-7&&(He=1);var it=Math.max(Math.ceil(He),1);gt/=it;for(var ft=0;ft<it;ft++)_e.push(ee(lt,gt)),lt+=gt;return _e.map(function(Se){var Fe=ye(Se[0],we,ke,oe,We,Qe,Ke),me=Fe.x,$e=Fe.y,st=ye(Se[1],we,ke,oe,We,Qe,Ke),Je=st.x,rt=st.y,Ce=ye(Se[2],we,ke,oe,We,Qe,Ke),ze=Ce.x,Xe=Ce.y;return{x1:me,y1:$e,x2:Je,y2:rt,x:ze,y:Xe}})}}n(r)&&(r=!1),n(i)&&(i=!0);var k,m;function A(Q){e.loop(Q,function(x){var F=x.tagName.toLowerCase();if(F=="path"&&I(x),F=="circle"&&C("circle",x),F=="rect"&&C("rect",x),F=="ellipse"&&C("ellipse",x),F=="line"&&C("line",x),F=="polygon"&&C("polygon",x),F=="polyline"&&C("polyline",x),F=="g"){var Ae=x.getAttribute("style"),Y,K,ge,ye,ee;if(Ae){var ce=D(Ae);Y=ce[0],K=ce[1],ge=ce[2],ye=ce[3],ee=ce[4]}v=x.getAttribute("transform"),N=x.getAttribute("fill")?x.getAttribute("fill"):n(Y)?ne:Y,U=x.getAttribute("stroke")?x.getAttribute("stroke"):n(K)?q:K,ie=x.getAttribute("stroke-width")?x.getAttribute("stroke-width"):n(ge)?z:ge,he=x.getAttribute("fill-opacity")?x.getAttribute("fill-opacity"):n(ye)?ae:ye,G=x.getAttribute("stroke-opacity")?x.getAttribute("stroke-opacity"):n(ee)?$:ee}A(x.children),x.tagName.toLowerCase()=="g"&&(N=ne,U=q,ie=z,he=ae,G=$,v=null)})}function D(Q){var x=Q.split(";"),F,Ae,Y,K,ge;return e.loop(x,function(ye){ye=ye.replace(/,/g,"");var ee=ye.split(":"),ce=ee[0].trim().toLowerCase(),ve=ee[1].trim().toLowerCase().replace("px","");ce=="fill"&&(F=ve),ce=="stroke"&&(Ae=ve),ce=="stroke-width"&&(Y=ve),ce=="opacity"&&(K=ve,ge=ve),ce=="fill-opacity"&&(K=ve),ce=="stroke-opacity"&&(ge=ve)}),[F,Ae,Y,K,ge]}function C(Q,x){var F,Ae=h(x),Y=Ae[0],K=Ae[1],ge=Ae[2],ye=Ae[5],ee=Ae[6];if(Q=="circle"){var ce=Number(x.getAttribute("r").trim()),ve=ce*.5523;i?F=new e.Circle(Number(x.getAttribute("r")),Y,K,ge):F=new e.Blob(Y,K,ge,4,ce,ve,"mirror",null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(Q=="rect")if(i)F=new e.Rectangle(Number(x.getAttribute("width")),Number(x.getAttribute("height")),Y,K,ge,Number(x.getAttribute("rx")));else{var Re=Number(x.getAttribute("width")),se=Number(x.getAttribute("height")),Oe=Number(x.getAttribute("rx")),J=Number(x.getAttribute("ry"));if(Oe&&J){var xe=Oe*.5523,te=J*.5523;F=new e.Blob(Y,K,ge,[[Oe,0,0,0,-xe,0,0,0,"free"],[Re-Oe,0,0,0,0,0,xe,0,"free"],[Re,J,0,0,0,-te,0,0,"free"],[Re,se-J,0,0,0,0,0,te,"free"],[Re-Oe,se,0,0,xe,0,0,0,"free"],[Oe,se,0,0,0,0,-xe,0,"free"],[0,se-J,0,0,0,te,0,0,"free"],[0,J,0,0,0,0,0,-te,"free"]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else F=new e.Blob(Y,K,ge,[[0,0],[Re,0],[Re,se],[0,se]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(Q=="line")F=new e.Squiggle(K,ge,[[Number(x.getAttribute("x1")),Number(x.getAttribute("y1"))],[Number(x.getAttribute("x2")),Number(x.getAttribute("y2"))]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l);else if(Q=="polygon"||Q=="polyline"){var we=x.getAttribute("points");we=we.replace(/-/g," -"),we=we.replace(/\s+/g," ");var ke=[];if(we.indexOf(",")!=-1)e.loop(we.split(" "),function(Ue){var ue=Ue.split(",");ke.push([Number(ue[0].trim()),Number(ue[1].trim())])});else{var pe;e.loop(we.split(" "),function(Ue,ue){(ue+1)%2==0&&ke.push([pe,Ue.trim()]),pe=Ue.trim()})}Q=="polygon"?F=new Blob(Y,K,ge,ke):F=new e.Squiggle(K,ge,ke,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else Q=="ellipse"&&(F=new e.Blob(Y,K,ge,X(0,0,Number(x.getAttribute("rx")),Number(x.getAttribute("ry"))),null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l));F.loc(ye,ee,R);var Me=x.getAttribute("transform");(Me||v)&&E(F,Me||v),l&&(F.type=="Rectangle"||F.type=="Circle")&&F.transform({showReg:!1,visible:o})}function E(Q,x){var F=x.split(")");e.loop(F,function(Ae){if(Ae!=""){var Y=Ae.trim().split("("),K=Y[0].trim().toLowerCase(),ge=Y[1].trim().toLowerCase().replace("px","").replace("deg","");if(K=="translate"){var ye=ge.split(",");Q.mov(Number(ye[0].trim()),ye[1]?Number(ye[1].trim()):0)}if(K=="scale"){var ee=ge.split(",");Q.type=="Blob"||Q.type=="Squiggle"?ee.length==1?Q.transformPoints("scale",Number(ee[0].trim())):ee.length==2&&(Q.transformPoints("scaleX",Number(ee[0].trim())),Q.transformPoints("scaleY",Number(ee[1].trim()))):ee.length==1?Q.sca(Number(ee[0].trim())):ee.length==2&&Q.sca(Number(ee[0].trim()),Number(ee[1].trim()))}if(K=="rotate"){var ce=ge.split(",");ce.length==1?ce.push(0,0):ce.length==2&&ce.push(0),Q.rot(Number(ce[0].trim()),Number(ce[1].trim()),Number(ce[2].trim()))}K=="skewX"&&(Q.skewX=ge),K=="skewY"&&(Q.skewY=ge)}})}function X(Q,x,F,Ae){var Y=.5522848,K=F*Y,ge=Ae*Y,ye=Q+F,ee=x+Ae,ce=[[Q-F,x,0,0,Q,ee+ge-Ae,Q,x-ge,"mirror"],[Q,x-Ae,0,0,Q-K,x,ye+K-F,x,"mirror"],[ye,x,0,0,Q,x-ge,Q+K-K,ee+ge-Ae,"mirror"],[Q,ee,0,0,ye-F+K,x,Q-K,x,"mirror"]];return ce}if(!n(t)){if(t.replace&&(t=t.replace(/style\s?=[^"]*"[^"]*"/ig,"")),n(t.draggable))t.getAttribute||(k=new DOMParser,t=k.parseFromString(t,"image/svg+xml").documentElement),m=this.svg=t;else{k=new DOMParser,t=t.innerHTML?k.parseFromString(t.innerHTML,"text/xml"):t;var Z=t.getElementsByTagName("svg");m=this.svg=Z?t.getElementsByTagName("svg")[0]:null}var V,O;if(n(m)||(V=m.getAttribute("width"),O=m.getAttribute("height")),V&&(V=Number(V.trim())),O&&(O=Number(O.trim())),this.zimContainer_constructor(V,O),this.type="SVGContainer",n(m))return;var ne=e.black,N=e.black,q=e.black,U=e.black,z=2,ie=2,ae=1,he=1,$=1,G=1,v,w=t.getElementsByTagName("svg");w.length==0&&(w=[t]),A(w)}function h(Q){var x,F,Ae,Y,K,ge=Q.getAttribute("style");if(ge){var ye=D(ge);x=ye[0],F=ye[1],Ae=ye[2],Y=ye[3],K=ye[4]}x=Q.getAttribute("fill")?Q.getAttribute("fill"):n(x)?N:x,F=Q.getAttribute("stroke")?Q.getAttribute("stroke"):n(F)?U:F,Ae=Q.getAttribute("stroke-width")?Q.getAttribute("stroke-width"):n(Ae)?ie:Ae,Y=Q.getAttribute("fill-opacity")?Q.getAttribute("fill-opacity"):n(Y)?he:Y,K=Q.getAttribute("stroke-opacity")?Q.getAttribute("stroke-opacity"):n(K)?G:K;var ee=Q.getAttribute("x")?Q.getAttribute("x"):0;ee=Q.getAttribute("cx")?Q.getAttribute("cx"):ee;var ce=Q.getAttribute("y")?Q.getAttribute("y"):0;return ce=Q.getAttribute("cy")?Q.getAttribute("cy"):ce,!n(Y)&&!n(x)&&(x=e.convertColor(x,"rgba",Number(Y))),!n(K)&&!n(F)&&(F=e.convertColor(F,"rgba",Number(K))),[x,F,Number(Ae),Number(Y),Number(K),Number(ee),Number(ce)]}function I(Q,x){n(x)&&(x=!0);var F=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],Ae=["m","l","h","v","c","s","q","t","a","z"],Y=new e.Point(0,0),K;if(n(Q.getAttribute)?K=Q:K=Q.getAttribute("d"),K=K.replace(/,/g," "),K=K.replace(/([a-zA-Z])/g," $1 "),K=K.replace(/-/g," -"),K=K.replace(/\s+/g," "),K=K.replace(/\.(\d*)\./g,".$1 ."),x)var ge=h(Q),ye=ge[0],ee=ge[1],ce=ge[2];var ve,Re,se=[],Oe=[0,0],J=new e.Point(0,0),xe=new e.Point(0,0,0,0),te=new e.Point(0,0,0,0,0,0),we=new e.Point(0,0,0,0,0,0,0),ke=K.split(" "),pe=ke.slice(1,ke.length),Me=[],Ue=!1,ue,Ee,Te=!1,_e,We="squiggle",oe=null;e.loop(pe,function(Ve,De){if(De==0&&(b.x=0,b.y=0,Oe=[0,0],ue="",Ee=""),F.indexOf(Ve)==-1){_e=="lxo"&&(_e="lx",Me.push("l"),Ue=!0),_e=="lyo"&&(_e="ly",Ue=!0),_e=="Lxo"&&(_e="Lx",Me.push("L"),Ue=!0),_e=="Lyo"&&(_e="Ly",Ue=!0),Re=Number(Ve),Re=Math.round(Re*100)/100,_e=="X"?(b.x=Re,_e="Y"):_e=="Y"?(b.y=Re,_e="Lxo",se.push([b.x,b.y])):_e=="x"?(b.x=b.x+Re,_e="y"):_e=="y"&&(b.y=b.y+Re,_e="lxo",se.push([b.x,b.y])),_e=="H"||_e=="h"?(Y.x=se[se.length-1][0],Y.y=se[se.length-1][1],Y.x=Y.x+(_e=="h"?Re:Re-b.x),se.push([Y.x,Y.y]),_e="Lx"):(_e=="V"||_e=="v")&&(Y.x=se[se.length-1][0],Y.y=se[se.length-1][1],Y.y=Y.y+(_e=="v"?Re:Re-b.y),se.push([Y.x,Y.y]),_e="lx"),_e=="Lx"?(J.x=Re,_e="Ly"):_e=="Ly"?(J.y=Re,Y.x=J.x,Y.y=J.y,se.push([Y.x,Y.y]),_e="Lx"):_e=="lx"?(Me.length>0&&(Y.x!=0&&Y.y!=0?(b.x=Y.x,b.y=Y.y):(b.x=Y.x+b.x,b.y=Y.y+b.y)),J.x=b.x+Re,Ue?_e="lyo":_e="ly"):_e=="ly"&&(J.y=b.y+Re,Y.x=J.x,Y.y=J.y,se.push([Y.x,Y.y]),_e="lx");var de;if(_e=="qx"||_e=="Qx"?(se.length>0?(b.x=se[se.length-1][0],b.y=se[se.length-1][1]):(b.x=0,b.y=0),xe.x=_e=="qx"?b.x+Re:Re,_e=_e=="qx"?"qy":"Qy"):_e=="qy"||_e=="Qy"?(xe.y=_e=="qy"?b.y+Re:Re,_e=_e=="qy"?"qz":"Qz",Te&&(Te=!1,de=se[se.length-1],de[6]=-de[4],de[7]=-de[5],de[8]="mirror",Y.x=xe.x,Y.y=xe.y,se[se.length]=[Y.x,Y.y,0,0,-de[6],de[7],0,0,"free"],_e=_e=="qy"?"qx":"Qx")):_e=="qz"||_e=="Qz"?(xe.z=_e=="qz"?b.x+Re:Re,_e=_e=="qz"?"qq":"Qq"):(_e=="qq"||_e=="Qq")&&(xe.w=_e=="qq"?b.y+Re:Re,de=se[se.length-1],Y.x=de[0],Y.y=de[1],se.length==1?(de[2]=0,de[3]=0,de[4]=0,de[5]=0,de[6]=2/3*(xe.x-Y.x),de[7]=2/3*(xe.y-Y.y),de[8]="free"):se[se.length]=[Y.x,Y.y,0,0,0,0,2/3*(xe.x-Y.x),2/3*(xe.y-Y.y),"free"],Y.x=xe.z,Y.y=xe.w,se[se.length]=[Y.x,Y.y,0,0,2/3*(xe.x-Y.x),2/3*(xe.y-Y.y),0,0,"free"],_e=_e=="qq"?"qx":"Qx"),_e=="cx"||_e=="Cx")se.length>0?(b.x=se[se.length-1][0],b.y=se[se.length-1][1]):(b.x=0,b.y=0),te.x=_e=="cx"?b.x+Re:Re,_e=_e=="cx"?"cy":"Cy";else if(_e=="cy"||_e=="Cy")te.y=_e=="cy"?b.y+Re:Re,_e=_e=="cy"?"cz":"Cz";else if(_e=="cz"||_e=="Cz")te.z=_e=="cz"?b.x+Re:Re,_e=_e=="cz"?"cq":"Cq";else if(_e=="cq"||_e=="Cq")te.q=_e=="cq"?b.y+Re:Re,_e=_e=="cq"?"cr":"Cr",Te&&(ue=="s"?Ee="s":Ee="S",de=se[se.length-1],de[2]=0,de[3]=0,n(de[4])&&(de[4]=0),n(de[5])&&(de[5]=0),de[6]=-de[4],de[7]=-de[5],de[8]="mirror",Y.x=te.z,Y.y=te.q,se[se.length]=[Y.x,Y.y,0,0,te.x-Y.x,te.y-Y.y,0,0,"free"],_e=_e=="cr"?"cx":"Cx");else if(_e=="cr"||_e=="Cr")te.r=_e=="cr"?b.x+Re:Re,_e=_e=="cr"?"cs":"Cs";else if(_e=="cs"||_e=="Cs")te.s=_e=="cs"?b.y+Re:Re,de=se[se.length-1],se.length==1&&(de[2]=0,de[3]=0,de[4]=0,de[5]=0),de[6]=te.x-de[0],de[7]=te.y-de[1],de[8]="free",Y.x=te.r,Y.y=te.s,se[se.length]=[Y.x,Y.y,0,0,te.z-Y.x,te.q-Y.y,0,0,"free"],_e=_e=="cs"?"cx":"Cx";else if(_e=="ax"||_e=="Ax")se.length>0?(b.x=se[se.length-1][0],b.y=se[se.length-1][1]):(b.x=0,b.y=0),we.x=Re,_e=_e=="ax"?"ay":"Ay";else if(_e=="ay"||_e=="Ay")we.y=Re,_e=_e=="ay"?"az":"Az";else if(_e=="az"||_e=="Az")we.z=Re,_e=_e=="az"?"aq":"Aq";else if(_e=="aq"||_e=="Aq")we.q=Re,_e=_e=="aq"?"ar":"Ar";else if(_e=="ar"||_e=="Ar")we.r=Re,_e=_e=="ar"?"as":"As";else if(_e=="as"||_e=="As")we.s=_e=="as"?b.x+Re:Re,_e=_e=="as"?"at":"At";else if(_e=="at"||_e=="At"){we.t=_e=="at"?b.y+Re:Re,L||(L=S());var Be=L({px:b.x,py:b.y,cx:we.s,cy:we.t,rx:we.x,ry:we.y,xAxisRotation:we.z,largeArcFlag:we.q,sweepFlag:we.r});e.loop(Be,function(Qe,Ke){de=se[se.length-1],se.length==1&&(de[2]=0,de[3]=0,de[4]=0,de[5]=0),Ke==0&&se.length==1?(de[6]=Qe.x1-Y.x-b.x,de[7]=Qe.y1-Y.y-b.y):(de[6]=Qe.x1-Y.x,de[7]=Qe.y1-Y.y),de[8]="free",Y.x=Qe.x,Y.y=Qe.y,se[se.length]=[Y.x,Y.y,0,0,Qe.x2-Y.x,Qe.y2-Y.y,0,0,"free"]}),_e=_e=="at"?"ax":"Ax"}}else Me.push(Ve),Ve!="s"&&(Te=!1),Me.length>1&&(Ve=="M"||Ve=="m")&&(Ye(Me),Ve=="M"?(b.x=0,b.y=0):(b.x=se[se.length-1][0],b.y=se[se.length-1][1]),se=[],Me=[],Me.push(Ve)),Ve=="M"?_e="X":Ve=="m"?_e="x":Ve=="L"?(_e="Lx",r&&oe&&oe!="l"&&Ye(Me),oe="l"):Ve=="l"?(_e="lx",r&&oe&&oe!="l"&&Ye(Me),oe="l"):Ve=="H"?(_e="H",r&&oe&&oe!="l"&&Ye(Me),oe="l"):Ve=="h"?(_e="h",r&&oe&&oe!="l"&&Ye(Me),oe="l"):Ve=="V"?(_e="V",r&&oe&&oe!="l"&&Ye(Me),oe="l"):Ve=="v"?(_e="v",r&&oe&&oe!="l"&&Ye(Me),oe="l"):Ve=="C"?(_e="Cx",r&&oe&&oe!="c"&&Ye(Me),oe="c"):Ve=="c"?(_e="cx",r&&oe&&oe!="c"&&Ye(Me),oe="c"):Ve=="S"?(Te=!0,_e="Cx",r&&oe&&oe!="c"&&Ye(Me),oe="c"):Ve=="s"?(Te=!0,_e="cx",r&&oe&&oe!="c"&&Ye(Me),oe="c"):Ve=="Q"?(_e="Qx",r&&oe&&oe!="q"&&Ye(Me),oe="q"):Ve=="q"?(_e="qx",r&&oe&&oe!="q"&&Ye(Me),oe="q"):Ve=="T"?(Te=!0,_e="Qx",r&&oe&&oe!="q"&&Ye(Me),oe="q"):Ve=="t"?(Te=!0,_e="qx",r&&oe&&oe!="q"&&Ye(Me),oe="q"):Ve=="A"?(_e="Ax",r&&oe&&oe!="a"&&Ye(),oe="a"):Ve=="a"?(_e="ax",r&&oe&&oe!="a"&&Ye(),oe="a"):(Ve=="z"||Ve=="Z")&&(We="blob")});function Ye(){ue=Me[Me.length-1],se.length>=2&&(ue=="z"||ue=="Z")&&(We="blob"),We=="squiggle"?ve=new e.Squiggle(ee,ce,se,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l):ve=new e.Blob(ye,ee,ce,se,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l),ve.loc(0,0,R),ue=Me[Me.length-1],Ee=Me[Me.length-2],Ae.indexOf(ue)>=0?(Oe[0]=se[se.length-1][0],Oe[1]=se[se.length-1][1],b.x=se[se.length-1][0],b.y=se[se.length-1][1],se=[],se.push([Oe[0],Oe[1]])):(Oe=[0,0],se=[[0,0]]),Me=[],ue!="z"&&ue!="Z"&&Me.push(ue),Y.x=0,Y.y=0;var Ve=Q.getAttribute("transform");(Ve||v)&&E(ve,Ve||v)}return x&&Ye(),se}R.processPath=function(Q){return I(Q,!1)},f!==!1&&e.styleTransforms(this,T),this.clone=function(){return R.cloneProps(new e.SVGContainer(t,r,i,o,l,f,this.group,p))}},e.extend(e.SVGContainer,e.Container,"clone","zimContainer",!1),e.CustomShape=function(t,r,i,o){e.zimCustomShapeCheck||(qe("50.97"),e.zimCustomShapeCheck=!0),this.zimContainer_constructor(t,r,i,o,!1);var l=this;this.mouseChildren=!1,l._dashedOffset=5,Object.defineProperty(l,"color",{get:function(){return l._color},set:function(f){n(f)&&(f="black"),l._color=f,f&&f.type?l.specialColor(l.colorCommand,f,l):l.colorCommand.style=f}}),this.setColorRange=function(f,d){return n(d)?(l.startColor=l.color,l.endColor=f):n(f)?(l.startColor=l.color,l.endColor=d):(l.startColor=f,l.endColor=d),l},l._colorRange=0,Object.defineProperty(l,"colorRange",{get:function(){return l._colorRange},set:function(f){l._colorRange=f,!n(l.startColor)&&!n(l.endColor)&&(l.color=e.colorRange(l.startColor,l.endColor,f))}}),Object.defineProperty(l,"borderColor",{get:function(){return l._borderColor},set:function(f){l._borderColor=f,f&&!l.borderWidth&&(l.borderWidth=1),l.borderColorCommand?f&&f.type?l.specialColor(l.borderColorCommand,f,l):l.borderColorCommand.style=f:l.drawShape()}}),Object.defineProperty(l,"borderWidth",{get:function(){return l._borderWidth},set:function(f){f>0||(f=0),l._borderWidth=f,!l.borderWidthCommand||l._borderWidth==0?(l.borderWidthCommand=null,l.drawShape()):(l.borderWidthCommand.width=l._borderWidth,l._dashed&&(l.borderDashedCommand.segments=l._dashed,l.borderDashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"thickness",{get:function(){return l._thickness},set:function(f){f>0||(f=0),l._thickness=f,!l.thicknessCommand||l._thickness==0?l.drawShape():(l.thicknessCommand.width=l._thickness,l._dashed&&(l.dashedCommand.segments=l._dashed,l.dashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"dashed",{get:function(){return l._dashed},set:function(f){l._dashed=f,f&&!Array.isArray(l._dashed)&&(l.dashed=[10,10]);var d;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;d=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;d=l.borderDashedCommand}d?l._dashed?(d.segments=l._dashed,d.offset=l._dashedOffset):(d.segments=null,d.offset=null):l.drawShape()}}),Object.defineProperty(l,"dashedOffset",{get:function(){return l._dashedOffset},set:function(f){isNaN(f)&&(f=5),l._dashedOffset=f;var d;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;d=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;d=l.borderDashedCommand}d?l._dashed?(d.segments=l._dashed,d.offset=l._dashedOffset):(d.segments=null,d.offset=null):l.drawShape()}}),Object.defineProperty(l,"corner",{get:function(){return l._corner},set:function(f){l._corner=f,l.drawShape()}}),this.linearGradient=function(f,d,p,_,P,T){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(f,d,p,_,P,T),this},this.radialGradient=function(f,d,p,_,P,T,R,b){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(f,d,p,_,P,T,R,b),this},this.cloneAll=function(f,d,p,_){var P=this.getBounds();n(P)&&(P={x:null,y:null,width:null,height:null});var T=this.cloneChildren(this.cloneProps(new e.Container(P.x,P.y,P.width,P.height,d,p,_)),f);return T.mouseChildren=!1,T.type=this.type,T}},e.extend(e.CustomShape,e.Container,null,"zimContainer",!1),e.Circle=function(t,r,i,o,l,f,d,p,_,P,T){var R="radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",b;if(b=mt(e.Circle,arguments,R,this))return b;qe("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=P;var L=_===!1?{}:e.getStyle(this.type,this.group,T);n(t)&&(t=L.radius!=null?L.radius:50),n(l)&&(l=L.dashed!=null?L.dashed:!1),n(i)&&(i=L.borderColor!=null?L.borderColor:null),n(o)&&(o=L.borderWidth!=null?L.borderWidth:null),i<0||o<0?i=o=null:i!=null&&o==null&&(o=1),n(r)&&(r=L.color!=null?L.color:o>0?"rgba(0,0,0,0)":e.black),n(f)&&(f=L.percent!=null?L.percent:100),n(d)&&(d=L.percentClose!=null?L.percentClose:!0),n(p)&&(p=L.strokeObj!=null?L.strokeObj:{});var S=k(t,r,i,o,f);this.veeObj={radius:S[0],color:S[1],borderColor:S[2],borderWidth:S[3],percent:S[4]};function k(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),f=e.Pick.choose(f);var m=this;m._radius=t,m._color=r,m._borderColor=i,m._borderWidth=o,m._dashed=l,m._dashed&&!Array.isArray(m._dashed)&&(m._dashed=[10,10]);var A=this.shape=new je.Shape;this.addChild(A);var D=A.graphics;m.drawShape=function(){D.c(),m.colorCommand=D.f(m._color).command,m._color&&m._color.type&&m.specialColor(m.colorCommand,m._color,m),(n(m._borderWidth)||m._borderWidth>0)&&(!n(m._borderColor)||!n(m._borderWidth))&&(n(m._borderColor)&&(m._borderColor=e.black),m.borderColorCommand=D.s(m._borderColor).command,m._borderColor&&m._borderColor.type&&m.specialColor(m.borderColorCommand,m._borderColor,m),m.borderWidthCommand=D.ss(m._borderWidth,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,m._dashed&&(m.borderDashedCommand=D.sd(Array.isArray(m._dashed)?m._dashed:[10,10],m._dashedOffset).command));var C=m._radius*2;if(typeof f=="number"&&f>=0&&f<100){var E=360*f/100/2;D.arc(0,0,m._radius,(-E-90)*Math.PI/180,(E-90)*Math.PI/180,!1),d&&D.cp(),C=m._radius-Math.cos(E*Math.PI/180)*m._radius}else D.dc(0,0,m._radius);m.setBounds(-m._radius,-m._radius,m._radius*2,C)},m.drawShape(),r.type&&(m.color=r),Object.defineProperty(m,"radius",{get:function(){return m._radius},set:function(C){m._radius=C,m.drawShape()}}),Object.defineProperty(m,"percentage",{get:function(){return f},set:function(C){f=C,m.drawShape()}}),Object.defineProperty(m,"percentClose",{get:function(){return d},set:function(C){d=C,m.drawShape()}}),_!==!1&&e.styleTransforms(this,L),this.clone=function(C){var E=m.cloneProps(new e.Circle(C||!e.isPick(S[0])?m.radius:S[0],C||!e.isPick(S[1])?m.color:S[1],C||!e.isPick(S[2])?m.borderColor:S[2],C||!e.isPick(S[3])?m.borderWidth:S[3],m.dashed,C||!e.isPick(S[4])?f:S[4],d,p,_,this.group,T));return m.linearGradientParams&&E.linearGradient.apply(E,m.linearGradientParams),m.radialGradientParams&&E.radialGradient.apply(E,m.radialGradientParams),E}},e.extend(e.Circle,e.CustomShape,"clone","zimCustomShape",!1),e.Rectangle=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",L;if(L=mt(e.Rectangle,arguments,b,this))return L;qe("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=T;var S=P===!1?T!=null?e.getStyle(null,null,R,this.group):{}:e.getStyle(this.type,this.group,R);n(t)&&(t=S.width!=null?S.width:null),n(r)&&(r=S.height!=null?S.height:n(t)?100:t),n(t)&&(t=r),n(f)&&(f=S.corner!=null?S.corner:0),n(d)&&(d=S.dashed!=null?S.dashed:!1),n(o)&&(o=S.borderColor!=null?S.borderColor:null),n(l)&&(l=S.borderWidth!=null?S.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=S.color!=null?S.color:l>0?"rgba(0,0,0,0)":e.black),n(p)&&(p=S.strokeObj!=null?S.strokeObj:{}),n(_)&&(_=S.scaleDimensions!=null?S.scaleDimensions:!0);var k=m(t,r,i,o,l);this.veeObj={width:k[0],height:k[1],color:k[2],borderColor:k[3],borderWidth:k[4]};function m(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l);var A=this;A._color=i,A._borderColor=o,A._borderWidth=l,A._dashed=d,A._dashed&&!Array.isArray(A._dashed)&&(A._dashed=[10,10]),A._corner=f,A.scaleDimensions=_,A.setWidth=function(E){t=E},A.setHeight=function(E){r=E};var D=this.shape=new je.Shape;this.addChild(D);var C=D.graphics;A.drawShape=function(){if(C.c(),A.colorCommand=C.f(A._color).command,i&&i.type&&A.specialColor(A.colorCommand,i,A),(n(A._borderWidth)||A._borderWidth>0)&&(!n(A._borderColor)||!n(A._borderWidth))&&(n(A._borderColor)&&(A._borderColor=e.black),A.borderColorCommand=C.s(A._borderColor).command,A._borderColor&&A._borderColor.type&&A.specialColor(A.borderColorCommand,A._borderColor,A),A.borderWidthCommand=C.ss(A._borderWidth,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,A._dashed&&(A.borderDashedCommand=C.sd(Array.isArray(A._dashed)?A._dashed:[10,10],A._dashedOffset).command)),Array.isArray(A._corner)){var E=A._corner;Array.isArray(E)&&E.length==2&&(E=[E,E,E,E]);for(var X=[],Z=!1,V=0;V<E.length;V++)Array.isArray(E[V])?(Z=!0,X.push(E[V])):X.push([E[V],E[V]]);E=X,Z?C.mt(0,E[0][1]).curveTo(0,0,E[0][0],0).lt(t-E[1][0],0).curveTo(t,0,t,E[1][1]).lt(t,r-E[2][1]).curveTo(t,r,t-E[2][0],r).lt(E[3][0],r).curveTo(0,r,0,r-E[3][1]).cp():C.rc(0,0,t,r,A._corner[0],A._corner[1],A._corner[2],A._corner[3])}else A._corner>0?C.rr(0,0,t,r,A._corner):C.r(0,0,t,r);A.setBounds(0,0,t,r),i.type&&(A.color=i)},A.drawShape(),(P!==!1||T!=null)&&e.styleTransforms(this,S),this.clone=function(E,X){var Z=n(X)?P:X,V=A.cloneProps(new e.Rectangle(E||!e.isPick(k[0])?t:k[0],E||!e.isPick(k[1])?r:k[1],E||!e.isPick(k[2])?A.color:k[2],E||!e.isPick(k[3])?A.borderColor:k[3],E||!e.isPick(k[4])?A.borderWidth:k[4],f,A._dashed,p,A.scaleDimensions,Z,this.group,R));return V}},e.extend(e.Rectangle,e.CustomShape,"clone","zimCustomShape",!1),e.Triangle=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L){var S="a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",k;if(k=mt(e.Triangle,arguments,S,this))return k;qe("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=b;var m=R===!1?{}:e.getStyle(this.type,this.group,L);n(t)&&(t=m.a!=null?m.a:100),n(r)&&(r=m.b!=null?m.b:t),n(i)&&(i=m.c!=null?m.c:t),r==-1&&(r=Math.sqrt(Math.pow(t,2)+Math.pow(i,2))),i==-1&&(i=Math.sqrt(Math.pow(t,2)+Math.pow(r,2))),n(d)&&(d=m.corner!=null?m.corner:0),n(p)&&(p=m.center!=null?m.center:!0),n(_)&&(_=m.adjust!=null?m.adjust:0),n(l)&&(l=m.borderColor!=null?m.borderColor:null),n(f)&&(f=m.borderWidth!=null?m.borderWidth:null),l<0||f<0?l=f=null:l!=null&&f==null&&(f=1),n(o)&&(o=m.color!=null?m.color:f>0?"rgba(0,0,0,0)":e.black),n(_)&&(_=m.adjust!=null?m.adjust:0),n(T)&&(T=m.strokeObj!=null?m.strokeObj:{});var A=D(t,r,i,o,l,f);this.veeObj={a:A[0],b:A[1],c:A[2],color:A[3],borderColor:A[4],borderWidth:A[5]};function D(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),this.a=t,this.b=r,this.c=i,o=e.Pick.choose(o),l=e.Pick.choose(l),f=e.Pick.choose(f);var C=this;C._color=o,C._borderColor=l,C._borderWidth=f,C._dashed=P,C._dashed&&!Array.isArray(C._dashed)&&(C._dashed=[10,10]),C._corner=d;var E=[t,r,i];E.sort(function(q,U){return U-q});var X=E[0],Z=E[1],V=E[2],O=[E.indexOf(t),E.indexOf(r),E.indexOf(i)];if(X>Z+V){ht("zim display - Triangle(): invalid triangle lengths");return}var ne=this.shape=new je.Shape;this.adjusted=_,this.addChild(ne);var N=ne.graphics;C.drawShape=function(){var q=[];Array.isArray(C._corner)?q=C._corner:q.push(C._corner,C._corner,C._corner);for(var U=0;U<3;U++)(q[U]<0||typeof q[U]!="number")&&(q[U]=0);N.c(),C.colorCommand=N.f(C._color).command,C._color&&C._color.type&&C.specialColor(C.colorCommand,C._color,C),(n(C._borderWidth)||C._borderWidth>0)&&(!n(C._borderColor)||!n(C._borderWidth))&&(n(C._borderColor)&&(C._borderColor=e.black),C.borderColorCommand=N.s(C._borderColor).command,C._borderColor&&C._borderColor.type&&C.specialColor(C.borderColorCommand,C._borderColor,C),C.borderWidthCommand=N.ss(C._borderWidth,T.caps,T.joints,T.miterLimit,T.ignoreScale).command,C._dashed&&(C.borderDashedCommand=N.sd(Array.isArray(C._dashed)?C._dashed:[10,10],C._dashedOffset).command)),C.one={x:0,y:0},C.two={x:t,y:0};var z=Math.acos((Math.pow(Z,2)+Math.pow(V,2)-Math.pow(X,2))/(2*Z*V))*180/Math.PI,ie=Math.asin(Z*Math.sin(z*Math.PI/180)/X)*180/Math.PI,ae=180-z-ie,he=[z,ie,ae];C.angles=[he[O[1]],he[O[2]],he[O[0]]];var $=C.angles[1],G=Math.cos($*Math.PI/180)*r,v=Math.sin($*Math.PI/180)*r,w=Math.max(t,t-G),h=v;C.setBounds(0,_,w,h),ne.y=h,C.three={x:t-G,y:0-v};var I=t*q[0]/(q[0]+q[1]||1);N.mt(I,0).at(t,0,t-G,0-v,q[1]).at(t-G,0-v,0,0,q[2]).at(0,0,t,0,q[0]).lt(I,0),N.cp(),p&&(C.regX=w/2,C.regY=h/2),_&&(C.shape.y+=_)},C.drawShape(),o.type&&(C.color=o),R!==!1&&e.styleTransforms(this,m),this.clone=function(q,U){var z=n(U)?R:U,ie=C.cloneProps(new e.Triangle(q||!e.isPick(A[0])?t:A[0],q||!e.isPick(A[1])?r:A[1],q||!e.isPick(A[2])?i:A[2],q||!e.isPick(A[3])?C.color:A[3],q||!e.isPick(A[4])?C.borderColor:A[4],q||!e.isPick(A[5])?C.borderWidth:A[5],d,p,_,P,T,z,this.group,L));return C.linearGradientParams&&ie.linearGradient.apply(ie,C.linearGradientParams),C.radialGradientParams&&ie.radialGradient.apply(ie,C.radialGradientParams),ie}},e.extend(e.Triangle,e.CustomShape,"clone","zimCustomShape"),e.Poly=function(t,r,i,o,l,f,d,p,_,P,T){var R="radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",b;if(b=mt(e.Poly,arguments,R,this))return b;qe("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=P;var L=_===!1?{}:e.getStyle(this.type,this.group,T);n(t)&&(t=L.radius!=null?L.radius:50),n(r)&&(r=L.sides!=null?L.sides:5),n(i)&&(i=L.pointSize!=null?L.pointSize:0),n(d)&&(d=L.dashed!=null?L.dashed:!1),n(l)&&(l=L.borderColor!=null?L.borderColor:null),n(f)&&(f=L.borderWidth!=null?L.borderWidth:null),l<0||f<0?l=f=null:l!=null&&f==null&&(f=1),n(o)&&(o=L.color!=null?L.color:f>0?"rgba(0,0,0,0)":e.black),n(p)&&(p=L.strokeObj!=null?L.strokeObj:{});var S=k(t,r,i,o,l,f);this.veeObj={radius:S[0],sides:S[1],pointSize:S[2],color:S[3],borderColor:S[4],borderWidth:S[5]};function k(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l),f=e.Pick.choose(f);var m=this;m._radius=t,m._color=o,m._sides=r,m._pointSize=i,m._borderColor=l,m._borderWidth=f,m._dashed=d,m._dashed&&!Array.isArray(m._dashed)&&(m._dashed=[10,10]);var A=this.shape=new je.Shape;this.addChild(A),A.rotation=-90;var D=A.graphics;m.drawShape=function(){D.c(),m.colorCommand=D.f(m._color).command,m._color&&m._color.type&&m.specialColor(m.colorCommand,m._color,m),(n(m._borderWidth)||m._borderWidth>0)&&(!n(m._borderColor)||!n(m._borderWidth))&&(n(m._borderColor)&&(m._borderColor=e.black),m.borderColorCommand=D.s(m._borderColor).command,m._borderColor&&m._borderColor.type&&m.specialColor(m.borderColorCommand,m._borderColor,m),m.borderWidthCommand=D.ss(m._borderWidth,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,m._dashed&&(m.borderDashedCommand=D.sd(Array.isArray(m._dashed)?m._dashed:[10,10],m._dashedOffset).command)),D.dp(0,0,m._radius,m._sides,m._pointSize),m.setBounds(-m._radius,-m._radius,m._radius*2,m._radius*2)},m.drawShape(),o.type&&(m.color=o),Object.defineProperty(m,"radius",{get:function(){return m._radius},set:function(C){m._radius=C,m.drawShape()}}),Object.defineProperty(m,"sides",{get:function(){return m._sides},set:function(C){m._sides=C,m.drawShape()}}),Object.defineProperty(m,"pointSize",{get:function(){return m._pointSize},set:function(C){m._pointSize=C,m.drawShape()}}),_!==!1&&e.styleTransforms(this,L),this.clone=function(C){var E=m.cloneProps(new e.Poly(C||!e.isPick(S[0])?m.radius:S[0],C||!e.isPick(S[1])?m.sides:S[1],C||!e.isPick(S[2])?m.pointSize:S[2],C||!e.isPick(S[3])?m.color:S[3],C||!e.isPick(S[4])?m.borderColor:S[4],C||!e.isPick(S[5])?m.borderWidth:S[5],m.dashed,p,_,this.group,T));return m.linearGradientParams&&E.linearGradient.apply(E,m.linearGradientParams),m.radialGradientParams&&E.radialGradient.apply(E,m.radialGradientParams),E}},e.extend(e.Poly,e.CustomShape,"clone","zimCustomShape",!1),e.Line=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S){var k="length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",m;if(m=mt(e.Line,arguments,k,this))return m;qe("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=L;var A=b===!1?{}:e.getStyle(this.type,this.group,S);n(t)&&(t=A.length!=null?A.length:100),n(f)&&(f=A.dashed!=null?A.dashed:!1),n(r)&&(r=A.thickness!=null?A.thickness:3),n(i)&&(i=A.color!=null?A.color:e.black),n(o)&&(o=A.startHead!=null?A.startHead:null),n(l)&&(l=A.endHead!=null?A.endHead:null),n(d)&&(d=A.strokeObj!=null?A.strokeObj:{}),n(p)&&(p=A.lineType!=null?A.lineType:"straight"),p!=="corner"&&p!="curve"&&(p="straight"),n(_)&&(_=A.lineOrientation!=null?A.lineOrientation:"auto"),_!=="vertical"&&_!="horizontal"&&(_="auto"),n(P)&&(P=A.curveH!=null?A.curveH:20),n(T)&&(T=A.curveV!=null?A.curveV:20),n(d)&&(d=A.strokeObj!=null?A.strokeObj:{});var D=C(t,i,r,o,l);this.veeObj={length:D[0],color:D[1],thickness:D[2],startHead:D[3],endHead:D[4]};function C(){return arguments}t=e.Pick.choose(t),i=e.Pick.choose(i),r=e.Pick.choose(r),o=e.Pick.choose(o),l=e.Pick.choose(l),o&&o.clone&&(o=o.clone()),l&&l.clone&&(l=l.clone());var E=this;E._length=t,E._color=i,E._thickness=r,E._dashed=f,E._dashed&&!Array.isArray(E._dashed)&&(E._dashed=[10,10]),E._startX=0,E._startY=0,E._endX=t,E._endY=0,E._startHead=o,E._endHead=l,E._points=R,E._lineOrientation=_,E.angle=0,E.lineType=p,E._startHead&&X("start",E._startHead),E._endHead&&X("end",E._endHead);function X(O,ne){if(ne=="triangle"||ne=="arrow"){var N=E["_"+O+"Head"]=new e.Triangle(r*4,r*4,r*4,i);N.rotation=90}else ne=="circle"&&(E["_"+O+"Head"]=new e.Circle(r*2.2,i));n(E["_"+O+"Head"].startAngle)&&(E["_"+O+"Head"].startAngle=E["_"+O+"Head"].rotation)}o=E._startHead,l=E._endHead,o&&o.type=="Triangle"&&(o.startRegY=o.regY),l&&l.type=="Triangle"&&(l.startRegY=l.regY);var Z=this.shape=new je.Shape;this.addChild(Z);var V=Z.graphics;E.drawShape=function(O,ne){V.c(),E.colorCommand=V.s(E._color).command,i&&i.type&&E.specialColor(E.colorCommand,i,E),E.thicknessCommand=V.ss(E._thickness,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,E._dashed&&(E.dashedCommand=V.sd(Array.isArray(E._dashed)?E._dashed:[10,10],E._dashedOffset).command);var N,q;if(E._points){var U=E._points[0];E._startX=U[0],E._startY=U[1];var z=E._points[E._points.length-1],ie=[z[z.length-2],z[z.length-1]];E._endX=ie[0],E._endY=ie[1],V.mt(U[0],U[1]);for(var ae=1;ae<E._points.length;ae++){var he=E._points[ae];ae==1&&(N=[E._startX,E._startY,he[0],he[1]]),he.length==2?V.lt(he[0],he[1]):he.length==4?V.qt(he[0],he[1],he[2],he[3]):he.length==6&&V.bt(he[0],he[1],he[2],he[3],he[4],he[5])}if(he.length>=4)q=[he[he.length-4],he[he.length-3],E._endX,E._endY];else{var $=E._points[E._points.length-2];q=[$[$.lenth-2],$[$.lenth-1],E._endX,E._endY]}}else{var G=E._startX,v=E._startY,w=E._endX,h=E._endY,I;if(E.lineType=="straight"?(o&&o.type=="Triangle"&&(o.regY=0,I=e.dist(G,v,w,h),I!=0&&(G=G+E._startHead.height/2*(w-G)/I),I!=0&&(v=v+E._startHead.height/2*(h-v)/I)),l&&l.type=="Triangle"&&(l.regY=0,I=e.dist(G,v,w,h),I!=0&&(w=w-E._endHead.height/2*(w-G)/I),I!=0&&(h=h-E._endHead.height/2*(h-v)/I))):(O?E._lineOrientation=="horizontal"||E.autoOrientation=="horizontal"?o&&o.type=="Triangle"&&(o.regY=0,w>G?G=Math.min(w,G+E._startHead.height/2):G=Math.max(w,G-E._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=0,h>v?v=Math.min(h,v+E._startHead.height/2):v=Math.max(h,v-E._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=o.startRegY),ne?E._lineOrientation=="horizontal"||E.autoOrientation=="horizontal"?l&&l.type=="Triangle"&&(l.regY=0,w>G?w-=E._endHead.height/2:w+=E._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=0,h>v?h-=E._endHead.height/2:h+=E._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=l.startRegY)),E.lineType=="straight")V.mt(G,v).lt(w,h),N=q=[G,v,w,h];else if(E.lineType=="corner"){var Q=G+(w-G)*.4,x=v+(h-v)*.4;E._lineOrientation=="auto"&&(E.autoOrientation=Math.abs(G-w)>Math.abs(v-h)?"horizontal":"vertical"),E._lineOrientation=="horizontal"||E.autoOrientation=="horizontal"?(N=q=[G,v,Q,v],V.mt(G,v).lt(Q,v).lt(Q,h).lt(w,h)):(N=q=[G,v,G,x],V.mt(G,v).lt(G,x).lt(w,x).lt(w,h))}else{var F=G>w?-1:1,Ae=v>h?-1:1,Y=G,K=v,ge=Math.abs(G-w),ye=Math.abs(v-h),ee=Math.min(P,ge*.5),ce=Math.min(T,ye*.5);E._lineOrientation=="auto"&&(E.autoOrientation=Math.abs(G-w)>Math.abs(v-h)?"horizontal":"vertical");var ve,Re,se,Oe;E._lineOrientation=="horizontal"||E.autoOrientation=="horizontal"?(ve=ye-ce*2,Re=(ge-ee*2)/2,V.mt(Y,K),Re>0&&(Y=Y+Re*F,V.lt(Y,K)),Oe=K,K=K+ce*Ae,Y=Y+ee*F,V.qt(Y,Oe,Y,K),N=q=[G,v,Y,v],ve>0&&(K=K+ve*Ae,V.lt(Y,K)),K=K+ce*Ae,se=Y,Y=Y+ee*F,V.qt(se,K,Y,K),Re>0&&(Y=Y+Re*F,V.lt(Y,K))):(ve=ge-ee*2,Re=(ye-ce*2)/2,V.mt(Y,K),Re>0&&(K=K+Re*Ae,V.lt(Y,K)),se=Y,Y=Y+ee*F,K=K+ce*Ae,V.qt(se,K,Y,K),N=q=[G,v,G,K],ve>0&&(Y=Y+ve*F,V.lt(Y,K)),Y=Y+ee*F,Oe=K,K=K+ce*Ae,V.qt(Y,Oe,Y,K),Re>0&&(K=K+Re*Ae,V.lt(Y,K)))}}if(E.setBounds(Math.min(E._startX,E._endX),Math.min(E._startY,E._endY),Math.abs(E._startX-E._endX),Math.abs(E._startY-E._endY)),E._length=Math.sqrt(Math.pow(E._startX-E._endX,2)+Math.pow(E._startY-E._endY,2)),E.angle=Math.atan2(E._endY-E._startY,E._endX-E._startX)*180/Math.PI,E._startHead&&E._startHead.loc){E._startHead.loc(E._startX,E._startY,E);var J=Math.atan2(N[3]-N[1],N[2]-N[0])*180/Math.PI;E._startHead.rotation=J-180+E._startHead.startAngle}if(E._endHead&&E._endHead.loc){E._endHead.loc(E._endX,E._endY,E);var xe=Math.atan2(q[3]-q[1],q[2]-q[0])*180/Math.PI;E._endHead.rotation=xe+E._endHead.startAngle}},E.drawShape(),i.type&&(E.color=i),this.setPoints=function(O,ne,N,q,U,z){return Array.isArray(O)&&n(ne)?(E.points=O,E):(O&&!n(O.x)?(E._startX=n(O.x)?E._startX:O.x,E._startY=n(O.y)?E._startY:O.y,ne&&(E._endX=n(ne.x)?E._endX:ne.x,E._endY=n(ne.y)?E._endY:ne.y)):(E._startX=n(O)?E._startX:O,E._startY=n(ne)?E._startY:ne,E._endX=n(N)?E._endX:N,E._endY=n(q)?E._endY:q),E.drawShape(U,z),E)},this.from=function(O,ne,N){n(N)&&(N=!0);var q,U;if(O&&O.parent&&E.parent&&N){var z=O.parent.localToLocal(O.x,O.y,E.parent);q=z.x,U=z.y}return O&&!n(O.x)?(E._startX=n(q)?n(O.x)?E._startX:O.x:q,E._startY=n(U)?n(O.y)?E._startY:O.y:U):(E._startX=n(O)?E._startX:O,E._startY=n(ne)?E._startY:ne),E.drawShape(),E},this.to=function(O,ne,N){n(N)&&(N=!0);var q,U;if(O&&O.parent&&E.parent&&N){var z=O.parent.localToLocal(O.x,O.y,E.parent);q=z.x,U=z.y}return O&&!n(O.x)?(E._endX=n(q)?n(O.x)?E._endX:O.x:q,E._endY=n(U)?n(O.y)?E._endY:O.y:U):(E._endX=n(O)?E._endX:O,E._endY=n(ne)?E._endY:ne),E.drawShape(),E},Object.defineProperty(E,"length",{get:function(){return E._length},set:function(O){var ne=E.length!=0?O/E.length:0;if(!isNaN(ne)){var N=E.scaleX,q=E.scaleY;E.scaleX*=ne,E.scaleY*=ne;var U=E.localToGlobal(E._startX,E._startY),z=E.localToGlobal(E._endX,E._endY);E.scaleX=N,E.scaleY=q;var ie=E.globalToLocal(U.x,U.y),ae=E.globalToLocal(z.x,z.y);E.setPoints(ie,ae)}}}),Object.defineProperty(E,"startPoint",{get:function(){return new e.Point(E._startX,E._startY)},set:function(O){E._startX=n(O.x)?E._startX:O.x,E._startY=n(O.y)?E._startY:O.y,E.drawShape()}}),Object.defineProperty(E,"endPoint",{get:function(){return new e.Point(E._endX,E._endY)},set:function(O){E._endX=n(O.x)?E._endX:O.x,E._endY=n(O.y)?E._endY:O.y,E.drawShape()}}),Object.defineProperty(E,"startHead",{get:function(){return E._startHead},set:function(O){E._startHead=O,E.drawShape()}}),Object.defineProperty(E,"endHead",{get:function(){return E._endHead},set:function(O){E._endHead=O,E.drawShape()}}),Object.defineProperty(E,"startX",{get:function(){return E._startX},set:function(O){E._startX=O||0,E.drawShape()}}),Object.defineProperty(E,"startY",{get:function(){return E._startY},set:function(O){E._startY=O||0,E.drawShape()}}),Object.defineProperty(E,"endX",{get:function(){return E._endX},set:function(O){E._endX=O||0,E.drawShape()}}),Object.defineProperty(E,"endY",{get:function(){return E._endY},set:function(O){E._endY=O||0,E.drawShape()}}),Object.defineProperty(E,"points",{get:function(){return E._points},set:function(O){O&&(E._points=O,E.drawShape())}}),Object.defineProperty(E,"lineOrientation",{get:function(){return E._lineOrientation},set:function(O){O&&(E._lineOrientation=O,E.drawShape())}}),b!==!1&&e.styleTransforms(this,A),this.clone=function(O){var ne=O||!e.isPick(D[3])?E._startHead:D[3];ne&&ne.clone&&(ne=ne.clone(),ne.rotation=E._startHead.startAngle);var N=O||!e.isPick(D[4])?E._endHead:D[4];N&&N.clone&&(N=N.clone(),N.rotation=E._endHead.startAngle);var q=E.cloneProps(new e.Line(O||!e.isPick(D[0])?E.length:D[0],O||!e.isPick(D[2])?E.thickness:D[2],O||!e.isPick(D[1])?E.color:D[1],ne,N,E.dashed,d,p,E._lineOrientation,P,T,e.copy(R),b,this.group,S));return E.points?q.setPoints(E.points):q.setPoints(E._startX,E._startY,E._endX,E._endY),E.linearGradientParams&&q.linearGradient.apply(q,E.linearGradientParams),E.radialGradientParams&&q.radialGradient.apply(q,E.radialGradientParams),q}},e.extend(e.Line,e.CustomShape,"clone","zimCustomShape",!1),e.Squiggle=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne){var N="color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",q;if(q=mt(e.Squiggle,arguments,N,this))return q;qe("53.2"),this.group=O;var U=V===!1?{}:e.getStyle("Squiggle",this.group,ne);if(n(r)&&(r=U.thickness!=null?U.thickness:6),n(o)&&(o=U.length!=null?U.length:300),n(i)&&(i=U.points!=null?U.points:5),typeof i=="string"){var z=new e.SVGContainer;i=z.processPath(i)}var ie=typeof i!="number",ae=typeof i=="number"?i:i.length;if(ae==0)return;n(l)&&(l=U.controlLength!=null?U.controlLength:o/ae),this.zimCustomShape_constructor(o,l,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,n(b)&&(b=U.dashed!=null?U.dashed:!1),n(t)&&(t=U.color!=null?U.color:e.blue),t.style&&(this.colorCommand=t,t=e.black),n(f)&&(f=U.controlType!=null?U.controlType:null);var he=f;n(f)&&(f="mirror"),n(d)&&(d=U.lockControlType!=null?U.lockControlType:!1),n(X)&&(X=U.interactive!=null?U.interactive:!0),n(p)&&(p=U.showControls!=null?U.showControls:X);var $=p;n(_)&&(_=U.lockControls!=null?U.lockControls:!X),n(P)&&(P=U.handleSize!=null?U.handleSize:e.mobile()?20:10),n(T)&&(T=U.allowToggle!=null?U.allowToggle:X),n(R)&&(R=U.move!=null?U.move:X),n(S)&&(S=U.circleColor!=null?U.circleColor:e.light),n(k)&&(k=U.circleBorderColor!=null?U.circleBorderColor:e.dark),n(m)&&(m=U.stickColor!=null?U.stickColor:e.darker),n(A)&&(A=U.stickThickness!=null?U.stickThickness:1),n(D)&&(D=U.selectColor!=null?U.selectColor:e.white),n(C)&&(C=U.selectPoints!=null?U.selectPoints:X),this.circleColor=S,this.circleBorderColor=k,this.stickColor=m,this.stickThickness=A,n(L)&&(L=U.onTop!=null?U.onTop:!0),n(E)&&(E=U.editPoints!=null?U.editPoints:X),n(Z)&&(Z=U.strokeObj!=null?U.strokeObj:{});var G=v(t);this.veeObj={color:G[0]};function v(){return arguments}t=e.Pick.choose(t);var w=this,h;this.types=["mirror","straight","free","none"],this.interactive=X,this.num=ae,this.onTop=L,this.move=R,this.editPoints=E,this.allowToggle=T,this.lockControlType=d,this.selectPoints=C,this.lockControls=_;var I,Q,x;w._color=t,w._thickness=r,w._dashed=b,w._dashed&&!Array.isArray(w._dashed)&&(w._dashed=[10,10]);var F,Ae,Y,K,ge=w.move,ye=2,ee,ce;he&&typeof i!="number"&&e.loop(i,function(pe){pe[8]=he,he=="none"&&(pe[4]=pe[5]=pe[6]=pe[7]=0)}),ve();function ve(){ce&&ce.removeAllEventListeners(),w.num=ae=typeof i=="number"?i:i.length,ae=Math.max(2,ae),l=o/ae,F=w.shape=new e.Shape({style:!1}).addTo(w);var pe=w.sticks=new e.Shape({style:!1}).addTo(w);P<=0&&pe.removeFrom();var Me=F.graphics;Me.c();var Ue=pe.graphics;Ue.c();var ue=P/10*8,Ee=P;w.selectPoints?(w.selectedBalls=new e.SelectionSet,w.selectedRect1s=new e.SelectionSet,w.selectedRect2s=new e.SelectionSet,w.selectionManager=new e.SelectionManager([w.selectedBalls,w.selectedRect1s,w.selectedRect2s],"ctrl",!1)):w.selectionManager=new e.SelectionManager(null,"ctrl");var Te=e.mobile();ce=w.controls=new e.Container({style:!1}).addTo(w),w.interactive&&ce.drag({onTop:!Te}),I=[],x=[],Q=[];var _e,We,oe,Ye,Ve,De,de,Be,Qe;for(_e=0;_e<ae;_e++){if(Ye=new e.Container({style:!1}).addTo(ce),Ye.num=_e,typeof i=="number"){var Ke=e.Pick.choose(l);oe=new e.Container(Ke,r,null,null,!1).addTo(w).loc({x:_e*o/(ae-1)-Ke/2,y:_e%2*Ke}),de=new e.Circle(ue,w.selectPoints&&w.selectedBalls.isSelected(_e)?D:w.circleColor,w.circleBorderColor,2,null,null,null,null,!1).centerReg(oe).loc({x:Ke/2,y:0}),Ve=new e.Rectangle(Ee,Ee,w.selectPoints&&w.selectedRect1s.isSelected(_e)?D:Fe(f),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg(oe).loc({x:0,y:0}),De=new e.Rectangle(Ee,Ee,w.selectPoints&&w.selectedRect2s.isSelected(_e)?D:Fe(f),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg(oe).loc({x:Ke,y:0});var lt=oe.localToLocal(de.x,de.y,ce);de.x=lt.x,de.y=lt.y,de.addTo(Ye,null,!1);var gt=oe.localToLocal(Ve.x,Ve.y,ce);Ve.x=f=="none"?0:gt.x-de.x,Ve.y=f=="none"?0:gt.y-de.y,Ve.addTo(Ye,null,!1);var He=oe.localToLocal(De.x,De.y,ce);De.x=f=="none"?0:He.x-de.x,De.y=f=="none"?0:He.y-de.y,De.addTo(Ye,null,!1),Ye.x=de.x,Ye.y=de.y,de.x=0,de.y=0,f=="none"&&de.addTo(Ye,null,!1)}else Qe=i[_e],Be=Qe[8]?Qe[8]:f,Ye.loc({x:Qe[0],y:Qe[1]}),de=new e.Circle(ue,w.circleColor,w.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ye).loc({x:Qe[2],y:Qe[3]}),Ve=new e.Rectangle(Ee,Ee,Fe(Be),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ye,0).loc({x:Qe[4],y:Qe[5]}),De=new e.Rectangle(Ee,Ee,Fe(Be),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ye,0).loc({x:Qe[6],y:Qe[7]});de.mySet=Ye,de.rect1=Ve,de.rect2=De,de.index=_e,Te?de.on("mousedown",ft):de.on("dblclick",Se),Ve.ball=de,Ve.other=De,De.ball=de,De.other=Ve,P==0&&(de.expand(10),Ve.expand(10),De.expand(10)),Te&&(de.expand(),Ve.expand(),De.expand()),We=[Ye,de,Ve,De,Qe?Qe[8]:f],I.push(We),Q.push(de),x.push(Ye)}var it=!1;function ft(Ce){it?(Ce.preventDefault(),Se(Ce)):(it=!0,setTimeout(function(){it=!1},300))}function Se(Ce){if(!w.lockControlType){var ze=Ce.target,Xe=I[ze.index][4]?I[ze.index][4]:f;Math.abs(ze.rect1.x)<=2&&Math.abs(ze.rect1.y)<=2&&Math.abs(ze.rect2.x)<=2&&Math.abs(ze.rect2.y)<=2&&(Xe="none"),Xe=="none"&&ze.parent.addChildAt(ze,0),Xe=w.types[(w.types.indexOf(Xe)+(w.shiftKey?-1:1)+w.types.length)%w.types.length],Xe=="none"&&(ze.rect1.x=ze.rect1.y=ze.rect2.x=ze.rect2.y=0,ze.parent.addChild(ze),Ce.stopImmediatePropagation()),I[ze.index][4]=Xe,ze.rect1.color=Fe(Xe),ze.rect2.color=Fe(Xe),w.drawShape(),t.type&&(w.color=t);var Ze=new je.Event("change");Ze.controlType="bezierSwitch",w.dispatchEvent(Ze),ze.stage.update()}}function Fe(Ce){var ze={straight:"#e472c4",free:"#ebcb35",none:"#50c4b7"};return ze[Ce]?ze[Ce]:"#993399"}var me=e.mobile();w.drawShape=function(){Me.c();var Ce=me?10:6,ze,Xe,Ze,ot,Ge,et,pt,Le,tt,vt,nt,Tt,xt,Ct,ct;if(r<Ce)for(Me.s("rgba(0,0,0,.01)").ss(Ce),ot=I[0][0],tt=ot.localToLocal(I[0][1].x,I[0][1].y,F),Me.mt(tt.x,tt.y),ze=0;ze<I.length;ze++)Xe=ze,Ze=(ze+1)%I.length,ot=I[Xe][0],Ge=I[Xe][1],et=I[Xe][2],pt=I[Xe][3],Le=I[Ze][0],vt=I[Ze][1],nt=I[Ze][2],xt=ot.localToLocal(pt.x,pt.y,F),Ct=Le.localToLocal(nt.x,nt.y,F),ct=Le.localToLocal(vt.x,vt.y,F),ze!=I.length-1&&Me.bt(xt.x,xt.y,Ct.x,Ct.y,ct.x,ct.y);for(w.colorCommand||(w.colorCommand=Me.s(w._color).command,t&&t.type&&w.specialColor(w.colorCommand,t,w)),w.thicknessCommand||(w.thicknessCommand=Me.ss(w._thickness,Z.caps,Z.joints,Z.miterLimit,Z.ignoreScale).command),w._dashed&&(w.dashedCommand||(w.dashedCommand=Me.sd(Array.isArray(w._dashed)?w._dashed:[10,10],w._dashedOffset).command)),ot=I[0][0],tt=ot.localToLocal(I[0][1].x,I[0][1].y,F),Me.mt(tt.x,tt.y),Ue.c().s(w.stickColor).ss(w.stickThickness),ze=0;ze<I.length;ze++)Xe=ze,Ze=(ze+1)%I.length,ot=I[Xe][0],Ge=I[Xe][1],et=I[Xe][2],pt=I[Xe][3],Le=I[Ze][0],vt=I[Ze][1],nt=I[Ze][2],xt=ot.localToLocal(pt.x,pt.y,F),Ct=Le.localToLocal(nt.x,nt.y,F),ct=Le.localToLocal(vt.x,vt.y,F),ze!=I.length-1&&Me.bt(xt.x,xt.y,Ct.x,Ct.y,ct.x,ct.y),tt=ot.localToLocal(Ge.x,Ge.y,F),Tt=ot.localToLocal(et.x,et.y,F),ze==0&&(et.visible=0),ze!=0&&Ue.mt(tt.x,tt.y).lt(Tt.x,Tt.y),ze!=I.length-1&&Ue.mt(tt.x,tt.y).lt(xt.x,xt.y),ze==I.length-1&&(pt.visible=0);w._dashed&&Me.append(w.dashedCommand),Me.append(w.thicknessCommand),Me.append(w.colorCommand)},w.drawShape(),t.type&&(w.color=t);var $e;ce.on("mousedown",function(Ce){if(h=Ce.target.stage,!w.lockControls){if(w.selectPoints&&(w.keyFocus=!0),$e={x:Ce.target.x,y:Ce.target.y},Ce.target.rect1)de=Ce.target,de.startX=de.x,de.startY=de.y,de.rect1.startX=de.rect1.x,de.rect1.startY=de.rect1.y,de.rect2.startX=de.rect2.x,de.rect2.startY=de.rect2.y;else{var ze=Ce.target;ze.startX=ze.x,ze.startY=ze.y,de=ze.ball;var Xe=de.index,Ze=f;if(n(I[Xe][4])||(Ze=I[Xe][4]),Ze=="straight"){var ot=ze.other,Ge=ot.x-de.x,et=ot.y-de.y;ot.stickLength=Math.sqrt(Math.pow(Ge,2)+Math.pow(et,2))}}if(w.selectPoints){var pt=w.selectionManager.currentSet;if(pt&&pt.selections&&pt.selections.length>0)for(_e=0;_e<pt.selections.length;_e++){var Le=w.pointObjects[pt.selections[_e]];Le[1].startX=Le[1].x,Le[1].startY=Le[1].y,Le[2].startX=Le[2].x,Le[2].startY=Le[2].y,Le[3].startX=Le[3].x,Le[3].startY=Le[3].y}}}}),w.selectPoints&&ce.tap(function(Ce){if(Ce.target.rect1){var ze=Ce.target;w.selectedBalls.toggle(ze.parent.num)}else{var Xe=Ce.target;Xe.color="white",ze=Xe.ball,ze.rect1==Xe?w.selectedRect1s.toggle(ze.parent.num):w.selectedRect2s.toggle(ze.parent.num)}for(_e=0;_e<w.pointObjects.length;_e++){var Ze=w.pointObjects[_e];Ze[1].color=w.selectedBalls.isSelected(_e)?D:w.circleColor,Ze[2].color=w.selectedRect1s.isSelected(_e)?D:Fe(Ze[4]),Ze[3].color=w.selectedRect2s.isSelected(_e)?D:Fe(Ze[4])}h.update()}),ce.on("pressmove",function(Ce){if(!w.lockControls)if(w.selectPoints){var ze=Re();if(ze.indexOf(Ce.target)==-1)ee(Ce.target),w.drawShape();else if(ze.length>0){for(var Xe=Ce.target.x-Ce.target.startX,Ze=Ce.target.y-Ce.target.startY,ot=0;ot<ze.length;ot++){var Ge=ze[ot];Ge.x=Ge.startX+Xe,Ge.y=Ge.startY+Ze,ee(Ge)}w.drawShape()}}else ee(Ce.target),w.drawShape()}),ce.on("pressup",function(Ce){if(!w.lockControls){var ze=Ce.target.x!=$e.x||Ce.target.y!=$e.y,Xe=new je.Event("change");Ce.target.rect1?(Xe.controlType="bezierPoint",st(Ce.target)):Xe.controlType="bezierHandle",ze&&w.dispatchEvent(Xe)}});function st(Ce){if(w.selectPoints){var ze=Re();if(ze&&ze.indexOf(Ce)==-1)se(Ce);else if(ze&&ze.length>0)for(var Xe=0;Xe<ze.length;Xe++)se(ze[Xe]);else se(Ce)}else se(Ce)}w.changeControl=function(Ce,ze,Xe,Ze,ot,Ge,et,pt,Le){var tt="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",vt;if(vt=mt(w.changeControl,arguments,tt))return vt;if(n(Ce)){for(_e=0;_e<I.length;_e++)w.changeControl(_e,ze,Xe,Ze,ot,Ge,et,pt);return}var nt=I[Ce];nt[4]=ze,ze=="none"?(n(et)||(nt[2].x=et),n(pt)||(nt[2].y=pt),nt[2].x=nt[1].x,nt[2].y=nt[1].y,nt[3].x=nt[1].x,nt[3].y=nt[1].y,nt[1].parent.addChild(nt[1])):(n(Xe)||(nt[2].x=Xe),n(Ze)||(nt[2].y=Ze),n(ot)||(nt[3].x=ot),n(Ge)||(nt[3].y=Ge),n(et)||(nt[1].x=et),n(pt)||(nt[1].y=pt),nt[1].parent.addChildAt(nt[1],0)),Le&&(w.update(),h&&h.update())},w.transformPoints=function(Ce,ze,Xe,Ze,ot){return n(ot)&&(ot=!0),w.points=e.transformPoints(w.points,Ce,ze,Xe,Ze),ot&&w.approximateBounds(),w},w.traverse=function(Ce,ze,Xe,Ze,ot){var Ge=e.copy(w.segmentRatios);Ge.unshift(0),n(Xe)&&(Xe=ze+1);var et=Ge[ze]*100,pt=Ge[Xe]*100,Le;!ot&&et>pt?Le=100-et+pt:!ot&&et<pt?Le=pt-et:ot&&et>pt?Le=-(et-pt):ot&&et<pt&&(Le=-(100-pt+et));var tt=new je.Event("traversed");return tt.obj=Ce,Ce.animate({ease:"linear",props:{path:w,startPercent:et,percent:Le},time:Ze,call:function(){w.dispatchEvent(tt)}}),w},w.reversePoints=function(){return i=e.copy(w.points),w.points=e.reversePoints(e.copy(w.points)),w.update(),w},w.appendPoints=function(Ce,ze){var Xe=e.copy(w.points);return w.points=e.appendPoints(Xe,Ce,ze),w.update(),w},w.prependPoints=function(Ce,ze){var Xe=e.copy(w.points);return w.points=e.rependPoints(Xe,i,ze),w.update(),w},w.splitPoints=function(Ce){var ze=e.copy(w.points);if(!(Ce<1||Ce>ze.length-1)){var Xe=e.splitPoints(ze,Ce),Ze=Xe[0],ot=Xe[1],Ge=w.clone();return w.points=Ze,w.update(),Ge.points=ot,w.parent&&Ge.addTo(w.parent),Ge}},w.makeBlob=function(Ce,ze){n(Ce)&&(Ce="mirror"),n(ze)&&(ze=5);var Xe=e.copy(w.points);e.loop(Xe,function(ot,Ge,et){ot[8]||(ot[8]="mirror"),Ge==0&&(Ce=="free"&&(ot[4]=ot[5]=0),ot[8]=Ce),Ge==et-1&&(Ce=="free"&&(ot[6]=ot[7]=0),ot[8]=Ce)}),Math.abs(Xe[0][0]-Xe[Xe.length-1][0])<ze&&Math.abs(Xe[0][1]-Xe[Xe.length-1][1])<ze&&(Xe[0][4]=Xe[Xe.length-1][4],Xe[0][5]=Xe[Xe.length-1][5],Xe.pop());var Ze=new e.Blob({points:Xe,borderColor:w.color,borderWidth:w.thickness,showControls:w.controlsVisible,interactive:w.interactive,onTop:w.onTop,dashed:w.dashed,stickColor:w.stickColor,stickThickness:w.stickThickness});return Ze},w.update=function(Ce){return Ce?w.points=w.pointsAdjusted:w.drawShape(),w.zimAnimateChanged=!0,w},w.interactive&&(R&&F.drag({onTop:!1}),Ae=F.on("mousedown",function(Ce){h=Ce.target.stage,$e={x:F.x,y:F.y},w.selectPoints&&(w.keyFocus=!0),Je()}),Y=F.on("pressmove",function(){ce.x=F.x,ce.y=F.y,pe.x=F.x,pe.y=F.y}),K=F.on("pressup",function(){var Ce=F.x!=$e.x||F.y!=$e.y,ze=F.localToLocal(w.regX,w.regY,w.parent);if(w.x=ze.x,w.y=ze.y,ce.x=ce.y=pe.x=pe.y=F.x=F.y=0,Ce){var Xe=new je.Event("change");Xe.controlType="move",w.dispatchEvent(Xe)}h&&h.update()}),w.move||J(!0));function Je(){if(w.onTop){var Ce=w.parent.numChildren-1;w.parent.getChildAt(Ce).type=="Keyboard"&&Ce--,w.parent.setChildIndex(w,Ce)}}w.toggleEvent=w.on("mousedown",function(){w.allowToggle&&($||(w.showControls(),w.dispatchEvent("controlsshow")))}),w.added(function(){h=w.stage,w.toggleStageEvent&&h.off("stagemousedown",w.toggleStageEvent),w.toggleStageEvent=h.on("stagemousedown",function(Ce){!w.allowToggle||!w.stage||$&&!w.hitTestPoint(Ce.stageX/e.scaX,Ce.stageY/e.scaY,!1)&&(w.hideControls(),w.dispatchEvent("controlshide"))})}),w.clickEvent=w.on("click",function(){w.ctrlKey&&setTimeout(function(){w.clone(!0).addTo(w.stage).mov(0,100),w.allowToggle&&(w.hideControls(),w.dispatchEvent("controlshide"));var Ce=new je.Event("change");Ce.controlType="move",w.dispatchEvent(Ce),w.stage.update()},50)}),w.hideControls=function(){return w.toggled=!1,ce.visible=!1,pe.visible=!1,$=!1,w.stage&&w.stage.update(),!w.allowToggle&&w.move&&J(),w},p||w.hideControls(),w.showControls=function(){return w.toggled=!0,ce.visible=!0,pe.visible=!0,$=!0,ce.x=F.x,ce.y=F.y,pe.x=F.x,pe.y=F.y,w.addChildAt(F,0),w.move&&!w.allowToggle&&Oe(),w.stage&&w.stage.update(),w},w.toggle=function(Ce){return Ce===!0?w.showControls():Ce===!1||$?w.hideControls():w.showControls(),w},w.recordData=function(Ce){n(Ce)&&(Ce=!1);var ze={type:"Squiggle",index:w.parent?w.parent.getChildIndex(w):-1,x:w.x,y:w.y,points:w.getPoints(),color:w.color,thickness:w.thickness,move:w.move,allowToggle:w.allowToggle,controlsVisible:$};return Ce?JSON.stringify(ze):ze},w.setData=function(Ce,ze){if(!n(Ce)){if(ze)try{Ce=JSON.parse(Ce)}catch(Ge){return}var Xe=Ce.index;n(Xe)&&(Xe=-1),delete Ce.index;var Ze=Ce.points;n(Ze)||w.setPoints(Ze),delete Ce.points,w.num=Ze.length;for(var ot in Ce)w[ot]=Ce[ot];return w.parent&&w.parent.setChildIndex(w,Xe),w.update(),w}},w.getPoints=function(Ce){n(Ce)&&(Ce=!1);var ze=w.points;if(Ce){if(!w.pane){var Xe=w.pane=new e.Pane({container:w.stage,width:Math.min(500,w.stage.width-20),height:Math.min(500,w.stage.height-20),draggable:!0}),Ze=w.textArea=new e.TextArea(Math.min(400,w.stage.width-70),Math.min(400,w.stage.height-70));Ze.centerReg(Xe)}w.textArea.text=JSON.stringify(ze),w.pane.show()}return ze},w.recordPoints=w.getPoints,w.setPoints=function(Ce){for(var ze,Xe,Ze=0;Ze<Ce.length;Ze++)ze=I[Ze],Xe=Ce[Ze],!n(ze)&&(ze[0].x=Xe[0],ze[0].y=Xe[1],ze[1].x=Xe[2],ze[1].y=Xe[3],ze[2].x=Xe[4],ze[2].y=Xe[5],ze[3].x=Xe[6],ze[3].y=Xe[7],ze[4]=Xe[8]);return w.update(),w},V!==!1&&e.styleTransforms(w,U),w.clone=function(Ce,ze){var Xe=[],Ze=!1;e.loop(w.pointControls,function(Ge){Ge.scaleX+Ge.scaleY+Ge.regX+Ge.regY+Ge.rotation!=2&&(Ze=!0),Xe.push([Ge.scaleX,Ge.scaleY,Ge.regX,Ge.regY,Ge.rotation])});var ot=w.cloneProps(new e.Squiggle(ze?w.colorCommand:Ce||!e.isPick(G[0])?w.color:G[0],w.thickness,w.getPoints(),o,l,f,d,ce.visible,_,P,w.allowToggle,w.move,b,L,w.circleColor,w.circleBorderColor,w.stickColor,w.stickThickness,D,C,w.editPoints,X,Z,V,w.group,ne));return Ze&&(e.loop(ot.pointControls,function(Ge,et){Ge.scaleX=Xe[et][0],Ge.scaleY=Xe[et][1],Ge.regX=Xe[et][2],Ge.regY=Xe[et][3],Ge.rotation=Xe[et][4]}),ot.update()),w.linearGradientParams&&ot.linearGradient.apply(ot,w.linearGradientParams),w.radialGradientParams&&ot.radialGradient.apply(ot,w.radialGradientParams),ot},w.shape.on("mousedown",function(Ce){h=Ce.target.stage,w.editPoints&&(w.controlsVisible?(w.pressX=Ce.stageX/e.scaX,w.pressY=Ce.stageY/e.scaX):(w.pressX=null,w.pressY=null))}),w.addPointFactor=10,w.addMinDistance=15,w.shape.on("pressup",function(Ce){if(w.editPoints&&w.pressX&&Math.abs(w.pressX-Ce.stageX/e.scaX)<ye&&Math.abs(w.pressY-Ce.stageY/e.scaY)<ye){w.selectPoints&&(w.lastPoints=e.copy(w.points));var ze=w.points,Xe=w.globalToLocal(Ce.stageX/e.scaX,Ce.stageY/e.scaY),Ze=e.closestPointAlongCurve(Xe,w.segmentPoints);if(w.editPoints=="anywhere")ze.splice(Ze+1,0,[Xe.x,Xe.y,0,0,0,0,0,0]),w.points=ze,w.changeControl({index:Ze+1,type:"mirror",update:!0});else{var ot=w.pointsAdjusted,Ge=w.getSegmentPoint(ot[Ze],ot[(Ze+1)%ot.length]),et=e.distanceAlongCurve(Ge),pt=Math.round(et/w.addPointFactor),Le=w.interpolate(pt,Ze,!1,ze),tt=1e4,vt;if(e.loop(Le,function(Ct,ct){var Rt=e.dist(Ct,Xe);Rt<tt&&(tt=Rt,vt=ct)}),tt<w.addMinDistance){var nt=w.segmentRatios,Tt=nt[Ze],xt=Ze>0?nt[Ze-1]:0;w.addPoint(100*(xt+(Tt-xt)*(vt/(pt+1))))}}w.lastSelectedIndex=Ze+1,w.lastSelected=w.controls.getChildAt(w.lastSelectedIndex),w.stage.update()}}),w.controls.on("click",function(Ce){w.lastSelected=Ce.target.parent,w.lastSelectedIndex=w.controls.getChildIndex(Ce.target.parent),w.editPoints&&w.selectionManager.shiftKey&&rt(Ce)});function rt(Ce){if(Ce.target.type=="Circle"){var ze=w.lastSelectedIndex=w.controls.getChildIndex(Ce.target.parent);if(w.controls.numChildren<=2)return;var Xe=w.points;w.selectPoints&&(w.lastPoints=e.copy(Xe)),Xe.splice(ze,1),w.points=Xe,w.stage.update(),w.lastSelected=w.lastSelectedIndex=null}}w.controls.hold(rt),$||w.hideControls(),w.dispatchEvent("update")}function Re(){var pe=[],Me=w.selectionManager.currentSet;if(Me&&Me.selections&&Me.selections.length>0)for(var Ue=0;Ue<Me.selections.length;Ue++){var ue=w.pointObjects[Me.selections[Ue]];if(Me==w.selectedBalls)pe.push(ue[1]);else if(Me==w.selectedRect1s)pe.push(ue[2]);else if(Me==w.selectedRect2s)pe.push(ue[3]);else continue}return pe}function se(pe){if(pe.type=="Circle"){var Me=pe,Ue=Me.mySet,ue=Me.rect1,Ee=Me.rect2;ue.x-=Me.x,ue.y-=Me.y,Ee.x-=Me.x,Ee.y-=Me.y,Ue.x+=Me.x,Ue.y+=Me.y,Me.x=0,Me.y=0}}w.selectionManager.on("keydown",function(pe){if(w.selectPoints&&w.keyFocus&&pe.keyCode>=37&&pe.keyCode<=40){var Me=Re();if(Me.length>0){for(var Ue=0;Ue<Me.length;Ue++){var ue=Me[Ue];pe.keyCode==37?ue.x-=w.selectionManager.shiftKey?10:1:pe.keyCode==39?ue.x+=w.selectionManager.shiftKey?10:1:pe.keyCode==38?ue.y-=w.selectionManager.shiftKey?10:1:pe.keyCode==40&&(ue.y+=w.selectionManager.shiftKey?10:1),ee(ue)}w.drawShape(),w.dispatchEvent("update"),w.stage&&w.stage.update()}}}),w.selectionManager.on("keyup",function(pe){if(w.selectPoints&&w.keyFocus&&pe.keyCode>=37&&pe.keyCode<=40){var Me=Re();if(Me.length>0)for(var Ue=0;Ue<Me.length;Ue++)se(Me[Ue])}}),w.selectionManager.on("undo",function(){if(w.selectPoints&&w.keyFocus&&w.lastPoints){var pe=e.copy(w.lastPoints);w.lastPoints=e.copy(w.points),w.points=pe,w.stage&&w.stage.update()}}),ee=function(pe){if(!w.lockControls){var Me;if(pe.rect1){Me=pe;var Ue=Me.x-Me.startX,ue=Me.y-Me.startY;Me.rect1.x=Me.rect1.startX+Ue,Me.rect1.y=Me.rect1.startY+ue,Me.rect2.x=Me.rect2.startX+Ue,Me.rect2.y=Me.rect2.startY+ue}else{var Ee=pe,Te=Ee.other;Me=Ee.ball;var _e=Me.index,We=f;if(n(I[_e][4])||(We=I[_e][4]),We=="straight"||We=="mirror"){var oe=Ee.x-Me.x,Ye=Ee.y-Me.y;if(We=="mirror")Te.x=Me.x-oe,Te.y=Me.y-Ye;else{var Ve=Math.atan2(Ye,oe),De=-Te.stickLength*Math.cos(Ve+Math.PI),de=-Te.stickLength*Math.sin(Ve+Math.PI);Te.x=Me.x-De,Te.y=Me.y-de}}}}},Object.defineProperty(w,"move",{get:function(){return R},set:function(pe){R!=pe&&(R=pe,pe?Oe():J())}}),Object.defineProperty(w,"interactive",{get:function(){return X},set:function(pe){X=pe,$=X,w.allowToggle=X,w.editPoints=X,w.lockControls=!X,w.selectPoints=X,w.move=X;var Me=w.points;w.points=Me}}),Object.defineProperty(w,"allowToggle",{get:function(){return T},set:function(pe){T!=pe&&(T=pe,T?w.move&&Oe():!$&&w.move&&J())}});function Oe(){w.move!="always"&&(ge||(ge=!0,F.drag({onTop:!1}),Ae=F.on("mousedown",Ae),Y=F.on("pressmove",Y),K=F.on("pressup",K)))}function J(pe){w.move!="always"&&(!pe&&!ge||(ge=!1,F.noDrag(),F.off("mousedown",Ae),F.off("pressmove",Y),F.off("pressup",K)))}var xe=_;Object.defineProperty(w,"lockControls",{get:function(){return xe},set:function(pe){xe=pe,pe?(w.controls.mouseChildren=!1,w.controls.mouseEnabled=!1):(w.controls.mouseChildren=!0,w.controls.mouseEnabled=!0)}}),w.lockControls=xe,Object.defineProperty(w,"controlsVisible",{get:function(){return $},set:function(pe){$=pe,pe?w.showControls():w.hideControls()}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==w},set:function(){e.KEYFOCUS=w}}),e.KEYFOCUS||te();function te(){if(w.selectPoints){w.keyFocus=!0;var pe=document.activeElement;pe&&pe.blur()}}Object.defineProperty(w,"points",{get:function(){for(var pe=[],Me,Ue,ue=0;ue<I.length;ue++)Ue=I[ue],Me=[e.decimals(Ue[0].x),e.decimals(Ue[0].y),e.decimals(Ue[1].x),e.decimals(Ue[1].y),e.decimals(Ue[2].x),e.decimals(Ue[2].y),e.decimals(Ue[3].x),e.decimals(Ue[3].y)],Ue[4]&&Ue[4]!=="mirror"&&Me.push(Ue[4]),pe.push(Me);return pe},set:function(pe){var Me=w.x,Ue=w.y,ue=w.visible,Ee=[],Te=!1;e.loop(w.pointControls,function(_e){_e.scaleX+_e.scaleY+_e.regX+_e.regY+_e.rotation!=2&&(Te=!0),Ee.push([_e.scaleX,_e.scaleY,_e.regX,_e.regY,_e.rotation])}),w.dispose(!0),i=pe,ve(),w.lockControls=xe,w.x=Me,w.y=Ue,w.visible=ue,Te&&(e.loop(w.pointControls,function(_e,We){_e.scaleX=Ee[We][0],_e.scaleY=Ee[We][1],_e.regX=Ee[We][2],_e.regY=Ee[We][3],_e.rotation=Ee[We][4]}),w.update())}}),Object.defineProperty(w,"pointsAdjusted",{get:function(){var pe=[],Me,Ue,ue,Ee=w.pointObjects;return e.loop(Ee.length,function(Te){if(ue=Ee[Te],Ue=I[Te],ue[0].rotation==0&&ue[0].scaleX==0&&ue[0].scaleY==0)Me=[e.decimals(Ue[0].x),e.decimals(Ue[0].y),e.decimals(Ue[1].x),e.decimals(Ue[1].y),e.decimals(Ue[2].x),e.decimals(Ue[2].y),e.decimals(Ue[3].x),e.decimals(Ue[3].y)];else{var _e=ue[0].localToLocal(ue[2].x,ue[2].y,ue[0].parent),We=ue[0].localToLocal(ue[3].x,ue[3].y,ue[0].parent);Me=[e.decimals(Ue[0].x),e.decimals(Ue[0].y),e.decimals(Ue[1].x),e.decimals(Ue[1].y),e.decimals(_e.x-Ue[0].x),e.decimals(_e.y-Ue[0].y),e.decimals(We.x-Ue[0].x),e.decimals(We.y-Ue[0].y)]}Ue[4]&&Ue[4]!=="mirror"&&Me.push(Ue[4]),pe.push(Me)}),pe},set:function(){kt&&ht("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(w,"pointObjects",{get:function(){return I},set:function(){kt&&ht("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(w,"pointControls",{get:function(){return x},set:function(){kt&&ht("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(w,"pointCircles",{get:function(){return Q},set:function(){kt&&ht("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(w,"segmentPoints",{get:function(){var pe=[],Me=w.pointsAdjusted;return e.loop(Me.length-1,function(Ue){var ue=w.getSegmentPoint(Me[Ue],Me[Ue+1]);pe.push(ue)}),pe},set:function(){kt&&ht("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(w,"segmentRatios",{get:function(){var pe=[],Me=0;e.loop(w.segmentPoints,function(Ee){var Te=e.distanceAlongCurve(Ee);pe.push(Te),Me+=Te});var Ue=[],ue=0;return e.loop(pe,function(Ee){var Te=Ee/Me;ue+=Te,Ue.push(ue)}),Ue},set:function(){kt&&ht("Squiggle() - segmentRatios is read only")}}),w.approximateBounds=function(pe,Me,Ue){n(pe)&&(pe=80),n(Ue)&&(Ue=0),pe/=w.num;var ue=w.interpolate(pe,null,!0,null,!0),Ee=e.boundsAroundPoints(ue);if(w.setBounds(Ee.x-Ue,Ee.y-Ue,Ee.width+Ue*2,Ee.height+Ue*2),Me){if(!w.parent)return kt&&ht("approximateBounds() - add to stage to first to see points"),w;w.hitPathPoints?w.hitPathPoints.removeAllChildren():w.hitPathPoints=new e.Container().addTo(),w.hitPathPoints.top();for(var Te=0;Te<ue.length;Te++){var _e=ue[Te];_e=w.localToGlobal(_e.x,_e.y),new e.Circle(3).loc(_e.x,_e.y,w.hitPathPoints)}}return w},w.getPointAngle=function(pe){var Me=w.pointObjects[pe][0],Ue=w.pointObjects[pe][2],ue=w.pointObjects[pe][3],Ee,Te;return Me==w.stage?(Ee=new e.Point(Ue.x,Ue.y),Te=new e.Point(ue.x,ue.y)):(Ee=Me.localToGlobal(Ue.x,Ue.y),Te=Me.localToGlobal(ue.x,ue.y)),e.angle(Ee.x,Ee.y,Te.x,Te.y)},w.getSegmentPoint=function(pe,Me){if(!(n(pe)||n(Me))){(pe[2]!=0||pe[3]!=0)&&(pe[4]-=pe[2],pe[5]-=pe[3],pe[6]-=pe[2],pe[7]-=pe[3],pe[0]+=pe[2],pe[1]+=pe[3],pe[2]=0,pe[3]=0),(Me[2]!=0||Me[3]!=0)&&(Me[4]-=Me[2],Me[5]-=Me[3],Me[6]-=Me[2],Me[7]-=Me[3],Me[0]+=Me[2],Me[1]+=Me[3],Me[2]=0,Me[3]=0);var Ue={x:pe[0],y:pe[1]},ue={x:pe[0]+pe[6],y:pe[1]+pe[7]},Ee={x:Me[0]+Me[4],y:Me[1]+Me[5]},Te={x:Me[0],y:Me[1]};return(ce.x!=0||ce.y!=0)&&(Ue.x+=ce.x,ue.x+=ce.x,Ee.x+=ce.x,Te.x+=ce.x,Ue.y+=ce.y,ue.y+=ce.y,Ee.y+=ce.y,Te.y+=ce.y),[Ue,ue,Ee,Te]}},w.getAdjacentSegmentData=function(pe){n(pe)&&(pe=0);var Me=w.pointsAdjusted;return w.num==2?[[w.getSegmentPoint(Me[0],Me[1])],[0]]:pe==0?[[w.getSegmentPoint(Me[0],Me[1]),w.getSegmentPoint(Me[1],Me[2])],[0,1]]:pe>=w.num-2?[[w.getSegmentPoint(Me[w.num-3],Me[w.num-2]),w.getSegmentPoint(Me[w.num-2],Me[w.num-1])],[w.num-3,w.num-2]]:[[w.getSegmentPoint(Me[pe-1],Me[pe]),w.getSegmentPoint(Me[pe],Me[pe+1]),w.getSegmentPoint(Me[pe+1],Me[pe+2])],[pe-1,pe,pe+1]]},w.getCurvePoint=function(pe,Me,Ue,ue,Ee){(n(pe)||isNaN(pe))&&(pe=0),n(Me)&&(Me=w.segmentRatios),n(Ue)&&(Ue=w.segmentPoints),n(ue)&&(ue=!1),n(Ee)&&(Ee=!1);var Te=Me,_e=Ue,We=e.loop(Te,function(Be,Qe){if(Be>=pe)return Qe}),oe=We>0?Te[We-1]:0,Ye=We>0?Te[We]-Te[We-1]:Te[We];if(Ye){var Ve=(pe-oe)/Ye,De=e.pointAlongCurve(_e[We],Ve,ue,!0),de=w.localToGlobal(De.x,De.y);return de.angle=De.angle,de.z=We,n(de)?void 0:de}};function we(pe,Me,Ue){return{x:pe.x+(Me.x-pe.x)*Ue,y:pe.y+(Me.y-pe.y)*Ue}}function ke(pe,Me,Ue,ue,Ee,Te,_e,We){var oe=pe.length-1,Ye=0,Ve=0;ue==100&&w.type=="Squiggle"&&(ue=99.99),ue=(ue+1e5)%100,e.loop(Ue,function(Fe,me){if(ue/100<Fe)return oe=me,Ve=Fe,!0;Ye=Fe});var De=w.segmentPoints[oe],de=Ve>0?(ue/100-Ye)/(Ve-Ye):0,Be=e.pointAlongCurve(De,de,null,We),Qe=[Be.x,Be.y,0,0];if(!Te){if(_e){w.interpolatedPoints.push({x:Be.x,y:Be.y,r:ue/100});return}if(Ee!="none"){var Ke=we(De[0],De[1],de),lt=we(De[1],De[2],de),gt=we(De[2],De[3],de),He=we(Ke,lt,de),it=we(lt,gt,de);Qe[4]=He.x-Be.x,Qe[5]=He.y-Be.y,Qe[6]=it.x-Be.x,Qe[7]=it.y-Be.y;var ft=w.localToLocal(Ke.x,Ke.y,Me[oe]);pe[oe][6]=ft.x,pe[oe][7]=ft.y;var Se=w.localToLocal(gt.x,gt.y,Me[(oe+1)%pe.length]);pe[(oe+1)%pe.length][4]=Se.x,pe[(oe+1)%pe.length][5]=Se.y}Ee&&(Qe[8]=Ee),pe.splice(oe+1,0,Qe)}}this.addPoint=function(pe,Me){n(pe)&&(pe=100);var Ue=w.points,ue=w.segmentRatios,Ee=w.pointControls;return Me=Me||he,ke(Ue,Ee,ue,pe,Me),w.points=Ue,w.num=Ue.length,w},this.removePoint=function(pe){if(!(n(pe)||pe<0)){var Me=e.copy(w.points);return Me.splice(pe,1),w.points=Me,w.stage&&w.stage.update(),w}},this.addPoints=function(pe,Me,Ue,ue,Ee,Te,_e){n(Te)&&(Te=e.copy(w.points));var We=e.copy(w.segmentRatios),oe=0;if(Ee&&(w.interpolatedPoints=[]),ue)var Ye=We.length*pe;return e.loop(We,function(Ve,De){Ee&&ke(Te,w.pointControls,w.segmentRatios,oe*100,Me,!n(Ue)&&De!=Ue,Ee,_e);var de=ue?Math.round(Ye*(Ve-oe)):pe,Be=1/(de+1);e.loop(de,function(Qe){var Ke=oe+(Ve-oe)*Be*(Qe+1);ke(Te,w.pointControls,w.segmentRatios,Ke*100,Me,!n(Ue)&&De!=Ue,Ee,_e),!Ee&&pe>0&&(w.points=Te)}),oe=Ve}),Ee&&w.type=="Squiggle"&&ke(Te,w.pointControls,w.segmentRatios,100,Me,!1,Ee,_e),w.stage&&w.stage.update(),w.num=Te.length,w},this.interpolate=function(pe,Me,Ue,ue,Ee){return n(pe)&&(pe=1),w.addPoints(pe,"none",Me,Ue,!0,ue,Ee),w.interpolatedPoints},ie&&w.approximateBounds(),this.dispose=function(pe,Me,Ue){if(w.shape){if(e.gD(w),h&&w.toggleStageEvent&&h.off("stagemousedown",w.toggleStageEvent),w.controls.noDrag(),w.controls.removeAllEventListeners(),w.selectPoints&&w.selectionManager&&w.selectionManager.dispose(),w.selectedBalls=null,w.selectedRect1s=null,w.selectedRect2s=null,w.selectionManager=null,w.off("mousedown",w.toggleEvent),w.off("click",w.clickEvent),pe){w.shape.dispose(),w.shape=null;for(var ue=0;ue<w.points.length;ue++)w.pointObjects[ue][0].removeAllEventListeners(),w.pointObjects[ue][1].removeAllEventListeners(),w.pointObjects[ue][2].removeAllEventListeners(),w.pointObjects[ue][3].removeAllEventListeners();w.controls.removeFrom(w),w.sticks.dispose(),I=null,Q=null}else w.removeAllEventListeners(),I=null,Q=null,Ue||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Squiggle,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Blob=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N){var q="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",U;if(U=mt(e.Blob,arguments,q,this))return U;qe("53.5"),this.group=ne;var z=O===!1?{}:e.getStyle("Blob",this.group,N);n(l)&&(l=z.radius!=null?z.radius:100),this.zimCustomShape_constructor(-l,-l,l*2,l*2,!1),this.type="Blob",this.mouseChildren=!0,n(L)&&(L=z.dashed!=null?z.dashed:!1),n(r)&&(r=z.borderColor!=null?z.borderColor:null),n(i)&&(i=z.borderWidth!=null?z.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=z.color!=null?z.color:i>0?"rgba(0,0,0,0)":e.green),t.style&&(this.colorCommand=t,t=e.black),r&&r.style&&(this.borderColorCommand=r,r=e.black),n(o)&&(o=z.points!=null?z.points:4);var ie=typeof o!="number",ae=typeof o=="number"?o:o.length,he=f;n(f)&&(f=z.controlLength!=null?z.controlLength:l*4/ae),n(d)&&(d=z.controlType!=null?z.controlType:null);var $=d;n(d)&&(d="straight"),n(p)&&(p=z.lockControlType!=null?z.lockControlType:!1),n(Z)&&(Z=z.interactive!=null?z.interactive:!0),n(_)&&(_=z.showControls!=null?z.showControls:Z);var G=_;n(P)&&(P=z.lockControls!=null?z.lockControls:!Z),n(T)&&(T=z.handleSize!=null?z.handleSize:e.mobile()?20:10),n(R)&&(R=z.allowToggle!=null?z.allowToggle:Z),n(b)&&(b=z.move!=null?z.move:Z),n(k)&&(k=z.circleColor!=null?z.circleColor:e.light),n(m)&&(m=z.circleBorderColor!=null?z.circleBorderColor:e.dark),n(A)&&(A=z.stickColor!=null?z.stickColor:e.darker),n(D)&&(D=z.stickThickness!=null?z.stickThickness:1),n(C)&&(C=z.selectColor!=null?z.selectColor:e.white),n(E)&&(E=z.selectPoints!=null?z.selectPoints:Z),this.circleColor=k,this.circleBorderColor=m,this.stickColor=A,this.stickThickness=D,n(S)&&(S=z.onTop!=null?z.onTop:!0),n(X)&&(X=z.editPoints!=null?z.editPoints:Z),n(V)&&(V=z.strokeObj!=null?z.strokeObj:{});var v=w(t,r);this.veeObj={color:v[0],borderColor:v[1]};function w(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r);var h=this;this.interactive=Z,this.num=ae,this.editPoints=X,this.selectPoints=E,this.lockControls=P,this.onTop=S,this.move=b,this.allowToggle=R,this.lockControlType=p,this.types=["mirror","straight","free","none"];var I,Q,x;h._color=t,h._borderColor=r,h._borderWidth=i,h._dashed=L,h._dashed&&!Array.isArray(h._dashed)&&(h._dashed=[10,10]);var F,Ae,Y,K,ge,ye=h.move,ee=2,ce,ve;o=Re(o);function Re(ue){(ue=="circle"||ue=="rectangle"||ue=="triangle")&&(ue=="circle"&&(ue=new e.Circle(l)),ue=="rectangle"&&(ue=new e.Rectangle(l*2,l*2).centerReg({add:!1})),ue=="triangle"&&(ue=new e.Triangle(l*2,l*2,l*2)));var Ee;if(ue.type=="Circle"||ue.type=="Rectangle"||ue.type=="Triangle"||ue.type=="Flare"){var Te=ue.getBounds();if(ue.type=="Circle")Ee=4,he=f=l*2*.5523;else if(ue.type=="Rectangle")ue.centerReg({add:!1}),Ee=[[Te.x-Te.width/2,Te.y-Te.height/2],[Te.x+Te.width/2,Te.y-Te.height/2],[Te.x+Te.width/2,Te.y+Te.height/2],[Te.x-Te.width/2,Te.y+Te.height/2]],h.setBounds(Te.x-Te.width/2,Te.y-Te.height/2,Te.width,Te.height),h.regX=ue.regX-Te.width/2,h.regY=ue.regY-Te.height/2;else if(ue.type=="Triangle")Ee=[[ue.three.x-ue.width/2,ue.three.y+ue.height/2+ue.adjusted],[ue.two.x-ue.width/2,ue.two.y+ue.height/2+ue.adjusted],[ue.one.x-ue.width/2,ue.one.y+ue.height/2+ue.adjusted]],h.setBounds(Te.x-Te.width/2,Te.y-Te.height/2,Te.width,Te.height);else if(ue.type=="Flare"){var _e=Te.width/2+Te.x,We=Te.height/2+Te.y;Ee=[];var oe=e.copy(ue.points),Ye={x:null,y:null};e.loop(oe,(Ve,De)=>{var de=Math.round(Ve.x),Be=Math.round(Ve.y);de==Ye.x&&Be==Ye.y||(Ye={x:de,y:Be},Ee.push([de-_e,Ve.y-We]))}),h.setBounds(-ue.width/2,-ue.height/2,ue.width,ue.height)}return Ee}else return ue}if(typeof o=="string"){var se=new e.SVGContainer;o=se.processPath(o),o[0][0]==o[o.length-1][0]&&o[0][1]==o[o.length-1][1]&&(o[0][4]=o[o.length-1][4],o[0][5]=o[o.length-1][5],o.pop())}$&&typeof o!="number"&&e.loop(o,function(ue){ue[8]=$,$=="none"&&(ue[4]=ue[5]=ue[6]=ue[7]=0)}),Oe();function Oe(){if(ve&&ve.removeAllEventListeners(),h.selectPoints?(h.selectedBalls=new e.SelectionSet,h.selectedRect1s=new e.SelectionSet,h.selectedRect2s=new e.SelectionSet,h.selectionManager=new e.SelectionManager([h.selectedBalls,h.selectedRect1s,h.selectedRect2s],"ctrl",!1)):h.selectionManager=new e.SelectionManager(null,"ctrl"),ae=typeof o=="number"?o:o.length,ae<=0)return;n(he)&&(f=l*4/ae),F=h.shape=new e.Shape({style:!1}).addTo(h);var ue=h.sticks=new e.Shape({style:!1}).addTo(h);T<=0&&ue.removeFrom();var Ee=F.graphics;Ee.c();var Te=ue.graphics;Te.c();var _e=T/10*8,We=T,oe=e.mobile();ve=h.controls=new e.Container({style:!1}).addTo(h),h.interactive&&ve.drag({onTop:!oe}),I=[],x=[],Q=[];var Ye,Ve,De,de,Be,Qe,Ke,lt,gt;for(Ye=0;Ye<ae;Ye++){if(de=new e.Container({style:!1}).addTo(ve),de.num=Ye,typeof o=="number"){var He=e.Pick.choose(f);De=new e.Container(He,l,null,null,!1).reg(He/2,l).addTo(h),De.rotation=Ye/ae*360,Ke=new e.Circle(_e,h.selectPoints&&h.selectedBalls.isSelected(Ye)?C:h.circleColor,h.circleBorderColor,2,null,null,null,null,!1).centerReg(De).loc({x:He/2,y:0}),Be=new e.Rectangle(We,We,h.selectPoints&&h.selectedRect1s.isSelected(Ye)?C:st(d),T==0?null:e.dark,T==0?null:2,null,null,null,null,!1).centerReg(De).loc({x:0,y:0}),Qe=new e.Rectangle(We,We,h.selectPoints&&h.selectedRect2s.isSelected(Ye)?C:st(d),T==0?null:e.dark,T==0?null:2,null,null,null,null,!1).centerReg(De).loc({x:He,y:0});var it=De.localToLocal(Ke.x,Ke.y,ve);Ke.x=it.x,Ke.y=it.y,Ke.addTo(de,null,!1);var ft=De.localToLocal(Be.x,Be.y,ve);Be.x=d=="none"?0:ft.x-Ke.x,Be.y=d=="none"?0:ft.y-Ke.y,Be.addTo(de,null,!1);var Se=De.localToLocal(Qe.x,Qe.y,ve);Qe.x=d=="none"?0:Se.x-Ke.x,Qe.y=d=="none"?0:Se.y-Ke.y,Qe.addTo(de,null,!1),de.x=Ke.x,de.y=Ke.y,Ke.x=0,Ke.y=0,d=="none"&&Ke.addTo(de,null,!1)}else gt=o[Ye],lt=gt[8]?gt[8]:d,de.loc({x:gt[0],y:gt[1]}),Ke=new e.Circle(_e,h.circleColor,h.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(de).loc({x:gt[2],y:gt[3]}),Be=new e.Rectangle(We,We,st(lt),T==0?null:e.dark,T==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(de,0).loc({x:gt[4],y:gt[5]}),Qe=new e.Rectangle(We,We,st(lt),T==0?null:e.dark,T==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(de,0).loc({x:gt[6],y:gt[7]});Ke.mySet=de,Ke.rect1=Be,Ke.rect2=Qe,Ke.index=Ye,T==0&&(Ke.expand(10),Be.expand(10),Qe.expand(10)),oe?Ke.on("mousedown",me):Ke.on("dblclick",$e),Be.ball=Ke,Be.other=Qe,Qe.ball=Ke,Qe.other=Be,oe&&(Ke.expand(),Be.expand(),Qe.expand()),Ve=[de,Ke,Be,Qe,gt?gt[8]:d],I.push(Ve),Q.push(Ke),x.push(de)}var Fe=!1;function me(Xe){Fe?(Xe.preventDefault(),$e(Xe)):(Fe=!0,setTimeout(function(){Fe=!1},300))}function $e(Xe){if(!h.lockControlType){var Ze=Xe.target,ot=I[Ze.index][4]?I[Ze.index][4]:d;Math.abs(Ze.rect1.x)<=2&&Math.abs(Ze.rect1.y)<=2&&Math.abs(Ze.rect2.x)<=2&&Math.abs(Ze.rect2.y)<=2&&(ot="none"),ot=="none"&&Ze.parent.addChildAt(Ze,0),ot=h.types[(h.types.indexOf(ot)+(h.shiftKey?-1:1)+h.types.length)%h.types.length],ot=="none"&&(Ze.rect1.x=Ze.rect1.y=Ze.rect2.x=Ze.rect2.y=0,Ze.parent.addChild(Ze),Xe.stopImmediatePropagation()),I[Ze.index][4]=ot,Ze.rect1.color=st(ot),Ze.rect2.color=st(ot),h.drawShape();var Ge=new je.Event("change");Ge.controlType="bezierSwitch",h.dispatchEvent(Ge),Ze.stage.update()}}function st(Xe){var Ze={mirror:"#993399",free:"#ebcb35",none:"#50c4b7"};return Ze[Xe]?Ze[Xe]:"#e472c4"}h.drawShape=function(){var Xe,Ze,ot,Ge,et,pt,Le,tt,vt,nt,Tt,xt,Ct;Ee.c(),h.colorCommand||(h.colorCommand=Ee.f(h._color).command,t&&t.type&&h.specialColor(h.colorCommand,t,h)),(n(h._borderWidth)||h._borderWidth>0)&&(!n(h._borderColor)||!n(h._borderWidth))&&(n(h._borderColor)&&(h._borderColor=e.black),h.borderColorCommand||(h.borderColorCommand=Ee.s(h._borderColor).command,h._borderColor&&h._borderColor.type&&h.specialColor(h.borderColorCommand,h._borderColor,h)),h.borderWidthCommand||(h.borderWidthCommand=Ee.ss(h._borderWidth,V.caps,V.joints,V.miterLimit,V.ignoreScale).command),h._dashed&&(h.borderDashedCommand||(h.borderDashedCommand=Ee.sd(Array.isArray(h._dashed)?h._dashed:[10,10],h._dashedOffset).command))),ot=I[0][0],Le=ot.localToLocal(I[0][1].x,I[0][1].y,F),Ee.mt(Le.x,Le.y),Te.c().s(h.stickColor).ss(h.stickThickness);for(var ct=0;ct<I.length;ct++)Xe=ct,Ze=(ct+1)%I.length,ot=I[Xe][0],Ke=I[Xe][1],Ge=I[Xe][2],et=I[Xe][3],pt=I[Ze][0],tt=I[Ze][1],vt=I[Ze][2],Tt=ot.localToLocal(et.x,et.y,F),xt=pt.localToLocal(vt.x,vt.y,F),Ct=pt.localToLocal(tt.x,tt.y,F),Ee.bt(Tt.x,Tt.y,xt.x,xt.y,Ct.x,Ct.y),Le=ot.localToLocal(Ke.x,Ke.y,F),nt=ot.localToLocal(Ge.x,Ge.y,F),Te.mt(Le.x,Le.y).lt(nt.x,nt.y),Te.mt(Le.x,Le.y).lt(Tt.x,Tt.y);Ee.cp(),Ee.append(h.colorCommand),h._dashed&&Ee.append(h.borderDashedCommand),h.borderWidthCommand&&Ee.append(h.borderWidthCommand),h.borderColorCommand&&Ee.append(h.borderColorCommand)},h.drawShape(),t.type&&(h.color=t);var Je;ve.on("mousedown",function(Xe){if(!h.lockControls){h.selectPoints&&(h.keyFocus=!0),Je={x:Xe.target.x,y:Xe.target.y};var Ze;if(Xe.target.rect1)Ze=Xe.target,Ze.startX=Ze.x,Ze.startY=Ze.y,Ze.rect1.startX=Ze.rect1.x,Ze.rect1.startY=Ze.rect1.y,Ze.rect2.startX=Ze.rect2.x,Ze.rect2.startY=Ze.rect2.y;else{var ot=Xe.target;ot.startX=ot.x,ot.startY=ot.y,Ze=ot.ball;var Ge=Ze.index,et=d;if(n(I[Ge][4])||(et=I[Ge][4]),et=="straight"){var pt=ot.other,Le=pt.x-Ze.x,tt=pt.y-Ze.y;pt.stickLength=Math.sqrt(Math.pow(Le,2)+Math.pow(tt,2))}}if(h.selectPoints){var vt=h.selectionManager.currentSet;if(vt&&vt.selections&&vt.selections.length>0)for(var nt=0;nt<vt.selections.length;nt++){var Tt=h.pointObjects[vt.selections[nt]];Tt[1].startX=Tt[1].x,Tt[1].startY=Tt[1].y,Tt[2].startX=Tt[2].x,Tt[2].startY=Tt[2].y,Tt[3].startX=Tt[3].x,Tt[3].startY=Tt[3].y}}}}),h.selectPoints&&ve.tap(function(Xe){var Ze;if(Xe.target.rect1)Ze=Xe.target,h.selectedBalls.toggle(Ze.parent.num);else{var ot=Xe.target;ot.color="white",Ze=ot.ball,Ze.rect1==ot?h.selectedRect1s.toggle(Ze.parent.num):h.selectedRect2s.toggle(Ze.parent.num)}for(var Ge=0;Ge<h.pointObjects.length;Ge++){var et=h.pointObjects[Ge];et[1].color=h.selectedBalls.isSelected(Ge)?C:h.circleColor,et[2].color=h.selectedRect1s.isSelected(Ge)?C:st(et[4]),et[3].color=h.selectedRect2s.isSelected(Ge)?C:st(et[4])}Xe.target.stage.update()}),ve.on("pressmove",function(Xe){if(!h.lockControls)if(h.selectPoints){var Ze=J();if(Ze.indexOf(Xe.target)==-1)ce(Xe.target),h.drawShape();else if(Ze.length>0){for(var ot=Xe.target.x-Xe.target.startX,Ge=Xe.target.y-Xe.target.startY,et=0;et<Ze.length;et++){var pt=Ze[et];pt.x=pt.startX+ot,pt.y=pt.startY+Ge,ce(pt)}h.drawShape()}}else ce(Xe.target),h.drawShape()}),ve.on("pressup",function(Xe){if(!h.lockControls){var Ze=Xe.target.x!=Je.x||Xe.target.y!=Je.y,ot=new je.Event("change");Xe.target.rect1?(ot.controlType="bezierPoint",rt(Xe.target)):ot.controlType="bezierHandle",Ze&&h.dispatchEvent(ot)}});function rt(Xe){if(h.selectPoints){var Ze=J();if(Ze&&Ze.indexOf(Xe)==-1)xe(Xe);else if(Ze&&Ze.length>0)for(var ot=0;ot<Ze.length;ot++)xe(Ze[ot]);else xe(Xe)}else xe(Xe)}h.changeControl=function(Xe,Ze,ot,Ge,et,pt,Le,tt,vt){var nt="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",Tt;if(Tt=mt(h.changeControl,arguments,nt))return Tt;if(n(Xe)){for(var xt=0;xt<I.length;xt++)h.changeControl(xt,Ze,ot,Ge,et,pt,Le,tt);return h}var Ct=I[Xe];return Ct[4]=Ze,Ze=="none"?(n(Le)||(Ct[1].x=Le),n(tt)||(Ct[1].y=tt),Ct[2].x=Ct[1].x,Ct[2].y=Ct[1].y,Ct[3].x=Ct[1].x,Ct[3].y=Ct[1].y,Ct[1].parent.addChild(Ct[1])):(n(Le)||(Ct[1].x=Le),n(tt)||(Ct[1].y=tt),n(ot)||(Ct[2].x=ot),n(Ge)||(Ct[2].y=Ge),n(et)||(Ct[3].x=et),n(pt)||(Ct[3].y=pt),Ct[1].parent.addChildAt(Ct[1],0)),Ct[2].color=st(Ze),Ct[3].color=st(Ze),vt&&(h.update(),h.stage&&h.stage.update()),h},h.transformPoints=function(Xe,Ze,ot,Ge,et){return n(et)&&(et=!0),h.points=e.transformPoints(h.points,Xe,Ze,ot,Ge),et&&h.approximateBounds(),h},h.traverse=function(Xe,Ze,ot,Ge,et){var pt=e.copy(h.segmentRatios);pt.unshift(0),n(ot)&&(ot=Ze+1);var Le=pt[Ze]*100,tt=pt[ot]*100,vt;!et&&Le>tt?vt=100-Le+tt:!et&&Le<tt?vt=tt-Le:et&&Le>tt?vt=-(Le-tt):et&&Le<tt&&(vt=-(100-tt+Le));var nt=new je.Event("traversed");return nt.obj=Xe,Xe.animate({ease:"linear",props:{path:h,startPercent:Le,percent:vt},time:Ge,call:function(){h.dispatchEvent(nt)}}),h},h.reversePoints=function(Xe){return n(Xe)&&(Xe=!0),o=e.copy(h.points),o.reverse(),Xe&&o.unshift(o.pop()),e.loop(o,function(Ze){var ot=Ze[6];Ze[6]=Ze[4],Ze[4]=ot;var Ge=Ze[7];Ze[7]=Ze[5],Ze[5]=Ge}),h.points=o,h.update(),h},h.splitPoints=function(Xe){var Ze=e.copy(h.points);if(!(Xe<1||Xe>Ze.length-1)){var ot=e.copy(Ze.slice(0,Xe+1)),Ge=e.copy(Ze.slice(Xe));e.trimPointEnds(ot),e.trimPointEnds(Ge);var et=h.clone();return h.points=ot,h.update(),et.points=Ge,h.parent&&et.addTo(h.parent),et}},h.makeSquiggle=function(Xe){var Ze=e.copy(h.points);n(Xe)&&(Xe=0),Xe=(Xe+Ze.length*1e3)%Ze.length;var ot=e.copy(Ze.slice(Xe)),Ge=e.copy(Ze.slice(0,Xe+1));Ze=ot.concat(Ge),e.trimPointEnds(Ze);var et=new e.Squiggle({points:Ze,color:h.borderColor,thickness:h.borderWidth,showControls:h.controlsVisible,interactive:h.interactive,onTop:h.onTop,dashed:h.dashed,stickColor:h.stickColor,stickThickness:h.stickThickness});return et},h.update=function(Xe){return Xe?h.points=h.pointsAdjusted:h.drawShape(),h.zimAnimateChanged=!0,h},h.move&&h.interactive&&F.drag({onTop:!1}),Ae=F.on("mousedown",function(Xe){ge=Xe.target.stage,Je={x:F.x,y:F.y},h.selectPoints&&(h.keyFocus=!0),Ce()}),Y=F.on("pressmove",function(){ve.x=F.x,ve.y=F.y,ue.x=F.x,ue.y=F.y}),K=F.on("pressup",function(){var Xe=F.x!=Je.x||F.y!=Je.y,Ze=F.localToLocal(h.regX,h.regY,h.parent);if(h.x=Ze.x,h.y=Ze.y,ve.x=ve.y=ue.x=ue.y=F.x=F.y=0,Xe){var ot=new je.Event("change");ot.controlType="move",h.dispatchEvent(ot)}ge.update()}),b||we(!0);function Ce(){if(h.onTop){var Xe=h.parent.numChildren-1;h.parent.getChildAt(Xe).type=="Keyboard"&&Xe--,h.parent.setChildIndex(h,Xe)}}h.toggleEvent=h.on("mousedown",function(){h.allowToggle&&(G||(h.showControls(),h.dispatchEvent("controlsshow")))}),h.added(function(){ge=h.stage,h.toggleStageEvent&&h.stage.off("stagemousedown",h.toggleStageEvent),h.toggleStageEvent=h.stage.on("stagemousedown",function(Xe){!h.allowToggle||!h.stage||G&&!h.hitTestPoint(Xe.stageX/e.scaX,Xe.stageY/e.scaY,!1)&&(h.hideControls(),h.dispatchEvent("controlshide"))})}),h.clickEvent=h.on("click",function(){h.ctrlKey&&setTimeout(function(){h.clone(!0).addTo(h.stage).mov(100),h.allowToggle&&(h.hideControls(),h.dispatchEvent("controlshide"));var Xe=new je.Event("change");Xe.controlType="move",h.dispatchEvent(Xe),h.stage.update()},50)}),h.hideControls=function(){return h.toggled=!1,ve.visible=!1,ue.visible=!1,G=!1,h.stage&&h.stage.update(),!h.allowToggle&&h.move&&we(),h},G||h.hideControls(),h.showControls=function(){return h.toggled=!0,ve.visible=!0,ue.visible=!0,G=!0,ve.x=F.x,ve.y=F.y,ue.x=F.x,ue.y=F.y,h.addChildAt(F,0),h.move&&!h.allowToggle&&te(),h.stage&&h.stage.update(),h},h.toggle=function(Xe){return Xe===!0?h.showControls():Xe===!1||G?h.hideControls():h.showControls(),h},h.recordData=function(Xe){n(Xe)&&(Xe=!1);var Ze={type:"Blob",index:h.parent?h.parent.getChildIndex(h):-1,x:h.x,y:h.y,points:h.getPoints(),color:h.color,borderColor:h.borderColor,borderWidth:h.borderWidth,move:h.move,allowToggle:h.allowToggle,controlsVisible:G};return Xe?JSON.stringify(Ze):Ze},h.setData=function(Xe,Ze){if(!n(Xe)){if(Ze)try{Xe=JSON.parse(Xe)}catch(pt){return}var ot=Xe.index;n(ot)&&(ot=-1),delete Xe.index;var Ge=Xe.points;n(Ge)||h.setPoints(Ge),delete Xe.points,this.num=Ge.length;for(var et in Xe)h[et]=Xe[et];return h.parent&&h.parent.setChildIndex(h,ot),h}},h.getPoints=function(Xe){n(Xe)&&(Xe=!1);var Ze=h.points;if(Xe){if(!ot){var ot=h.pane=new e.Pane({displayClose:!1,container:h.stage,width:Math.min(500,h.stage.width-20),height:Math.min(500,h.stage.height-20),draggable:!0}),Ge=h.textArea=new e.TextArea(Math.min(400,h.stage.width-70),Math.min(400,h.stage.height-70));Ge.centerReg(ot)}ot.show(),Ge.text=JSON.stringify(Ze)}return Ze},h.recordPoints=h.getPoints,h.setPoints=function(Xe){for(var Ze,ot,Ge=0;Ge<Xe.length;Ge++)Ze=I[Ge],ot=Xe[Ge],!n(Ze)&&(Ze[0].x=ot[0],Ze[0].y=ot[1],Ze[1].x=ot[2],Ze[1].y=ot[3],Ze[2].x=ot[4],Ze[2].y=ot[5],Ze[3].x=ot[6],Ze[3].y=ot[7],Ze[4]=ot[8],Ze[2].color=st(Ze[4]),Ze[3].color=st(Ze[4]));return h.update(),h},O!==!1&&e.styleTransforms(h,z),h.clone=function(Xe,Ze){var ot=[],Ge=!1;e.loop(h.pointControls,function(pt){pt.scaleX+pt.scaleY+pt.regX+pt.regY+pt.rotation!=2&&(Ge=!0),ot.push([pt.scaleX,pt.scaleY,pt.regX,pt.regY,pt.rotation])});var et=h.cloneProps(new e.Blob(Ze?h.colorCommand:Xe||!e.isPick(v[0])?h.color:v[0],Ze?h.borderColorCommand:Xe||!e.isPick(v[1])?h.borderColor:v[1],h.borderWidth,h.getPoints(),l,f,d,p,ve.visible,P,T,h.allowToggle,h.move,L,S,h.circleColor,h.circleBorderColor,h.stickColor,h.stickThickness,C,E,h.editPoints,Z,V,O,h.group,N));return Ge&&(e.loop(et.pointControls,function(pt,Le){pt.scaleX=ot[Le][0],pt.scaleY=ot[Le][1],pt.regX=ot[Le][2],pt.regY=ot[Le][3],pt.rotation=ot[Le][4]}),et.update()),h.linearGradientParams&&et.linearGradient.apply(et,h.linearGradientParams),h.radialGradientParams&&et.radialGradient.apply(et,h.radialGradientParams),et},h.shapeMousedownEvent=h.shape.on("mousedown",function(Xe){ge=Xe.target.stage,h.editPoints&&(h.controlsVisible?(h.pressX=Xe.stageX/e.scaX,h.pressY=Xe.stageY/e.scaY):(h.pressX=null,h.pressY=null))}),h.addPointFactor=10,h.addMinDistance=15,h.shapePressupEvent=h.shape.on("pressup",function(Xe){if(h.editPoints&&h.pressX&&Math.abs(h.pressX-Xe.stageX/e.scaX)<ee&&Math.abs(h.pressY-Xe.stageY/e.scaY)<ee){h.selectPoints&&(h.lastPoints=e.copy(h.points));var Ze=h.points,ot=h.globalToLocal(Xe.stageX/e.scaX,Xe.stageY/e.scaY),Ge=e.closestPointAlongCurve(ot,h.segmentPoints);if(h.editPoints=="anywhere")Ze.splice(Ge+1,0,[ot.x,ot.y,0,0,0,0,0,0]),h.points=Ze,h.changeControl({index:Ge+1,type:"mirror",update:!0});else{var et=h.pointsAdjusted,pt=h.getSegmentPoint(et[Ge],et[(Ge+1)%et.length]),Le=e.distanceAlongCurve(pt),tt=Math.round(Le/h.addPointFactor),vt=h.interpolate(tt,Ge,!1,Ze),nt=1e4,Tt;if(e.loop(vt,function(Rt,At){if(At!=0){var bt=e.dist(Rt,ot);bt<nt&&(nt=bt,Tt=At)}}),nt<h.addMinDistance){var xt=h.segmentRatios,Ct=xt[Ge],ct=Ge>0?xt[Ge-1]:0;h.addPoint(100*(ct+(Ct-ct)*(Tt/(tt+1))))}}h.lastSelectedIndex=Ge+1,h.lastSelected=h.controls.getChildAt(h.lastSelectedIndex),h.stage.update()}}),h.controlsClickEvent=h.controls.on("click",function(Xe){h.lastSelected=Xe.target.parent,h.lastSelectedIndex=h.controls.getChildIndex(Xe.target.parent),h.editPoints&&h.selectionManager.shiftKey&&ze(Xe)});function ze(Xe){if(Xe.target.type=="Circle"){var Ze=h.lastSelectedIndex=h.controls.getChildIndex(Xe.target.parent);if(h.controls.numChildren<=2)return;var ot=h.points;h.selectPoints&&(h.lastPoints=e.copy(ot)),ot.splice(Ze,1),h.points=ot,h.stage.update(),h.lastSelected=h.lastSelectedIndex=null}}h.controls.hold(ze),G||h.hideControls(),h.dispatchEvent("update")}function J(){var ue=[],Ee=h.selectionManager.currentSet;if(Ee&&Ee.selections&&Ee.selections.length>0)for(var Te=0;Te<Ee.selections.length;Te++){var _e=h.pointObjects[Ee.selections[Te]];if(Ee==h.selectedBalls)ue.push(_e[1]);else if(Ee==h.selectedRect1s)ue.push(_e[2]);else if(Ee==h.selectedRect2s)ue.push(_e[3]);else continue}return ue}function xe(ue){if(h.selectPoints&&ue.type=="Circle"){var Ee=ue,Te=Ee.mySet,_e=Ee.rect1,We=Ee.rect2;_e.x-=Ee.x,_e.y-=Ee.y,We.x-=Ee.x,We.y-=Ee.y,Te.x+=Ee.x,Te.y+=Ee.y,Ee.x=0,Ee.y=0}}h.selectionManager.on("keydown",function(ue){if(h.selectPoints&&h.keyFocus&&ue.keyCode>=37&&ue.keyCode<=40){var Ee=J();if(Ee.length>0){for(var Te=0;Te<Ee.length;Te++){var _e=Ee[Te];ue.keyCode==37?_e.x-=h.selectionManager.shiftKey?10:1:ue.keyCode==39?_e.x+=h.selectionManager.shiftKey?10:1:ue.keyCode==38?_e.y-=h.selectionManager.shiftKey?10:1:ue.keyCode==40&&(_e.y+=h.selectionManager.shiftKey?10:1),ce(_e)}h.drawShape(),h.dispatchEvent("update"),h.stage&&h.stage.update()}}}),h.selectionManager.on("keyup",function(ue){if(h.selectPoints&&h.keyFocus&&ue.keyCode>=37&&ue.keyCode<=40){var Ee=J();if(Ee.length>0)for(var Te=0;Te<Ee.length;Te++)xe(Ee[Te])}}),h.selectionManager.on("undo",function(){if(h.selectPoints&&h.keyFocus&&h.lastPoints){var ue=e.copy(h.lastPoints);h.lastPoints=e.copy(h.points),h.points=ue,h.stage&&h.stage.update()}}),ce=function(ue){if(!h.lockControls){var Ee;if(ue.rect1){Ee=ue;var Te=Ee.x-Ee.startX,_e=Ee.y-Ee.startY;Ee.rect1.x=Ee.rect1.startX+Te,Ee.rect1.y=Ee.rect1.startY+_e,Ee.rect2.x=Ee.rect2.startX+Te,Ee.rect2.y=Ee.rect2.startY+_e}else{var We=ue,oe=We.other;Ee=We.ball;var Ye=Ee.index,Ve=d;if(n(I[Ye][4])||(Ve=I[Ye][4]),Ve=="straight"||Ve=="mirror"){var De=We.x-Ee.x,de=We.y-Ee.y;if(Ve=="mirror")oe.x=Ee.x-De,oe.y=Ee.y-de;else{var Be=Math.atan2(de,De),Qe=-oe.stickLength*Math.cos(Be+Math.PI),Ke=-oe.stickLength*Math.sin(Be+Math.PI);oe.x=Ee.x-Qe,oe.y=Ee.y-Ke}}}}},Object.defineProperty(h,"move",{get:function(){return b},set:function(ue){b!=ue&&(b=ue,ue?te():we())}}),Object.defineProperty(h,"interactive",{get:function(){return Z},set:function(ue){Z=ue,G=Z,h.allowToggle=Z,h.editPoints=Z,h.lockControls=!Z,h.selectPoints=Z,h.move=Z;var Ee=h.points;h.points=Ee}}),Object.defineProperty(h,"allowToggle",{get:function(){return R},set:function(ue){R!=ue&&(R=ue,R?h.move&&te():!G&&h.move&&we())}});function te(){h.move!="always"&&(ye||(ye=!0,F.drag({onTop:!1}),Ae=F.on("mousedown",Ae),Y=F.on("pressmove",Y),K=F.on("pressup",K)))}function we(ue){h.move!="always"&&(!ue&&!ye||(ye=!1,F.noDrag(),F.off("mousedown",Ae),F.off("pressmove",Y),F.off("pressup",K)))}Object.defineProperty(h,"controlsVisible",{get:function(){return G},set:function(ue){G=ue,ue?h.showControls():h.hideControls()}});var ke=P;Object.defineProperty(h,"lockControls",{get:function(){return ke},set:function(ue){ke=ue,ue?(h.controls.mouseChildren=!1,h.controls.mouseEnabled=!1):(h.controls.mouseChildren=!0,h.controls.mouseEnabled=!0)}}),h.lockControls=ke,fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==h},set:function(){e.KEYFOCUS=h}}),h.selectPoints&&!e.KEYFOCUS&&pe();function pe(){h.keyFocus=!0;var ue=document.activeElement;ue&&ue.blur()}Object.defineProperty(h,"points",{get:function(){for(var ue=[],Ee,Te,_e=0;_e<I.length;_e++)Te=I[_e],Ee=[e.decimals(Te[0].x),e.decimals(Te[0].y),e.decimals(Te[1].x),e.decimals(Te[1].y),e.decimals(Te[2].x),e.decimals(Te[2].y),e.decimals(Te[3].x),e.decimals(Te[3].y)],Te[4]&&Te[4]!=="straight"&&Ee.push(Te[4]),ue.push(Ee);return ue},set:function(ue){var Ee=h.x,Te=h.y,_e=h.visible,We=[],oe=!1;e.loop(h.pointControls,function(Ye){Ye.scaleX+Ye.scaleY+Ye.regX+Ye.regY+Ye.rotation!=2&&(oe=!0),We.push([Ye.scaleX,Ye.scaleY,Ye.regX,Ye.regY,Ye.rotation])}),h.dispose(!0),o=Re(ue),h.shape&&(h.shape.graphics.clear(),h.sticks.graphics.clear(),h.controls.noDrag(),h.removeAllChildren(),delete h.shape,delete h.sticks,delete h.controls),h.visible=!1,Oe(),h.lockControls=ke,h.x=Ee,h.y=Te,h.visible=_e,oe&&(e.loop(h.pointControls,function(Ye,Ve){Ye.scaleX=We[Ve][0],Ye.scaleY=We[Ve][1],Ye.regX=We[Ve][2],Ye.regY=We[Ve][3],Ye.rotation=We[Ve][4]}),h.update())}}),Object.defineProperty(h,"pointsAdjusted",{get:function(){var ue=[],Ee,Te,_e,We=h.pointObjects;return e.loop(We.length,function(oe){if(_e=We[oe],Te=I[oe],_e[0].rotation==0&&_e[0].scaleX==0&&_e[0].scaleY==0)Ee=[e.decimals(Te[0].x),e.decimals(Te[0].y),e.decimals(Te[1].x),e.decimals(Te[1].y),e.decimals(Te[2].x),e.decimals(Te[2].y),e.decimals(Te[3].x),e.decimals(Te[3].y)];else{var Ye=_e[0].localToLocal(_e[2].x,_e[2].y,_e[0].parent),Ve=_e[0].localToLocal(_e[3].x,_e[3].y,_e[0].parent);Ee=[e.decimals(Te[0].x),e.decimals(Te[0].y),e.decimals(Te[1].x),e.decimals(Te[1].y),e.decimals(Ye.x-Te[0].x),e.decimals(Ye.y-Te[0].y),e.decimals(Ve.x-Te[0].x),e.decimals(Ve.y-Te[0].y)]}Te[4]&&Te[4]!=="mirror"&&Ee.push(Te[4]),ue.push(Ee)}),ue},set:function(){kt&&ht("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(h,"pointObjects",{get:function(){return I},set:function(){kt&&ht("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"pointControls",{get:function(){return x},set:function(){kt&&ht("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"pointCircles",{get:function(){return Q},set:function(){kt&&ht("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"segmentPoints",{get:function(){var ue=h.pointsAdjusted,Ee=[];return e.loop(ue.length,function(Te,_e){var We=h.getSegmentPoint(ue[Te],ue[Te<_e-1?Te+1:0]);Ee.push(We)}),Ee},set:function(){kt&&ht("Blob() - segmentPoints is read only")}}),Object.defineProperty(h,"segmentRatios",{get:function(){var ue=[],Ee=0;e.loop(h.segmentPoints,function(We){var oe=e.distanceAlongCurve(We);ue.push(oe),Ee+=oe});var Te=[],_e=0;return e.loop(ue,function(We){var oe=We/Ee;_e+=oe,Te.push(_e)}),Te},set:function(){kt&&ht("Blob() - segmentRatios is read only")}}),h.approximateBounds=function(ue,Ee){n(ue)&&(ue=80),ue/=h.num;var Te=h.interpolate(ue,null,!0,null,!0),_e=e.boundsAroundPoints(Te);if(h.setBounds(_e.x,_e.y,_e.width,_e.height),Ee){if(!h.parent)return kt&&ht("approximateBounds() - add to stage to first to see points"),h;h.hitPathPoints?h.hitPathPoints.removeAllChildren():h.hitPathPoints=new e.Container().addTo(),h.hitPathPoints.top();for(var We=0;We<Te.length;We++){var oe=Te[We];oe=h.localToGlobal(oe.x,oe.y),new e.Circle(3).loc(oe.x,oe.y,h.hitPathPoints)}}return h},h.getPointAngle=function(ue){var Ee=h.pointObjects[ue][0],Te=h.pointObjects[ue][2],_e=h.pointObjects[ue][3],We,oe;return Ee==h.stage?(We=new e.Point(Te.x,Te.y),oe=new e.Point(_e.x,_e.y)):(We=Ee.localToGlobal(Te.x,Te.y),oe=Ee.localToGlobal(_e.x,_e.y)),e.angle(We.x,We.y,oe.x,oe.y)},h.getSegmentPoint=function(ue,Ee){if(!(n(ue)||n(Ee))){(ue[2]!=0||ue[3]!=0)&&(ue[4]-=ue[2],ue[5]-=ue[3],ue[6]-=ue[2],ue[7]-=ue[3],ue[0]+=ue[2],ue[1]+=ue[3],ue[2]=0,ue[3]=0),(Ee[2]!=0||Ee[3]!=0)&&(Ee[4]-=Ee[2],Ee[5]-=Ee[3],Ee[6]-=Ee[2],Ee[7]-=Ee[3],Ee[0]+=Ee[2],Ee[1]+=Ee[3],Ee[2]=0,Ee[3]=0);var Te={x:ue[0],y:ue[1]},_e={x:ue[0]+ue[6],y:ue[1]+ue[7]},We={x:Ee[0]+Ee[4],y:Ee[1]+Ee[5]},oe={x:Ee[0],y:Ee[1]};return(ve.x!=0||ve.y!=0)&&(Te.x+=ve.x,_e.x+=ve.x,We.x+=ve.x,oe.x+=ve.x,Te.y+=ve.y,_e.y+=ve.y,We.y+=ve.y,oe.y+=ve.y),[Te,_e,We,oe]}},h.getAdjacentSegmentData=function(ue){n(ue)&&(ue=0);var Ee=h.pointsAdjusted;if(h.num==2)return[[h.getSegmentPoint(Ee[0],Ee[1]),h.getSegmentPoint(Ee[1],Ee[0])],[0,1]];if(ue==0)return[[h.getSegmentPoint(Ee[h.num-1],Ee[0]),h.getSegmentPoint(Ee[0],Ee[1]),h.getSegmentPoint(Ee[1],Ee[2])],[h.num-1,0,1]];if(ue>=h.num-1)return[[h.getSegmentPoint(Ee[h.num-2],Ee[h.num-1]),h.getSegmentPoint(Ee[h.num-1],Ee[0]),h.getSegmentPoint(Ee[0],Ee[1])],[h.num-2,h.num-1,0]];var Te=ue+2>=h.num?0:ue+2;return[[h.getSegmentPoint(Ee[ue-1],Ee[ue]),h.getSegmentPoint(Ee[ue],Ee[ue+1]),h.getSegmentPoint(Ee[ue+1],Ee[Te])],[ue-1,ue,ue+1]]},h.getCurvePoint=function(ue,Ee,Te,_e){n(Ee)&&(Ee=h.segmentRatios),n(Te)&&(Te=h.segmentPoints),n(_e)&&(_e=!1);var We=Ee,oe=Te,Ye=e.loop(We,function(Ke,lt){if(Ke>=ue)return lt}),Ve=Ye>0?We[Ye-1]:0,De=Ye>0?We[Ye]-We[Ye-1]:We[Ye],de=(ue-Ve)/De,Be=e.pointAlongCurve(oe[Ye],de,_e,!0);if(!n(Be)){var Qe=h.localToGlobal(Be.x,Be.y);return Qe.angle=Be.angle,Qe.z=Ye,n(Qe)?void 0:Qe}};function Me(ue,Ee,Te){return{x:ue.x+(Ee.x-ue.x)*Te,y:ue.y+(Ee.y-ue.y)*Te}}function Ue(ue,Ee,Te,_e,We,oe,Ye,Ve){var De=ue.length-1,de=0,Be=0;_e==100&&h.type=="Squiggle"&&(_e=99.99),_e=(_e+1e5)%100,e.loop(Te,function(st,Je){if(_e/100<st)return De=Je,Be=st,!0;de=st});var Qe=h.segmentPoints[De],Ke=Be>0?(_e/100-de)/(Be-de):0,lt=e.pointAlongCurve(Qe,Ke,null,Ve),gt=[lt.x,lt.y,0,0];if(!oe){if(Ye){h.interpolatedPoints.push({x:lt.x,y:lt.y,r:_e/100});return}if(We!="none"){var He=Me(Qe[0],Qe[1],Ke),it=Me(Qe[1],Qe[2],Ke),ft=Me(Qe[2],Qe[3],Ke),Se=Me(He,it,Ke),Fe=Me(it,ft,Ke);gt[4]=Se.x-lt.x,gt[5]=Se.y-lt.y,gt[6]=Fe.x-lt.x,gt[7]=Fe.y-lt.y;var me=h.localToLocal(He.x,He.y,Ee[De]);ue[De][6]=me.x,ue[De][7]=me.y;var $e=h.localToLocal(ft.x,ft.y,Ee[(De+1)%ue.length]);ue[(De+1)%ue.length][4]=$e.x,ue[(De+1)%ue.length][5]=$e.y}We&&(gt[8]=We),ue.splice(De+1,0,gt)}}this.addPoint=function(ue,Ee){n(ue)&&(ue=100);var Te=h.points,_e=h.segmentRatios,We=h.pointControls;return Ee=Ee||$,Ue(Te,We,_e,ue,Ee),h.points=Te,h.num=Te.length,h},this.removePoint=function(ue){if(!(n(ue)||ue<0)){var Ee=e.copy(h.points);return Ee.splice(ue,1),h.points=Ee,h.stage&&h.stage.update(),h}},this.addPoints=function(ue,Ee,Te,_e,We,oe,Ye){n(oe)&&(oe=e.copy(h.points));var Ve=e.copy(h.segmentRatios),De=0;if(We&&(h.interpolatedPoints=[]),_e)var de=Ve.length*ue;return e.loop(Ve,function(Be,Qe){We&&Ue(oe,h.pointControls,h.segmentRatios,De*100,Ee,!n(Te)&&Qe!=Te,We,Ye);var Ke=_e?Math.round(de*(Be-De)):ue,lt=1/(Ke+1);e.loop(Ke,function(gt){var He=De+(Be-De)*lt*(gt+1);Ue(oe,h.pointControls,h.segmentRatios,He*100,Ee,!n(Te)&&Qe!=Te,We,Ye),!We&&ue>0&&(h.points=oe)}),De=Be}),We&&h.type=="Squiggle"&&Ue(oe,h.pointControls,h.segmentRatios,100,Ee,null,We,Ye),h.stage&&h.stage.update(),h.num=oe.length,h},this.interpolate=function(ue,Ee,Te,_e,We){return n(ue)&&(ue=1),h.addPoints(ue,"none",Ee,Te,!0,_e,We),h.interpolatedPoints},ie&&h.approximateBounds(),this.dispose=function(ue,Ee,Te){if(h.shape){if(e.gD(h),ge&&h.toggleStageEvent&&ge.off("stagemousedown",h.toggleStageEvent),h.controls.noDrag(),h.controls.removeAllEventListeners(),h.selectPoints&&h.selectionManager&&h.selectionManager.dispose(),h.selectedBalls=null,h.selectedRect1s=null,h.selectedRect2s=null,h.selectionManager=null,h.off("mousedown",h.toggleEvent),h.off("click",h.clickEvent),ue){h.shape.dispose(),h.shape=null;for(var _e=0;_e<h.points.length;_e++)h.pointObjects[_e][0].removeAllEventListeners(),h.pointObjects[_e][1].removeAllEventListeners(),h.pointObjects[_e][2].removeAllEventListeners(),h.pointObjects[_e][3].removeAllEventListeners();h.controls.removeFrom(h),h.sticks.dispose(),I=null,Q=null}else h.removeAllEventListeners(),I=null,Q=null,Te||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Blob,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),Si=e.Blob,e.Flare=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he){var $="color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",G;if(G=mt(e.Flare,arguments,$,this))return G;qe("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=ae;var v=ie===!1?{}:e.getStyle(this.type,this.group,he),w=this;n(r)&&(r=v.borderColor!=null?v.borderColor:null),n(i)&&(i=v.borderWidth!=null?v.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=v.color!=null?v.color:i>0?"rgba(0,0,0,0)":e.black),(n(i)||i>0)&&(!n(r)||!n(i))&&n(r)&&(r=e.black),n(o)&&(o=v.crossAngle!=null?v.crossAngle:0);var h=o;o-=90,n(l)&&(l=v.thickness!=null?v.thickness:null),n(f)&&(f=v.thicknessA!=null?v.thicknessA:null),n(d)&&(d=v.thicknessB!=null?v.thicknessB:null),n(l)?n(d)&&!n(f)?d=f:n(f)&&!n(d)?f=d:d=f=10:n(d)&&!n(f)?d=l-f:n(f)&&!n(d)?f=l-d:d=f=l/2,w.thickness=f+d,n(k)&&(k=v.cross!=null?v.cross:!0),n(m)&&(m=v.crossColors!=null?v.crossColors:null),!n(m)&&!Array.isArray(m)&&(m=[m]),n(A)&&(A=v.close!=null?v.close:!1),n(_)&&(_=v.startX!=null?v.startX:0),n(P)&&(P=v.startY!=null?v.startY:0),n(T)&&(T=v.lengths!=null?v.lengths:[200]),Array.isArray(T)||(T=[T]),n(R)&&(R=v.angles!=null?v.angles:[0]),Array.isArray(R)||(R=[R]),n(b)&&(b=v.anglesA!=null?v.anglesA:[10]),Array.isArray(b)||(b=[b]),n(L)&&(L=v.anglesB!=null?v.anglesB:e.copy(b)),Array.isArray(L)||(L=[L]),n(S)&&(S=v.anglesEnd!=null?v.anglesEnd:[0]),Array.isArray(S)||(S=[S]),n(C)&&(C=v.strokeObj!=null?v.strokeObj:{miterLimit:2}),n(Z)&&(Z=v.spineBorderColor!=null?v.spineBorderColor:null),n(X)&&(X=v.spineBorderWidth!=null?v.spineBorderWidth:null),Z<0||X<0?Z=X=null:Z!=null&&X==null&&(X=1),n(E)&&(E=v.spineColor!=null?v.spineColor:X>0?"rgba(0,0,0,0)":e.black),n(V)&&(V=v.spineDashed!=null?v.spineDashed:null),n(O)&&(O=v.spineStrokeObj!=null?v.spineStrokeObj:{miterLimit:2}),(n(X)||X>0)&&(!n(Z)||!n(X))&&n(Z)&&(Z=r||e.black),n(q)&&(q=v.closeBorderColor!=null?v.closeBorderColor:null),n(N)&&(N=v.closeBorderWidth!=null?v.closeBorderWidth:null),q<0||N<0?q=N=null:q!=null&&N==null&&(N=1),n(ne)&&(ne=v.closeColor!=null?v.closeColor:N>0?"rgba(0,0,0,0)":null),n(U)&&(U=v.closeDashed!=null?v.closeDashed:null),n(z)&&(z=v.closeStrokeObj!=null?v.closeStrokeObj:{miterLimit:2}),(n(N)||N>0)&&(!n(q)||!n(N))&&n(q)&&(q=r||e.black),this.thicknessA=f,this.thicknessB=d,this.cross=k,this.close=A,this.lengths=T,this.angles=R,this.anglesA=b,this.anglesB=L,this.anglesEnd=S,this.crossColors=m,I(T,R,b,L,S,k,m,A),t.type&&(w.color=t);function I(Y,K,ge,ye,ee,ce,ve,Re){w.removeAllChildren();var se=w.shape=new e.Shape().addTo(w);if(w.colorCommand=se.c().f(t).command,t&&t.type&&w.specialColor(w.colorCommand,t,w),(n(i)||i>0)&&(!n(r)||!n(i))&&(n(r)&&(r=e.black),w.borderColorCommand=se.s(r).command,r&&r.type&&w.specialColor(w.borderColorCommand,r,w),w.borderWidthCommand=se.ss(i,C.caps,C.joints,C.miterLimit,C.ignoreScale).command,D&&(w.borderDashedCommand=se.sd([10,10],5).command)),se.mt(0,0),X>0){var Oe=w.spineShape=new e.Shape().addTo(w);w.spineColorCommand=Oe.c().f(E).command,E&&E.type&&w.specialColor(w.spineColorCommand,E,w),(n(X)||X>0)&&(!n(Z)||!n(X))&&(n(Z)&&(Z=e.black),w.spineBorderColorCommand=Oe.s(Z).command,Z&&Z.type&&w.specialColor(w.spineBorderColorCommand,Z,w),w.spineBorderWidthCommand=Oe.ss(X,O.caps,O.joints,O.miterLimit,O.ignoreScale).command,V&&(w.spineBorderDashedCommand=Oe.sd([10,10],5).command))}if(!n(ne)){var J=w.closeShape=new e.Shape().addTo(w);w.closeColorCommand=J.c().f(ne).command,ne&&ne.type&&w.specialColor(w.closeColorCommand,ne,w),(n(N)||N>0)&&(!n(q)||!n(N))&&(n(q)&&(q=e.black),w.closeBorderColorCommand=J.s(q).command,q&&q.type&&w.specialColor(w.closeBorderColorCommand,q,w),w.closeBorderWidthCommand=J.ss(N,z.caps,z.joints,z.miterLimit,z.ignoreScale).command,U&&(w.closeBorderDashedCommand=J.sd([10,10],5).command)),se.mt(0,0)}var xe=_,te=P,we=o,ke=we-180,pe=f,Me=d,Ue=Math.max(Y.length,K.length,ge.length,ye.length,ee.length),ue,Ee,Te=ke,_e=[],We=[],oe=[];w.points=[];var Ye=w.pinPoints=[];e.loop(Ue,function(de){var Be=Ve(de),Qe=Math.cos(Be.a*e.RAD),Ke=Math.sin(Be.a*e.RAD),lt=new e.Point(xe+Be.A.x*Qe-Be.A.y*Ke,te+Be.A.x*Ke+Be.A.y*Qe),gt=new e.Point(xe+Be.B.x*Qe-Be.B.y*Ke,te+Be.B.x*Ke+Be.B.y*Qe),He=new e.Point(xe+Be.C.x*Qe-Be.C.y*Ke,te+Be.C.x*Ke+Be.C.y*Qe),it=new e.Point(xe+Be.D.x*Qe-Be.D.y*Ke,te+Be.D.x*Ke+Be.D.y*Qe);_e.push(lt,gt),We.unshift(He,it),oe.push([lt,gt,He,it]);var ft=new e.Point(xe+Be.F.x*Qe-Be.F.y*Ke,te+Be.F.x*Ke+Be.F.y*Qe),Se=new e.Point(xe+Be.E.x*Qe-Be.E.y*Ke,te+Be.E.x*Ke+Be.E.y*Qe);de==0&&w.pinPoints.push(ft),w.pinPoints.push(Se),xe=Se.x,te=Se.y,pe=Be.tA,Me=Be.tB}),w.points=_e.concat(We),ce?(w.crossCommands=[],e.loop(oe,function(de,Be){se.mt(de[0].x,de[0].y),!n(ve)&&!n(ve[Be])&&(se.f(ve[Be]),w.crossCommands[Be]=se.f(ve[Be]).command,ve[Be]&&ve[Be].type&&w.specialColor(w.crossCommands[Be],ve[Be],w),se.mt(de[0].x,de[0].y)),se.lt(de[1].x,de[1].y).lt(de[2].x,de[2].y).lt(de[3].x,de[3].y).cp()}),Re&&se.mt(oe[oe.length-1][1].x,oe[oe.length-1][1].y).lt(oe[oe.length-1][2].x,oe[oe.length-1][2].y).lt(oe[0][3].x,oe[0][3].y).lt(oe[0][0].x,oe[0][0].y).cp()):(e.loop(_e,function(de,Be){Be==0?se.mt(de.x,de.y):se.lt(de.x,de.y)}),Re&&(se.lt(_e[0].x,_e[0].y),se.cp()),e.loop(We,function(de,Be){Be==0&&Re?se.mt(de.x,de.y):se.lt(de.x,de.y)}),Re&&se.lt(We[0].x,We[0].y),se.cp()),Oe&&(e.loop(Ye,function(de,Be){Be==0?Oe.mt(de.x,de.y):Oe.lt(de.x,de.y)}),Re&&Oe.lt(Ye[0].x,Ye[0].y).cp()),n(ne)||(e.loop(We,function(de,Be){Be==0?J.mt(de.x,de.y):J.lt(de.x,de.y)}),Re&&J.lt(We[0].x,We[0].y).cp());function Ve(de){var Be=K[de],Qe=Y[de],Ke=ge[de],lt=ye[de],gt=ee[de];if(ve)var He=ve[de];n(Be)&&(Be=Te,w.angles[de]=Be),n(Qe)&&(Qe=200,w.lengths[de]=Qe),n(Ke)&&(Ke=0,w.anglesA[de]=Ke),n(lt)&&(lt=0,w.anglesB[de]=lt),n(gt)&&(gt=0,w.anglesEnd[de]=gt),ve&&n(He)&&(He=t,w.crossColors[de]=He),gt=gt+90;var it=180-gt,ft=Math.cos((Te-Be)*e.RAD),Se=Math.sin((Te-Be)*e.RAD),Fe=new e.Point(0,0),me=new e.Point(Qe,0);if(n(ue))var $e=new e.Point(Math.cos(we*e.RAD)*pe,Math.sin(we*e.RAD)*pe);else $e=new e.Point(ue.x*ft-ue.y*Se,ue.x*Se+ue.y*ft);var st=De(Qe,$e.x,$e.y,Ke,it),Je=new e.Point(Qe-st.x,-st.y),rt;n(Ee)?rt=new e.Point(Math.cos(ke*e.RAD)*pe,Math.sin(ke*e.RAD)*Me):rt=new e.Point(Ee.x*ft-Ee.y*Se,Ee.x*Se+Ee.y*ft);var Ce=De(Qe,rt.x,rt.y,lt,gt),ze=new e.Point(Qe-Ce.x,Ce.y);return ue=new e.Point(Je.x-Qe,Je.y),Ee=new e.Point(ze.x-Qe,ze.y),Te=Be,{a:Be,A:$e,B:Je,C:ze,D:rt,E:me,F:Fe,tA:st.t,tB:Ce.t}}function De(de,Be,Qe,Ke,lt){var gt=lt-90,He=90-gt,it=180-Ke-He,ft=Math.tan(gt*e.RAD)*Qe,Se=de-Be-ft,Fe=Se/Math.sin(it*e.RAD)*Math.sin(Ke*e.RAD),me=Math.sqrt(Math.pow(Qe,2)+Math.pow(ft,2)),$e=Fe+me,st=$e*Math.sin(gt*e.RAD),Je=$e*Math.cos(gt*e.RAD);return{x:st,y:Je,t:$e}}}this.add=function(Y,K,ge,ye,ee,ce,ve,Re){var se="lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close",Oe;return(Oe=mt(w.add,arguments,se))?Oe:(n(ce)||(w.cross=ce),n(Re)||(w.close=Re),n(Y)||(Array.isArray(Y)||(Y=[Y]),n(w.lengths)?w.lengths=Y:w.lengths=w.lengths.concat(Y)),n(K)||(Array.isArray(K)||(K=[K]),n(w.angles)?w.angles=K:w.angles=w.angles.concat(K)),n(ge)||(Array.isArray(ge)||(ge=[ge]),n(w.anglesA)?w.anglesA=ge:w.anglesA=w.anglesA.concat(ge)),n(ye)||(Array.isArray(ye)||(ye=[ye]),n(w.anglesB)?w.anglesB=ye:w.anglesB=w.anglesB.concat(ye)),n(ee)||(Array.isArray(ee)||(ee=[ee]),n(w.anglesEnd)?w.anglesEnd=ee:w.anglesEnd=w.anglesEnd.concat(ee)),n(ve)||(n(w.crossColors)?kt&&ht("Flare() - must set crossColor for original object parameters"):(Array.isArray(ve)||(ve=[ve]),n(w.crossColors)?w.crossColors=ve:w.crossColors=w.crossColors.concat(ve))),w.remake(),w)},this.remake=function(){return f=this.thicknessA,d=this.thicknessB,I(w.lengths,w.angles,w.anglesA,w.anglesB,w.anglesEnd,w.cross,w.crossColors,w.close),w},Object.defineProperty(w,"color",{get:function(){return t},set:function(Y){n(Y)&&(Y=e.black),t=Y,Y&&Y.type?w.specialColor(w.colorCommand,Y,w):w.colorCommand.style=Y}});var Q,x;this.setColorRange=function(Y,K){return n(K)?(Q=w.color,x=Y):n(Y)?(Q=w.color,x=K):(Q=Y,x=K),w};var F=0;Object.defineProperty(w,"colorRange",{get:function(){return F},set:function(Y){F=Y,!n(Q)&&!n(x)&&(w.color=e.colorRange(Q,x,Y))}}),Object.defineProperty(w,"borderColor",{get:function(){return r},set:function(Y){r=Y,w.borderColorCommand?Y&&Y.type?w.specialColor(w.borderColorCommand,Y,w):w.borderColorCommand.style=Y:I()}}),Object.defineProperty(w,"borderWidth",{get:function(){return i},set:function(Y){Y>0||(Y=0),i=Y,!w.borderWidthCommand||i==0?I():(w.borderWidthCommand.width=i,D&&(w.borderDashedCommand.segments=[20,10],w.borderDashedCommand.offset=5))}}),Object.defineProperty(w,"spineColor",{get:function(){return E},set:function(Y){n(Y)&&(Y=e.black),E=Y,w.spineColorCommand?Y&&Y.type?w.specialColor(w.spineColorCommand,Y,w):w.spineColorCommand.style=Y:I()}}),Object.defineProperty(w,"spineBorderColor",{get:function(){return Z},set:function(Y){Z=Y,w.spineBorderColorCommand?Y&&Y.type?w.specialColor(w.spineBorderColorCommand,Y,w):w.spineBorderColorCommand.style=Y:I()}}),Object.defineProperty(w,"spineBorderWidth",{get:function(){return X},set:function(Y){Y>0||(Y=0),X=Y,!w.spineBorderWidthCommand||X==0?I():(w.spineBorderWidthCommand.width=X,V&&(w.spineBorderDashedCommand.segments=[20,10],w.spineBorderDashedCommand.offset=5))}}),Object.defineProperty(w,"closeColor",{get:function(){return ne},set:function(Y){n(Y)&&(Y=e.black),ne=Y,w.closeColorCommand?Y&&Y.type?w.specialColor(w.closeColorCommand,Y,w):w.closeColorCommand.style=Y:I()}}),Object.defineProperty(w,"closeBorderColor",{get:function(){return q},set:function(Y){q=Y,w.closeBorderColorCommand?Y&&Y.type?w.specialColor(w.closeBorderColorCommand,Y,w):w.closeBorderColorCommand.style=Y:I()}}),Object.defineProperty(w,"closeBorderWidth",{get:function(){return N},set:function(Y){Y>0||(Y=0),N=Y,!w.closeBorderWidthCommand||N==0?I():(w.closeBorderWidthCommand.width=N,U&&(w.closeBorderDashedCommand.segments=[20,10],w.closeBorderDashedCommand.offset=5))}}),Object.defineProperty(w,"pin",{get:function(){return p},set:function(Y){Y>0||(Y=0),Y>w.pinPoints.length-1&&(p=0),p=Y;var K=w.pinPoints[p];K&&(w.regX=K.x,w.regY=K.y)}});var Ae=e.boundsAroundPoints(w.points);this.setBounds(Ae.x,Ae.y,Ae.width,Ae.height),n(p)||(w.pin=p),this.mouseChildren=!1,ie!==!1&&e.styleTransforms(this,v),this.clone=function(){return w.cloneProps(new e.Flare(t,r,i,h,e.copy(l),e.copy(f),e.copy(d),p,_,P,e.copy(T),e.copy(R),e.copy(b),e.copy(L),e.copy(S),k,e.copy(m),A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,this.group,he))}},e.extend(e.Flare,e.Container,["clone"],"zimContainer",!1),e.MultiFlare=function(t,r,i,o,l,f,d){var p="flares, pins, angles, endToEnd, style, group, inherit",_;if(_=mt(e.MultiFlare,arguments,p,this))return _;qe("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=f;var P=l===!1?{}:e.getStyle(this.type,this.group,d),T=this;n(t)&&(t=P.flares!=null?P.flares:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=P.pins!=null?P.pins:null),n(i)&&(i=P.angles!=null?P.angles:null),n(o)&&(o=P.endToEnd!=null?P.endToEnd:!1),T.flares=t,T.pins=r,T.angles=i,T.endToEnd=o,T.mouseChildren=!1,T.add=function(R,b){return n(R)||(n(b)&&(b=!0),Array.isArray(R)||(R=[R]),e.loop(R,function(L){b?T.flares.push(L.clone()):T.flares.push(L)}),T.remake(),T.stage&&T.stage.update()),T},T.remove=function(R){return n(R)||(Array.isArray(R)||(R=[R]),e.loop(R,function(b){var L=T.flares.indexOf(b);L>=0&&T.flares.splice(L,1)}),T.remake(),T.stage&&T.stage.update()),T},T.remake=function(){T.removeAllChildren(),e.loop(T.flares,function(R,b){if(r&&!n(r[b])&&(R.pin=r[b]),i&&!n(i[b])&&(R.rotation=i[b]),R.addTo(T),T.flares.push(R),o&&b>0){var L=t[b-1],S=L.pinPoints[L.pinPoints.length-1],k=L.localToLocal(S.x,S.y,T),m=R.pinPoints[0],A=R.localToLocal(m.x,m.y,T);R.mov(k.x-A.x,k.y-A.y)}})},T.remake(),l!==!1&&e.styleTransforms(this,P),this.clone=function(){return T.cloneProps(new e.MultiFlare(e.copy(t,!0),e.copy(r),e.copy(i),o,l,this.group,d))}},e.extend(e.MultiFlare,e.Container,["clone"],"zimContainer",!1),e.FlareBox=function(t,r,i,o,l,f,d,p,_,P,T){var R="width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",b;if(b=mt(e.FlareBox,arguments,R,this))return b;qe("53.8"),this.group=P;var L=_===!1?{}:e.getStyle("FlareBox",this.group,T);n(t)&&(t=L.width!=null?L.width:220),n(r)&&(r=L.height!=null?L.height:80),this.zimContainer_constructor(t,r),this.type="FlareBox";var S=this;if(this.mouseChildren=!1,n(o)&&(o=L.borderColor!=null?L.borderColor:null),n(l)&&(l=L.borderWidth!=null?L.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=L.color!=null?L.color:l>0?"rgba(0,0,0,0)":e.black),(n(l)||l>0)&&(!n(o)||!n(l))&&n(o)&&(o=e.black),n(f)&&(f=L.flares!=null?L.flares:null),n(d)&&(d=L.corners!=null?L.corners:null),n(p)&&(p=L.pins!=null?L.pins:null),S.backing=new e.Rectangle(t,r,i,o,l).addTo(this),!n(f)){if(f.type!="MultiFlare"){if(!Array.isArray(f)){if(f.type!="Flare")return;f=[f]}f=new e.MultiFlare(f,p)}f.addTo(S),S.multiFlare=f,S.flares=S.multiFlare.flares,f.loop(function(k,m){p&&!n(p[m])?k.pin=p[m]:n(k.pin)&&(k.pin=0),d&&!n(d[m])?k.corner=d[m]:n(k.corner)&&(k.corner=0),k.corner==1?k.loc(t,0):k.corner==2?k.loc(t,r):k.corner==3?k.loc(0,r):k.loc(0,0),k.rot((k.corner-k.pin)*90)}),_!==!1&&e.styleTransforms(this,L),this.clone=function(){return S.cloneProps(new e.FlareBox(t,r,i,o,l,e.copy(f,!0),e.copy(d),e.copy(p),_,this.group,T))}}},e.extend(e.FlareBox,e.Container,["clone"],"zimContainer",!1),e.Label=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G){var v="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",w;if(w=mt(e.Label,arguments,v,this))return w;qe("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=$;var h=he===!1?{}:e.getStyle(this.type,this.group,G);n(t)&&(t=h.text!=null?h.text:"LABEL"),n(r)&&(r=h.size!=null?h.size:36),n(i)&&(i=h.font!=null?h.font:"arial"),n(o)&&(o=h.color!=null?h.color:e.black),n(P)&&(P=h.bold!=null?h.bold:!1),n(T)&&(T=h.italic!=null?h.italic:!1);var I=Q(t,r,i,o,P,T);this.veeObj={text:I[0],size:I[1],font:I[2],color:I[3],bold:I[4],italic:I[5]};function Q(){return arguments}t=e.Pick.choose(t);var x=!1;t===""&&(t=" ",x=!0),r=e.Pick.choose(r),i=e.Pick.choose(i),i=i.replace("+"," ");var F=["ttf","otf","woff2","woff","fnt"],Ae=i.split(".");Ae.length>0&&F.indexOf(Ae[1])!=-1&&(i=Ae[0]),o=e.Pick.choose(o),P=e.Pick.choose(P),T=e.Pick.choose(T),n(l)&&(l=h.rollColor!=null?h.rollColor:null),(n(f)||f=="ignore")&&(f=h.shadowColor!=null&&f!="ignore"?h.shadowColor:-1),(n(d)||d=="ignore")&&(d=h.shadowBlur!=null&&d!="ignore"?h.shadowBlur:14),n(p)&&(p=h.align!=null?h.align:"left"),n(_)&&(_=h.valign!=null?h.valign:"top"),(!n(k)||!n(h.outlineColor))&&n(m)&&(m=h.outlineWidth!=null?h.outlineWidth:Math.round(r*.2)),(!n(m)||!n(h.outlineWidth))&&n(k)&&(k=h.outlineColor!=null?h.outlineColor:e.black),n(m)&&(m=h.outlineWidth!=null?h.outlineWidth:0),(n(A)||A=="ignore")&&(A=h.backgroundColor!=null&&A!="ignore"?h.backgroundColor:null),n(D)&&(D=h.backgroundBorderColor!=null&&D!="ignore"?h.backgroundBorderColor:null),n(C)&&(C=h.backgroundBorderWidth!=null&&C!="ignore"?h.backgroundBorderWidth:null),(n(Z)||Z=="ignore")&&(Z=h.padding!=null&&Z!="ignore"?h.padding:10),n(V)&&(V=h.paddingH!=null?h.paddingH:Z),n(O)&&(O=h.paddingV!=null?h.paddingV:Z),n(ne)&&(ne=h.shiftH!=null?h.shiftH:0),n(N)&&(N=h.shiftV!=null?h.shiftV:0),n(R)&&(R=h.variant!=null?h.variant:!1),n(b)&&(b=h.lineWidth!=null?h.lineWidth:null),n(L)&&(L=h.lineHeight!=null?h.lineHeight:null),(n(S)||S=="ignore")&&(S=h.backing!=null&&S!="ignore"?h.backing.clone():null),n(q)&&(q=h.rollPersist!=null?h.rollPersist:!1),h.labelWidth!=null&&(b=h.labelWidth),n(U)||(b=U),p=="middle"&&(p="center"),n(z)&&(z=h.labelHeight!=null?h.labelHeight:null),n(ie)&&(ie=h.maxSize!=null?h.maxSize:null),r=ie?Math.min(r,ie):r,n(ae)&&(ae=h.splitWords!=null?h.splitWords:!1);var Y=fe.zdf&&fe.zdf.retina,K=this;this.mouseChildren=!1,this.paddingV=O,this.paddingH=V,fe.DIR&&fe.DIR=="rtl"||!fe.DIR&&e.DIR=="rtl"?p=="start"?p="right":p=="end"&&(p="left"):p=="start"?p="left":p=="end"&&(p="right");var ge=[];ge[0]=T?"italic":"normal",ge[1]=R?"small-caps":"normal",ge[2]=P?"bold":"normal",ge[3]=r+"px",ge[4]=i;var ye=ge.join(" ");t=String(t);var ee,ce=!1,ve=b,Re=z;if(n(S)&&n(A)){var se=new je.Shape;K.hitArea=se}else ve&&(ve=ve-V*2),Re&&(Re=Re-O*2);function Oe(de){var Be=new je.Text(de,ye,o);return Be.lineWidth=ve,Be.lineHeight=L,Be}ee=Oe(t);function J(de,Be,Qe){var Ke=Math.ceil(ve/Be*Qe.length),lt=Qe.substr(0,Ke),gt=Oe(lt),He=gt.getMeasuredWidth();if(He>ve)for(;He>ve;)Ke--,lt=Qe.substr(0,Ke),gt=Oe(lt),He=gt.getMeasuredWidth();else if(He<ve){for(;He<ve;)Ke++,lt=Qe.substr(0,Ke),gt=Oe(lt),He=gt.getMeasuredWidth();Ke--,lt=Qe.substr(0,Ke)}var it=Qe.substr(Ke,Qe.length);return{endIndex:Ke,start:lt,end:it}}if(ae&&ve>r*1.2)for(var xe=ee.getMetrics(),te=0;xe.width>ve&&te<1e3;)te++,e.loop(xe.lines,function(de,Be){de=de.replace(/^[\s\t]+/,"");var Qe=Oe(de),Ke=Qe.getMeasuredWidth();if(Ke>ve){var lt=J(Qe,Ke,de);return xe.lines[Be]=lt.start,xe.lines.length>Be+1?(lt.end.trim(),xe.lines[Be+1]=lt.end+" "+xe.lines[Be+1]):xe.lines.push(lt.end),ee=Oe(xe.lines.join(" ")),xe=ee.getMetrics(),!1}});if(this.label=ee,ee.textAlign=p,ee.textBaseline="alphabetic",m>0){var we=this.outlineLabel=ee.clone();we.color=k,we.outline=m}f!=-1&&d>0&&(ee.shadow=new je.Shadow(f,3,3,d)),this.addChild(ee);function ke(){K.removeChild(K.background),K.background=new e.Rectangle(K.getBounds().width+V*2,K.getBounds().height+O*2,A,D,C,E,X,null,null,!1),e.center(K.background,K,0),K.setBounds(K.background.x,K.background.y,K.background.width,K.background.height)}function pe(){var de=ee.getBounds(),Be=de.y,Qe=de.height;if(ve&&!Re){var Ke=de.x,lt=ve;p=="right"?Ke=de.x-ve+de.width:p=="center"&&(Ke=-ve/2),ee.setBounds(Ke,Be,lt,Qe),de=ee.getBounds()}var gt;_=="baseline"?gt=de.y:_=="top"?(ee.y=r-r/6,gt=0):_=="center"||_=="middle"?(gt=-de.height/2,ee.y=r*.3):gt=-de.height,K.setBounds(de.x,gt,h.width?h.width-Z*2:de.width,h.height?h.height-Z*2:de.height),K.hitArea&&K.hitArea.graphics.c().f("black").r(K.getBounds().x,K.getBounds().y,K.getBounds().width,K.getBounds().height),(_=="center"||_=="middle")&&(e.pos(ee,null,0),e.mov(ee,0,1)),z||(S?ce&&ue():n(A)||ke()),_!="baseline"&&!Y&&(ee.y+=r/32),Ee()}if(pe(),!n(S)){if(S.type=="Pattern"){if(K.backing=new e.Container(K.width+V*2,K.height+O*2,null,null,!1).centerReg(null,null,!1),f!=-1&&d>0){var Me=new e.Rectangle(K.width+V*2-2,K.height+O-2,"#666",null,null,E,null,null,null,!1).center(K.backing);Me.shadow=new je.Shadow(f,3,3,d)}var Ue=new e.Rectangle(K.width+V*2,K.height+O*2,A,null,null,E,null,null,null,!1).addTo(K.backing);S.centerReg(Ue),S.setMask(Ue),K.backing.pattern=S}else K.backing=S;K.backing.center(K,0),S=K.backing,ue(),ce=!0}function ue(){var de=S.boundsToGlobal(),Be=K.boundsToGlobal(de,!0);K.setBounds(Be.x,Be.y,Be.width,Be.height)}function Ee(){e.pos(ee,p=="left"||p=="right"?S||K.background?V:0:null,_=="top"||_=="baseline"||_=="bottom"?S||K.background?O:0:null,p=="right",_=="bottom"),ee.x+=ne,ee.y+=N}Ee();function Te(){we&&(we.x=ee.x,we.y=ee.y,K.addChildAt(we,K.background||K.backing?1:0))}Te(),Object.defineProperty(K,"text",{get:function(){var de=ee.text==" "&&x?"":ee.text;return de},set:function(de){x=!1,de===""&&(de=" ",x=!0),ee.text=String(de),ee.setBounds(null),K.setBounds(null),pe(),we&&(we.text=String(de)),!n(b)&&!n(z)&&(De(),we&&Te())}}),Object.defineProperty(K,"size",{get:function(){return r},set:function(de){r=ie?Math.min(de,ie):de,ge[3]=r+"px",this.label.font=ge.join(" "),we&&(we.font=ge.join(" ")),ee.setBounds(null),K.setBounds(null),pe(),Te()}}),Object.defineProperty(K,"bold",{get:function(){return!!this.label.font.match("bold")},set:function(de){P=de,ge[2]=de?"bold":"normal",this.label.font=ge.join(" "),we&&(we.font=ge.join(" "))}}),Object.defineProperty(K,"italic",{get:function(){return!!this.label.font.match("italic")},set:function(de){T=de,ge[0]=de?"italic":"normal",this.label.font=ge.join(" "),we&&(we.font=ge.join(" "))}}),Object.defineProperty(K,"variant",{get:function(){return!!this.label.font.match("small-caps")},set:function(de){R=de,ge[1]=de?"small-caps":"normal",this.label.font=ge.join(" "),we&&(we.font=ge.join(" "))}}),Object.defineProperty(K,"font",{get:function(){return ge[4]},set:function(de){n(de)||(i=de,ge[4]=de,this.label.font=ge.join(" "),we&&(we.font=ge.join(" ")))}}),Object.defineProperty(K,"align",{get:function(){return p},set:function(de){n(de)||(p=de,this.label.textAlign=p,we&&(we.textAlign=p),pe(),Te())}}),Object.defineProperty(K,"valign",{get:function(){return _},set:function(de){n(de)||(_=de,pe(),Te())}}),Object.defineProperty(K,"color",{get:function(){return o},set:function(de){l==o&&(l=de),o=de,ee.color=o,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&K.stage&&K.stage.update()}}),Object.defineProperty(K,"colorOnly",{get:function(){return o},set:function(de){o=de,ee.color=o,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&K.stage&&K.stage.update()}});var _e,We;this.setColorRange=function(de,Be){return n(Be)?(_e=K.color,We=de):n(de)?(_e=K.color,We=Be):(_e=de,We=Be),K};var oe=0;Object.defineProperty(K,"colorRange",{get:function(){return oe},set:function(de){oe=de,!n(_e)&&!n(We)&&(K.color=e.colorRange(_e,We,de))}}),Object.defineProperty(K,"backgroundColor",{get:function(){return A},set:function(de){A=de,K.background?K.background.color=de:K.backing?K.backing.color=de:ke(),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&K.stage&&K.stage.update()}}),Object.defineProperty(K,"outlineColor",{get:function(){return k},set:function(de){k=de,we&&(we.color=k),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&K.stage&&K.stage.update()}}),Object.defineProperty(K,"rollColor",{get:function(){return l},set:function(de){!K.mouseoverEvent&&de&&Ye(),de==null&&K.mouseoverEvent&&Ve(),l=de}}),this._enabled=!0,Object.defineProperty(K,"enabled",{get:function(){return K._enabled},set:function(de){c(K,de),ee.color=o,K.mouseChildren=!1,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&K.stage&&K.stage.update()}}),this.showRollColor=function(de){return n(de)&&(de=!0),de?ee.color=l:ee.color=o,K.stage&&K.stage.update(),K};function Ye(){K.mouseoverEvent=K.on("mouseover",function(){K.showRollColor&&K.showRollColor()}),K.mouseoutEvent=K.on("mouseout",function(){K.rollPersist||K.showRollColor(!1)}),K.pressupEvent=K.on("pressup",function(){K.rollPersist&&K.showRollColor(!1)})}function Ve(){K.off("mouseover",K.mouseoverEvent),K.off("mouseout",K.mouseoutEvent),K.off("pressup",K.pressupEvent)}l&&Ye(),Object.defineProperty(K,"labelWidth",{get:function(){return b},set:function(de){de>0&&(b=de,ve=b,(!n(S)||!n(A))&&ve&&(ve=ve-V*2),K.label.lineWidth=ve,we&&(we.lineWidth=ve),ee.setBounds(null),K.setBounds(null),pe(),z&&De(),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&K.stage&&K.stage.update())}}),Object.defineProperty(K,"labelHeight",{get:function(){return z},set:function(de){de>0&&(z=de,Re=z,(!n(S)||!n(A))&&Re&&(Re=Re-O*2),b&&De(),K.setBounds(null),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&K.stage&&K.stage.update())}}),!n(b)&&!n(z)&&De();function De(){K.size=ie||200;for(var de=0;L<Re/2&&(K.height>Re||K.width>ve)&&(de++,K.size=K.size/2,!(de>50)););for(de=0;K.height<=Re&&K.width<=ve&&(de++,K.size=Math.ceil(K.size+1),!(de>50)););K.size=K.size-1,Te(),ee.setBounds(null);var Be=ee.getBounds(),Qe=Be.y,Ke=Be.height;Re&&(_=="bottom"?Qe=Qe-Re+Ke:(_=="center"||_=="middle")&&(Qe=(Qe+Qe-Re+Ke)/2),Ke=Re),ee.setBounds(Be.x,Qe,Be.width,Ke),K.setBounds(null),Be=K.getBounds(),K.setBounds(Be.x,Be.y,Be.width,Be.height),S?ce&&ue():n(A)||ke()}he!==!1&&e.styleTransforms(this,h),this.clone=function(de){return K.cloneProps(new e.Label(de||!e.isPick(I[0])?K.text:I[0],de||!e.isPick(I[1])?r:I[1],de||!e.isPick(I[2])?i:I[2],de||!e.isPick(I[3])?o:I[3],l,f,d,p,_,de||!e.isPick(I[4])?P:I[4],de||!e.isPick(I[5])?T:I[5],R,b,L,n(S)?null:S.clone(de),k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,this.group,G))}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.LabelOnPath=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",L;if(L=mt(e.LabelOnPath,arguments,b,this))return L;qe("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=T;var S=P===!1?{}:e.getStyle(this.type,this.group,R);n(t)&&(t=S.label!=null?S.label:new e.Label("Label on Path")),n(r)&&(r=S.path!=null?S.path:new e.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),n(i)&&(i=S.percentAngle!=null?S.percentAngle:100),n(o)&&(o=S.percents!=null?S.percents:null),n(l)&&(l=S.showPath!=null?S.showPath:!0),n(f)&&(f=S.allowToggle!=null?S.allowToggle:!0),n(d)&&(d=S.interactive!=null?S.interactive:!0),n(p)&&(p=S.onTop!=null?S.onTop:!1),n(_)&&(_=S.rtl!=null?S.rtl:fe.DIR=="rtl"||e.DIR=="rtl"),_&&r.reversePoints();var k=t.color;r.addTo(this);var m=this;this.path=r,this.allowToggle=f,r.interactive=d,typeof t=="string"&&(t=new e.Label(t));var A=r.alpha;l||r.alp(0),r.onTop=p;var D=this.letters=new e.Container().addTo(this);if(!o){o=[];for(var C=0;C<t.text.length;C++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*C))}this.percents=o;function E(){var Z;for(Z=D.numChildren-1;Z>=0;Z--)D.getChildAt(Z).dispose();for(m.numLetters=t.text.length,Z=0;Z<m.numLetters;Z++){var V=t.clone();V.text=t.text[Z],V.centerReg(D).reg(null,V.height),V.text!=""&&V.text!=" "&&V.expand(0),m.allowToggle&&V.cur("pointer"),V.on("mousedown",function(){m.allowToggle&&m.toggle()})}m.resize()}this.resize=function(){for(var Z=r.segmentRatios,V=r.segmentPoints,O=0;O<this.numLetters;O++){var ne=r.getCurvePoint(o[O]/100,Z,V,!0);if(ne){var N=this.globalToLocal(ne.x,ne.y);N&&(D.getChildAt(O).loc(N).rot((ne.angle>180?ne.angle-360:ne.angle)*i/100),_&&(D.getChildAt(O).rotation+=180))}}return this},E(),this.showPath=function(Z){return this.toggle(!0),r.toggle(Z),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(m,"text",{get:function(){return t.text},set:function(Z){t.text=Z,o=[];for(var V=0;V<t.text.length;V++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*V));E()}}),Object.defineProperty(this,"color",{get:function(){return k},set:function(Z){k=Z;for(var V=0;V<m.letters.numChildren;V++)m.letters.getChildAt(V).color=k;m.stage&&m.stage.update()}}),Object.defineProperty(m,"interactive",{get:function(){return d},set:function(Z){d=Z,r.interactive=Z,this.ticker&&e.Ticker.remove(this.ticker),d&&(this.ticker=e.Ticker.add(function(){m.resize()}))}}),this.interactive&&(this.ticker=e.Ticker.add(function(){m.resize()}));var X=m.toggled=l;this.toggle=function(Z){if(this.allowToggle)return n(Z)?X=!X:Z?X=!0:X=!1,X?(r.alp(A),this.interactive&&(r.showControls(),D.mouseEnabled=!1,D.mouseChildren=!1,D.cur("default"),this.controlHideEvent&&r.off("controlshide",this.controlHideEvent),this.controlHideEvent=r.on("controlshide",function(){D.mouseEnabled=!0,D.mouseChildren=!0,D.cur("pointer"),A=r.alpha,r.alp(0),X=!1,m.toggled=X,m.stage&&m.stage.update()},null,!0))):(A=r.alpha,r.alp(0),D.mouseEnabled=!0,D.mouseChildren=!0,D.cur("pointer")),m.toggled=X,m.stage&&m.stage.update(),m},m.toggle(!0),P!==!1&&e.styleTransforms(this,S),this.clone=function(){return m.cloneProps(new e.LabelOnPath(m.label.clone(),m.path.clone(),i,e.copy(o),l,f,d,p,_,P,this.group,R))},this.dispose=function(Z,V,O){return this.ticker&&e.Ticker.remove(this.ticker),O||this.zimContainer_dispose(!0),!0}},e.extend(e.LabelOnPath,e.Container,["clone","dispose"],"zimContainer",!1),e.LabelOnArc=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A){var D="label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",C;if(C=mt(e.LabelOnArc,arguments,D,this))return C;qe("54.55"),this.group=m;var E=k===!1?{}:e.getStyle("LabelOnArc",this.group,A);n(r)&&(r=E.size!=null?E.size:30),n(t)&&(t=E.label!=null?E.label:new e.Label("Label on Arc",r)),n(i)&&(i=E.font!=null?E.font:"verdana"),n(o)&&(o=E.color!=null?E.color:e.white),n(l)&&(l=E.radius!=null?E.radius:100),n(f)&&(f=E.flip!=null?E.flip:!1),n(d)&&(d=E.spacing!=null?E.spacing:0),n(p)&&(p=E.letterSpacing!=null?E.letterSpacing:5),n(_)&&(_=E.angles!=null?E.angles:null);var X=!n(_),Z=e.copy(_);n(P)&&(P=E.showCircle!=null?E.showCircle:!1),n(T)&&(T=E.arcColor!=null?E.arcColor:null),n(R)&&(R=E.arcBorderColor!=null?E.arcBorderColor:null),n(b)&&(b=E.arcBorderWidth!=null?E.arcBorderWidth:null),n(L)&&(L=E.radiusSpread!=null?E.radiusSpread:!1),n(S)&&(S=E.rtl!=null?E.rtl:fe.DIR=="rtl"||e.DIR=="rtl");var V=this.outerRadius=l+d+t.height;this.innerRadius=l+d,this.zimContainer_constructor(-V,-V,V*2,V*2,!1),this.type="LabelOnArc";var O=this;t.type!="Label"&&(t=new e.Label(t,r,i,o)),t.text;var ne,N,q,U,z,ie;function ae(){if(O.disposeAllChildren(),f){var G=t.text.split("").reverse().join("");t.text=G}ne=O.letters=new e.Container(O.width,O.height).centerReg(O),O.numLetters=t.text.length,O.letterHeight=t.height,N=O.labels=[];var v;for(v=0;v<O.numLetters;v++){var w=t.clone();N.push(w),w.text=t.text[v],w.letterHolder=new e.Container(w.width,w.height),w.centerReg(w.letterHolder).rot(f?180:0)}if(S&&N.reverse(),U=O.circle=new e.Circle(l),P&&U.addTo(O),q=O.arc=new e.Shape().addTo(O),he(),_){for(z=0,v=0;v<_.length;v++)z+=_[v];z+=_[_.length-1]/2}$()}ae();function he(){z=0,ie=[0];for(var G=0;G<O.numLetters;G++){var v=N[G],w=Math.atan((v.width+p)/2/(l+d))*180/Math.PI*2;ie.push(w),z+=w,v.letterHolder.centerReg(ne).reg(null,l+d+v.height+(f?v.height*.13:0))}O.circle.radius=l,(T||R||b)&&(b>0&&n(R)?R=e.black:n(b)&&!n(R)&&(b=2),q.graphics.c().f(null).s(R).ss(b).arc(0,0,l,(O.startAngle-90)*Math.PI/180,(O.startAngle-90+z)*Math.PI/180))}function $(){var G;if(!X)for(_=[],G=0;G<ie.length-1;G++)_[G]=Math.round((ie[G]+ie[G+1])/2*100)/100;O.angles=_,O.startAngle=-z/2;var v=O.startAngle;for(G=0;G<ne.numChildren;G++){var w=ne.getChildAt(G);v=w.rotation=v+_[G]}}Object.defineProperty(this,"radius",{get:function(){return l},set:function(G){l=G,he(),!X&&!L&&$()}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(G){o=G;for(var v=0;v<O.labels.length;v++)O.labels[v].color=o;O.stage&&O.stage.update()}}),Object.defineProperty(O,"text",{get:function(){return t.text},set:function(G){t.text=G,Z?_=e.copy(Z):_=null,ae()}}),k!==!1&&e.styleTransforms(this,E),this.clone=function(){return O.cloneProps(new e.LabelOnArc(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,this.group,A))}},e.extend(e.LabelOnArc,e.Container,"clone","zimContainer",!1),e.LabelLetters=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S){var k="label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",m;if(m=mt(e.LabelLetters,arguments,k,this))return m;qe("54.57"),this.group=L;var A=b===!1?{}:e.getStyle("LabelLetters",this.group,S);n(t)&&(t=A.label!=null?A.label:new e.Label("Label Letters")),n(r)&&(r=A.align!=null?A.align:"center"),n(i)&&(i=A.valign!=null?A.valign:"center"),n(o)&&(o=A.letterSpacing!=null?A.letterSpacing:5),n(l)&&(l=A.letterSpacings!=null?A.letterSpacings:null),n(p)&&(p=A.lineHeight!=null?A.lineHeight:null),n(f)&&(f=A.lineSpacing!=null?A.lineSpacing:5),n(d)&&(d=A.lineSpacings!=null?A.lineSpacings:null),n(R)&&(R=A.rtl!=null?A.rtl:!1),n(_)&&(_=A.lineAlign!=null?A.lineAlign:R?"right":"left"),n(P)&&(P=A.lineValign!=null?A.lineValign:"bottom"),n(T)&&(T=A.cache!=null?A.cache:!1),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var D=this,C=D.letterData=[],E,X;t.type!="Label"?(X=Z(t),C=X.data,t=new e.Label(X.text)):(X=Z(t.text),C=X.data,t.text=X.text),D.text=X.original,D._color=t.color,fe.DIR&&fe.DIR=="rtl"||!fe.DIR&&e.DIR=="rtl"?_=="start"?_="right":_=="end"&&(_="left"):_=="start"?_="left":_=="end"&&(_="right");function Z(we){var ke=[];function pe(We){return We.split("").reverse().join("")}if(R){Re=-1,we=we.replace(/[\u0591-\u07FF]+/ig,pe),we=we.replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/ig,"$1-!!-$2"),we=we.replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/ig,"$1-!!-$2"),we=we.replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/ig,"$1-!!- -!!-$2"),we=we.replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/ig,"$1-!!- -!!-$2");var Me=we.split(/-!!-/g);e.loop(Me,function(We,oe){We.match(/[\u0591-\u07FF]/i)&&(Me[oe]=We.split(" ").reverse().join(" "))}),we=Me.join("")}we=we.replace(/\n|\r/g,"<br>"),we=we.replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>"),we=we.replace(/<\/strong>/gi,"</b>"),we=we.replace(/<em>|<em \/>|<em\/>/gi,"<i>"),we=we.replace(/<\/em>/gi,"</i>"),we=we.replace(/\\n|\\r/g,"<br>"),we=we.replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>"),we=we.replace(/<b/gi,"<b"),we=we.replace(/<i/gi,"<i"),we=we.replace(/<u/gi,"<u"),we=we.replace(/<br/gi,"<br"),we=we.replace(/<a/gi,"<a"),we=we.replace(/<font/gi,"<font");var Ue=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g],ue=["b","a","i","u","font"],Ee;e.loop(ue,function(We,oe){Ee=we.replace(Ue[oe*2],"");var Ye;We=="font"?Ye=Ee.split("<font "):We=="a"?Ye=Ee.split("<a "):Ye=Ee.split("<"+We+">"),_e(Ye,We,0),Ee=we.replace(Ue[oe*2+1],""),Ye=Ee.split("</"+We+">"),_e(Ye,We,1)}),Ee=we.replace(/<br>/gi,"@^#"),Ee=Ee.replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"");var Te=Ee.split("@^#");E=Te.join("\n"),Ee=Te.join(""),_e(Te,"br",0);function _e(We,oe,Ye){if(We.length>1)if((oe=="font"||oe=="a")&&Ye==0){var Ve=We[0].length;e.loop(We,function(de,Be){if(Be!=0){var Qe=ke[Ve];Qe||(ke[Ve]=[]),Qe=ke[Ve];var Ke=de.split(">");Qe[Ye]?Qe[Ye].push(oe+" "+Ke[0]):Qe[Ye]=[oe+" "+Ke[0]],Ve+=Ke[1].length}})}else{We.pop();var De=0;e.loop(We,function(de){De+=de.length;var Be=ke[De];Be||(ke[De]=[]),Be=ke[De],Be[Ye]?Be[Ye].push(oe):Be[Ye]=[oe]})}}return{text:Ee,data:ke,original:E}}D.numLetters=t.text.length;var V=!n(l);l&&!Array.isArray(l)&&(l=null);var O;if(l)for(O=0;O<D.numLetters;O++)n(l[O])&&(l[O]=o);else for(l=[],O=0;O<D.numLetters;O++)l.push(o);if(D.letterSpacings=l,d&&!Array.isArray(d)&&(d=null),d)for(O=0;O<D.numLetters-1;O++)n(d[O])&&(d[O]=f);else for(d=[],O=0;O<D.numLetters-1;O++)d.push(f);D.lineSpacings=d,D.labels=[],D.lines=[[]];var ne=[],N=[],q=[0],U=0,z=0,ie=0,ae=0,he=0,$=C,G=!1,v=!1,w=!1,h=!1,I=!1,Q=!1,x=!1,F=!1,Ae=!1,Y=!1,K=!1,ge=!1;for(D.rolls=[[]],O=0;O<D.numLetters;O++){h=!1,$[O]&&($[O][1]&&($[O][1].indexOf("b")>=0&&(G=!1),$[O][1].indexOf("i")>=0&&(v=!1),$[O][1].indexOf("u")>=0&&(w=!1),e.loop($[O][1],function(we){if(we.match(/^font/i)){I=!1,K=!1,ge&&D.rolls.push([]),ge=!1,Q=!1,F=!1,x=!1;return}if(we.match(/^a/i)){Ae=!1,Y=!1;return}})),$[O][0]&&($[O][0].indexOf("b")>=0&&(G=!0),$[O][0].indexOf("i")>=0&&(v=!0),$[O][0].indexOf("u")>=0&&(w=!0),h=0,e.loop($[O][0],function(we){we=="br"&&h++}),e.loop($[O][0],function(we){var ke,pe;if(we.match(/^font/i)){ke=we.match(/ color\s?=\s?(\S*)/i),ke&&(I=ke[1],pe=e.colors.indexOf(I),pe>=0&&(I=e.colorsHex[pe]),I=I.replace(/'/g,"")),ke=we.match(/size\s?=\s?(\S*)/i),ke&&(Q=ke[1]),ke=we.match(/backgroundColor\s?=\s?(\S*)/i),ke&&(K=ke[1],pe=e.colors.indexOf(K),pe>=0&&(K=e.colorsHex[pe]),K=K.replace(/'/g,"")),ke=we.match(/rollBackgroundColor\s?=\s?(\S*)/i),ke&&(ge=ke[1],pe=e.colors.indexOf(ge),pe>=0&&(ge=e.colorsHex[pe]),ge=ge.replace(/'/g,"")),ke=we.match(/group\s?=\s?(\S*)/i),ke&&(x=ke[1]),ke=we.match(/family\s?=\s?(.*)/i),ke&&(F=ke[1],F=F.split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]);return}if(we.match(/^a/i)){ke=we.match(/href\s?=\s?(\S*)/i),ke&&(Ae=ke[1]),ke=we.match(/target\s?=\s?(\S*)/i),ke&&(Y=ke[1]);return}})));var ye;x?ye=new e.Label({text:t.text[O],group:x}):(ye=t.clone(),ye.text=t.text[O]),D.labels.push(ye),G&&(ye.bold=!0),v&&(ye.italic=!0),I&&(ye.color=I),K&&(ye.backgroundColor=K);var ee=V||n(ye.backgroundColor)?l[O]:-.5;ge&&(ye.rollIndex=D.rolls.length-1,ye.zrbc=ge,ye.zobc=ye.backgroundColor,D.rolls[ye.rollIndex].push(ye),ye.expand(0),ye.on("mouseover",ce),ye.on("mouseout",ve)),Ae&&(ye.expand(ee,0),ye.zurl=Ae,ye.ztar=Y,ye.cur(),ye.on("click",function(we){var ke=we.currentTarget;ve(we),ke.ztar||(ke.ztar="_self"),or(ke.zurl,ke.ztar)})),F&&(ye.font=F),Q&&(ye.size=Q),h&&(U+=(n(p)?ie:p)+d[ae],q.push(U),N.push(n(p)?ie:p),ne.push(z),he=Math.max(he,z)),h&&(h>1&&e.loop(h-1,function(){D.lines.push([]),U+=(n(p)?ie:p)+d[ae],q.push(U),N.push(n(p)?ie:p),ne.push(0),ae++}),ie=0,z=0,D.lines.push([]),ae++),z+=ye.width+ee,ie=Math.max(ie,ye.height),O==D.numLetters-1&&(ne.push(z),N.push(ie),he=Math.max(he,z)),D.lines[ae].push(ye),w&&(ye.underline=new e.Line(ye.width+ee+1,1,ye.color).center(ye,this).mov(0,ye.height/2))}function ce(we){var ke=we.currentTarget,pe=D.rolls[ke.rollIndex];e.loop(pe,function(Me){Me.backgroundColor=ke.zrbc}),ke.stage&&ke.stage.update()}function ve(we){var ke=we.currentTarget,pe=D.rolls[ke.rollIndex];e.loop(pe,function(Me){Me.backgroundColor=ke.zobc}),ke.stage&&ke.stage.update()}for(var Re=0,se=0;se<D.lines.length;se++){var Oe=D.lines[se];z=ne[se],ie=N[se],U=q[se];var J,xe;for(_=="left"?J=0:_=="right"?J=he-z:J=(he-z)/2,xe=U,O=0;O<Oe.length;O++){Re++,T&&ye.cache(),ye=Oe[O],ye.regX=r=="left"?0:r=="right"?ye.width:ye.width/2,ye.regY=i=="top"?0:i=="bottom"?ye.height:ye.height/2;var te=xe+(i=="top"?0:i=="bottom"?ye.height:ye.height/2);P=="center"||P=="middle"?te+=(N[se]-ye.height)/2:P=="bottom"&&(te+=N[se]-ye.height),ee=V||n(ye.backgroundColor)?l[Re-1]:-.5,r=="left"?(ye.loc(J,te,this),J=ye.x+ye.width+ee):r=="right"?(ye.loc(J+ye.width,te,this),J=ye.x+ee):(ye.loc(J+ye.width/2,te,this),J=ye.x+ye.width/2+ee)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(we){this._color=we;for(var ke=0;ke<D.numChildren;ke++)D.getChildAt(ke).color=this._color;D.stage&&D.stage.update()}}),this.dispose=function(){e.gD(this),e.loop(D.labels,function(we){we.removeFrom(),we.dispose()}),D.removeFrom()},b!==!1&&e.styleTransforms(this,A),this.clone=function(){return D.cloneProps(new e.LabelLetters(t,r,i,o,l,f,d,p,_,P,T,R,b,this.group,S))}},e.extend(e.LabelLetters,e.Container,"clone","zimContainer",!1),e.Emoji=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m){var A="code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingH, paddingV, shiftH, shiftV, style, group, inherit",D;if(D=mt(e.Emoji,arguments,A,this))return D;qe("54.58"),this.group=k;var C=S===!1?{}:e.getStyle("Emoji",this.group,m);n(t)&&(t=C.code!=null?C.code:"\u{1F642}"),n(r)&&(r=C.size!=null?C.size:30),n(i)&&(i=C.monochrome!=null?C.monochrome:!1),n(o)&&(o=C.italic!=null?C.italic:!1),(n(l)||l=="ignore")&&(l=C.backgroundColor!=null&&l!="ignore"?C.backgroundColor:null),n(f)&&(f=C.backgroundBorderColor!=null&&f!="ignore"?C.backgroundBorderColor:null),n(d)&&(d=C.backgroundBorderWidth!=null&&d!="ignore"?C.backgroundBorderWidth:null),(n(P)||P=="ignore")&&(P=C.padding!=null&&P!="ignore"?C.padding:10),n(T)&&(T=C.paddingH!=null?C.paddingH:P),n(R)&&(R=C.paddingV!=null?C.paddingV:P),n(b)&&(b=C.shiftH!=null?C.shiftH:0),n(L)&&(L=C.shiftV!=null?C.shiftV:0);var E=X(t,r);this.veeObj={code:E[0],size:E[1]};function X(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),t.substring(0,2)=="U+"&&(t=e.unicodeToUTF(t)),this.zimLabel_constructor(t,r,null,null,null,null,null,null,null,null,o,null,null,null,_,null,null,l,null,null,p,null,P,T,R,b,L),this.type="Emoji",this.code=t,this.size=r;var Z=this,V=this.getBounds(),O=5,ne=3;this.bounds=this.setBounds(V.x+ne,V.y-O+1,V.width-ne*2,V.height+O),i&&(this.saturation=-100);var N=i;Object.defineProperty(Z,"monochrome",{get:function(){return N},set:function(q){q!=N&&(N=q,q&&(this.saturation=q?-100:0))}}),this.cache=function(q,U,z,ie){return n(q)?(U=this.getBounds(),this.zimLabel_cache(U.x-20,U.y-20,U.width+40,U.height+40)):this.zimLabel_cache(q,U,z,ie),Z.z_bc=Z.canvas=Z.cacheCanvas,this},S!==!1&&e.styleTransforms(this,C),this.clone=function(q){return Z.cloneProps(new e.Emoji(q||!e.isPick(E[0])?t:E[0],q||!e.isPick(E[1])?Z.size:E[1],i,o,l,f,d,p,_,P,T,R,b,L,S,Z.group,m))}},e.extend(e.Emoji,e.Label,["clone","cache"],"zimLabel",!1),e.Button=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we,ke,pe,Me,Ue,ue,Ee,Te,_e,We,oe,Ye){var Ve="width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentH, indentV, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",De;if(De=mt(e.Button,arguments,Ve,this))return De;qe("55"),this.group=oe;var de=We===!1?{}:e.getStyle("Button",oe,Ye);n(t)&&(t=de.width!=null?de.width:200),n(r)&&(r=de.height!=null?de.height:60),n(fe.M)&&(fe.M=e.mobile());var Be=d,Qe=p,Ke=_;n(d)&&(d=de.color!=null?de.color:e.white),n(p)&&(p=de.rollColor!=null?de.rollColor:e.white),n(ae)&&(ae=de.autoPadding!=null?de.autoPadding:20),n(he)&&(he=de.autoPaddingH!=null?de.autoPaddingH:ae),n($)&&($=de.autoPaddingV!=null?de.autoPaddingV:ae),n(ne)&&(ne=de.align!=null?de.align:"center"),n(N)&&(N=de.valign!=null?de.valign:"center"),n(i)&&(n(m)?i=de.label!=null?de.label:"PRESS":i=""),typeof i=="string"||typeof i=="number"?i=new e.Label({text:i,size:de.size!=null?de.size:36,font:de.font!=null?de.font:"arial",color:de.color!=null&&Be==null?de.color:d,rollColor:de.rollColor&&Qe==null!=null?de.rollColor:p,align:ne,valign:N,rollPersist:de.rollPersist!=null?de.rollPersist:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftV:de.shiftV!=null?de.shiftV:0,shiftH:de.shiftH!=null?de.shiftH:0,style:!1,group:this.group}):(n(Be)||(i.color=Be),d=i.color,(n(i.rollColor)||!n(Qe))&&(i.rollColor=p),p=i.rollColor),n(_)&&(_=de.downColor!=null?de.downColor:p),t=="auto"&&(t=i.width+he*2),r=="auto"&&(r=i.height+$*2),this.zimContainer_constructor(t,r,null,null,!1),this.type="Button",n(o)&&(o=de.backgroundColor!=null?de.backgroundColor:e.purple),n(l)&&(l=de.rollBackgroundColor!=null?de.rollBackgroundColor:o.lighten(.2)),n(f)&&(f=de.downBackgroundColor!=null?de.downBackgroundColor:l);var lt=gt(o,l,f,d,p,_);this.veeObj={backgroundColor:lt[0],rollBackgroundColor:lt[1],downBackgroundColor:lt[2],color:lt[3],rollColor:lt[4],downColor:lt[5]};function gt(){return arguments}o=dt(o),l=dt(l),f=dt(f),d=dt(d),p=dt(p),_=dt(_);var He=P,it=T;n(P)&&(P=de.borderColor!=null?de.borderColor:null),n(T)&&(T=de.borderWidth!=null?de.borderWidth:null),P<0||T<0?P=T=null:P!=null&&T==null&&(T=1),n(R)&&(R=de.rollBorderColor!=null?de.rollBorderColor:P),n(b)&&(b=de.downBorderColor!=null?de.downBorderColor:R),n(C)&&(C=de.corner!=null?de.corner:10),n(X)&&(X=de.shadowColor!=null?de.shadowColor:"rgba(0,0,0,.3)"),n(Z)&&(Z=de.shadowBlur!=null?de.shadowBlur:14),n(ie)&&(ie=de.hitPadding!=null?de.hitPadding:0),n(q)&&(q=de.indent!=null?de.indent:10),n(U)&&(U=de.indentH!=null?de.indentH:q),n(z)&&(z=de.indentV!=null?de.indentV:q),n(V)&&(V=de.gradient!=null?de.gradient:0),n(O)&&(O=de.gloss!=null?de.gloss:0);var ft=(!n(v)||!n(Ae)||!n(Y)||!n(K)||!n(ge)||!n(ye)||!n(ee))&&n(ve)&&n(ke)&&n(pe);ft&&n(ce)&&(ce=fe.M?"mousedown":"click"),n(G)&&(G=de.rollPersist!=null?de.rollPersist:!1),this.rollPersist=G,n(E)&&(E=de.dashed!=null?de.dashed:!1),!n(v)&&v.type=="Label"&&kt&&ht("Button() - do not pass Label to toggle parameter - just pass a String"),n(w)&&(w=de.toggleBackgroundColor!=null?de.toggleBackgroundColor:o),n(h)&&(h=de.rollToggleBackgroundColor!=null?de.rollToggleBackgroundColor:l),n(I)&&(I=de.downToggleBackgroundColor!=null?de.downToggleBackgroundColor:h),n(Q)&&(Q=de.toggleColor!=null?de.toggleColor:i.color),n(x)&&(x=de.rollToggleColor!=null?de.rollToggleColor:i.rollColor),n(F)&&(F=de.downToggleColor!=null?de.downToggleColor:i.rollToggleColor),n(se)&&(se=de.waitBackgroundColor!=null?de.waitBackgroundColor:o),n(Oe)&&(Oe=de.rollWaitBackgroundColor!=null?de.rollWaitBackgroundColor:l),n(J)&&(J=de.downWaitBackgroundColor!=null?de.downWaitBackgroundColor:l),n(xe)&&(xe=de.waitColor!=null?de.waitColor:i.color),n(te)&&(te=de.rollWaitColor!=null?de.rollWaitColor:i.rollColor),n(we)&&(we=de.downWaitColor!=null?de.downWaitColor:te);var Se=this;this.mouseChildren=!1,this.cur("pointer"),Se.focus=!1,Se.rolled=!1;var Fe=g(Re);n(L)&&(L=de.backing!=null?de.backing.clone():null),n(L)?Se.backing=new e.Rectangle(t,r,o,null,null,C,E,null,null,!1).centerReg(null,null,!1):Se.backing=L,Se.rollBacking=n(S)?de.rollBacking!=null?de.rollBacking.clone():null:S,Se.downBacking=n(k)?de.downBacking!=null?de.downBacking.clone():null:k,Se.waitBacking=n(ke)?de.waitBacking!=null?de.waitBacking.clone():null:ke,Se.rollWaitBacking=n(pe)?de.rollWaitBacking!=null?de.rollWaitBacking.clone():null:pe,Se.downWaitBacking=n(Me)?de.downWaitBacking!=null?de.downWaitBacking.clone():null:Me,Se.toggleBacking=n(Ae)?de.toggleBacking!=null?de.toggleBacking.clone():null:Ae,Se.rollToggleBacking=n(Y)?de.rollToggleBacking!=null?de.rollToggleBacking.clone():null:Y,Se.downToggleBacking=n(K)?de.downToggleBacking!=null?de.downToggleBacking.clone():null:K;var me=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],$e,st,Je;for(Je=0;Je<me.length;Je++)$e=me[Je],st=Se[$e],st&&(st.type=="Pattern"?st=rt($e,st):X!=-1&&Z>0&&(st.shadow=new je.Shadow(X,3,3,Z)),st.x=t/2,st.y=r/2);Se.addChild(Se.backing),T&&(Se.border=new e.Rectangle(t,r,"rgba(0,0,0,0)",P,T,C,E,null,null,!1),Se.addChild(Se.border));function rt(wt,Bt){if(Se[wt]=new e.Container(t,r,null,null,!1).centerReg(null,null,!1),X!=-1&&Z>0){var Ht=new e.Rectangle(t-2,r-2,"#666",null,null,C,null,null,null,!1).center(Se[wt]);Ht.shadow=new je.Shadow(X,3,3,Z)}var Jt=Se[wt].mask=new e.Rectangle(t,r,wt.indexOf("roll")>=0?l:o,null,null,C,null,null,null,!1).addTo(Se[wt]);return Bt.centerReg(Jt),Bt.setMask(Jt.shape),Se[wt].pattern=Bt,Se[wt]}Se.icon=n(m)?de.icon!=null?de.icon.clone():null:m,Se.rollIcon=n(A)?de.rollIcon!=null?de.rollIcon.clone():null:A,Se.downIcon=n(D)?de.downIcon!=null?de.downIcon.clone():null:D,Se.waitIcon=n(Ue)?de.waitIcon!=null?de.waitIcon.clone():null:Ue,Se.rollWaitIcon=n(ue)?de.rollWaitIcon!=null?de.rollWaitIcon.clone():null:ue,Se.downWaitIcon=n(Ee)?de.downWaitIcon!=null?de.downWaitIcon.clone():null:Ee,Se.toggleIcon=n(ge)?de.toggleIcon!=null?de.toggleIcon.clone():null:ge,Se.rollToggleIcon=n(ye)?de.rollToggleIcon!=null?de.rollToggleIcon.clone():null:ye,Se.downToggleIcon=n(ee)?de.downToggleIcon!=null?de.downToggleIcon.clone():null:ee;var Ce=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(Je=0;Je<Ce.length;Je++){var ze=Ce[Je],Xe=Se[ze];Xe&&(Xe.x=t/2,Xe.y=r/2)}if(Se.icon&&Se.addChild(Se.icon),Array.isArray(C)||(C=[C,C,C,C]),V>0){var Ze=new je.Shape;Ze.graphics.lf(["rgba(255,255,255,"+V+")","rgba(0,0,0,"+V+")"],[0,1],0,0,0,r-T),Ze.graphics.rc(T/2,T/2,t-T,r-T,C[0],C[1],C[2],C[3]),this.addChild(Ze)}if(O>0){var ot=new je.Shape;ot.graphics.f("rgba(255,255,255,"+O+")"),ot.graphics.rc(T/2,T/2,t-T,(r-T)/2,C[0],C[1],0,0),ot.graphics.f("rgba(0,0,0,"+O+")"),ot.graphics.rc(T/2,r/2,t-T,(r-T)/2,0,0,C[2],C[3]),this.addChild(ot)}var Ge,et;ie>0&&pt();function pt(){et=new je.Shape,et.graphics.f("#000").r(-ie,-ie,t+ie*2,r+ie*2),Se.hitArea=Ge=et}this.addChild(i),i.center(this),i.y+=1,this.label=i,e.pos(i,ne=="left"||ne=="right"?U:null,N=="top"||N=="bottom"?z:null,ne=="right",N=="bottom");var Le=i.color;if(this.toggled=!1,ft){var tt=i.text,vt=i.color,nt=i.rollColor;this.on(ce,function(){Se.toggled=!Se.toggled,Tt()})}function Tt(){Se.toggled?(n(v)||(Se.label.text=v===!0?tt:v),n(Q)||(Se.label.colorOnly=Le=Q),n(x)||(Se.label.rollColor=x),Se.rolled?(Se.rollToggleBacking?Ot("rollToggleBacking"):Se.toggleBacking&&Ot("toggleBacking"),Se.rollToggleIcon?Ot("rollToggleIcon"):Se.toggleIcon&&Ot("toggleIcon"),n(L)&&n(Se.rollToggleBacking)&&(Se.backing.color=h)):(Se.toggleBacking&&Ot("toggleBacking"),Se.toggleIcon&&Ot("toggleIcon"),n(L)&&(Se.backing.color=w))):(Se.label.colorOnly=Le=vt,Se.label.rollColor=nt,Se.rolled&&Se.label.showRollColor(!0),Se.label.text=tt,xt()),Se.stage&&Se.stage.update()}function xt(){Se.pressed?(n(L)&&Se.backing&&!Se.downBacking&&(Se.backing.color=f),Se.downBacking?Ot("downBacking"):Se.rollBacking?Ot("rollBacking"):Se.backing&&Ot("backing"),Se.downIcon?Ot("downIcon"):Se.rollIcon?Ot("rollIcon"):Se.icon?Ot("icon"):Ot("icon",null)):Se.rolled?(n(L)&&Se.backing&&!Se.rollBacking&&(Se.backing.color=l),Se.rollBacking?Ot("rollBacking"):Se.backing&&Ot("backing"),Se.rollIcon?Ot("rollIcon"):Se.icon?Ot("icon"):Ot("icon",null)):(n(L)&&Se.backing&&(Se.backing.color=o),Se.backing&&Ot("backing"),Se.icon,Ot("icon"))}this.toggle=function(wt){return ft?(n(wt)?Se.toggled=!Se.toggled:Se.toggled=wt,Tt(),Se):(kt&&ht("Button() - can't toggle with wait parameters provided"),Se)};var Ct=!1;Se.waiting=!1;var ct=!1,Rt,At,bt=Se.label.color,Ft=Se.label.rollColor,Yt,$t,sn=this.on("mousedown",function(){Ct=!0,nn()});function nn(){(!n(ve)||!n(ke)||!n(pe))&&!Se.waiting&&(ct=!0,n(_e)&&(_e=!0),Te&&($t=Se.stage.on("stagemousedown",function(wt){Se.hitTestPoint(wt.stageX/e.scaX,wt.stageY/e.scaY)||Se.clearWait()},null,!0)),setTimeout(function(){Se.waiting=!0},50),At=i.text,n(xe)||(Se.label.colorOnly=Le=xe),n(te)||(Se.label.rollColor=te),Yt=Se.enabled,!_e&&Se.enabled&&(Se.enabled=!1),n(ve)||(Se.label.text=ve),Se.rolled?(n(L)&&!Se.rollWaitBacking&&(Se.backing.color=Oe),Se.rollWaitBacking?Ot("rollWaitBacking"):Se.waitBacking&&Ot("waitBacking"),Se.rollWaitIcon?Ot("rollWaitIcon"):Se.waitIcon&&Ot("waitIcon")):(n(L)&&!Se.waitBacking&&(Se.backing.color=se),Se.waitBacking&&Ot("waitBacking"),Se.waitIcon&&Ot("waitIcon")),n(Re)&&(Re=Fe=="s"?5:5e3),Rt&&Rt.clear(),Rt=e.timeout(Re,function(){Se.enabled||(Se.enabled=Yt),Se.clearWait(),Se.dispatchEvent("waited")}),Se.stage&&Se.stage.update())}this.wait=nn,this.clearWait=function(){return Rt&&($t&&Se.stage.off("stagemousedown",$t),Rt.clear(),Se.label.text=At,xt(),Se.label.colorOnly=Le=bt,Se.label.rollColor=Ft,setTimeout(function(){Se.waiting=!1},55),ct=!1,Se.stage&&Se.stage.update()),Se},this.removeWait=function(){return Se.clearWait(),ve=null,Se.waitBacking=null,Se.rollWaitBacking=null,Se.off("mousedown",sn),Se};function Ot(wt,Bt){var Ht;if(wt.indexOf("con")>=0){for(Ht=0;Ht<Ce.length;Ht++){var Jt=Ce[Ht],cn=Se[Jt];Se.removeChild(cn)}Se[wt]&&Se.addChildAt(Se[wt],1)}else{if(!Se[wt]&&!Bt)return;for(Ht=0;Ht<me.length;Ht++){var jt=me[Ht],an=Se[jt];Se.removeChild(an)}Se[wt]&&Se.addChildAt(Se[wt],0)}}var Zt=!1;this.on("mouseover",function(wt){Se.stage&&Se.stage.frame.leftMouseDown&&!Pt||at()});function at(){Se.rolled=!0,Zt=!0,ct?(Se.pressed&&Se.downWaitBacking?Ot("downWaitBacking"):Se.pressed&&Se.downBacking?Ot("downBacking"):Se.rollWaitBacking?Ot("rollWaitBacking"):Se.waitBacking?Ot("waitBacking"):Se.rollBacking?Ot("rollBacking"):Ot("backing"),Se.pressed&&Se.downWaitIcon?Ot("downWaitIcon"):Se.rollWaitIcon?Ot("rollWaitIcon"):Se.waitIcon?Ot("waitIcon"):Se.rollIcon?Ot("rollIcon"):Ot("icon",!0)):ft&&Se.toggled?(Se.pressed&&Se.downToggleBacking?Ot("downToggleBacking"):Se.pressed&&Se.downBacking?Ot("downBacking"):Se.rollToggleBacking?Ot("rollToggleBacking"):Se.toggleBacking?Ot("toggleBacking"):Se.rollBacking?Ot("rollBacking"):Ot("backing"),Se.pressed&&Se.downToggleIcon?Ot("downToggleIcon"):Se.rollToggleIcon?Ot("rollToggleIcon"):Se.toggleIcon?Ot("toggleIcon"):Se.rollIcon?Ot("rollIcon"):Ot("icon",!0)):(Se.pressed&&Se.downBacking?Ot("downBacking"):Se.rollBacking?Ot("rollBacking"):Ot("backing"),Se.pressed&&Se.downIcon?Ot("downIcon"):Se.rollIcon?Ot("rollIcon"):Ot("icon",!0)),Se.pressed?n(L)&&Se.backing?Se.backing.color=f:L&&!n(L.mask)&&Se.backing&&(Se.backing.mask.color=f):n(L)&&Se.backing?Se.backing.color=l:L&&!n(L.mask)&&Se.backing&&(Se.backing.mask.color=l),Se.border&&(Se.border.borderColor=Se.pressed?b:R),Se.pressed?Se.label.colorOnly=_:Se.label.showRollColor?Se.label.showRollColor():Se.label.colorOnly=Le,Se.stage&&Se.stage.update()}var Pt=!1;this.on("mousedown",function(){Se.pressed=Pt=!0,at(),Se.rolled}),this.on("pressup",function(){Se.pressed=Pt=Ct=!1,Zt?at():Se.rollPersist&&Ut(),fe.M&&Dt()}),this.on("pressmove",function(){var wt=Se.stage?Se.stage.frame:fe.zdf,Bt=Se.hitTestPoint(wt.mouseX,wt.mouseY);Pt&&!Bt?(Dt(),Pt=!1):!Pt&&Bt&&(at(),Pt=!0)}),this.on("mouseout",Dt);function Dt(){Zt=!1,Se.rollPersist&&Ct||Ut()}function Ut(){Se.rolled=!1,ct||Se.waiting?(n(L)&&Se.backing&&n(Se.waitBacking)&&(Se.backing.color=n(se)?o:se),Se.waitBacking?Ot("waitBacking"):Se.backing&&Ot("backing"),Se.waitIcon?Ot("waitIcon"):Se.icon?Ot("icon"):Ot("icon",null)):Se.toggled&&ft?(n(L)&&Se.backing&&n(Se.toggleBacking)&&(Se.backing.color=w),Se.toggleBacking?Ot("toggleBacking"):Se.backing&&Ot("backing"),Se.toggleIcon?Ot("toggleIcon"):Se.icon?Ot("icon"):Ot("icon",null)):(n(L)&&Se.backing?Se.backing.color=o:L&&!n(L.mask)&&Se.backing&&(Se.backing.mask.color=o),Se.backing&&Ot("backing"),Se.icon?Ot("icon"):Ot("icon",null)),Se.border&&(Se.border.borderColor=P),Se.label.colorOnly=Le,Se.label.showRollColor&&Se.label.showRollColor(!1),Se.stage&&Se.stage.update()}Se.removeRoll=Ut,Se.rollBacking&&Se.rollBacking.removeFrom(),Object.defineProperty(Se,"text",{get:function(){var wt=i.text==" "?"":i.text;return wt},set:function(wt){i.text=wt,tt&&(tt=wt),i.center(this),i.y+=1,e.pos(i,ne=="left"||ne=="right"?U:null,N=="top"||N=="bottom"?z:null,ne=="right",N=="bottom")}}),Object.defineProperty(Se,"color",{get:function(){return d},set:function(wt){d=wt,vt&&(vt=d),Se.label&&!n(Se.label.color)&&(Se.label.color=Le=d),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Se.stage&&Se.stage.update()}}),Object.defineProperty(Se,"rollColor",{get:function(){return p},set:function(wt){p=wt,nt&&(nt=p),Se.label&&(Se.label.rollColor=p)}}),Object.defineProperty(Se,"downColor",{get:function(){return _},set:function(wt){_=wt,originalDownColor&&(originalDownColor=_),Se.label&&(Se.label.downColor=_)}}),Object.defineProperty(Se,"backgroundColor",{get:function(){return o},set:function(wt){o=wt,Se.backing.color?Se.backing.color=o:Se.backing.mask&&(Se.backing.mask.color=o),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Se.stage&&Se.stage.update()}}),Object.defineProperty(Se,"rollBackgroundColor",{get:function(){return l},set:function(wt){l=wt,Se.rollBacking&&Se.rollBacking.color?Se.rollBacking.color=l:Se.rollBacking&&Se.rollBacking.mask&&(Se.rollBacking.mask.color=l)}}),Object.defineProperty(Se,"toggleBackgroundColor",{get:function(){return w},set:function(wt){w=wt,Se.toggleBacking&&Se.toggleBacking.color?Se.toggleBacking.color=w:Se.toggleBacking&&Se.toggleBacking.mask&&(Se.toggleBacking.mask.color=w)}}),Object.defineProperty(Se,"rollToggleBackgroundColor",{get:function(){return h},set:function(wt){h=wt,Se.rollToggleBacking&&Se.rollToggleBacking.color?Se.rollToggleBacking.color=h:Se.rollToggleBacking&&Se.rollToggleBacking.mask&&(Se.rollToggleBacking.mask.color=h)}}),Object.defineProperty(Se,"downBackgroundColor",{get:function(){return f},set:function(wt){f=wt,Se.downBacking&&Se.downBacking.color?Se.downBacking.color=f:Se.downBacking&&Se.downBacking.mask&&(Se.downBacking.mask.color=f)}}),Object.defineProperty(Se,"borderColor",{get:function(){return P},set:function(wt){P=wt,Se.rolled||(Se.backing&&Se.backing.borderColor&&(Se.backing.borderColor=wt),Se.border&&(Se.border.borderColor=wt))}}),Object.defineProperty(Se,"rollBorderColor",{get:function(){return R},set:function(wt){R=wt,Se.rolled&&(Se.backing&&Se.backing.borderColor&&(Se.backing.borderColor=wt),Se.border&&(Se.border.borderColor=wt))}}),Object.defineProperty(Se,"hitPadding",{get:function(){return ie},set:function(wt){ie=wt,ie==0?Ge&&(this.hitArea=null):pt()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(Se,"enabled",{get:function(){return Se._enabled},set:function(wt){Se._enabled&&(Se.startMouseChildren=Se.mouseChildren),wt?(c(Se,wt),Se.mouseChildren=Se.startMouseChildren):(Ut(),c(Se,wt));var Bt=i.color;i.color=Le=Bt,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Se.stage&&Se.stage.update()}}),this.setBacking=function(wt,Bt){Gt(wt,Bt)},this.setIcon=function(wt,Bt){Gt(wt,Bt)};function Gt(wt,Bt){return n(wt)||(Se.contains(Se[wt])&&(Se.removeChild(Se[wt]),Bt&&Se.addChildAt(Bt,wt.indexOf("con")>=0?Se.numChildren-1:0),Se.stage&&Se.stage.update()),Bt?(n(L)&&wt=="backing"&&(L=Bt),Bt.type=="Pattern"&&(Bt=rt(wt,Bt)),Se[wt]=Bt,Se[wt].x=t/2,Se[wt].y=r/2):Se[wt]=null,xt()),Se}We!==!1&&e.styleTransforms(this,de),this.clone=function(wt){var Bt=new e.Button(t,r,i.clone(),wt||!e.isPick(lt[0])?o:lt[0],wt||!e.isPick(lt[1])?l:lt[1],wt||!e.isPick(lt[2])?f:lt[2],wt||!e.isPick(lt[3])?d:lt[3],wt||!e.isPick(lt[4])?p:lt[4],wt||!e.isPick(lt[5])?_:lt[5],He,it,R,b,n(L)?null:Se.backing.clone(),n(S)?null:Se.rollBacking.clone(),n(k)?null:Se.downBacking.clone(),n(m)?null:m.clone(),n(A)?null:A.clone(),n(D)?null:D.clone(),C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,n(Ae)?null:Ae.clone(),n(Y)?null:Y.clone(),n(K)?null:K.clone(),n(ge)?null:ge.clone(),n(ye)?null:ye.clone(),n(ee)?null:ee.clone(),ce,ve,Re,se,Oe,J,xe,te,we,n(ke)?null:ke.clone(),n(pe)?null:pe.clone(),n(Me)?null:Me.clone(),n(Ue)?null:Ue.clone(),n(ue)?null:ue.clone(),n(Ee)?null:Ee.clone(),Te,_e,We,this.group,Ye);return Se.cloneProps(Bt)},this.doDispose=function(wt,Bt,Ht){return Se.icon&&Se.icon.dispose(),Se.rollIcon&&Se.rollIcon.dispose(),Se.downIcon&&Se.downIcon.dispose(),Se.waitIcon&&Se.waitIcon.dispose(),Se.rollWaitIcon&&Se.rollWaitIcon.dispose(),Se.downWaitIcon&&Se.downWaitIcon.dispose(),Se.toggleIcon&&Se.toggleIcon.dispose(),Se.rollToggleIcon&&Se.rollToggleIcon.dispose(),Se.downToggleIcon&&Se.downToggleIcon.dispose(),Se.icon=Se.rollIcon=Se.downIcon=Se.waitIcon=Se.rollWaitIcon=Se.downWaitIcon=Se.toggleIcon=Se.rollToggleIcon=Se.downToggleIcon=null,Ht||this.zimContainer_dispose(!0),!0}},e.extend(e.Button,e.Container,["clone","dispose"],"zimContainer",!1),e.Button.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.CheckBox=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k){var m="size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",A;if(A=mt(e.CheckBox,arguments,m,this))return A;qe("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=S;var D=L===!1?{}:e.getStyle(this.type,this.group,k);n(t)&&(t=D.size!=null?D.size:60),n(r)&&(r=D.label!=null?D.label:null),n(i)&&(i=D.startChecked!=null?D.startChecked:!1),n(o)&&(o=D.color!=null?D.color:e.darker),n(l)&&(l=D.backgroundColor!=null?D.backgroundColor:e.white.toAlpha(.8)),n(f)&&(f=D.borderColor!=null?D.borderColor:e.darker),n(d)&&(d=D.borderWidth!=null?D.borderWidth:t/10),f<0||d<0?f=d=null:f!=null&&d==null&&(d=t/10),n(p)&&(p=D.corner!=null?D.corner:0),n(_)&&(_=D.margin!=null?D.margin:t/5),P!="box"&&P!="square"&&P!="x"&&(P=D.indicatorType!=null?D.indicatorType:"check"),n(T)&&(T=D.indicatorColor!=null?D.indicatorColor:d>0?f:e.black),this.setBounds(-_,-_,t+_*2,t+_*2),n(R)&&(R=D.tap!=null?D.tap:!1),n(b)&&(b=D.rtl!=null?D.rtl:fe.DIR=="rtl");var C=this;this.cur("pointer");var E=X(r,i);this.veeObj={label:E[0],startChecked:E[1]};function X(){return arguments}r=e.Pick.choose(r),i=e.Pick.choose(i);var Z=i;(typeof r=="string"||typeof r=="number")&&(r=new e.Label({text:r,size:t*5/6,color:o,valign:"center",align:b?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:L,group:this.group}));var V=this.box=new e.Rectangle(t,t,l,null,null,p),O=this.box2=new e.Rectangle(t*5/7,t*5/7,"rgba(0,0,0,0)",f,d,p);O.x=t/7,O.y=t/7,this.addChild(V,O);var ne=t;r&&(r.center(C),this.label=r,b?(r.x=-_,this.setBounds(-r.width-_*2,-_,t+_*3+r.getBounds().width,Math.max(t+_*2,r.getBounds().height)),ne=t+r.width+_,this.regX=t):(r.x=C.getBounds().width,this.setBounds(-_,-_,t+_*4+r.getBounds().width,Math.max(t+_*2,r.getBounds().height)),ne=r.x+r.width));var N=new e.Shape({style:!1}),q=N.graphics;q.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,ne+_*2,this.getBounds().height),this.hitArea=N;var U=new e.Shape({style:!1}),z=U.graphics;P=="check"?z.f(T).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):P=="box"||P=="square"?z.f(T).dr(-35,-35,70,70):z.f(T).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var ie=95;U.setBounds(-ie/2,-ie/2,ie,ie);var ae=t/(ie+66);U.scaleX=U.scaleY=ae,U.alpha=.9,U.x=t/2,U.y=t/2,Z&&this.addChild(U),R?this.tap(he):this.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",he),Object.defineProperty(C,"checked",{get:function(){return Z},set:function($){C.setChecked($)}}),this.toggle=function($){n($)&&($=!Z),C.setChecked($)},Object.defineProperty(C,"toggled",{get:function(){return Z},set:function($){C.setChecked($)}}),Object.defineProperty(C,"text",{get:function(){return r?r.text:null},set:function($){r&&(r.text=$,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&C.stage&&C.stage.update())}}),Object.defineProperty(U,"indicatorColor",{get:function(){return T},set:function($){Z&&C.removeChild(U),U=new je.Shape,z=U.graphics,T=$,z.f(T).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),U.scaleX=U.scaleY=ae,U.alpha=.9,U.x=t/2,U.y=t/2,Z&&C.addChild(U),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&C.stage&&C.stage.update()}}),Object.defineProperty(C,"indicator",{get:function(){return U},set:function(){ht("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function($){c(C,$)}});function he(){Z=!Z,C.setChecked(Z),C.dispatchEvent("change")}this.setChecked=function($){return n($)&&($=!0),Z=$,Z?C.addChild(U):C.removeChild(U),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&C.stage&&C.stage.update(),C},L!==!1&&e.styleTransforms(this,D),this.clone=function($){return C.cloneProps(new e.CheckBox(t,$||!e.isPick(E[0])?r?r.clone():null:E[0],$||!e.isPick(E[1])?i:E[1],o,l,f,d,p,_,P,T,R,b,L,this.group,k))}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k){var m="size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, rtl, style, group, inherit",A;if(A=mt(e.RadioButtons,arguments,m,this))return A;qe("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=S;var D=L===!1?{}:e.getStyle(this.type,this.group,k);n(t)&&(t=D.size!=null?D.size:60),t=Math.max(5,t),n(r)&&(r=D.buttons!=null?D.buttons:["A","B","C"]),n(i)&&(i=D.vertical!=null?D.vertical:!0),n(o)&&(o=D.color!=null?D.color:e.darker),n(l)&&(l=D.backgroundColor!=null?D.backgroundColor:"rgba(255,255,255,.8)"),n(f)&&(f=D.borderColor!=null?D.borderColor:e.darker),n(d)&&(d=D.borderWidth!=null?D.borderWidth:t/9),f<0||d<0?f=d=null:f!=null&&d==null&&(d=t/10),n(p)&&(p=i?D.spacing!=null?D.spacing:t*.2:D.spacing!=null?D.spacing:t),n(_)&&(_=D.margin!=null?D.margin:t/5),n(P)&&(P=D.always!=null?D.always:!1),n(T)&&(T=D.indicatorColor!=null?D.indicatorColor:d>0?f:e.black),n(b)&&(b=D.rtl!=null?D.rtl:fe.DIR=="rtl");var C=this;this.cur("pointer"),this.labels=[],this.indicators=[];var E=0,X;if(typeof r=="string"){var Z=r;r=[];for(var V=0;V<Z.length;V++)r.push({label:Z[V]})}var O=new e.Container({style:!1});this.addChild(O);function ne(ie){var ae=O.getChildIndex(ie.target);P&&C.selectedIndex==ae||(C.setSelected(ae),C.dispatchEvent("change"))}U();for(var N,q=0;q<O.numChildren;q++)N=O.getChildAt(q),N.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",ne);function U(){var ie,ae=!1,he;for(he=r.length-1;he>=0;he--)ie=r[he],ie.selected&&ie.selected===!0&&(ae?ie.selected="false":(ae=!0,C.id=ie.id));O.removeAllChildren(),C.buttons=[];var $,G=0;for(he=0;he<r.length;he++){if(ie=r[he],typeof ie=="string"||typeof ie=="number"){var v={selected:!1,label:new e.Label({text:ie,size:t*5/6,color:D.color!=null?D.color:o,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:L,group:C.group})};ie=v}(ie.label&&typeof ie.label=="string"||typeof ie.label=="number")&&(ie.label=new e.Label({text:ie.label,size:D.size!=null?D.size:t*5/6,color:D.color!=null?D.color:o,valign:"center",style:L})),C.labels.push(ie.label),ie.index=he,r[he]=ie,$=z(ie.selected,ie.label),$.type="RadioButton",$.obj=ie,ie.selected&&(X=$.obj),O.addChild($),i?($.y=G,G+=$.getBounds().height+p):($.x=G,G+=$.getBounds().width+p)}}function z(ie,ae){var he=new e.Container({style:!1});C.buttons.push(he),he.mouseChildren=!1,he.setBounds(-_,-_,t+_*2,t+_*2);var $=new e.Shape({style:!1}),G=$.graphics;G.f(l).dc(t/2,t/2,t/1.85),G.s(f).ss(d).dc(t/2,t/2,t/2-t/2/5),he.addChild($);var v=he.check=new e.Circle(t/5.2,T,null,null,null,null,null,null,!1);C.indicators.push(v),v.mouseEnabled=!1,v.alpha=.95,v.regX=v.regY=-t/2;var w=t;ae&&(E==0&&(E=ae.width),he.addChild(ae),ae.y=t/2,he.text=ae.text,b?(ae.x=-ae.width-_,he.setBounds(-ae.width-_,-_,t+_*2+ae.getBounds().width,Math.max(t+_*2,ae.getBounds().height)),w=ae.width+_+t):(ae.x=he.getBounds().width,he.setBounds(-_,-_,t+_*2+ae.getBounds().width,Math.max(t+_*2,ae.getBounds().height)),w=ae.x+ae.width)),ie&&(he.addChild(v),C.label=ae,C.label&&(C.text=ae.text));var h=new e.Shape({style:!1});return G=h.graphics,G.f("rgba(0,0,0,.01)").r(he.getBounds().x,he.getBounds().y,w+_*2,he.getBounds().height),he.hitArea=h,he}this.getBounds()||this.setBounds(0,0,t,t),b?(this.setBounds(-_*2-E,-_,this.getBounds().width+_*2,this.getBounds().height),this.regX=i?t+_:this.getBounds().width-E-_*3):this.setBounds(-_,-_,this.getBounds().width+_*2,this.getBounds().height),this.setSelected=function(ie){if(n(ie)&&(ie=-1),!(ie!=-1&&!O.getChildAt(ie))){for(var ae,he=0;he<O.numChildren;he++)ae=O.getChildAt(he),ae.removeChild(ae.check);if(ie>=0){ae=O.getChildAt(ie);var $=-2;X&&($=X.index),X=ae.obj}return ie==-1||$==X.index?(X=null,C.id=null,C.label=null,C.text=""):(ae.addChild(ae.check),C.id=X.id,C.label=X.label,C.label&&(C.text=C.label.text)),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&C.stage&&C.stage.update(),C}},Object.defineProperty(C,"selected",{get:function(){return X},set:function(){ht("ZIM RadioButton - selected is read only")}}),Object.defineProperty(C,"selectedIndex",{get:function(){return X?X.index:-1},set:function(ie){var ae=ie;C.selectedIndex!=ie&&C.setSelected(ae)}}),this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function(ie){c(C,ie)}}),n(R)&&(R=D.selectedIndex!=null?D.selectedIndex:0),C.selectedIndex=R,L!==!1&&e.styleTransforms(this,D),this.clone=function(){for(var ie=e.copy(r),ae=0;ae<ie.length;ae++)ie[ae].label=ie[ae].label.clone();return C.cloneProps(new e.RadioButtons(t,ie,i,o,l,f,d,p,_,P,T,R,b,L,this.group,k))}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Toggle=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X){var Z="width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",V;if(V=mt(e.Toggle,arguments,Z,this))return V;qe("57.5"),this.group=E;var O=C===!1?{}:e.getStyle("Toggle",this.group,X);n(t)&&(t=O.width!=null?O.width:80),n(r)&&(r=O.height!=null?O.height:50),this.zimContainer_constructor(t,r,null,null,!1),this.type="Toggle",n(l)&&(l=O.backgroundColor!=null?O.backgroundColor:e.purple),n(f)&&(f=O.margin!=null?O.margin:10),n(d)&&(d=O.indicatorType!=null?O.indicatorType:"circle"),n(p)&&(p=O.indicatorColor!=null?O.indicatorColor:e.white),n(P)&&(P=O.toggleBackgroundColor!=null?O.toggleBackgroundColor:l.lighten(.3)),n(T)&&(T=O.color!=null?O.color:e.darker),n(R)&&(R=O.borderColor!=null?O.borderColor:null),n(b)&&(b=O.borderWidth!=null?O.borderWidth:null),R<0||b<0?R=b=null:R!=null&&b==null&&(b=1),n(L)&&(L=O.corner!=null?O.corner:d!="circle"?0:25),n(S)&&(S=O.indicatorCorner!=null?O.indicatorCorner:0),n(k)&&(k=O.shadowColor!=null?O.shadowColor:"rgba(0,0,0,.3)"),n(m)&&(m=O.shadowBlur!=null?O.shadowBlur:14),n(o)&&(o=O.startToggled!=null?O.startToggled:!1);var ne=g(A);n(A)&&(A=O.time!=null?O.time:ne=="s"?.1:100),n(i)&&(i=O.label!=null?O.label:null),n(D)&&(D=O.labelLeft!=null?O.labelLeft:null);var N=this;N.cur("pointer"),(typeof i=="string"||typeof i=="number")&&(i=this.label=new e.Label({text:i,size:O.size||r*5/6,color:T,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),(typeof D=="string"||typeof D=="number")&&(D=this.labelLeft=new e.Label({text:D,size:O.size||r*5/6,color:T,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new e.Rectangle(t,r,l,R,b,L).addTo(this),d=="rectangle"||d=="square"?this.indicator=new e.Rectangle(r*.65,r*.65,p,null,null,S).center(this.background).pos(r*.2,null,o):this.indicator=new e.Circle(r*.35,p).center(this.background).pos(r*.175,null,o);var q=o;N.background.color=q?P:l,k!=-1&&m>0&&(this.background.shadow=new je.Shadow(k,3,3,m)),i&&(this.addChild(i),i.x=t+2+f+b,i.y=r/2,this.label=i,this.setBounds(-f,-f,t+f*3+b+i.getBounds().width,Math.max(r+f*2,i.getBounds().height))),D&&(this.addChild(D),D.x=0,N.background.x+=D.width+3+f+b,N.label.x+=D.width+3+f+b,D.y=r/2,this.labelLeft=D,this.setBounds(-f,-f,N.getBounds().width+D.width+3+f+b,N.getBounds().height)),this.expand(e.mobile()?20:10),this.tap(function(ie){if(D){var ae=N.localToGlobal(D.width+3+f+b+t/2,0);if(ie.stageX/e.scaX<ae.x-t/2&&!q||ie.stageX/e.scaX>=ae.x+t/2&&q)return}q=!q,z(),N.dispatchEvent("change")},e.mobile()?20:10);var U=new e.Swipe(this,20,ne=="s"?.2:200);U.on("swipe",function(ie){if(ie.swipeX!=0){{if(ie.swipeX==1&&q)return;if(ie.swipeX==-1&&!q)return}q=!q,z(),N.dispatchEvent("change")}});function z(ie){var ae=N.indicator.x,he=A;if(ie===!0&&(he=0),d=="rectangle"||d=="square"?(N.indicator.pos(r*.2,null,q),A>0&&N.indicator.animate({props:{x:ae},from:!0,time:he})):(N.indicator.pos(r*.175,null,q),A>0&&N.indicator.animate({props:{x:ae},from:!0,time:he})),N.background.color=q?P:l,N.text=q?N.label?N.label.text:"on":N.labelLeft?N.labelLeft.text:"off",N.zimAccessibility){var $="Toggle set to "+(q?N.label?N.label.text+".":"on.":N.labelLeft?N.labelLeft.text+".":"off.");setTimeout(function(){N.zimAccessibility.talk($)},50)}}Object.defineProperty(N,"textLeft",{get:function(){return D?D.text:null},set:function(ie){D&&(D.text=ie,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&N.stage&&N.stage.update())}}),N.toggle=function(ie,ae){var he=q;return n(ie)&&(ie=!0),q=ie,he!=q&&z(ae),N},N.text=q?N.label?N.label.text:"on":N.labelLeft?N.labelLeft.text:"off",Object.defineProperty(N,"toggled",{get:function(){return q},set:function(ie){N.toggle(ie)}}),this._enabled=!0,Object.defineProperty(N,"enabled",{get:function(){return N._enabled},set:function(ie){c(N,ie)}}),C!==!1&&e.styleTransforms(this,O),this.clone=function(){return N.cloneProps(new e.Toggle(t,r,i?i.clone():"",o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D?D.clone():"",C,this.group,X))}},e.extend(e.Toggle,e.Container,"clone","zimContainer",!1),e.Tip=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K){var ge="text, tipAlign, tipValign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",ye;if(ye=mt(e.Tip,arguments,ge,this))return ye;qe("57.6"),this.group=Y;var ee=Ae===!1?{}:e.getStyle("Tip",this.group,K);n(t)&&(t=ee.text!=null?ee.text:"Here's a tip!"),n(o)&&(o=ee.margin!=null?ee.margin:40),n(l)&&(l=ee.marginH!=null?ee.marginH:o),n(f)&&(f=ee.marginV!=null?ee.marginV:o),n(r)&&(r=ee.tipAlign!=null?ee.tipAlign:"right"),n(i)&&(i=ee.tipValign!=null?ee.tipValign:"bottom"),n(d)&&(d=ee.outside!=null?ee.outside:!1),n(O)&&(O=ee.backgroundColor!=null?ee.backgroundColor:e.blue),n(L)&&(L=ee.color!=null?ee.color:e.white),n(q)&&(q=ee.corner!=null?ee.corner:25),n(U)&&(U=ee.backgroundDashed!=null?ee.backgroundDashed:null),n(z)&&(z=ee.padding!=null?ee.padding:10),n(ie)&&(ie=ee.paddingH!=null?ee.paddingH:z),n(ae)&&(ae=ee.paddingV!=null?ee.paddingV:z),(n(k)||k=="ignore")&&(k=ee.shadowColor!=null&&k!="ignore"?ee.shadowColor:"rgba(0,0,0,.3)"),(n(m)||m=="ignore")&&(m=ee.shadowBlur!=null&&m!="ignore"?ee.shadowBlur:1),n(_)&&(_=ee.delay!=null?ee.delay:0);var ce=g(P);n(P)&&(P=ee.time!=null?ee.time:ce=="s"?2:2e3),n(T)&&(T=ee.mouseClose!=null?ee.mouseClose:!0),this.zimLabel_constructor(t,R,b,L,S,null,null,A,D,I,Q,x,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,F,Ae,Y,e.copy(ee)),this.type="Tip",d&&(l=-l,f=-f);var ve=this;ve.tipAlign=r,ve.tipValign=i,this.background.sha(k,3,5,m),this.show=function(Re,se){var Oe=g(se);if(n(Re)&&(Re=_),n(se)&&(se=P),n(p))if(fe.zdf)p=fe.zdf.stage;else return ve;else if(p.getBounds){if(n(p.stage))return ht("zim display - Waiter(): The container must have a stage property"),ve}else return ht("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),ve;Re>0?ve.showID=e.timeout(Re,J):J();function J(){var xe;p.boundsToGlobal?xe=p.boundsToGlobal():xe=p.getBounds();var te=new e.Container(xe.x,xe.y,xe.width,xe.height);te.zimTemp=!0,te.loc(0,0,p.stage),ve.pos(l,f,ve.tipAlign,ve.tipValign,te),d&&(ve.tipAlign=="right"?ve.x+=ve.width:ve.tipAlign=="left"&&(ve.x-=ve.width),ve.tipValign=="bottom"?ve.y+=ve.height:ve.tipValign=="top"&&(ve.y-=ve.height)),ve.addTo(te.stage),te.zimTemp&&te.removeFrom&&(te.removeFrom(),te=null),te=ve.stage,ve.timeoutID&&ve.timeoutID.clear(),ve.timeoutID=e.timeout(se,function(){ve.hide(),te.stage.update()}),T&&(ve.upID&&te.stage.off("stagemouseup",ve.upID),ve.upID=te.stage.on("stagemouseup",function(){ve.hide(),te.stage&&te.stage.update()})),te.stage&&te.stage.update()}return ve},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&p.stage&&p.stage.off("stagemouseup",this.upID),ve},this.clear=function(){ve.showID&&ve.showID.clear(),ve.hide()},this.dispose=function(Re,se,Oe){ve.upID&&ve.stage&&ve.stage.off("stagemouseup",ve.upID),Oe||this.zimLabel_dispose(!0)},Ae!==!1&&e.styleTransforms(this,ee),this.clone=function(){return ve.cloneProps(new e.Tip(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,F,Ae,this.group,K))}},e.extend(e.Tip,e.Label,["dispose","clone"],"zimLabel",!1),e.Pane=function(Q,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z){var ie="content, backgroundColor, color, width, height, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, autoPadding, autoPaddingH, autoPaddingV, style, group, inherit";if(Q&&!Q.header&&!Q.message&&!Q.display&&!Q.buttons){var ae;if(ae=mt(e.Pane,arguments,ie,this))return ae}qe("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var he="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(n(A))if(fe.zdf)A=fe.zdf.stage;else{ht(he);return}else if(A.getBounds){if(n(A.getStage)){ht("zim display - Pane(): The container must have a stage property");return}}else{ht(he);return}this.group=U;var $=q===!1?{}:e.getStyle(this.type,this.group,z);n(o)&&(o=$.width!=null?$.width:"auto"),n(l)&&(l=$.height!=null?$.height:"auto"),n(Q)&&(Q=$.content!=null?$.content:" "),(typeof Q=="string"||typeof Q=="number")&&(Q=new e.Label({text:Q,size:$.size!=null?$.size:40,align:$.align!=null?$.align:"center",valign:$.valign!=null?$.valign:"center",color:$.color!=null?$.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse());var G=this.content=Q;n(r)&&(r=$.backgroundColor!=null?$.backgroundColor:e.white),n(f)&&(f=$.draggable!=null?$.draggable:!1),n(d)&&(d=$.resets!=null?$.resets:!0),n(p)&&(p=$.modal!=null?$.modal:!0),n(_)&&(_=$.corner!=null?$.corner:20),n(D)&&(D=$.titleBar!=null?$.titleBar:null),n(C)&&(C=$.titleBarColor!=null?$.titleBarColor:null),n(E)&&(E=$.titleBarBackgroundColor!=null?$.titleBarBackgroundColor:null),n(X)&&(X=$.titleBarHeight!=null?$.titleBarHeight:null),n(P)&&(P=$.backdropColor!=null?$.backdropColor:"rgba(0,0,0,.2)"),n(T)&&(T=$.shadowColor!=null?$.shadowColor:"rgba(0,0,0,.3)"),n(R)&&(R=$.shadowBlur!=null?$.shadowBlur:20),n(b)&&(b=$.center!=null?$.center:!0),n(L)&&(L=$.displayClose!=null?$.displayClose:!0),f&&(L=!1),n(S)&&(S=$.backdropClose!=null?$.backdropClose:!0),n(m)&&(m=$.fadeTime!=null?$.fadeTime:0),n(Z)&&(Z=$.close!=null?$.close:!1),n(V)&&(V=$.closeColor!=null?$.closeColor:e.grey),n(O)&&(O=$.autoPadding!=null?$.autoPadding:70),n(ne)&&(ne=$.autoPaddingH!=null?$.autoPaddingH:O),n(N)&&(N=$.autoPaddingV!=null?$.autoPaddingV:O);var v=this.backdrop=new e.Shape({style:!1}),w=v.graphics;w.f(P),w.drawRect(-5e3,-5e3,1e4,1e4);var h=this;if(this.add=function(J,xe,te,we){var ke="obj, index, center, replace",pe;return(pe=mt(h.add,arguments,ke,h))?pe:(n(te)&&(te=!0),n(we)&&(we=!0),typeof J=="string"&&(J=new oi(J,null,null,i).noMouse()),we&&h.contentContainer.removeAllChildren(),te?J.center(h.contentContainer,xe):J.addTo(h.contentContainer,xe),h)},G){var I=e.makeContent(G,o,e.dark),x=["header","message","text","display","buttons","config"];x.forEach(function(xe){I[xe]&&(h[xe]=I[xe])}),h.label=h.message,o=="auto"&&(o=I.width+ne*2),l=="auto"&&(l=I.height+N*2)}var Q=h.contentContainer=new e.Container(o,l);I&&h.add(I,null,!0),this.setBounds(-o/2,-l/2,o,l);var x=["header","message","text","display","buttons","config"];Q&&x.forEach(function(J){Q[J]&&(h[J]=Q[J])}),h.label=h.message,h.container=A,v.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",S?Ae:function(J){J.stopImmediatePropagation()});var F=new e.Dictionary(!0);function Ae(J){h.dispatchEvent("closing"),setTimeout(function(){ve(),h.dispatchEvent("close")},10),J.stopImmediatePropagation()}v.on("mousedown",function(J){J.stopImmediatePropagation()}),this.addChild(v),p||v.noMouse();var Y;if(n(k))Y=this.backing=new e.Rectangle({width:o,height:l,color:r,corner:_,style:!1});else{if(k.type=="Pattern"){var K=k;Y=new e.Rectangle(o,l,r,null,null,_,null,null,null,!1),K.centerReg(Y),K.setMask(Y.shape)}else Y=k;h.display=h.backing=Y}if(L&&(Y.cur("pointer"),Y.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",Ae)),T!=-1&&R>0&&(Y.shadow=new je.Shadow(T,8,8,R)),Y.on("click",function(J){J.stopImmediatePropagation()}),this.resetX,this.resetY,f){Y.cur("pointer");var ge,ye;Y.on("mousedown",function(J){isNaN(h.resetX)&&(h.resetX=h.x),isNaN(h.resetY)&&(h.resetY=h.y),ge=J.stageX/e.scaX-h.x,ye=J.stageY/e.scaY-h.y,Y.cur("pointer")}),Y.on("pressmove",function(J){var xe=Oe(J.stageX/e.scaX-ge,J.stageY/e.scaY-ye);h.x=xe.x,h.y=xe.y;for(var te,we=0;we<h.numChildren;we++)te=h.getChildAt(we),(te.type=="TextArea"||te.type=="Loader"||te.type=="Tag")&&te.resize();h.stage.update()}),this.on("pressup",function(){Y.cur("pointer"),h.stage&&h.stage.update()})}if(Y.centerReg(this),Q&&Q.center(this),!n(D)){typeof D=="string"&&(D=new e.Label(D,null,null,C));var ee=h.titleBarLabel=D;n(X)&&(X=ee.height*1.5),n(C)&&(C=e.black),n(E)&&(E="rgba(0,0,0,.2)"),h.titleBar=D=new e.Container(o,X,null,null,!1).centerReg(h).mov(0,-l/2+X/2),D.mouseEnabled=!1,D.mouseChildren=!1,h.titleBar.backing=new e.Rectangle(o,X,E,null,null,[_*.95,_*.95,0,0],null,null,null,!1).addTo(D),ee.center(D).pos({x:Math.max(_/2,10),reg:!0})}Z&&(Z=h.close=new e.Shape(-40,-40,80,80,null,!1),Z.graphics.f(V).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),D?Z.addTo(h).scaleTo(D,null,50).mov(o/2-Math.max(_/2,10)-Z.width/2,-l/2+X/2).expand(40):Z.addTo(h).sca(.3).mov(o/2-Z.width-3,-l/2+Z.height).expand(40),Z.cur("pointer"),Z.expand(),Z.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",Ae)),Object.defineProperty(h,"text",{get:function(){if(h.message){var J=h.message.text==" "?"":h.message.text;return J}else if(h.content.text){var J=h.content.text==" "?"":h.content.text;return J}},set:function(J){h.message?h.message.text=J:h.content.text&&(h.content.text=J)}}),this._enabled=!0,Object.defineProperty(h,"enabled",{get:function(){return h._enabled},set:function(J){c(h,J)}}),this.hide=function(J,xe){return n(J)||(h.closeParams=J),ve(),xe&&(h.dispatchEvent("close"),h.dispatchEvent("change")),h},this.on("removed",ce);function ce(){h.toggled=!1;var J,xe;for(xe=0;xe<h.numChildren;xe++)if(J=h.getChildAt(xe),J.type=="TextArea"||J.type=="Loader"||J.type=="Tag"){var te={obj:J,depth:h.getChildIndex(J)};F.add(J,te)}for(xe=h.numChildren-1;xe>=0;xe--)J=h.getChildAt(xe),(J.type=="TextArea"||J.type=="Loader"||J.type=="Tag")&&h.removeChild(J);if(!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&h.container.stage.update(),d&&(isNaN(h.resetX)||(h.x=h.resetX),isNaN(h.resetY)||(h.y=h.resetY)),h.zimAccessibility){var we=h.zimAccessibility;we.resize(h),Re?Re.focus():h.zimTabTag.nextSibling.focus(),setTimeout(function(){we.talk("Pane has been closed.")},50)}}function ve(){m>0?h.animate({obj:{alpha:0},time:m,call:function(){J(),h.dispatchEvent("fadedout")}}):J();function J(){h.container.removeChild(h),h.closeCall&&h.closeCall(h.closeParams),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&h.container.stage.update(),d&&(isNaN(h.resetX)||(h.x=h.resetX),isNaN(h.resetY)||(h.y=h.resetY))}}var Re;this.show=function(J,xe){return n(J)||(h.closeCall=J),n(xe)||(h.closeParams=xe),b&&isNaN(h.resetX)&&(h.x=h.container.getBounds().width/2,h.y=h.container.getBounds().height/2),h.container.addChild(h),m>0?(h.alpha=0,h.animate({props:{alpha:1},time:m,call:function(){h.dispatchEvent("fadedin")}})):setTimeout(function(){h.container.stage&&h.container.stage.update()},10),h},this.on("added",se);function se(){for(var J=0;J<F.length;J++)h.addChildAt(F.values[J].obj,F.values[J].depth);if(h.zimAccessibility){var xe=h.zimAccessibility;setTimeout(function(){xe.activatedObject&&(Re=xe.activatedObject.zimTabTag)},50),xe.resize(h),xe.tabIndex=h.zimTabIndex}h.toggled=!0}function Oe(J,xe){return J=Math.max(o/2,Math.min(h.container.getBounds().width-o/2,J)),xe=Math.max(l/2,Math.min(h.container.getBounds().height-l/2,xe)),{x:J,y:xe}}this.toggle=function(J){return J===!0?h.show():J===!1||h.container.contains(h)?h.hide():h.show(),h},q!==!1&&e.styleTransforms(this,$),this.clone=function(){var J=h.contentContainer.x,xe=h.contentContainer.y,te=h.cloneProps(new e.Pane(e.copy(Q),r,i,o,l,f,d,p,_,P,T,R,b,L,S,n(k)?null:k.clone(),m,h.container,D,C,E,X,Z,V,O,ne,N,q,this.group,z));return te.contentContainer.x=J,te.contentContainer.y=xe,te}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Panel=function(t,r,h,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N){var q="width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",U;if(U=mt(e.Panel,arguments,q,this))return U;qe("57.7"),this.group=ne;var z=O===!1?{}:e.getStyle("Panel",this.group,N);n(t)&&(t=z.width!=null?z.width:250),n(r)&&(r=z.height!=null?z.height:300),this.zimContainer_constructor(t,r,null,null,!1),this.type="Panel",n(h)&&(h=z.content!=null?z.content:null);var ie=this.content=h;n(o)&&(o=z.titleBar!=null?z.titleBar:"PANEL"),n(l)&&(l=z.titleBarColor!=null?z.titleBarColor:e.white),n(f)&&(f=z.titleBarBackgroundColor!=null?z.titleBarBackgroundColor:e.grey),n(d)&&(d=z.titleBarHeight!=null?z.titleBarHeight:30),n(p)&&(p=z.backgroundColor!=null?z.backgroundColor:e.lighter),n(_)&&(_=z.borderColor!=null?z.borderColor:e.pewter),n(P)&&(P=z.borderWidth!=null?z.borderWidth:null),_<0||P<0?_=P=null:_!=null&&P==null&&(P=1),n(T)&&(T=z.corner!=null?z.corner:5),n(C)&&(C=z.align!=null?z.align:"left"),n(E)&&(E=z.shadowColor!=null?z.shadowColor:"rgba(0,0,0,.3)"),n(X)&&(X=z.shadowBlur!=null?z.shadowBlur:14),n(Z)&&(Z=z.draggable!=null?z.draggable:!1),n(V)&&(V=z.boundary!=null?z.boundary:null),n(R)&&(R=z.close!=null?z.close:!1),n(b)&&(b=z.closeColor!=null?z.closeColor:n(l)?e.grey:l),n(L)&&(L=z.next!=null?z.next:e.vee(o)),n(S)&&(S=z.nextColor!=null?z.nextColor:n(l)?e.grey:l),Array.isArray(T)||(T=[T,T,T,T]),n(m)&&(m=z.collapse!=null?z.collapse:!1),n(A)&&(A=z.collapseColor!=null?z.collapseColor:n(l)?e.grey:l),n(D)&&(D=z.collapsed!=null?z.collapsed:!1);var ae=this,he=this.background=new e.Rectangle(t,r,p,_,P,T).addTo(this);E!=-1&&X>0&&(this.background.shadow=new je.Shadow(E,3,3,X));var $=o,G=e.Pick.choose($),v=e.Pick.choose(l),w=e.Pick.choose(f),h=ae.contentContainer=new e.Container(t,r-d).addTo(ae).mov(0,d);typeof G=="string"&&(G=new e.Label({text:G,color:v,size:z.size!=null?z.size:20,bold:z.bold!=null?z.bold:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var I=ae.titleBarLabel=G;n(w)&&(w="rgba(0,0,0,.2)"),ae.titleBar=o=new e.Container(t,d,null,null,!1).loc(0,0,ae);var Q=ae.titleBar.backing=new e.Rectangle(t+P,d,w,null,null,[T[0]*.95,T[1]*.95,0,0],!0,null,null,!1).center(o);if(o&&Y(),ae.label=G,ae.text=G.text,R){var x=ae.closeIcon=new e.Shape(-40,-40,80,80,null,!1);x.graphics.f(b).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),o?(x.centerReg(o).scaleTo(o,null,50),x.pos(Math.max(T[1]/2,15),null,!0)):x.addTo(ae).sca(.3).mov(t/2-x.width-3,-r/2+R.height),x.expand(40),x.cur("pointer"),x.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var ee=ae.stage;ae.removeFrom(),ae.dispatchEvent("close"),ee.update()})}if(this.add=function(ee,ce,ve,Re){var se="obj, index, center, replace",Oe;return(Oe=mt(ae.add,arguments,se,ae))?Oe:(Re&&ae.contentContainer.removeAllChildren(),ve?ee.center(ae.contentContainer,ce):ee.addTo(ae.contentContainer,ce),ae)},ie){var F=e.makeContent(ie,t),Ae=["header","message","text","display","buttons","config"];Ae.forEach(function(ee){F[ee]&&(ae[ee]=F[ee])}),ae.label=ae.message,ae.add(F,null,!0)}this.nextPanel=function(ee,ce){var ve=n(ee)||n($.array)?e.Pick.choose($):$.array[ee],Re=n(ee)||n(l.array)?e.Pick.choose(l):l.array[ee],se=n(ee)||n(f.array)?e.Pick.choose(f):f.array[ee],Oe=n(ee)||n(p.array)?e.Pick.choose(p):p.array[ee],J=n(ee)||n(_.array)?e.Pick.choose(_):_.array[ee];typeof ve=="string"&&(ve=new e.Label({text:ve,color:Re,size:z.size!=null?z.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),ae.label=ve,ae.text=ve.text,I.removeFrom(),I=ae.titleBarLabel=ve,Y(),Q.color=se,ae.background.color=Oe,ae.background.borderColor=J,ce&&ae.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ae.stage&&ae.stage.update()};function Y(){C=="right"?I.center(o).pos(Math.max(T[0]/2,10),null,!0):C=="center"||C=="middle"?I.center(o):I.center(o).loc(Math.max(T[0]/2,10)),I.mov(0,2)}if(Z&&(o.cur("pointer"),o.on("mousedown",function(){ae.drag({rect:V,currentTarget:!0})}),o.on("pressup",function(){ae.noDrag(!1)})),L>0){var K=ae.nextIcon=new e.Shape(-20,-20,40,40,null,!1);K.graphics.f(l).p("AiJieIETCeIkTCfg"),K.centerReg(o).scaleTo(o,null,70).alp(.8).hov(1).expand(),K.pos(Math.max(T[1]/2,15),null,!0),x&&K.mov(-x.width-8),K.cur("pointer"),K.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ae.nextPanel(),ae.dispatchEvent("change")})}if(n(k)||(k=ae.extraButton=new e.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(o,null,70).centerReg(o).expand(),k.pos(Math.max(T[1]/2,15),null,!0),x&&k.mov(-x.width-8),K&&k.mov(-K.width-8)),m){ye=D,ae.collapse=function(ee){if(n(ee)&&(ee=!0),ee==ye)return ae;ee?(ge.rot(180),he.visible=!1,h.visible=!1,ye=!0,ae.dispatchEvent("collapse")):(ge.rot(0),he.visible=!0,h.visible=!0,ye=!1,ae.dispatchEvent("expand")),ae.stage&&ae.stage.update()},ae.collapseEvent=ae.titleBar.on("dblclick",function(){ae.collapsed=!ae.collapsed}),n(A)&&(A=e.grey);var ge=ae.collapseIcon=new e.Triangle(90,90,90,e.faint,A,16);ge.centerReg(ae).scaleTo(o,null,41).pos({x:t-Math.max(T[1]/2,15)-ge.width/2-4,y:d/2,reg:!0}).expand(40),k&&ge.mov(-k.width-8),x&&ge.mov(-x.width-8),K&&ge.mov(-K.width-8),ge.cur("pointer"),ge.expand();var ye=!1;ge.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ye?ae.collapse(!1):ae.collapse(!0)})}ae.overlay=new e.Rectangle(t,r,null,null,null,T).alp(.3),Object.defineProperty(ae,"panelHeight",{get:function(){return ae.background.height},set:function(ee){he.removeFrom(),he=this.background=new e.Rectangle(t,ee,p,_,P,T).addTo(this).bot(),E!=-1&&X>0&&(this.background.shadow=new je.Shadow(E,3,3,X)),ae.setBounds(t,ee),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),Object.defineProperty(ae,"collapsed",{get:function(){return ye},set:function(ee){ae.collapse&&ae.collapse(ee)}}),this._enabled=!0,Object.defineProperty(ae,"enabled",{get:function(){return ae._enabled},set:function(ee){c(ae,ee),ee?ae.overlay.removeFrom():ae.overlay.addTo(ae),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),D&&(D=!1,ae.collapsed=!0),O!==!1&&e.styleTransforms(this,z),this.clone=function(){return ae.cloneProps(new e.Toggle(t,r,o?o.clone():"",l,f,d,p,_,P,T,R,b,L,S,k,m,A,ae.collapsed,C,E,X,Z,V,O,this.group,N))},this.doDispose=function(ee,ce,ve){return m&&this.titleBar.off("dblclick",this.collapseEvent),ve||this.zimContainer_dispose(!0),!0}},e.extend(e.Panel,e.Container,["clone","dispose"],"zimContainer",!1),e.Panel.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Window=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve){var Re="width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideFactor, slideSnap, slideSnapDamp, interactive, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, resizeBoundary, resizeVisible, continuous, style, group, inherit",se;if(se=mt(e.Window,arguments,Re,this))return se;qe("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=ce;var Oe=ee===!1?{}:e.getStyle(this.type,this.group,ve);n(t)&&(t=Oe.width!=null?Oe.width:300),n(r)&&(r=Oe.height!=null?Oe.height:200),n(o)&&(o=Oe.backgroundColor!=null?Oe.backgroundColor:e.dark);var J=l,xe=f;n(l)&&(l=Oe.borderColor!=null?Oe.borderColor:e.silver),n(f)&&(f=Oe.borderWidth!=null?Oe.borderWidth:1),n(d)&&(d=Oe.padding!=null?Oe.padding:0),n(p)&&(p=Oe.corner!=null?Oe.corner:0),n(_)&&(_=Oe.swipe!=null?Oe.swipe:!0),n(P)&&(P=Oe.scrollBarActive!=null?Oe.scrollBarActive:!0),n(T)&&(T=Oe.scrollBarDrag!=null?Oe.scrollBarDrag:!1),n(R)&&(R=Oe.scrollBarColor!=null?Oe.scrollBarColor:l),n(b)&&(b=Oe.scrollBarAlpha!=null?Oe.scrollBarAlpha:.3),n(L)&&(L=Oe.scrollBarFade!=null?Oe.scrollBarFade:!0),n(S)&&(S=Oe.scrollBarH!=null?Oe.scrollBarH:!0),n(k)&&(k=Oe.scrollBarV!=null?Oe.scrollBarV:!0),T&&(L=Oe.scrollBarFade!=null?Oe.scrollBarFade:!1),n(m)&&(m=Oe.slide!=null?Oe.slide:!0),n(A)&&(A=Oe.slideFactor!=null?Oe.slideFactor:.9),n(D)&&(D=Oe.slideSnap!=null?Oe.slideSnap:"vertical"),n(E)&&(E=Oe.interactive!=null?Oe.interactive:!0),n(X)&&(X=Oe.shadowColor!=null?Oe.shadowColor:"rgba(0,0,0,.3)"),n(Z)&&(Z=Oe.shadowBlur!=null?Oe.shadowBlur:20),n(O)&&(O=Oe.paddingV!=null?Oe.paddingV:d),n(V)&&(V=Oe.paddingH!=null?Oe.paddingH:d),n(ne)&&(ne=Oe.scrollWheel!=null?Oe.scrollWheel:!0),n(N)&&(N=Oe.damp!=null?Oe.damp:null),n(q)&&(q=Oe.titleBar!=null?Oe.titleBar:null),n(U)&&(U=Oe.titleBarColor!=null?Oe.titleBarColor:null),n(z)&&(z=Oe.titleBarBackgroundColor!=null?Oe.titleBarBackgroundColor:null),n(ie)&&(ie=Oe.titleBarHeight!=null?Oe.titleBarHeight:null),n(ae)&&(ae=Oe.draggable!=null?Oe.draggable:null),n(he)&&(he=Oe.boundary!=null?Oe.boundary:null),n($)&&($=Oe.onTop!=null?Oe.onTop:null),n(G)&&(G=Oe.close!=null?Oe.close:null),n(v)&&(v=Oe.closeColor!=null?Oe.closeColor:null),n(w)&&(w=Oe.cancelCurrentDrag!=null?Oe.cancelCurrentDrag:!1),n(h)&&(h=Oe.fullSize!=null?Oe.fullSize:null),n(I)&&(I=Oe.fullSizeColor!=null?Oe.fullSizeColor:null),n(Q)&&(Q=Oe.resizeHandle!=null?Oe.resizeHandle:null),n(x)&&(x=Oe.collapse!=null?Oe.collapse:!1),n(F)&&(F=Oe.collapseColor!=null?Oe.collapseColor:null),n(Ae)&&(Ae=Oe.collapsed!=null?Oe.collapsed:!1),n(Y)&&(Y=Oe.optimize!=null?Oe.optimize:!0),n(K)&&(K=Oe.resizeBoundary!=null?Oe.resizeBoundary:null),n(ge)&&(ge=Oe.resizeVisible!=null?Oe.resizeVisible:!1),n(ye)&&(ye=Oe.continuous!=null?Oe.continuous:!1),ye!="horizontal"&&ye!="vertical"&&(ye=!1),this.continuous=ye,q===!1&&(q=null),n(q)||(n(ie)&&(ie=30),r=r-ie);var te=this;te.optimize=Y,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var we=this.backing=new e.Shape({style:!1});this.addChild(we);var ke=new je.Shape;ke.type="WindowBacking";var pe=ke.graphics;if(this.addChild(ke),i)var Me=te.content=i;i=this.contentContainer=new e.Container({style:!1}),this.addChild(i),i.mask=ke;var Ue;if(!E)var ue=new je.Shape;if(f>0){var Ee=new je.Shape;this.addChild(Ee)}var Te=q?0:p,_e=0;function We(){te.setBounds(0,0,t,r),we.graphics.c().f(o).rc(0,0,t,r,Te,Te,p,p),X!=-1&&Z>0&&(we.shadow=new je.Shadow(X,4,4,Z)),f>0&&(p?Ee.graphics.c().s(l).ss(f,"square","miter").rc(0,0,t,r,Te,Te,p,p):Ee.graphics.c().s(l).ss(f,"square","miter").dr(0,0,t,r)),n(st)||(st.widthOnly=te.width+f,$e.widthOnly=te.width+f-1,te.setBounds(0,-ie,te.width,r+ie)),Je&&(q?(Je.pos({x:t-Math.max(p/2,10)-Je.width/2,y:ie/2,reg:!0}),$e.widthOnly=Je.x-15,_e=te.width-$e.width):Je.pos(Math.max(p/2,10)/2,Je.height/2,!0,!1,te)),Ge&&(Ge.pos({x:t-Math.max(p/2,10)-Ge.width/2,y:ie/2,reg:!0}),Je&&Ge.mov(-Je.width-10),q&&($e.widthOnly=Ge.x-15),_e=te.width-$e.width),Le&&(Le.pos({x:t-Math.max(p/2,10)-Le.width/2,y:ie/2,reg:!0}),Je&&Le.mov(-Je.width-10),Ge&&Le.mov(-Ge.width-10),q&&($e.widthOnly=Le.x-15),_e=te.width-$e.width)}We();var oe=this.scrollBar={};if(oe.color=R,oe.size=6,oe.minSize=oe.size*2,oe.spacing=3.5+f/2,oe.margin=0,oe.corner=oe.size/2,oe.showTime=.5,oe.fadeTime=3,P){var Ye=oe.horizontal=new e.Shape({style:!1}),Ve=Ye.graphics;Ye.alpha=b,this.addChild(Ye),T&&Ye.drag({localBoundary:!0});var De=oe.vertical=new e.Shape({style:!1}),de=De.graphics;De.alpha=b,this.addChild(De),T&&De.drag({localBoundary:!0})}var Be,Qe,Ke,lt,gt,He,it,ft,Se,Fe=!1;if(this.update=function(){P&&(Ve.clear(),de.clear()),gt=P?oe.size+oe.spacing*2:0,He=i.getBounds()?i.getBounds().width:0,it=i.getBounds()?i.getBounds().height:0,Ke=S&&He>t-V&&(P||_===!0||_=="auto"||_=="horizontal"),lt=k&&it>r-O&&(P||_===!0||_=="auto"||_=="vertical"),te.scrollXMax=He+V*2-t+(lt?gt+oe.margin:0),te.scrollYMax=it+O*2-r+(Ke?gt+oe.margin:0),pe.clear();var St=f/2,ut=f/2,Mt=t-(lt&&P?oe.size+oe.spacing*2:0)-(lt?0:f),qt=r-(Ke&&P?oe.size+oe.spacing*2:0)-(Ke?0:f),Xt=p*(.1+p/100);pe.f("rgba(0,0,0,0)").rc(St,ut,Mt,qt,Ke&&P&&!q?Xt:Te,lt&&P&&!q?Xt:Te,lt&&P?Xt:Math.max(Xt,p-f/2),Ke&&P?Xt:Math.max(Xt,p-f/2)),ke.setBounds(te.getBounds().x,te.getBounds().y,te.getBounds().width,te.getBounds().height),e.expand(ke,0),E||(ue.graphics.c().f("red").dr(St,ut,Mt,qt),i.hitArea=ue);var rn=Math.max(p,Math.min(oe.corner,oe.spacing)),Qt=rn+f/2,It=rn+(lt?gt:0)+f/2,Wt=rn+f/2,xn=rn+(Ke?gt:0)+f/2,zt,ln;Ke&&P&&(zt=Math.max(oe.minSize,(t-Qt-It)*(t-Qt-It)/(He+V+oe.margin)),Ve.f(oe.color).rr(0,0,zt,oe.size,oe.corner),Ye.x=Qt,Ye.y=r-oe.size-oe.spacing,Be=new e.Proportion(-te.scrollXMax,0,Qt,t-zt-It,-1),T&&(Ye.setBounds(0,0,zt,oe.size),ln=new je.Rectangle(Qt,Ye.y,t-zt-Qt-It,0),Ye.dragBoundary(ln),Ye.proportion=new e.Proportion(ln.x,ln.x+ln.width,0,-te.scrollXMax),Ye.off("pressmove",ft),ft=Ye.on("pressmove",function(){te.dispatchEvent("scrolling"),ue&&(ue.x=-i.x,ue.y=-i.y),i.x=Ye.proportion.convert(Ye.x),bt()}))),lt&&P&&(zt=Math.max(oe.minSize,(r-Wt-xn)*(r-Wt-xn)/(it+O+oe.margin)),de.f(oe.color).rr(0,0,oe.size,zt,oe.corner),De.x=t-oe.size-oe.spacing,De.y=Wt,Qe=new e.Proportion(-te.scrollYMax,0,Wt,r-zt-xn,-1),T&&(De.setBounds(0,0,oe.size,zt),ln=new je.Rectangle(De.x,Wt,0,r-zt-Wt-xn),De.dragBoundary(ln),De.proportion=new e.Proportion(ln.y,ln.y+ln.height,0,-te.scrollYMax),De.off("pressmove",Se),Se=De.on("pressmove",function(){N&&(Fe=!0),te.dispatchEvent("scrolling"),ue&&(ue.x=-i.x,ue.y=-i.y),N?jt=De.proportion.convert(De.y):i.y=De.proportion.convert(De.y),bt()}))),Ft(),clearTimeout(te.d2Timeout),te.d2Timeout=setTimeout(function(){Ye&&Ye.proportion&&(i.x=Ye.proportion.convert(Ye.x)),De&&De.proportion&&(i.y=De.proportion.convert(De.y))},50),clearTimeout(te.dTimeout),te.dTimeout=setTimeout(function(){ct()},300),ct(),bt()},this.resize=function(St,ut){n(St)&&(St=t),n(ut)&&(ut=r);var Mt=Math.max(20,p*2);q&&(Mt=Math.max(_e,Mt)),St<Mt&&(St=Mt),ut<20&&(ut=20),t=St,r=ut,We();for(var qt=0;qt<i.numChildren;qt++){var Xt=i.getChildAt(qt);Xt.type=="Wrapper"&&Tt(Xt)}return Q&&nt(),te.update(),jt=i.y,N&&en.immediate(jt),te.dispatchEvent("resize"),te},!n(q)){n(ae)&&(ae=!0),typeof q=="string"&&(q=new e.Label({text:q,color:U,size:Oe.size!=null?Oe.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var me=te.titleBarLabel=q;me.noMouse(),n(z)&&(z="rgba(0,0,0,.2)"),te.titleBar=q=new e.Container(t,ie,null,null,!1).centerReg(te).mov(0,-r/2-ie/2);var $e=new e.Rectangle(q.width-1,q.height,red).alp(0).addTo(q);me.setMask($e,!0);var st=te.titleBar.backing=new e.Rectangle(t+f,ie,z,null,null,[p*.95,p*.95,0,0],!0,null,!1,!1).center(q);me.center(q).pos({x:Math.max(p/2,Math.max(10,d)),reg:!0}),te.regX=0,te.regY=-ie,te.setBounds(0,-ie,t,r+ie),ae?(q.cur("pointer"),q.on("mousedown",function(){te.drag({rect:he,currentTarget:!0,onTop:$})}),q.on("pressup",function(){te.noDrag(!1)})):q.on("mousedown",function(){})}if(G){n(v)&&(v=e.grey);var Je=te.closeIcon=new e.Shape(-40,-40,80,80,null,!1);Je.graphics.f(v).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),q?Je.centerReg(te).scaleTo(q,null,50).pos({x:t-Math.max(p/2,10)-Je.width/2,y:ie/2,reg:!0}).expand(40):Je.sca(.3).pos(Math.max(p/2,10)/2,Je.height/2,!0,!1,te).expand(40),Je.cur("pointer"),Je.expand(),Je.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var St=te.stage;te.removeFrom(),te.dispatchEvent("close"),St&&St.update()})}var rt,Ce,ze,Xe,Ze,ot;if(!n(q)){if(h){te.fullSize=function(St){if(n(St)&&(St=!0),St==Ce||!te.parent)return te;St?(ze=te.width,Xe=te.height,Ze=te.x,ot=te.y,te.resize(te.parent.width,te.parent.height),te.x=0,te.y=0,Ce=!0,et.alpha=1,Ge.getChildAt(0).alpha=.01,te.dispatchEvent("fullsize")):(te.resize(ze,Xe-q.height),te.x=Ze,te.y=ot,Ce=!1,et.alpha=0,Ge.getChildAt(0).alpha=1,te.dispatchEvent("originalsize")),te.stage&&te.stage.update()},n(I)&&(I=e.grey);var Ge=te.fullSizeIcon=new e.Rectangle(80,80,e.faint,I,16),et=new e.Shape().s(I).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(Ge).mov(40,40).alp(0);Ge.centerReg(te).scaleTo(q,null,42).pos({x:t-Math.max(p/2,10)-Ge.width/2,y:ie/2,reg:!0}).expand(40),Je&&Ge.mov(-Je.width-10),Ge.cur("pointer"),Ge.expand(),Ce=!1,ze=t,Xe=r,Ze=te.x,ot=te.y,Ge.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Ce?te.fullSize(!1):te.fullSize(!0)})}var pt=e.copy(te.getBounds(),!0);if(x){rt=Ae,te.collapse=function(St){if(n(St)&&(St=!0),St==rt)return te;St?(Le.rot(180),te.backing.visible=!1,te.contentContainer.visible=!1,ke.visible=!1,Ye&&(Ye.visible=!1),Ye&&(De.visible=!1),Ee&&(Ee.visible=!1),rt=!0,st.sha(X,5,5,Z),Q&&(te.resizeHandle.visible=!1),te.setBounds(pt.x,pt.y,pt.width,q.height),te.dispatchEvent("collapse")):(Le.rot(0),te.backing.visible=!0,te.contentContainer.visible=!0,ke.visible=!0,Ye&&(Ye.visible=!0),Ye&&(De.visible=!0),Ee&&(Ee.visible=!0),rt=!1,st.sha(null),Q&&(te.resizeHandle.visible=!0),te.setBounds(pt.x,pt.y,pt.width,pt.height),te.dispatchEvent("expand")),te.stage&&te.stage.update()},n(F)&&(F=e.grey);var Le=te.collapseIcon=new e.Triangle(90,90,90,e.faint,F,16);Le.centerReg(te).scaleTo(q,null,42).pos({x:t-Math.max(p/2,10)-Le.width/2,y:ie/2,reg:!0}).expand(40),Je&&Le.mov(-Je.width-10),Ge&&Le.mov(-Ge.width-10),Le.cur("pointer"),Le.expand(),rt=!1,ze=t,Xe=r,Ze=te.x,ot=te.y,Le.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){rt?te.collapse(!1):te.collapse(!0)})}}if(Q){var tt=new ai().loc(0,0,te).mov(te.width,te.height-(te.titleBar?te.titleBar.height:0)),vt=te.resizeHandle=new e.Rectangle(25,25,e.grey,e.white).alp(ge?.5:.01).centerReg().rot(45).loc(0,0,tt).drag({boundary:K,localBoundary:!0});vt.on("mouseover",function(){vt.alp(.5),vt.stage&&vt.stage.update()}),vt.on("mousedown",function(){vt.pressing=!0}),vt.on("mouseout",function(){vt.pressing||(ge||vt.alp(.01),vt.stage&&vt.stage.update())}),vt.on("pressmove",function(){te.resize(Math.max(50,tt.x+vt.x),Math.max(50,tt.y+vt.y))}),vt.on("pressup",function(){vt.pressing=!1,ge||vt.alp(.01),nt(),vt.stage&&vt.stage.update()}),te.titleBar&&te.titleBar.on("pressup",nt)}function nt(St){te.resizeHandle.loc(0,0,tt).top().mov(-tt.x+te.width,-tt.y+te.height-(te.titleBar?te.titleBar.height:0))}function Tt(St){St.align=="right"?(St.x=V,St.resize(te.width-(lt?oe.size+oe.spacing*2:V)-V*2)):(St.align=="center"||St.align=="middle",St.resize(te.width-(lt?oe.size+oe.spacing*2:0)-V*2)),St.alpha=St.wrapperLastAlpha}if(We(),this.add=function(St,ut,Mt,qt){var Xt="obj, index, center, replace",rn;if(rn=mt(te.add,arguments,Xt,te))return rn;var Qt=St;if(!Qt.getBounds()){ht("Window.add() - please add content with bounds set");return}return yn(Qt),n(ut)&&(ut=i.numChildren),qt&&(ut=0,te.removeAll()),Mt?(Qt.center(te).addTo(i,ut).mov(0,ie?ie/2:0),i.height>te.height-(ie||0)&&Qt.loc(null,0),i.width>te.width&&Qt.loc(0)):Qt.addTo(i,ut),Qt.type=="Wrapper"&&(De.alpha=0,S=!1,Qt.wrapperLastAlpha=Qt.alpha,Qt.alpha=0,this.added(function(){Tt(Qt),te.resize(),Ye.alpha=1,De.alpha=1})),Qt.x==0&&(Qt.x=V),Qt.y==0&&(Qt.y=O),te.update(),te},Me){var xt=e.makeContent(Me,t),Ct=["header","message","text","display","buttons","config"];Ct.forEach(function(St){xt[St]&&(te[St]=xt[St])}),te.label=te.message,te.add(xt,0,!0)}this.remove=function(St){return i.removeChild(St),te.update(),te},this.removeAll=function(){return i.removeAllChildren(),te.update(),te};function ct(St){ye||(n(Ue)&&(Ue=te.stage||fe.zdf.stage),n(St)&&(St=!0),St?e.dragBoundary(i,new je.Rectangle(0,0,Ke?-te.scrollXMax:0,lt?-te.scrollYMax:0)):e.dragBoundary(i,new je.Rectangle(-1e3,-1e3,Ue.width+2e3,Ue.height+2e3)))}var Rt=!1;_&&i.on("mousedown",function(){Rt||e.Ticker.add(At,i.stage),Rt=!0,Ke&&P&&L&&e.animate(Ye,{alpha:b},oe.showTime),lt&&P&&L&&e.animate(De,{alpha:b},oe.showTime)});function At(){jt=i.y,N&&en.immediate(jt),P?Ft():te.dispatchEvent("scrolling")}function bt(){te.optimize&&(Ue=te.stage,i.loop(function(St){!St.hitTestBounds||!St.stage||(St.hitTestBounds(te,300)?(St.visible=!0,St.loop&&St.loop(function(ut){ut.hitTestBounds&&(ut.hitTestBounds(te,300)?ut.visible=!0:ut.visible=!1)})):St.visible=!1)}))}function Ft(){bt(),te.dispatchEvent("scrolling"),ue&&(ue.x=-i.x,ue.y=-i.y),Ke&&P&&(Ye.x=Be.convert(i.x)),lt&&P&&(De.y=Qe.convert(i.y))}this.on("added",function(){Yt(50)},null,!0);function Yt(St){n(St)&&(St=100),yn(te),_&&setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,axis:ye,localBoundary:!0,slide:m,slideFactor:A,slideSnap:S&&(_===!0||_=="auto"||_=="horizontal")||k&&(_===!0||_=="auto"||_=="vertical")?D:!1}),i.removeAllEventListeners("slidestart"),i.on("slidestart",function(){te.dispatchEvent("slidestart")}),i.removeAllEventListeners("slidestop"),!P&&Y&&(te.zDE&&i.off(te.zDE),te.zDE=i.on("mousedown",()=>{te.zTI&&e.Ticker.remove(bt)}),te.zME&&i.off(te.zME),te.zME=i.on("pressmove",bt),te.zSTA&&i.off(te.zSTA),te.zSTA=i.on("slidestart",function(){te.zTI=e.Ticker.add(bt)}),te.zSTO&&i.off(te.zSTO),te.zSTO=i.on("slidestop",function(ut){te.zTI&&e.Ticker.remove(te.zTI)})),i.on("slidestop",function(ut){m&&sn(ut),te.dispatchEvent("slidestop")}),i.getBounds()&&i.getBounds().width>0&&ct())},St)}this.cancelCurrentDrag=function(){te.contentContainer&&te.contentContainer.noDrag(!1),setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:m,slideFactor:A,slideSnap:S&&(_===!0||_=="auto"||_=="horizontal")||k&&(_===!0||_=="auto"||_=="vertical")?D:!1}),i.getBounds()&&i.getBounds().width>0&&ct())},300)};var $t;this.added(function(St){Ue=St,$t=Ue.on("stagemousemove",function(ut){te.windowMouseX=ut.stageX/e.scaX,te.windowMouseY=ut.stageY/e.scaY})}),m?i.on("slidestop",sn):i.on("mousedown",function(){i.stage.on("stagemouseup",sn,null,!0)}),w&&(te.blurEvent=function(){te.cancelCurrentDrag(),sn()},document.WW.addEventListener("blur",te.blurEvent));function sn(){e.Ticker.remove(At),Rt=!1,Ke&&L&&P&&e.animate(Ye,{alpha:0},oe.fadeTime),lt&&L&&P&&e.animate(De,{alpha:0},oe.fadeTime)}var nn=!1,Ot,Zt=0,at=0,Pt=0,Dt=0,Ut=300,Gt=2;function wt(){Ot=Date.now(),e.Ticker.add(Ht,i.stage)}function Bt(){nn||(te.dispatchEvent("hoverout"),nn=!0),e.Ticker.remove(Ht)}function Ht(){if(!i.stage){nn||(te.dispatchEvent("hoverout"),nn=!0),e.Ticker.remove(Ht);return}Math.abs(Zt-te.windowMouseX)>Gt||Math.abs(at-te.windowMouseY)>Gt?(nn||(te.dispatchEvent("hoverout"),nn=!0),Ot=Date.now(),Zt=te.windowMouseX,at=te.windowMouseY):Date.now()-Ot>Ut&&((Math.abs(Pt-te.windowMouseX)>Gt||Math.abs(Dt-te.windowMouseY)>Gt)&&(te.contentMouse=i.globalToLocal(te.windowMouseX,te.windowMouseY),te.dispatchEvent("hoverover"),Pt=te.windowMouseX,Dt=te.windowMouseY,nn=!1),Ot=Date.now())}if(E){var Jt,cn;i.on("mousedown",function(St){Ue=St.target.stage,Jt=St.stageX/e.scaX,cn=Date.now()}),i.on("click",function(St){Date.now()-cn<600&&Math.abs(St.stageX/e.scaX-Jt)<5&&(te.contentMouse=i.globalToLocal(St.stageX/e.scaX,St.stageY/e.scaY),te.dispatchEvent("select"))}),i.on("mouseover",wt),i.on("mouseout",Bt)}var jt=te.scrollY;te.scrollWindow=function(ut){if(lt&&te.stage&&te.hitTestPoint(te.windowMouseX,te.windowMouseY)&&te.contains(te.stage.getObjectUnderPoint(te.windowMouseX*e.scaX,te.windowMouseY*e.scaY))){n(ut)&&(ut=event);var Mt=ut.detail?ut.detail*-19:ut.wheelDelta;n(Mt)&&(Mt=ut.deltaY*-19),jt+=Mt,jt=Math.max(-te.scrollYMax,Math.min(0,jt)),N||(te.scrollY=jt,i.stage.update()),Fe=!1}Y&&bt()},ne&&(fe.addEventListener("mousewheel",te.scrollWindow),fe.addEventListener("wheel",te.scrollWindow),fe.addEventListener("DOMMouseScroll",te.scrollWindow));var an=!1,en;function yn(St){N&&!an&&St.stage&&(an=!0,en=new e.Damp(te.scrollY,N),te.dampTicker=e.Ticker.add(function(){if(!Rt){if(te.scrollY!=null&&jt!=null&&te.scrollY!=jt&&Math.round(te.scrollY)==Math.round(jt)){Fe=!1;return}n(jt)||(i.y=en.convert(jt)),Fe||Ft()}},St.stage))}this._enabled=!0,Object.defineProperty(te,"enabled",{get:function(){return te._enabled},set:function(St){St?Yt():(clearTimeout(te.dTimeout),e.noDrag(i)),c(te,St)}}),this._scrollEnabled=!0,Object.defineProperty(te,"scrollEnabled",{get:function(){return te._scrollEnabled},set:function(St){St?(Yt(),T&&(ft&&(Ye.mouseEnabled=!0),Se&&(De.mouseEnabled=!0)),fe.addEventListener("mousewheel",te.scrollWindow),fe.addEventListener("wheel",te.scrollWindow),fe.addEventListener("DOMMouseScroll",te.scrollWindow)):(clearTimeout(te.dTimeout),e.noDrag(i),T&&(ft&&(Ye.mouseEnabled=!1),Se&&(De.mouseEnabled=!1)),fe.removeEventListener("mousewheel",te.scrollWindow),fe.removeEventListener("wheel",te.scrollWindow),fe.removeEventListener("DOMMouseScroll",te.scrollWindow)),te._scrollEnabled=St}}),Object.defineProperty(te,"scrollX",{get:function(){return i.x},set:function(St){i.x=St,clearTimeout(te.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Ft()}}),Object.defineProperty(te,"scrollY",{get:function(){return i.y},set:function(St){i.y=St,i.y=jt=St,N&&en.immediate(jt),clearTimeout(te.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Ft()}}),Object.defineProperty(te,"backgroundColor",{get:function(){return o},set:function(St){o=St,We()}}),Object.defineProperty(te,"borderColor",{get:function(){return l},set:function(St){l=St,We()}}),Object.defineProperty(te,"borderWidth",{get:function(){return f},set:function(St){f=St,We()}}),Object.defineProperty(te,"fullSized",{get:function(){return Ce},set:function(St){te.fullSize&&te.fullSize(St)}}),Object.defineProperty(te,"collapsed",{get:function(){return rt},set:function(St){te.collapse&&te.collapse(St)}}),Ae&&(rt=!1,te.collapsed=!0),te.titleBar&&(te.collapseEvent=te.titleBar.on("dblclick",function(){te.collapsed=!te.collapsed})),ee!==!1&&e.styleTransforms(this,Oe),this.clone=function(St){n(St)&&(St=!0);var ut=te.cloneProps(new e.Window(t,r,null,o,J,xe,d,p,_,P,T,oe.color,b,L,S,k,m,A,D,C,E,X,Z,V,O,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve));return St&&(te.contentContainer.cloneChildren(ut.contentContainer),ut.update()),ut},this.doDispose=function(St,ut,Mt){return ne&&(fe.removeEventListener("mousewheel",te.scrollWindow),fe.removeEventListener("wheel",te.scrollWindow),fe.removeEventListener("DOMMouseScroll",te.scrollWindow)),i&&(te.zDE&&i.off(te.zDE),te.zME&&i.off(te.zME),te.zSTA&&i.off(te.zSTA),te.zSTO&&i.off(te.zSTO),te.zTI&&e.Ticker.remove(te.zTI)),te.titleBar&&te.titleBar.removeAllEventListeners(),$t&&Ue&&Ue.off("stagemousemove",$t),te.resizeHandle&&te.resizeHandle.removeAllEventListeners(),te.blurEvent&&fe.removeEventListener("blur",te.blurEvent),typeof Ht<"u"&&e.Ticker.remove(Ht),n(At)||e.Ticker.remove(At),Mt||this.zimContainer_dispose(!0),i=te.contentContainer=null,!0}},e.extend(e.Window,e.Container,["clone","dispose"],"zimContainer",!1),e.Window.prototype.dispose=function(t){return this.doDispose(null,null,t)},Ii=e.Window,e.Page=function(t,r,i,o,l,f,d,p,_,P,T){var R="width, height, color, color2, angle, pattern, scalePattern, cache, style, group, inherit",b;if(b=mt(e.Page,arguments,R,this))return b;qe("58.3"),this.group=P;var L=_===!1?{}:e.getStyle("Page",this.group,T);n(t)&&(t=L.width!=null?L.width:fe.zdf.width),n(r)&&(r=L.height!=null?L.height:fe.zdf.height),this.zimContainer_constructor(0,0,t,r,!1),this.type="Page";var S=this;n(l)&&(l=L.angle!=null?L.angle:90),n(i)&&(i=L.color!=null?L.color:e.light),n(o)&&(o=L.color2!=null?L.color2:null),n(f)&&(f=L.pattern!=null?L.pattern:null),n(d)&&(d=L.scalePattern!=null?L.scalePattern:"fill"),n(p)&&(p=L.cache!=null?L.cache:!1),n(o)||(i=new e.GradientColor([i,o],[0,1],l),o=null);var k=this.backing=new e.Rectangle({width:t,height:r,color:i,scaleDimensions:!1,style:!1}).addTo(this);n(p)&&(!n(o)||!n(f))&&(p=!0),p&&k.cache(),n(f)||(this.pattern=f.addTo(this),d&&f.scaleTo(this,100,100,d).center(this),p&&f.cache()),Object.defineProperty(S,"color",{get:function(){return i},set:function(m){n(m)&&(m=e.black),i=m,S.backing.color=m}}),_!==!1&&e.styleTransforms(this,L),this.clone=function(m){n(m)&&(m=!1),i.type&&(o=null);var A=S.cloneProps(new e.Page(t,r,i,o,vertical,f,d,p,_,P,T));return m&&S.cloneChildren(A),A}},e.extend(e.Page,e.Container,["clone"],"zimContainer",!1),e.Central=function(t,r,i,o,l){qe("58.4"),this.group=o;var f=i===!1?{}:e.getStyle("Central",this.group,l);n(t)&&(t=f.width!=null?f.width:1024),n(r)&&(r=f.height!=null?f.height:768),this.zimContainer_constructor(-t/2,-r/2,t,r);var d=this,p=zimDefaultFrame;d.resizeEvent=p.on("resize",function(){d.scale=p.height/r,d.parent&&d.centerReg(d.parent)}),d.added(function(){d.parent&&d.centerReg(d.parent)}),d.dispose=function(_,P,T){return p.off("resize",d.resizeEvent),d.zimContainer_dispose(_,P,T)},i!==!1&&e.styleTransforms(this,f)},e.extend(e.Central,e.Container,["dispose"],"zimContainer",!1),e.Layer=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z){var ie="width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, onTop, style, group, inherit",ae;if(ae=mt(e.Layer,arguments,ie,this))return ae;qe("58.5"),this.group=U;var he=q===!1?{}:e.getStyle("Layer",this.group,z);n(t)&&(t=he.width!=null?he.width:500),n(r)&&(r=he.height!=null?he.height:500),this.zimContainer_constructor(0,0,t,r,!1),this.type="Layer";var $=this;$.distX=40,$.distY=0,n(i)&&(i=he.titleBar!=null?he.titleBar:"LAYER");var G=i,v=i,w=!0;n(l)&&(l=he.backgroundColor!=null?he.backgroundColor:e.lighter),n(f)&&(f=he.rollBackgroundColor!=null?he.rollBackgroundColor:e.white),n(d)&&(d=he.selectedBackgroundColor!=null?he.selectedBackgroundColor:e.granite),n(_)&&(_=he.color!=null?he.color:e.granite),n(P)&&(P=he.rollColor!=null?he.rollColor:e.granite),n(T)&&(T=he.selectedColor!=null?he.selectedColor:e.moon),n(b)&&(b=he.borderWidth!=null?he.borderWidth:1),n(L)&&(L=he.borderColor!=null?he.borderColor:l),(L<0||b<0)&&(L=b=null),n(S)&&(S=he.dashed!=null?he.dashed:!0),n(k)&&(k=he.titleBar!=null?he.titleBar:null),n(m)&&(m=he.titleBarWidth!=null?he.titleBarWidth:100);var h=m;if(n(A)&&(A=he.titleBarHeight!=null?he.titleBarHeight:40),n(D)&&(D=he.titleBarX!=null?he.titleBarX:null),n(C)&&(C=he.titleBarY!=null?he.titleBarY:null),n(E)&&(E=he.titleBarDraggable!=null?he.titleBarDraggable:!0),n(X)&&(X=he.close!=null?he.close:!0),n(Z)&&(Z=he.closeColor!=null?he.closeColor:d),n(V)&&(V=he.closeBackgroundColor!=null?he.closeBackgroundColor:d),n(O)&&(O=he.closeIndicatorColor!=null?he.closeIndicatorColor:T),n(ne)&&(ne=he.anchor!=null?he.anchor:!0),n(N)&&(N=he.onTop!=null?he.onTop:!0),E||(ne=!1),$.anchor=ne,X&&(m+=30),k=e.merge({borderColor:d},k,{onTop:N,events:!0,visible:!1,ghostColor:L,ghostWidth:b,ghostDashed:S,ghostHidden:!0}),n(o)&&(o=he.titleBarContainer!=null?he.titleBarContainer:null),n(o))if(fe.zdf)o=fe.zdf.stage;else{ht("zim Layer(): Please pass in a reference to a container with bounds set.");return}$.active=!1,$.turnOff=function(){$.active=!1,X&&($.checkBox.visible=!1),$.transformControls.remove(),$.mouseChildren=!0,$.button.backgroundColor=l,$.button.rollBackgroundColor=f,$.button.color=_,$.button.rollColor=_,$.transformControls.allowToggleOff(),$.resizeChildren&&$.resizeChildren()},$.turnOn=function(){$.active=!0,X&&($.checkBox.visible=!0,$.checkBox.checked=!0),$.button.backgroundColor=d,$.button.rollBackgroundColor=d,$.button.color=T,$.button.rollColor=T,$.mouseChildren=!1,$.transformControls.add(),$.transformControls.allowToggleOn()};var I;$.titleBarPos=function(F,Ae){if($.titleBar)return $.titleBar.pos?($.titleBar.pos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),I.update()):($.distX=F,$.distY=Ae),w=!1,$};var Q=$.visible;$.visible=!1;var x=g();this.added(function(F){I=F,$.transform(k),b>=0&&$.transformControls.hideGhost(),setTimeout(function(){function Ae(){return $.localToLocal(0,0,o)}$.visible=Q,b>=0&&setTimeout(function(){$.transformControls.showGhost(),$.stage&&$.stage.update()},200),I=F;var Y=$.titleBar=new e.Container(m,A).reg(0,A).loc($,null,o).mov($.distX,$.distY);E&&Y.drag({all:!0,boundary:new e.Boundary(0,A,o.width-m,o.height-A),localBoundary:!0}),($.distX!=40||$.distY!=0)&&Y.pos($.distX,$.distY),X&&($.checkBox=new e.CheckBox({borderColor:Z,backgroundColor:V,indicatorColor:O,size:20,startChecked:!0}).center(Y).pos(0,null,!0).change(function(){$.turnOff(),$.dispatchEvent("transformhide")}),$.checkBox.visible=!1),Y.mouseChildren=!0,Y.layer=$,$.resetTitleBar=function(){$.distX=40,$.distY=0,w=!0,$.move(!0),$.stage&&$.stage.update()},(typeof v=="string"||typeof v=="number")&&(v=new e.Label({text:v,color:_,rollColor:P,size:he.size!=null?he.size:18,group:this.group})),$.label=v,$.label.center(Y),$.button=new e.Button({shadowBlur:-1,width:h,height:A-1,label:$.label,color:_,rollColor:P,backgroundColor:l,rollBackgroundColor:f,corner:he.corner!=null?he.corner:0,inherit:e.copy(he)}).addTo(Y),$.button.on("mousedown",function(){o.loop(function(se){se&&se!=Y&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()}),$.active||($.turnOn(),$.dispatchEvent("transformshow")),Y.top()}),$.button.on("pressmove",function(){K()}),$.button.on("pressup",function(){K(!0);var se=$.localToLocal(0,0,o);$.distX=Y.x-se.x,$.distY=Y.y-se.y,Y.top(),!ye()&&E&&(se=$.localToGlobal(0,0),$.button.hitTestPoint(se.x,se.y)&&$.resetTitleBar())});function K(se){if(w&&E){var Oe=o.localToLocal(Y.x-$.distX,Y.y-$.distY,$.parent),J=$.localToLocal($.regX,$.regY,$.parent),xe=$.localToLocal(0,0,$.parent);$.x=Oe.x+(J.x-xe.x),$.y=Oe.y+(J.y-xe.y),$.transformControls.resize(se),ge($),$.stage&&$.stage.update()}}function ge(se){se.loop(function(Oe){Oe.type=="Layer"&&($.titleBarDraggable&&Oe.move(),Oe.transformControls.ghost&&Oe.transformControls.resize(),ge(Oe))})}$.button.on("dblclick",function(){E&&$.resetTitleBar()}),$.turnOff(),$.on("transformed",function(se){(se.transformType=="move"||se.transformType=="size"||se.transformType=="stretch"||se.transformType=="rotate")&&(E&&$.move(),ge($))});function ye(){if(Y.x==0||Y.y==Y.height||Y.x==o.width-Y.width||Y.y==o.height)return!0}$.move=function(se){!se&&!w&&$.anchor&&ye()||(Y.loc(Ae()).mov($.distX,$.distY),Y.x<0&&(w=!1,Y.x=0),Y.y<Y.height&&(w=!1,Y.y=Y.height),Y.x>o.width-Y.width&&(w=!1,Y.x=o.width-Y.width),Y.y>o.height&&(w=!1,Y.y=o.height),$.anchor||(w=!0))},$.on("transformhide",function(){$.turnOff(),o.loop(function(se){se&&se!=Y&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()})}),$.resizeChildren=function(se){$.transformControls.resize(se),$.loop(function(Oe){Oe.transformControls&&(Oe.transformControls.visible&&Oe.transformControls.hide(),Oe.type=="Layer"?Oe.resizeChildren():Oe.transformControls.resize())})},$.resize=function(se){return $.move(),$.resizeChildren(se),$},$.toggled=!1;function ee(){$.toggled?(o.loop(function(se){se&&se!=Y&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()}),$.turnOn(),$.dispatchEvent("transformshow")):(Y.top(),$.turnOff(),o.loop(function(se){se&&se!=Y&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()}),$.dispatchEvent("transformhide")),$.stage&&$.stage.update()}if($.toggle=function(se){return n(se)?$.toggled=!$.toggled:$.toggled=se,ee(),$},Object.defineProperty($,"titleBarDraggable",{get:function(){return E},set:function(se){E=se,E?Y.drag({all:!0,boundary:e.Boundary(0,40,o.width-m,o.height-A),localBoundary:!0}):Y.noDrag(!1)}}),$.stageUpEvent=I.on("stagemouseup",function(){$.transformControls.visible&&Y.top()}),!n(D)||!n(C)){w=!1;var ce=n(D)?Y.x:D,ve=n(C)?Y.y-A:C;$.titleBarStartX=D,$.titleBarStartY=C,$.titleBarPos(ce,ve);var Re=$.parent.localToLocal($.x,$.y,o);$.distX=Y.x-Re.x,$.distY=Y.y-Re.y}},50)},x=="s"?.05:50),q!==!1&&e.styleTransforms(this,he),this.clone=function(){return $.cloneProps(new e.Layer(t,r,G,o,l,f,d,p,_,P,T,R,b,L,S,k,h,A,D,C,E,X,Z,V,O,ne,N,q,this.group,z))},this.dispose=function(F,Ae,Y){return $.stageUpEvent&&I.off("stagemouseup",$.stageUpEvent),o&&o.loop(function(K){K.layer=null}),$.transformControls.dispose(),$.transformControls=null,Y||this.zimContainer_dispose(!0),$.titleBar.layer=null,$.titleBar.dispose(),$.checkBox=$.button=null,i=$.titleBar=k=null,!0}},e.extend(e.Layer,e.Container,["clone","dispose"],"zimContainer",!1),e.Waiter=function(t,r,i,o,l,f,d,p,_,P,T){var R="container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",b;if(b=mt(e.Waiter,arguments,R,this))return b;qe("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=P;var L=_===!1?{}:e.getStyle(this.type,this.group,T),S=g(r);n(r)&&(r=L.speed!=null?L.speed:S=="s"?.6:600),n(i)&&(i=L.foregroundColor!=null?L.foregroundColor:e.white),n(o)&&(o=L.backgroundColor!=null?L.backgroundColor:"orange"),n(l)&&(l=L.corner!=null?L.corner:16),n(f)&&(f=L.shadowColor!=null?L.shadowColor:"rgba(0,0,0,.3)"),n(d)&&(d=L.shadowBlur!=null?L.shadowBlur:14),n(p)&&(p=L.fadeTime!=null?L.fadeTime:0);var k=40,m=3,A=k*.6/2,D=(k-A*2)/2,C=m*(A*2+D)+D;this.setBounds(-C/2,-k/2,C,k);var E=this,X,Z=this.display=new e.Shape({style:!1});this.addChild(Z),Z.setBounds(0,0,C,k),Z.regX=C/2,Z.regY=k/2;var V=Z.graphics;V.f(o);var O=l;Array.isArray(O)||(O=[l,l,l,l]),V.rc(0,0,C,k,O[0],O[1],O[2],O[3]),f!=-1&&d>0&&(Z.shadow=new je.Shadow(f,3,3,d)),Z.on("click",function(ie){ie.stopImmediatePropagation()});var ne=new e.Container({style:!1});this.addChild(ne);for(var N,q=0;q<m;q++)N=new je.Shape,N.graphics.f(i).dc(0,0,A),N.x=(q-(m-1)/2)*(A*2+D),ne.addChild(N),N.cache(-A,-A,A*2,A*2),N.alpha=0;this.hide=function(){p>0?E.animate({obj:{alpha:0},time:p,call:ie}):ie();function ie(){if(E.parent&&E.parent.removeChild(E),X=E.stage,X&&X.update(),E.zimAccessibility){var ae=E.zimAccessibility;ae.resize(E),U?U.focus():E.zimTabTag.nextSibling.focus(),setTimeout(function(){ae.talk("Waiter has finished.")},50)}}return E.toggled=!1,E};var U,z=[];this.show=function(){var ie="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(n(t))if(fe.zdf)t=fe.zdf.stage;else{ht(ie);return}else if(t.getBounds){if(n(t.stage)){ht("zim display - Waiter(): The container must have a stage property");return}}else{ht(ie);return}for(var ae,he=0,$=r*(S=="s"?1e3:1),G=0;G<ne.numChildren;G++)ne&&z.push(setTimeout(function(){ae=ne.getChildAt(he),je.Tween.get(ae,{loop:!0}).to({alpha:1},$/m/2).wait($/m).to({alpha:0},$/m).wait($-$/m-$/m/2),he++},G*$/m));if(E.ticker=je.Ticker.on("tick",function(){t.stage.update()}),E.x=t.getBounds().width/2,E.y=t.getBounds().height/2,t.addChild(E),p>0&&(E.alpha=0,E.animate({alpha:1},p)),E.zimAccessibility){var v=E.zimAccessibility;setTimeout(function(){v.activatedObject&&(U=v.activatedObject.zimTabTag)},50),v.resize(E),v.talk(E.zimTabTag.getAttribute("aria-label"))}return E.toggled=!0,E},E.toggle=function(ie){return ie===!0?E.show():ie===!1||E.parent?E.hide():E.show(),E},_!==!1&&e.styleTransforms(this,L),this.clone=function(){return E.cloneProps(new e.Waiter(t,r,i,o,l,f,d,p,_,this.group,T))},this.dispose=function(ie,ae,he){E.ticker&&je.Ticker.off("tick",E.ticker),je.Tween.removeTweens(E),E.removeFrom();for(var $=0;$<ne.numChildren;$++){var G=ne.getChildAt($);clearInterval(z[$]),je.Tween.removeTweens(G)}return he||this.zimContainer_dispose(!0),!0}},e.extend(e.Waiter,e.Container,["clone","dispose"],"zimContainer",!1),e.ProgressBar=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X){var Z="barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, width, style, group, inherit",V;if(V=mt(e.ProgressBar,arguments,Z,this))return V;qe("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=E;var O=C===!1?{}:e.getStyle(this.type,this.group,X);n(r)&&(r=O.foregroundColor!=null?O.foregroundColor:e.green),n(i)&&(i=O.backgroundColor!=null?O.backgroundColor:e.charcoal),n(o)&&(o=O.borderColor!=null?O.borderColor:i),n(l)&&(l=O.borderWidth!=null?O.borderWidth:null),n(_)&&(_=O.labelPosition!=null?O.labelPosition:"bottom"),n(t)&&(t=O.barType!=null?O.barType:"circle"),n(f)&&(f=O.padding!=null?O.padding:t=="circle"?2:-.5),n(T)&&(T=O.corner!=null?O.corner:15),n(R)&&(R=O.shadowColor!=null?O.shadowColor:"rgba(0,0,0,.3)"),n(b)&&(b=O.shadowBlur!=null?O.shadowBlur:14),n(L)&&(L=O.backing!=null?O.backing.clone():null),n(k)&&(k=O.fastClose!=null?O.fastClose:!0),o<0||l<0?o=l=null:o!=null&&l==null&&(t=="circle"?l=10:l=2);var ne=g(S);n(S)&&(S=O.delay!=null?O.delay:ne=="s"?.1:100),n(A)&&(A=O.autoHide!=null?O.autoHide:!0),n(d)&&(d=O.label!=null?O.label:null),n(p)&&(p=O.color!=null?O.color:r),n(D)&&(D=O.width!=null?O.width:t=="circle"?40:200),(typeof d=="string"||typeof d=="number")&&(d=new e.Label({text:d,color:p,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!n(P)&&n(d)&&(d=new e.Label("")),this.label=d;var N=30,q=this,U=0;q.visible=!1,setTimeout(function(){q.visible=!0,q.stage&&q.stage.update()},S);var z;if(t=="circle")D=D/2,L=this.backing=new e.Circle(D,"rgba(0,0,0,0)",i,l,null,null,null,null,!1).addTo(q),z=this.bar=new e.Shape({style:!1}).addTo(q).loc(L.x,L.y).rot(-90);else{if(R!=-1&&b>0){var ie=new e.Rectangle(D-2,N-2,i,null,null,T,null,null,null,!1).addTo(this);ie.shadow=new je.Shadow(R,3,3,b)}L=G(L);var ae=T;Array.isArray(ae)||(ae=[T,T,T,T]);var he=(f+l/2)*1.2;z=this.bar=new e.Rectangle(D-(f+l/2)*1.8,N-(f+l/2)*1.8,r,null,null,[ae[0]-he,ae[1]-he,ae[2]-he,ae[3]-he],null,null,null,!1).center(this);var $=this.mask=new e.Rectangle(D-(f+l/2)*1.8,N-(f+l/2)*1.8,null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1);z.setMask($)}function G(I){var Q;if(q.backing?(Q=q.getChildIndex(q.backing),q.removeChild(q.backing)):Q=q.numChildren,q.border&&q.removeChild(q.border),!n(I)&&I.type=="Pattern"){var x=I;I=q.backing=new e.Rectangle(D,N,i,null,null,T,null,null,null,!1).addTo(q,Q),I.pattern=x,x.center(I),x.setMask(I.shape),l&&(q.border=new e.Rectangle(D,N,"rgba(0,0,0,0)",o,l,T,null,null,null,!1).addTo(q,Q+1))}else I=q.backing=n(I)?new e.Rectangle(D,N,i,o,l,T,null,null,null,!1).addTo(q,Q):L.addTo(q,Q);return I}q.setBacking=function(I){G(I),q.stage&&q.stage.update()},L.on("click",function(I){I.stopImmediatePropagation()}),n(d)||(d.scaleX=d.scaleY=.8,d.startText=d.text,n(P)||(d.text=d.startText+"  0%"),d.center(q),_=="above"?d.y-=60:d.y+=60,d.alpha=.8),this.hide=function(){var I=q.stage;if(q.parent&&q.parent.removeChild(q),q.backing.type=="Pattern"&&q.backing.pauseInterval&&q.backing.pauseInterval(),I&&I.update(),q.zimAccessibility){var Q=q.zimAccessibility;Q.resize(q),v?v.focus():q.zimTabTag.nextSibling.focus(),setTimeout(function(){Q.talk("Progress Bar has finished.")},50)}return q.toggled=!1,q};var v;this.show=function(){var I="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(n(m))if(fe.zdf)m=fe.zdf.stage;else{ht(I);return}else if(m.getBounds){if(n(m.stage)){ht("zim display - Waiter(): The container must have a stage property");return}}else{ht(I);return}if(q.timeOut&&clearTimeout(q.timeOut),w(0),q.zimActiveLoader&&q.zimActiveLoader.on("progress",function(x){U=x.progress*100,w(U)}),q.center(m),q.backing.type=="Pattern"&&q.backing.pauseInterval&&q.backing.pauseInterval(!1),q.zimAccessibility){var Q=q.zimAccessibility;setTimeout(function(){Q.activatedObject&&(v=Q.activatedObject.zimTabTag)},50),Q.resize(q),Q.talk(q.zimTabTag.getAttribute("aria-label"))}return q.toggled=!0,q},q.toggle=function(I){return I===!0?q.show():I===!1||q.parent?q.hide():q.show(),q},q.run=function(I,Q){n(Q)||(A=Q),n(I)&&(I=ne=="s"?3:3e3),a(I,ne);var x=I*(ne=="s"?1e3:1);q.runInterval&&clearInterval(q.runInterval),q.percent=0;var F=Date.now();return q.runInterval=setInterval(function(){q.percent=(Date.now()-F)/x*100,q.percent>=100&&(q.percent=100,clearInterval(q.runInterval))},30),q},q.dispatched=!1;function w(I){t=="circle"?z.graphics.c().mt(0,0).s(r).ss(l-f*2+.5).a(0,0,D,0,360*I/100*Math.PI/180):($.sca(I/100,1),z.setMask($)),n(P)||(d.text=d.startText+" "+Math.min(Math.round(I),100)+"%"),A&&k&&Math.round(I)>=100&&(q.timeOut=setTimeout(function(){q.hide()},200)),!q.dispatched&&Math.round(I)>=100&&(q.dispatchEvent("complete"),q.dispatched=!0,setTimeout(function(){q&&(q.dispatched=!1)},100)),q.stage&&q.stage.update()}Object.defineProperty(q,"percent",{get:function(){return U},set:function(I){U=I,w(I)}});var h=q.getBounds();q.setBounds(h.x-5,h.y-5,h.width+10,h.height+10),C!==!1&&e.styleTransforms(this,O),this.clone=function(){return q.cloneProps(new e.ProgressBar(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,this.group,X))},this.dispose=function(I,Q,x){return q.backing.type=="Pattern"&&q.backing.clearInterval&&q.backing.clearInterval(),q.runInterval&&clearInterval(q.runInterval),x||this.zimContainer_dispose(!0),!0}},e.extend(e.ProgressBar,e.Container,["clone","dispose"],"zimContainer",!1),e.Indicator=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E){var X="width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, backgroundAlpha, style, group, inherit",Z;if(Z=mt(e.Indicator,arguments,X,this))return Z;qe("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=C;var V=D===!1?{}:e.getStyle(this.type,this.group,E);n(t)&&(t=V.width!=null?V.width:300),n(r)&&(r=V.height!=null?V.height:50),n(i)&&(i=V.num!=null?V.num:6),n(P)&&(P=V.indicatorType!=null?V.indicatorType:"dot"),n(o)&&(o=V.foregroundColor!=null?V.foregroundColor:P=="star"?e.yellow:P=="heart"?e.red:e.orange),n(l)&&(l=V.backgroundColor!=null?V.backgroundColor:e.granite),l<0&&(l=V.backgroundColor!=null?V.backgroundColor:"rgba(0,0,0,.01)"),n(f)&&(f=V.borderColor!=null?V.borderColor:null),n(d)&&(d=V.borderWidth!=null?V.borderWidth:null),f<0||d<0?f=d=null:f!=null&&d==null&&(d=1),n(p)&&(p=V.backdropColor!=null?V.backdropColor:-1),n(_)&&(_=V.corner!=null?V.corner:0),n(T)&&(T=V.fill!=null?V.fill:!1),n(R)&&(R=V.scale!=null?V.scale:1),n(b)&&(b=V.lightScale!=null?V.lightScale:1),n(L)&&(L=V.interactive!=null?V.interactive:!1),n(S)&&(S=V.shadowColor!=null?V.shadowColor:"rgba(0,0,0,.3)"),n(k)&&(k=V.shadowBlur!=null?V.shadowBlur:5),n(A)&&(A=V.backgroundAlpha!=null?V.backgroundAlpha:.2);var O=(Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",ne=this;this.lights=[];var N;if(p!=-1){var q=ne.backdrop=new e.Rectangle(t,r,p,f,d,_,null,null,null,!1);this.addChild(q)}var U=this.lightsContainer=new e.Container({style:!1});this.addChild(U);var z,ie=r*.5,ae=t/(i+1),he=new je.Shape,$=!1;P=="square"||P=="box"||P.type=="Emoji"?he.graphics.f("black").dr(-ae/2/b+ie/2,-r/2+ie/2,ae/b,r):he.graphics.f("black").dr(-ae/2/b,-r/2,ae/b,r);for(var G=0;G<i;G++)P=="square"||P=="box"?(z=new e.Rectangle(ie,ie,l,f,d,null,null,null,null,!1),z.regX=z.width/2,z.regY=z.height/2):P=="star"?z=new e.Poly(ie*.6,5,.5,l,f,d,null,null,!1):P=="heart"?z=new e.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:l,interactive:!1}).transformPoints("scale",.15):P.type=="Emoji"?($=!0,z=P.clone().reg("center","center"),z.myCache=!1):z=new e.Circle(ie/2,l,f,d,null,null,null,null,!1),this.lights.push(z),z.znum=G,z.scaleX=z.scaleY=b,z.hitArea=he,z.x=ae+ae*G,z.y=r/2,U.addChild(z);U.setBounds(0,0,t,r),U.regX=U.x=t/2,U.regY=U.y=r/2,this.addChild(U),S!=-1&&k>0&&(U.shadow=new je.Shadow(S,2,2,k)),L&&(U.cur("pointer"),ne.lightsEvent=U.on(O,function(w){if(N==w.target.znum){if(N>0)return;if(N==0){N=-1,v(N),ne.dispatchEvent("change");return}}N=w.target.znum,v(N),ne.dispatchEvent("change")})),U.scaleX=U.scaleY=R;function v(w){w>=i&&(w=-1);for(var h,I=0;I<i;I++){T&&I<w?h=o:h=l,I==w&&(h=o);var Q=U.getChildAt(I);$&&(Q.alpha=h==o?1:A),Q.color=h}ne.zimAccessibility&&ne.zimAccessibility.changeTitle(ne),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ne.stage&&ne.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return N},set:function(w){N=Math.floor(w),N=e.constrain(N,-1,i-1),v(N)}}),Object.defineProperty(this,"num",{get:function(){return i},set:function(){kt&&ht("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(ne,"enabled",{get:function(){return ne._enabled},set:function(w){c(ne,w)}}),n(m)&&(m=V.selectedIndex!=null?V.selectedIndex:0),ne.selectedIndex=m,D!==!1&&e.styleTransforms(this,V),this.dispose=function(w,h,I){I||(ne.lightsEvent&&U.off(O,ne.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return ne.cloneProps(new e.Indicator(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,this.group,E))}},e.extend(e.Indicator,e.Container,["clone","dispose"],"zimContainer",!1),e.TextInput=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x){var F="width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingH, paddingV, shiftH, shiftV, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, readOnly, inputType, rtl, uppercase, placeholderInstant, keyboardShift, style, group, inherit",Ae;if(Ae=mt(e.TextInput,arguments,F,this))return Ae;qe("54.2"),this.group=Q;var Y=I===!1?{}:e.getStyle("TextInput",this.group,x);n(l)&&(l=Y.size!=null?Y.size:36),(n(E)||E=="ignore")&&(E=Y.padding!=null&&E!="ignore"?Y.padding:5),n(X)&&(X=Y.paddingH!=null?Y.paddingH:E),n(Z)&&(Z=Y.paddingV!=null?Y.paddingV:E),n(t)&&(t=Y.width!=null?Y.width:300),n(r)&&(r=Y.height!=null?Y.height:l+Z*2),n(i)&&(i=Y.placeholder!=null?Y.placeholder:null),n(o)&&(o=Y.text!=null?Y.text:""),n(f)&&(f=Y.font!=null?Y.font:"arial"),n(d)&&(d=Y.color!=null?Y.color:e.dark),n(p)&&(p=Y.backgroundColor!=null?Y.backgroundColor:e.lighter),n(_)&&(_=Y.borderColor!=null?Y.borderColor:null),n(P)&&(P=Y.borderWidth!=null?Y.borderWidth:null);var K=ge(t,r,i,o,d,p,_);this.veeObj={width:K[0],height:K[1],placeholder:K[2],text:K[3],color:K[4],backgroundColor:K[5],borderColor:K[6]};function ge(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),d=e.Pick.choose(d),p=e.Pick.choose(p),_=e.Pick.choose(_),n(b)&&(b=Y.selectionColor!=null?Y.selectionColor:d),n(L)&&(L=Y.selectionAlpha!=null?Y.selectionAlpha:.2),n(S)&&(S=Y.cursorColor!=null?Y.cursorColor:d),n(k)&&(k=Y.cursorSpeed!=null?Y.cursorSpeed:.5),n(m)&&(m=Y.shadowColor!=null?Y.shadowColor:"rgba(0,0,0,.3)"),n(A)&&(A=Y.shadowBlur!=null?Y.shadowBlur:20),n(D)&&(D=Y.align!=null?Y.align:"left"),n(C)&&(C=Y.corner!=null?Y.corner:0),n(V)&&(V=Y.shiftH!=null?Y.shiftH:0),n(R)&&(R=Y.password!=null?Y.password:!1),n(O)&&(O=Y.shiftV!=null?Y.shiftV:R?l*.25:0),n(T)&&(T=Y.maxLength!=null?Y.maxLength:D=="center"?Math.floor(t/l)*1.8:null),n(ne)&&(ne=Y.scrollBarActive!=null?Y.scrollBarActive:!1),n(N)&&(N=Y.scrollBarDrag!=null?Y.scrollBarDrag:!1),n(q)&&(q=Y.scrollBarColor!=null?Y.scrollBarColor:_),n(U)&&(U=Y.scrollBarAlpha!=null?Y.scrollBarAlpha:.3),n(z)&&(z=Y.scrollBarFade!=null?Y.scrollBarFade:!0),n(ie)&&(ie=Y.scrollBarH!=null?Y.scrollBarH:!0),n(ae)&&(ae=Y.scrollBarV!=null?Y.scrollBarV:!0),n(he)&&(he=Y.readOnly!=null?Y.readOnly:!1),n($)&&($=Y.inputType!=null?Y.inputType:"text"),N&&(z=Y.scrollBarFade!=null?Y.scrollBarFade:!1),n(G)&&(G=Y.rtl!=null?Y.rtl:fe.DIR=="rtl"||e.DIR=="rtl"?"rtl":null),n(v)&&(v=Y.uppercase!=null?Y.uppercase:null),n(h)&&(h=Y.keyboardShift!=null?Y.keyboardShift:null),v&&(o&&(o=o.toUpperCase()),i&&(i=i.toUpperCase())),n(w)&&(w=Y.placeholderInstant!=null?Y.placeholderInstant:!0);function ye(){return fe.DIR&&fe.DIR=="rtl"||!fe.DIR&&e.DIR=="rtl"?D=="start"?D="right":D=="end"&&(D="left"):D=="start"?D="left":D=="end"&&(D="right"),D}D=ye(D),this.zimWindow_constructor(t,r,null,p,_,P,E,C,!1,ne,N,q,U,z,ie,ae,!1,null,null,!1,!0,m,A,X,Z,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,I,Q,e.copy(Y)),this.type="TextInput";var ee=this;this.placeholderLabel=new e.Label({text:i||"",size:l,color:d,font:f,shiftH:V,shiftV:O,valign:"top"}).alp(.5),o==""&&this.add(this.placeholderLabel);var ce=new e.Rectangle({width:t-E*2,height:r-E*2,color:e.clear,style:!1}).center(this);this.cur("text");var ve=this.label=new e.TextInput.LabelInput(o,l,T,R,b,L,S,k,f,d,null,null,null,D,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,V,O,null,null,null,null,$,G,v,w,I,Q,x);this.add(ve),ve.setMask(ce),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,D=="right"?(ve.x=t-X,this.placeholderLabel.x=t-this.placeholderLabel.width-X):D=="center"&&(ve.x=t/2,this.placeholderLabel.x=(t-this.placeholderLabel.width)/2),ve.ogx=ve.x,ee.placeholderLabel.x=ve.x,ee.placeholderLabel.align=D;var Re=new e.Rectangle({width:E,height:r,color:e.clear,style:!1}).addTo(this).expand(0);Re.on("mousedown",function(we){ve.onMousedown(we),we.stopImmediatePropagation()}),Re.on("pressmove",function(we){ve.onPressmove(we),we.stopImmediatePropagation()}),Re.on("dblclick",function(we){ve.onDblclick(we),we.stopImmediatePropagation()});var se=new e.Rectangle({width:E,height:r,color:e.clear,style:!1}).pos(0,0,e.RIGHT,e.TOP,this).expand(0);se.on("mousedown",function(we){ve.onMousedown(we),we.stopImmediatePropagation()}),se.on("pressmove",function(we){ve.onPressmove(we),we.stopImmediatePropagation()}),se.on("dblclick",function(we){ve.onDblclick(we),we.stopImmediatePropagation()});var Oe=ve.text;this.on("mousedown",function(we){ve.onMousedown(we),Oe=ve.text}),this.on("pressmove",function(we){ve.onPressmove(we),we.stopImmediatePropagation()}),this.on("dblclick",function(we){ve.onDblclick(we),we.stopImmediatePropagation()}),this.added(function(we){we.on("stagemousedown",function(ke){ee.hitTestPoint(ke.stageX,ke.stageY)||(ve.focus=!1,ve.text!=Oe&&ee.dispatchEvent("change"),Oe=ve.text)})});var J=ee.stage?stage.y:0;this.label.on("focus",function(){if(fe.M&&h){ee.re&&ee.stage.frame.off("resize",ee.re),ee.re=ee.stage.frame.on("resize",function(){ee.stage&&we>ee.stage.height/4&&(ee.stage.y=ee.stage.scaleY*(ee.stage.height/4-we),ee.stage.update())});var we=ee.label.localToGlobal(0,0).y;ee.stage&&we>ee.stage.height/4&&(ee.stage.y=ee.stage.scaleY*(ee.stage.height/4-we),ee.stage.update())}w&&ee.placeholderLabel.parent&&(ee.placeholderLabel.removeFrom(),ee.stage&&ee.stage.update()),ee.dispatchEvent("focus")}),this.label.on("blur",function(){fe.M&&h&&ee.stage&&(ee.re&&ee.stage.frame.off("resize",ee.re),ee.stage.y=J,ee.stage.update()),w&&ve.text==""&&!ee.placeholderLabel.parent&&(ee.add(ee.placeholderLabel),ee.stage&&ee.stage.update()),ee.dispatchEvent("blur")});function xe(){ve.text!=""&&ee.placeholderLabel.parent&&(ee.placeholderLabel.removeFrom(),ee.stage&&ee.stage.update()),ve.text==""&&!ee.placeholderLabel.parent&&(ee.add(ee.placeholderLabel),ee.stage&&ee.stage.update())}this.label.on("input",function(){xe(),ee.dispatchEvent("input")}),this.label.on("keydown",function(we){this.label.deleteKey=we.detail==46,ee.dispatchEvent("keydown")}),this.label.on("blinker",function(){var we=ee.localToGlobal(0,0).x,ke=we+t-X-ve.blinker.width,pe=ve.blinker,Me=pe.localToGlobal(0,0).x,Ue=ve.localToGlobal(0,0).x-1,ue=ve.x+ve.blinker.x,Ee=e.constrain(ue,X,t-X-ve.blinker.width);if(ue!=Ee&&(ve.x-=ue-Ee),D=="left")ve.width<ee.width?ve.x=ve.ogx:ke<Me||ve.oldWidth==ve.width?ve.x-=ue-Ee:ve.oldWidth>ve.width&&this.label.deleteKey!=!0&&(ve.x+=Math.abs(pe.oldX-Me)+ve.blinker.width+X);else if(D=="right")ve.width<ee.width?ve.x=ve.ogx:ke<Me||ve.oldWidth==ve.width?ve.x-=ue-Ee:ve.oldWidth>ve.width&&this.label.deleteKey==!0&&Me<Ue-ee.width&&(ve.x-=Math.abs(pe.oldX-Me)+ve.blinker.width+X);else if(D=="center"){if(ve.width<ee.width)ve.x=ve.ogx;else if(ke<Me)ve.x-=ue-Ee;else if(ve.oldWidth==ve.width)ve.x-=ue-Ee;else if(ve.oldWidth>ve.width&&ke>Me){var Te=we+ee.width*.5;this.label.deleteKey!=!0?ve.x+=ve.blinker.width+X:ve.x-=ve.blinker.width+X}}ve.oldWidth=ve.width,pe.oldX=Me,ee.stage&&ee.stage.update()}),Object.defineProperty(ee,"text",{get:function(){return ve.hiddenInput.value},set:function(we){Oe=we,ve.setText(we),xe(),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ee},set:function(){e.KEYFOCUS=ee}}),e.KEYFOCUS||te(),this.on("mousedown",function(){te()});function te(){ee.keyFocus=!0}Object.defineProperty(ee,"readOnly",{get:function(){return he},set:function(we){he=we,ee.htmlTag.setAttribute("readonly",he)}}),he&&(ee.readOnly=!0),Object.defineProperty(ee,"focus",{get:function(){return ve.focus},set:function(we){ve.focus=we}}),Object.defineProperty(ee,"color",{get:function(){return ve.color},set:function(we){ve.color=latestColor=we,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),Object.defineProperty(ee,"size",{get:function(){return ve.size},set:function(we){ve.size=we,ve.hiddenInput.style.fontSize=we+"px",!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),Object.defineProperty(ee,"align",{get:function(){return ve.align},set:function(we){ve.align=D=ye(we),D=="right"?ve.x=t-ve.width:D=="center"?ve.x=t/2:ve.x=0,ee.placeholderLabel.x=ve.x,ee.placeholderLabel.align=D,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),Object.defineProperty(ee,"font",{get:function(){return ve.font},set:function(we){ve.font=we,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),Object.defineProperty(ee,"selectionAlpha",{get:function(){return ve.selectionAlpha},set:function(we){ve.selectionAlpha=we,ve.selection.alpha!=0&&(ve.selection.alpha=we),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),I!==!1&&e.styleTransforms(this,Y),this.clone=function(we){return ee.cloneProps(new e.TextInput(we||!e.isPick(K[0])?t:K[0],we||!e.isPick(K[1])?r:K[1],we||!e.isPick(K[2])?i:K[2],we||!e.isPick(K[3])?o:K[3],l,f,we||!e.isPick(K[4])?d:K[4],we||!e.isPick(K[5])?p:K[5],we||!e.isPick(K[6])?_:K[6],P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,this.group,x))}},e.extend(e.TextInput,e.Window,"clone","zimWindow",!1),e.TextInput.LabelInput=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae){this.zimLabel_constructor(t,r,_,P,null,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,null,G,v,null,w,x,F,Ae),this.type="LabelInput",n(P)&&(P=e.dark),n(l)&&(l=P),n(f)&&(f=.2),this.selectionAlpha=f,n(d)&&(d=P),n(p)&&(p=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.setAttribute("id",e.makeID()),this.hiddenInput.value=t,h=="text"&&o&&(h="password"),this.hiddenInput.type=h,h=="number"&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric"),i>0&&(this.hiddenInput.maxLength=i),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(K=this.stage.frame),K.zil&&fe.removeEventListener("keydown",K.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(K=this.stage.frame),K.zil&&fe.addEventListener("keydown",K.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=h,this.dispatchEvent("blur")},this.onInput=function(){Q&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var ge=this.hiddenInput.value;h=="number"&&(ge=ge.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=ge),this.text=this.hiddenInput.type=="password"?ge.replace(/./g,"*"):ge,this.measureText(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var Y=this;this.onKeydown=function(ge){this.deleteKey=ge.code=="Backspace"||ge.code=="Delete",this.blinker.replayTween(),setTimeout(function(){let ye=new CustomEvent("keydown",{detail:ge.keyCode});Y.positionBlinkerAndSelection.call(Y),Y.dispatchEvent(ye)},10)},this.onMousedown=function(ge){var ye=this.text.length,ee=this.eventPositionGlobalToLocal(ge);this.focus||(this.hiddenInput.focus(),(h=="number"||h=="email")&&(this.hiddenInput.type="text"));var ce=this.mapPointToIndex(ee);I?this.hiddenInput.setSelectionRange(ye-ce,ye-ce):this.hiddenInput.setSelectionRange(ce,ce),this.positionBlinkerAndSelection()},this.onPressmove=function(ge){var ye=this.text.length;this.focus||this.hiddenInput.focus();var ee=this.eventPositionGlobalToLocal(ge),ce;I?ce=ye-this.mapPointToIndex(ee):ce=this.mapPointToIndex(ee),this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=ce?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,ce,I?"backward":"forward"):this.hiddenInput.setSelectionRange(ce,this.hiddenInput.selectionEnd,I?"forward":"backward"):this.hiddenInput.selectionDirection===(I?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,ce,I?"backward":"forward"):this.hiddenInput.setSelectionRange(ce,this.hiddenInput.selectionEnd,I?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var ge=this.text.length;if(this.focus){var ye=this.backing||this.background?this.paddingH:0,ee=this.backing||this.background?this.paddingV:0;if(this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd){var ce,ve;I?(ce=this.textWidthArray[ge-this.hiddenInput.selectionStart],ve=this.textWidthArray[ge-this.hiddenInput.selectionEnd],this.selection.widthOnly=ve-ce,this.selection.pos(ve+ye-1+ae,ee+he)):(ce=this.textWidthArray[this.hiddenInput.selectionStart],ve=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=ve-ce,this.selection.pos(ce+ye-1+ae,ee+he)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)}else this.selection.alp(0);this.blinker.heightOnly=this.textHeight;var Re=this.hiddenInput.selectionDirection==="backward"?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd;Re||(Re=0),I&&(Re=ge-Re),this.blinker.pos(this.textWidthArray[Re]+ye-1+(L=="right"&&this.text==""?this.width:L=="center"&&this.text==""?this.width/2:0)+ae,ee+he),this.dispatchEvent("blinker")}this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(ge){var ye=this.globalToLocal(ge.stageX/e.scaX,ge.stageY/e.scaY);return L=="right"?ye.x-=this.label.x-this.width:L=="center"?ye.x-=(this.label.x-this.width)/2:ye.x-=this.label.x,ye.y-=this.label.y,ye},this.mapPointToIndex=function(ge){for(var ye=this.textWidthArray.length-1,ee=0;ee<this.textWidthArray.length-1;ee++){var ce=(this.textWidthArray[ee]+this.textWidthArray[ee+1])/2;if(ge.x<=ce){ye=ee;break}}return ye},this.measureText=function(){var ge=this.label.clone(),ye=this.text;I&&(ye=ye.split("").reverse().join(""));for(var ee=0;ee<ye.length&&ee<this.previousMeasuredText.length&&ye[ee]===this.previousMeasuredText[ee];)ee++;for(this.textWidthArray=this.textWidthArray.slice(0,ee+1),ee++;ee<=ye.length;ee++)ge.text=ye.slice(0,ee),this.textWidthArray.push(ge.getMeasuredWidth());this.previousMeasuredText=ye,this.textHeight=ge.getMeasuredLineHeight()},this.setText=function(ge){Q&&(ge=ge.toUpperCase()),this.hiddenInput.value=ge,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===Y.hiddenInput},set:function(ge){ge===!0?Y.hiddenInput.focus():Y.hiddenInput.blur()}});var K;this.added(function(ge){K=ge.frame,Y.hiddenInput.addEventListener("focus",Y.onFocus.bind(Y)),Y.hiddenInput.addEventListener("blur",Y.onBlur.bind(Y))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cur("text"),this.blinker=new e.Rectangle({width:2,height:1,color:d,style:!1}).animate({obj:{alpha:0},wait:p,time:.1,rewind:!0,rewindWait:p,loop:!0,loopWait:p}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new e.Rectangle({width:1,height:1,color:l,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},e.extend(e.TextInput.LabelInput,e.Label,null,"zimLabel",!1),e.List=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we,ke,pe,Me,Ue,ue,Ee,Te,_e,We,oe,Ye,Ve,De,de,Be,Qe,Ke,lt,gt,He,it,ft){var Se="width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, spacing, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, downColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideFactor, slideSnap, slideSnapDamp, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, pulldownToggle, optimize, keyEnabled, resizeHandle, resizeBoundary, resizeVisible, continuous, style, group, inherit",Fe;if(Fe=mt(e.List,arguments,Se,this))return Fe;qe("60.5"),this.group=it;var me=He===!1?{}:e.getStyle("List",this.group,ft);n(t)&&(t=me.width!=null?me.width:300);var $e=r;n(r)&&(r=me.height!=null?me.height:n(Ee)?200:200+Ee.height),n(i)&&(i=i=me.list!=null?me.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),i.length==0&&(i=["%-&"]),this.originalList=i,n(o)&&(o=me.viewNum!=null?me.viewNum:5),n(l)&&(l=me.vertical!=null?me.vertical:!0),n(f)&&(f=me.currentSelected!=null?me.currentSelected:!0);var st=!n(d)||!n(_);n(Te)&&(Te=me.checkBox!=null?me.checkBox:!1),n(d)&&(d=me.align!=null?me.align:Te?"left":"center"),n(p)&&(p=me.valign!=null?me.valign:"center"),n(_)&&(_=me.labelAlign!=null?me.labelAlign:d),n(P)&&(P=me.labelValign!=null?me.labelValign:p),n(L)&&(L=me.indent!=null?me.indent:Te?0:10),n(T)&&(T=me.labelIndent!=null?me.labelIndent:L),n(R)&&(R=me.labelIndentH!=null?me.labelIndentH:T),n(b)&&(b=me.labelIndentV!=null?me.labelIndentV:T),n(S)&&(S=me.spacing!=null?me.spacing:2),n(E)&&(E=me.backdropColor!=null?me.backdropColor:e.dark),n(k)&&(k=me.backgroundColor!=null?me.backgroundColor:e.tin),n(m)&&(m=me.rollBackgroundColor!=null?me.rollBackgroundColor:e.grey),n(A)&&(A=me.downBackgroundColor!=null?me.downBackgroundColor:m),n(D)&&(D=me.selectedBackgroundColor!=null?me.selectedBackgroundColor:e.charcoal),n(C)&&(C=me.selectedRollBackgroundColor!=null?me.selectedRollBackgroundColor:e.grey),n(X)&&(X=me.color!=null?me.color:e.white),n(Z)&&(Z=me.rollColor!=null?me.rollColor:X),n(V)&&(V=me.downColor!=null?me.downColor:Z),n(O)&&(O=me.selectedColor!=null?me.selectedColor:X),n(ne)&&(ne=me.selectedRollColor!=null?me.selectedRollColor:Z),n(E)&&(E=me.backdropColor!=null?me.backdropColor:E);var Je=N,rt=q;n(N)&&(N=me.borderColor!=null?me.borderColor:e.silver),n(q)&&(q=me.borderWidth!=null?me.borderWidth:1),n(U)&&(U=me.padding!=null?me.padding:S),n(z)&&(z=me.corner!=null?me.corner:0),n(ie)&&(ie=me.swipe!=null?me.swipe:!0),n(ae)&&(ae=me.scrollBarActive!=null?me.scrollBarActive:!0),n(he)&&(he=me.scrollBarDrag!=null?me.scrollBarDrag:!0),n($)&&($=me.scrollBarColor!=null?me.scrollBarColor:N),n(G)&&(G=me.scrollBarAlpha!=null?me.scrollBarAlpha:.3),n(v)&&(v=me.scrollBarFade!=null?me.scrollBarFade:!0),n(w)&&(w=me.scrollBarH!=null?me.scrollBarH:!l),n(h)&&(h=me.scrollBarV!=null?me.scrollBarV:l),he&&(v=me.scrollBarFade!=null?me.scrollBarFade:!1),n(I)&&(I=me.scrollBarOverlay!=null?me.scrollBarOverlay:!0),n(Q)&&(Q=me.slide!=null?me.slide:!0),n(x)&&(x=me.slideFactor!=null?me.slideFactor:.95),n(F)&&(F=me.slideSnap!=null?me.slideSnap:l?"vertical":"horizontal"),n(Y)&&(Y=me.shadowColor!=null?me.shadowColor:"rgba(0,0,0,.3)"),n(K)&&(K=me.shadowBlur!=null?me.shadowBlur:20),n(ye)&&(ye=me.paddingV!=null?me.paddingV:U),n(ge)&&(ge=me.paddingH!=null?me.paddingH:U),n(ee)&&(ee=me.scrollWheel!=null?me.scrollWheel:!0),n(ve)&&(ve=me.titleBar!=null?me.titleBar:null),n(Re)&&(Re=me.titleBarColor!=null?me.titleBarColor:null),n(se)&&(se=me.titleBarBackgroundColor!=null?me.titleBarBackgroundColor:null),n(Oe)&&(Oe=me.titleBarHeight!=null?me.titleBarHeight:35),n(J)&&(J=me.draggable!=null?me.draggable:null),n(xe)&&(xe=me.boundary!=null?me.boundary:null),n(te)&&(te=me.onTop!=null?me.onTop:null),n(we)&&(we=me.close!=null?me.close:null),n(ke)&&(ke=me.closeColor!=null?me.closeColor:null),n(pe)&&(pe=me.collapse!=null?me.collapse:null),n(Me)&&(Me=me.collapseColor!=null?me.collapseColor:null),n(ue)&&(ue=me.excludeCustomTap!=null?me.excludeCustomTap:!1),n(Te)&&(Te=me.checkBox!=null?me.checkBox:!1),n(_e)&&(_e=me.pulldown!=null?me.pulldown:!1),n(De)&&(De=me.pulldownToggle!=null?me.pulldownToggle:!1),n(Ve)&&(Ve=me.noScale!=null?me.noScale:!1),n(We)&&(We=me.clone!=null?me.clone:!1),n(de)&&(de=me.optimize!=null?me.optimize:!0),n(Be)&&(Be=me.keyEnabled!=null?me.keyEnabled:null),n(Qe)&&(Qe=me.resizeHandle!=null?me.resizeHandle:null),n(Ke)&&(Ke=me.resizeBoundary!=null?me.resizeBoundary:null),n(lt)&&(lt=me.resizeVisible!=null?me.resizeVisible:!1),n(gt)&&(gt=me.continuous!=null?me.continuous:!1),ve===!1&&(ve=null),this.vertical=l;var Ce=this,ze=r;fe.DIR&&fe.DIR=="rtl"||!fe.DIR&&e.DIR=="rtl"?d=="start"?d="right":d=="end"&&(d="left"):d=="start"?d="left":d=="end"&&(d="right");var Xe;gt?(Ce.continuous=!0,Xe=e.copy(i),e.loop(i.length,function(at){i[at].clone?Xe.push(i[at].clone()):Xe.push(i[at])})):Xe=i,Te&&e.loop(Xe,function(at,Pt){Xe[Pt]!="%-&"&&(Xe[Pt]=e.List.checkItem(at,null,t,"left",10,10,S,X,Z,O,ne,k,m,D,C))});var Ze=g(),ot;if(Xe.constructor=={}.constructor){var Ge=n(Xe.shade)?n(me.shade)?.2:me.shade:Xe.shade,et=n(Xe.dim)?n(me.dim)?.1:me.dim:Xe.dim,pt=n(Xe.shift)?n(me.shift)?15:me.shift:Xe.shift,Le=n(Xe.bloom)?n(me.bloom)?!1:me.bloom:Xe.bloom,tt=n(Xe.whither)?n(me.whither)?!1:me.whither:Xe.whither,vt=n(Xe.open)?n(me.open)?!1:me.open:Xe.open,nt=n(Xe.expander)?n(me.expander)?"plus":me.expander:Xe.expander;nt=nt.toLowerCase(),nt=="arrows"&&(nt="arrow"),nt!="none"&&nt!="arrow"&&(nt="plus"),Le===!0&&(Le=Ze=="s"?.01:10),tt===!0&&(tt=Ze=="s"?.01:10),a(Le),a(tt),pt===!0&&(pt=15),Ge===!0&&(Ge=.2),et===!0&&(et=.1);var Tt=n(Xe.subStyles)?n(me.subStyles)?{}:me.subStyles:Xe.subStyles;n(Xe.menu)||(Xe=Xe.menu),ot=Ce.tree=new e.Hierarchy(Xe),Xe=ot.getLinearList(),st||(d=_="left")}_e&&(o=n(ot)?Xe.length:ot.length,n($e)&&(r=o*t/620*100+(o+1)*S+(n(ve)?0:Oe)),q=0,D=k,E=e.clear,ie=!1);var xt=0,Ct=0;e.loop(Xe,function(at){at.type=="ListItem"&&(at.width=t-S*2),Ve&&(at.width&&(xt+=at.width),at.height&&(Ct+=at.height))}),xt&&(xt+=S*(Xe.length-1)),Ct&&(Ct+=S*(Xe.length-1)),this.align=d,this.valign=p,this.indent=L,n(Ee)||(r=r-Ee.height,Ee.list=Ce,Ce.organizer=Ee,Ee.setButtons(),Oe+=Ee.height),gt&&(ae=!1),this.zimWindow_constructor(t,r,null,E,N,q,U,z,ie,ae,he,$,G,v,w,h,Q,x,F,Ae,!0,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we,ke,oe,!1,null,Qe,pe,Me,Ue,de,Ke,lt,gt?l?"vertical":"horizontal":null,He,it,e.copy(me)),this.type="List",n(ve)||(this.titleBarLabel.pos(null,Oe-30,null,!0),n(Oe)&&(Oe=30),r=r-Oe),n(Ee)||Ee.addTo(Ce).loc(0,-Ee.height),xt&&Ve?(Ce.itemWidth=l?t-(ae?I?0:6:0):xt/Xe.length,Ce.itemHeight=l?Ct/Xe.length:r-(ae?I?0:6:0)):(Ce.itemWidth=l?t-(ae?I?0:6:0):t/o,Ce.itemHeight=l?r/o:r-(ae?I?0:6:0));var ct,Rt=e.copy(me);delete Rt.borderWidth,delete Rt.borderColor;function At(at){ct=Ce.tabs=new e.Tabs({width:l?Ce.itemWidth:Ce.itemWidth*Xe.length,height:l?Ce.itemHeight*Xe.length:Ce.itemHeight,tabs:at,spacing:S,vertical:l,backgroundColor:k,rollBackgroundColor:m,downBackgroundColor:A,selectedBackgroundColor:D,selectedRollBackgroundColor:C,color:X,rollColor:Z,downColor:V,selectedColor:O,selectedRollColor:ne,backdropColor:E,currentEnabled:!0,currentSelected:f,align:d,valign:p,labelAlign:_,labelValign:P,labelIndent:T,labelIndentH:R,labelIndentV:b,indent:L,useTap:!0,excludeCustomTap:ue,keyWrap:!1,keyEnabled:Be,style:He,group:it,inherit:Rt}).siz(l?t-ge*2:null,l?null:r-ye*2).mov(l?0:ge,l?ye:0),Ce.add(ct),e.loop(ct.labels,function(Pt){Pt&&(Pt.backgroundColor=e.clear)})}At(e.copy(Xe,We)),gt&&Ce.on("scrolling",function(){var at=Ce.tabs.localToLocal(0,0,Ce);l&&(at.y>=-Ce.tabs.buttons[0].height&&(Ce.tabs.y-=Ce.tabs.height/2+S/2),at.y-Ce.tabs.buttons[Ce.tabs.buttons.length-1].height<=r-Ce.tabs.height&&(Ce.tabs.y+=Ce.tabs.height/2+S/2))});function bt(at,Pt,Dt){at.listZID=Pt,at.label&&(Ge&&new e.Rectangle(pt*(Dt.level+1),at.height).alp(Ge).pos(0,0,Ce.align=="right",!1,at),et&&new e.Rectangle(at.width,at.height).alp((Dt.level+1)*et).addTo(at).bot().ord(1),pt&&Ce.align!="center"&&(at.label.x+=(Ce.align=="right"?-1:1)*pt*(Dt.level+1)));var Ut=ot.getData(Pt);Ut.obj=at,Ut.list&&!e.isEmpty(Ut.list)&&(at.expander=new e.Label({size:nt=="arrow"?22:36,text:Ut.open?nt=="arrow"?"\u25B2":"-":nt=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(X,"rgba",.6)}).center(at).alp(nt=="none"?0:.7).pos(15,null,Ce.align!="right").mov(0,Ut.open?-3:0))}function Ft(){if(!(!Ce.selected||!Ce.selected.expander)){var at=ot.getData(Ce.selected.listZID),Pt;if(at.open){Ce.selected.expander&&(Ce.selected.expander.text=nt=="arrow"?"\u25BC":"+",Ce.selected.expander.mov(0,3)),at.open=!1;var Dt=ot.getNextSibling(Ce.selected.listZID),Ut;n(Dt)?Ut=Ce.items.length-1:Ut=e.loop(Ce.items,function(Jt,cn){if(Jt.listZID==Dt)return cn-1}),tt?(Pt=0,Ce.enabled=!1,e.interval(tt,function(Jt){Ce.removeAt(1,Ce.selectedIndex+Ut-Ce.selectedIndex-Pt),Pt++,Jt.total==Jt.count+1&&(Ce.enabled=!0,Ce.dispatchEvent("collapsed"))},Ut-Ce.selectedIndex,!0)):(Ce.removeAt(Ut-Ce.selectedIndex,Ce.selectedIndex+1),Ce.dispatchEvent("collapsed"))}else{at.open=!0,Ce.selected.expander&&(Ce.selected.expander.text=nt=="arrow"?"\u25B2":"-",Ce.selected.expander.mov(0,-3));var Gt=ot.getLinearList(at.list),wt=ot.getLinearIDs(at.list),Bt;if(at.opened)Array.isArray(Gt)&&(Le?(Pt=0,Ce.enabled=!1,e.interval(Le,function(Jt){Ce.addAt(Gt[Pt],Ce.selectedIndex+1+Pt),Bt=new je.Event("bloom"),Bt.item=Gt[Pt],Ce.dispatchEvent(Bt),Jt.total==Jt.count+1&&(Ce.enabled=!0,Bt=new je.Event("expanded"),Bt.items=Gt,Ce.dispatchEvent(Bt)),Pt++},Gt.length,!0)):(Ce.addAt(Gt,Ce.selectedIndex+1),Bt=new je.Event("expanded"),Bt.items=Gt,Ce.dispatchEvent(Bt)));else{at.opened=!0;var Ht=Tt[at.level];n(Ht)&&(Ht={}),Array.isArray(Gt)&&(Le?(Pt=0,Ce.enabled=!1,e.interval(Le,function(Jt){Ce.addAt(Gt[Pt],Ce.selectedIndex+1+Pt,{backgroundColor:Ht.backgroundColor,color:Ht.color,rollBackgroundColor:Ht.rollBackgroundColor,rollColor:Ht.rollColor,selectedBackgroundColor:Ht.selectedBackgroundColor,selectedColor:Ht.selectedColor,selectedRollBackgroundColor:Ht.selectedRollBackgroundColor,selectedRollColor:Ht.selectedRollColor});var cn=wt[Pt],jt=Ce.items[Ce.selectedIndex+1+Pt];Ht.borderColor&&(jt.borderColor=Ht.borderColor),bt(jt,cn,at),jt.label&&(jt.label.backgroundColor=e.clear),Bt=new je.Event("bloom"),Bt.item=jt,Ce.dispatchEvent(Bt),Jt.total==Jt.count+1&&(Ce.enabled=!0,Bt=new je.Event("expanded"),Bt.items=Gt,Ce.dispatchEvent(Bt)),Pt++,Ce.stage&&Ce.stage.update()},Gt.length,!0)):(Ce.addAt(Gt,Ce.selectedIndex+1,{backgroundColor:Ht.backgroundColor,color:Ht.color,rollBackgroundColor:Ht.rollBackgroundColor,rollColor:Ht.rollColor,selectedBackgroundColor:Ht.selectedBackgroundColor,selectedColor:Ht.selectedColor,selectedRollBackgroundColor:Ht.selectedRollBackgroundColor,selectedRollColor:Ht.selectedRollColor}),e.loop(wt,function(Jt,cn){var jt=Ce.items[Ce.selectedIndex+1+cn];bt(jt,Jt,at),jt.label&&(jt.label.backgroundColor=e.clear)}),Bt=new je.Event("expanded"),Bt.items=Gt,Ce.dispatchEvent(Bt)))}}}}Ce.expandList=function(at){return Ce.selectedIndex=at,Ce.selected&&Ft(),Ce.selected};var Yt;if(ot){De&&Ce.added(function(at){Yt=at,Ce.stageToggleEvent=Yt.on("stagemousedown",function(){var Pt=Yt.getObjectUnderPoint(Yt.frame.mouseX,Yt.frame.mouseY);if(!(Pt&&Ce.contains(Pt))&&!(!Ce.enabled||!Ce.selected)){var Dt=ot.getData(Ce.selected.listZID);Dt.open&&Ft()}})});var $t=ot.getLinearIDs();e.loop($t,function(at,Pt){Ce.tabs.buttons[Pt].listZID=at}),e.loop(Ce.tabs.buttons,function(at){var Pt=ot.getData(at.listZID);e.isEmpty(Pt.list)||(at.expander=new e.Label({size:nt=="arrow"?22:36,text:nt=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(X,"rgba",.6)}).center(at).alp(nt=="none"?0:.7).pos(15,null,Ce.align!="right"))});var sn=vt;Ce.toggle=function(at){if(n(at))at=!sn;else if(at==sn)return;Ce.selectedIndex=0,sn=at,Ft()},Object.defineProperty(Ce,"toggled",{get:function(){return sn},set:function(at){sn!=at&&Ce.toggle()}}),Ce.tap(Ft)}var nn;ct.tap(function(at){at.target.selectedIndex!=Ce.selectedIndex&&(Ce.selectedIndex=ct.selectedIndex,Ce.dispatchEvent("change"),De&&(Ce.selectedIndex=0),at.preventDefault())}),ct.on("keychange",function(at){if(at.target.selectedIndex!=Ce.selectedIndex){Ce.selectedIndex=ct.selectedIndex;var Pt;setTimeout(function(){l?(Pt=Ce.selected.y+Ce.scrollY,(Pt<0||Pt>Ce.height-Ce.selected.height)&&Ce.animateTo(Ce.selectedIndex,Ze=="ms"?100:.1)):(Pt=Ce.selected.x+Ce.scrollX,(Pt<0||Pt>Ce.width-Ce.selected.width)&&Ce.animateTo(Ce.selectedIndex,Ze=="ms"?100:.1))},100),Ce.dispatchEvent("change")}}),this.getItemIndex=function(at){return Ce.items.indexOf(at)},this.animateTo=function(at,Pt){n(at)&&(at=0),n(Pt)&&(Pt=.05);var Dt=g(Pt);Ce.selectedIndex=at;var Ut=Ot(at),Gt;return l?(Gt=Math.abs(Ce.scrollY-Ut)/Ce.itemHeight,Ce.animate({scrollY:Ut},Gt*Pt/(Dt=="s"?1:1e3))):(Gt=Math.abs(Ce.scrollX-Ut)/Ce.itemWidth,Ce.animate({scrollX:Ut},Gt*Pt/(Dt=="s"?1:1e3))),Ce},this.addAt=function(at,Pt,Dt,Ut){if(n(at))return Ce;if(Ce.tabs.loop(function(wt){wt.visible=!0}),at.type=="ListItem"?at.width=t-S*2:Array.isArray(at)&&e.loop(at,function(wt){wt.type=="ListItem"&&(wt.width=t-S*2)}),Ut)if(Array.isArray(at)){var Gt=[];e.loop(at,function(wt){wt.clone?Gt.push(at.clone()):Gt.push(e.copy(at,Ut))}),Ce.tabs.addAt(Gt,Pt,Dt)}else at.clone?Ce.tabs.addAt(at.clone(),Pt,Dt):Ce.tabs.addAt(e.copy(at,Ut),Pt,Dt);else Te&&(Array.isArray(at)||(at=[at]),e.loop(at,function(wt,Bt){typeof wt=="string"&&(at[Bt]=e.List.checkItem(wt,null,t,"left",10,10,S,X,Z,O,ne,k,m,D,C))})),Ce.tabs.addAt(at,Pt,Dt);return Ce.update(),Ce},this.removeAt=function(at,Pt){gt&&Ce.tabs.removeAt(at,Pt+i.length),Ce.tabs.removeAt(at,Pt),Ce.tabs.loop(function(Ut){Ut.visible=!0}),nn=Ce.tabs.selectedIndex;var Dt=ct.getBounds();return ct.setBounds(0,0,Dt.width,Dt.height),Dt.height<r&&(Ce.scrollY=0),Ce.update(),Ce},Xe[0]=="%-&"&&Xe.length==1&&Ce.removeAt(1,0),this.clear=function(){return Ce.tabs.removeAt(Ce.length,0),Ce.contentContainer.x=0,Ce.contentContainer.y=0,Ce.update(),Ce},this.setCheck=function(at,Pt){n(at)&&(at=0),n(Pt)&&(Pt=!0),Ce.items[at].checkBox.checked=Pt,Ce.items[at].content.zimOut()},this.getCheck=function(at){return n(at)&&(at=0),Ce.items[at].checkBox.checked},this.setChecks=function(at){return e.loop(Ce.items,function(Pt){Pt.checkBox.checked=at,Pt.content.zimOut()}),Ce},Object.defineProperty(Ce,"items",{get:function(){return Ce.tabs.buttons},set:function(){kt&&ht("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Ce,"list",{get:function(){return Ce.tabs.buttons},set:function(){kt&&ht("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Ce,"length",{get:function(){return Ce.tabs.buttons.length},set:function(){kt&&ht("List() - length is read only")}}),Object.defineProperty(Ce,"selectedIndex",{get:function(){return gt?(nn+i.length)%i.length:nn},set:function(at){ct.selectedIndex=at,Ce.label=ct.label,Ce.selected=ct.selected,nn=at,!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Ce.stage&&Ce.stage.update()}}),f&&(Ce.selectedIndex=0),Object.defineProperty(Ce,"selectedIndexPlusPosition",{get:function(){return gt?(nn+i.length)%i.length:nn},set:function(at){Ce.selectedIndex=at,nn=at,l?Ce.scrollY=Ot(at)-2:Ce.scrollX=Ot(at),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Ce.stage&&Ce.stage.update()}});function Ot(at){if(l){var Pt=-(Ce.itemHeight+S)*at+r/2-Ce.itemHeight/2;return(Ce.itemHeight+S)*Ce.length<r&&(Pt=0),Pt>0&&(Pt=0),(Ce.itemHeight+S)*Ce.length>r&&Pt<-Ce.tabs.height+r-ye*2&&(Pt=-Ce.tabs.height+r-ye*2),Pt}else{var Dt=-(Ce.itemWidth+S)*at+t/2-Ce.itemWidth/2;return(Ce.itemWidth+S)*Ce.length<t&&(Dt=0),Dt>0&&(Dt=0),(Ce.itemWidth+S)*Ce.length>t&&Dt<-Ce.tabs.width+t-ge*2&&(Dt=-Ce.tabs.width+t-ge*2),Dt}}Object.defineProperty(Ce,"text",{get:function(){return Ce.label?Ce.label.text:null},set:function(at){Ce.label&&(Ce.label.text=at)}}),Object.defineProperty(Ce,"bloom",{get:function(){return Le},set:function(at){Le=at}}),Object.defineProperty(Ce,"currentValue",{get:function(){return Ce.label?Ce.label.text:null},set:function(at){var Pt=e.loop(Ce.list,function(Dt,Ut){var Gt;Dt.label&&(Gt=Dt.label.text),Dt.type=="Label"&&(Gt=Dt.text);var wt=new RegExp(at,"i");if(Gt&&Gt.match(wt))return Ut});Pt!==!0&&(Ce.selectedIndexPlusPosition=Pt)}}),Object.defineProperty(Ce,"itemDown",{get:function(){return Ce.tabs.buttonDown},set:function(){}}),Object.defineProperty(Ce,"itemsText",{get:function(){for(var at=[],Pt=0;Pt<Ce.tabs.buttons.length;Pt++){var Dt=Ce.tabs.buttons[Pt].label;Dt&&!n(Dt.text)?at.push(Dt.text):at.push(null)}return at},set:function(){kt&&ht("List() - itemsText is read only")}}),f&&(Ce.selectedIndex=0),Object.defineProperty(Ce,"checkBoxes",{get:function(){for(var at=[],Pt=0;Pt<Ce.tabs.buttons.length;Pt++){var Dt=Ce.tabs.buttons[Pt].checkBox;at.push(Dt)}return at},set:function(){kt&&ht("List() - checkBoxes is read only")}}),Object.defineProperty(Ce,"accordionIndex",{get:function(){var at=Ce.selected.listZID;return at?Number(at.split("id")[1]):null},set:function(){kt&&ht("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},this.openAtLevel=function(at){if(!n(at)){var Pt=[];e.loop(at,function(Ut){Pt.push(Ut)});var Dt=Ce.bloom;Ce.bloom=!1,e.interval(.01,function(Ut){var Gt=Ce.items[Ut.count];Gt?Pt.indexOf(Ce.tree.getData(Gt.listZID).level)!=-1&&Ce.expandList(Ut.count):(Ut.clear(),Ce.bloom=Dt)},null,!0,!1,"s")}};var Zt;this.openAtNum=function(at){if(!n(at)){if(!Zt){let Jt=function(cn,jt){for(Pt in cn)Zt[Pt]=jt,Jt(cn[Pt].list,Pt)};var Pt;Zt={},Jt(Ce.tree.data);var Dt={};for(var Ut in Zt){Dt[Ut]||(Dt[Ut]=[]);for(var Gt=Zt[Ut];Gt;)Dt[Ut].unshift(Gt),Gt=Zt[Gt];Dt[Ut].push(Ut)}}var wt="id"+at,Bt=Dt[wt],Ht=Ce.bloom;Ce.bloom=!1,Fi(.01,function(Jt){var cn=Ce.items[Jt.count];cn?Bt.indexOf(cn.listZID)!=-1&&Ce.expandList(Jt.count):(Jt.clear(),Ce.bloom=Ht)},null,!0,!1,"s")}},vt&&Ft&&Ce.openAtLevel(1e4),n(Ye)&&(Ye=me.selectedIndex!=null?me.selectedIndex:0),Ce.selectedIndex=Ye,He!==!1&&e.styleTransforms(this,me),this.clone=function(){return Ce.cloneProps(new e.List(t,ze,e.copy(Ce.originalList,!0),o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,Je,rt,U,e.copy(z),ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we,ke,pe,Me,Ue,ue,Ee,Te,_e,We,oe,Ye,Ve,De,de,Be,Qe,Ke,lt,gt,He,this.group,ft))},this.dispose=function(at,Pt,Dt){return Dt||(Ce.stageToggleEvent&&Yt.off("stagemousedown",Ce.stageToggleEvent),Ce.organizer&&Ce.organizer.dispose(),this.zimWindow_dispose()),!0}},e.extend(e.List,e.Window,["clone","dispose"],"zimWindow",!1),e.List.makeBase=function(t,r,i,o){n(o)&&(o=e.dark),t.backing=new e.Rectangle(t.width,t.height,o).center(t),r.type=="Label"?t.label=r:t.label=new e.Label(r,null,null,e.white),t.text=t.label.text,t.label.center(t).loc(i)},e.List.slider=function(t,r,i,o,l,f,d,p,_,P,T,R,b){var L="label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor",S;if(S=mt(e.List.slider,arguments,L))return S;var k=new e.Container(620,100);return k.type="ListItem",k.listItem="Slider",n(_)&&(_=20),n(P)&&(P=30),n(T)&&(T=1),n(R)&&(R=0),e.List.makeBase(k,t,_,b),k.slider=new e.Slider({inside:!0,barWidth:40,barLength:150,barColor:e.blue,min:r,max:i,step:f}).sca(1.5).center(k).mov(20).change(function(){k.stepper.currentValue=R+Math.round(k.slider.currentValue*T*1e3)/1e3,d&&p&&(d[p]=k.slider.currentValue),l&&typeof l=="function"&&l(k.slider.currentValue,k.parent),k.slider.stage&&k.slider.stage.update()}),n(o)||(k.slider.currentValue=o),k.stepper=new e.Stepper({corner:0,arrows:!1,stepperType:"number",min:R+r*T,max:R+i*T,step:f}).center(k).pos(P,null,!0).change(function(){}),n(o)||(k.stepper.currentValue=R+o*T),k},e.List.checkBox=function(t,r,i,o,l,f,d,p){var _="label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor",P;if(P=mt(e.List.checkBox,arguments,_))return P;var T=new e.Container(620,100);return T.type="ListItem",T.listItem="CheckBox",n(f)&&(f=20),n(d)&&(d=30),e.List.makeBase(T,t,f,p),T.checkBox=new e.CheckBox({startChecked:r,label:""}).sca(1.2).center(T).pos(256+d,null,!0).change(function(){o&&l&&(o[l]=T.checkBox.checked),i&&typeof i=="function"&&i(T.checkBox.checked,T.parent),T.checkBox.stage&&T.checkBox.stage.update()}),T},e.List.colorPicker=function(t,r,i,o,l,f,d,p,_){var P="label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor",T;if(T=mt(e.List.colorPicker,arguments,P))return T;var R=new e.Container(620,100);return R.type="ListItem",R.listItem="ColorPicker",n(d)&&(d=20),n(p)&&(p=30),e.List.makeBase(R,t,d,_),n(r)&&(r=e.pink),R.colorPicker=i||new e.ColorPicker({alphaPicker:!1,selectedColor:r}),R.swatch=new e.Rectangle(132,66,r,e.lighter,5).center(R).pos(270,null,!0).cur(),R.swatch.on("mousedown",function(){R.colorPicker.selectedColor=R.swatch.color,R.colorPicker.show()}),R.colorLabel=new e.Label(R.swatch.color.toUpperCase(),40,null,e.light).center(R).pos(p,null,!0),R.colorPicker.on("close",function(){var b=R.colorPicker.stage;R.colorPicker.hide(),b&&b.update()}),R.colorPicker.on("change",function(){var b=R.colorPicker.stage;R.swatch.color=R.colorPicker.selectedColor,R.colorLabel.text=R.swatch.color.toUpperCase(),R.colorPicker.hide(),l&&f&&(l[f]=R.colorPicker.selectedColor),o&&typeof o=="function"&&o(R.colorPicker.selectedColor,R.parent),b&&b.update()}),R},e.List.checkItem=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m){var A="label, size, width, align, paddingH, paddingV, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit",D;if(D=mt(e.List.checkItem,arguments,A))return D;var C=e.getStyle("CheckBox",k,m);n(r)&&(r=C.size!=null?C.size:20);var E=e.getStyle("List",k,m);n(i)&&(i=300),n(l)&&(l=10),n(f)&&(f=10),n(o)&&(o=E.align!=null?E.align:"center"),n(d)&&(d=E.spacing!=null?E.spacing:2),n(R)&&(R=E.backgroundColor!=null?E.backgroundColor:e.tin),n(b)&&(b=E.rollBackgroundColor!=null?E.rollBackgroundColor:e.grey),n(L)&&(L=E.selectedBackgroundColor!=null?E.selectedBackgroundColor:e.charcoal),n(S)&&(S=E.selectedRollBackgroundColor!=null?E.selectedRollBackgroundColor:e.grey),n(p)&&(p=E.color!=null?E.color:e.white),n(_)&&(_=E.rollColor!=null?E.rollColor:p),n(P)&&(P=E.selectedColor!=null?E.selectedColor:p),n(T)&&(T=E.selectedRollColor!=null?E.selectedRollColor:_);var X=new e.Container;return X.type="CheckItem",X.checkBox=new e.CheckBox({size:r,label:t,color:p,tap:!0}),X.backing=new e.Rectangle(i-d*2,X.checkBox.height+f*2,R).addTo(X),X.checkBox.center(X),o!="center"&&o!="middle"&&X.checkBox.pos(l,null,o=="right"),X.backing.tap(function(){X.checkBox.toggle(),X.zimOut()}),X.checkBox.change(function(){X.zimOut()}),X.zimOver=function(){X.backing.color=X.checkBox.checked?S:b,X.checkBox.label.color=X.checkBox.checked?T:_,X.stage&&X.stage.update()},X.zimOut=function(){X.backing.color=X.checkBox.checked?L:R,X.checkBox.label.color=X.checkBox.checked?P:p,X.stage&&X.stage.update()},X.backing.on("mouseover",X.zimOver),X.checkBox.on("mouseover",X.zimOver),X.backing.on("mouseout",X.zimOut),X.checkBox.on("mouseout",X.zimOut),X},e.Stepper=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I){var Q="list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, currentValue, arrowColor, arrowScale, style, group, inherit",x;if(x=mt(e.Stepper,arguments,Q,this))return x;qe("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=h;var F=w===!1?{}:e.getStyle(this.type,this.group,I);n(t)&&(t=F.list!=null?F.list:[]),n(r)&&(r=F.width!=null?F.width:100),n(i)&&(i=F.backgroundColor!=null?F.backgroundColor:e.white),n(o)&&(o=F.borderColor!=null?F.borderColor:null),n(l)&&(l=F.borderWidth!=null?F.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(d)&&(d=F.color!=null?F.color:e.grey),n(f)&&(f=F.label!=null?F.label:""),(typeof f=="string"||typeof f=="number")&&(f=new e.Label({text:f,size:F.size!=null?F.size*2:40,color:d,align:F.align!=null?F.align:"center",valign:F.valign!=null?F.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),n(p)&&(p=F.vertical!=null?F.vertical:!1),n(_)&&(_=F.arrows!=null?F.arrows:!0),n(P)&&(P=F.corner!=null?F.corner:16),n(T)&&(T=F.shadowColor!=null?F.shadowColor:"rgba(0,0,0,.3)"),n(R)&&(R=F.shadowBlur!=null?F.shadowBlur:14),n(b)&&(b=F.continuous!=null?F.continuous:!1),n(L)&&(L=F.display!=null?F.display:!0),n(S)&&(S=F.press!=null?F.press:!0),n(k)&&(k=F.hold!=null?F.hold:!0);var Ae=g(m);n(m)&&(m=F.holdDelay!=null?F.holdDelay:Ae=="s"?.4:400),n(A)&&(A=F.holdSpeed!=null?F.holdSpeed:Ae=="s"?.2:200),a(A,Ae),n(D)&&(D=F.draggable!=null?F.draggable:!0),(n(C)||C<=0)&&(C=F.dragSensitivity!=null?F.dragSensitivity:.1),n(E)&&(E=F.dragRange!=null?F.dragRange:200),n(X)&&(X=F.stepperType!=null?F.stepperType:t.length>0?"list":"number"),n(Z)&&(Z=F.min!=null?F.min:0),n(V)&&(V=F.max!=null?F.max:10),n(O)&&(O=F.step!=null?F.step:1),n(ne)&&(ne=F.step2!=null?F.step2:O),n(N)&&ne!=O&&X=="number"&&(N=F.arrows2!=null?F.arrows2:!0),n(q)&&(q=F.arrows2Scale!=null?F.arrows2Scale:.5),n(U)&&(U=F.keyEnabled!=null?F.keyEnabled:!0),n(z)&&(z=F.keyArrows!=null?F.keyArrows:!0),n(ie)&&(ie=F.rightForward!=null?F.rightForward:!0),n(ae)&&(ae=F.downForward!=null?F.downForward:X!="number"),n(G)&&(G=F.arrowColor!=null?F.arrowColor:i),n(v)&&(v=F.arrowScale!=null?F.arrowScale:1);var Y=this,K,ge=60,ye=ge/4;i=dt(i);var ee=O,ce,ve=1,Re;if(X=="number"){if(Z=Number(Z),V=Number(V),isNaN(Z)&&(Z=0),isNaN(V)&&(V=100),V<Z){ve=-1;var se=V;V=Z,Z=se,ce=V}else ce=Z;this.min=Z,this.max=V,0>Z&&0<V&&(ce=0),O=Math.abs(O),Re=Math.max(xe(O),xe(ne))}else if(X=="letter"){t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),typeof Z!="string"&&(Z="A"),typeof V!="string"&&(V="Z"),Z=Z.substr(0,1).toUpperCase(),V=V.substr(0,1).toUpperCase();var Oe=t.indexOf(Z);Oe<0&&(Z="A",Oe=0);var J=t.indexOf(V);J<0&&(V="Z",J=t.length),J<Oe&&(t.reverse(),Oe=t.length-1-Oe,J=t.length-1-J),t=t.splice(Oe,J-Oe+1)}else X="list";function xe(Je){var rt=String(Je).split(".")[1];return rt?rt=rt.length:rt=0,rt}var te,we=0,ke=0;D&&this.on("mousedown",function(Je){Y.zimAccessibility&&Y.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,we=Je.rawX/e.scaX,ke=Je.rawY/e.scaY,te=this.stage.on("stagemousemove",function(rt){we=rt.rawX/e.scaX,ke=rt.rawY/e.scaY}))},null,!0),this.label=f,f.mouseChildren=!1,f.mouseEnabled=!1;var pe,Me,Ue,ue,Ee,Te,_e,We,oe,Ye,Ve,De,de;if(_&&(Ue=this.containerPrev=new e.Container({style:!1}),this.addChild(Ue),ue=this.arrowPrev=new e.Triangle(ge,ge*.8,ge*.8,G,null,null,null,null,null,null,null,!1).sca(v),T!=-1&&R>0&&(Ue.shadow=new je.Shadow(T,3,3,R)),Ue.addChild(ue),Ue.expand(),Ue.cur("pointer"),Ue.on("mousedown",function(Je){if(!(Y.zimAccessibility&&Y.zimAccessibility.aria)){ee=O;var rt=p?ae?1:-1:ie?-1:1;gt(rt),Ke(rt,null,null,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&Ue.on("pressup",lt),p?(Ue.rotation=180,Ue.x=r/2,L?Ue.y=Ue.height+ye+ge+Ue.height/2+ye:Ue.y=Ue.height*2):(Ue.rotation=-90,Ue.x=Ue.height/2,Ue.y=ge/2)),L){var Be=this.textBox=new e.Rectangle(r,ge,i,o,l,P,null,null,null,!1);Be.cur("pointer"),this.addChild(Be),T!=-1&&R>0&&(Be.shadow=new je.Shadow(T,3,3,R)),_&&(p?_&&(Be.y=ue.height+ye):_&&(Be.x=ue.height+ye)),this.addChild(f),t.length>0&&(K=0,f.text=t[K]),f.center(Y);var Qe;Be.on("mousedown",function(Je){Y.zimAccessibility&&Y.zimAccessibility.aria||(Qe=Y.currentValue,S&&gt(1),Ke(1,!0,null,Je.stageX/e.scaX,Je.stageY/e.scaY))}),Be.on("pressup",function(){Y.zimAccessibility&&Y.zimAccessibility.aria})}else t.length>0&&(K=0);_&&(Ee=this.containerNext=new e.Container({style:!1}),this.addChild(Ee),Te=this.arrowNext=new e.Triangle(ge,ge*.8,ge*.8,G,null,null,null,null,null,null,null,!1).sca(v),T!=-1&&R>0&&(Ee.shadow=new je.Shadow(T,3,3,R)),Ee.addChild(Te),Ee.expand(),Ee.cur("pointer"),Ee.on("mousedown",function(Je){if(!(Y.zimAccessibility&&Y.zimAccessibility.aria)){ee=O;var rt=p?ae?-1:1:ie?1:-1;gt(rt),Ke(rt,null,null,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&Ee.on("pressup",lt),p?(Ee.rotation=0,Ee.x=r/2,Ee.y=Ee.getBounds().height/2):(Ee.rotation=90,L?Ee.x=Be.x+Be.getBounds().width+Ee.getBounds().height/2+ye:Ee.x=Ue.x+Ue.getBounds().width,Ee.y=ge/2));function Ke(Je,rt,Ce,ze,Xe){if(k){Ve=ze,De=Xe,Ve==0&&(Ve=1),De==0&&(De=1),D||(C=1);var Ze=A*(Ae=="s"?1e3:1),ot=m*(Ae=="s"?1e3:1),Ge=Ze;de=new e.Proportion(0,E,Ze,Ze*C),pe=setTimeout(function(){function et(){Me=setTimeout(function(){var pt=Je;if(D){var Le=Math.abs(we-Ve),tt=Math.abs(ke-De);p?(!rt&&!Ce&&(Le=0),Ce&&(tt=0)):(!rt&&!Ce&&(tt=0),Ce&&(Le=0)),(Le>=10||tt>=10)&&(Le>tt?(ee=p?ne:O,pt=we-Ve>0?1:-1,ie||pt*-1,Ge=de.convert(Math.abs(Ve-we))):(ee=p?O:ne,pt=ke-De>0?1:-1,(X=="number"||!ae)&&(pt*=-1),Ge=de.convert(Math.abs(De-ke))))}gt(pt),et()},Ge)}et()},ot)}}k&&L&&Be.on("pressup",lt);function lt(){Y.zimAccessibility&&Y.zimAccessibility.aria||(clearTimeout(pe),clearTimeout(Me))}N&&(_e=this.prev2=new e.Container({style:!1}),We=this.arrowPrev2=new e.Triangle(ge,ge*.8,ge*.8,"rgba(0,0,0,.2)",G,2,null,null,null,null,null,!1),_e.addChild(We),_e.expand(),_e.cur("pointer"),_e.sca(q),_e.alpha=.5,_e.on("mousedown",function(Je){if(!(Y.zimAccessibility&&Y.zimAccessibility.aria)){ee=ne;var rt=p?ie?-1:1:ae?1:-1;gt(rt),Ke(rt,null,!0,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&_e.on("pressup",lt),oe=this.next2=new e.Container({style:!1}),Ye=this.arrowNext2=new e.Triangle(ge,ge*.8,ge*.8,"rgba(0,0,0,.2)",G,2,null,null,null,null,null,!1),oe.addChild(Ye),oe.expand(),oe.cur("pointer"),oe.sca(q),oe.alpha=.5,oe.on("mousedown",function(Je){if(!(Y.zimAccessibility&&Y.zimAccessibility.aria)){ee=ne;var rt=p?ie?1:-1:ae?-1:1;gt(rt),Ke(rt,null,!0,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&oe.on("pressup",lt),p?(_e.y=this.height/2,_e.x=-_e.width/2-ye*Math.max(.2,Math.min(1,q)),_e.rotation=270,oe.y=this.height/2,oe.x=this.width+oe.width/2+ye*Math.max(.2,Math.min(1,q)),oe.rotation=90):(oe.x=this.width/2,oe.y=-oe.height/2-ye*Math.max(.2,Math.min(1,q)),oe.rotation=0,_e.x=this.width/2,_e.y=this.height+_e.height/2+ye*Math.max(.2,Math.min(1,q)),_e.rotation=180),this.addChild(_e,oe)),Object.defineProperty(this,"stepperArray",{get:function(){if(X=="number"){t=[];for(var Je=Y.min;Je<=Y.max;Je+=Math.min(O,ne))t.push(Number(e.decimals(Je,Re,null,!1)));t.push(V)}return t},set:function(Je){t=Je;var rt=Y.selectedIndex;Y.selectedIndex=rt}}),Object.defineProperty(this,"min",{get:function(){return Z},set:function(Je){if(X=="number"){Y.currentValue<Je&&(Y.currentValue=Je),Z=Je;var rt=Y.selectedIndex;Y.selectedIndex=rt}else Z=Je}}),Object.defineProperty(this,"max",{get:function(){return V},set:function(Je){if(X=="number"){Y.currentValue>Je&&(Y.currentValue=Je),V=Je;var rt=Y.selectedIndex;Y.selectedIndex=rt}else V=Je}}),ft(X=="number"?ce:t[K],X=="number"?ce:K);function gt(Je){var rt;if(X=="number"){ce=Number(ce);var Ce=ce;ce+=Number(ee*Je*ve),ce=e.decimals(ce,Re),b?ce>Y.max?ce=Y.min:ce<Y.min&&(ce=Y.max):(ce>Y.max?(ce=O==1?Y.max:Ce,L&&Be.cur("default")):L&&Be.cur("pointer"),ce<Y.min&&(ce=O==1?Y.min:Ce))}else{if(rt=K+Je,b)rt>t.length-1&&(rt=0),rt<0&&(rt=t.length-1);else{if(rt>t.length-1){L&&Be.cur("default");return}else L&&Be.cur("pointer");if(rt<0)return}K=rt}ft(X=="number"?ce:t[K],X=="number"?ce:K),Y.currentValue!=Qe&&Y.dispatchEvent("change"),Qe=Y.currentValue}Object.defineProperty(this,"selectedIndex",{get:function(){return X=="number"?Y.stepperArray.indexOf(Y.currentValue):K},set:function(Je){n(Je)||(X=="number"?(K=Math.min(Y.stepperArray.length-1,Math.max(0,Je)),ce=Y.stepperArray[K],ft(ce,ce)):(Je=Math.min(t.length-1,Math.max(0,Je)),K=Je,ft(t[K],K)))}}),Object.defineProperty(this,"currentValue",{get:function(){return X=="number"?Number(ce):t[K]},set:function(Je){if(!n(Je))if(X=="number"){if(Je=Number(Je),Y.max>Y.min){if(Je>Y.max||Je<Y.min)return}else if(Je<Y.max||Je>Y.min)return;var rt=Y.stepperArray.indexOf(Je);if(rt<0)return;K=rt,ce=Number(Y.stepperArray[K]),ft(ce,ce)}else{if(t.indexOf(Je)>-1)Je=t.indexOf(Je);else return;if(Je==Y.selectedIndex)return;K=Je,ft(t[K],K)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return Y.currentValue},set:function(Je){String(Je)!=String(Y.currentValue)&&(Y.currentValue=Je,Y.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return b},set:function(Je){b=Je,X=="number"?ft(ce,ce):ft(t[Y.selectedIndex],Y.selectedIndex)}}),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(Je){c(Y,Je),Je?(X=="number"?ft(ce,ce):ft(t[Y.selectedIndex],Y.selectedIndex),fe.addEventListener("keydown",Y.keyDownEvent)):(Se(),Fe(),fe.removeEventListener("keydown",Y.keyDownEvent),L&&(f.mouseChildren=!1),L&&(f.mouseEnabled=!1)),Ee&&!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Ee.stage?Ee.stage.update():f&&!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&f.stage&&f.stage.update()}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==Y},set:function(){e.KEYFOCUS=Y}}),e.KEYFOCUS||He(),this.on("mousedown",function(){He()});function He(){Y.keyFocus=!0;var Je=document.activeElement;Je&&Je.blur()}function it(){Ue.alpha=1,ue.color=G,Ue.cur("pointer"),Ee.alpha=1,Te.color=G,Ee.cur("pointer"),b||(X=="number"?(K==Y.min&&(ve>0?Se():Fe()),K==Y.max&&(ve>0?Fe():Se())):(K==0&&(p?Fe():Se()),K==t.length-1&&(p?Se():Fe())))}function ft(Je,rt){K=rt,L&&(X=="number"&&Je!=0&&Re>0&&(Je=e.decimals(Je,Re,!0)),f.text=Je,f.center(Y)),_&&it(),Ee&&!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Ee.stage?Ee.stage.update():f&&!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&f.stage&&f.stage.update(),Y.zimAccessibility&&Y.zimAccessibility.changeTitle(Y,null,!0)}function Se(){_&&(Ue.alpha=.8,ue.color=e.fog,Ue.cur("default"))}function Fe(){_&&(Ee.alpha=.8,Te.color=e.fog,Ee.cur("default"))}var me,$e=!0,st="";this.on("mousedown",function(){$e=!0,st="",!(Y.zimAccessibility&&Y.zimAccessibility.aria)&&(Y.focus=!0,me=!1)}),this.keyDownEvent=function(Je){if(Y.stage&&(Y.zimAccessibility&&Y.focus||!Y.zimAccessibility&&Y.keyFocus)){Je||(Je=event);var rt=Je.keyCode;if(z&&rt>=37&&rt<=40){var Ce=ae?40:38,ze=ie?39:37,Xe=ae?38:40,Ze=ie?37:39;rt==Ce||rt==ze?(p&&rt==Ce||!p&&rt==ze?ee=O:ee=ne,gt(1)):(rt==Xe||rt==Ze)&&(p&&rt==Xe||!p&&rt==Ze?ee=O:ee=ne,gt(-1))}if(U)if(X=="number"){var ot=null,Ge=null;if(rt==8){var et=String(st).split("");et.pop(),ot=et.pop(),st=et.join("")}if(!Je.shiftKey&&rt>=48&&rt<=57?ot=rt-48:rt>=96&&rt<=105?ot=rt-96:rt==190?(st=String(st)+".",Ge=!0):rt==173||rt==189?(Y.currentValue=Y.currentValue*-1,Y.currentValue!=Qe&&Y.dispatchEvent("change"),Qe=Y.currentValue,me=!me):rt==46&&($e=!0,st=""),n(ot)&&n(Ge)){$e=!0,st="";return}if(n(ot)||($e?($e=!1,st=ot):st=ot=+(st+""+ot),ot<Z||ot>V))return;Y.currentValue=ot,Y.currentValue!=Qe&&Y.dispatchEvent("change"),Qe=Y.currentValue}else $e=!0,st="",Y.currentValue=String.fromCharCode(Je.keyCode),Y.currentValue!=Qe&&Y.dispatchEvent("change"),Qe=Y.currentValue}},fe.addEventListener("keydown",this.keyDownEvent),this.next=function(){gt(1)},this.prev=function(){gt(-1)},n(he)&&(he=F.selectedIndex!=null?F.selectedIndex:0),Y.selectedIndex=he,n($)&&($=F.currentValue!=null?F.currentValue:null),n($)||(Y.currentValue=$),w!==!1&&e.styleTransforms(this,F),this.clone=function(){return Y.cloneProps(new e.Stepper(t,r,i,o,l,f.clone(),d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,this.group,I))},this.dispose=function(Je,rt,Ce){return fe.removeEventListener("keydown",Y.keyDownEvent),Y.removeAllEventListeners(),Y.stage&&Y.stage.off(te),Ce||this.zimContainer_dispose(!0),Ue=this.containerPrev=ue=this.arrowPrev=null,Ee=this.containerNext=Te=this.arrowNext=null,Be=this.textBox=f=this.label=null,!0}},e["zut"]=function(t){if(!n(t)&&t["key"])e.async("https://zimjs.com/gamdata.php?id="+t["key"]+"&player="+t["player"]+"&score="+t["score"]+"&reverse="+t["info"]["reverse"]+"&total="+t["info"]["total"]+"&allowZero="+t["info"]["allowZero"],t["info"]["type"]);else return!0},e.extend(e.Stepper,e.Container,["clone","dispose"],"zimContainer",!1),e.Slider=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w){var h="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, labelColor, style, group, inherit",I;if(I=mt(e.Slider,arguments,h,this))return I;qe("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=v;var Q=G===!1?{}:e.getStyle(this.type,this.group,w);if(n(t)&&(t=Q.min!=null?Q.min:0),n(r)&&(r=Q.max!=null?Q.max:10),r-t==0){ht("ZIM Slider range must not be 0");return}n(C)&&(C=Q.sound!=null?Q.sound:!1),n(i)&&(i=Q.step!=null?Q.step:0),n(o)&&(o=Q.button!=null?Q.button:C?"aztec":null),o&&o.type=="Button"&&(o=o.clone()),n(l)&&(l=Q.barLength!=null?Q.barLength:300),n(f)&&(f=Q.barWidth!=null?Q.barWidth:3),n(d)&&(d=Q.barColor!=null?Q.barColor:C?e.lighter:e.granite),n(p)&&(p=Q.vertical!=null?Q.vertical:!!C),n(_)&&(_=Q.useTicks!=null?Q.useTicks:!!C),n(T)&&(T=Q.tickStep!=null?Q.tickStep:i||(_||C?(r-t)/40:0)),n(R)&&(R=Q.semiTicks!=null?Q.semiTicks:T?3:0),n(P)&&(P=Q.tickColor!=null?Q.tickColor:C?e.tin:d),n(b)&&(b=Q.tickScale!=null?Q.tickScale:C?1.25:1),n(L)&&(L=Q.semiTickScale!=null?Q.semiTickScale:1),n(S)&&(S=Q.accentSize!=null?Q.accentSize:C?10:0),n(k)&&(k=Q.accentOffset!=null?Q.accentOffset:C?-(S+f)/2:0),n(m)&&(m=Q.accentColor!=null?Q.accentColor:e.pink),n(A)&&(A=Q.accentBackgroundColor!=null?Q.accentBackgroundColor:C?e.blue:e.clear),n(D)&&(D=Q.accentDifference!=null?Q.accentDifference:-.5),n(E)&&(E=Q.inside!=null?Q.inside:!1),n(X)&&(X=Q.keyArrows!=null?Q.keyArrows:!0),n(V)&&(V=Q.keyArrowsH!=null?Q.keyArrowsH:!0),n(O)&&(O=Q.keyArrowsV!=null?Q.keyArrowsV:!0),n(Z)&&(Z=Q.keyArrowsStep!=null?Q.keyArrowsStep:(r-t)/100),n(ne)&&(ne=Q.damp!=null?Q.damp:!1),n(N)&&(N=Q.currentValue!=null?Q.currentValue:!1),n(q)&&(q=Q.expand!=null?Q.expand:e.mobile()?10:null),n(U)&&(U=Q.expandVertical!=null?Q.expandVertical:q),n(z)&&(z=Q.expandBar!=null?Q.expandBar:null),n(ie)&&(ie=Q.expandBarVertical!=null?Q.expandBarVertical:q),n(ae)&&(ae=Q.useLabels!=null?Q.useLabels:!1),n(he)&&(he=Q.labelMargin!=null?Q.labelMargin:20),n($)&&($=Q.labelColor!=null?Q.labelColor:e.dark);var x,F=this,Ae=Y(t,r,i,N);this.veeObj={min:Ae[0],max:Ae[1],step:Ae[2],currentValue:Ae[3]};function Y(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var K=i;N=e.Pick.choose(N);var ge;S&&(F.accentBacking=new e.Rectangle(l-.25,S+D,A).addTo(this).rot(p?90:0).mov(p?-k-f/2+D/2:.25,p?0:k+f/2-D/2),ge=F.accent=new e.Rectangle(l,S,m).sca(0,1).rot(p?-90:0).mov(p?-k-S-f/2:0,p?l:k+f/2).addTo(this));function ye(){ge.sca((F.currentValue-F.min)/Math.abs(F.max-F.min),1)}var ee=!(!n(Q.backing)&&Q.backing.type!="Pattern");function ce(Ge,et,pt){var Le=new e.Shape(et,pt);return Le.f(Ge).s(Q.borderColor!=null?Q.borderColor:e.tin).ss(Q.borderWidth!=null?Q.borderWidth:3).mt(2,0).lt(et+2,pt*.2).lt(et+2,pt*.8).lt(2,pt).cp().centerReg({add:!1}),Le}if(n(o)||typeof o=="string"){var ve=30,Re=40;p&&(ve=50,Re=40);var se;if(o=="pill"||o=="aztec"||o=="circle"||o=="grip"){if(o=="pill")se={width:p?40:18,height:p?18:40,borderColor:e.tin,borderWidth:3,corner:8};else if(o=="aztec"){ve=Q.width!=null?Q.width:Math.max(ve,Re)*.9,Re=Q.height!=null?Q.height:Math.min(ve,Re)*.6;var Oe=ce(Q.backgroundColor!=null?Q.backgroundColor:e.lighter,ve,Re).rot(p?0:-90),J=ce(Q.rollBackgroundColor!=null?Q.rollBackgroundColor:e.white,ve,Re).rot(p?0:-90);se={width:ve,height:Re,backing:Oe,rollBacking:J},Q.borderWidth=0,Q.borderColor=0}else o=="circle"&&(ve=Q.width!=null?Q.width:30,Re=Q.height!=null?Q.height:30,se={width:ve,height:ve,corner:Q.corner!=null?Q.corner:ve/2});F.buttonType=o}var xe=Q.borderColor!=null?Q.borderColor:se?se.borderColor:ee?e.granite:null;if(o=new e.Button({width:Q.width!=null?Q.width:se?se.width:ve,height:Q.height!=null?Q.height:se?se.height:Re,label:"",backgroundColor:Q.backgroundColor!=null?Q.backgroundColor:e.white,rollBackgroundColor:Q.rollBackgroundColor!=null?Q.rollBackgroundColor:n(Q.backgroundColor)||Q.backgroundColor==e.white?e.moon:Q.backgroundColor.lighten(.2),borderColor:xe,rollBorderColor:Q.rollBorderColor!=null?Q.rollBorderColor:xe,borderWidth:Q.borderWidth!=null?Q.borderWidth:se?se.borderWidth:ee?1:null,corner:Q.corner!=null?Q.corner:se?se.corner:0,backing:Q.backing!=null?Q.backing.clone():se?se.backing:null,rollBacking:Q.rollBacking!=null?Q.rollBacking.clone():se?se.rollBacking:null,shadowColor:Q.shadowColor!=null?Q.shadowColor:null,shadowBlur:Q.shadowBlur!=null?Q.shadowBlur:null,hitPadding:30,style:!1}),F.buttonType=="circle")o.scaleY=Re/ve,p||o.rot(-90);else if(F.buttonType=="grip"){var te=[1,1,1],we=.4;e.loop(te,function(Ge,et,pt){p?new e.Line(o.width*.62,Ge,o.borderColor?o.borderColor:e.grey).pos(0,o.height*we/2+(et+1)*(o.height*(1-we))/(pt+1),e.CENTER,e.TOP,o):new e.Line(o.height*.62,Ge,o.borderColor?o.borderColor:e.grey).rot(90).pos(o.width*we/2+(et+1)*(o.width*(1-we))/(pt+1),0,e.LEFT,e.CENTER,o)})}}o.rollPersist=!0,(!n(q)||!n(U))&&o.expand(q,U);var ke,pe;p?(ke=o.width,E?(pe=l,this.setBounds(0,0,ke,pe)):(pe=l+o.height,this.setBounds(-o.width/2,-o.height/2,ke,pe))):(pe=Math.max(o.height,f),E?(ke=l,this.setBounds(0,0,ke,pe)):(ke=l+o.width,this.setBounds(-o.width/2,-o.height/2,ke,pe)));var Me=t,Ue=0;this.button=o,this.cur("pointer");var ue,Ee,Te,_e,We;if(_){_e=this.ticks=new e.Shape({style:!1}),this.addChild(_e),We=_e.graphics,We.ss(1).s(P);var oe=Math.round((r-t)/(T||i)),Ye=(r-t)/oe;T?(Ye!=T&&kt&&ht("Slider() - non-divisible step ("+T+") adjusted to "+Ye),T=Ye):(Ye!=i&&kt&&ht("Slider() - non-divisible step ("+i+") adjusted to "+Ye),i=Ye);var Ve;E?Ve=(l-(p?o.height:o.width))/Math.abs(oe):Ve=l/Math.abs(oe)}var De,de,Be,Qe,Ke,lt,gt;if(p){if(De=E?o.height/2:0,ue=this.bar=new e.Rectangle(f,l,d,null,null,null,null,null,null,!1),z?ue.expand(z,ie):ue.expand(20,0),ue.centerReg(this),o.centerReg(this),Te=ue.getBounds(),Ee=new je.Rectangle(ue.x,Te.y+De,0,Te.height-De*2),_){for(ae&&(de=F.labels=new e.Container().addTo(F)),Be=0;Be<=Math.abs(oe);Be++)Qe=Be%(R+1)==0,Ke=Qe?25*b:15*L,lt=De+Ve*Be,We.mt(0,lt).lt(Ke,lt),ae&&(R&&Qe||!R)&&(gt=Math.max(e.countDecimals(K),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(r-(r-t)/Math.abs(oe)*Be,gt+1),size:Q.size?Q.size:10,color:$,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(Ke+he+2,lt-1,de));_e.x=ue.x+15}}else if(De=E?o.width/2:0,ue=this.bar=new e.Rectangle(l,f,d,null,null,null,null,null,null,!1),z?ue.expand(z,ie):ue.expand(0,20),ue.centerReg(this),o.centerReg(this),Te=ue.getBounds(),Ee=new je.Rectangle(Te.x+De,ue.y,Te.width-De*2,0),_){for(ae&&(de=F.labels=new e.Container().addTo(F)),Be=0;Be<=Math.abs(oe);Be++)Qe=Be%(R+1)==0,Ke=De+Ve*Be,lt=-(Qe?25*b:15*L),We.mt(Ke,0).lt(Ke,lt),ae&&(R&&Qe||!R)&&(gt=Math.max(e.countDecimals(K),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(t+(r-t)/Math.abs(oe)*Be,gt+1),size:Q.size?Q.size:10,color:$,align:"center",valign:"center"}).centerReg({add:!1}).loc(Ke,lt-he,de));_e.y=ue.y-10}o.x=Ee.x,o.y=Ee.y;function He(Ge){return i==0?Ge:Math.round(Ge/i)*i}var it,ft;o.on("mousedown",function(Ge){x=Ge.target.stage,F.focus=!0;var et=F.globalToLocal(Ge.stageX/e.scaX,Ge.stageY/e.scaY);it=et.x-o.x,ft=et.y-o.y,x&&(x.mouseMoveOutside=!0)}),o.on("pressmove",function(Ge){Se(Ge)});function Se(Ge){var et=F.globalToLocal(Ge.stageX/e.scaX,Ge.stageY/e.scaY),pt=$e(et.x-it,et.y-ft,Ee);p?(o.x=pt.x,Me=He((pt.y-Ee.y)/Ee.height*(t-r)),o.y=Ee.y+Me*Ee.height/(t-r),Me+=r,o.y!=Ue&&F.dispatchEvent("change"),Ue=o.y):(Me=He((pt.x-Ee.x)/Ee.width*(r-t)),o.x=Ee.x+Me*Ee.width/(r-t),Me+=t,o.y=pt.y,o.x!=Ue&&F.dispatchEvent("change"),Ue=o.x),ge&&ye(),me(),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&F.stage&&F.stage.update()}function Fe(Ge){return Ge>0?1:-1}function me(){F.zimAccessibility&&F.zimAccessibility.changeTitle(F,null,!0)}function $e(Ge,et,pt){return Ge=Math.max(pt.x,Math.min(pt.x+pt.width,Ge)),et=Math.max(pt.y,Math.min(pt.y+pt.height,et)),{x:Ge,y:et}}ue.on("mousedown",function(Ge){x=Ge.target.stage,it=0,ft=0,!(F.zimAccessibility&&F.zimAccessibility.aria)&&Se(Ge)});var st,Je;ne&&(st=t,Je=new e.Damp(st,ne),F.ticker=e.Ticker.add(function(){st=Je.convert(Me)})),Object.defineProperty(this,"currentValue",{get:function(){return ne?st:Me},set:function(Ge){n(Ge)||(t<r?(Ge<t&&(Ge=t),Ge>r&&(Ge=r)):(Ge>t&&(Ge=t),Ge<r&&(Ge=r)),Me=Ge=He(Ge),Je&&Je.immediate(Me),p?(o.y=(Ge-r)/(t-r)*Ee.height+De,Ue=o.y):(o.x=(Ge-t)/(r-t)*Ee.width+De,Ue=o.x),ge&&ye(),me(),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&F.stage&&F.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return ne?st:Me},set:function(Ge){Ge!=F.currentValue&&(F.currentValue=Ge,F.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(){kt&&ht("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){kt&&ht("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){kt&&ht("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return V},set:function(Ge){V=Ge}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return O},set:function(Ge){O=Ge}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==F},set:function(){e.KEYFOCUS=F}}),X&&!e.KEYFOCUS&&rt(),this.on("mousedown",function(){X&&rt()});function rt(){F.keyFocus=!0;var Ge=document.activeElement;Ge&&Ge.blur()}var Ce=!1,ze=!1,Xe=!1,Ze=!1;this.keyDownEvent=function(Ge){F.stage&&(F.zimAccessibility&&F.focus||!F.zimAccessibility&&F.keyFocus)&&(Ge.keyCode==37&&V?Ce=!0:Ge.keyCode==40&&O?ze=!0:Ge.keyCode==39&&V?Xe=!0:Ge.keyCode==38&&O&&(Ze=!0),F.keyInterval==null&&(Ce||ze||Xe||Ze)&&(ot(),F.keyTimeout=setTimeout(function(){F.keyInterval==null&&(Ce||ze||Xe||Ze)&&(F.keyInterval=setInterval(ot,40))},140)))};function ot(){(Ce||ze)&&(i>0?F.currentValueEvent-=i*Fe(r-t):F.currentValueEvent-=Z*Fe(r-t)),(Xe||Ze)&&(i>0?F.currentValueEvent+=i*Fe(r-t):F.currentValueEvent+=Z*Fe(r-t))}fe.addEventListener("keydown",this.keyDownEvent),F.keyUpEvent=function(Ge){Ge.keyCode==37?Ce=!1:Ge.keyCode==40?ze=!1:Ge.keyCode==39?Xe=!1:Ge.keyCode==38&&(Ze=!1),F.keyInterval!=null&&!Ce&&!ze&&!Xe&&!Ze&&(clearInterval(F.keyInterval),F.keyInterval=null)},fe.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(F,"enabled",{get:function(){return F._enabled},set:function(Ge){c(F,Ge),Ge?(fe.addEventListener("keydown",F.keyDownEvent),fe.addEventListener("keyup",F.keyUpEvent)):(fe.removeEventListener("keydown",F.keyDownEvent),fe.removeEventListener("keyup",F.keyUpEvent))}}),n(N)||(F.currentValue=N),e.setSwipe(this,!1),G!==!1&&e.styleTransforms(this,Q),this.clone=function(Ge){return F.cloneProps(new e.Slider(Ge||!e.isPick(Ae[0])?F.min:Ae[0],Ge||!e.isPick(Ae[1])?F.max:Ae[1],Ge||!e.isPick(Ae[2])?F.step:Ae[2],o.clone(),l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,Ge||!e.isPick(Ae[3])?F.currentValue:Ae[3],q,U,z,ie,ae,he,$,G,this.group,w))},this.dispose=function(Ge,et,pt){return fe.removeEventListener("keydown",F.keyDownEvent),fe.removeEventListener("keyup",F.keyUpEvent),pt||this.zimContainer_dispose(!0),!0}},e.extend(e.Slider,e.Container,["clone","dispose"],"zimContainer",!1),e.Selector=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C){var E="tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingH, paddingV, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, liveIndex, style, group, inherit",X;if(X=mt(e.Selector,arguments,E,this))return X;qe("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=D;var Z=A===!1?{}:e.getStyle(this.type,this.group,C),V=g();n(t)&&(t=Z.tile!=null?Z.tile:new e.Tile(new e.Circle(20,e.red),4,4,10,10)),n(r)&&(r=Z.borderColor!=null?Z.borderColor:e.white),n(i)&&(i=Z.borderWidth!=null?Z.borderWidth:2),n(o)&&(o=Z.backgroundColor!=null?Z.backgroundColor:"rgba(0,0,0,.1)"),n(l)&&(l=Z.corner!=null?Z.corner:10),n(f)&&(f=Z.dashed!=null?Z.dashed:!1),n(d)&&(d=Z.padding!=null?Z.padding:t.spacingH/2),n(p)&&(p=Z.paddingV!=null?Z.paddingV:t.spacingV/2),n(_)&&(_=Z.speed!=null?Z.speed:2),n(P)&&(P=Z.diagonal!=null?Z.diagonal:!1),n(T)&&(T=Z.dim!=null?Z.dim:!1),n(R)&&(R=Z.multi!=null?Z.multi:!1),R&&(_=0),n(b)&&(b=Z.keyArrows!=null?Z.keyArrows:!0),n(L)&&(L=Z.behind!=null?Z.behind:!1),n(S)&&(S=Z.resizeScale!=null?Z.resizeScale:!1),n(k)&&(k=Z.selectedIndex!=null?Z.selectedIndex:null),n(m)&&(m=Z.liveIndex!=null?Z.liveIndex:!1),this.liveIndex=m;var O=[],ne=[];e.loop(t.items.length,function(){O.push(dt(r)),ne.push(dt(o))});var N=this;if(!(n(k)&&R)){var q=k,U=n(k)||k<0?0:k,z=t.getChildAt(U);N.currentItem=t.getChildAt(U),k=q,n(k)&&(k=Z.selectedIndex!=null?Z.selectedIndex:0)}var ie,ae,he;ie=z||t.getChildAt(0),ie&&(ae=ie.width+d*2,he=ie.height+p*2),N.tile=t.addTo(N).cur();var $;if(R){var G=this.selectors=[];e.loop(10,function(){$=new e.Rectangle(ae,he,e.faint,e.faint,i,l,f,{ignoreScale:!S}).centerReg(N,L?0:1),$.visible=!1,G.push($),$.mouseEnabled=!1}),this.selector=$}else $=this.selector=new e.Rectangle(ae,he,e.faint,e.faint,i,l,f,{ignoreScale:!S}).centerReg(N),$.loc(t.width/2,ie.y+p,N,L?0:1),$.visible=!1;k<0||n(z)||($.loc(ie.x+d,ie.y+p,N,L?0:1),$.color=ne[k],$.borderColor=O[k],$.visible=!0),t.mov(d,p),this.setBounds(t.width+d*2,t.height+p*2);var v={};this.tileDown=t.on("mousedown",function(I){var Q=$;if(!(R&&(Q=G.shift(),n(Q)))){Q.visible=!0;for(var x=I.target,F=0;x.parent!=t&&F<10;)x=x.parent,F++;if(x.parent==t&&w(x,null,Q),R){var Ae="id"+Math.abs(I.pointerID+1);v[Ae]={index:k,item:z,selector:Q}}}}),R&&(this.tileMove=t.on("pressmove",function(I){var Q="id"+Math.abs(I.pointerID+1),x=v[Q];if(!n(x)){var F=t.itemUnderPoint(I.stageX/e.scaX,I.stageY/e.scaY);if(x.item!=F){if(N.upItem=x.item,N.upIndex=x.index,N.downItem=x.item=F,N.downIndex=x.index=F?F.tileNum:null,N.dispatchEvent("change"),n(F))x.selector.visible=!1;else{var Ae=t.localToLocal(F.x,F.y,N);x.selector.loc(Ae.x,Ae.y).siz(F.width+d*2,F.height+p*2),x.selector.color=ne[x.index],x.selector.borderColor=O[x.index],x.selector.visible=!0}N.stage.update()}}}),this.tileUp=t.on("pressup",function(I){var Q="id"+Math.abs(I.pointerID+1),x=v[Q];n(x)||(N.downIndex=N.downItem=null,N.upIndex=x.index,N.upItem=x.item,G.push(x.selector),x.selector.visible=!1,N.dispatchEvent("change"),N.stage&&!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&N.stage.update(),delete v[Q])})),N.noAnimate=!1;function w(I,Q,x,F){n(x)&&(x=$),z=I,k=I.tileNum,x.color=ne[k],x.borderColor=O[k],R&&(N.upItem=N.upIndex=null,N.downItem=z,N.downIndex=k),N.animating=!0;var Ae=t.localToLocal(I.x,I.y,N),Y=Math.abs(Ae.x-$.x),K=Math.abs(Ae.y-$.y),ge=N.noAnimate||Q?0:_;if(N.noAnimate=!1,ge==0)x.loc(Ae.x,Ae.y).siz(I.width+d*2,I.height+p*2),N.animating=!1,N.dispatchEvent("change");else{if(P||(Y+K)*ge<=0?x.animate({x:Ae.x,y:Ae.y},(K+Y)*ge):(x.stopAnimate(),Y>=K?x.animate([{props:{x:Ae.x},time:Math.max(V=="s"?.1:100,Y*ge/(V=="s"?1e3:1))},{props:{y:Ae.y},time:Math.max(V=="s"?.1:100,K*ge/(V=="s"?1e3:1))}]):x.animate([{props:{y:Ae.y},time:Math.max(V=="s"?.1:100,K*ge/(V=="s"?1e3:1))},{props:{x:Ae.x},time:Math.max(V=="s"?.1:100,Y*ge/(V=="s"?1e3:1))}])),x.animate({props:{widthOnly:I.width+d*2,heightOnly:I.height+p*2},time:Math.max(V=="s"?.2:200,(K+Y)*ge/(V=="s"?1e3:1)),events:N.liveIndex,call:function(){N.animating=!1,F?N.dispatchEvent("changeset"):N.dispatchEvent("change")}}),N.liveIndex){var ye=null;x.on("animation",function(){var ce=x.parent.localToGlobal(x.x,x.y),ve=t.itemUnderPoint(ce.x,ce.y);ve.tileNum!=ye&&(k=ve.tileNum,F?N.dispatchEvent("changeset"):N.dispatchEvent("change"),ye=ve.tileNum)})}if(T){if(T===!0)var ee=.7;else ee=e.constrain(T,0,1);t.animate({props:{alpha:ee},rewind:!0,time:(K+Y)*_*.7/(V=="s"?1e3:1)})}}t.stage&&t.stage.update()}b&&N.added(function(){N.keyEvent=N.stage.frame.on("keydown",function(I){if(N.stage&&N.enabled&&!N.animating&&(N.zimAccessibility&&N.focus||!N.zimAccessibility&&N.keyFocus)){var Q=e.loop(t.items2D,function(Y,K){var ge=e.loop(Y,function(ye,ee){if(ye==z)return[ee,K]});if(Array.isArray(ge))return ge});Q===!0&&(Q=[0,0]);var x=t.items2D[Q[1]].length,F=t.items2D.length,Ae;I.keyCode=="39"?(Ae=(Q[0]+1)%x,w(t.items2D[Q[1]][Ae],Ae<Q[0])):I.keyCode=="37"?(Ae=(Q[0]-1+x)%x,w(t.items2D[Q[1]][Ae],Ae>Q[0])):I.keyCode=="38"?(Ae=(Q[1]-1+F)%F,w(t.items2D[Ae][Q[0]],Ae>Q[1])):I.keyCode=="40"&&(Ae=(Q[1]+1)%F,w(t.items2D[Ae][Q[0]],Ae<Q[1]))}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return k},set:function(I){n(I)&&(N.currentItem=null),N.currentItem=t.items[Math.round(I)]}}),Object.defineProperty(this,"text",{get:function(){return z.text},set:function(){kt&&ht("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return z},set:function(I){if(n(I)){z=null,k=null,$.visible=!1,N.selectedCol=null,N.selectedRow=null;return}$.visible=!0,N.lastItem=z,N.lastIndex=k,N.lastCol=N.selectedCol,N.lastRow=N.selectedRow,N.selectedCol=I.tileCol,N.selectedRow=I.tileRow,k=I.tileNum,z=I,w(z,null,null,!0)}}),this._enabled=!0,Object.defineProperty(N,"enabled",{get:function(){return N._enabled},set:function(I){I?N.mouse():N.noMouse(),N._enabled=I}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==N},set:function(){e.KEYFOCUS=N}}),e.KEYFOCUS||h(),this.on("mousedown",function(){h()});function h(){N.keyFocus=!0;var I=document.activeElement;I&&I.blur()}A!==!1&&e.styleTransforms(this,Z),this.clone=function(I){if(I)for(var Q=[],x=0;x<N.tile.items.length;x++)Q.push(N.tile.items[x].clone(!0));return N.cloneProps(new e.Selector(I?e.series(Q):t.clone?t.clone():t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,this.style,this.group))},this.dispose=function(I,Q,x){N.keyEvent&&N.stage&&N.stage.frame.off("keydown",N.keyEvent),t.off(N.tileDown),t.dispose(),R&&(t.off(N.tileMove),t.off(N.tileUp)),x||this.zimContainer_dispose(!0)}},e.extend(e.Selector,e.Container,["clone","dispose"],"zimContainer",!1),e.Dial=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F){var Ae="min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",Y;if(Y=mt(e.Dial,arguments,Ae,this))return Y;qe("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=x;var K=Q===!1?{}:e.getStyle(this.type,this.group,F);if(n(t)&&(t=K.min!=null?K.min:0),n(r)&&(r=K.max!=null?K.max:10),r-t==0){ht("ZIM Dial range must not be 0");return}n(O)&&(O=K.sound!=null?K.sound:!1),n(i)&&(i=K.step!=null?K.step:O?0:1),n(o)&&(o=K.width!=null?K.width:100),n(l)&&(l=K.backgroundColor!=null?K.backgroundColor:e.granite),n(f)&&(f=K.indicatorColor!=null?K.indicatorColor:O?e.white:e.licorice),n(d)&&(d=K.indicatorScale!=null?K.indicatorScale:1),n(p)&&(p=K.indicatorType!=null?K.indicatorType:O?"aztec":"arrow"),n(_)&&(_=K.useTicks!=null?K.useTicks:i!=0),n(P)&&(P=K.innerTicks!=null?K.innerTicks:!1),n(R)&&(R=K.tickStep!=null?K.tickStep:i||(_?.25:0)),n(b)&&(b=K.semiTicks!=null?K.semiTicks:O?3:0),n(T)&&(T=K.tickColor!=null?K.tickColor:O?e.tin:l),n(L)&&(L=K.tickScale!=null?K.tickScale:O?1.25:1),n(S)&&(S=K.semiTickScale!=null?K.semiTickScale:1.25),n(k)&&(k=K.innerCircle!=null?K.innerCircle:!0),n(A)&&(A=K.innerColor!=null?K.innerColor:O?e.pink:"rgba(0,0,0,.2)"),n(D)&&(D=K.inner2Color!=null?K.inner2Color:O?e.light:"rgba(0,0,0,.1)"),n(m)&&(m=K.innerScale!=null?K.innerScale:O?.4:.5),n(C)&&(C=K.accentSize!=null?K.accentSize:O?o/2*.15:0),n(E)&&(E=K.accentOffset!=null?K.accentOffset:o/2*.45),n(V)&&(V=K.accentDifference!=null?K.accentDifference:-.25),n(X)&&(X=K.accentColor!=null?K.accentColor:e.pink),n(Z)&&(Z=K.accentBackgroundColor!=null?K.accentBackgroundColor:O?e.blue:e.clear),n(N)&&(N=K.gap!=null?K.gap:O?.25:0),n(ne)&&(ne=K.linear!=null?K.linear:O),N&&(ne=!0,he=!1),n(q)&&(q=K.limit!=null?K.limit:!0),n(U)&&(U=K.keyArrows!=null?K.keyArrows:!0),n(z)&&(z=K.keyArrowsStep!=null?K.keyArrowsStep:(r-t)/100),n(ie)&&(ie=K.keyArrowsH!=null?K.keyArrowsH:!0),n(ae)&&(ae=K.keyArrowsV!=null?K.keyArrowsV:!0),n(he)&&(he=K.continuous!=null?K.continuous:!1),he&&(q=K.limit!=null?K.limit:!1),n(v)&&(v=K.damp!=null?K.damp:!1),n(w)&&(w=K.currentValue!=null?K.currentValue:!1),n(h)&&(h=K.useLabels!=null?K.useLabels:!1),n(I)&&(I=K.labelMargin!=null?K.labelMargin:10),q==!1&&(v=null);var ge=this;this.cur("pointer");var ye=ee(t,r,i,w);this.veeObj={min:ye[0],max:ye[1],step:ye[2],currentValue:ye[3]};function ee(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var ce=i;w=e.Pick.choose(w);var ve=o/2,Re=o,se=t,Oe=0,J;if(C){var xe=o/2+E+C/2,te=360*N/2;ge.accentBacking=new e.Shape(-ve,-ve,ve*2,ve*2).addTo(this).s(Z).ss(C+V).a(0,0,xe,(te-90)*e.RAD,(360-te-90)*e.RAD),J=ge.accent=new e.Shape(-ve,-ve,ve*2,ve*2).addTo(this)}function we(){J.c().s(X).ss(C),ne?J.a(0,0,xe,(te-90)*e.RAD,(Ve.rotation-te*2)*e.RAD):J.a(0,0,xe,(te-90)*e.RAD,(Ve.rotation-90)*e.RAD)}var ke=this.backing=new e.Circle(ve,l,null,null,null,null,null,null,!1);if(C?ke.center(this):this.addChild(ke),k){var pe=this.inner=new e.Circle(ve*m,A,null,null,null,null,null,null,!1);this.addChild(pe);var Me=this.inner2=new e.Circle(ve*(m-.1),D,null,null,null,null,null,null,!1);this.addChild(Me)}O&&(ge.rotation=180);var Ue=Math.abs(r-t)/(R||i)+(N?1:0),ue=i?Math.abs(r-t)/i:0;if(_){var Ee=this.ticks=new e.Container({style:!1});if(this.addChild(Ee),h)var Te=ge.labels=new e.Container(o*2,Re*2).centerReg(ge);for(var _e=0;_e<Ue;_e++){var We=_e%(b+1)==0,oe=new e.Rectangle(1,ve*(We?.2*L:.1*S),T,null,null,null,null,null,null,!1);if(oe.regY=ve+(P?m-.05:oe.height+ve*.1),oe.regX=.5,oe.rotation=(360-360*N)/(Ue-(N?1:0))*_e+360*N/2,Ee.addChild(oe),h&&(b&&We||!b)){var Ye=Math.max(e.countDecimals(ce),e.countDecimals(t),e.countDecimals(r));new e.Label({text:e.decimals(t+(r-t)/Math.abs(ue)*_e,Ye+1),size:K.size?K.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-I-1,oe).addTo(Te)}}ge.expand(oe.height)}this.setBounds(-ve,-ve,o,o);var Ve,De;if(p=="dot"||p=="circle")Ve=this.indicator=new e.Container({style:!1}),De=this.indicatorShape=new e.Circle(ve*.19,f,null,null,null,null,null,null,!1),Ve.addChild(De),e.sca(Ve,d),Ve.regY=ve-Ve.getBounds().width*d/2-ve*.07;else if(p=="line"||p=="rectangle")Ve=this.indicator=new e.Container({style:!1}),De=this.indicatorShape=new e.Rectangle(ve*.1,ve*.3,f,null,null,null,null,null,null,null,null,!1),Ve.addChild(De),e.sca(Ve,d),Ve.regY=ve-Ve.getBounds().width*d/2-ve*.07,Ve.regX=ve*.05;else if(p=="aztec"){Ve=this.indicator=new e.Container({style:!1});var de=ve*.05,Be=ve*.1,Qe=ve*.42;De=this.indicatorShape=new e.Shape(-Be,0,Be*2,Qe).f(f).mt(-de,0).lt(de,0).lt(Be,Qe).lt(-Be,Qe).cp(),Ve.addChild(De),e.sca(Ve,d),Ve.regY=ve-Ve.getBounds().width*d/2-ve*.04}else Ve=this.indicator=new e.Container({style:!1}),De=this.indicatorShape=new e.Triangle(ve*.4,ve*.4,ve*.4,f,null,null,null,null,null,null,null,!1),Ve.addChild(De),e.sca(Ve,d),Ve.regY=ve-Ve.getBounds().height*d*(P?.85:.75),P&&(De.rotation=180);Ve.regY/=d,this.addChild(Ve);function Ke(nt){return i==0?nt:Math.round(nt/i)*i}var lt,gt,He,it,ft=0;if(he)var Se=0,Fe=0,me=0,$e=!1,st=!1,Je=!0;if(ne)this.on("mousedown",function(nt){if(!(ge.zimAccessibility&&ge.zimAccessibility.aria)){var Tt=lt=Ve.rotation,xt=ge.parent.globalToLocal(nt.stageX/e.scaX,nt.stageY/e.scaY);He=ge.on("pressmove",function(Ct){var ct=ge.parent.globalToLocal(Ct.rawX/e.scaX,Ct.rawY/e.scaY);Ve.rotation=Tt=lt+(xt.y-ct.y)*100/(this.width||1),q&&(Tt>360-360*N/2||Tt<0+360*N/2)&&(Tt=e.constrain(Tt,360*N/2,360-360*N/2),xt=ge.parent.globalToLocal(Ct.rawX/e.scaX,Ct.rawY/e.scaY),lt=Tt),Xe(Tt)}),it=this.on("pressup",function(){ge.off("pressmove",He),ge.off("pressup",it)})}});else{var rt=!0;this.on("mousedown",function(nt){if(!(ge.zimAccessibility&&ge.zimAccessibility.aria)){lt=Ve.rotation;var Tt=ge.parent.globalToLocal(nt.stageX/e.scaX,nt.stageY/e.scaY),xt=Tt.x-ge.x,Ct=ge.y-Tt.y;gt=Math.atan2(xt,Ct)*180/Math.PI;var ct=new Date().getTime();He=ge.on("pressmove",function(Rt){if($e){var At=ge.parent.globalToLocal(Rt.rawX/e.scaX,Rt.rawY/e.scaY),bt=At.x-ge.x,Ft=ge.y-At.y;gt=Math.atan2(bt,Ft)*180/Math.PI,lt=Ve.rotation}At=ge.parent.globalToLocal(Rt.rawX/e.scaX,Rt.rawY/e.scaY),bt=At.x-ge.x,Ft=ge.y-At.y;var Yt=Math.atan2(bt,Ft)*180/Math.PI,$t=lt+Yt-gt;$t=($t+360*1e4)%360,q&&rt&&($t-ft>180&&ge.currentValue!=r?$t=0:$t-ft<-180&&($t=359)),rt=!0,Xe($t),ft=$t}),it=this.on("pressup",function(Rt){ge.currentValue!=ge.min&&ge.currentValue!=ge.max&&(rt=!1);var At=new Date().getTime()-ct;if(At<200){Tt=ge.parent.globalToLocal(Rt.rawX/e.scaX,Rt.rawY/e.scaY),xt=Tt.x-ge.x,Ct=ge.y-Tt.y;var bt=Math.atan2(xt,Ct)*180/Math.PI-ge.rotation;Xe(bt)}lt=Ve.rotation,ge.off("pressmove",He),ge.off("pressup",it)})}})}function Ce(nt){return nt>0?1:-1}function ze(){ge.zimAccessibility&&ge.zimAccessibility.changeTitle(ge,null,!0)}function Xe(nt){if(he){st&&(Se=nt,st=!1),nt>Se+180?me-=360:nt<Se-180&&(me+=360),Fe=me+nt,Je=!1;var Tt=ge.currentValue;return ge.currentValue=Ke(Fe*(r-t)/360),Tt!=ge.currentValue&&ge.dispatchEvent("change"),Se=nt,Je=!0,J&&we(),!0}var xt;nt<0&&(nt+=360),nt=nt%360,i!=0?(nt=Math.min(nt,360),xt=Ke((nt-360*N/2)/(360-360*N)*(r-t)),Ve.rotation=360*N/2+xt*(360-360*N)/(r-t)):(Ve.rotation=nt,xt=(nt-360*N/2)/(360-360*N)*(r-t)),xt!=Oe&&(Oe=xt,se=xt+t,J&&we(),ge.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ge.stage&&ge.stage.update()),ze()}var Ze,ot;v&&(Ze=t,ot=new e.Damp(Ze,v),ge.ticker=e.Ticker.add(function(){Ze=ot.convert(se)})),Object.defineProperty(this,"currentValue",{get:function(){return v?Ze:se},set:function(nt){n(nt)||(he?($e=!1,!n($)&&!n(G)?$<G?(nt<$&&(nt=$,$e=!0),nt>G&&(nt=G,$e=!0)):(nt>$&&(nt=$,$e=!0),nt<G&&(nt=G,$e=!0)):n($)?n(G)||nt>G&&(nt=G,$e=!0):nt<$&&(nt=$,$e=!0),Je&&(st=!0,me=Math.floor(nt/(r-t))*360)):t<r?(nt<t&&(nt=q?t:r),nt>r&&(nt=q?r:t)):(nt>t&&(nt=q?t:r),nt<r&&(nt=q?r:t)),se=nt,nt=Ke(nt),v&&v.immediate(se),Ve.rotation=N*360/2+(nt-t)*(360-N*360)/(r-t),Ve.rotation=(Ve.rotation+360*1e4)%360,Oe=nt-t,ft=Ve.rotation,J&&we(),ze(),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ge.stage&&ge.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return v?Ze:se},set:function(nt){nt!=ge.currentValue&&(ge.currentValue=nt,ge.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(nt){he?t=nt:kt&&ht("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(nt){he?r=nt:kt&&ht("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return he},set:function(){kt&&ht("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return $},set:function(nt){$=nt,ge.currentValue<$&&(ge.currentValue=$)}}),Object.defineProperty(this,"continuousMax",{get:function(){return G},set:function(nt){G=nt,ge.currentValue>G&&(ge.currentValue=G)}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){kt&&ht("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return ie},set:function(nt){ie=nt}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return ae},set:function(nt){ae=nt}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ge},set:function(){e.KEYFOCUS=ge}}),U&&!e.KEYFOCUS&&Ge(),this.on("mousedown",function(){U&&Ge()});function Ge(){ge.keyFocus=!0;var nt=document.activeElement;nt&&nt.blur()}var et=!1,pt=!1,Le=!1,tt=!1;this.keyDownEvent=function(nt){ge.stage&&(ge.zimAccessibility&&ge.focus||!ge.zimAccessibility&&ge.keyFocus)&&(nt.keyCode==37&&ie?et=!0:nt.keyCode==40&&ae?pt=!0:nt.keyCode==39&&ie?Le=!0:nt.keyCode==38&&ae&&(tt=!0),ge.keyInterval==null&&(et||pt||Le||tt)&&(vt(),ge.keyTimeout=setTimeout(function(){ge.keyInterval==null&&(et||pt||Le||tt)&&(ge.keyInterval=setInterval(vt,40))},140)))};function vt(){(et||pt)&&(i>0?ge.currentValueEvent-=i*Ce(r-t):ge.currentValueEvent-=z*Ce(r-t)),(Le||tt)&&(i>0?ge.currentValueEvent+=i*Ce(r-t):ge.currentValueEvent+=z*Ce(r-t))}fe.addEventListener("keydown",this.keyDownEvent),ge.keyUpEvent=function(nt){nt.keyCode==37?et=!1:nt.keyCode==40?pt=!1:nt.keyCode==39?Le=!1:nt.keyCode==38&&(tt=!1),ge.keyInterval!=null&&!et&&!pt&&!Le&&!tt&&(clearInterval(ge.keyInterval),ge.keyInterval=null)},fe.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(ge,"enabled",{get:function(){return ge._enabled},set:function(nt){nt?(fe.addEventListener("keydown",ge.keyDownEvent),fe.addEventListener("keyup",ge.keyUpEvent)):(fe.removeEventListener("keydown",ge.keyDownEvent),fe.removeEventListener("keyup",ge.keyUpEvent)),ge._enabled=nt}}),n(w)&&(w=K.currentValue!=null?K.currentValue:t),ge.currentValue=w,Q!==!1&&e.styleTransforms(this,K),this.clone=function(nt){return ge.cloneProps(new e.Dial(nt||!e.isPick(ye[0])?ge.min:ye[0],nt||!e.isPick(ye[1])?ge.max:ye[1],nt||!e.isPick(ye[2])?ge.step:ye[2],o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,nt||!e.isPick(ye[3])?ge.currentValue:ye[3],h,I,Q,this.group,F))},this.dispose=function(nt,Tt,xt){return fe.removeEventListener("keydown",ge.keyDownEvent),fe.removeEventListener("keyup",ge.keyUpEvent),xt||this.zimContainer_dispose(!0),!0}},e.extend(e.Dial,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce){var ve="width, height, tabs, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",Re;if(Re=mt(e.Tabs,arguments,ve,this))return Re;qe("65");var se=ye===!1?{}:e.getStyle("Tabs",ee,ce);n(L)&&(L=se.vertical!=null?se.vertical:!1),n(t)&&(t=se.width!=null?se.width:null);var Oe=!n(t);if(n(t)&&(t=L?60:240),n(r)&&(r=se.height!=null?se.height:L?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=ee,(n(i)||i.length<=0)&&(i=se.tabs!=null?se.tabs:[1,2,3,4]),n(o)&&(o=se.backgroundColor!=null?se.backgroundColor:e.tin),n(l)&&(l=se.rollBackgroundColor!=null?se.rollBackgroundColor:e.grey),n(f)&&(f=se.downBackgroundColor!=null?se.downBackgroundColor:l),n(d)&&(d=se.selectedBackgroundColor!=null?se.selectedBackgroundColor:e.dark),n(p)&&(p=se.selectedRollBackgroundColor!=null?se.selectedRollBackgroundColor:l),n(_)&&(_=se.color!=null?se.color:e.white),n(P)&&(P=se.rollColor!=null?se.rollColor:_),n(T)&&(T=se.downColor!=null?se.downColor:P),n(R)&&(R=se.selectedColor!=null?se.selectedColor:_),n(b)&&(b=se.selectedRollColor!=null?se.selectedRollColor:P),n(Z)&&(Z=se.backing!=null?se.backing.clone():null),n(V)&&(V=se.rollBacking!=null?se.rollBacking.clone():null),n($)&&($=se.align!=null?se.align:"center"),n(G)&&(G=se.valign!=null?se.valign:"center"),n(v)&&(v=se.labelAlign!=null?se.labelAlign:$),n(w)&&(w=se.labelValign!=null?se.labelValign:G),n(x)&&(x=se.indent!=null?se.indent:10),n(h)&&(h=se.labelIndent!=null?se.labelIndent:x),n(I)&&(I=se.labelIndentH!=null?se.labelIndentH:h),n(Q)&&(Q=se.labelIndentV!=null?se.labelIndentV:h),n(k)&&(k=se.currentEnabled!=null?se.currentEnabled:!1),n(m)&&(m=se.currentSelected!=null?se.currentSelected:!0),m||(k=!0),n(S)&&(S=se.spacing!=null?se.spacing:1),n(A)&&(A=se.corner!=null?se.corner:0),n(E)&&(E=se.gradient!=null?se.gradient:null),n(X)&&(X=se.gloss!=null?se.gloss:null),n(D)&&(D=se.base!=null?se.base:A==0&&!Array.isArray(A)?"none":L?"left":"bottom"),n(C)&&(C=se.keyEnabled!=null?se.keyEnabled:!0),n(F)&&(F=se.useTap!=null?se.useTap:!1),n(Ae)&&(Ae=se.excludeCustomTap!=null?se.excludeCustomTap:!1),n(he)&&(he=se.backdropColor!=null?se.backdropColor:null),n(K)&&(K=se.styleLabels!=null?se.styleLabels:!1),n(ge)&&(ge=se.keyWrap!=null?se.keyWrap:!0),D!="none"&&A!=0&&!Array.isArray(A))switch(D){case"bottom":A=[A,A,0,0];break;case"left":A=[0,A,A,0];break;case"top":A=[0,0,A,A];break;case"right":A=[A,0,0,A];break}else Array.isArray(A)||(A=[A,A,A,A]);var J=this;this.keyEnabled=C;var xe=0,te=[],we=[],ke,pe,Me=i.length,Ue=(t-S*(Me-1))/Me,ue=(r-S*(Me-1)-2)/Me;if(!n(he)){var Ee=this.backdrop=new e.Rectangle(t,r,he,null,null,null,null,null,null,!1);this.addChild(Ee)}var Te=!1,_e;function We(Fe){for(var me=0;me<Fe.length;me++){var $e=Fe[me];if($e.constructor==={}.constructor){_e&&_e!="TabObject"&&(Te=!0),_e="TabObject",$e.type="TabObject";continue}typeof $e=="string"||typeof $e=="number"||$e.type=="Label"?(Fe[me]={type:"TabObject",label:String($e!=null)||$e.type=="Label"?$e:"1"},_e&&_e!="TabObject"&&(Te=!0),_e="TabObject"):(_e&&_e=="TabObject"&&(Te=!0),_e="Other")}}We(i);for(var oe=0,Ye,Ve=0,De=0;De<i.length;De++)pe=i[De],L?Oe&&(pe.width=pe.width?pe.width:t):(n(pe.width)&&Ve++,oe+=n(pe.width)?Ue:pe.width);if(!L){if(oe>t-S*(Me-1))for(De=0;De<i.length;De++)pe=i[De],pe.width=(t-S*(Me-1))/oe*(n(pe.width)?Ue:pe.width);else if(Math.round(oe)<Math.round(t-S*(Me-1))&&Ve>0)for(Ye=(Me*Ue-(oe-Ve*Ue))/Ve,De=0;De<i.length;De++)pe=i[De],pe.width=n(pe.width)?Ye:pe.width}function de(Fe,me){for(De=0;De<Fe.length;De++)pe=Fe[De],pe!=""&&pe.type=="TabObject"&&(n(pe.label)&&(pe.label=" "),(typeof pe.label=="string"||typeof pe.label=="number")&&(pe.label=new e.Label({text:pe.label,size:se.size!=null?se.size:L?ue/2:r/2,font:se.font!=null?se.font:null,style:K,valign:w,inherit:me})))}de(i,K?se:null);var Be=0;for(De=0;De<i.length;De++)pe=i[De],!pe.width&&L&&pe.label.width>Be&&(Be=pe.label.width);var Qe=0;function Ke(Fe,me){var $e=[],st=[];for(De=0;De<Fe.length;De++){if(pe=Fe[De],pe.type=="TabObject"){var Je={color:n(pe.color)?e.Pick.choose(_):pe.color,rollColor:n(pe.rollColor)?e.Pick.choose(P):pe.rollColor,downColor:n(pe.downColor)?e.Pick.choose(T):pe.downColor,selectedColor:n(pe.selectedColor)?e.Pick.choose(R):pe.selectedColor,selectedRollColor:n(pe.selectedRollColor)?e.Pick.choose(b):pe.selectedRollColor,backgroundColor:n(pe.backgroundColor)?e.Pick.choose(o):pe.backgroundColor,rollBackgroundColor:n(pe.rollBackgroundColor)?e.Pick.choose(l):pe.rollBackgroundColor,downBackgroundColor:n(pe.downBackgroundColor)?e.Pick.choose(f):pe.downBackgroundColor,selectedBackgroundColor:n(pe.selectedBackgroundColor)?e.Pick.choose(d):pe.selectedBackgroundColor,selectedRollBackgroundColor:n(pe.selectedRollBackgroundColor)?e.Pick.choose(p):pe.selectedRollBackgroundColor,wait:n(pe.wait)?e.Pick.choose(O):pe.wait};if(me)for(var rt in me)n(me[rt])||(Je[rt]=me[rt]);ke=new e.Button({width:L?n(pe.width)?Oe?t:Be+ue/2+A[0]/2:pe.width:n(pe.width)?Ue:pe.width,height:L?ue:r,label:pe.label,borderColor:se.borderColor!=null?se.borderColor:null,borderWidth:se.borderWidth!=null?se.borderWidth:null,backgroundColor:Je.backgroundColor,rollBackgroundColor:Je.rollBackgroundColor,downBackgroundColor:Je.downBackgroundColor,downColor:Je.downColor,corner:A,shadowColor:-1,gradient:E,gloss:X,backing:Z?Z.clone():null,rollBacking:V?V.clone():null,wait:Je.wait,waitTime:n(pe.waitTime)?ne:pe.waitTime,waitBackgroundColor:n(pe.waitBackgroundColor)?N:pe.waitBackgroundColor,rollWaitBackgroundColor:n(pe.rollWaitBackgroundColor)?q:pe.rollWaitBackgroundColor,waitColor:n(pe.waitColor)?U:pe.waitColor,rollWaitColor:n(pe.rollWaitBackgroundColor)?z:pe.rollWaitColor,waitModal:n(pe.waitModal)?ie:pe.waitModal,waitEnabled:n(pe.waitEnabled)?ae:pe.waitEnabled,align:v,valign:w,indentH:I,indentV:Q,inherit:e.copy(se)}),ke.tabInfo=Je,ke.color=ke.tabInfo.color,ke.rollColor=ke.tabInfo.rollColor,ke.type="TabsButton",ke.content=pe,ke.listIndentReady=!0}else{if(pe.listIndentReady)ke=pe;else{ke=new e.Container,ke.type=pe.type,ke.content=pe;for(var Ce=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],ze=0;ze<Ce.length;ze++)pe[Ce[ze]]&&(ke[Ce[ze]]=pe[Ce[ze]])}pe.checkBox&&(ke.checkBox=pe.checkBox),n(ke.tabInfo)&&(ke.tabInfo={}),Ae&&(ke.excludeTap=!0),ke.tabInfo.color=n(pe.color)?_:pe.color,ke.tabInfo.backgroundColor=n(pe.backgroundColor)?o:pe.backgroundColor,pe.listIndentReady||(new e.Rectangle(Math.max(pe.width,L?Oe?t:Be+ue/2+A[0]/2:pe.width),Math.max(pe.height,L?ue:r),e.clear).addTo(ke).expand(0).cur(),pe.center(ke).cur(),$=="center"||$=="middle"||pe.pos(0,null,$=="right"),G=="center"||G=="middle"||pe.pos(null,0,null,G=="bottom"),ke.listIndentReady=!0)}ke.width>Qe&&(Qe=ke.width),F?ke.tap(function(Xe){He(Xe.currentTarget.znum),J.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}):ke.zimTabEvent=ke.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Xe){He(Xe.currentTarget.znum),J.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}),ke.on("mousedown",function(Xe){J.buttonDown=Xe.currentTarget}),ke.on("pressup",function(Xe){J.buttonDown=null;var Ze=Xe.currentTarget.znum;F||e.ACTIONEVENT=="click"?setTimeout(function(){it(Ze)},50):it(Ze)}),st.push(pe.label),$e.push(ke),ke.index=De}return[$e,st]}var lt=Ke(i);we=lt[0],te=lt[1];function gt(){var Fe=0,me=0,$e;for(De=0;De<we.length;De++)$e=we[De],$e.znum=De,$e.selectedIndex=De,$e.selectedIndex==xe&&m&&($e.backgroundColor=d,$e.rollBackgroundColor=p,$e.color=R),te[De]&&(te[De].znum=De),J.addChild($e),(!L||Oe)&&($e.x=(t-$e.width)/2,$e.y=(r-$e.height)/2),L?($e.y=me,me=$e.y+$e.height+S,$=="left"?$e.x=($e.type=="TabsButton"||$e.type=="ListItem"?0:x)+($e.regX-($e.getBounds()?$e.getBounds().x:0))*$e.scaleX:$=="right"&&($e.x=(Oe?t:Qe)-$e.width-($e.type=="TabsButton"||$e.type=="ListItem"?0:x))):($e.x=Fe,Fe=$e.x+$e.width+S,G=="top"?$e.y=($e.type=="TabsButton"&&!Te?0:x)+($e.regY-($e.getBounds()?$e.getBounds().y:0))*$e.scaleY:G=="bottom"&&($e.y=r-$e.height-($e.type=="TabsButton"&&!Te?0:x))),De==xe&&!k?$e.enabled=!1:$e.enabled=!0;n(he)||J.removeChild(Ee),J._bounds=null;var st=J.getBounds(),Je=0,rt=0;if(!st&&je.EaselJS.version[0]!=0?J.setBounds():st&&(Je=L&&st.width!=0&&Oe?t:st.width,rt=L&&st.height!=0?st.height:r,J.setBounds(Je,rt)),n(he)||(Ee.widthOnly=Je,Ee.heightOnly=rt,J.addChildAt(Ee,0)),L&&!Oe)for(De=0;De<=we.length;De++)($=="center"||$=="middle")&&($e.x=(Je-$e.width)/2)}gt();function He(Fe,me){if(Fe!=xe){var $e=we[xe];if($e&&m&&($e.tabInfo&&n($e.tabInfo.wait)&&($e.tabInfo.backgroundColor&&($e.backgroundColor=$e.tabInfo.backgroundColor),$e.tabInfo.rollBackgroundColor&&($e.rollBackgroundColor=$e.tabInfo.rollBackgroundColor),$e.tabInfo.color&&$e.label&&($e.color=$e.tabInfo.color),$e.tabInfo.rollColor&&$e.label&&($e.rollColor=$e.tabInfo.rollColor)),k||($e.enabled=!0)),xe=Fe,$e=we[xe],$e){var st=$e.tabInfo;st&&n($e.tabInfo.wait)&&m&&(st.selectedBackgroundColor&&($e.backgroundColor=!n(st.downBackgroundColor)&&!me?st.downBackgroundColor:st.selectedBackgroundColor),st.selectedRollBackgroundColor&&($e.rollBackgroundColor=st.selectedRollBackgroundColor),st.selectedColor&&$e.label&&($e.color=!n(st.downColor)&&!me?st.downColor:st.selectedColor),st.selectedRollColor&&$e.label&&($e.rollColor=st.selectedRollColor)),me&&!k&&($e.enabled=!1)}}}function it(Fe){var me=we[Fe];if(me&&m){var $e=me.tabInfo;$e&&n($e.wait)&&($e.selectedBackgroundColor&&(me.backgroundColor=J.selected==me?$e.selectedBackgroundColor:$e.backgroundColor),$e.selectedColor&&me.label&&(me.color=J.selected==me?$e.selectedColor:$e.color)),k||(me.enabled=!1)}}this.addAt=function(Fe,me,$e){n(me)&&(me=we.length),me=e.constrain(me,0,we.length),Array.isArray(Fe)||(Fe=[Fe]),We(Fe),de(Fe,$e);var st=Ke(Fe,$e),Je=st[0],rt=st[1];me<=xe&&(xe+=Je.length);var Ce=[me,0].concat(Je);return Array.prototype.splice.apply(we,Ce),Ce=[me,0].concat(rt),Array.prototype.splice.apply(te,Ce),gt(),J},this.removeAt=function(Fe,me){if(we.length==0)return J;for(n(Fe)&&(Fe=1),n(me)&&(me=we.length-Fe),me=e.constrain(me,0,we.length-Fe),xe>=me&&xe<=me+Fe&&(xe=-1),xe>me+Fe&&(xe-=Fe),De=me;De<me+Fe;De++)we[De].tabInfo&&(we[De].tabInfo.backgroundColor&&(we[De].backgroundColor=we[De].tabInfo.backgroundColor),we[De].tabInfo.color&&we[De].label&&(we[De].color=we[De].tabInfo.color)),F?we[De].noTap():we[De].off((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",we[De].zimTabEvent),we[De].removeFrom();return we.splice(me,Fe),te.splice(me,Fe),gt(),J},J.keyEvent=function(Fe){if(!(!J.keyEnabled||!J.keyFocus||J.zimAccessibility)&&Fe.keyCode==9){var me=xe;Fe.shiftKey?He(--me<0?ge?i.length-1:0:me):He(++me>i.length-1?ge?0:i.length-1:me),J.dispatchEvent("change"),J.dispatchEvent("keychange"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update(),Fe.preventDefault()}},fe.addEventListener("keydown",J.keyEvent),Object.defineProperty(this,"selected",{get:function(){return we[xe]},set:function(){kt&&ht("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return xe},set:function(Fe){He(Fe,!0),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return xe},set:function(Fe){He(Math.min(Math.max(Fe,0),i.length-1)),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.color:_},set:function(Fe){if(_=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.color=Fe),(me!=xe||!m)&&(J.buttons[me].color=_);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.rollColor:P},set:function(Fe){if(P=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.rollColor=Fe),J.buttons[me].rollColor=P,me!=xe&&J.buttons[me].rolled&&(J.buttons[me].color=P);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedColor:R},set:function(Fe){if(R=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.selectedColor=Fe),me==xe&&m&&(J.buttons[me].color=R);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedRollColor:b},set:function(Fe){if(b=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.selectedRollColor=Fe),me==xe&&m&&J.buttons[me].rolled&&(J.buttons[me].color=b);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.backgroundColor:o},set:function(Fe){if(o=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.backgroundColor=Fe),(me!=xe||!m)&&(J.buttons[me].backgroundColor=o);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.rollBackgroundColor:l},set:function(Fe){if(l=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.rollBackgroundColor=Fe),J.buttons[me].rollBackgroundColor=l,me!=xe&&J.buttons[me].rolled&&(J.buttons[me].backgroundColor=l);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedBackgroundColor:d},set:function(Fe){if(d=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.selectedBackgroundColor=Fe),me==xe&&m&&(J.buttons[me].backgroundColor=d);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedRollBackgroundColor:p},set:function(Fe){if(p=Fe,J.buttons[0].tabInfo){for(var me=0;me<J.buttons.length;me++)J.buttons[me].tabInfo&&(J.buttons[me].tabInfo.selectedRollBackgroundColor=Fe),me==xe&&m&&J.buttons[me].rolled&&(J.buttons[me].backgroundColor=p);!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return te[xe]},set:function(){kt&&ht("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return te[xe]!=null?te[xe].text:void 0},set:function(){kt&&ht("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return we},set:function(){kt&&ht("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return te},set:function(){kt&&ht("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(J,"enabled",{get:function(){return J._enabled},set:function(Fe){c(J,Fe)}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==J},set:function(){e.KEYFOCUS=J}}),C&&e.KEYFOCUS&&ft(),this.on("mousedown",function(){C&&ft()});function ft(){J.keyFocus=!0;var Fe=document.activeElement;Fe&&Fe.blur()}var Se=J.getBounds();n(Se)||Se.width==0?J.setBounds(0,0,t,r):J.width=t,n(Y)&&(Y=se.selectedIndex!=null?se.selectedIndex:0),J.selectedIndex=Y,ye!==!1&&e.styleTransforms(this,se),this.clone=function(){for(var Fe=e.copy(i,!0),me=0;me<Fe.length;me++)Fe[me].label=Fe[me].label.clone();return J.cloneProps(new e.Tabs(t,r,Fe,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,this.group,ce))},this.doDispose=function(Fe,me,$e){J.keyEvent&&fe.removeEventListener("keydown",J.keyEvent),e.loop(J.buttons,function(st){st.dispose()}),J.keyEvent=null,$e||this.zimContainer_dispose(!0),m=pe=i=te=ke=we=lt=null}},e.extend(e.Tabs,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Pad=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G){var v="width, cols, rows, keys, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, spacing, currentEnabled, currentSelected, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",w;if(w=mt(e.Pad,arguments,v,this))return w;qe("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=$;var h=he===!1?{}:e.getStyle(this.type,this.group,G);n(t)&&(t=h.width!=null?h.width:150),n(r)&&(r=h.cols!=null?h.cols:3),n(i)&&(i=h.rows!=null?h.rows:r);var I;if(n(o))if(h.keys!=null)o=h.keys;else for(o=[],I=1;I<=i*r;I++)o.push(I);n(k)&&(k=h.currentEnabled!=null?h.currentEnabled:!0),n(S)&&(S=h.spacing!=null?h.spacing:1);var Q=this,x;this.cols=r,this.rows=i;var F=t/r-S,Ae=[],Y=0,K;for(this.labels=[],this.buttons=[],I=0;I<i;I++){for(var ge=[],ye=0;ye<r;ye++)ge.push(o[Y]!=null?o[Y]:""),Y++;var ee=h.corner!=null?h.corner:A;ee&&!Array.isArray(ee)&&(ee=[ee,ee,ee,ee]),K=Ae[I]=new e.Tabs({width:t,height:F,tabs:ge,backgroundColor:h.backgroundColor!=null?h.backgroundColor:l,rollBackgroundColor:h.rollBackgroundColor!=null?h.rollBackgroundColor:f,downBackgroundColor:h.downBackgroundColor!=null?h.downBackgroundColor:d,selectedBackgroundColor:h.selectedBackgroundColor!=null?h.selectedBackgroundColor:p,color:h.color!=null?h.color:P,rollColor:h.rollColor!=null?h.rollColor:T,downColor:h.downColor!=null?h.downColor:R,selectedColor:h.selectedColor!=null?h.selectedColor:b,spacing:h.spacing!=null?h.spacing:S,currentEnabled:h.currentEnabled!=null?h.currentEnabled:k,currentSelected:h.currentSelected!=null?h.currentSelected:m,corner:ee,backing:h.backing!=null?h.backing.clone():X,rollBacking:h.rollBacking!=null?h.rollBacking.clone():Z,base:null,keyEnabled:!1,gradient:h.gradient!=null?h.gradient:C,gloss:h.gloss!=null?h.gloss:E,wait:h.wait!=null?h.wait:V,waitTime:h.waitTime!=null?h.waitTime:O,waitBackgroundColor:h.waitBackgroundColor!=null?h.waitBackgroundColor:ne,rollWaitBackgroundColor:h.rollWaitBackgroundColor!=null?h.rollWaitBackgroundColor:N,waitColor:h.waitColor!=null?h.waitColor:q,rollWaitColor:h.rollWaitColor!=null?h.rollWaitColor:U,waitModal:h.waitModal!=null?h.waitModal:z,waitEnabled:h.waitEnabled!=null?h.waitEnabled:ie,group:$,style:!1}),this.labels=this.labels.concat(K.labels),this.buttons=this.buttons.concat(K.buttons),this.addChild(K),K.selectedIndex=-1,K.y=(F+S)*I,K.znum=I,K.on("change",ce)}this.tabs=Ae;function ce(ve){var Re=ve.target;Q.selected=Re.selected,Q.text=Re.text,Q.label=Re.label;for(var se=Re.selectedIndex,Oe=0;Oe<Ae.length;Oe++)Re!=Ae[Oe]&&(Ae[Oe].selectedIndex=-1);x=Re.znum*r+se,Q.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&Q.stage&&Q.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return x},set:function(ve){x=ve;for(var Re=0;Re<Ae.length;Re++)Ae[Re].selectedIndex=-1;var se=Math.floor(x/r);se>=0&&se<Q.tabs.length&&(Q.tabs[se].selectedIndex=x%r)}}),this._enabled=!0,Object.defineProperty(Q,"enabled",{get:function(){return Q._enabled},set:function(ve){c(Q,ve)}}),n(ae)&&(ae=h.selectedIndex!=null?h.selectedIndex:0),Q.selectedIndex=ae,he!==!1&&e.styleTransforms(this,h),this.clone=function(){return Q.cloneProps(new e.Pad(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,this.group,G))},this.dispose=function(ve,Re,se){e.loop(Ae,function(Oe){Oe.dispose()}),this.labels=this.buttons=this.tabs=null,K=Ae=Q.rowTabs=null,se||this.zimContainer_dispose(!0)}},e.extend(e.Pad,e.Container,["clone","dispose"],"zimContainer",!1),e.NumPad=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z){var V="advanced, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, numberCorner, close, closeColor, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",O;if(O=mt(e.NumPad,arguments,V,this))return O;qe("57.7"),this.group=X;var ne=E===!1?{}:e.getStyle("NumPad",this.group,Z);n(t)&&(t=ne.advanced!=null?ne.advanced:!1);var N=t=="simple"?310:400,q=t=="simple"?440:t?620:530;n(r)&&(r=ne.titleBar!=null?ne.titleBar:"NUMPAD"),n(i)&&(i=ne.titleBarColor!=null?ne.titleBarColor:e.white),n(o)&&(o=ne.titleBarBackgroundColor!=null?ne.titleBarBackgroundColor:e.grey),n(l)&&(l=ne.titleBarHeight!=null?ne.titleBarHeight:40),n(f)&&(f=ne.backgroundColor!=null?ne.backgroundColor:e.darker),n(d)&&(d=ne.borderColor!=null?ne.borderColor:e.pewter),n(p)&&(p=ne.borderWidth!=null?ne.borderWidth:null),d<0||p<0?d=p=null:d!=null&&p==null&&(p=1),n(_)&&(_=ne.corner!=null?ne.corner:15),n(P)&&(P=ne.numberCorner!=null?ne.numberCorner:30),n(k)&&(k=ne.align!=null?ne.align:"left"),n(m)&&(m=ne.shadowColor!=null?ne.shadowColor:"rgba(0,0,0,.3)"),n(A)&&(A=ne.shadowBlur!=null?ne.shadowBlur:14),n(D)&&(D=ne.draggable!=null?ne.draggable:!0),n(C)&&(C=ne.boundary!=null?ne.boundary:null),n(T)&&(T=ne.close!=null?ne.close:!0),n(R)&&(R=ne.closeColor!=null?ne.closeColor:n(i)?e.grey:i),Array.isArray(_)||(_=[_,_,_,_]),n(b)&&(b=ne.collapse!=null?ne.collapse:!0),n(L)&&(L=ne.collapseColor!=null?ne.collapseColor:n(i)?e.grey:i),n(S)&&(S=ne.collapsed!=null?ne.collapsed:!1),this.zimPanel_constructor(N,q,null,r,i,o,l,f,d,p,_,T,R,null,null,null,b,L,S,k,m,A,D,C,E,X,Z),this.type="NumPad";var U=this;function z(ae,he){return n(he)&&(he=mist),{label:ae,backgroundColor:he,rollBackgroundColor:white,color:darker,rollColor:darker}}var ie=[z("C",e.red.darken(.1)),z(new e.Label({text:"\u2423",size:90,shiftV:-24}),e.yellow.darken(.1)),z(new e.Label({text:"/",size:48,bold:!0,shiftV:3})),z(new e.Label({text:"*",size:65,shiftV:18})),1,2,3,z(new e.Label({text:"-",size:60,shiftV:-3})),4,5,6,z(new e.Label({text:"+",size:55,shiftV:3})),7,8,9,z(new e.Label({text:"\u232B",size:M=="ios"?60:35}),e.red.darken(.1)),z(new e.Label({text:",",size:70,shiftV:-3})),z(new oi({text:".",size:70,shiftV:-3})),0,z(new e.Label({text:"\u23CE",size:M=="ios"?40:50,shiftV:5}),e.green.darken(.1))];t=="simple"?(ie.splice(0,4),ie.splice(3,1),ie.splice(6,1),ie.splice(10,2),ie[12]=ie[9],ie[9]=ie[10],ie[10]=ie[12]):t&&(ie.splice(2,0,z("%",yellow.darken(.1))),ie.splice(4,0,z(new e.Label({text:"^",size:47,shiftV:10}),yellow.darken(.1))),ie.splice(4,0,z(")",yellow.darken(.1))),ie.splice(4,0,z("(",yellow.darken(.1)))),U.pad=new e.Pad({width:t=="simple"?290:380,cols:t=="simple"?3:4,rows:t=="simple"?4:t?6:5,keys:ie,spacing:6,currentSelected:!1,backgroundColor:e.grey,rollBackgroundColor:e.tin,selectedBackgroundColor:e.grey,downBackgroundColor:e.green,corner:P}),U.pad.on("mousedown",function(){U.pad.text=="C"?U.key="clear":U.pad.text=="\u2423"?U.key="space":U.pad.text=="\u232B"?U.key="backspace":U.pad.text=="\u23CE"?U.key="enter":U.key=U.pad.text,U.dispatchEvent("pressed")}),U.add(U.pad,null,!0),E!==!1&&e.styleTransforms(this,ne),this.clone=function(){return U.cloneProps(new e.NumPad(t,r?r.clone():"",i,o,l,f,d,p,_,P,T,R,b,L,U.collapsed,k,m,A,D,C,E,this.group,Z))}},e.extend(e.NumPad,e.Panel,["clone"],"zimPanel",!1),e.DPad=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m){var A="axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",D;if(D=mt(e.DPad,arguments,A,this))return D;qe("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=k;var C=S===!1?{}:e.getStyle(this.type,this.group,m);n(t)&&(t=C.axis!=null?C.axis:"all"),n(r)&&(r=C.width!=null?C.width:100),n(i)&&(i=C.backgroundColor!=null?C.backgroundColor:e.granite),n(l)&&(l=C.borderColor!=null?C.borderColor:null),n(o)&&(o=C.borderWidth!=null?C.borderWidth:null),l<0||o<0?l=o=null:l!=null&&o==null&&(o=1),n(f)&&(f=C.indicatorColor!=null?C.indicatorColor:e.moon),n(d)&&(d=C.indicatorPressColor!=null?C.indicatorPressColor:e.lighter),n(p)&&(p=C.indicatorScale!=null?C.indicatorScale:1),n(_)&&(_=C.indicatorRadius!=null?C.indicatorRadius:null),n(P)&&(P=C.innerCircle!=null?C.innerCircle:!0),n(T)&&(T=C.innerScale!=null?C.innerScale:.5),n(R)&&(R=C.activeRadius!=null?C.activeRadius:r),n(b)&&(b=C.clamp!=null?C.clamp:!0),n(L)&&(L=C.logo!=null?C.logo:!1);var E=this;this.axis=t,this.outer=new e.Circle(r/2,i,l,o).addTo(this);var X=this.inner=new e.Circle(r*T/2,"rgba(0,0,0,.2)").center(this);L&&(this.logo=new e.Label({text:"D",bold:!0}).center(X).mov(1,2).alp(.3));var Z=new e.Container().addTo(this),V=(r-o)*.2*p,O=8;t=="vertical"?O=2:t=="horizontal"?(O=2,Z.rotation=90):t=="both"&&(O=4),e.loop(O,function(ae,he){new e.Triangle(V,V,V,f).addTo(Z).reg(null,n(_)?(r-o)*.475:_).rot(ae*360/he)});var ne=0,N=0,q;E.dirX=0,E.dirY=0;var U,z=!0;this.on("mousedown",function(ae){U=ae,Z.loop(function(he){he.color=d}),z?E.ticker=e.Ticker.add(function(){ie()}):e.Ticker.add(E.ticker)}),this.on("pressmove",function(ae){U=ae}),this.on("pressup",function(){e.Ticker.remove(E.ticker),E.dirX=E.dirY=0,Z.loop(function(ae){ae.color=f}),E.stage&&E.stage.update()});function ie(){var ae=U;ne=ae.stageX/e.scaX,N=ae.stageY/e.scaY,q=E.globalToLocal(ne,N),ae=new je.Event("change"),ae.dirX=((q.x+R)/(R*2)-.5)*2,ae.dirY=((q.y+R)/(R*2)-.5)*2,b&&(ae.dirX=e.constrain(ae.dirX,-1,1),ae.dirY=e.constrain(ae.dirY,-1,1)),E.dirX=ae.dirX,E.dirY=ae.dirY,E.dispatchEvent(ae)}this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(ae){c(E,ae)}}),S!==!1&&e.styleTransforms(this,C),this.clone=function(){return E.cloneProps(new e.DPad(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,this.group,m))},this.dispose=function(ae,he,$){return this.ticker&&e.Ticker.remove(this.ticker),$||this.zimContainer_dispose(!0),!0}},e.extend(e.DPad,e.Container,["clone","dispose"],"zimContainer",!1),e.Radial=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h){var I="labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",Q;if(Q=mt(e.Radial,arguments,I,this))return Q;qe("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=w;var x=v===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=x.labels!=null?x.labels:["A","B","C","D","E"]),n(r)&&(r=x.size!=null?x.size:30),n(i)&&(i=x.font!=null?x.font:"verdana"),n(d)&&(d=x.startAngle!=null?x.startAngle:null),n(p)&&(p=x.totalAngle!=null?x.totalAngle:360),n(_)&&(_=x.angles!=null?x.angles:null),n(P)&&(P=x.flip!=null?x.flip:!0),n(T)&&(T=x.shiftRadial!=null?x.shiftRadial:0),n(R)&&(R=x.icons!=null?x.icons:null),n(b)&&(b=x.rollIcons!=null?x.rollIcons:null),n(L)&&(L=x.rotateIcons!=null?x.rotateIcons:!1),n(S)&&(S=x.iconsShiftRadial!=null?x.iconsShiftRadial:0),n(o)&&(o=x.height!=null?x.height:60),n(l)&&(l=x.coreRadius!=null?x.coreRadius:100),n(f)&&(f=x.coreColor!=null?x.coreColor:e.dark),n(C)&&(C=x.backdropColor!=null?x.backdropColor:e.clear),n(k)&&(k=x.backgroundColor!=null?x.backgroundColor:e.granite),n(m)&&(m=x.rollBackgroundColor!=null?x.rollBackgroundColor:e.tin),n(A)&&(A=x.selectedBackgroundColor!=null?x.selectedBackgroundColor:e.charcoal),n(D)&&(D=x.selectedRollBackgroundColor!=null?x.selectedRollBackgroundColor:A),n(E)&&(E=x.color!=null?x.color:e.white),n(X)&&(X=x.rollColor!=null?x.rollColor:E),n(Z)&&(Z=x.selectedColor!=null?x.selectedColor:E),n(V)&&(V=x.selectedRollColor!=null?x.selectedRollColor:X),n(O)&&(O=x.borderColor!=null?x.borderColor:e.dark),n(ne)&&(ne=x.borderWidth!=null?x.borderWidth:2),n(U)&&(U=x.gapAsAngle!=null?x.gapAsAngle:!1),n(q)&&(q=x.gap!=null?x.gap:U?3:6),n(N)&&(N=x.gradient!=null?x.gradient:null),N===!0&&(N=.1),n(z)&&(z=x.spacing!=null?x.spacing:6),n(ie)&&(ie=x.spacingInner!=null?x.spacingInner:z),n(ae)&&(ae=x.spacingOuter!=null?x.spacingOuter:z),n(he)&&(he=x.currentEnabled!=null?x.currentEnabled:!1),n($)&&($=x.currentSelected!=null?x.currentSelected:!0);var F=this,Ae=this.innerRadius=l+ie,Y=this.outerRadius=Ae+o;this.setBounds(-Y,-Y,Y*2,Y*2);var K=this.backdrop=new e.Circle(Y+ae,C).center(this);if(l>0&&(this.core=new e.Circle(l,f).center(this)),_&&_.length<t.length-1)return kt&&ht("Radial() - not enough angles provided"),this;if(t&&t.length>0||R&&R.length>0){var ge;if(t&&t.length>0&&(ge=t.length),R&&R.length>0&&(ge>0?ge=Math.min(R.length,ge):ge=R.length),b&&b.length<ge)for(var ye=0;ye<ge-b.length;ye++)b.push(new e.Circle(1,e.clear));var ee=K.width,ce=this.buttons=new e.Container(-ee/2,-ee/2,ee,ee).centerReg(this),ve=q;U||(q=q/Y*180/Math.PI,ve=ve/Ae*180/Math.PI);for(var Re=(p-q*ge+(p==360?0:q))/ge,se=d||0,Oe=0;Oe<ge;Oe++){_&&(Re=_[Oe]);var J=new e.Shape(-ee/2,-ee/2,ee,ee).centerReg(ce);J.num=Oe,J.zimSelected=!1,J.angle=Re;var xe=J.graphics;J.backgroundColor=e.Pick.choose(k),J.rollBackgroundColor=e.Pick.choose(m),J.selectedBackgroundColor=e.Pick.choose(A),J.selectedRollBackgroundColor=e.Pick.choose(D),J.color=e.Pick.choose(E),J.rollColor=e.Pick.choose(X),J.selectedColor=e.Pick.choose(Z),J.selectedRollColor=e.Pick.choose(V),J.colorCommand=xe.f(J.backgroundColor).command,(n(ne)||ne>0)&&(!n(O)||!n(ne))&&(n(O)&&(O=e.black),J.borderColorCommand=xe.s(O).command,J.borderWidthCommand=xe.ss(ne).command);var te=(se-90-Re/2)*Math.PI/180,we=(se-90+Re/2)*Math.PI/180,ke=(se-90+(Re+q-ve)/2)*Math.PI/180,pe=(se-90-(Re+q-ve)/2)*Math.PI/180;if(xe.arc(0,0,Y,te,we,!1),xe.arc(0,0,Ae,ke,pe,!0).cp(),N&&(xe.s().ss().rf(["rgba(0,0,0,"+N+")","rgba(255,255,255,"+N+")"],[0,1],0,0,Ae,0,0,Y),xe.arc(0,0,Y,te,we,!1),xe.arc(0,0,Ae,ke,pe,!0).cp()),J.cur("pointer"),J.zimOverEvent=J.on("mouseover",function(We){var oe=We.target;oe.colorCommand.style=oe==F.selected&&$?oe.selectedRollBackgroundColor:oe.rollBackgroundColor,oe.label&&(oe.label.color=oe==F.selected&&$?oe.selectedRollColor:oe.rollColor),b&&(oe.holder.removeAllChildren(),b[oe.num].loc(1,0,oe.holder)),F.stage&&F.stage.update()}),J.zimOutEvent=J.on("mouseout",function(We){var oe=We.target;oe.colorCommand.style=oe==F.selected&&$?oe.selectedBackgroundColor:oe.backgroundColor,oe.label&&(oe.label.color=oe==F.selected&&$?oe.selectedColor:oe.color),b&&(oe.holder.removeAllChildren(),R&&R[oe.num].loc(1,0,oe.holder)),F.stage&&F.stage.update()}),J.zimDownEvent=J.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(We){var oe=We.target,Ye=oe!==F.selected;F.lastSelected=F.selected,_e=oe.num,$?Ye?(F.selected&&(F.selected.colorCommand.style=F.selected.backgroundColor,F.selected.label&&(F.selected.label.color=F.selected.color)),F.selected=oe,F.label=oe.label,F.label&&(F.text=F.label.text),F.icon=oe.icon,oe.colorCommand.style=oe.selectedRollBackgroundColor,oe.label&&(oe.label.color=oe.selectedRollColor)):he||(_e=-1,F.selected=null,F.label=null,F.text=null,F.icon=null,oe.colorCommand.style=oe.rollBackgroundColor,oe.label&&(oe.label.color=oe.rollColor)):(F.selected=oe,F.label=oe.label,F.label&&(F.text=F.label.text),F.icon=oe.icon),F.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&F.stage&&F.stage.update()}),R&&R.length>0){var Me=Ae+o/2+S,Ue=J.holder=new e.Container(3,Me).addTo(this).reg(1,Me).rot(se);Ue.mouseChildren=!1,Ue.mouseEnabled=!1,J.icon=R[Oe],R[Oe].loc(1,0,Ue),L||(R[Oe].rotation=-se)}if(t&&t.length>0){var ue;if(t[Oe].type!="LabelOnArc"){var Ee=t[Oe].type=="Label"?t[Oe]:new e.Label({text:t[Oe],size:r,font:i,color:E,style:v,inherit:h});ue=new e.LabelOnArc({label:Ee,color:E,size:r,spacing:-5,flip:P&&se>90&&se<270,radius:Ae+(o-Ee.height)/2+2+T,style:v,inherit:h})}else ue=t[Oe];t[Oe]=ue,J.label=ue,ue.center(this).rot(se),ue.mouseChildren=!1,ue.mouseEnabled=!1}if(Oe!=t.length-1){var Te=_?_[Oe+1]:Re;se+=(Re+Te)/2+q}}n(d)||(F.rotation+=F.buttons.getChildAt(0).angle/2)}var _e=null;Object.defineProperty(this,"selectedIndex",{get:function(){return _e},set:function(We){var oe;F.buttons&&(oe=F.buttons.getChildAt(We)),oe!==F.selected&&(F.selected&&(F.selected.colorCommand.style=F.selected.backgroundColor,F.selected.label&&(F.selected.label.color=F.selected.color)),F.selected=oe,oe&&($&&(oe.colorCommand.style=oe.selectedRollBackgroundColor),oe.label&&($&&(oe.label.color=oe.selectedColor),F.text=oe.label.text))),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&F.stage&&F.stage.update()}}),n(G)&&(G=x.selectedIndex!=null?x.selectedIndex:0),F.selectedIndex=G,v!==!1&&e.styleTransforms(this,x),this.clone=function(){return F.cloneProps(new e.Radial(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,this.group,h))}},e.extend(e.Radial,e.Container,"clone","zimContainer",!1),e.RadialMenu=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h){var I="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",Q=I.split(", "),x=!1;if(t&&t.constructor==={}.constructor){for(var F in t)if(Q.indexOf(F)>=0){x=!0;break}}if(t&&x){var Ae;if(Ae=mt(e.RadialMenu,arguments,I,this))return Ae}qe("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=w;var Y=v===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=Y.menu!=null?Y.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),n(r)&&(r=Y.size!=null?Y.size:30),n(i)&&(i=Y.font!=null?Y.font:"verdana"),n(_)&&(_=Y.startAngle!=null?Y.startAngle:null),n(P)&&(P=Y.totalAngle!=null?Y.totalAngle:360),n(T)&&(T=Y.flip!=null?Y.flip:!0),n(b)&&(b=Y.rotateIcons!=null?Y.rotateIcons:!1),n(R)&&(R=Y.shiftRadial!=null?Y.shiftRadial:0),n(L)&&(L=Y.iconsShiftRadial!=null?Y.iconsShiftRadial:0),n(o)&&(o=Y.height!=null?Y.height:60),n(l)&&(l=Y.coreRadius!=null?Y.coreRadius:100),n(f)&&(f=Y.coreColor!=null?Y.coreColor:e.dark),n(d)&&(d=Y.title!=null?Y.title:"MENU"),n(p)&&(p=Y.titleIcon!=null?Y.titleIcon:null),n(D)&&(D=Y.backdropColor!=null?Y.backdropColor:e.clear),n(S)&&(S=Y.backgroundColor!=null?Y.backgroundColor:e.granite),n(k)&&(k=Y.rollBackgroundColor!=null?Y.rollBackgroundColor:e.tin),n(m)&&(m=Y.selectedBackgroundColor!=null?Y.selectedBackgroundColor:e.charcoal),n(A)&&(A=Y.selectedRollBackgroundColor!=null?Y.selectedRollBackgroundColor:m),n(C)&&(C=Y.color!=null?Y.color:e.white),n(E)&&(E=Y.rollColor!=null?Y.rollColor:C),n(X)&&(X=Y.selectedColor!=null?Y.selectedColor:C),n(Z)&&(Z=Y.selectedRollColor!=null?Y.selectedRollColor:E),n(V)&&(V=Y.borderColor!=null?Y.borderColor:e.dark),n(O)&&(O=Y.borderWidth!=null?Y.borderWidth:2),n(q)&&(q=Y.gapAsAngle!=null?Y.gapAsAngle:!1),n(N)&&(N=Y.gap!=null?Y.gap:q?3:6),n(U)&&(U=Y.spacing!=null?Y.spacing:6),n(ne)&&(ne=Y.gradient!=null?Y.gradient:null),ne===!0&&(ne=.1),n(z)&&(z=Y.spacingInner!=null?Y.spacingInner:U),n(ie)&&(ie=Y.spacingOuter!=null?Y.spacingOuter:U),n(ae)&&(ae=Y.currentEnabled!=null?Y.currentEnabled:!1),n(he)&&(he=Y.currentSelected!=null?Y.currentSelected:!0),n($)&&($=Y.open!=null?Y.open:!1),n(G)&&(G=Y.under!=null?Y.under:!0);var K=this,ge=(Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",ye=null,ee=this.core=new e.Circle({radius:l,color:f,style:v,inherit:h}).addTo(this);p&&(this.titleIcon=p.center(ee)),d&&(this.title=new e.Label({text:d,size:r,font:i,color:C,style:v,inherit:h}).center(ee)),ee.cur("pointer"),ee.on(ge,function(){K.leafNode=!1,se.length==0?Oe():(e.loop(se,function(xe){xe.selectedIndex=-1,xe.removeFrom(),se=[]}),K.outerLevel=0,K.selected=K.outerMenu=K.selectedMenu=K.text=null),(ae||K.selected!=ye)&&K.dispatchEvent("change"),ye=K.selected,K.stage&&K.stage.update()}),this.closeRings=function(xe){n(xe)&&(xe=K.outerLevel);var te=K.outerLevel-xe;e.loop(se,function(we,ke){ke>te-1&&(we.removeFrom(),we.selectedIndex=-1,se.pop())},!0),K.outerLevel=te,K.outerMenu=se[se.length-1],K.outerMenu&&(K.outerMenu.selectedIndex=-1),K.selected=K.selectedMenu=K.text=null,se[se.length-2]?(K.selectedMenu=se[se.length-2],K.selectedIndex=K.selectedMenu.selectedIndex):K.selectedIndex=-1,K.selected!=ye&&K.dispatchEvent("change"),ye=K.selected,K.stage&&K.stage.update()};var ce={},ve,Re;K.outerLevel=0,t.constructor=={}.constructor&&(t={core:t},ve=K.tree=new e.Hierarchy(t),Re=ve.getLinearIDs()),K.lastRadial=null;var se=this.radials=[];$&&Oe();function Oe(xe){var te,we;xe?te=xe.ringLevel:(te=0,we=l),e.loop(se,function(Me,Ue){Ue>te-1&&(Me.removeFrom(),Me.selectedIndex=-1,se.pop())},!0);var ke;if(xe&&(ke=xe.selected),ke){var pe=ke.id;we=xe.outerRadius,J(pe,te+1,we)}else xe||J("id0",te+1,we);K.selected=ke,K.selected?(K.selectedMenu=se[K.selected.menu.ringLevel-1],K.selectedIndex=K.selected.num,K.selected.label?K.text=K.selected.label.text:K.text=null):ae&&xe?(K.selectedIndex=xe.selectedIndex,K.label=xe.label,K.text=xe.text,K.icon=xe.icon,K.selectedMenu=xe):(K.text=null,K.selectedIndex=-1,K.selectedMenu=null),K.stage&&K.stage.update()}function J(xe,te,we){te&&(K.outerLevel=te);var ke;if(!ce[xe]){var pe=ve.getData(xe),Me=pe.list;if(Me&&!e.isEmpty(Me)){var Ue={labels:ve.getLinearList(Me),coreRadius:we,size:r,font:i,startAngle:_,totalAngle:P,flip:T,rotateIcons:b,shiftRadial:R,iconsShiftRadial:L,height:o,coreColor:e.clear,backdropColor:D,backgroundColor:S,rollBackgroundColor:k,selectedBackgroundColor:m,selectedRollBackgroundColor:A,color:C,rollColor:E,selectedColor:X,selectedRollColor:Z,borderColor:V,borderWidth:O,gapAsAngle:q,gap:N,gradient:ne,spacingInner:z,spacingOuter:ie,currentSelected:he,currentEnabled:ae,style:v,inherit:h};pe.styles&&(Ue=e.merge(Ue,pe.styles)),ke=ce[xe]=new e.Radial(Ue),Re=ve.getLinearIDs(Me),ke.buttons.loop(function(ue,Ee){ue.menu=ke,ue.id=Re[Ee]}),ke.ringLevel=K.outerLevel,ke.selectedIndex=-1,ke.on("change",function(ue){K.leafNode=!1,Oe(ue.target),(ae||K.selected!=ye)&&K.dispatchEvent("change"),ye=K.selected})}}ce[xe]?(se.push(ce[xe]),ce[xe].center(K),G&&ce[xe].bot()):(K.leafNode=!0,K.outerLevel-=1),K.outerMenu=ke}v!==!1&&e.styleTransforms(this,Y),this.clone=function(){return K.cloneProps(new e.RadialMenu(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,this.group,h))}},e.extend(e.RadialMenu,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U){var z="width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, style, group, inherit",ie;if(ie=mt(e.ColorPicker,arguments,z,this))return ie;qe("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=q;var ae=N===!1?{}:e.getStyle(this.type,this.group,U),he;n(t)&&(t=ae.width!=null?ae.width:500),n(r)&&(r=ae.colors!=null?ae.colors:"spectrum"),r=="legacy"&&(he=!0),n(i)&&(i=ae.cols!=null?ae.cols:10),n(o)&&(o=ae.spacing!=null?ae.spacing:2);var $=!he&&r.length>0&&r.length<=i;r=="spectrum"&&(i=10,o=2,$=!1),n(f)&&(f=ae.alphaPicker!=null?ae.alphaPicker:!$),n(O)&&(O=ae.tolerancePicker!=null?ae.tolerancePicker:!1),O&&(f=!1),n(l)&&(l=ae.greyPicker!=null?ae.greyPicker:!$),n(_)&&(_=ae.shadowColor!=null?ae.shadowColor:"rgba(0,0,0,.3)"),n(P)&&(P=ae.shadowBlur!=null?ae.shadowBlur:14),n(T)&&(T=ae.buttonBar!=null?ae.buttonBar:!$),n(p)&&(T||r=="spectrum"?p=ae.draggable!=null?ae.draggable:!0:p=ae.draggable!=null?ae.draggable:!1),n(R)&&(R=ae.circles!=null?ae.circles:!1),n(b)&&(b=ae.indicator!=null?ae.indicator:!1,T||(b=ae.indicator!=null?ae.indicator:!0)),n(L)&&(L=ae.backgroundColor!=null?ae.backgroundColor:e.black),n(d)&&(d=ae.startBackgroundColor!=null?ae.startBackgroundColor:null),n(S)&&(S=ae.keyArrows!=null?ae.keyArrows:!0),n(D)&&(D=ae.dropperTarget!=null?ae.dropperTarget:!1),n(C)&&(C=ae.spectrumCollapse!=null?ae.spectrumCollapse:!0),n(E)&&(E=ae.spectrumMode!=null?ae.spectrumMode:!0),n(X)&&(X=ae.spectrumClose!=null?ae.spectrumClose:!0),n(Z)&&(Z=ae.spectrumOk!=null?ae.spectrumOk:!0),n(V)&&(V=ae.spectrumTitle!=null?ae.spectrumTitle:null),n(ne)&&(ne=ae.collapsed!=null?ae.collapsed:!1);var G=this;if(n(k))if(fe.zdf)k=fe.zdf.stage;else return;else if(k.getBounds){if(n(k.getStage))return}else return;G.container=k;var v="#e472c4",w="#50c4b7",h=1,I=1,Q=new e.Shape;this.addChild(Q),Q.x+=o,Q.y+=o,he=!1;var x,F,Ae=[],Y,K,ge,ye,ee,ce=r=="spectrum";if(n(r)||r=="legacy"||r=="spectrum"){he=!0;var ve=6,Re=ve*ve*ve;ve=Math.ceil(Math.pow(Re,1/2)),F=(t-o)/18-o,ee=Math.floor(Math.pow(ve*ve,1/3)),x=[];for(var se=0;se<6;se++)for(var Oe=0;Oe<6;Oe++)for(var J=0;J<6;J++)x.push("#"+Me(se*3)+Me(Oe*3)+Me(J*3));for(r=[],se=0;se<x.length;se++)Y=Math.floor(se/6),K=se%6,Y>=6*3?ee=1:ee=0,ge=Y-ee*6*3,ye=K+ee*6,r[ye*18+ge]=x[se];i=18,Ae=[w,v]}else F=(t-o)/i-o;var xe=Math.ceil(r.length/i),te=1,we=String(r[r.length-1]);if(!n(d)){var ke=d.match(/rgba\((.*)\)/);ke&&(Y=ke[1].split(","),te=Y.pop(),d="rgb("+Y.join(",")+")"),we=String(d)}var pe;he&&(pe=w);function Me(It){return It=Math.floor(It).toString(16),It+""+It}ee=0;var Ue=Q.graphics,ue,Ee,Te=ae.borderColor!=null?ae.borderColor:null,_e=ae.borderWidth!=null?ae.borderWidth:null;!n(Te)&&n(_e)&&(_e=1),_e&&n(Te)&&(Te=e.dark),_e&&Ue.s(Te).ss(_e);var We=r.length;for(ce&&(We=56),se=0;se<We;se++)Y=se%i,K=Math.floor(se/i),ue=Y*(F+o),Ee=K*(F+o),R?Ue.f(r[se]).dc(ue+F/2,Ee+F/2,F/2):Ue.f(r[se]).r(ue,Ee,F,F);var oe=Ee+F+o;G.colors=r;var Ye=oe;if(l){for(se=0;se<16;se++)Ae.push("#"+Me(se)+Me(se)+Me(se));for(se=0;se<Ae.length;se++)Y=Math.floor(se/i),K=se%i,ue=K*(F+o),Ee=Y*(F+o)+oe,R?Ue.f(Ae[se]).dc(ue+F/2,Ee+F/2,F/2):Ue.f(Ae[se]).r(ue,Ee,F,F);oe=Ee+F+o;var Ve=i,De=Math.ceil(Ae.length/i)}G.greys=Ae,b&&!ce&&(b=this.indicator=R?new e.Circle(F/2*.5,null,null,null,null,null,null,null,!1):new e.Rectangle(F*.5,F*.5,null,null,null,null,null,null,null,!1),b.alpha=.5,b.centerReg(),this.addChild(b),b.mouseEnabled=!1,de(r.indexOf(we)));function de(It){if(n(It)||It<0){b.visible=!1;return}else b.visible=!0;we=="#000"||we=="#000000"||we=="black"?(b.color="#222",b.alpha=1):(b.color="black",b.alpha=.5),b.x=Q.x+It%i*(F+o)+F/2,b.y=Q.x+Math.floor(It/i)*(F+o)+F/2}var Be=10,Qe=oe;if(f||O){var Ke=new e.Container({style:!1});Ke.setBounds(0,0,600,70),this.addChild(Ke),Ke.x=0,Ke.y=oe;var lt=this.alphaBacking=new e.Rectangle(600-Be*2,50,e.licorice,null,null,0,null,null,null,!1);Ke.addChild(lt),e.centerReg(lt,Ke);var gt=this.alphaBut=new e.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),He=this.alphaSlider=new e.Slider({min:0,max:1,step:O?0:.05,button:gt,barLength:O?500*.55:600*.55,barWidth:2,barColor:e.silver,vertical:!1,useTicks:!1,inside:!1,style:!1});He.currentValue=n(te)?1:te,O&&(He.currentValue=.1),Ke.addChild(He),He.x=40,He.y=Ke.height/2;var it=this.alphaText=new e.Label({text:O?"Tolerance: 0.1":"Alpha: "+e.decimals(te),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});Ke.addChild(it),it.x=He.x+He.bar.width+40,it.y=Ke.height/2-it.height/2,Ke.scaleX=Ke.scaleY=t/600,He.on("change",function(){it.text=O?"Tolerance: "+Qt(He.currentValue):"Alpha: "+Qt(He.currentValue),f&&Je&&(Je.alpha=I=He.currentValue),G.dispatchEvent("change"),G.stage&&G.stage.update()}),oe+=Ke.height-Be,O&&(G.toleranceBacking=G.alphaBacking,G.toleranceBut=G.alphaBut,G.toleranceSlider=G.alphaSlider,G.alphaBacking=G.alphaBut=G.alphaSlider=null)}if(T){var ft=new e.Container({style:!1});ft.setBounds(0,0,600,100),this.addChild(ft),ft.x=0,ft.y=oe+Be;var Se=this.swatchText=new e.TextInput({align:"left",selectionAlpha:.5,text:we.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(Se.on("input",function(){(Se.text.length==4||Se.text.length==7)&&(Je.color=Se.text,we=Je.color,G.dispatchEvent("change"))}),ft.addChild(Se),e.centerReg(Se),Se.x=200/2-10,Se.y=50-2,p){var Fe=this.grip=new e.Shape({style:!1});Fe.cur("pointer"),ft.addChild(Fe),Fe.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),Fe.x=70,Fe.y=65,Se.y=50-10,Fe.mouseEnabled=!1}var me=this.closeBut=new e.Button({width:90,height:90,label:"X",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});ft.addChild(me),me.x=600-me.width-Be,me.y=0,me.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){G.hide(),G.dispatchEvent("close")});var $e=this.okBut=new e.Button({width:150,height:90,label:"OK",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});ft.addChild($e),$e.x=me.x-$e.width-Be,$e.y=0,$e.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Pt(),G.dispatchEvent("ok")});var st=this.swatchBacking=new e.Shape({style:!1});ft.addChild(st),Ue=st.graphics,Ue.f(e.black).r(.5,.5,50,89).f(e.granite).r(50,.5,50,89).f(e.white).r(100,.5,49.5,89),st.x=$e.x-150-Be,st.y=0;var Je=this.swatch=new e.Rectangle(150,90,we,null,null,null,null,null,null,!1);ft.addChild(Je),Je.x=st.x,Je.y=0,Je.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){G.dispatchEvent("swatch")}),Je.cur("pointer"),Je.alpha=I=te,ft.scaleX=ft.scaleY=t/600,oe+=ft.height}else Q.cur("pointer");!f&&!T&&(oe-=Be-o);var rt=oe+Be;this.setBounds(0,0,t,rt);var Ce=this.background=new e.Rectangle(t,rt,L,null,null,null,null,null,null,!1);this.addChildAt(Ce,0),_!=-1&&P>0&&(Ce.shadow=new je.Shadow(_,8,8,P));var ut=fe.zdf,ze,Xe=!1;if(this.dropperTarget=D,ce){r="spectrum";var Ze=30,ot=20,Ge=Qe-Ze+1,et=Ge-ot+1,pt=G.bar=new e.Rectangle(G.width,Ze+1,e.black).addTo(G);V&&(G.title=new e.Label(V,18,null,e.light).pos(12,1,LEFT,CENTER,G.bar).noMouse()),p&&pt.cur();var Le=new e.Container(G.width,Ge).loc(0,Ze,G),tt=new e.Rectangle(G.width,et,new e.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,3/6,4/6,5/6,6/6],0,0,500,0)).addTo(Le).mov(0,ot-1);new e.Rectangle(G.width,et/2,new e.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,et/2)).loc(tt,null,Le),new e.Rectangle(G.width,et/2+.5,new e.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,et/2+.5)).loc(tt,null,Le).mov(0,et/2),new e.Rectangle(G.width,20,new e.GradientColor(["black","white"],[.1,.9],0,0,G.width,0)).addTo(Le);var vt=G.gradient=new e.Bitmap(Le).loc(Le,null,G).cur("none"),nt=G.pixels=new e.Pixel(Le,.5).loc(Le,null,G).vis(!1).cur("none");Le.dispose();var Tt;!T&&X&&(Tt=G.closeIcon=new e.Shape(-40,-40,80,80,null,!1),Tt.graphics.f(e.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),Tt.sca(.25).expand(10,10,10,1).pos(7,0,e.RIGHT,e.CENTER,pt).cur().addTo(G),Tt.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){G.hide(),G.dispatchEvent("close")}));var xt=G.collapseIcon=new e.Triangle(20,20,20,e.faint,e.light,2).expand(10,10,10,1).pos(40+(Tt?30:0),0,e.RIGHT,e.CENTER,pt).cur().addTo(G);xt.on("mousedown",function(){G.collapse(xt.rotation==0)});var Ct=new e.Rectangle(20,20,e.white).reg("center");new e.Tile(new e.Rectangle(10,10,e.series(e.silver,e.white,e.white,e.silver)),2,2,0,0).addTo(Ct),Ct.mouseChildren=!1;var ct=G.modeIcon=new e.Button({width:20,height:20,shadowColor:-1,label:"",backing:Ct,toggleEvent:"mousedown",toggleBacking:new e.Rectangle(20,20,new e.GradientColor([e.white,e.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(Tt?30:0),5,e.RIGHT,e.TOP,G).expand(10,10,10,1);ct.on("mousedown",function(){nt.vis(ct.toggled),G.spectrumToggled=!ct.toggled,ut.stage.update()}),E||(ct.removeFrom(),xt.mov(28)),C||xt.removeFrom(),Z||G.okBut&&G.okBut.removeFrom(),!X&&me&&me.removeFrom();var Rt=new e.Rectangle(G.width,G.height-Ge-Ze,e.faint).pos(0,0,e.LEFT,e.BOTTOM,G).noMouse(),At=this.dropper=new e.Circle(10,e.clear,e.white,8);new e.Circle(5,e.clear,e.black,2).center(At),new e.Circle(7,e.clear,e.white,2).center(At),At.noMouse()}this.updateDropperTarget=function(){At.vis(!1),Ot(),At.vis(!0).top()},this.spectrumToggled=ce,this.toggleSpectrum=function(It){It!=G.spectrumToggled&&(n(It)&&(It=!G.spectrumToggled),G.spectrumToggled=It,ct.toggle(!It),nt.vis(!It),G.updateDropperTarget())};var bt=!1;function Ft(){ut.stage.mouseInBounds?At.alp(1):At.alp(0),At.loc(ut.mouseX,ut.mouseY,ut.stage),bt=G.spectrumToggled?vt.hitTestReg(At):nt.hitTestReg(At);var It;G.dropperTarget?It=At.x>=ze.x&&At.x<=ze.x+ze.width&&At.y>=ze.y&&At.y<=ze.y+ze.height:It=!1;var Wt;if(G.dropperTarget?Wt=(bt||It)&&!Rt.hitTestReg(At)&&!pt.hitTestReg(At):Wt=bt,!Xe&&Wt)Yt(It);else if(Xe&&!Wt){$t(),ut.stage.update();return}if(Wt){var xn;if(bt)xn=G.spectrumToggled?vt:nt;else if(G.dropperTarget)xn=ze;else return;var zt=xn.globalToLocal(ut.mouseX,ut.mouseY),ln=xn.getColorAt(zt.x,zt.y,!0),Fn="rgba("+ln[0]+","+ln[1]+","+ln[2]+","+ln[3]+")";ln[3]<.05&&(Fn=ut.color),At.borderColor=Fn,ut.stage.update()}}function Yt(It){Xe=!0,It&&Ot(),At.vis(!0).top()}function $t(){Xe=!1,ze.dispose(),At.vis(!1)}this.collapsed=!1,this.collapse=function(It){n(It)&&(It=!0),It!=G.collapsed&&(G.collapsed=It,It?(ct.enabled=!1,xt.rot(180),G.background.vis(!1),vt.vis(!1),Rt.vis(!1),Q.visible=!1,nt&&nt.vis(!1),Ke&&Ke.vis(!1),T&&ft.vis(!1),Xe=!1,nn(),Zt(),G.dispatchEvent("collapsed")):(ct.enabled=!0,xt.rot(0),G.background.vis(!0),vt.vis(!0),Rt.vis(!0),Q.visible=!0,G.spectrumToggled||nt.vis(!0),Ke&&Ke.vis(!0),T&&ft.vis(!0),Xe=!0,sn(),Ot(),pt.hitTestReg(At)&&Zt(),G.dispatchEvent("expanded")),ut.stage.update())},ce&&C&&(G.collapseEvent=pt.on("dblclick",function(){G.collapsed?G.collapse(!1):G.collapse(!0)})),ce&&ne&&C&&(G.vis(!1),setTimeout(function(){G.collapse(!0),G.vis(!0),G.stage&&G.stage.update()},50));function sn(){nn(),G.dropperDown=ut.stage.on("stagemousedown",Ft),G.dropperMove=ut.stage.on("stagemousemove",Ft),G.dropperUp=ut.stage.on("stagemouseup",function(){Ft(),Je&&ce&&bt&&Je.color!=At.borderColor&&at()})}function nn(){G.dropperDown&&ut.stage.off("stagemousedown",G.dropperDown),G.dropperMove&&ut.stage.off("stagemousemove",G.dropperMove),G.dropperUp&&ut.stage.off("stagemouseup",G.dropperUp)}function Ot(){ze&&ze.dispose&&ze.dispose();var It=new e.Rectangle(ut.width,ut.height,ut.color).addTo(ut.stage,0),Wt;G.dropperTarget&&G.dropperTarget.getBounds&&G.dropperTarget.type&&!G.dropperTarget.type.includes("Stage")?Wt=G.dropperTarget.boundsToGlobal():Wt=ut.stage.getBounds(),ze=new e.Bitmap(ut.stage,Wt.width,Wt.height,Wt.x,Wt.y).loc(Wt).cur("none"),It.dispose(),ze.on("mousedown",at)}function Zt(){ze&&ze.dispose&&ze.dispose(),At.vis(!1)}function at(){At.vis(!1),G.currentValue=e.convertColor(At.borderColor,"hex"),G.dispatchEvent("change"),Xe&&(D?(Ot(),At.vis(!0).top(),setTimeout(function(){G.updateDropperTarget(),ut.stage.update()},50)):(At.vis(!0).top(),ut.stage.update()))}function Pt(){if(he&&l){w=v,v=pe;var It=[w,v];for(se=0;se<2;se++){var Wt=Q.graphics;Y=Math.floor(se/i),K=se%i,ue=K*(F+o),Ee=Y*(F+o)+Ye,Ae[se]=It[se],Wt.f(Ce.color).r(ue-1,Ee-1,F+2,F+2).f(It[se]).r(ue,Ee,F,F)}}pe=we,h=I,G.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&G.stage&&G.stage.update()}if(p){var Dt,Ut;Ce.on("mousedown",Gt),Ce.on("pressmove",wt),Ce.on("pressup",Bt),ce&&(pt.on("mousedown",Gt),pt.on("pressmove",wt),pt.on("pressup",Bt))}function Gt(It){Dt=It.stageX/e.scaX-G.x,Ut=It.stageY/e.scaY-G.y}function wt(It){G.x=It.stageX/e.scaX-Dt,G.y=It.stageY/e.scaY-Ut,G.stage&&G.stage.update()}function Bt(){G.stage&&G.stage.update()}var Ht=i*(F+o),Jt=xe*(F+o);if(l)var cn=Ve*(F+o),jt=De*(F+o);Q.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(It){var Wt=e.hitTestGrid(Q,Ht,Jt,i,xe,It.stageX,It.stageY,0,0,o,o);n(Wt)||(we=r[Wt],T&&(Je.color=we,Se.text=String(r[Wt]).toUpperCase()),Pt()),l&&(Wt=null,Wt=e.hitTestGrid(Q,cn,jt,Ve,De,It.stageX,It.stageY,0,Jt,o,o),n(Wt)||(we=Ae[Wt],T&&(Je.color=we,Se.text=Ae[Wt].toUpperCase()),Pt())),b&&de(r.indexOf(we)),T?G.stage&&G.stage.update():b&&G.stage&&G.stage.update(),en()}),Object.defineProperty(this,"selectedColor",{get:function(){return we},set:function(It){It=It.toLowerCase(),pe=we=It,T&&(Je.color=we,Se.text=we,G.stage&&G.stage.update()),b&&!ce&&de(r.indexOf(we)),en()}}),Object.defineProperty(this,"currentValue",{get:function(){return we},set:function(It){G.selectedColor=It}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return we},set:function(It){It!=G.selectedColor&&(G.selectedColor=It,G.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ce?null:r.indexOf(we)},set:function(It){ce||(pe=we=r[It],T&&(Je.color=we,Se.text=we,G.stage&&G.stage.update()),b&&de(r.indexOf(we)),en())}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return f?Qt(He.currentValue):1},set:function(It){f&&(h=He.currentValue=It,Je&&(Je.alpha=h),it&&(it.text="Alpha: "+Qt(He.currentValue)),G.stage&&G.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return O?Qt(He.currentValue):1},set:function(It){O&&(He.currentValue=It,G.stage&&G.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return ce?"spectrum":l?r.concat(Ae):r},set:function(){kt&&ht("ColorPicker() colors is read only - make a new ColorPicker to change")}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==G},set:function(){Lt?e.KEYFOCUS=G:fe.KEYFOCUS=G}}),S&&e.KEYFOCUS&&an(),this.on("mousedown",function(){S&&an()});function an(){G.keyFocus=!0;var It=document.activeElement;It&&It.blur()}function en(){G.zimAccessibility&&G.zimAccessibility.changeTitle(G,null,!0)}this.keyDownEvent=function(It){if(G.stage&&!ce&&(G.zimAccessibility&&G.focus||!G.zimAccessibility&&G.keyFocus)){var Wt=G.selectedIndex;It.keyCode==37||It.keyCode==40?(Wt--,yn(Wt)):(It.keyCode==38||It.keyCode==39)&&(Wt++,yn(Wt))}};function yn(It){It<0&&(It=G.colors.length-1),It>G.colors.length-1&&(It=0),G.selectedIndex=It,G.dispatchEvent("change"),G.stage&&G.stage.update()}fe.addEventListener("keydown",this.keyDownEvent);var St,ut;this.hide=function(){return St=G.stage,G.removeFrom(),St&&St.update(),G},this.on("removed",Mt);function Mt(){if(ce&&(Xe=!1,nn(),Zt()),G.toggled=!1,G.zimAccessibility){var It=G.zimAccessibility;It.resize(G),qt?qt.focus():G.zimTabTag.nextSibling.focus(),setTimeout(function(){It.talk("ColorPicker has been closed.")},50)}St&&St.update()}var qt,Xt=!1;this.show=function(){return G.center(G.container),G};function rn(){if(G.stage&&(St=G.stage,ut=St.frame),G.zimAccessibility){var It=G.zimAccessibility;setTimeout(function(){It.activatedObject&&(qt=It.activatedObject.zimTabTag)},50),It.resize(G),It.tabIndex=G.zimTabIndex}G.toggled=!0,setTimeout(function(){ce&&(Xe=!0,Ot(),sn(),Yt(),Ft()),G.stage&&G.stage.update()},20)}this.on("added",rn),this.toggle=function(It){return It===!0?G.show():It===!1||G.container.contains(G)?G.hide():G.show(),G};function Qt(It){return Math.round(It*Math.pow(10,2))/Math.pow(10,2)}n(m)&&(m=ae.selectedIndex!=null?ae.selectedIndex:0),G.selectedIndex=m,n(A)&&(A=ae.selectedColor!=null?ae.selectedColor:null),A!=null?G.selectedColor=A:ce&&(G.selectedColor="#888888"),N!==!1&&e.styleTransforms(this,ae),this.clone=function(){return G.cloneProps(new e.ColorPicker(t,he?null:r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,this.group,U))},this.dispose=function(It,Wt,xn){return fe.removeEventListener("keydown",G.keyDownEvent),ce&&(nn(),G.gradient.cur("default"),G.pixels.cur("default"),D&&D.cur("default"),ze.cur("default"),Xe=!1,Zt()),He&&He.dispose(),At&&At.dispose(),G.dropperDown&&ut.stage.off("stagemousedown",G.dropperDown),G.dropperMove&&ut.stage.off("stagemousemove",G.dropperMove),G.dropperUp&&ut.stage.off("stagemouseup",G.dropperUp),xn||this.zimContainer_dispose(!0),!0}},e.extend(e.ColorPicker,e.Container,["clone","dispose"],"zimContainer",!1),e.EmojiPicker=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D){var C="width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",E;if(E=mt(e.EmojiPicker,arguments,C,this))return E;qe("67.05"),this.group=A;var X=m===!1?{}:e.getStyle("EmojiPicker",this.group,D);n(t)&&(t=X.width!=null?X.width:400),n(r)&&(r=X.height!=null?X.height:600),n(o)&&(o=X.monochrome!=null?X.monochrome:!1),n(l)&&(l=X.backgroundColor!=null?X.backgroundColor:e.lighter),n(f)&&(f=X.titleBar!=null?X.titleBar:"Emojis"),n(d)&&(d=X.titleBarColor!=null?X.titleBarColor:null),n(p)&&(p=X.titleBarBackgroundColor!=null?X.titleBarBackgroundColor:e.silver.toAlpha(.8)),n(_)&&(_=X.titleBarHeight!=null?X.titleBarHeight:40),n(P)&&(P=X.cache!=null?X.cache:!!e.mobile()),n(T)&&(T=X.size!=null?X.size:30),n(S)&&(S=X.colSize!=null?X.colSize:T+15),n(k)&&(k=X.rowSize!=null?X.rowSize:T+14),n(R)&&(R=X.collapse!=null?X.collapse:!1),n(b)&&(b=X.collapseColor!=null?X.collapseColor:n(d)?e.grey:d),n(L)&&(L=X.collapsed!=null?X.collapsed:!1),this.zimWindow_constructor(t,r,null,l,null,X.borderWidth!=null?X.borderWidth:2,X.padding!=null?X.padding:10,X.corner!=null?X.corner:10,null,X.scrollBarActive!=null?X.scrollBarActive:!0,X.scrollBarDrag!=null?X.scrollBarDrag:!0,null,null,null,!1,null,null,null,null,null,!0,null,null,null,null,null,null,f,d,p,_,X.draggable!=null?X.draggable:!0,null,null,X.close!=null?X.close:!0,null,null,X.fullSize!=null?X.fullSize:!1,null,X.resizeHandle!=null?X.resizeHandle:!1,R,b,L,null,null,m,A,e.copy(X)),this.type="EmojiPicker";var Z=this;this.emojiData=n(i)?["\u{1F4A5}","\u{1F335}","\u{1F382}","\u{1F370}","\u{1F429}","\u{1F525}","\u{1F32B}","\u{1F30A}","\u{1F34F}","\u{1F34E}","\u{1F34B}","\u{1F34C}","\u{1F347}","\u{1F351}","\u{1F345}","\u{1F346}","\u{1F9C0}","\u{1F355}","\u{1F36C}","\u{1F36D}","\u{1F369}","\u{1F37A}","\u{1F37B}","\u{1F378}","\u{1F37E}","\u2615\uFE0F","\u{1F4A9}","\u{1F47B}","\u{1F916}","\u{1F4A4}","\u{1F440}","\u{1F483}","\u{1F483}\u{1F3FB}","\u{1F483}\u{1F3FC}","\u{1F483}\u{1F3FD}","\u{1F483}\u{1F3FE}","\u{1F483}\u{1F3FF}","\u{1F454}","\u{1F457}","\u{1F459}","\u{1F458}","\u{1F460}","\u{1F452}","\u{1F3A9}","\u{1F431}","\u{1F43B}","\u{1F436}","\u{1F43C}","\u{1F42F}","\u{1F981}","\u{1F42E}","\u{1F437}","\u{1F419}","\u{1F435}","\u{1F412}","\u{1F414}","\u{1F426}","\u{1F434}","\u{1F984}","\u{1F41D}","\u{1F422}","\u{1F420}","\u{1F410}","\u{1F54A}","\u{1F415}","\u{1F408}","\u{1F409}","\u{1F432}","\u{1F384}","\u{1F340}","\u{1F33B}","\u{1F339}","\u{1F490}","\u{1F344}","\u2600\uFE0F","\u{1F327}","\u26BD\uFE0F","\u{1F3C0}","\u{1F3C8}","\u26BE\uFE0F","\u{1F3BE}","\u{1F3D2}","\u26F7","\u{1F3C4}","\u{1F3CA}","\u{1F6B4}","\u{1F3AD}","\u{1F3A8}","\u{1F3B7}","\u{1F3BA}","\u{1F3B8}","\u{1F3BB}","\u{1F3B0}","\u{1F3B3}","\u{1F697}","\u{1F695}","\u{1F68C}","\u{1F68E}","\u{1F691}","\u{1F692}","\u{1F69C}","\u{1F682}","\u2708\uFE0F","\u26F5\uFE0F","\u{1F6F0}","\u{1F301}","\u{1F30B}","\u{1F3DE}","\u{1F305}","\u{1F386}","\u{1F308}","\u{1F3E0}","\u{1F3E5}","\u{1F3EB}","\u231A\uFE0F","\u{1F4F1}","\u{1F5A5}","\u{1F4BE}","\u{1F4FC}","\u{1F3A5}","\u260E\uFE0F","\u{1F4FA}","\u{1F4FB}","\u{1F4E1}","\u{1F56F}","\u{1F4B0}","\u{1F48E}","\u{1F6AC}","\u26B0","\u{1F52E}","\u{1F488}","\u{1F6BD}","\u{1F511}","\u{1F6CF}","\u{1F389}","\u{1F38A}","\u2764\uFE0F","\u{1F921}","\u{1F600}","\u{1F62C}","\u{1F601}","\u{1F602}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F607}","\u{1F609}","\u{1F60A}","\u{1F642}","\u{1F643}","\u263A\uFE0F","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F911}","\u{1F913}","\u{1F60E}","\u{1F917}","\u{1F60F}","\u{1F636}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F644}","\u{1F914}","\u{1F633}","\u{1F61F}","\u{1F620}","\u{1F614}","\u{1F615}","\u{1F641}","\u2639\uFE0F","\u{1F623}","\u{1F62B}","\u{1F629}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F62F}","\u{1F626}","\u{1F622}","\u{1F62A}","\u{1F613}","\u{1F62D}","\u{1F635}","\u{1F632}","\u{1F910}","\u{1F637}","\u{1F912}","\u{1F915}","\u{1F634}","\u{1F480}","\u2620\uFE0F","\u{1F47D}","\u{1F63A}","\u{1F638}","\u{1F639}","\u{1F63B}","\u{1F63C}","\u{1F63D}","\u{1F640}","\u{1F63F}","\u{1F63E}","\u{1F444}","\u{1F48B}","\u{1F445}","\u{1F5E3}","\u{1F464}","\u{1F465}","\u{1F456}","\u{1F463}","\u{1F461}","\u{1F462}","\u{1F45E}","\u{1F45F}","\u{1F393}","\u{1F451}","\u{1F45C}","\u{1F45B}","\u{1F4BC}","\u{1F453}","\u{1F576}","\u{1F48D}","\u{1F302}","\u2744\uFE0F","\u{1F32A}","\u26A1\uFE0F","\u{1F951}","\u{1F98B}","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F427}","\u{1F577}","\u{1F982}","\u{1F980}","\u{1F40D}","\u{1F41B}","\u{1F40C}","\u{1F41E}","\u{1F41C}","\u{1F41F}","\u{1F421}","\u{1F42C}","\u{1F433}","\u{1F40B}","\u{1F40A}","\u{1F406}","\u{1F332}","\u{1F333}","\u{1F334}","\u{1F331}","\u{1F33F}","\u{1F343}","\u{1F342}","\u{1F341}","\u{1F33A}","\u{1F33C}","\u{1F338}","\u{1F330}","\u{1F383}","\u{1F41A}","\u{1F578}","\u{1F30E}","\u{1F30D}","\u{1F30F}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F31A}","\u{1F31D}","\u{1F31B}","\u{1F31C}","\u{1F31E}","\u{1F319}","\u2B50\uFE0F","\u{1F31F}","\u{1F4AB}","\u2728","\u2604\uFE0F","\u{1F354}","\u{1F373}","\u{1F35F}","\u{1F32D}","\u{1F35D}","\u{1F32E}","\u{1F32F}","\u{1F363}","\u{1F368}","\u{1F366}","\u{1F377}","\u{1F379}","\u{1F3C6}","\u{1F3AA}","\u{1F3B9}","\u{1F680}","\u26F2\uFE0F","\u{1F3A2}","\u26F0","\u{1F3D4}","\u{1F5FB}","\u{1F4AF}","\u{1F3B5}","\u{1F3B6}","\u{1F4AC}","\u{1F4AD}","\u{1F5EF}","\u{1F0CF}","\u{1F3F3}\uFE0F\u200D\u{1F308}","\u{1F953}","\u{1F943}","\u{1F3A4}","\u{1F6A8}","\u{1F3CD}","\u{1F3D5}","\u26FA\uFE0F","\u{1F3DC}","\u{1F3D6}","\u{1F3DD}","\u{1F307}","\u{1F306}","\u{1F3D9}","\u{1F303}","\u{1F3D8}","\u{1F3E1}","\u{1F3E2}","\u{1F528}","\u2699","\u{1F52B}","\u{1F4A3}","\u{1F52A}","\u{1F48A}","\u{1F573}","\u{1F489}","\u{1F6C1}","\u26F1","\u{1F381}","\u{1F388}","\u{1F380}","\u{1F4C5}","\u{1F5F3}","\u{1F4DA}","\u270F\uFE0F","\u26AA\uFE0F","\u26AB\uFE0F","\u2B1B\uFE0F","\u2B1C\uFE0F","\u{1F5BC}","\u{1F3DA}","\u{1F3ED}","\u{1F532}","\u{1F533}","\u{1F3B1}","\u{1F53A}","\u{1F53B}","\u{1F4A6}","\u26F3\uFE0F","\u{1F3DF}","\u{1F4A1}","\u{1F52D}","\u{1F52C}","\u{1F570}","\u{1F42A}","\u{1F42B}","\u{1F418}","\u{1F438}","\u{1F430}","\u{1F42D}","\u{1F6AA}","\u{1F6CD}","\u{1F441}","\u{1F353}","\u{1F352}","\u{1F336}","\u{1F33D}","\u{1F360}","\u{1F36F}","\u{1F35E}","\u{1F36B}","\u{1F37F}","\u{1F36A}","\u{1F34A}","\u{1F3F9}","\u{1F46F}","\u{1F46F}\u200D\u2642\uFE0F","\u{1F5D1}"]:i;var V=[];e.loop(this.emojiData,function(O){var ne=new e.Emoji(O,T,o);V.push(ne)}),this.wrapper=new e.Wrapper({items:V,width:t,alignInner:e.CENTER,valignInner:e.CENTER,wrapperType:"column",colSize:S,rowSize:k}).cur(),this.backdrop=new e.Rectangle(this.wrapper.width,this.wrapper.height,e.faint),e.timeout(.2,function(){Z.scrollBar&&Z.scrollBar.vertical&&Z.scrollBar.vertical.getBounds()&&Z.scrollBar.vertical.expand(),Z.backdrop.heightOnly=Z.wrapper.height,P&&Z.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(O){Z.currentEmoji=O.target,Z.dispatchEvent("change")}),m!==!1&&e.styleTransforms(this,X),this.clone=function(){return Z.cloneProps(new e.EmojiPicker(t,r,m,this.group,D))},this.dispose=function(){return!0}},e.extend(e.EmojiPicker,e.Window,["clone","dispose"],"zimWindow",!1),e.TextEditor=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G){var v="width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",w;if(w=mt(e.TextEditor,arguments,v,this))return w;qe("67.1"),this.group=$;var h=he===!1?{}:e.getStyle("TextEditor",this.group,G);if(n(t)&&(t=h.width!=null?h.width:400),n(i)&&(i=h.backgroundColor!=null?h.backgroundColor:e.lighter),n(b)&&(b=h.titleBar!=null?h.titleBar:"Text Editor"),n(q)&&(q=h.draggable!=null?h.draggable:!0),n(k)&&(k=h.titleBarHeight!=null?h.titleBarHeight:30),n(o)&&(o=h.fieldColor!=null?h.fieldColor:i.darken(.05)),n(T)&&(T=h.live!=null?h.live:!0),n(m)&&(m=h.wrap!=null?h.wrap:!0),n(D)&&(D=h.scroll!=null?h.scroll:!0),n(V)&&(V=h.margin!=null?h.margin:10),n(A)&&(A=h.limit!=null?h.limit:null),n(b)&&(b=h.titleBar!=null?h.titleBar:null),n(d)&&(d=h.sizeList!=null?h.sizeList:null),n(_)&&(_=h.colorList!=null?h.colorList:null),n(p)&&(p=h.optionList!=null?h.optionList:null),n(P)&&(P=h.fontList!=null?h.fontList:null),n(o)&&(o=h.fieldColor!=null?h.fieldColor:null),n(l)&&(l=h.fieldHeight!=null?h.fieldHeight:null),n(f)&&(f=h.textSize!=null?h.textSize:null),n(ie)&&(ie=h.fontListHeight!=null?h.fontListHeight:100),n(ae)&&(ae=h.fontListViewNum!=null?h.fontListViewNum:3),typeof z>"u")if(fe.zdf)var z=fe.zdf;else{kt&&ht("zim.TextEditor - please provide a reference to zim Frame");return}this.zimPanel_constructor(t,300,null,b,L,S,k,i,X,Z,O,!0,null,null,null,null,null,null,null,null,ne,N,q,U,he,$,G);var I=this;n(R)&&(R=new e.Button({width:50,height:50,label:"",icon:new e.Shape().sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:e.white,corner:10,backgroundColor:e.green.darken(.2),borderColor:e.white,borderWidth:2,rollBackgroundColor:e.green,shadowBlur:3}).pos(V,k+V*2,e.RIGHT,e.TOP,I)),I.button=R,R.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",Q),n(l)&&(l=h.fieldHeight!=null?h.fieldHeight:R.height+V*2);function Q(){T||(F.text=x.text),I.hide(),I.dispatchEvent("set")}var x=I.textArea=new e.TextArea({color:r,backgroundColor:o,width:t-R.width-V*3,height:n(l)?R.height+V*2:l,expand:10,password:E,placeholder:C,frame:z}).loc(V,k+V+(l&&l<R.height+V*2?(R.height-l)/2+V:0),null,null,!1);m||(x.tag.style.whiteSpace="nowrap"),A&&x.tag.setAttribute("maxLength",A),D&&(x.tag.style.overflowY="auto");var F=new e.Label;I.on("pressmove",function(){x.resize()}),I.on("close",function(){I.inputEvent&&x.off("input",I.inputEvent),x.removeFrom()}),I.panelHeight=k+V+Math.max(l,R.height+V*2)+V;var Ae=e.mobile(),Y=Ae?35:30;if(d||p||_){new e.Rectangle(t,Y+V,"rgba(0,0,0,.05)").loc(0,I.panelHeight,I);var K=[];if(_){var ge=Array.isArray(_),ye=I.colorPicker=new e.ColorPicker({colors:ge?_:null,cols:ge?Math.min(_.length,12):null,alphaPicker:!1,greyPicker:!ge,container:z.stage});ye.on("close",Oe),ye.on("change",function(){F.color=r.color=ye.selectedColor,I.dispatchEvent("update"),Oe()}),I.closeColorPicker=function(){Oe()},r=I.swatch=new e.Rectangle(Y,Y,F.color,e.dark,1).cur(),r.on("mousedown",function(){I.dispatchEvent("color"),x.tag.style.display="none",ye.selectedColor=r.color,ye.show(),I.stage&&I.stage.update()}),K.push(r)}if(p){p===!0&&(p=["bold","italic","align"]),n(fe.STYLE)&&(fe.STYLE={}),n(fe.STYLE.group)&&(fe.STYLE.group={}),fe.STYLE.group.zimEditor={width:Y,height:Y,corner:0,borderColor:e.tin,shadowBlur:-1,backgroundColor:e.light,rollBackgroundColor:e.light,toggleBackgroundColor:e.green,toggleColor:e.grey};var ee,ce,ve;e.loop(p,function(ke){if(ke.toLowerCase()=="bold")ee=I.bold=new e.Button({label:new e.Label({text:"B",color:e.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"}),ee.on("click",function(){F.bold=ee.toggled,I.dispatchEvent("update"),I.stage&&I.stage.update()}),K.push(ee),F.bold&&ee.toggle();else if(ke.toLowerCase()=="italic")ce=I.italic=new e.Button({label:new e.Label({text:"I",color:e.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"}),ce.on("click",function(){F.italic=ce.toggled,I.dispatchEvent("update"),I.stage&&I.stage.update()}),K.push(ce),F.italic&&ce.toggle();else if(ke.toLowerCase()=="align"){var pe=new e.Tile(new e.Rectangle(Y-10,Y-10,e.grey).centerReg(),3,1,10,10),Me=Ae?["\u21DA","\u21D4","\u21DB"]:["\u21D0","\u21D4","\u21D2"];e.loop(3,function(ue){var Ee=pe.getChildAt(ue);new e.Label(Me[ue],Y*2/3,null,e.white).center(Ee).expand(10)});var Ue=0;F.align=="right"?Ue=2:(F.align=="center"||F.align=="middle")&&(Ue=1),ve=I.align=new e.Selector({tile:pe,corner:0,borderWidth:1,borderColor:e.grey,backgroundColor:e.clear,selectedIndex:Ue}),ve.on("change",function(){ve.selectedIndex==0?F.align="left":ve.selectedIndex==1&&(F.align="center"),ve.selectedIndex==2&&(F.align="right"),I.dispatchEvent("update"),I.stage&&I.stage.update()}),K.push(ve)}}),delete fe.STYLE.group.zimEditor}if(d){var Re=I.sizePicker=new e.Stepper({list:d===!0?null:d,stepperType:d===!0?null:"list",min:d===!0?5:null,max:d===!0?500:null,width:150,shadowBlur:-1,borderColor:e.dark,borderWidth:2,corner:0,backgroundColor:e.green,downForward:!1}).siz(null,Y);Re.arrowPrev.expand(0),Re.textBox.color=e.lighter,Re.on("change",function(){F.size=Re.currentValue,I.dispatchEvent("update"),I.stage&&I.stage.update()}),Re.currentValue=F.size,K.push(Re)}var se=new e.Tile(K,K.length,1,10,10,!0).loc(V,I.panelHeight+V/2,I);I.panelHeight=I.panelHeight+V+se.height+V}function Oe(){x.tag.style.display="block",ye.hide(),I.stage&&I.stage.update()}var J;if(P){Array.isArray(P)?J=P:(J=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],Ae||(J=J.concat(["Comic Sans MS","Impact"])),J.sort());var xe=I.fonts=new e.List({width:t-V*2,height:ie,viewNum:ae,backgroundColor:e.moon,color:e.grey,rollColor:e.dark,rollBackgroundColor:e.green.lighten(.5),selectedBackgroundColor:e.mist,selectedRollBackgroundColor:e.green.lighten(.6),selectedColor:e.dark,backdropColor:e.light,scrollBarColor:e.dark,shadowBlur:-1,list:J}).center(I).loc(null,I.panelHeight);xe.on("change",function(){F.font=xe.currentValue,I.dispatchEvent("update"),I.stage&&I.stage.update()}),I.panelHeight=I.panelHeight+V+xe.height+V}I.show=function(ke,pe,Me,Ue){if(I.parent)return ke==I.label||(I.label=ke),I;F=ke,x.addTo(I);var ue;if(F&&F.stage)ue=F.stage;else if(Ue)ue=Ue.stage;else if(fe.zdf)ue=fe.zdf.stage;else return I;return!n(pe)||!n(Me)?I.loc(pe,Me):F&&F.y>ue.height/2?I.loc(ue.width/2-t/2,F.y-I.panelHeight-ue.height*.05,ue):F&&F.y<=ue.height/2?I.loc(ue.width/2-t/2,F.y+F.height+ue.height*.05,ue):I.center(ue),I.y<20&&(I.y=20),I.y+I.height>I.stage.height&&(I.y=I.stage.height-I.height-20),te(),I.stage.update(),I};function te(){F&&(x.text=F.text),r&&(r.color=F.color),ee&&ee.toggle(F.bold==!0),ce&&ce.toggle(F.italic==!0),ve&&(ve.noAnimate=!0,F.align=="center"?ve.selectedIndex=1:F.align=="right"?ve.selectedIndex=2:ve.selectedIndex=0),Re&&(Re.currentValue=F.size),xe&&(xe.currentValue=F.font),I.inputEvent&&x.off("input",I.inputEvent),I.inputEvent=x.on("input",function(){T&&F&&(F.text=x.text),I.dispatchEvent("input"),I.dispatchEvent("update"),I.stage&&I.stage.update()})}I.hide=function(){if(_&&ye.hide(),x&&x.removeFrom(),!n(I.stage)){var ke=I.stage;return I.removeFrom(),ke.update(),I}},fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==I},set:function(){e.KEYFOCUS=I}}),e.KEYFOCUS||we(),this.on("mousedown",function(){we()});function we(){I.keyFocus=!0}Object.defineProperty(I,"label",{get:function(){return F},set:function(ke){F=ke,te()}}),he!==!1&&e.styleTransforms(this,h),this.clone=function(){return I.cloneProps(new e.TextEditor(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,this.group,G))},this.dispose=function(ke,pe,Me){return I.inputEvent&&x.off("input",I.inputEvent),ye&&ye.dispose(),r&&r.dispose(),xe&&xe.dispose(),R&&R.dispose(),x&&x.dispose(),ve&&ve.dispose(),ee&&ee.dispose(),ce&&ce.dispose(),Re&&Re.dispose(),Me||this.zimPanel_dispose(),I.stage&&I.stage.update(),I.textArea=I.color=I.colorPicker=I.font=I.button=I.selector=I.bold=I.italic=I.size=null,!0}},e.extend(e.TextEditor,e.Panel,["clone","dispose"],"zimPanel",!1),e.Keyboard=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G){var v="labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, placeShiftH, placeShiftV, special, rtl, hardKeyboard, layout, numPadScale, numPadDraggable, numPadOnly, numPadAdvanced, maxLength, numbersOnly, style, group, inherit",w;if(w=mt(e.Keyboard,arguments,v,this))return w;qe("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=$;var h=he===!1?{}:e.getStyle(this.type,this.group,G);n(t)&&(t=h.labels!=null?h.labels:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=h.backgroundColor!=null?h.backgroundColor:e.dark),n(i)&&(i=h.color!=null?h.color:e.white),n(o)&&(o=h.shiftBackgroundColor!=null?h.shiftBackgroundColor:"orange"),n(l)&&(l=h.shiftHoldBackgroundColor!=null?h.shiftHoldBackgroundColor:"red"),n(f)&&(f=h.placeBackgroundColor!=null?h.placeBackgroundColor:e.blue),n(d)&&(d=h.placeColor!=null?h.placeColor:i),n(p)&&(p=h.cursorColor!=null?h.cursorColor:e.blue),n(_)&&(_=h.shadeAlpha!=null?h.shadeAlpha:.2),n(P)&&(P=h.borderColor!=null?h.borderColor:"rgba(0,0,0,.1)"),n(T)&&(T=h.borderWidth!=null?h.borderWidth:null),P<0||T<0?P=T=null:P!=null&&T==null&&(T=1),n(R)&&(R=h.margin!=null?h.margin:5),n(b)&&(b=h.corner!=null?h.corner:30),n(L)&&(L=h.draggable!=null?h.draggable:!1),n(S)&&(S=h.placeClose!=null?h.placeClose:!0),n(k)&&(k=h.shadowColor!=null?h.shadowColor:"rgba(0,0,0,.2)"),n(m)&&(m=h.shadowBlur!=null?h.shadowBlur:14),n(D)&&(D=h.data!=null?h.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]]]),D[3]||(D[3]={e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]});var I=this;n(C)&&(C=h.place!=null?h.place:!0),n(E)&&(E=h.placeShiftH!=null?h.placeShiftH:0),n(X)&&(X=h.placeShiftV!=null?h.placeShiftV:0),n(V)&&(V=h.rtl!=null?h.rtl:!1),n(O)&&(O=h.hardKeyboard!=null?h.hardKeyboard:!0),n(N)&&(N=h.numPadScale!=null?h.numPadScale:.8),n(U)&&(U=h.numPadOnly!=null?h.numPadOnly:!1),n(q)&&(q=h.numPadDraggable!=null?h.numPadDraggable:!0),n(z)&&(z=h.numPadAdvanced!=null?h.numPadAdvanced:!1),n(ie)&&(ie=h.maxLength!=null?h.maxLength:null),n(ae)&&(ae=h.numbersOnly!=null?h.numbersOnly:!1),this.maxLength=ie,this.numbersOnly=ae,n(ne)&&(ne=h.layout!=null?h.layout:"qwerty"),ne=ne.toLowerCase(),ne!="qwerty"&&(ne=="arabic"?D=[[["\u0636","\u0635","\u062B","\u0642","\u0641","\u063A","\u0639","\u0647","\u062E","\u062D","\u062C"],["\u0634","\u0633","\u064A","\u0628","\u0644","\u0627","\u062A","\u0646","\u0645","\u0643","\u0637"],["\u0630","\u0621","\u0624","\u0631","\u0649","\u0629","\u0648","\u0632","\u0638","\u062F","back"],["?123","\u0640"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{\u0627:["\u0623","\u0625","\u0622","\u0621"],\u0649:["\u0626"],\u0621:["\u0626","\u0624"],\u0648:["\u0624"],\u0640:["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],"*":["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],n:["\xF1","\u0144"]}]:ne=="hebrew"?D=[[["\u05E7","\u05E8","\u05D0","\u05D8","\u05D5","\u05DF","\u05DD","\u05E4","backspace"],["\u05E9","\u05D3","\u05D2","\u05DB","\u05E2","\u05D9","\u05D7","\u05DC","\u05DA","\u05E3"],["\u05D6","\u05E1","\u05D1","\u05E0","\u05D4","\u05DE","\u05E6","\u05EA","\u05E5"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:ne=="azerty"?D=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","\xB4","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:ne=="turkish"&&(D=[[["q","w","e","r","t","y","u","\u0131","o","p","\u011F","\xFC"],["a","s","d","f","g","h","j","k","l","\u015F","i"],["shift","z","x","c","v","b","n","m","\xF6","\xE7","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]},{\u0131:"I",i:"\u0130"},{I:"\u0131",\u0130:"i"}])),I.data=D;var Q="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(n(A))if(fe.zdf)A=fe.zdf.stage;else{ht(Q);return}else if(A.getBounds){if(n(A.stage)){ht("zim display - Keyboard(): The container must have a stage property");return}}else{ht(Q);return}k!=-1&&m>0&&(I.shadow=new je.Shadow(k,3,3,m));var x=fe.zdf?fe.zdf.stage:null;I.labels=t;var F,Ae=10;e.loop(D[0],function(Ge){Ge.length>Ae&&(Ae=Ge.length)});var Y=Ae,K=["/","",",",".","numpad","away"];n(Z)||K.splice(1,0,Z);var ge=e.copy(D[0]);ge[3]=ge[3].concat(K);var ye=e.copy(D[1]);ye[3]=ye[3].concat(K);var ee=e.copy(D[2]);ee[3]=ee[3].concat(K);var ce=[],ve=(1e3-(Y-1)*5)/Y,Re={def:"default",shift:"shift",number1:"number1",number2:"number2"},se=Re.def,Oe,J,xe,te=!1,we,ke,pe=0,Me,Ue=[],ue,Ee,Te,_e,We,oe,Ye,Ve;lt(),Qe(se),L&&gt(),this.on("mousedown",De);function De(Ge){x=I.stage,J&&I.removeChild(J),Me&&Ue.indexOf(Ge.target)<0&&me(),n(Ge.target.na)||(L&&Ge.target===Ye?(I.tickerMouseEvent=x.on("stagemousemove",function(et){I.mouseYAmount=et.stageY}),e.Ticker.add(it),I.on("pressup",ft),Ve=Ge.stageY-I.localToGlobal(0,0).y):!n(Z)&&Ge.target.na===Z?I.dispatchEvent("special"):Ge.target.na==="shift"?Be():Ge.target.toggle==="?123"?(I.removeChild(Oe),Qe(Re.number1)):Ge.target.toggle==="ABC"?(I.removeChild(Oe),se=Re.def,Qe(),te&&Be(!0)):Ge.target.toggle==="1/2"?(I.removeChild(Oe),Qe(Re.number2)):Ge.target.toggle==="2/2"?(I.removeChild(Oe),Qe(Re.number1)):Ge.target.na==="numpad"?He(Ge.target):Ge.target.na==="away"?(I.hideKeyboard(),I.dispatchEvent("close")):D[3]&&D[3][Ge.target.na]?Ke(Ge.target.na):Ge.target.na==="return"?$e("\n"):Ge.target.na==="backspace"||Ge.target.na==="back"?rt():Ge.target.na===""?$e(" "):$e(Ge.target.na),x.update())}I.addChar=function(Ge){!n(Ge)&&Ge.match(/^.$/)&&$e(Ge)},I.removeChar=function(){rt(!0)},I.clearText=function(){ke.text="",rt(!0),Je(),I.selectedIndex=0},I.setText=function(Ge){ke.text=Ge,Je(),I.selectedIndex=Ge.length};var de;function Be(Ge){var et=!1,pt,Le;if(se===Re.def){for(we.color=Ge?l:o,pt=0;pt<ce.length-6-(n(Z)?0:1);pt++)Le=ce[pt],Le.label.text.length>0&&(Le.na.length===1?(D[4]&&D[4][Le.label.text]?Le.label.text=D[4][Le.label.text]:Le.label.text=Le.label.text.toUpperCase(),Le.label.centerReg(Le).mov(0,6)):Le.label.centerReg(Le));Ge||(et=!0,setTimeout(tt,500),de=I.on("pressup",vt)),se=Re.shift}else{for(we.color=r,te=!1,pt=0;pt<ce.length-6;pt++)Le=ce[pt],Le.label.text.length>0&&(Le.na.length===1?(D[5]&&D[5][Le.label.text]?Le.label.text=D[5][Le.label.text]:Le.label.text=Le.label.text.toLowerCase(),Le.label.centerReg(Le).mov(0,3)):Le.label.centerReg(Le));se=Re.def}Oe.updateCache(),I.stage&&I.stage.update();function tt(){et&&(te=!0,we.color=l,Oe.updateCache(),I.stage&&I.stage.update())}function vt(){I.off("pressup",de),et=!1}}function Qe(Ge){var et,pt,Le,tt=0,vt=0,nt,Tt,xt=!1,Ct,ct,Rt=!1;n(Ge)&&(Ge=Re.def),Ge===Re.def?et=ge:Ge===Re.number1?et=ye:Ge===Re.number2&&(et=ee),I.keys=Oe=new e.Container(1e3,430,null,null,!1).addTo(I).vis(!U);for(var At=0;At<et.length;At++){(At<=1||Ge==Re.def&&At==2&&et[2][0]!="shift")&&(tt=(ve/2+2.5)*(Y-et[At].length));for(var bt=0;bt<et[At].length;bt++){if(xt=!1,Ct=null,Rt=!1,et[At][bt]=="backspace"?(Tt=!0,Ct=Ee,Rt=!0):et[At][bt]=="back"?(Tt=!1,Ct=Ee,Rt=!0):et[At][bt]=="shift"?(Tt=!0,Ct=ue):(At==3||Ge!=Re.def&&At==2)&&bt==0?(Tt=!0,Rt=!0):et[At][bt]==""?(Tt=!1,xt=!0):et[At][bt]=="numpad"?(Ct=_e,Tt=!1,Rt=!0):et[At][bt]=="away"?(Ct=Te,Tt=!0,Rt=!0):Tt=!1,Tt?nt=ve*1.5+2.5:xt?(nt=(ve+5)*((n(Z)?3:2)+Y-10+1-D[0][3].length)-5,D[0][3].indexOf("backspace")!=-1&&(nt-=ve/2)):nt=ve,Le=new e.Rectangle(nt,ve,r,P,T,b,null,null,null,!1).cur().addTo(Oe),Rt&&Le.addChild(new e.Rectangle(nt,ve,"black",null,null,b,null,null,null,!1).alp(_)),Ct?Le.label=pt=new e.Label({text:"",backgroundColor:"ignore",font:h.font!=null?h.font:null,style:!1}):Le.label=pt=new e.Label({lineWidth:10,lineHeight:25,font:h.font!=null?h.font:null,text:et[At][bt],color:i,align:"center",style:!1}),Ct){var Ft=Ct.clone(),Yt;et[At][bt]=="numpad"?(Yt=60,oe=Le):Yt=70,Ft.scaleTo(Le,Yt,Yt),Ft.centerReg(Le)}ct?(ct=!1,tt+=67.33):(pt.centerReg(Le).mov(0,isNaN(pt.text)?3:7),Le.x=tt,Le.y=vt,Le.na=et[At][bt],At==2&&bt==0&&Ge==Re.number1&&(Le.toggle="1/2"),At==2&&bt==0&&Ge==Re.number2&&(Le.toggle="2/2"),At==3&&bt==0&&Ge==Re.def&&(Le.toggle="?123"),At==3&&bt==0&&Ge!=Re.def&&(Le.toggle="ABC"),Le.toggle&&pt.mov(0,3),ce.push(Le),Le.na=="shift"&&(we=Le),tt=Le.x+Le.width+5)}vt+=ve+5,tt=0}Oe.cache(T?-T:0,T?-T:0,T?Oe.width+T*2:Oe.width,T?Oe.height+T*2:Oe.height)}function Ke(Ge){var et=D[3][Ge],pt=!1,Le=!1,tt;tt=e.timeout(500,Tt,null,"ms");var vt=I.on("pressup",nt);function nt(){pt=!0,I.off("pressup",vt),Le||$e(Ge)}function Tt(){var xt,Ct,ct,Rt=0,At;if(tt.clear(),!pt){Le=!0,J=new e.Container(1e3,ve,null,null,!1).addTo(I,0),J.y=-ve-5;for(var bt=0;bt<et.length;bt++)se===Re.shift?At=et[bt].toUpperCase():At=et[bt],xt=new e.Label({lineWidth:10,lineHeight:25,text:At,font:h.font!=null?h.font:null,color:i,align:"center",style:!1}),Ct=new e.Rectangle(ve,ve,r,P,T,b,null,null,null,!1).addTo(J),ct=new e.Rectangle(ve,ve,"white",null,null,b,null,null,null,!1).alp(.2),Ct.addChild(ct),xt.center(Ct),Ct.na=et[bt],Ct.x=Rt,Rt+=ve+5;I.stage&&I.stage.update()}}}function lt(){ue=new e.Shape({style:!1}),ue.graphics.f(i).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),ue.setBounds(-51/2,-72/2,51,72),Ee=new e.Container({style:!1});var Ge=new e.Shape({style:!1});Ge.graphics.f(i).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),Ge.setTransform(82.6,32),Ge.addTo(Ee);var et=new e.Shape({style:!1});et.graphics.f(i).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),et.setTransform(62.2,32),et.addTo(Ee),Ee.setBounds(0,0,125,64),Te=new e.Container({style:!1}),Te.setBounds(0,0,147,86);for(var pt=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],Le,tt=0;tt<pt.length;tt++)Le=new e.Shape({style:!1}),Le.graphics.f(i).s().p(pt[tt].p),Le.setTransform(pt[tt].transform[0],pt[tt].transform[1]),Le.addTo(Te);_e=new e.Container({style:!1}),_e.setBounds(0,0,62,86),We=new e.Container({style:!1}),We.setBounds(0,0,62,86);for(var vt=[{p:"Ai+heIF9AAIi/C9g",transform:[33,76,1,1,180]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]}],tt=0;tt<vt.length;tt++){var nt=new e.Shape({style:!1});nt.graphics.f(i).s().p(vt[tt].p),nt.setTransform(vt[tt].transform[0],vt[tt].transform[1],vt[tt].transform[2],vt[tt].transform[3],vt[tt].transform[4]),nt.addTo(_e);var Tt=new e.Shape({style:!1});Tt.graphics.f(i).s().p(vt[tt].p),Tt.setTransform(vt[tt].transform[0],vt[tt].transform[1]),Tt.addTo(We)}nt.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10),Tt.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10)}function gt(){Ye=new e.Rectangle(ve*1.5+2.5+2.5,ve,r,P,T,b,null,null,null,!1).addTo(I,0).cur();for(var Ge,et=0;et<4;et++)Ge=new e.Rectangle(Ye.width*.4,4,i,null,null,null,null,null,null,!1).centerReg(Ye).alp(.2),Ge.y-=-22+et*15;Ye.x=8.5*ve+40,Ye.y=-ve-5,Ye.na="drag"}function He(Ge){I.numPad||(I.numPad=new e.NumPad({advanced:z,draggable:q}).sca(N),q||U?I.numPad.center({add:!1}):I.numPad.pos({x:0,y:8,horizontal:"center",vertical:"bottom",add:!1}),I.numPad.on("pressed",function(){I.numPad.key=="enter"?I.dispatchEvent("enter"):I.numPad.key=="backspace"?I.removeChar():I.numPad.key=="clear"?I.clearText():I.numPad.key=="space"?$e(" "):$e(I.numPad.key)}),I.numPad.on("close",function(){oe.removeChildAt(2),_e.clone().scaleTo(oe,60,60).centerReg(oe,2),Oe.updateCache(),(!I.keys.parent||!I.keys.visible)&&xe&&(xe.visible=!1,I.toggled=!1,me())})),oe.removeChildAt(2),I.numPad.parent||Ge===!1?(I.numPad.removeFrom(),_e.clone().scaleTo(oe,60,60).centerReg(oe,2)):(!I.numPad.parent||Ge===!0)&&(I.numPad.addTo(),We.clone().scaleTo(oe,60,60).centerReg(oe,2)),Oe.updateCache(),I.stage&&I.stage.update()}function it(){I.mouseYAmount&&(I.y=I.parent.globalToLocal(0,I.mouseYAmount-Ve).y)}function ft(){x.off("pressmousemove",I.tickerMouseEvent),e.Ticker.remove(it)}I.setBounds(1e3,400-(Y-10)*26);function Se(){if(!(!ke||!xe)){for(var Ge=ke.label.x+ke.label.getBounds().x,et=0;et<pe;et++)Ge+=ke.widthArray[et]?ke.widthArray[et]:0;xe.heightOnly=ke.getBounds().height*(ke.backing&&n(ke.padding)?.9:1)-(ke.paddingV&&ke.background?ke.paddingV*2:0),xe.center(ke),xe.x=Ge}}function Fe(){if(Me||!ke)return I;var Ge=S?["<",">","x"]:["<",">"],et,pt,Le;Ue=[],Le=ke.localToLocal(0,0,I),Me=I.place=new e.Container({style:!1}).addTo(I).cur();for(var tt=0;tt<Ge.length;tt++)et=new e.Rectangle(ve,ve,f,P,T,b,null,null,null,!1),Ge[tt]=="x"&&new e.Rectangle(ve,ve,"black",null,null,b,null,null,null,!1).alp(_).addTo(et),pt=new e.Label({lineWidth:10,text:Ge[tt],backing:et,font:h.font!=null?h.font:null,color:d,align:"center",valign:"center",style:!1}),pt.pos(0,0,e.LEFT,e.TOP,Me).cache(),pt.x=pt.x+tt*(ve+5),Ue.push(pt);Le=ke.localToLocal(0,0,I),Me.x=Le.x+E,Me.y=Le.y+ke.height+15+X,Me.on("click",vt);function vt(nt){Ue.indexOf(nt.target)==0?pe>0&&pe--:Ue.indexOf(nt.target)==1?pe<ke.text.length&&pe++:me(),Se()}I.stage&&I.stage.update()}function me(){if(!Me)return I;Me.dispose(),Me=null}function $e(Ge){if(ke){var et,pt;if(Ge==="del")ke&&(ke.text=[ke.text.slice(0,pe-1),ke.text.slice(pe)].join("")),pe--,Je();else{if(se===Re.shift&&(Ge=Ge.toUpperCase()),ke&&I.maxLength&&ke.text.length>=I.maxLength||I.numbersOnly&&!isFinite(Number(Ge)))return;var Le=ke.text;et=ke.clone().removeFrom(),et.text=Ge,pt=et.label.getMeasuredWidth(),ke.widthArray?ke.widthArray.splice(pe,0,pt):ke.widthArray=[ke.breedte],pe<ke.text.length?ke.text=[ke.text.slice(0,pe),Ge,ke.text.slice(pe)].join(""):ke.text+=Ge,ke&&ke.label.getBounds().width<F?(pe++,Se()):ke.text=Le}se===Re.shift&&!te&&(I.removeChild(Oe),Qe(),se=Re.def),Se();var tt=new je.Event("keydown");tt.letter=Ge,I.dispatchEvent(tt),I.stage&&I.stage.update()}}function st(Ge){if(I.stage){var et,pt=0,Le=!1;ke=Ge.target,ke.widthArrayCheck||Je(),F=ke.label.lineWidth?ke.label.lineWidth:1e4,et=ke.globalToLocal(Ge.stageX/e.scaX,Ge.stageY/e.scaY),et.x-=ke.label.x,et.y-=ke.label.y;for(var tt=0;tt<ke.widthArray.length;tt++)if(pt+=ke.widthArray[tt],et.x<pt-ke.widthArray[tt]/2+ke.label.getBounds().x){pe=tt,Le=!0;break}Le||(pe=ke.text.length),Se(),C&&!Me&&ke.text.length>0&&Fe(),Me&&ke&&(ke.text.length>0?(et=ke.localToLocal(0,0,I),Me.x=et.x+E,Me.y=et.y+ke.height+15+X):me())}}function Je(){if(ke){var Ge=new e.Label("");ke.widthArray=[];for(var et=0;et<ke.text.length;et++)Ge=ke.clone().removeFrom(),Ge.text=ke.text[et],ke.widthArray.push(Ge.label.getMeasuredWidth());Ge.text=ke.text,ke.widthArrayCheck=!0,Se()}}function rt(Ge){var et=!0,pt;function Le(){(!ke||ke.text.length<1||I.currentIndex==0)&&(et=!1),et&&(tt(),pt&&(pt=e.timeout(200,Le,null,"ms"))),ke&&ke.text.length<1&&vt()}function tt(){ke&&ke.text.length>0?(I.selectedIndex>0&&$e("del"),Ge?vt():I.on("pressup",vt)):$e("del")}function vt(){et=!1,pt&&pt.clear(),I.off("pressup",vt)}tt(),pt=e.timeout(300,Le,null,"ms"),I.stage&&I.stage.update()}function Ce(){for(var Ge=0;Ge<t.length;Ge++)t[Ge].clickEvent=t[Ge].on("click",st)}Ce();function ze(){if(t.length>1)for(var Ge=0;Ge<t.length;Ge++)t[Ge].off("click",t[Ge].clickEvent)}function Xe(){if(!xe&&(ke=t[0],F=ke&&ke.label.lineWidth?ke.label.lineWidth:1e4,ke)){xe=new e.Rectangle(3,ke.height-(ke.paddingV&&ke.background?ke.paddingV*2:0),p,null,null,null,null,null,null,!1).center(ke),xe.x=0,xe.visible=!1,xe.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var Ge=0;Ge<t.length;Ge++)t[Ge].widthArray=[0];Je()}}Xe();function Ze(){e.stopAnimate("knipperTekst"),ke&&ke.removeChild(xe),xe=null,ke=null}Object.defineProperty(this,"selectedLabel",{get:function(){return ke},set:function(Ge){var et={target:Ge};st(et),I.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return pe},set:function(Ge){pe=Ge,Se()}}),this.show=function(Ge,et){if(I.addTo(A),!n(Ge)){var pt={target:t[Ge]};st(pt)}return xe&&(xe.visible=!0),I.toggled=!0,U?He():(!U||et)&&(I.keys.vis(!0),ot.vis(!0)),I.numPad&&I.numPad.parent&&I.numPad.top(),I},this.hide=function(){return I.removeFrom(A),He(!1),xe&&(xe.visible=!1),x.update(),I.toggled=!1,I},this.showNumPad=function(){He(!0),I.toggled=!0,xe&&(xe.visible=!0)},this.hideNumPad=function(){He(!1),(!I.keys.parent||!I.keys.visible)&&xe&&(xe.visible=!1,I.toggled=!1,me())},this.showKeyboard=function(){I.show(null,!0)},this.hideKeyboard=function(){!I.numPad||!I.numPad.parent?I.hide():(I.keys.vis(!1),ot.vis(!1))},this.toggle=function(Ge){return Ge===!0?I.show():Ge===!1||I.parent?I.hide():I.show(),I},this.showPlace=function(){return Fe(),I},this.hidePlace=function(){return me(),I},this.addLabels=function(Ge){Array.isArray(Ge)||(Ge=[Ge]);for(var et=Ge.length-1;et>=0;et--){var pt=t.indexOf(Ge[et]);pt>=0||Ge[et].type!="Label"?Ge.splice(et,1):Ge[et].widthArray=[0]}return ze(),t=t.concat(Ge),Ce(),Xe(),xe&&(xe.visible=!0),I},this.removeLabels=function(Ge){Array.isArray(Ge)||(Ge=[Ge]),ze();for(var et=0;et<Ge.length;et++){var pt=t.indexOf(Ge[et]);pt>=0&&t.splice(pt,1)}return Ce(),t.length==0?ke&&Ze():ke&&t.indexOf(ke)==-1&&(Ze(),Xe()),I};var ot=new e.Rectangle(this.width,this.height,e.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();ot.on("mousedown",function(){}),ot.on("click",function(){}),U&&ot.vis(!1),this.resize=function(){if(I.scaleTo(x,100-R*2/x.width*100,50-R*2/x.height*100),I.y=x.height-I.height-R,I.x=x.width/2-I.width/2,ke&&Me){var Ge=ke.localToLocal(0,0,I);Me.x=Ge.x,Me.y=Ge.y+ke.height+15}return I.stage&&I.stage.update(),I},this.resize(),I.selectedLabel&&(I.selectedIndex=I.selectedLabel.text.length),O&&(this.keydownEvent=function(Ge){if(I.stage){var et=I;n(et)||(Ge.keyCode==35&&(et.selectedIndex=et.selectedLabel.text.length),Ge.keyCode==36&&(et.selectedIndex=0),Ge.keyCode==37&&(et.selectedIndex=et.selectedIndex-1),Ge.keyCode==39&&(et.selectedIndex=et.selectedIndex+1),Ge.keyCode==46&&et.selectedIndex<et.selectedLabel.text.length&&(et.selectedIndex=et.selectedIndex+1,et.removeChar()),Ge.keyCode==8&&(Ge.preventDefault(),et.removeChar()),et.addChar(Ge.key),I.stage&&I.stage.update())}},fe.addEventListener("keydown",this.keydownEvent)),he!==!1&&e.styleTransforms(this,h),this.clone=function(){var Ge=new e.Keyboard(t,r,i,o,l,f,p,_,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,this.group,G);return I.cloneProps(Ge)},this.dispose=function(Ge,et,pt){ot.removeAllEventListeners(),ot=null,I.keydownEvent&&fe.removeEventListener("keydown",I.keydownEvent);for(var Le=0;Le<I.labels.length;Le++)I.labels[Le].removeAllEventListeners();return I.numPad&&I.numPad.dispose(),xe&&xe.dispose(),I.labels=ke=null,x&&x.off("pressmousemove",I.tickerMouseEvent),pt||I.zimContainer_dispose(!0),!0}},e.extend(e.Keyboard,e.Container,["clone","dispose"],"zimContainer",!1),e.Organizer=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N){var q="width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",U;if(U=mt(e.Organizer,arguments,q,this))return U;qe("67.3"),this.group=ne;var z=O===!1?{}:e.getStyle("Organizer",this.group,N);if(n(t)&&(t=z.width!=null?z.width:r&&r.vertical?r.width:300),n(i)&&(i=z.useAdd!=null?z.useAdd:!0),n(o)&&(o=z.useRemove!=null?z.useRemove:!0),n(l)&&(l=z.usePosition!=null?z.usePosition:!0),n(f)&&(f=z.autoAdd!=null?z.autoAdd:i),n(d)&&(d=z.autoRemove!=null?z.autoRemove:o),n(p)&&(p=z.autoPosition!=null?z.autoPosition:l),n(_)&&(_=z.addForward!=null?z.addForward:!0),n(P)&&(P=z.removeForward!=null?z.removeForward:!0),n(T)&&(T=z.backgroundColor!=null?z.backgroundColor:e.tin),n(R)&&(R=z.rollBackgroundColor!=null?z.rollBackgroundColor:e.grey),n(b)&&(b=z.selectedBackgroundColor!=null?z.selectedBackgroundColor:e.dark),n(S)&&(S=z.color!=null?z.color:e.white),n(k)&&(k=z.rollColor!=null?z.rollColor:S),n(m)&&(m=z.selectedColor!=null?z.selectedColor:S),n(A)&&(A=z.selectedRollColor!=null?z.selectedRollColor:S),n(D)&&(D=z.spacing!=null?z.spacing:1),n(C)&&(C=z.corner!=null?z.corner:0),n(X)&&(X=z.gradient!=null?z.gradient:.2),n(Z)&&(Z=z.gloss!=null?z.gloss:null),n(V)&&(V=z.backdropColor!=null?z.backdropColor:null),Array.isArray(C)||(C=[C,C,C,C]),!(!i&&!l&&!o)){var ie=(i?1:0)+(l?4:0)+(o?1:0),ae=(t+D)/ie,he={width:ae,height:ae,label:"",shadowColor:-1,gradient:X,corner:C,backgroundColor:T,rollBackgroundColor:R},$=[],G=new e.Shape;if(G.graphics.f(S).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),i&&$.push(new e.Button({icon:G.sca(.55).rot(-45).reg(1),inherit:he})),l){var v=new e.Shape;v.graphics.f(S).p("AiJieIETCeIkTCfg"),$.push(new e.Button({icon:v.sca(.6).rot(r&&!r.vertical?180:-90).reg(-2),inherit:he})),$.push(new e.Button({icon:v.clone().sca(.6).rot(r&&!r.vertical?0:90).reg(-2),inherit:he}));var w=new e.Shape;w.graphics.f(S).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),$.push(new e.Button({icon:w.sca(.62).rot(r&&!r.vertical?0:90).reg(0),inherit:he})),$.push(new e.Button({icon:w.clone().sca(.62).rot(r&&!r.vertical?180:-90).reg(0),inherit:he}))}o&&$.push(new e.Button({icon:G.clone().rot(0).sca(.55),inherit:he})),$.length==0&&($=[""]),this.zimTabs_constructor(t,ae,$,T,R,null,b,L,S,k,null,m,A,!1,D,!0,!1,C,null,!0,X,Z,null,null,null,null,null,null,null,null,null,null,V);var h=this;h.list=r,h.type="Organizer",h.setButtons=function(){if(l){var x=i?1:0;$[x+0]&&($[x+0].icon.rotation=h.list&&!h.list.vertical?180:-90),$[x+1]&&($[x+1].icon.rotation=h.list&&!h.list.vertical?0:90),$[x+2]&&($[x+2].icon.rotation=h.list&&!h.list.vertical?0:90),$[x+3]&&($[x+3].icon.rotation=h.list&&!h.list.vertical?180:-90)}};var I=!1,Q=r;h.change(function(x){(!I&&h.list||h.list&&h.list!=Q)&&(h.list!=Q&&Q&&Q.noChange(),h.list.change(function(){h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex}),I=!0,Q=h.list);var F=x.target.selectedIndex;i||F++,!l&&(!i||F>0)&&(F=5);var Ae=n(h.list.selectedIndex)||h.list.selectedIndex<0;Ae&&(h.currentValue=null),h.lastIndex=h.list.selectedIndex;var Y;switch(F){case 0:f&&(Y=Math.max(0,h.list.selectedIndex),h.add(Y)),h.orgType="add";break;case 1:if(Ae)break;p&&(Y=h.list.selectedIndex,h.up(Y)),h.orgType="up";break;case 2:if(Ae)break;p&&(Y=h.list.selectedIndex,h.down(Y)),h.orgType="down";break;case 3:if(Ae)break;p&&(Y=h.list.selectedIndex,h.toTop(Y)),h.orgType="top";break;case 4:if(Ae)break;p&&(Y=h.list.selectedIndex,h.toBottom(Y)),h.orgType="bottom";break;case 5:if(Ae)break;d&&(Y=h.list.selectedIndex,h.remove(Y)),h.orgType="remove";break}}),this.add=function(x,F,Ae){return n(x)&&(x=h.lastIndex),n(F)&&(F=""),_?x=Math.min(h.list.length,Math.max(0,h.list.selectedIndex)+1):x=Math.max(0,h.list.selectedIndex),h.list.addAt(F,x,Ae),h.list.selectedIndexPlusPosition=x,h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},this.up=function(x){n(x)&&(x=h.lastIndex);var F=h.list.items[x];return n(F)||(h.list.removeAt(1,x),h.list.addAt(F,x-1),h.list.selectedIndexPlusPosition=Math.max(0,x-1),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.down=function(x){n(x)&&(x=h.lastIndex);var F=h.list.items[x];return n(F)||(h.list.removeAt(1,x),h.list.addAt(F,x+1),h.list.selectedIndexPlusPosition=Math.min(h.list.length-1,x+1),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.toTop=function(x){n(x)&&(x=h.lastIndex);var F=h.list.items[x];return n(F)||(h.list.removeAt(1,x),h.list.addAt(F,0),h.list.first(),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.toBottom=function(x){n(x)&&(x=h.lastIndex);var F=h.list.items[x];if(!n(F))return h.list.removeAt(1,x),h.list.addAt(F,h.list.length),h.list.last(),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},this.remove=function(x){if(n(x))if(h.list.selectedIndex>=0)x=h.list.selectedIndex;else return h;var F=x==h.list.selectedIndex;return h.removedItem=h.list.items[x],h.list.removeAt(1,x),F?P||(x=Math.max(0,x-1)):x=h.list.selectedIndex,h.list.selectedIndexPlusPosition=Math.min(h.list.length-1,x),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},O!==!1&&e.styleTransforms(this,z),this.clone=function(){return h.cloneProps(new e.Organizer(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,h.group,N))},this.dispose=function(x,F,Ae){return $=null,Ae||h.zimTabs_dispose(!0),!0}}},e.extend(e.Organizer,e.Tabs,["clone","dispose"],"zimTabs",!1),e.Connectors=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w){var h="width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, dropArray, continuous, startIndex, duplicateLine, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, steps, style, group, inherit",I;if(I=mt(e.Connectors,arguments,h,this))return I;qe("67.39"),this.group=v;var Q=G===!1?{}:e.getStyle("Connectors",this.group,w);n(t)&&(t=Q.width!=null?Q.width:null),n(r)&&(r=Q.height!=null?Q.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",n(i)&&(i=Q.points!=null?Q.points:[[0,0],[100,0],[100,100],[0,100]]),n(o)&&(o=Q.node!=null?Q.node:new e.Circle(10,e.grey,e.grey)),o.removeFrom(),o.color==e.clear&&!o.hitArea&&o.expand(0),n(l)&&(l=Q.line!=null?Q.line:new e.Line({length:10,thickness:3,color:e.tin,strokeObj:{caps:"round"}})),n(_)&&(_=Q.num!=null?Q.num:10),n(f)&&(f=Q.linear!=null?Q.linear:!1),n(d)&&(d=Q.linearWrap!=null?Q.linearWrap:!0),n(V)&&(V=Q.nodeRollColor!=null?Q.nodeRollColor:o.color.match("rgb")?o.color:o.color.lighten(.2)),n(O)&&(O=Q.nodeRollBorderColor!=null?Q.nodeRollBorderColor:o.borderColor),n(ne)&&(ne=Q.nodeSelectedColor!=null?Q.nodeSelectedColor:e.white),n(N)&&(N=Q.nodeSelectedBorderColor!=null?Q.nodeSelectedBorderColor:o.borderColor),n(q)&&(q=Q.baseColor!=null?Q.baseColor:o.color),n(U)&&(U=Q.baseBorderColor!=null?Q.baseBorderColor:o.borderColor),n(z)&&(z=Q.baseRollover!=null?Q.baseRollover:!1),n(C)&&(C=Q.min!=null?Q.min:o.radius?o.radius*2:Math.min(o.width,o.height)),n(E)&&(E=Q.max!=null?Q.max:null),n(Z)&&(Z=Q.expand!=null?Q.expand:e.mobile()?10:0),n(R)&&(R=Q.dropType!=null?Q.dropType:"any"),n(b)&&(b=Q.dropArray!=null?Q.dropArray:null),n(L)&&(L=Q.continuous!=null?Q.continuous:!1),n(S)&&(S=Q.startIndex!=null?Q.startIndex:null),n(k)&&(k=Q.duplicateLine!=null?Q.duplicateLine:!0),n(m)&&(m=Q.deleteNode!=null?Q.deleteNode:!0),n(A)&&(A=Q.dblclick!=null?Q.dblclick:!0),n(D)&&(D=Q.fullMove!=null?Q.fullMove:!0),n(he)&&(he=Q.dblclickTime!=null?Q.dblclickTime:.5);var x=g(he);if(he*=x=="s"?1e3:1,n(P)&&(P=Q.snapH!=null?Q.snapH:null),n(T)&&(T=Q.snapV!=null?Q.snapV:null),n(ie)&&(ie=Q.rootLock!=null?Q.rootLock:!1),n(ae)&&(ae=Q.grandChildren!=null?Q.grandChildren:!0),n($)&&($=Q.steps!=null?Q.steps:null),f&&i.length<=1){kt&&ht("Connector() - linear needs more than one point");return}var F=this,Ae=0;F.node=o,F.line=l;var Y=[],K=o.color,ge=o.borderColor,ye=F.lines=new e.Container(t,r).addTo(F),ee=F.nodes=new e.Container(t,r).addTo(F);if(i.type=="Blob"||i.type=="Squiggle"){var ce=[];e.loop(i.points,function(He){ce.push([He[0],He[1]])}),i=ce}F.points=i,this.addNode=function(He,it,ft){if(!f)return ve(He,it,ft)};function ve(He,it,ft,Se){if(He.addChild){R="on",ie=!0,ae=!1,ft=He,ft.connectorMoveEvent||(F.bases||(F.bases=[]),F.bases.push(ft),ft.connectorMoveEvent=ft.on("pressmove",function(){ft.positionConnectors(ft,!0,!0)}),ft.connectorUpEvent=ft.on("pressup",function(){ft.positionConnectors(ft,!0,!0)}),z&&(ft.connectorOverEvent=ft.on("mouseover",function(){We(ft)}),ft.connectorOutEvent=ft.on("mouseout",function(){oe(ft)})),ft.positionConnectors=function(st,Je,rt){e.loop(st.connectors,function(Ce){var ze=st.parent.localToLocal(st.x-st.baseStart.x+Ce.nodeStart.x,st.y-st.baseStart.y+Ce.nodeStart.y,Ce.parent);Ce.x=ze.x,Ce.y=ze.y,Ke(Ce,Je,rt)}),st.stage&&st.stage.update()},ft.setConnectorColors=function(st,Je,rt,Ce){return n(st)||(ft.connectorColor=st),n(Je)||(ft.connectorBorderColor=Je),n(rt)||(ft.connectorRollColor=rt),n(Ce)||(ft.connectorRollBorderColor=Ce),e.loop(ft.connectors,function(ze){n(st)||(ze.color=st),n(Je)||(ze.borderColor=Je)}),ft},ft.setConnectorColors(q,U,V,O));var Fe=ft.getBounds();l.endHead,Array.isArray(it)||(it=[it,it]);var me=[];return it.length==2&&(it=[it[0],it[1],it[0],it[1]]),(l.lineOrientation==e.HORIZONTAL||l.lineOrientation=="auto")&&e.loop([it[0],it[1]],function(st,Je){if(st==-1||st==-2){var rt=ft.localToLocal(Je==0?Fe.x:Fe.x+Fe.width,Fe.y,F);me.push([rt.x,rt.y,e.HORIZONTAL])}if(st==-1||st==-3){var Ce=ft.localToLocal(Je==0?Fe.x:Fe.x+Fe.width,Fe.y+Fe.height,F);me.push([Ce.x,Ce.y,e.HORIZONTAL])}st>0&&e.loop(st,function(ze,Xe){var Ze=ft.localToLocal(Je==0?Fe.x:Fe.x+Fe.width,Fe.y+Fe.height*(ze+1)/(Xe+1),F);me.push([Ze.x,Ze.y,e.HORIZONTAL])})}),(l.lineOrientation==e.VERTICAL||l.lineOrientation=="auto")&&e.loop([it[2],it[3]],function(st,Je){if(st==-1||st==-2){var rt=ft.localToLocal(Fe.x,Je==0?Fe.y:Fe.y+Fe.height,F);me.push([rt.x,rt.y,e.VERTICAL])}if(st==-1||st==-3){var Ce=ft.localToLocal(Fe.x+Fe.width,Je==0?Fe.y:Fe.y+Fe.height,F);me.push([Ce.x,Ce.y,e.VERTICAL])}st>0&&e.loop(st,function(ze,Xe){var Ze=ft.localToLocal(Fe.x+Fe.width*(ze+1)/(Xe+1),Je==0?Fe.y:Fe.y+Fe.height,F);me.push([Ze.x,Ze.y,e.VERTICAL])})}),ft.connectors=[],ft.baseStart=new e.Point(ft.x,ft.y),e.loop(me,function(st){var Je=ve(st[0],st[1],ft,st[2]);Ye(ft,Je)}),setTimeout(function(){ft.positionConnectors(ft,!0,!0)},50),F}var $e=o.clone().loc(He,it,ee).drag({boundary:X}).expand(Z);return $e.orientation=Se,$e.nodeColor=$e.color,$e.on("mouseover",Oe),$e.on("mouseout",J),$e.on("mousedown",Me),$e.on("pressmove",Ue),$e.on("pressup",ue),m&&$e.hold(se),$e.nodeNum=Ae++,$e.creations=[],$e}function Re(){e.loop(i,function(He,it){var ft=ve(He[0],He[1]);ft.dropIndex=it,b&&(ft.dropArray=b[it])}),f&&ee.loop(function(He,it,ft){it==0?(d?He.before=ee.getChildAt(ft-1):He.before=null,He.after=ee.getChildAt(it+1)):it==ft-1?(d?He.after=ee.getChildAt(0):He.after=null,He.before=ee.getChildAt(it-1)):(He.before=ee.getChildAt(it-1),He.after=ee.getChildAt(it+1)),p&&it>0&&He.noMouse()})}Re(),F.setAvailableIndexes=function(He){return Array.isArray(He)||(He=[He]),F.nodes.loop(function(it,ft){He.indexOf(ft)==-1?it.noMouse():it.mouse()}),F},n(S)||F.setAvailableIndexes(S),F.keyEvent=function(He){m&&He.keyCode==46&&(e.loop(xe,function(it){it&&it.parent&&lt(it)}),F.stage&&F.stage.update())},fe.addEventListener("keydown",F.keyEvent);function se(He){var it=He.target.stage,ft=He.target;F.bases||ie&&!ft.creator.creator||(ft.adding?lt(ft.creator):lt(ft),F.stage&&F.stage.update())}function Oe(He){var it=He.target;it.selected||(it.color=it.base?it.base.connectorRollColor:V,it.borderColor=it.base?it.base.connectorRollBorderColor:O,F.stage&&F.stage.update())}function J(He){var it=He.target;it.selected||(it.color=it.base?it.base.connectorColor:it.nodeColor,it.borderColor=it.base?it.base.connectorBorderColor:ge,F.stage&&F.stage.update())}var xe=[],te,we=0,ke,pe;function Me(He,it,ft,Se){var Fe=He.target;if(!n(Fe)&&(ft&&(Fe.selected=!0,xe=[],F.selectNode(Fe,!Se)),pe=Fe.nodeNum,!f&&(!ie||Fe.creator)&&A&&!it&&(we==0&&(ke=setTimeout(function(){if(we=0,xe){var Je=F.stage?F.stage.frame:fe.zdf,rt=ee.loop(function(Ce){if(Ce.hitTestPoint(Je.mouseX,Je.mouseY)&&Ce.selected)return!1});rt&&Qe()}},he)),we++),Fe.startX=Fe.x,Fe.startY=Fe.y,!f&&xe.length>0&&e.loop(xe,function(Je){Je.startX=Je.x,Je.startY=Je.y}),!(Fe.creations.length>=_||Fe.selected||Fe.creator&&!ae))){Fe.adding=!0;var me=ve(Fe.x,Fe.y).bot();me.creations=Fe.creations,me.creatorLine=Fe.creatorLine,me.creator=Fe.creator,me.orientation=Fe.orientation,me.startX=Fe.startX,me.startY=Fe.startY,me.dropIndex=Fe.dropIndex,me.dropArray=Fe.dropArray,me.lineArray=Fe.lineArray,me.color=me.nodeColor=Fe.nodeColor;var $e=me.nodeNum;if(me.nodeNum=Fe.nodeNum,Fe.nodeNum=$e,Fe.base&&(me.base=Fe.base,me.baseStart=Fe.baseStart,me.nodeStart=Fe.nodeStart,me.connectors=Fe.connectors,Fe.base=Fe.baseStart=Fe.nodeStart=Fe.connectors=null,me.base.connectors&&me.base.connectors.splice(me.base.connectors.indexOf(Fe),1,me),me.color=me.base.connectorColor,me.borderColor=me.base.connectorBorderColor),me.before=Fe.before,me.after=Fe.after,me.before&&(me.before.after=me),me.after&&(me.after.before=me),me.creator){var st=me.creator.creations.indexOf(Fe);st!=-1&&me.creator.creations.splice(st,1,me)}e.loop(me.creations,function(Je){Je.creator=me}),Fe.creator=me,Fe.creatorLine=l.clone().setPoints(Fe.x,Fe.y,Fe.x,Fe.y).addTo(ye).alp(0),Fe.creatorLine.lineOrientation=Fe.orientation,Fe.creatorLine.node=Fe,Fe.creatorLine.creatorNode=me,Fe.creations=[],Fe.veeObj&&!n(Fe.veeObj.color)?Fe.color=e.Pick.choose(Fe.veeObj.color):Fe.color=me.color,Fe.nodeColor=Fe.color,me.creations.push(Fe),F.latestNode=Fe}}function Ue(He,it,ft,Se){var Fe=He.target;Fe.creatorLine&&Fe.creatorLine.alp(1),!f&&xe.length>0&&xe.indexOf(Fe)==-1&&Qe(),Ke(Fe,!1,!0),F.bases&&e.loop(F.bases,function(me){Fe.creator&&Fe.creator.base==me||(!me.connectorsOn&&Fe.hitTestBounds(me)&&We(me),me.connectorsOn&&!Fe.hitTestBounds(me)&&oe(me))}),F.stage&&F.stage.update()}function ue(He,it,ft,Se){var Fe=He.target;F.bases&&e.loop(F.bases,function(et){et!=Fe.base&&et.connectorsOn&&oe(et)});var me=!1;if(!f&&we>1&&!it){clearTimeout(ke);var $e=Fe.adding?Fe.creator:Fe;if(Fe.adding&&lt($e.creations[$e.creations.length-1],!0),!$e.selected){var st=F.stage?F.stage.frame:fe.zdf;de($e,!st.ctrlKey)}we=0,me=!0}if(!f&&!F.base&&(P&&(Fe.x=Math.round(Fe.x/P)*P),T&&(Fe.y=Math.round(Fe.y/T)*T)),C&&e.dist(Fe.x,Fe.y,Fe.startX,Fe.startY)<C||E&&e.dist(Fe.x,Fe.y,Fe.startX,Fe.startY)>E){Fe.adding?lt(Fe,!0):(Fe.loc(Fe.startX,Fe.startY),me||Ke(Fe)),F.stage&&F.stage.update(),F.lastNode=null,F.targetNode=null,F.dispatchEvent("noconnection");return}var Je=!1,rt=!1;if(f){var Ce=Fe.creator;if(F.connectionStart=Ce,F.connectionEnd=Fe,Ce.before&&Fe.hitTestCircle(Ce.before)&&!p)Fe.loc(Ce.before).removeFrom(),Ce.before.after=null,Ce.before.before||Ce.before.noMouse(),Ce.before=null,Ce.after||Ce.noMouse(),rt=!0,Je=Be();else if(Ce.after&&Fe.hitTestCircle(Ce.after))Fe.loc(Ce.after).removeFrom(),Ce.after.before=null,Ce.after.after||Ce.after.noMouse(),p&&Ce.after.mouse(),Ce.after=null,Ce.before||Ce.noMouse(),p&&Ce.noMouse(),rt=!0,Je=Be();else if(!Ce||Fe.creations.length>0)Fe.loc(Fe.startX,Fe.startY).bot();else{lt(Fe,!0),F.stage&&F.stage.update(),F.lastNode=null,F.targetNode=null,F.dispatchEvent("noconnection");return}}else if(R=="off"){var ze=ee.loop(function(et){if(Fe!=et&&Fe.hitTestCircles(et)){Fe.adding?lt(Fe,!0):(Fe.loc(Fe.startX,Fe.startY),Ke(Fe)),ie&&De(Fe),!D&&Fe.creator&&_>0&&Fe.creator.creations.length>=_&&Fe.creator.noMouse(),F.targetNode=et,L&&F.nodes.loop(function(pt){pt!=F.latestNode&&pt.noMouse()}),L&&F.nodes.loop(function(pt){pt!=F.latestNode&&pt.noMouse()}),Ee(),F.dispatchEvent("connection"),F.stage&&F.stage.update();return}});if(!ze){_e(Fe);return}}else if(R=="on"||R=="single"){var Xe=0,Ze,ot=ee.loop(function(et){if(Fe!=et&&Fe.hitTestCircles(et)){if(Ze=et,F.bases&&(Fe.orientation!=et.orientation||Fe.creator&&Fe.creator.base&&Fe.creator.base==et.base)||Fe.dropArray&&Fe.dropArray.indexOf(et.dropIndex)==-1||!k&&Fe.lineArray&&Fe.lineArray.indexOf(et.dropIndex)!=-1)return;if(R=="on")return!1;Xe++,Xe+=et.creations.length}});if(ot&&!(R=="single"&&Xe==1)){_e(Fe);return}else{if(Fe.loc(Ze),Fe.creator&&Fe.orientation==e.VERTICAL&&Math.round(Fe.y)==Math.round(Fe.creator.startY)||Fe.creator&&Fe.orientation==e.HORIZONTAL&&Math.round(Fe.x)==Math.round(Fe.creator.startX))return;F.targetNode=Ze;var Ge=Fe.dropIndex;Fe.dropIndex=Ze.dropIndex,Fe.dropArray=e.copy(Ze.dropArray),Ze.lineArray?Ze.lineArray.push(Ge):Ze.lineArray=[Ge],Fe.lineArray=e.copy(Ze.lineArray),Fe.creator&&(Fe.creator.lineArray||(Fe.creator.lineArray=[]),Fe.creator.lineArray.push(Fe.dropIndex)),Ze.base&&Ze.base.connectors&&Ye(Ze.base,Fe),rt=!0}}else Fe.selected||(rt=!0);!D&&Fe.creator&&_>0&&Fe.creator.creations.length>=_&&Fe.creator.noMouse(),Fe.adding=!1,Ke(Fe,!0,!0),e.loop(xe,function(et){if(xe.indexOf(et.creator)==-1){var pt=e.loop(et.creations,function(Le){if(xe.indexOf(Le)>=0)return!1});Ee(et.nodeNum,null,e.decimals(et.x,2),e.decimals(et.y,2),pt||pt===void 0?1:0)}et.startX=et.x,et.startY=et.y}),Fe.startX=Fe.x,Fe.startY=Fe.y,ie&&De(Fe),rt?(L&&F.nodes.loop(function(et){et!=F.latestNode&&et.noMouse()}),Ee(),F.dispatchEvent("connection"),e.arraysEqual(Fe.dropArray,Fe.lineArray,!1)&&F.dispatchEvent("blocked")):F.dispatchEvent("noconnection"),Je&&F.dispatchEvent("complete"),F.stage&&F.stage.update()}function Ee(He,it,ft,Se,Fe){it?Y.push([He,null,null,1]):n(ft)?Y.push([pe,e.decimals(F.latestNode.x,2),e.decimals(F.latestNode.y,2)]):Y.push([He,null,null,null,ft,Se,Fe])}F.makeConnection=function(He,it,ft,Se,Fe){var me=F.stage?F.stage.frame:fe.zdf;return Se?(me.ctrlKey=Fe==1,Me({target:He},!0,!0,Fe),He.loc(it,ft),Ue({target:He},!0,!0,Fe),ue({target:He},!0,!0,Fe)):(Me({target:He},!0,!1,null),F.latestNode.loc(it,ft),Ue({target:F.latestNode},!0,!1,null),ue({target:F.latestNode},!0,!1,null)),me.ctrlKey=!1,F.latestNode};function Te(He){var it=F.nodes.loop(function(ft){if(ft.nodeNum==He)return ft});if(it.type)return it}F.setSteps=function(He){return e.loop(He,function(it){var ft=Te(it[0]);ft&&(it[3]?ft&&lt(ft):n(it[4])?F.makeConnection(ft,it[1],it[2]):(F.makeConnection(ft,it[4],it[5],!0,it[6]),Qe()))}),F},F.applySteps=F.setSteps,F.getSteps=function(He){return He&&(F.stage||(F.stage=zdf.stage),F.pane||(F.pane=new e.Pane({displayClose:!1,container:F.stage,width:Math.min(500,F.stage.width-20),height:Math.min(500,F.stage.height-20),draggable:!0}),F.textArea=new e.TextArea(Math.min(400,F.stage.width-70),Math.min(400,F.stage.height-70)).centerReg(F.pane)),F.pane.show(),F.textArea.text=JSON.stringify(Y)),Y},Object.defineProperty(this,"steps",{get:function(){return Y},set:function(He){F.setSteps(He)}});function _e(He){He.adding||!ae?lt(He,!0):(He.loc(He.startX,He.startY),Ke(He)),ie&&De(He),He.base&&He.base.connectors&&Ve(He.base,He),F.lastNode=null,F.targetNode=null,F.dispatchEvent("noconnection"),F.stage&&F.stage.update()}function We(He){e.loop(He.connectors,function(it){it.color=He.connectorRollColor,it.borderColor=He.connectorRollBorderColor}),He.connectorsOn=!0,He.stage&&He.stage.update()}function oe(He){e.loop(He.connectors,function(it){it.color=He.connectorColor,it.borderColor=He.connectorBorderColor}),He.connectorsOn=!1,He.stage&&He.stage.update()}function Ye(He,it){He.connectors.push(it),it.nodeStart=it.parent.localToLocal(it.x,it.y,He.parent),it.nodeStart.x-=He.x-He.baseStart.x,it.nodeStart.y-=He.y-He.baseStart.y,it.base=He}function Ve(He,it){He.connectors.splice(He.connectors.indexOf(it),1),it.nodeStart=null,it.base=null}function De(He){if(He.creator){if(He.creator.creator){De(He.creator);return}He.creator&&He.creator.creations.length>=_?He.creator.noMouse():He.creator.mouse()}}function de(He,it){it&&e.loop(He.creations,function(ft){de(ft,it)}),He.selected=!0,He.color=He.base?He.base.connectorColor:ne,He.borderColor=He.base?He.base.connectorBorderColor:N,xe.push(He),He.top(),te||(te=F.stage.on("stagemousedown",function(){var ft=F.stage?F.stage.frame:fe.zdf,Se=ee.loop(function(Fe){if(Fe.hitTestPoint(ft.mouseX,ft.mouseY))return!1});Se&&Qe()}))}this.selectNode=function(He,it){de(He,it)};function Be(){var He=ee.loop(function(it){if(it.before||it.after)return!1});if(He)return ee.loop(function(it){it.noMouse()}),!0}function Qe(){e.loop(xe,function(He){He.selected=!1,He.color=He.base?He.base.connectorColor:He.nodeColor,He.borderColor=He.base?He.base.connectorBorderColor:ge}),xe=[],F.stage.off("stagemousedown",te),te=null,F.stage&&F.stage.update()}function Ke(He,it,ft){var Se=xe.length>0?xe:[He];e.loop(Se,function(Fe){Fe!=He&&Fe.loc(Fe.startX+He.x-He.startX,Fe.startY+He.y-He.startY),Fe.creator&&Fe.creatorLine.setPoints(Fe.x,Fe.y,Fe.creator.x,Fe.creator.y,it,ft),e.loop(Fe.creations,function(me){me.creatorLine.setPoints(me.x,me.y,me.creator.x,me.creator.y,it,ft)})})}function lt(He,it){if(e.loop(He.creations,function(Se){lt(Se)},!0),He.creatorLine){He.creatorLine.removeFrom();var ft=He.creator.creations.indexOf(He);ft!=-1&&He.creator.creations.splice(ft,1),!He.creator.mouseEnabled&&!(ie&&!He.creator.creator)&&He.creator.mouse()}return He.removeFrom(),He.removeAllEventListeners(),it?Ae--:Ee(He.nodeNum,1),He=null,F}this.removeNode=function(He){lt(He)},this.removeConnectors=function(){e.loop(ee,function(He){lt(He)},!0),Re(),F.stage&&F.stage.update()},this.removeBase=function(He){e.loop(He.connectors,function(it){lt(it)}),gt(He)},this.addBase=function(He,it){ve(He,it)};function gt(He){He.off("pressmove",He.connectorMoveEvent),He.off("pressup",He.connectorUpEvent),He.connectorOverEvent&&He.off("mouseover",He.connectorOverEvent),He.connectorOutEvent&&He.off("mouseout",He.connectorOutEvent),He.connectors=null,He.baseStart=null,He.positionConnectors=He.setConnectorColors=null,He.connectorColor=He.connectorBorderColor=He.connectorRollColor=He.connectorRollBorderColor=null,F.bases.splice(F.bases.indexOf(He),1),F.stage&&F.stage.update()}$&&F.added(function(){F.setSteps($),F.stage.update()}),Object.defineProperty(this,"selectedList",{get:function(){return xe},set:function(){kt&&ht("Selectors() - selectedList is read only")}}),this.dispose=function(He,it,ft){return F.nodes.loop(function(Se){Se.removeFrom(),Se.removeAllEventListeners(),Se=null},!0),F.lines.loop(function(Se){Se.removeFrom(),Se=null},!0),fe.removeEventListener("keydown",F.keyEvent),F.keyEvent=null,F.bases&&e.loop(F.bases,function(Se){gt(Se)}),ft||(F.zimContainer_dispose(!0),F.stage&&F.stage.update()),!0},G!==!1&&e.styleTransforms(this,Q),this.clone=function(){return F.cloneProps(new e.Connectors(t,r,i,o,l,f,d,p,_,P,T,R,e.copy(b),L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,F.group,w))}},e.extend(e.Connectors,e.Container,["clone","dispose"],"zimContainer",!1),e.Marquee=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m){var A="width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",D;if(D=mt(e.Marquee,arguments,A,this))return D;qe("67.4"),this.group=k;var C=S===!1?{}:e.getStyle("Marquee",this.group,m),E=this;n(t)&&(t=C.width!=null?C.width:300),n(r)&&(r=C.height!=null?C.height:100);var X=g(o);n(o)&&(o=C.time!=null?C.time:X=="s"?5:5e3),n(l)&&(l=C.transition!=null?C.transition:"slide"),n(T)&&(T=C.borderColor!=null?C.borderColor:e.dark),n(R)&&(R=C.borderWidth!=null?C.borderWidth:1),T<0||R<0?T=R=null:T!=null&&R==null&&(R=1),n(p)&&(p=C.marginLeft!=null?C.marginLeft:25),n(_)&&(_=C.marginRight!=null?C.marginRight:25),n(f)&&(f=C.speed!=null?C.speed:X=="s"?.5:500),a(f,X),n(d)&&(d=C.direction!=null?C.direction:"right"),n(b)&&(b=C.refresh!=null?C.refresh:X=="s"?30*60:30*60*1e3),n(L)&&(L=C.mix!=null?C.mix:!0),this.zimContainer_constructor(t+p+_,r,null,null,!1),this.type="Marquee",this.speed=f;var Z=new e.Rectangle(t-1,r-1,e.clear).addTo(E).mov(p+.5,.5),V=this.content=new e.Container(t,r).loc(p,0,E).setMask(Z),O=this.pages=new e.Pages(null,l,f,null,V).addTo(V),ne=!1;this.add=function(x,F,Ae,Y,K){n(K)&&(K=!0),x.scaleTo(V,100,100),F&&x.cur().on("click",function(){or(F,Ae)}),O.addPage(x),K&&O.center(),x.marqueeViews=0,x.marquee=E,ne||N(),Y||G(),Q&&Q.top()},this.remove=function(x){if(E.selected==x){if(E.pages.pages.length==1)return;var F=E.selectedIndex+1;F==E.pages.pages.length&&(F=0),E.pages.go(F,null,null,0),setTimeout(function(){E.pages.removePage(x),x.dispose&&x.dispose(),G()},20)}else E.pages.removePage(x),x.dispose&&x.dispose(),G()};function N(){ne=!0,E.selectedIndex=0,E.selected=O.pages[E.selectedIndex].page,E.lastSelected=null,E.selected.marqueeOn&&E.selected.marqueeOn(),E.interval=e.interval(o,function(){E.go()})}if(!n(i)&&!Array.isArray(i)&&(i=[i]),i&&i.length>0&&(L&&e.shuffle(i),e.loop(i,function(x){E.add(x,null,null,!0)})),b>0)var q=e.timeout(b*(X=="s"?1e3:1),function(){location.reload()},null,"ms");E.go=function(x){if(E.selected.marqueeViews+=1,E.selected.marqueeOff&&E.selected.marqueeOff(),x)E.selected=x,e.loop(O.pages,function(Ae,Y){if(Ae.page==x){E.selectedIndex=Y;return}}),E.interval.interval=E.selected.marqueeTime?E.selected.marqueeTime:o,E.interval.pause(he.toggled,null,!0);else{var F=E.selectedIndex+1;E.selectedIndex=F%O.pages.length,E.selected=O.pages[E.selectedIndex].page,E.interval.time=E.selected.marqueeTime?E.selected.marqueeTime:o}E.dispatchEvent("page"),E.selected.marqueeOn&&E.selected.marqueeOn(),O.go(E.selected,d,l,f)},O.on("pagetransitioned",function(){E.dispatchEvent("pagetransitioned"),E.indicator&&(E.indicator.selectedIndex=E.selectedIndex)});var U=!1,z=E.left=new e.Container(p-4,r-4),ie=new e.Shape().sca(.6);ie.graphics.f(e.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var ae=new e.Shape().sca(.6).reg(-2,0);ae.graphics.f(e.light).mt(0,0).p("AiJieIETCeIkTCfg");var he=E.button=new e.Button({label:"",icon:ie,toggleIcon:ae,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(z,100).pos(0,0,!1,!0,z);he.on("click",function(){E.interval&&E.interval.pause(he.toggled),U=he.toggled,E.stage.update()});var $;function G(){if(!(n(p)||p==0)){var x=4*p/25;z.pos(p-z.width-x,x/2,!1,!0,E),E.indicator&&(E.indicator.dispose(),E.indicator.removeFrom()),$||($=new e.Proportion(8,16,z.width+x,z.width/2+x,-1)),E.indicator=new e.Indicator({width:(O.pages.length<=2?O.pages.length:O.pages.length-1)*(z.width-3),height:$.convert(O.pages.length),num:O.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:P}),E.indicator.fit(0,0,r-he.height,he.width),E.indicator.rot(d=="down"?-90:90).center(z).pos(null,z.width-x/2,null,!0),E.indicator.selectedIndex=E.selectedIndex,E.indicator.on("change",function(){E.go(O.pages[E.indicator.selectedIndex].page)})}}if(G(),!n(_)&&_>0&&fe.zdf&&fe.zdf){var v=4*_/25,w=E.right=new e.Container(45,270),h=E.icon=fe.zdf.makeIcon(e.grey,e.lighter,e.silver).sca(.5).pos(0,0,!0,!0,w).mov(0,0).cur();h.on("mouseover",function(){I.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),h.stage.update()}),h.on("mouseout",function(){I.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),h.stage.update()}),h.on("mousedown",function(){or("https://zimjs.com/marquee","_blank")});var I=E.label=new e.Label({text:"MARQUEE",color:e.dark,backgroundColor:e.lighter,shiftV:1,paddingV:5}).rot(-90).pos(0,13,!0,!1,w).reg(-10).sca(0,1).mov(0);w.fit(0,0,_-v,r-v),w.pos(_-w.width-v,v/2,!0,!0,E)}if(E.stage&&E.stage.update(),this.pause=function(x,F){n(x)&&(x=!0),x!=U&&(U=x,E.interval.pause(x,F),E.button.toggle(x))},Object.defineProperty(this,"paused",{get:function(){return U},set:function(){kt&&ht("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return o},set:function(x){o=x,E.interval.time=o}}),this.load=function(x,F){var Ae=[];L&&e.shuffle(x),e.loop(x,function(K){Array.isArray(K)?Ae.push(K[0]):Ae.push(K)});var Y=E.stage?E.stage.frame:fe.zdf;return E.marqueeLoader=Y.loadAssets(Ae,F),E.loadEvent=E.marqueeLoader.on("assetload",function(K){var ge=x[K.asset.id],ye,ee;Array.isArray(ge)?(ye=ge[0],ee=ge[1]):(ye=ge,ee="_self"),E.add(K.asset,ye,ee),G()}),E},!n(T)){var Q=new e.Rectangle(t-1,r-1,e.clear,T,R).loc(Z,null,E);Q.mouseEnabled=!1}S!==!1&&e.styleTransforms(this,C),this.clone=function(){return E.cloneProps(new e.Marquee(t,r,i,o,l,f,d,P,T,R,b,L,S,this.group,m))},this.dispose=function(x,F,Ae){return q&&q.clear(),E.interval&&E.interval.clear(),E.loadEvent&&E.marqueeLoader.off("assetload",E.loadEvent),O.dispose(),O=null,Ae||this.zimContainer_dispose(!0),!0}},e.extend(e.Marquee,e.Container,["clone","dispose"],"zimContainer"),e.Carousel=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E){var X="items, viewNum, time, spacing, backgroundColor, backing, padding, paddingH, paddingV, arrowLeft, arrowRight, arrowGap, valign, ease, swipe, remember, selectedIndex, continuous, style, group, inherit",Z;if(Z=mt(e.Carousel,arguments,X,this))return Z;qe("67.45"),this.group=C;var V=D===!1?{}:e.getStyle("Carousel",this.group,E),O=this;this.zimContainer_constructor(),n(t)&&(t=V.items!=null?V.items:[new Sn({color:red}),new Sn({color:orange}),new Sn({color:yellow}),new Sn({color:green}),new Sn({color:blue}),new Sn({color:purple}),new Sn({color:pink})]),n(l)&&(l=V.backgroundColor!=null?V.backgroundColor:e.clear),n(f)&&(f=V.backing!=null?V.backing:null),n(b)&&(b=V.valign!=null?V.valign:"center"),n(r)&&(r=V.viewNum!=null?V.viewNum:3),n(o)&&(o=V.spacing!=null?V.spacing:20),n(d)&&(d=V.padding!=null?V.padding:0),n(p)&&(p=V.paddingH!=null?V.paddingH:d),n(_)&&(_=V.paddingV!=null?V.paddingV:d),n(P)&&(P=V.arrowLeft!=null?V.arrowLeft:new e.Arrow().rot(180)),n(T)&&(T=V.arrowRight!=null?V.arrowRight:new e.Arrow),n(R)&&(R=V.arrowGap!=null?V.arrowGap:20);var ne=g(i);n(i)&&(i=V.time!=null?V.time:ne=="s"?.2:200),n(L)&&(L=V.ease!=null?V.ease:"quadInOut"),n(S)&&(S=V.swipe!=null?V.swipe:!0),n(k)&&(k=V.remember!=null?V.remember:"zimCarousel"),n(m)&&(m=V.selectedIndex!=null?V.selectedIndex:0),n(A)&&(A=V.continuous!=null?V.continuous:!0),k&&localStorage&&!n(localStorage[k])&&(localStorage[k]=="NaN"&&(localStorage[k]=0),m=Number(localStorage[k])),O.items=t,O.viewNum=r,O.spacing=o,O.arrowLeft=P,O.arrowRight=T,O.arrowLeft.oW=P.width,O.arrowRight.oW=T.width,f&&(O.backing=f);var N={};e.loop(t,function(h,I){typeof h=="string"&&(h=t[I]=new e.Pic(h)),h.reg(CENTER,CENTER);var Q=N["width"+h.width];Q?N["width"+h.width]+=1:N["width"+h.width]=1});var q=0,U=0;e.loop(N,function(h,I){I>q&&(q=I,U=Number(h.substring(5)))});var z=0;e.loop(t,function(h){h.width=U,h.height>z&&(z=h.height)});var ie;A?(O.continuous=!0,ie=e.copy(t),e.loop(t.length,function(h){ie.push(t[h].duplicate())})):ie=t,O.itemWidth=U,O.itemHeight=z;var ae=P.width+R+p,he;function $(){var h=r*(U+o)-o,I=z;he=h+p*2+R*2+P.width+T.width,O.setBounds(0,0,he,I+_*2),O.tile=new e.Tile({obj:ie,cols:ie.length,spacingH:o,rows:1,unique:!0,align:"center",valign:b}).center(O).loc(ae),O.background=new Sn(h+p*2,I+_*2,l).center(O,0),O.tile.setMask(O.background)}function G(){P.pos(0,0,"left","center",O),T.pos(0,0,"right","center",O),P.on("mousedown",function(){O.cycleInterval&&(O.cycleClear(),O.dispatchEvent("cyclecleared")),O.goLeft()}),T.on("mousedown",function(){O.cycleInterval&&(O.cycleClear(),O.dispatchEvent("cyclecleared")),O.goRight()}),w()}function v(){if(O.swipe){var h=O.swipeObj=new e.Swipe(O.tile);h.on("swipe",function(I){I.swipeX!=0&&O.cycleInterval&&(O.cycleClear(),O.dispatchEvent("cyclecleared")),I.swipeX==1?O.goLeft():I.swipeX==-1&&O.goRight()})}}function w(){localStorage&&k&&(localStorage[k]=O.selectedIndex),P.activate(!0),T.activate(!0),!A&&(O.tile.x+O.tile.width<=he-T.oW-p-R&&T.activate(!1),O.tile.x>=ae&&P.activate(!1))}O.goLeft=function(h){return n(h)&&(h=i),A&&O.tile.x>=-U&&(O.tile.x-=O.tile.width/2+o/2),O.tile.x<ae&&(O.disableArrows(),m--,O.tile.animate({props:{x:O.tile.x+U+o},time:h,ease:L,call:function(){w(),O.enableArrows(),O.dispatchEvent("transitioned")}})),O},O.goRight=function(h){return n(h)&&(h=i),A&&O.tile.x-U<=he-O.tile.width&&(O.tile.x+=O.tile.width/2+o/2),O.tile.x+O.tile.width>he-T.oW-p-R&&(O.disableArrows(),m++,O.tile.animate({props:{x:O.tile.x-U-o},time:h,ease:L,call:function(){w(),O.enableArrows(),O.dispatchEvent("transitioned")}})),O},O.cycleClear=function(){return O.cycleInterval.clear(),O.cycleInterval=null,O},O.cycle=function(h,I,Q,x,F,Ae){var Y="cycleTime, transitionTime, repeat, repeatNum, recycle, rtl",K;if(K=mt(O.cycle,arguments,Y))return K;n(h)&&(h=V.cycleTime!=null?V.cycleTime:ne=="s"?5:5e3),n(I)&&(I=V.transitionTime!=null?V.transitionTime:ne=="s"?1:1e3),n(Q)&&(Q=!0),n(x)&&(x=0),n(F)&&(F=h*2),n(Ae)&&(Ae=fe.DIR&&fe.DIR=="rtl"||!fe.DIR&&e.DIR=="rtl");let ge=Ae?-1:1;return O.cycleInterval&&O.cycleInterval.clear(),F&&F!=-1&&(O.recycleEvent&&O.off("cyclecleared",O.recycleEvent),O.recycleWait&&O.recycleWait.clear(),O.recycleEvent=O.on("cyclecleared",function(){O.recycleWait&&O.recycleWait.clear(),O.recycleWait=si(F,function(){O.cycle(h,I,Q,x,F,Ae)})})),A?(O.repeatTotal=0,O.cycleInterval=e.interval(h*2,function(ye){if(O.selectedIndex==0)if(!Q&&Ae)O.cycleInterval.clear();else{if(Ae&&ye.count!=1&&(O.repeatTotal+=1),Ae&&x!=0&&O.repeatTotal>=x){O.cycleInterval.clear(),O.dispatchEvent("repeatdone");return}ge==1?O.goRight(I):O.goLeft(I)}else if(O.selectedIndex==t.length-r){if(!Ae&&ye.count!=1&&(O.repeatTotal+=1),!Ae&&x!=0&&O.repeatTotal>=x){O.cycleInterval.clear(),O.dispatchEvent("repeatdone");return}O.repeatTotal>=1&&O.dispatchEvent("repeated"),!Ae&&!Q?O.cycleInterval.clear():ge==1?O.goRight(I):O.goLeft(I)}else ge==1?O.goRight(I):O.goLeft(I)})):(O.repeatTotal=.5,O.cycleInterval=e.interval(h*2,function(ye){if(O.selectedIndex==0){if(ye.count!=1&&(O.repeatTotal+=.5),x!=0&&O.repeatTotal>x){O.cycleInterval.clear(),O.dispatchEvent("bouncedone");return}O.repeatTotal>=1&&O.dispatchEvent("bounced"),ge=1,O.goRight(I)}else if(O.selectedIndex==t.length-r){if(ye.count!=1&&(O.repeatTotal+=.5),x!=0&&O.repeatTotal>x){O.cycleInterval.clear(),O.dispatchEvent("bouncedone");return}O.repeatTotal>=1&&O.dispatchEvent("bounced"),ge=-1,O.goLeft(I)}else Gr(),ge==1?O.goRight(I):O.goLeft(I)})),O},O.enableArrows=function(){return O.swipeObj&&(O.swipeObj.active=!0),P.mouse(),T.mouse(),O},O.disableArrows=function(){return O.swipeObj&&(O.swipeObj.active=!1),P.noMouse(),T.noMouse(),O},Object.defineProperty(O,"selectedIndex",{get:function(){return(m+t.length)%t.length},set:function(h){m=e.constrain(h,0,t.length-r),O.tile.x=ae-m*(U+o),w()}}),Object.defineProperty(O,"swipe",{get:function(){return S},set:function(h){S=h,S&&!O.swipeObj&&v(),O.swipeObj.active=S}}),$(),G(),v(),f&&f.center(O,1),m&&(O.selectedIndex=m),this.dispose=function(h,I,Q){return O.swipeObj&&O.swipeObj.dispose(),O.recycleEvent&&O.off("cyclecleared",O.recycleEvent),O.cycleWait&&O.cycleWait.clear(),O.cycleInterval&&O.cycleInterval.clear(),O.swipeObj=O.recycleEvent=O.cycleWait=null,Q||this.zimContainer_dispose(),!0},D!==!1&&e.styleTransforms(this,V),this.clone=function(){for(var h=[],I=0;I<t.length;I++){var Q=t[I];Q.duplicate?h.push(Q.duplicate()):Q.clone?h.push(Q.clone()):h.push(e.copy(t[I]))}return O.cloneProps(new e.Carousel(h,r,i,o,l,f,d,p,_,P.duplicate(),T.duplicate(),R,b,L,S,k,m,A,D,this.group))}},e.extend(e.Carousel,e.Container,["clone","dispose"],"zimContainer",!1),e.Loader=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G){var v="width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",w;if(w=mt(e.Loader,arguments,v,this))return w;qe("67.5"),this.group=$;var h=he===!1?{}:e.getStyle("Loader",this.group,G);if(n(t)&&(t=h.width!=null?h.width:250),n(r)&&(r=h.height!=null?h.height:70),n(o)&&(o=h.type!=null?h.type:"image"),o=o.toLowerCase(),n(l)&&(l=h.backgroundColor!=null?h.backgroundColor:"rgba(0,0,0,.05)"),n(f)&&(f=h.rollBackgroundColor!=null?h.rollBackgroundColor:"rgba(0,0,0,.1)"),n(d)&&(d=h.color!=null?h.color:"rgba(0,0,0,.5)"),n(p)&&(p=h.rollColor!=null?h.rollColor:d),n(_)&&(_=h.borderColor!=null?h.borderColor:"rgba(0,0,0,.3)"),n(T)&&(T=h.borderWidth!=null?h.borderWidth:1),n(A)&&(A=h.dashed!=null?h.dashed:!0),n(R)&&(R=h.corner!=null?h.corner:0),n(ie)&&(ie=h.multiple!=null?h.multiple:!0),n(i)&&(i=h.label!=null?h.label:new e.Label({text:"UPLOAD PIC",color:d,rollColor:p,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),typeof z>"u")if(fe.zdf)var z=fe.zdf;else{kt&&ht("zim.Loader - please provide a reference to zim Frame");return}this.zimButton_constructor(t,r,i,l,f,null,d,p,null,_,T,P,null,D,C,null,X,Z,null,R,A,b,L,k,m,null,null,null,null,null,S,null,null,null,E,V,null,null,null,null,null,null,O,ne,null,N,q,null,U,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var I=this,Q=z.stage;i=I.label;var x=I.tag=document.createElement("input");z.tag?z.tag.appendChild(x):document.body.appendChild(x),x.setAttribute("type","file"),x.setAttribute("aria-hidden",!0),ie&&x.setAttribute("multiple","multiple"),ae&&x.setAttribute("accept",ae),x.hidden=!0,x.zimDisplay=x.style.display||"inline-block",x.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){x.click()}),x.addEventListener("change",K);var F=new je.DOMElement(x);Q.addChild(F),F.alpha=0;var Ae=z.retina&&fe.devicePixelRatio||1;this.resize=function(ee,ce){if(!I.stage){x.setAttribute("aria-hidden",!0),x.hidden=!0,x.style.display="none";return}x.setAttribute("aria-hidden",!1),x.hidden=!1,x.style.display=x.zimDisplay,n(ee)&&(ee=!0),I.time1&&clearTimeout(I.time1),ce||(I.time1=setTimeout(function(){I.resize(null,!0)},40));var ve=I.getConcatenatedMatrix().decompose(),Re=I.localToGlobal(0,0);if(z.retina){var se=e.browserZoom();z.tag?(F.x=Re.x/Ae/se,F.y=Re.y/Ae/se):(F.x=z.x/Q.scaleX+Re.x/Ae/se,F.y=z.y/Q.scaleY+Re.y/Ae/se),e.sca(F,ve.scaleX/Ae/Q.scaleX/se,ve.scaleY/Ae/Q.scaleY/se)}else F.x=z.x+Re.x*z.scale,F.y=z.y+Re.y*z.scale,e.sca(F,z.scale*ve.scaleX,z.scale*ve.scaleY);return Q.update(),I},this.resize(),I.on("added",function(){x.style.display="block",x.hidden=!1,x.style.display="block",I.resize()}),I.added(Y);function Y(){I.resize(),I.time2=setTimeout(function(){x.style.display="block",x.hidden=!1,x.style.display="block"},50),I.on("added",Y,null,!0)}I.on("removed",function(){I.time1&&clearTimeout(I.time1),I.time2&&clearTimeout(I.time2),x&&(x.style.display="none",x.hidden=!0,x.style.display="none")});function K(ee){var ce;if(ee.dataTransfer&&ee.dataTransfer.files&&ee.dataTransfer.files.length>0?ce=ee.dataTransfer.files:ce=ee.target.files,o=="text"||o=="json"){var ve=[],Re;if(o.toLowerCase()=="json")var se=[],Oe}else if(o=="other")var J=[],xe;else var te=[],we;for(var ke=0;ke<ce.length;ke++)(function(pe){var Me=new FileReader;Me.onload=function(Ue){if(o=="text"||o=="json"){var ue=Ue.target.result;if(ve.push(ue),o=="json"){var Ee=e.parseJSON(ue);se.push(Ee)}if(ve.length==1&&(Re=ue,o=="json"&&(Oe=Ee)),ve.length==ce.length){var Te=new je.Event("loaded");Te.texts=ve,Te.text=Re,Te.lastText=ue,Te.total=ve.length,o=="json"&&(Te.jsons=se,Te.json=Oe,Te.lastJSON=Ee),I.dispatchEvent(Te),x.value=""}}else if(o=="other"){var _e=Ue.target.result;if(J.push(_e),J.length==1&&(xe=_e),J.length==ce.length){var Te=new je.Event("loaded");Te.others=J,Te.other=xe,Te.lastOther=_e,Te.total=J.length,I.dispatchEvent(Te),x.value=""}}else{var We=new Image;We.onload=function(){var oe=new e.Bitmap(We);if(te.push(oe),te.length==1&&(we=oe),te.length==ce.length){var Ye=new je.Event("loaded");Ye.bitmaps=te,Ye.bitmap=we,Ye.lastBitmap=oe,Ye.total=te.length,I.dispatchEvent(Ye),x.value=""}},We.src=Ue.target.result}},o=="text"||o=="json"?Me.readAsText(pe):Me.readAsDataURL(pe)})(ce[ke])}var ge=new XMLHttpRequest;if(ge.upload){var ye=function(ee){x.removeEventListener("change",K),K(ee),setInterval(function(){x.addEventListener("change",K)},100)};x.addEventListener("drop",ye)}this.save=function(ee,ce,ve,Re,se,Oe,J,xe,te,we,ke){var pe="content, filename, x, y, width, height, cached, cachedBounds, type, data, quality",Me;if(Me=mt(I.save,arguments,pe))return Me;if(n(ee)&&(ee=z.stage),n(te)&&(te="png"),n(ce))ce="saved_"+String(e.makeID("numbers",5))+"."+te;else{var Ue=ce.split(".");if(Ue.length==1)ce+="."+te;else{var ue=["png","jpg","jpeg"],Ee=ue.indexOf(Ue[Ue.length-1].toLowerCase());Ee==-1?ce+="."+te:te=ue[Ee]}}if(n(ve)&&(ve=0),n(Re)&&(Re=0),n(se)&&(se=ee.getBounds&&ee.getBounds()?ee.getBounds().width:z.width),n(Oe)&&(Oe=ee.getBounds&&ee.getBounds()?ee.getBounds().height:z.height),ee.cache(ve,Re,se,Oe),we){var Te=ee.cacheCanvas.toDataURL("image/"+te,ke);return J?xe&&ee.cache(xe.x,xe.y,xe.width,xe.height):ee.uncache(),Te}var _e=/Edge\/(\d)+/.test(navigator.userAgent);if(_e){var We=fe.open();We.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+ee.cacheCanvas.toDataURL("image/"+te)+"></body></html>"),We.document.close()}else{te=="jpg"&&(te="jpeg");var oe=document.createElement("a");oe.setAttribute("download",ce),oe.setAttribute("href",ee.cacheCanvas.toDataURL("image/"+te,ke)),document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)}return J?xe&&ee.cache(xe.x,xe.y,xe.width,xe.height):ee.uncache(),I},he!==!1&&e.styleTransforms(this,h),this.clone=function(){var ee=new e.Loader(t,r,n(i)?null:i.clone(),l,f,d,p,_,T,R,b,L,S,k,m,n(D)?null:D.clone(),n(C)?null:C.clone(),E,n(X)?null:X.clone(),n(Z)?null:Z.clone(),V,n(O)?null:O.clone(),n(ne)?null:ne.clone(),n(N)?null:N.clone(),n(q)?null:q.clone(),U,z,he,this.group);return I.cloneProps(ee)},Object.defineProperty(this,"frame",{get:function(){return z},set:function(ee){ee!=z&&(z.off("update",I.updateEvent),z.off("resize",I.resizeEvent),z=ee,I.resizeEvent=z.on("resize",I.resize),I.updateEvent=z.on("update",I.resize),I.resize())}}),this.resizeEvent=z.on("resize",I.resize),this.updateEvent=z.on("update",I.resize),this.dispose=function(ee,ce,ve){var Re;return I.stage&&(Re=I.stage),z.off("update",I.updateEvent),z.off("resize",I.resizeEvent),K&&x.removeEventListener("change",K),ye&&x.removeEventListener("drop",ye),x&&x.parentNode&&x.parentNode.removeChild(x),x=null,ve||(this.zimButton_dispose(),Re&&Re.update()),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N){var q="width, height, placeholder, text, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, keyboardShift, style, group, inherit",U;if(U=mt(e.TextArea,arguments,q,this))return U;qe("67.6"),this.group=ne;var z=O===!1?{}:e.getStyle("TextArea",this.group,N);if(n(t)&&(t=z.width!=null?z.width:250),n(r)&&(r=z.height!=null?z.height:70),n(i)&&(i=z.placeholder!=null?z.placeholder:null),n(o)&&(o=z.text!=null?z.text:null),n(l)&&(l=z.size!=null?z.size:20),n(f)&&(f=z.padding!=null?z.padding:5),n(d)&&(d=z.color!=null?z.color:e.granite),n(p)&&(p=z.backgroundColor!=null?z.backgroundColor:"rgba(256,256,256,.1)"),n(_)&&(_=z.borderColor!=null?z.borderColor:"rgba(0,0,0,.1)"),n(P)&&(P=z.borderWidth!=null?z.borderWidth:null),_<0||P<0?_=P=null:_!=null&&P==null&&(P=1),n(T)&&(T=z.corner!=null?z.corner:0),!n(b)&&n(R)&&(R=z.shadowColor!=null?z.shadowColor:"rgba(0,0,0,.3)"),!n(R)&&n(b)&&(b=z.shadowBlur!=null?z.shadowBlur:10),n(A)&&(A=z.password!=null?z.password:!1),n(D)&&(D=z.inputType!=null?z.inputType:!1),n(C)&&(C=z.wrap!=null?z.wrap:!0),n(E)&&(E=z.maxLength!=null?z.maxLength:null),n(m)&&(m=z.spellCheck!=null?z.spellCheck:!0),n(k)&&(k=z.readOnly!=null?z.readOnly:!1),n(V)&&(V=z.keyboardShift!=null?z.keyboardShift:!1),this.maxLength=E,n(Z)&&(Z=z.expand!=null?z.expand:20),Z===!0&&(Z=20),typeof X>"u")if(fe.zdf)var X=fe.zdf;else{kt&&ht("zim.TextArea - please provide a reference to zim Frame");return}this.zimContainer_constructor(t,r,null,null,!1),this.type="TextArea";var ie=this,ae=X.stage,he=this.background=new e.Rectangle(t,r,p,_,P,T,L,null,null,!1).expand(Z);R!=-1&&b>0&&(he.shadow=new je.Shadow(R,3,3,b)),ie.addChild(he);var $=ie.tag=D||A?document.createElement("input"):document.createElement("textarea");X.tag?X.tag.appendChild($):document.body.appendChild($),n(S)||($.setAttribute("id",S),$.setAttribute("name",S)),A?$.setAttribute("type","password"):D&&$.setAttribute("type",D),$.readOnly=k,$.spellcheck=m,i&&$.setAttribute("placeholder",i),o&&($.value=o),$.zimDisplay=$.style.display||"inline-block",$.style.cssText="background-color:rgba(0,0,0,.01); color:"+d+"; resize:none; z-index:3; width:"+(t-f*2)+"px; height:"+(r-f*2)+"px; overflow:hidden; outline:none;font-size:"+l+"px; font-family:"+(z.font!=null?z.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",ie.taInput=function(){!n(ie.maxLength)&&ie.text.length>ie.maxLength&&(ie.text=ie.text.substring(0,ie.maxLength)),ie.dispatchEvent("input")};var G=ie.y;ie.taFocus=function(){if(fe.M&&V){ie.re&&ie.stage.frame.off("resize",ie.re),ie.re=ie.stage.frame.on("resize",function(){ie.stage&&I>ie.stage.height/4&&(ie.stage.y=ie.stage.scaleY*(ie.stage.height/4-I),ie.stage.update())});var I=ie.localToGlobal(0,0).y;ie.stage&&I>ie.stage.height/4&&(ie.stage.y=ie.stage.scaleY*(ie.stage.height/4-I),ie.stage.update())}ie.stage&&(X=ie.stage.frame),X.zil&&fe.removeEventListener("keydown",X.zil[0]),ie.dispatchEvent("focus")},ie.taBlur=function(){fe.M&&V&&ie.stage&&(ie.re&&ie.stage.frame.off("resize",ie.re),ie.stage.y=G,ie.stage.update()),ie.stage&&(X=ie.stage.frame),X.zil&&fe.addEventListener("keydown",X.zil[0]),ie.dispatchEvent("blur")},$.addEventListener("change",ie.taChange),$.addEventListener("input",ie.taInput),$.addEventListener("focus",ie.taFocus),$.addEventListener("blur",ie.taBlur);var v=new je.DOMElement($);v.alpha=0,this.on("mousedown",function(){setTimeout(function(){$.focus()},100)}),this.setFocus=function(I){return n(I)&&(I=!0),I?$.focus():$.blur(),ie};var w=X.retina&&fe.devicePixelRatio||1;this.resize=function(I,Q){n(I)&&(I=!0),ie.time1&&clearTimeout(ie.time1),Q||(ie.time1=setTimeout(function(){ie.resize(null,!0)},40));var x=ie.getConcatenatedMatrix().decompose(),F=ie.localToGlobal(f,f);if(X.retina){var Ae=e.browserZoom();X.tag?(v.x=F.x/w/Ae,v.y=F.y/w/Ae):(v.x=X.x/ae.scaleX+F.x/w/Ae,v.y=X.y/ae.scaleY+F.y/w/Ae),e.sca(v,x.scaleX/w/ae.scaleX/Ae,x.scaleY/w/ae.scaleY/Ae)}else X.tag?(v.x=F.x*X.scale,v.y=F.y*X.scale):(v.x=X.x+F.x*X.scale,v.y=X.y+F.y*X.scale),e.sca(v,X.scale*x.scaleX,X.scale*x.scaleY);return v.alpha=ie.alpha,ie.parent&&(v.alpha*=ie.parent.alpha),I&&ie.stage&&ae.update(),ie},this.resize(),ie.added(h);function h(){ae.addChild(v),ie.time2=setTimeout(function(){$.style.display=$.zimDisplay},50),ie.resize(),ie.on("added",h,null,!0),ie.FOEvent=ae.on("stagemousedown",function(){ie.focus=!1})}ie.on("removed",function(){ie.time1&&clearTimeout(ie.time1),ie.time2&&clearTimeout(ie.time2),ae.removeChild(v),ie.FOEvent&&ae.off("stagemousedown",ie.FOEvent),$&&($.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return $.value},set:function(I){$.value=I}}),Object.defineProperty(this,"text",{get:function(){return $.value},set:function(I){$.value=I}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==$},set:function(I){ie.setFocus(I)}}),Object.defineProperty(this,"readOnly",{get:function(){return $.readOnly},set:function(I){$.readOnly=I}}),fe.KEYFOCUS!=null&&(e.KEYFOCUS=fe.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ie},set:function(){e.KEYFOCUS=ie}}),e.KEYFOCUS||(ie.keyFocus=!0),ie.taMousedown=function(){ie.keyFocus=!0},$.addEventListener("mousedown",ie.taMousedown),C||($.style.whiteSpace="pre"),O!==!1&&e.styleTransforms(this,z),this.clone=function(){var I=new e.TextArea(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,this.group,N);return ie.cloneProps(I)},Object.defineProperty(this,"frame",{get:function(){return X},set:function(I){I!=X&&(X.off("update",ie.updateEvent),X.off("resize",ie.resizeEvent),X=I,ie.resizeEvent=X.on("resize",ie.resize),ie.updateEvent=X.on("update",ie.resize),w=X.retina&&fe.devicePixelRatio||1,ae=X.stage,ie.resize())}}),this.resizeEvent=X.on("resize",ie.resize),this.updateEvent=X.on("update",ie.resize),this.dispose=function(I,Q,x){var F;return ie.stage&&(F=ie.stage),X.off("update",ie.updateEvent),X.off("resize",ie.resizeEvent),F&&ie.FOEvent&&F.off("stagemousedown",ie.FOEvent),$&&$.parentNode&&$.parentNode.removeChild($),$.removeEventListener("change",ie.taChange),$.removeEventListener("input",ie.taInput),$.removeEventListener("focus",ie.taFocus),$.removeEventListener("blur",ie.taBlur),$.removeEventListener("mousedown",ie.taMousedown),$=null,x||(this.zimContainer_dispose(!0),F&&F.update()),ie.background=null,!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.Tag=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="width, height, id, frame, backgroundColor, padding, paddingH, paddingV, expand, style, group, inherit",L;if(L=mt(e.Tag,arguments,b,this))return L;qe("67.7"),this.group=T;var S=P===!1?{}:e.getStyle("Tag",this.group,R);if(n(t)&&(t=S.width!=null?S.width:250),n(r)&&(r=S.height!=null?S.height:70),n(i)&&(i=S.id!=null?S.id:"zimTag_"+e.rand(1e4)),typeof o>"u")if(fe.zdf)var o=fe.zdf;else{kt&&ht("zim.Tag - please provide a reference to zim Frame");return}n(l)&&(l=S.backgroundColor!=null?S.backgroundColor:"rgba(0,0,0,0)"),n(f)&&(f=S.padding!=null?S.padding:10),n(d)&&(d=S.paddingH!=null?S.paddingH:f),n(p)&&(p=S.paddingV!=null?S.paddingV:f),n(_)&&(_=S.expand!=null?S.expand:20),_===!0&&(_=20),this.zimContainer_constructor(t,r,null,null,!1),this.type="Tag",this.tagID=i,this.id=i;var k=this,m=o.stage;k.background=new e.Rectangle(t+d,r+p,l).center(this).expand(_||0);var A=k.tag=document.createElement("div");o.tag?o.tag.appendChild(A):document.body.appendChild(A),A.setAttribute("id",i),A.setAttribute("name",i),A.zimDisplay=A.style.display||"inline-block",A.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var D=new je.DOMElement(A);D.alpha=0;var C=o.retina&&fe.devicePixelRatio||1;this.resize=function(X,Z){n(X)&&(X=!0),k.time1&&clearTimeout(k.time1),Z||(k.time1=setTimeout(function(){k.resize(null,!0)},40));var V=k.getConcatenatedMatrix().decompose(),O=k.localToGlobal(0,0);if(o.retina){var ne=e.browserZoom();o.tag?(D.x=O.x/C/ne,D.y=O.y/C/ne):(D.x=o.x/m.scaleX+O.x/C/ne,D.y=o.y/m.scaleY+O.y/C/ne),e.sca(D,V.scaleX/C/m.scaleX/ne,V.scaleY/C/m.scaleY/ne)}else D.x=o.x+O.x*o.scale,D.y=o.y+O.y*o.scale,e.sca(D,o.scale*V.scaleX,o.scale*V.scaleY);return D.alpha=k.alpha,k.parent&&(D.alpha*=k.parent.alpha),X&&k.stage&&m.update(),k},this.resize(),k.added(E);function E(){m.addChild(D),k.time2=setTimeout(function(){A.style.display=A.zimDisplay},50),k.resize(),k.on("added",E,null,!0)}k.on("removed",function(){k.time1&&clearTimeout(k.time1),k.time2&&clearTimeout(k.time2),m.removeChild(D),A&&(A.style.display="none")}),this.add=function(X){return A.innerHTML+=X,k},Object.defineProperty(this,"innerHTML",{get:function(){return A.innerHTML},set:function(X){A.innerHTML=X}}),Object.defineProperty(this,"style",{get:function(){return A.style},set:function(X){A.style=X}}),P!==!1&&e.styleTransforms(this,S),this.clone=function(){var X=new e.Tag(t,r,i,o,l,f,d,p,_,P,this.group,R);return k.cloneProps(X)},Object.defineProperty(this,"frame",{get:function(){return o},set:function(X){X!=o&&(o.off("update",k.updateEvent),o.off("resize",k.resizeEvent),o=X,k.resizeEvent=o.on("resize",k.resize),k.updateEvent=o.on("update",k.resize),k.resize())}}),this.resizeEvent=o.on("resize",k.resize),this.updateEvent=o.on("update",k.resize),this.dispose=function(X,Z,V){var O;return k.stage&&(O=k.stage),o.off("update",k.updateEvent),o.off("resize",k.resizeEvent),A&&A.parentNode&&A.parentNode.removeChild(A),A=null,V||(this.zimContainer_dispose(!0),O&&O.update()),!0}},e.extend(e.Tag,e.Container,["clone","dispose"],"zimContainer",!1);function c(t,r){r?(t.mouseChildren=!0,t.mouseEnabled=!0,t._enabled=!0):(t.mouseChildren=!1,t.mouseEnabled=!1,t._enabled=!1)}if(e.addTo=function(t,r,i,o){var l="obj, container, index, localToLocal",f;if(f=mt(e.addTo,arguments,l))return f;if(qe("47.5"),n(t)){ht("zim methods - addTo(): please provide object");return}if(n(r))if(fe.zdf)r=fe.zdf.stage;else{ht("zim methods - addTo(): please provide container");return}if(n(o)&&(o=!0),t.parent||(o=!1),o)var d=t.parent.localToLocal(t.x,t.y,r);return n(i)||isNaN(i)?r.addChild(t):r.addChildAt(t,i),o&&(t.x=d.x,t.y=d.y),t},e.removeFrom=function(t,r){if(qe("47.6"),n(t)){ht("zim methods - removeFrom(): please provide object");return}return t.removePhysics&&t.removePhysics(),n(r)?t.parent&&t.parent.removeChild(t):r.removeChild(t),t},e.added=function(t,r,i,o){if(qe("47.7"),!(n(t)||n(r)||typeof r!="function")){var l=g(i);if(n(i)&&(i=l=="s"?.1:100),t.stage){r(t.stage,t);return}var f=i*(l=="s"?1e3:1),d;o&&(a(o),d=o*(l=="s"?1e3:1));var p=Date.now(),_=0,P=setInterval(function(){if(_>5){clearInterval(P);return}_++,t.stage&&(r(t.stage,t),clearInterval(P),clearInterval(T))},10),T=setInterval(function(){d>0&&p-Date.now()>d&&clearInterval(T),t.stage&&(r(t.stage,t),clearInterval(T))},f);return T}},e.centerReg=function(t,r,i,o){var l="obj, container, index, add",f;if(f=mt(e.centerReg,arguments,l))return f;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("centerReg",arguments),t.addTo(r,i);if(qe("48"),n(t)||!t.getBounds||!t.getBounds())return ht("zim methods - centerReg(): please provide object with bounds set"),t;n(o)&&(o=!0),n(r)&&t.parent&&o&&(r=t.parent,n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t)),!n(r)&&r==t.parent&&(n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t));var d=t.getBounds();return t.regX=d.x+d.width/2,t.regY=d.y+d.height/2,o?e.center(t,r,i):t},e.center=function(t,r,i,o){var l="obj, container, index, add",f;if(f=mt(e.center,arguments,l))return f;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("center",arguments),t.addTo(r,i);if(e.centerCheck||(qe("48.1"),e.centerCheck=!0),n(t)||!t.getBounds)return ht("zim.center(): please provide object with bounds"),t;if(n(r)&&(t.parent?r=t.parent:fe.zdf&&(r=fe.zdf.stage)),n(r)||!r.getBounds)return ht("zim.center(): please provide container with bounds"),t;var d=t.getBounds(),p=r.getBounds();n(o)&&(o=!0);var _=!1;if(n(p)&&(r.setBounds(0,0),p=r.getBounds(),_=!0),o&&r.addChild&&(n(i)||typeof i=="number"&&isNaN(i)?(!t.parent||t.parent!=r)&&r.addChild(t):r.addChildAt(t,i)),n(d))return t.x=p.x+p.width/2,t.y=p.y+p.height/2,t;var P=!1,T=!1;r.scaleX==0&&(P=!0,r.scaleX=1e-5),r.scaleY==0&&(T=!0,r.scaleY=1e-5);var R=t.localToLocal(t.regX,t.regY,r),b=e.boundsToGlobal(t),L=e.boundsToGlobal(r,b,!0);if(P&&(r.scaleX=0),T&&(r.scaleY=0),t.x=p.x+p.width/2-L.width/2+(R.x-L.x),t.y=p.y+p.height/2-L.height/2+(R.y-L.y),!o&&r.getStage&&r.stage&&t.parent){var S=r.localToLocal(t.x,t.y,t.parent);t.x=S.x,t.y=S.y}return _&&r.setBounds(null),t},e.place=function(t,r){if(qe("49"),n(t))return;n(r)&&(r="obj"),e.lastPlace=t;function i(){ht(r+".x = "+Math.round(t.x)+"; "+r+".y = "+Math.round(t.y)+";"),ht(r+".loc("+Math.round(t.x)+", "+Math.round(t.y)+");")}e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),t.on("mousedown",function(){e.lastPlace=t});var o=fe.zdf;return o&&o.on("keydown",function(l){if(t==e.lastPlace){var f=l.keyCode;if(f>=37&&f<=40){var d=l.shiftKey?10:1;t.mov(f==37?-1*d:f==39?1*d:0,f==38?-1*d:f==40?1*d:0),i(),t.stage&&t.stage.update()}}}),ht("place "+r+" - to get new position",t),t.on("click",i),t},e.placeReg=function(t,r){if(qe("49.5"),n(t))return;var i=t.stage;if(n(i))return ht("zim.placeReg() - add object to stage before calling placeReg()"),t;n(r)&&(r="obj");function o(){var d=t.globalToLocal(f.x,f.y);ht(r+".regX = "+Math.round(d.x)+"; "+r+".regY = "+Math.round(d.y)+";"),ht(r+".reg("+Math.round(d.x)+", "+Math.round(d.y)+");")}var l=t.parent.localToGlobal(t.x,t.y),f=new e.Shape(-25,-25,50,50,null,!1).addTo(i).pos({x:l.x,y:l.y,reg:!0});return f.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),f.compositeOperation="difference",f.expand(0),e.drag({obj:f}),ht("place cursor to get new registration point location"),i.on("stagemouseup",o),t},e.pos=function(t,r,i,o,l,f,d,p,_,P,T){var R="obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY",b;if(b=mt(e.pos,arguments,R))return b;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("pos",arguments),t.addTo(f,d);qe("41.5"),fe.DIR&&fe.DIR=="rtl"||!fe.DIR&&e.DIR=="rtl"?o=="start"?o="right":o=="end"&&(o="left"):o=="start"?o="left":o=="end"&&(o="right");var L=!1;o=="right"&&(L=!0);var S=!1;l=="bottom"&&(S=!0);var k=e.POSREG;if(fe.POSREG!=null&&(k=fe.POSREG),n(_)&&(_=k),n(t))return;n(_)&&n(P)&&(P=!1),n(_)&&n(T)&&(T=!1),!n(_)&&n(P)&&(P=_),!n(_)&&n(T)&&(T=_),n(p)&&(p=!0),!n(f)&&!f.addChild&&(f=null),!t.getBounds&&!t.getBounds()&&(P=T=!1),t.zimPos={x:r,y:i,h:o,v:l,i:d},n(f)&&(t.parent?f=t.parent:fe.zdf&&(f=fe.zdf.stage)),!t.parent&&n(r)&&(r=0),!t.parent&&n(i)&&(i=0);var m=!1;t.getBounds()||(t.setBounds(0,0),m=!0);var A=!1;f&&!f.getBounds()&&(f.setBounds(0,0),A=!0);function D(){n(d)||typeof d=="number"&&isNaN(d)?f.contains(t)||f.addChild(t):f.addChildAt(t,d)}if(!n(f)&&f.addChild&&p){var C=f.getBounds().clone();D();var E=f.getBounds();(C.width!=E.width||C.height!=E.height||C.x!=E.x||C.y!=E.y)&&(t.removeFrom(),f.setBounds(C.x,C.y,C.width,C.height),A=!0,D())}if(!P&&!T&&(o=="center"||o=="middle")&&(l=="center"||l=="middle"))return t.center({container:f}),t.mov(r,i),m&&t.setBounds(null),A&&f.setBounds(null),t;if(o=="center"||o=="middle"){if(P)t.x=f.width/2;else{var X=t.y;t.center(),t.y=X}t.mov(r),r=null,o=null}else o===!0&&(L=!0);if(l=="center"||l=="middle"){if(T)t.y=f.height/2;else{var Z=t.x;t.center(),t.x=Z}t.mov(0,i),i=null,l=null}else l===!0&&(S=!0);function V(){var z=t.getBounds(),ie=z.x,ae=z.y,he=z.width,$=z.height,G=t._props.matrix;G=t.getMatrix(G),(ie||ae)&&G.appendTransform(0,0,1,1,0,0,0,-ie,-ae);var v=he*G.a,w=he*G.b,h=$*G.c,I=$*G.d,Q=G.tx,x=G.ty,F=Q,Ae=Q,Y=x,K=x;return(ie=v+Q)<F?F=ie:ie>Ae&&(Ae=ie),(ie=v+h+Q)<F?F=ie:ie>Ae&&(Ae=ie),(ie=h+Q)<F?F=ie:ie>Ae&&(Ae=ie),(ae=w+x)<Y?Y=ae:ae>K&&(K=ae),(ae=w+I+x)<Y?Y=ae:ae>K&&(K=ae),(ae=I+x)<Y?Y=ae:ae>K&&(K=ae),{x:F,y:Y,width:Ae-F,height:K-Y}}if(t.parent&&t.parent.getBounds){if(f=t.parent,n(r)&&L==!0&&(r=0),n(i)&&S==!0&&(i=0),n(r)||(t.x=r),n(i)||(t.y=i),n(r)&&n(i)&&!L&&!S)return m&&t.setBounds(null),A&&f.setBounds(null),t;var O=0,ne=0;if(t.getBounds()){var N=V();if(!n(r)){var q;L?q=new e.Point(N.x+N.width,N.y+N.height):q=new e.Point(N.x,N.y),O=q.x-r}n(i)||(S?q=new e.Point(N.x+N.width,N.y+N.height):q=new e.Point(N.x,N.y),ne=q.y-i);var U=f.getBounds();n(r)||(L?P?t.x=U.width+U.x-r:t.x=U.width+U.x-r-O:(P?t.x=r:t.x=r-O,t.x+=U.x)),n(i)||(S?T?t.y=U.height+U.y-i:t.y=U.height+U.y-i-ne:(T?t.y=i:t.y=i-ne,t.y+=U.y))}}return m&&t.setBounds(null),A&&f.setBounds(null),p||t.removeFrom(),t},e.loc=function(t,r,i,o,l,f,d,p){var _="obj, target, y, container, index, add, localToLocal, x",P;if(P=mt(e.loc,arguments,_))return P;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("loc",arguments),t.addTo(o,l);if(qe("41.55"),!n(t)){if(typeof r=="number"&&(p=r,r=null),n(r)||(Array.isArray(r)?(p=r[0],i=r[1]):(n(r.x)||(p=r.x),n(r.y)||(i=r.y))),n(p)&&n(r)&&(p=t.x),n(i)&&n(r)&&(i=t.y),n(f)&&(f=!0),n(o)&&(t.parent?o=t.parent:fe.zdf&&(o=fe.zdf.stage)),f&&o&&(!t.parent||o!=t.parent?n(l)||isNaN(l)?o.addChild(t):o.addChildAt(t,l):n(l)||o.addChildAt(t,l)),n(d)&&(d=!0),r&&r.parent&&t.parent&&d){var T=r.parent.localToLocal(p,i,t.parent);p=T.x,i=T.y}return t.x=p,t.y=i,t}},e.mov=function(t,r,i){var o="obj, x, y",l;if(l=mt(e.mov,arguments,o))return l;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("mov",arguments),t;if(qe("41.6"),!n(t))return n(r)||(t.x+=r),n(i)||(t.y+=i),t},e.sca=function(t,r,i){return t.type=="AC"&&fe.zdf?(fe.zdf.ac("sca",arguments),t):(qe("41.97"),n(t)||n(t.scaleX)||(n(r)&&(r=t.scaleX),n(i)&&(i=r),t.scaleX=r,t.scaleY=i),t)},e.alp=function(t,r){if(qe("41.7"),!n(t))return n(r)||(t.alpha=t.hovOriginal=r,t.tag&&t.tag.style&&(t.type!="Loader"&&(t.tag.style.opacity=r),r==0?t.tag.style.display=t.tag.zimDisplay="none":t.tag.style.display=t.tag.zimDisplay="inline-block")),t},e.vis=function(t,r){if(qe("41.71"),!n(t))return t.visible=r,t.tag&&t.tag.style&&(r?t.tag.style.display=t.tag.zimDisplay="inline-block":t.tag.style.display=t.tag.zimDisplay="none"),t},e.ble=function(t,r){if(qe("41.72"),!n(t))return n(r)&&(r="difference"),t.compositeOperation=r,(t.type=="Blob"||t.type=="Squiggle")&&t.update(),t},e.dye=function(t,r){if(qe("41.73"),!n(t))return t.hasOwnProperty("backgroundColor")?t.backgroundColor=r:t.hasOwnProperty("color")&&(t.color=r),t},e.hov=function(t,r,i){if(qe("41.75"),!n(t))return n(r)&&(r=1),n(i)&&(i=typeof r=="number"?"alpha":"color"),t.hovMouseover&&(t.off("mouseover",t.hovMouseover),t.off("mouseout",t.hovMouseout)),r==-1?(t.cur("default"),n(t.hovOld)||(t[t.hovType]=t.hovOld),t.hovOld=null,t.stage&&t.stage.update(),t):(t.cur(),t.hovOld=t[i],t.hovNew=r,t.hovType=i,t.hovMouseover=t.on("mouseover",function(){t[i]=t.hovNew,t.stage&&t.stage.update()}),t.hovMouseout=t.on("mouseout",function(){t[i]=t.hovOld,t.stage&&t.stage.update()}),t)},e.rot=function(t,r,i,o){if(qe("41.8"),!n(t)){if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("rot",arguments),t;if(!n(r))if(t.parent&&(!n(i)||!n(o))){n(i)&&(i=t.x),n(o)&&(o=t.y);var l=t.parent.localToLocal(i,o,t),f=new e.Point(t.x,t.y);t.reg(l.x,l.y),t.rotation=r,t.x=i,t.y=o;var d=t.parent.localToLocal(f.x,f.y,t);t.reg(d.x,d.y),t.x=f.x,t.y=f.y}else t.rotation=r;return t}},e.siz=function(t,r,i,o){if(qe("41.85"),!n(t))return t.type=="AC"&&fe.zdf?(fe.zdf.ac("siz",arguments),t):(n(o)&&(o=!1),!n(r)&&!n(i)?(t.widthOnly=r,t.heightOnly=i):n(r)?n(i)||(o?t.heightOnly=i:t.height=i):o?t.widthOnly=r:t.width=r,t)},e.ske=function(t,r,i){if(qe("41.9"),!n(t))return t.type=="AC"&&fe.zdf?(fe.zdf.ac("ske",arguments),t):(n(r)||(t.skewX=r),n(i)||(t.skewY=i),t)},e.reg=function(t,r,i,o){if(qe("41.95"),!n(t)){if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("reg",arguments),t;var l=t.regX,f=t.regY,d=r,p=fe.DIR||e.DIR||"ltr",_;if(r=="default"&&(r=null),typeof r=="string"&&(_=t.getBounds(),_?(r=="start"&&(r=p=="ltr"?"left":"right"),r=="end"&&(r=p=="ltr"?"right":"left"),r=="left"?r=_.x:r=="right"?r=_.x+_.width:(r=="center"||r=="middle")&&(r=_.x+_.width/2)):r=null),typeof i=="string"?(_||(_=t.getBounds()),_?i=="top"?i=_.y:i=="bottom"?i=_.y+_.height:(i=="center"||i=="middle")&&(i=_.y+_.height/2):i=null):n(i)&&(d=="center"||d=="middle")&&(_||(_=t.getBounds()),_?i=_.y+_.height/2:i=null),i=="default"&&(i=null),n(r)||(t.regX=r),n(i)||(t.regY=i),o&&t.parent){var P=t.localToLocal(l,f,t.parent);t.x-=P.x-t.x,t.y-=P.y-t.y}return t}},e.top=function(t){return qe("41.62"),n(t)||!t.parent||t.parent.setChildIndex(t,t.parent.numChildren-1),t},e.bot=function(t){return qe("41.63"),n(t)||!t.parent||t.parent.setChildIndex(t,0),t},e.ord=function(t,r){if(qe("41.64"),!(n(t)||!t.parent))return n(r)&&(r=0),t.parent.setChildIndex(t,e.constrain(t.parent.getChildIndex(t)+r,0,t.parent.numChildren-1)),t},e.cur=function(t,r){if(qe("41.1"),n(t))return ht("zim methods - cur(): please provide object"),t;n(r)&&(r="pointer");var i=fe.zdf;return t.stage&&(i=t.stage.frame),i.cursors&&i.cursors[r]?(t.cursor="none",t._cursor=r,i.cursorList.add(t,r),t):(i.cursorList&&i.cursorList.add(t,!0),t.cursor=r,t)},e.sha=function(t,r,i,o,l){return qe("41.2"),n(t)?(ht("zim methods - sha(): please provide object"),t):(n(r)&&(r="rgba(0,0,0,.3)"),r.blur?(t.shadow=r,t):(n(i)&&(i=t.width?t.width*.08:5),n(o)&&(o=t.height?t.height*.08:5),n(l)&&(l=t.width?t.width*.16:10),r==-1?t.shadow=null:t.shadow=new je.Shadow(r,i,o,l),t))},e.dep=function(t,r){if(qe("41.65"),!n(t))return n(r)&&(r=0),t.depth=r,t},e.nam=function(t,r){if(qe("41.67"),!(n(t)||n(r)))return t.name=r,e.zimObjectIDs[r]=t,t},e.movement=function(t,r,i){qe("47.75");var o=t.stage||fe.zdf.stage;function l(){o=t.stage,t.zimMovementStage=o,t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent),t.zimMovementEvent=o.on("stagemousemove",function(f){r(f)}),t.on("mouseout",function(){t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent)},null,!0)}return e.mobile()?(t.zimMovementEvent&&o.off("pressmove",t.zimMovementEvent),t.zimMovementEvent=t.on("pressmove",function(f){r(f)})):(t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMouseoverEvent=t.on("mouseover",l),i&&l()),t},e.noMovement=function(t){if(qe("47.9"),!n(t))return t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMovementEvent&&t.zimMovementStage&&t.zimMovementStage.off("stagemousemove",t.zimMovementEvent),t},e.tap=function(t,r,i,o,l,f,d,p,_,P){var T="obj, call, distance, time, once, dbl, dblTime, call2, call3, call4",R;if(R=mt(e.tap,arguments,T))return R;if(qe("47.8"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=f?10:5);var b=g(o);n(o)&&(o=b=="s"?8:8e3),n(l)&&(l=!1),n(f)&&(f=!1),n(d)&&(P?d=b=="s"?.5:500:d=b=="s"?1:1e3),t.cur("pointer");var L=!1,S=!1,k;return f?t.zimDblClickDownEvent=t.on("mousedown",function(m){if(k=!1,L){L=!1;return}if(L=!0,m.currentTarget.type=="List"){if(m.target.type=="WindowBacking")return;var A=m.currentTarget.globalToLocal(m.stageX/e.scaX,m.stageY/e.scaY);if(A.y<=0)return}var D=m.stageX/e.scaX,C=m.stageY/e.scaY,E=Date.now(),X,Z;S=!0,t.zimDoubleTimeout&&clearTimeout(t.zimDoubleTimeout),t.zimDoubleTimeout=setTimeout(function(){if(S=!1,L=!1,t.zimDblClickUpEvent&&t.off("pressup",t.zimDblClickUpEvent),k&&P)if(Math.abs(D+C-X/e.scaX-Z/e.scaY)<i){if(t.excludeTap)return;P(m)}else p&&p(m)},b=="s"?d*1e3:d),t.zimDblClickUpEvent=t.on("pressup",function(V){if(X=V.stageX,Z=V.stageY,k=!0,L){_&&_(V);return}else if(!S)return;if(Math.abs(D+C-V.stageX/e.scaX-V.stageY/e.scaY)<i&&Date.now()-E<(b=="s"?o*1e3:o)){if(t.excludeTap)return;clearTimeout(t.zimDoubleTimeout),r(V)}else p&&p(V);V.remove()})},null,l):t.zimClickDownEvent=t.on("mousedown",function(m){if(m.currentTarget.type=="List"){if(m.target.type=="WindowBacking")return;var A=m.currentTarget.globalToLocal(m.stageX/e.scaX,m.stageY/e.scaY);if(A.y<=0)return}var D=m.stageX/e.scaX,C=m.stageY/e.scaY,E=Date.now();t.zimClickUpEvent=t.on("pressup",function(X){if(Math.abs(D+C-X.stageX/e.scaX-X.stageY/e.scaY)<i&&Date.now()-E<(b=="s"?o*1e3:o)){if(t.excludeTap)return;r(X)}else p&&p(X);X.remove()})},null,l),t}},e.noTap=function(t){if(qe("47.9"),!n(t))return t.cursor&&t.cur("default"),t.zimClickDownEvent&&t.off("mousedown",t.zimClickDownEvent),t.zimClickUpEvent&&t.off("pressup",t.zimClickUpEvent),t.zimDoubleTimeout&&clearInterval(t.zimDoubleTimeout),t},e.hold=function(t,r,i,o,l){if(qe("47.87"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=5);var f=g(o);n(o)&&(o=f=="s"?1.5:1500),n(l)&&(l=!1),t.cur("pointer");var d;return t.zimClickHoldDownEvent=t.on("mousedown",function(p){if(d||(d=p.target.stage),!!d){if(n(d.frame)&&(d.frame=fe.zdf),(n(d.frame)||!d.frame.mousemoveEvent)&&(n(d.frame)&&(d.frame={}),d.frame.mouseX=p.stageX/e.scaX,d.frame.mouseY=p.stageY/e.scaY,d.frame.mouseholdEvent&&d.off("stagemousemove",d.frame.mouseholdEvent),d.frame.mouseholdEvent=d.on("stagemousemove",function(b){d.frame.mouseX=b.stageX/e.scaX,d.frame.mouseY=b.stageY/e.scaY})),p.currentTarget.type=="List"){if(p.target.type=="WindowBacking")return;var _=p.currentTarget.globalToLocal(p.stageX/e.scaX,p.stageY/e.scaY);if(_.y<=0)return}var P=p.stageX/e.scaX,T=p.stageY/e.scaY;clearInterval(t.zimHoldInterval);var R=0;t.zimHoldInterval=setInterval(function(){if(R<10)Math.abs(P+T-d.frame.mouseX-d.frame.mouseY)>i&&clearInterval(t.zimHoldInterval);else{if(Math.abs(P+T-d.frame.mouseX-d.frame.mouseY)<i){if(t.excludeHold)return;r(p)}clearInterval(t.zimHoldInterval)}R++},o/10*(f=="s"?1e3:1)),t.zimClickHoldUpEvent=t.on("pressup",function(){clearInterval(t.zimHoldInterval),d&&d.frame.mouseholdEvent&&d.off("stagemousemove",d.frame.mouseholdEvent)},null,!0)}},null,l),t}},e.noHold=function(t){if(qe("47.88"),!n(t))return t.cursor&&t.cur("default"),t.off("mousedown",t.zimClickHoldDownEvent),t.off("pressup",t.zimClickHoldUpEvent),t.stage&&t.stage.frame.mouseEvent&&t.stage.off("stagemousemove",t.stage.frame.mouseEvent),clearInterval(t.zimHoldTimeout),t},e.change=function(t,r,i){if(qe("47.85"),!(n(t)||n(r)||typeof r!="function"))return n(i)&&(i=!1),t.zimChangeEvent=t.on("change",function(o){r(o)},null,i),t},e.noChange=function(t){if(qe("47.95"),!n(t))return t.off("mousedown",t.zimChangeEvent),t},e.drag=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X){var Z="obj, boundary, axis, overCursor, dragCursor, all, swipe, localBoundary, onTop, surround, slide, slideFactor, slideSnap, slideSnapDamp, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch",V;if(V=mt(e.drag,arguments,Z))return V;if(qe("31"),n(t)||!t.on)return;var O=e.DRAGALL;if(fe.DRAGALL!=null&&(O=fe.DRAGALL),n(f)&&n(D)&&(f=O),n(f)&&n(D)?D=!1:n(f)?n(D)&&(D=!1):D=f,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(D=!0),r&&r.getBounds&&(t.type=="Container"||t.type=="Tile")&&t.mouseChildren==!0&&!f){var ne=Array.prototype.slice.call(arguments);return ne[4]=!0,setTimeout(function(){t.loop(function(De){ne[0]=De,e.drag.apply(null,ne)})},E?0:50),t}(n(i)||i=="all"||i!="horizontal"&&i!="vertical")&&(i="both"),t.zimDown&&t.noDrag(),t.cur(n(o)?"pointer":o),n(d)&&(d=!1),n(p)&&(p=!1),n(_)&&(_=!0),n(P)&&(P=!1),n(T)&&(T=!1),n(R)&&(R=.9),n(b)&&(b=!0);var N=["horizontal","vertical","auto"];if(b!==!0&&N.indexOf(b)<0&&(b=!1),b=="auto"&&(b=!0),n(L)&&(L=.1),n(S)&&(S=!1),n(k)&&(k=!0),n(m)&&(m=!0),n(r)&&!n(A)&&(r=A),n(X)&&(X=!1),t.dragPaused=!1,T)var q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge=fe.M?20:10,ye,ee,ce,ve,Re=!1,se=!1,Oe=50;else t.zimDragTicker=function(){};t._draggable=!0,e.setSwipe(t,d),t.zimBoundary=r,t.zimlocalBoundary=p,t.circleBounds=r&&r.type=="Circle"?r.radius:!1,t.downCheck=!1;var J=!1,xe,te,we,ke,pe;t.zimAdded=t.on("added",Me,null,!0),t.zimRemoved=t.on("removed",Ue,null,!0),t.parent&&Me();function Me(){if(t.off("added",t.zimAdded),r=t.zimBoundary,r&&r.getBounds&&r.type!="Blob"){if(t.zimlocalBoundary=!1,r.type!="Stage"&&r.type!="StageGL"?r=r.boundsToGlobal():r=new e.Boundary(0,0,r.width,r.height),!P){var De=t.boundsToGlobal();pe=t.localToGlobal(t.regX,t.regY);var de=new e.Point(pe.x-De.x,pe.y-De.y),Be=t.borderWidth?t.borderWidth:0;r.x+=de.x+Be/2,r.y+=de.y+Be/2,r.width-=De.width+Be,r.height-=De.height+Be}t.zimBoundary=r}xe=0,te=0,t.zimBoundary&&t.zimBoundary.type!="Blob"&&(p?(we=e.boundsToGlobal(t.parent,t.zimBoundary),P&&(ke=t.zimBoundary)):(we=t.zimBoundary,P&&(ke=e.boundsToGlobal(t.parent,t.zimBoundary,!0)))),we&&m&&(pe=t.parent.localToGlobal(t.x,t.y),_e(t,pe.x,pe.y)),T&&setTimeout(function(){T&&b&&(q=new e.Damp(null,L),U=new e.Damp(null,L)),t.zimDragImmediate=function(Qe,Ke){h=Qe,I=Ke,ye=ee=0,ce=ve=0,G=Q=v=x=w=F=0,T&&b&&(n(Qe)||q.immediate(Qe),n(Ke)||U.immediate(Ke))},z=3,ie=0,ae=[],he=[],$=[],G=t.x,v=t.y,h=t.x,I=t.y,Q=t.x,x=t.y,F=Date.now(),Ae=-1e4,Y=-1e4,t.zimDragMoving=!0,Ve()},50),n(t.zimMaskDynamic)||t.zimMaskApply()}function Ue(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)}var ue,Ee;t.pointers={};var Te=!1;t.zimDown=t.on("mousedown",function(De){if(!(!t.stage||t.dragPaused)&&!(X&&Te)){Te=!0,Ee=t.stage,t.zmu||(t.zmu=Ee.frame.on("mouseupplus",function(lt){t.downCheck&&(T||(t.downCheck=!1),We(lt,!0))})),t.dragMouseX=Math.round(De.stageX/e.scaX)+Ee.x,t.dragMouseY=Math.round(De.stageY/e.scaY)+Ee.y;var de="id"+Math.abs(De.pointerID+1);if(t.pointers[de]=!0,ue=D?De.currentTarget:De.target,t.zimBoundary&&!ue.getBounds()){ht("zim.drag() - drag object needs bounds set");return}if(t.downCheck=!0,t.stage.mouseMoveOutside=!0,e.Ticker.has(t.zimDragTicker)||e.Ticker.add(t.zimDragTicker,t.stage),k&&t.zimTweens)for(var Be in t.zimTweens){var Qe=t.zimTweens[Be];Qe.zimObj&&(Qe.zimObj.x!=null||Qe.zimObj.y!=null)&&t.stopAnimate(Be)}if(ue.parent){if(_){var Ke=ue.parent.numChildren-1;ue.parent.getChildAt(Ke).type=="Keyboard"&&Ke--,ue.parent.setChildIndex(ue,Ke),ue.ZIMoutlineShape&&ue.outline()}ue.parent==t.stage?pe=new e.Point(De.stageX/e.scaX,De.stageY/e.scaY):pe=ue.parent.globalToLocal(De.stageX/e.scaX,De.stageY/e.scaY),S&&(ue.x=pe.x,ue.y=pe.y),xe=pe.x-ue.x,te=pe.y-ue.y,we=null,t.zimBoundary&&(p?(we=e.boundsToGlobal(ue.parent,t.zimBoundary),P&&(ke=t.zimBoundary)):(we=t.zimBoundary,P&&(ke=e.boundsToGlobal(ue.parent,t.zimBoundary,!0)))),t.cur(n(l)?"pointer":l),T&&(t.slideStartX=t.x,t.slideStartY=t.y,K=t.zimDragMoving,ie=0,ae=[pe.x],he=[pe.y],$=[Date.now()],Ae=-1e4,Y=-1e4,t.zimDragMoving=!0),t.type=="Pen"&&(t.zimDragCheck=!0,J=!1)}}},!0),t.zimMove=t.on("pressmove",function(De){if(!(X&&!t.pointers["id"+Math.abs(De.pointerID+1)])&&!(!t.downCheck||t.dragPaused)){var de=(C?De.rawX:De.stageX)/e.scaX+Ee.x,Be=(C?De.rawY:De.stageY)/e.scaY+Ee.y;t.dragMouseX=Math.round(de),t.dragMouseY=Math.round(Be),_e(ue,de,Be),ue.ZIMoutlineShape&&ue.outline(),t.type=="Pen"&&!J&&t.drawing?J=!0:(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize()}},!0);function _e(De,de,Be){var Qe=xe,Ke=te;if(n(De)&&(De=ue||t),!!De.parent){if(n(de)||n(Be)){var lt=De.parent.localToGlobal(De.x,De.y);xe=te=0,t.zimBoundary&&(p?(we=e.boundsToGlobal(De.parent,t.zimBoundary),P&&(ke=De.zimBoundary)):(we=t.zimBoundary,P&&(ke=e.boundsToGlobal(De.parent,t.zimBoundary,!0)))),de=lt.x,Be=lt.y,T&&(h=De.x,I=De.y,ue=De)}var gt;Ee&&Ee.type?gt=De.parent.globalToLocal(de,Be):gt=De.parent.globalToLocal(de*e.scaX,Be*e.scaY);var He=i=="both"||i=="horizontal",it=i=="both"||i=="vertical",ft;T&&b?b=="vertical"?(ft=oe(De,gt.x-xe,gt.y-te),He&&(De.x=ft.x),it&&(De.y=gt.y-te)):b=="horizontal"?(ft=oe(De,gt.x-xe,gt.y-te),He&&(De.x=gt.x-xe),it&&(De.y=ft.y)):(He&&(De.x=gt.x-xe),it&&(De.y=gt.y-te)):(ft=oe(De,gt.x-xe,gt.y-te),He&&(De.x=ft.x),it&&(De.y=ft.y)),T&&!K&&(De.slideStartX!=De.x||De.slideStartY!=De.y)&&(K=!0),De.downCheck&&(xe=Qe,te=Ke)}}t.zimPosition=_e,t.zimUp=t.on("pressup",function(De){We(De)},!0);function We(De,de){if(!(X&&!de&&!t.pointers["id"+Math.abs(De.pointerID+1)])){Te=!1;var Be="id"+Math.abs((n(De.pointerID)?0:De.pointerID)+1);if(delete t.pointers[Be],!(!t.downCheck||t.dragPaused)){if(t.cur(n(o)?"pointer":o),T){if(ue.dispatchEvent("slidestart"),ue.parent){var Qe=C?De.rawX:De.stageX,Ke=C?De.rawY:De.stageY;pe=ue.parent.globalToLocal(Qe/e.scaX,Ke/e.scaY)}else pe=new e.Point(0,0);G=pe.x,v=pe.y,w=Date.now(),isNaN(G)&&(G=-1e3),isNaN(v)&&(v=-1e3),ce=G-Q,ve=v-x;var lt=w-F;ye=e.constrain(ce*ge/lt,-Oe,Oe),ee=e.constrain(ve*ge/lt,-Oe,Oe),Re=!1,se=!1,t.downCheck=!1,h=ue.x,I=ue.y,de&&(Q=G=0,x=v=0,F=w=0)}else{t.downCheck=!1;var gt=0;for(var He in t.pointers)gt++;gt==0&&e.Ticker.remove(t.zimDragTicker),t.type=="Pen"&&(t.zimDragCheck=!1,J&&t.drawing&&t.stopCheck())}t.stage&&t.stage.update()}}}function oe(De,de,Be){if(!De.parent)return{x:de,y:Be};if(we)if(P){var Qe=De.getBounds().width,Ke=De.getBounds().height,lt=De.getBounds().x,gt=De.getBounds().y;Qe<ke.width?de=ke.x+(ke.width-Qe)/2+(De.regX-lt):(de-(De.regX-lt)>ke.x&&(de=ke.x+(De.regX-lt)),de-(De.regX-lt)+Qe<ke.x+ke.width&&(de=ke.x+ke.width+(De.regX-lt)-Qe)),De.height<ke.height?Be=ke.y+(ke.height-Ke)/2+(De.regY-gt):(Be-(De.regY-gt)>ke.y&&(Be=ke.y+(De.regY-gt)),Be-(De.regY-gt)+Ke<ke.y+ke.height&&(Be=ke.y+ke.height+(De.regY-gt)-Ke))}else{if(we.type=="Blob")return we.shape.hitTestPoint(de,Be)?{x:de,y:Be}:{x:t.x,y:t.y};if(pe=De.parent.localToGlobal(de,Be),t.circleBounds){var He=we.x+we.width/2,it=we.y+we.height/2,ft=t.circleBounds;if(e.dist(He,it,pe.x,pe.y)<=ft)de=pe.x,Be=pe.y;else{var Se=e.angle(He,it,pe.x,pe.y)*RAD;de=He+ft*Math.cos(Se),Be=it+ft*Math.sin(Se)}}else de=Math.max(we.x,Math.min(we.x+we.width,pe.x)),Be=Math.max(we.y,Math.min(we.y+we.height,pe.y));pe=De.parent.globalToLocal(de,Be),de=pe.x,Be=pe.y}return{x:de,y:Be}}function Ye(De,de,Be,Qe,Ke){Math.abs(De.x-Ae)<.1&&Math.abs(De.y-Y)<.1?(t.zimDragMoving=!1,De.x=Qe,De.y=Ke,De.slideStartX=null,De.slideStartY=null,K&&(De.dispatchEvent("slidestop"),e.Ticker.remove(t.zimDragTicker)),t.type=="Pen"&&(t.zimDragCheck=!1,J&&t.drawing&&t.stopCheck())):(Ae=de,Y=Be)}function Ve(){t.zimDragTicker=function(){if(!n(t.slideStartX))if(ue||(ue=t),t.downCheck){var De;ue.parent?De=ue.parent.globalToLocal(t.dragMouseX,t.dragMouseY):De=new e.Point(0,0),ie++,ae.push(De.x),he.push(De.y),$.push(Date.now()),ie>=z?(Q=ae.shift(),x=he.shift(),F=$.shift()):(Q=ae[0],x=he[0],F=$[0])}else{if(!t.zimDragMoving)return;ce=ye,ve=ee;var de,Be;i==BOTH?(de=ue.x+ce,Be=ue.y+ve):i==HORIZONTAL?(de=ue.x+ce,Be=ue.y):i==VERTICAL&&(de=ue.x,Be=ue.y+ve),ye=ce*R,ee=ve*R;var Qe;we&&(Qe=oe(ue,de,Be),(b===!0||b=="horizontal")&&(Math.round(de)!=Math.round(Qe.x)&&(Re||(q.immediate(de),Re=!0),ye=0,de=q.convert(Qe.x)),b=="horizontal"&&(Be=Qe.y)),(b===!0||b=="vertical")&&(Math.round(Be)!=Math.round(Qe.y)&&(se||(se=!0,U.immediate(Be),ee=0),Be=U.convert(Qe.y)),b=="vertical"&&(de=Qe.x)),b||(de=Qe.x,Be=Qe.y)),ue.x=de,ue.y=Be,Ye(ue,ue.x,ue.y,de,Be)}}}return t},e.noDrag=function(t,r){if(qe("32"),n(t)||!t.on)return;if(n(r)&&(r=!0),r&&t.numChildren&&t.numChildren>1)for(var i=0;i<t.numChildren;i++){var o=t.getChildAt(i);l(o)}l(t);function l(f){f.cur&&f.cur("default"),f._draggable=!1,e.setSwipe(f,!0),f.off("added",f.zimAdded),f.off("removed",f.zimRemoved),f.off("mousedown",f.zimDown),f.off("pressmove",f.zimMove),f.off("pressup",f.zimUp),f.zmu&&(f.stage?f.stage.frame.off("mouseupplus",f.zmu):fe.zdf.off("mouseupplus",f.zmu)),e.Ticker&&(f.zimDragSlide&&e.Ticker.remove(f.zimDragSlide),f.zimDragTicker&&e.Ticker.remove(f.zimDragTicker)),f.zimDragMoving=f.zimAdded=f.zimRemoved=f.zimDown=f.zimMove=f.zimUp=f.zimBoundary=f.zimDragSlide=null,f.slideStartX=f.slideStartY=f.zimDragImmediate=null,f.dragMouseX=f.zimPosition=f.dragMouseY=f.zimDown=f.zimUp=null,f.zimDragTicker=f.zimDragSlide=null}return t},e.dragBoundary=function(t,r){if(qe("33"),!(n(t)||!t.on))return t.zimBoundary=r,t.zimDragMoving=!0,t.zimPosition&&t.zimPosition(),t},e.dragRect=e.dragBoundary,e.mouse=function(t){return qe("33.1"),t.zimLastMouse&&(t.mouseChildren=t.zimLastMouse),t.mouseEnabled=!0,t.zimLastMouseEnabled=!0,t},e.noMouse=function(t){return qe("33.15"),t.zimLastMouse=t.mouseChildren,t.mouseChildren=!1,t.mouseEnabled=!1,t.zimLastMouseEnabled=!1,t},e.wire=function(t,r,i,o,l,f,d,p){var _="source, target, prop, twoWay, setSource, filter, call, input",P;if(P=mt(e.wire,arguments,_))return P;if(qe("33.2"),n(e.Ticker)&&kt)return ht("wire() - requires ZIM Frame"),t;if(n(r)&&kt)return ht("wire() - requires a target"),t;var T=e.DEFAULTWIRE;return fe.DEFAULTWIRE!=null&&(T=fe.DEFAULTWIRE),n(p)&&(T&&T!="currentValue"&&T!="selectedIndex"||T&&Object.prototype.hasOwnProperty.call(t,T)?p=T:Object.prototype.hasOwnProperty.call(t,"currentValue")?p="currentValue":Object.prototype.hasOwnProperty.call(t,"selectedIndex")?p="selectedIndex":p=i),n(i)&&(i=p),t.addChild&&(t.zimWire=!0),r.addChild&&(r.zimWired=!0),e.Ticker.addWire(t,[r,i,o,l,f,d,p]),t},e.noWire=function(t,r,i,o){var l="source, target, prop, input",f;return(f=mt(e.noWire,arguments,l))?f:(qe("33.25"),n(e.Ticker)&&kt?(ht("noWire() - requires ZIM Frame"),t):(e.Ticker.removeWire(t,r,i,o),t))},e.wired=function(t,r,i,o,l,f,d,p){var _="target, source, prop, twoWay, setSource, filter, call, input",P;return(P=mt(e.wired,arguments,_))?P:(qe("33.3"),n(e.Ticker)&&kt?(ht("wired() - requires ZIM Frame"),t):(e.wire(r,t,i,o,l,f,d,p),t))},e.noWired=function(t,r,i,o){var l="target, source, prop, input",f;return(f=mt(e.noWire,arguments,l))?f:(qe("33.35"),n(e.Ticker)&&kt?(ht("noWired() - requires ZIM Frame"),t):(e.Ticker.removeWire(r,t,i,o),t))},typeof y>"u")var y;if(e.bind=function(t,r,i,o,l,f){var d="obj, id, props, extra, filter, bindObj",p;if(p=mt(e.bind,arguments,d))return p;if(qe("33.17"),!y)return kt&&ht("bind() - needs a Bind() object created first"),t;if(n(r))return kt&&ht("bind() - needs a unique id"),t;var _=f||y;return _.add(r,t,i,o,l),t},e.noBind=function(t,r,i,o,l){var f="obj, props, removeConnectionData, call, bindObj",d;if(d=mt(e.noBind,arguments,f))return d;if(qe("33.18"),!y)return t;var p=l||y;return p.remove(t,r,i,o),t},e.transform=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z){var ie="obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame, container",ae;if(ae=mt(e.transform,arguments,ie))return ae;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("transform",arguments),t;if(qe("33.5"),n(t)||!t.getBounds)return ht("zim methods - transform(): please provide object with bounds set"),t;if(!t.getBounds())return ht("zim methods - transform(): please setBounds() on object"),t;if(!t.parent)return ht("zim methods - transform(): object should be on stage first"),t;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.width==0&&(i=!1),t.height==0&&(o=!1),n(l)&&(l=!0),n(f)&&(f=!0),n(d)&&(d=!0),n(p)&&(p=!0),n(_)&&(_=!0),n(P)&&(P=!!he),n(T)&&(T=!!he),n(R)&&(R=!0),n(b)&&(b=!0),n(L)&&(L=!0),n(S)&&(S="brown"),n(k)&&(k=1),n(O)&&(O=null),n(ne)&&(ne=null),O<0||ne<0?O=ne=null:O!=null&&ne==null&&(ne=1),n(N)&&(N=!0),n(q)&&(q=!1),n(U)&&(U=fe.zdf);var he=fe.M;n(A)&&(A=!he),n(D)&&(D=he?20:10),n(C)&&(C=16),n(E)&&(E=10),n(X)&&(X=5),n(Z)&&(Z=!0),n(V)&&(V=!1),(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(V=!0),t.mouseChildren=!1;var $=t.getConcatenatedMatrix().decompose(),G=t.stage?t.stage:U.stage;n(z)&&(z=G),n(U.eventRemove)&&(G.enableMouseOver(),U.ctrlKey=!1,U.shiftKey=!1,fe.addEventListener("keydown",function(ut){U.altKey=ut.altKey,U.ctrlKey=ut.ctrlKey}),fe.addEventListener("keyup",function(ut){U.altKey=ut.altKey,U.ctrlKey=ut.ctrlKey}));var v=t.getBounds(),w=new e.Shape({style:!1}),h=new e.Shape({style:!1}),I=new e.Shape({style:!1});h.mouseEnabled=!1,I.controlType="reg";var Q=t.parent,x=w.graphics,F=h.graphics,Ae=I.graphics,Y,K,ge,ye,ee,ce,ve,Re,se,Oe=new e.Container({style:!1});Oe.type="TransformControls";var J=new e.Container({style:!1}),xe=new e.Container({style:!1}),te=new e.Container({style:!1}),we=new e.Container({style:!1}),ke,pe,Me,Ue,ue;n(t.zimMaskDynamic)||t.zimMaskApply();function Ee(ut,Mt){ut==Mt&&new e.Triangle(16,12,12,"white",null,null,0).addTo(ut).mov(0,-13.5),new e.Triangle(16,12,12,"white",null,null,0).addTo(ut).mov(13.5).rot(90),ut==Mt&&new e.Triangle(16,12,12,"white",null,null,0).addTo(ut).mov(0,13.5).rot(180),new e.Triangle(16,12,12,"white",null,null,0).addTo(ut).mov(-13.5).rot(-90),ut==Mt&&new e.Triangle(10,7,7,"black",null,null,0).addTo(ut).mov(0,-13),new e.Triangle(10,7,7,"black",null,null,0).addTo(ut).mov(13).rot(90),ut==Mt&&new e.Triangle(10,7,7,"black",null,null,0).addTo(ut).mov(0,13).rot(180),new e.Triangle(10,7,7,"black",null,null,0).addTo(ut).mov(-13).rot(-90),Z&&ut.cache(-20,-20,40,40)}if(A){var Te=new e.Container({style:!1}),_e=new e.Container({style:!1});Ee(Te,Te),Ee(_e,Te);var We={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function oe(){var ut=t;for(ke=0,pe=1,Me=1,Ue=0,ue=0;ut.parent;)ke+=ut.rotation,pe*=ut.scaleX,Me*=ut.scaleY,Ue+=ut.skewX,ue+=ut.skewY,ut=ut.parent}oe();var Ye=ke,Ve=["nw-resize","ne-resize","nw-resize","ne-resize"],De=[2,3,0,1],de,Be;for(Be=0;Be<4;Be++)R?(de=new e.Rectangle(D,D,e.pink,e.grey,2,null,null,null,null,!1),de.centerReg(J),Z&&de.cache(-1,-1,D+2,D+2)):(de=new e.Rectangle(D,D,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1),de.centerReg(J),de.expand(0)),de.rotation=ke,ve=A?"none":Ve[Be],de.drag({overCursor:ve,dragCursor:ve,onTop:!1}),de.controlType="corner",de.cu=Ve[Be];for(Be=0;Be<De.length;Be++)J.getChildAt(Be).op=J.getChildAt(De[Be]);var Qe=["n-resize","e-resize","n-resize","e-resize"];for(De=[1,1,0,0],Be=0;Be<4;Be++){var Ke=Be%2==0?t.width/2:D,lt=Be%2==0?D:t.height/2;P?(de=new e.Rectangle(D,D,e.fog,e.dark,2,null,null,null,null,!1),de.centerReg(Be%2==0?te:xe),Z&&de.cache(-1,-1,D+2,D+2)):(de=new e.Rectangle(Ke,lt,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),de.centerReg(Be%2==0?te:xe),de.expand(0)),de.rotation=ke,ve=A?"none":Qe[Be],de.drag({overCursor:ve,dragCursor:ve,onTop:!1}),de.controlType="side",de.cu=Qe[Be]}for(Be=0;Be<De.length;Be++){var gt=Be%2==0?te:xe;gt.getChildAt(Math.floor(Be/2)).op=gt.getChildAt(De[Be])}var He=["ne-resize","nw-resize","ne-resize","nw-resize"];for(Be=0;Be<4;Be++)T?(de=new e.Circle(D,e.pink,null,null,null,null,null,null,!1),de.addTo(we),Z&&de.cache(-D,-D,D*2,D*2)):(de=new e.Circle(D,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),de.addTo(we),de.expand(0)),ve=A?"none":He[Be],de.drag({overCursor:ve,dragCursor:ve,onTop:!1}),de.controlType="rotate",de.cu=He[Be];var it=1.8;we.alpha=.5,ft();function ft(){var ut=D*it*e.sign(pe),Mt=D*it*e.sign(Me);we.getChildAt(0).reg(ut,Mt),we.getChildAt(1).reg(-ut,Mt),we.getChildAt(2).reg(-ut,-Mt),we.getChildAt(3).reg(ut,-Mt),G.update()}function Se(){x.c(),F.c(),Ae.c(),Y=t.localToLocal(v.x,v.y,z),K=t.localToLocal(v.x+v.width,v.y,z),ge=t.localToLocal(v.x+v.width,v.y+v.height,z),ye=t.localToLocal(v.x,v.y+v.height,z);var ut=t.localToLocal(v.x+v.width/2,v.y,z),Mt=t.localToLocal(v.x+v.width,v.y+v.height/2,z),qt=t.localToLocal(v.x+v.width/2,v.y+v.height,z),Xt=t.localToLocal(v.x,v.y+v.height/2,z);ee=t.localToLocal(t.regX,t.regY,z),ce=t.localToLocal(v.x+v.width/2,v.y+v.height/2,z),se=[Y,K,ge,ye],Re=[ut,Mt,qt,Xt],L&&(x.s(S),m&&x.sd([10,5],0),x.ss(k).mt(Y.x,Y.y).lt(K.x,K.y).lt(ge.x,ge.y).lt(ye.x,ye.y).lt(Y.x,Y.y).cp()),n(O)||(F.s(O),N&&F.sd([10,5],0),F.ss(ne).mt(Y.x,Y.y).lt(K.x,K.y).lt(ge.x,ge.y).lt(ye.x,ye.y).lt(Y.x,Y.y).cp()),w.setBounds(Y.x,Y.y,K.x-Y.x,ye.y-Y.y),b&&(Ae.s("#eee").ss(k).f("rgba(0,0,0,.1)").dc(0,0,C),Ae.s("#222").ss(k).dc(0,0,C*.3)),oe();for(var rn=Math.min(50,Math.abs(Ue))*e.sign(Ue),Qt=Math.min(50,Math.abs(ue))*e.sign(ue),It=ke*e.sign(pe*Me)*e.sign(t.scaleX*t.scaleY),Wt=0;Wt<se.length;Wt++){var xn=se[Wt];J.getChildAt(Wt).loc(xn.x,xn.y).ske(rn,Qt).rot(It),we.getChildAt(Wt).loc(xn.x,xn.y).rot(It);var zt=Re[Wt],ln=Wt%2==0?te:xe;ln.getChildAt(Math.floor(Wt/2)).loc(zt.x,zt.y).ske(rn,Qt).rot(It),P||ln.getChildAt(Math.floor(Wt/2)).sca(Wt%2==0?pe/2:1,Wt%2==0?1:Me/2)}I.x=ee.x,I.y=ee.y}Se();var Fe=new e.Shape(1e3,1e3,null,null,null,!1);function me(){Fe.x=0,Fe.y=0,Fe.graphics.c().f("rgba(0,0,0,.01)").mt(Y.x,Y.y).lt(K.x,K.y).lt(ge.x,ge.y).lt(ye.x,ye.y).lt(Y.x,Y.y).cp(),Fe.reg(ee.x,ee.y),Fe.x=ee.x,Fe.y=ee.y}me(),Oe.on("dblclick",function(ut){U.ctrlKey&&t.transformControls.visible&&(t.scaleX=1,t.scaleY=1,t.rotation=0,Se(),me(),G.update()),Ot(ut,!0)});var $e=Oe.on("mousedown",Je),st=t.on("mousedown",Je);function Je(ut){var Mt=G.getObjectUnderPoint(ut.stageX,ut.stageY,1);he||Mt&&(t.contains&&t.contains(Mt)||!t.contains&&t==Mt)?t.transformControls.visible||(A?(Bt=!1,Fe.mouseEnabled=!1):U.canvas.style.cursor="move",t.transformControls.show(),t.dispatchEvent("transformshow")):t.transformControls.visible&&(!Mt||!Oe.contains(Mt))&&(t.transformControls.hide(),t.dispatchEvent("transformhide"))}var rt=G.on("stagemousedown",function(ut){var Mt=G.getObjectUnderPoint(ut.stageX,ut.stageY,1),qt=Mt&&Mt.parent&&Mt.parent.layer&&Mt.parent.layer==t;t.transformControls.visible&&(!Mt||!Oe.contains(Mt)&&!qt)&&(t.dispatchEvent("transformhide"),t.transformControls.hide())});d||(Oe.off("mousedown",$e),t.off("mousedown",st),G.off("stagemousedown",rt));var Ce,ze,Xe,Ze,ot,Ge,et,pt,Le,tt,vt,nt,Tt,xt=!1,Ct=!1,ct,Rt,At=t.cursor,bt,Ft=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(A){Ft.mouseEnabled=!1,Ft.mouseChildren=!1,Ft.addChild(_e),J.on("mouseover",at),J.on("mouseout",Pt),xe.on("mouseover",at),xe.on("mouseout",Pt),te.on("mouseover",at),te.on("mouseout",Pt),we.on("mouseover",at),we.on("mouseout",Pt);var Yt=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);Yt.cursor="none"}J.on("mousedown",$t),J.on("pressmove",sn),J.on("pressup",Ot),xe.on("mousedown",$t),xe.on("pressmove",sn),xe.on("pressup",Ot),te.on("mousedown",$t),te.on("pressmove",sn),te.on("pressup",Ot),we.on("mousedown",$t),we.on("pressmove",nn),we.on("pressup",Ot);function $t(ut){Ct=!0,_&&Dt(),ct&&G.off("stagemousemove",ct),Ce=ut.target.x,ze=ut.target.y,tt=t.x,vt=t.y,Xe=t.scaleX,Ze=t.scaleY;var Mt=z.globalToLocal(ut.stageX/e.scaX,ut.stageY/e.scaY);if(ut.target.controlType=="rotate"){xt=!0,ot=t.rotation;var qt=Mt.x,Xt=Mt.y,rn=Q.localToLocal(tt,vt,z);nt=rn.x,Tt=rn.y,Ge=Math.atan2(Xt-Tt,qt-nt)*180/Math.PI}U.ctrlKey||ut.target.controlType=="rotate"?(et=Math.abs(Ce-t.x),pt=Math.abs(ze-t.y)):(et=Math.abs(Ce-ut.target.op.x),pt=Math.abs(ze-ut.target.op.y)),ut.target.controlType!="rotate"&&(Le=ut.target.op.parent.localToLocal(ut.target.op.x,ut.target.op.y,t.parent)),Ft.stage?z.setChildIndex(Ft,z.getChildIndex(Oe)):Ft.addTo(z,z.getChildIndex(Oe)+1),Ft.x=Mt.x,Ft.y=Mt.y,Ft.cursor=A?"none":ut.target.cu,A&&(t.getConcatenatedMatrix().decompose($),$.rotation||($.rotation=0),_e.rotation=$.rotation*e.sign(pe*Me)*e.sign(t.scaleX*t.scaleY)+We[ut.target.cu]+Ye,ut.target.controlType!="side"&&pe*Me<0&&(_e.rotation+=90),Yt.addTo(z,1).pos({x:Mt.x,y:Mt.y,reg:!0})),Fe.visible=!1,t.cursor="none"}function sn(ut){var Mt=1;U.ctrlKey&&ut.target.controlType=="corner"?Mt=et>pt?(ut.target.x-tt)/(Ce-tt):(ut.target.y-vt)/(ze-vt):et>pt?Ce-ut.target.op.x&&(Mt=(ut.target.x-ut.target.op.x)/(Ce-ut.target.op.x)):ze-ut.target.op.y&&(Mt=(ut.target.y-ut.target.op.y)/(ze-ut.target.op.y)),ut.target.controlType=="corner"?(t.scaleX=Mt*Xe,t.scaleY=Mt*Ze):(t.scaleX=ut.target.cu=="e-resize"?Mt*Xe:Xe,t.scaleY=ut.target.cu=="n-resize"?Mt*Ze:Ze),Se();var qt=z.globalToLocal(ut.stageX/e.scaX,ut.stageY/e.scaY);if(Ft.x=qt.x,Ft.y=qt.y,A&&(Yt.x=qt.x,Yt.y=qt.y),!U.ctrlKey||ut.target.controlType=="side"){var Xt=ut.target.op.parent.localToLocal(ut.target.op.x,ut.target.op.y,t.parent);t.x-=(Xt.x-Le.x)*e.sign(pe)*e.sign(t.scaleX),t.y-=(Xt.y-Le.y)*e.sign(Me)*e.sign(t.scaleY)}if(Se(),t.transformControls.events){var rn=ut.target.controlType;Zt(ut,rn)}}function nn(ut){var Mt=z.globalToLocal(ut.stageX/e.scaX,ut.stageY/e.scaY),qt=Math.atan2(Mt.y-Tt,Mt.x-nt)*180/Math.PI;if(U.shiftKey?t.rot(Math.round((ot+(qt-Ge)*e.sign(pe)*e.sign(t.scaleX))/45)*45):t.rot(ot+(qt-Ge)*e.sign(pe)*e.sign(t.scaleX)),Se(),Ft.x=Mt.x,Ft.y=Mt.y,A&&(t.getConcatenatedMatrix().decompose($),$.rotation||($.rotation=0),_e.rotation=$.rotation*e.sign(pe*Me)*e.sign(t.scaleX*t.scaleY)+We[ut.target.cu]+Ye,ut.target.controlType!="side"&&pe*Me<0&&(_e.rotation+=90),Yt.x=Mt.x,Yt.y=Mt.y),Se(),t.transformControls.events){var Xt=ut.target.controlType;Zt(ut,Xt,null,!1)}}function Ot(ut,Mt){ft();var qt=ut?ut.target.controlType:"move";Mt&&(qt="reset"),A&&Yt.removeFrom(),Zt(ut,qt,!0),G.update()}function Zt(ut,Mt,qt,Xt){Xt==null&&(Xt=!0);var rn=!1;bt=null;var Qt=z.globalToLocal(ut.stageX/e.scaX,ut.stageY/e.scaY);Mt=="move"?((t.x!=an.x||t.y!=an.y)&&(bt=new je.Event("transformed"),bt.transformType="move"),Xt&&(rn=Fe.hitTestPoint(Qt.x,Qt.y))):Mt=="corner"?((t.scaleX!=an.scaleX||t.scaleY!=an.scaleY)&&(bt=new je.Event("transformed"),bt.transformType="size"),Xt&&(rn=J.hitTestPoint(Qt.x,Qt.y))):Mt=="side"?((t.scaleX!=an.scaleX||t.scaleY!=an.scaleY)&&(bt=new je.Event("transformed"),bt.transformType="stretch"),Xt&&(rn=xe.hitTestPoint(Qt.x,Qt.y)||te.hitTestPoint(Qt.x,Qt.y))):Mt=="rotate"?(t.rotation!=an.rotation&&(bt=new je.Event("transformed"),bt.transformType="rotate"),Xt&&(rn=we.hitTestPoint(Qt.x,Qt.y))):Mt=="reg"?(t.regX!=an.regX||t.regY!=an.regY)&&(bt=new je.Event("transformed"),bt.transformType="reg"):Mt=="reset"?(bt=new je.Event("transformed"),bt.transformType="reset"):(bt=new je.Event("transformed"),bt.transformType="unknown"),Xt&&!rn&&(Ft.removeFrom(),U.canvas.style.cursor="default",t.cursor=At),bt&&(bt.pressup=qt,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.dispatchEvent(bt))}function at(ut){if(!Ct){Ft.stage?z.setChildIndex(Ft,z.getChildIndex(Oe)):Ft.addTo(z,z.getChildIndex(Oe)+1),Yt.addTo(z,1);var Mt=z.globalToLocal(ut.stageX/e.scaX,ut.stageY/e.scaY);Ft.x=Mt.x,Ft.y=Mt.y,Yt.x=Mt.x,Yt.y=Mt.y,t.getConcatenatedMatrix().decompose($),$.rotation||($.rotation=0),_e.rotation=$.rotation*e.sign(pe*Me)*e.sign(t.scaleX*t.scaleY)+We[ut.target.cu]+Ye,ut.target.controlType!="side"&&pe*Me<0&&(_e.rotation+=90),G.update(),ct&&G.off("stagemousemove",ct),ct=G.on("stagemousemove",function(qt){var Xt=z.globalToLocal(qt.stageX/e.scaX,qt.stageY/e.scaY);Ft.x=Xt.x,Ft.y=Xt.y,G.update()})}}function Pt(){G.off("stagemousemove",ct),!Ct&&(t.cursor=At,Ft.removeFrom(),Yt.removeFrom(),G.update())}function Dt(){if(_){var ut=Q.numChildren-1;Q.getChildAt(ut).type=="Keyboard"&&ut--,Q.setChildIndex(t,ut),Ut()}}function Ut(){if(Q==z)Oe.removeFrom(),z.addChildAt(Oe,z.getChildIndex(t)+1);else{for(var ut=Q;ut.parent&&ut.parent!=z;)ut=ut.parent;t.stage&&(Oe.parent==z&&z.removeChild(Oe),z.addChildAt(Oe,z.getChildIndex(ut)+1))}}var Gt,wt;I.drag(),I.on("mousedown",Dt),I.on("pressup",function(ut){if(!U.ctrlKey){for(var Mt=0;Mt<se.length;Mt++)if(e.dist(I.x,I.y,se[Mt].x,se[Mt].y)<E){I.x=se[Mt].x,I.y=se[Mt].y;break}e.dist(I.x,I.y,ce.x,ce.y)<E&&(I.x=ce.x,I.y=ce.y)}var qt=t.rotation;Gt=z.localToLocal(I.x,I.y,t),Q==G?wt=new e.Point(I.x,I.y):wt=z.localToLocal(I.x,I.y,Q),t.reg(Gt.x,Gt.y),t.rotation=0,t.x=t.x+wt.x-t.x,t.y=t.y+wt.y-t.y,t.rotation=qt,Se(),me(),Ot(ut),G.update()});var Bt=!0;ve=A?"none":"move",Fe.drag({overCursor:ve,dragCursor:ve,onTop:!1}),Fe.controlType="move",A&&(Fe.on("mouseover",Jt),Fe.on("mouseout",Ht));function Ht(){G.off("stagemousemove",Rt),!Ct&&(Te.removeFrom(Oe),G.update())}function Jt(ut){if(!(Ct||!A||!Bt)){var Mt=z.globalToLocal(ut.stageX/e.scaX,ut.stageY/e.scaY);Te.addTo(Oe).pos({x:Mt.x,y:Mt.y,reg:!0}),G.update(),Rt&&G.off("stagemousemove",Rt),Rt=G.on("stagemousemove",function(qt){var Xt=z.globalToLocal(qt.stageX/e.scaX,qt.stageY/e.scaY);Te.x=Xt.x,Te.y=Xt.y,G.update()})}}Fe.on("mousedown",Dt),Fe.on("pressmove",function(ut){if(t.transformControls.visible){var Mt;if(Q==G?Mt=new e.Point(Fe.x,Fe.y):Mt=z.localToLocal(Fe.x,Fe.y,Q),t.x=Mt.x,t.y=Mt.y,Se(),t.transformControls.events){var qt="move";Zt(ut,qt)}}}),Fe.on("pressup",function(ut){t.transformControls.visible&&Ot(ut)});var cn=G.on("stagemouseup",function(){Ct=!1,Fe.mouseEnabled=!0,Bt||(bt=new je.Event("transformed"),t.x!=an.x||t.y!=an.y?bt.transformType="move":bt.transformType="select",bt.pressup=!0,t.dispatchEvent(bt)),Bt=!0,Fe.visible=!0,xt&&!U.ctrlKey&&X>1&&(t.rotation=Math.round(t.rotation/X)*X,Se()),me(),Fe.mouseEnabled=!0,xt=!1,G.update()});function jt(){an={x:t.x,y:t.y,rotation:t.rotation,regX:t.regX,regY:t.regY,scaleX:t.scaleX,scaleY:t.scaleY}}var an;jt();var en=t.on("mousedown",jt);Oe.on("mousedown",jt),Oe.addChild(w),r&&Oe.addChild(Fe),l&&Oe.addChild(J),i&&Oe.addChild(xe),o&&Oe.addChild(te),f&&Oe.addChild(we),Oe.addChild(I);var yn;r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),yn=t.on("pressmove",function(ut){if(Se(),me(),ft(),t.transformControls.events){var Mt="move";Zt(ut,Mt)}}));var St=d;return t.transformControls={visible:p,events:V,ghost:!n(O),ghostEnabled:!n(O),show:function(){return _&&Dt(),Ut(),t.toggled=!0,t.transformControls.visible=!0,h.parent&&h.removeFrom(),G.update(),t},hide:function(){if(t.transformControls.ghost)var ut=z.getChildIndex(Oe);return z.removeChild(Oe),t.transformControls.ghost&&t.transformControls.ghostEnabled&&z.addChildAt(h,ut),t.toggled=!1,t.transformControls.visible=!1,A&&(ct&&G.off("stagemousemove",ct),Rt&&G.off("stagemousemove",Rt),Ct=!1,Ft.removeFrom(),Yt.removeFrom()),r||t.cur(At),G.update(),t},remove:function(ut){ut||t.transformControls.hide(),d=!1,r&&(t.noDrag(),t.off("pressmove",yn))},add:function(ut){ut||t.transformControls.show(),d=St,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),yn=t.on("pressmove",yn))},allowToggleOn:function(){d=St=!0,$e=Oe.on("mousedown",$e),st=t.on("mousedown",st),rt=G.on("stagemousedown",rt)},allowToggleOff:function(){d=St=!1,Oe.off("mousedown",$e),t.off("mousedown",st),G.off("stagemousedown",rt)},disable:function(){Oe.mouseChildren=!1,Oe.mouseEnabled=!1,r&&(t.noDrag(),t.off("pressmove",yn))},enable:function(){Oe.mouseChildren=!0,Oe.mouseEnabled=!0,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),yn=t.on("pressmove",yn))},recordData:function(ut){var Mt={type:t.type,index:Q.getChildIndex(t),x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,skewX:t.skewX,skewY:t.skewY,regX:t.regX,regY:t.regY,controls:t.transformControls.visible};return ut?JSON.stringify(Mt):Mt},setData:function(ut,Mt){if(!n(ut)){Mt&&(ut=JSON.parse(ut)),delete ut.controls;var qt=ut.index;n(qt)&&(qt=0),delete ut.index;for(var Xt in ut)t[Xt]=ut[Xt];return setTimeout(function(){Se(),me(),ft(),Q.setChildIndex(t,qt),t.transformControls.visible&&t.type!="Layer"?t.transformControls.show():t.transformControls.hide(),t.transformControls.ghost&&!t.transformControls.ghostEnabled&&!t.transformControls.visible&&z.addChild(h)},90),t}},hideGhost:function(){t.transformControls.ghost=!1,h.removeFrom()},showGhost:function(){if(t.transformControls.ghost=!0,t.transformControls.ghostEnabled&&!t.transformControls.visible){for(var ut=Q;ut.parent&&ut.parent!=z;)ut=ut.parent;h.stage?z.setChildIndex(h,z.getChildIndex(ut)+1):z.addChildAt(h,z.getChildIndex(ut)+1)}},addGhost:function(){ne>0?(t.transformControls.ghostEnabled=!0,t.transformControls.showGhost()):kt&&ht("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){t.transformControls.ghostEnabled=!1,t.transformControls.hideGhost()},resize:function(ut){if(Q=t.parent,Se(),me(),ft(),p&&t.transformControls.show(),ut){var Mt=new je.Event("transformed");Mt.pressup=!0,Mt.transformType="resize",t.dispatchEvent(Mt)}return t},dispose:function(){t.transformControls.hide(),d=!1,r&&(t.noDrag(),t.off("pressmove",yn)),t.transformControls.hideGhost(),Fe.removeAllEventListeners(),we.removeAllEventListeners(),I.removeAllEventListeners(),xe.removeAllEventListeners(),te.removeAllEventListeners(),J.removeAllEventListeners(),Oe.removeAllEventListeners(),st&&t.off("mousedown",st),$e&&t.off("mousedown",$e),rt&&G.off("stagemousedown",rt),ct&&G.off("stagemousemove",ct),Rt&&G.off("stagemousemove",Rt),cn&&G.off("stagemouseup",cn),en&&t.off("mousedown",en),yn&&t.off("pressmove",yn),Oe=Ft=Yt=null,t.transformControls=null},controls:Oe,scaleControls:J,stretchXControls:xe,stretchYControls:te,rotateControls:we},t.toggle=function(ut){return ut===!0?t.transformControls.show():ut===!1||t.transformControls.visible?t.transformControls.hide():t.transformControls.show(),t},t.transformControls.ghost&&(t.transformControls.toggleGhost=function(ut){return ut===!0?t.transformControls.showGhost():ut===!1||t.transformControls.visible?t.transformControls.hideGhost():t.transformControls.showGhost(),t}),p?t.transformControls.show():!q&&t.transformControls.ghost&&t.transformControls.showGhost(),t},e.gesture=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k){var m="obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBoundary, slide, slideFactor, regControl, onTop, surround, circularBounds, rect",A;if(A=mt(e.gesture,arguments,m))return A;if(qe("34.5"),n(t)||!t.on)return;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),n(_)&&(_=!1),n(p)&&(p=1),n(P)&&(P=!1),n(T)&&(T=5),n(R)&&(R=!1),n(b)&&(b=!0),n(L)&&(L=!1),L&&o&&(L=k=null,kt&&ht("gesture() - does not support surround when rotate is true")),n(S)&&(S=!1),n(l)&&!n(k)&&(l=k);var D,C,E,X,Z=g();if(n(t.zimMaskDynamic)||t.zimMaskApply(),!t.zimTouch){var V=new e.Damp(t.scaleX,.05),O=new e.Damp(t.scaleY,.05),ne=t.scaleX/t.scaleY;if(t.zimTouch={move:r,scale:i,rotate:o,pointers:{},checkBounds:function(h,I){if(t.zimTouch.boundary){var Q=t.zimTouch.boundary,x=t.parent.localToLocal(h,I,t.parent);L?(h=Math.min(Q.x,Math.max(Q.x+Q.width,x.x)),I=Math.min(Q.y,Math.max(Q.y+Q.height,x.y))):(h=Math.max(Q.x,Math.min(Q.x+Q.width,x.x)),I=Math.max(Q.y,Math.min(Q.y+Q.height,x.y))),x=t.parent.globalToLocal(h,I),h=x.x,I=x.y}return{x:h,y:I}}},l){t.zimTouch.boundary=l,_&&(t.zimTouch.boundary=e.boundsToGlobal(t.parent,l)),t.zimTouch.boundaryStartX=t.zimTouch.boundary.x,t.zimTouch.boundaryStartY=t.zimTouch.boundary.y,t.zimTouch.boundaryStartW=t.zimTouch.boundary.width,t.zimTouch.boundaryStartH=t.zimTouch.boundary.height;var N=t.zimTouch.checkBounds(t.x,t.y);t.x=N.x,t.y=N.y}P&&(E=10,X=5,C=0,D=[],t.zimTouch.slideInterval=e.interval(E/(Z=="s"?1e3:1),function(){D[C++%X]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.animate({x:t.x,y:t.y},10/(Z=="s"?1e3:1),"quadOut"));var q,U,z,ie,ae,he,$,G;t.zimTouch.mousedown=t.on("mousedown",function(h){if(n(G)?G=1:G++,b){var I=t.parent.numChildren-1;t.parent.getChildAt(I).type=="Keyboard"&&I--,t.parent.setChildIndex(t,I),t.ZIMoutlineShape&&t.outline()}R||($=null,U=t.scaleX,z=t.scaleY,ie=t.rotation,ae=t.regX,he=t.regY,t.reg(0,0),q=t.getMatrix(),t.regX=ae,t.regY=he);var Q="id"+Math.abs(h.pointerID+1),x=t.parent.globalToLocal(h.stageX/e.scaX,h.stageY/e.scaY);t.zimTouch.pointers[Q]={startX:x.x,startY:x.y,x:x.x,y:x.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(){t.zimTouch.total++})),P&&t.zimTouch.total==1&&t.zimTouch.slideInterval.pause(!1),v()}),t.zimTouch.pressmove=t.on("pressmove",function(h){var I="id"+Math.abs(h.pointerID+1),Q=t.parent.globalToLocal(h.stageX/e.scaX,h.stageY/e.scaY);t.zimTouch.pointers[I]&&(t.zimTouch.pointers[I].x=Q.x,t.zimTouch.pointers[I].y=Q.y);var x=0,F=0,Ae=0,Y=0,K=0,ge=0;if(e.loop(t.zimTouch.pointers,function(Ee,Te){x+=Te.x-Te.startX,F+=Te.y-Te.startY,Ae+=Te.x,Y+=Te.y}),t.zimTouch.total!=0){K=x/t.zimTouch.total,ge=F/t.zimTouch.total,x=t.zimTouch.startX+K,F=t.zimTouch.startY+ge,Ae=Ae/t.zimTouch.total,Y=Y/t.zimTouch.total;var ye={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation};if(t.zimTouch.move){var ee=t.zimTouch.checkBounds(x,F);ye.x=ee.x,ye.y=ee.y}if(t.zimTouch.pair.length==2){var ce=t.zimTouch.pair[0],ve=t.zimTouch.pair[1];if(t.zimTouch.scale){var Re=Math.sqrt(Math.pow(ve.startX-ce.startX,2)+Math.pow(ve.startY-ce.startY,2)),se=Math.sqrt(Math.pow(ve.x-ce.x,2)+Math.pow(ve.y-ce.y,2)),Oe=t.zimTouch.startSX+(se/Re-1),J=t.zimTouch.startSY+(se/Re-1);ye.scaleX=Oe,ye.scaleY=J,ye.scaleX=V.convert(Oe),ye.scaleY=O.convert(J);var xe=!n(f)&&Math.min(Oe,J)<f,te=!n(d)&&Math.max(Oe,J)>d;(xe||te)&&(xe?ne>1?(ye.scaleY=f,ye.scaleX=f*ne):(ye.scaleX=f,ye.scaleY=f/ne):te&&(ne>1?(ye.scaleX=d,ye.scaleY=d/ne):(ye.scaleY=d,ye.scaleX=d*ne)),V.immediate(ye.scaleX),O.immediate(ye.scaleY))}if(t.zimTouch.rotate){var we=Math.atan2(ce.startY-ve.startY,ce.startX-ve.startX)*(180/Math.PI),ke=Math.atan2(ce.y-ve.y,ce.x-ve.x)*(180/Math.PI),pe=ke-we;ye.rotation=t.zimTouch.startR+pe}if(R)t.scaleX=ye.scaleX,t.scaleY=ye.scaleY,t.rotation=ye.rotation,t.zimTouch.move&&(t.x=ye.x,t.y=ye.y);else{t.reg(0,0);var Me=t.parent.localToGlobal(Ae,Y);Ae=Me.x,Y=Me.y;var Ue=n($)?t.globalToLocal(Ae,Y):t.globalToLocal($.x,$.y),ue=q.clone().translate(Ue.x,Ue.y).rotate(ye.rotation-ie).scale(ye.scaleX/U,ye.scaleY/z).translate(-Ue.x,-Ue.y);ue.decompose(t),t.zimTouch.move&&(t.x+=K,t.y+=ge),$=t.localToGlobal(Ue.x,Ue.y),t.reg(ae,he)}t.zimTouch.scale&&t.dispatchEvent("scale"),t.zimTouch.rotate&&t.dispatchEvent("rotate"),t.zimTouch.move&&t.dispatchEvent("move")}else t.x=ye.x,t.y=ye.y,t.zimTouch.move&&t.dispatchEvent("move");(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.ZIMoutlineShape&&t.outline(),t.getStage&&t.stage&&t.stage.update()}}),t.on("mousedown",function(){var h=1;t.stage.on("stagemousedown",function(){h++}),t.stage.on("stagemouseup",function(){h--,h==0&&setTimeout(function(){t.zimTouch&&(t.zimTouch.total=0),t.zimTouch&&(t.zimTouch.pointers={}),G=null},50)})},null,!0),t.zimTouch.pressup=t.on("pressup",function(h){var I="id"+Math.abs(h.pointerID+1);if(delete t.zimTouch.pointers[I],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,o&&!n(p)&&t.zimTouch.total==0&&(p>0?t.rotation=Math.round(t.rotation/p)*p:p==0&&(t.rotation=Math.round(t.rotation))),P&&t.zimTouch.total==0&&G==1){t.zimTouch.slideInterval.pause();var Q=D[(C+1)%D.length],x=D[C%D.length],F=t.x+(Q[0]-x[0])*T,Ae=t.y+(Q[1]-x[1])*T,Y=t.zimTouch.checkBounds(F,Ae),K=X*E*T*Math.min((t.x-Y.x)/(t.x-F)||1,(t.y-Y.y)/(t.y-Ae)||1);t.animate({x:Y.x,y:Y.y},K/(Z=="s"?1e3:1),"quadOut",function(){t.dispatchEvent("slidestop")})}t.zimTouch.total==0&&(G=null),t.getStage&&t.stage&&t.stage.update(),v()}),l&&(w(),t.on("move",w))}function v(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(h,I,Q){I.startX=I.x,I.startY=I.y,Q<=1&&t.zimTouch.pair.push(I)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}function w(){var h=t.localToGlobal(t.regX,t.regY),I;if(S){var Q=t.parent.localToGlobal(t.x-t.width/2,t.y-t.height/2),x=t.parent.localToGlobal(t.x+t.width/2,t.y+t.height/2);I={x:Q.x,y:Q.y,width:x.x-Q.x,height:x.y-Q.y}}else I=t.boundsToGlobal();var F={x:t.zimTouch.boundaryStartX+h.x-I.x,y:t.zimTouch.boundaryStartY+h.y-I.y,width:t.zimTouch.boundaryStartW-I.width,height:t.zimTouch.boundaryStartH-I.height};t.gestureBoundary(F,!1)}return t},e.noGesture=function(t,r,i,o){var l="obj, move, scale, rotate",f;if(f=mt(e.noGesture,arguments,l))return f;if(qe("34.6"),!(n(t)||!t.on||!t.zimTouch))return n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.zimTouch.move=!r,t.zimTouch.scale=!i,t.zimTouch.rotate=!o,!t.zimTouch.move&&!t.zimTouch.scale&&!t.zimTouch.rotate&&(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t},e.gestureBoundary=function(t,r,i){if(qe("34.7"),!(n(t)||!t.on)&&!(n(r)||!t.zimTouch)){t.zimTouch.localBoundary&&t.parent?t.zimTouch.boundary=e.boundsToGlobal(t.parent,r):t.zimTouch.boundary=r,n(i)&&(i=!0),i&&(t.zimTouch.boundaryStartX=r.x,t.zimTouch.boundaryStartY=r.y,t.zimTouch.boundaryStartW=r.width,t.zimTouch.boundaryStartH=r.height);var o=t.zimTouch.checkBounds(t.x,t.y);return t.x=o.x,t.y=o.y,t}},e.effect=function(t,r,i,o,l,f){if(qe("33.16"),n(r))return t;n(t.effects)&&(t.effects={}),Array.isArray(r)||(r=[r]);for(var d=0,p=0;p<r.length;p++){var _=r[p];_.type||(_ instanceof je.BlurFilter?_.type="BlurEffect":_ instanceof je.ColorFilter?_.type="ColorEffect":_ instanceof je.AlphaMaskFilter?_.type="AlphaEffect":_ instanceof je.ColorMatrixFilter?_.type="MultiEffect":n(_.type)&&(_.type="custom"+d++));var P=_.type.replace(/effect/i,"");t.effects[P.toLowerCase()]=_}t.filters=[];for(var T in t.effects)t.filters.push(t.effects[T]);return t.cache(i,o,l,f),t},e.updateEffects=function(t,r){return qe("33.163"),t.updateCache&&(r?t.cache():t.updateCache()),t},e.noEffect=function(t,r,i){if(qe("33.165"),n(i)&&(i=!1),n(r)){var o;t.effects.multi&&(o=t.effects.multi),t.effects={},o&&(t.effects.multi=o)}else{t.effects||(t.effects={}),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var f=r[l].replace(/effect/i,"");delete t.effects[f.toLowerCase()]}}t.filters=[];for(var d in t.effects)t.filters.push(t.effects[d]);return i||t.filters.length>0?t.updateCache&&t.updateCache():t.uncache&&t.uncache(),t},e.addPhysics=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L){var S="obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution, sensor",k;if(k=mt(e.addPhysics,arguments,S))return k;if(qe("34.8"),n(R)){if(typeof zimPhysics>"u")return kt&&ht("ZIM Physics module must be imported"),t;n(fe.zimDefaultPhysics)&&(fe.zimDefaultPhysics=new e.Physics),R=fe.zimDefaultPhysics}t.physics=R;var m="rectangle";return t.type=="Circle"||t.type=="Dial"?m="circle":t.type=="Triangle"?m="triangle":t.type=="Blob"&&(m="poly"),n(o)&&(o=m),n(_)&&(_=b),Pe(t,r,i,o,l,f,d,p,_,P,T,L),t},e.removePhysics=function(t){return qe("34.85"),n(t.physics)||(t==t.physics.followObj&&t.physics.follow(null),t.follow=t.noFollow=t.control=t.noControl=t.sleep=t.wake=null,t.impulse=t.force=t.spin=t.torque=null,t.physics.remove(t.body),t.physics=null),t},e.hitTestPoint=function(t,r,i,o){if(e.zimhtp||(qe("35"),e.zimhtp=!0),!t.stage||n(r)||n(i))return!1;if(!(n(t)||!t.globalToLocal)){if(n(o)&&(o=!0),o){var l=t.getBounds();if(l){var f=t.globalToLocal(r,i);if(f.x>l.x+l.width||f.x<l.x||f.y>l.y+l.height||f.y<l.y)return!1}}var d={x:r,y:i};return t.image||t.spriteSheet||t.type=="Shape"?d=t.globalToLocal(d.x,d.y):d=t.globalToLocal(d.x*e.scaX,d.y*e.scaY),t.hitTest(d.x,d.y)}},e.hitTestReg=function(t,r,i){if(e.zimhtr||(qe("36"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(!(n(t)||n(r)||!t.localToLocal||!r.localToLocal)){n(i)&&(i=!0);var o=r.localToGlobal(r.regX,r.regY),l=t.getBounds();if(i&&l){var f=t.globalToLocal(o.x,o.y);if(f.x>l.x+l.width||f.x<l.x||f.y>l.y+l.height||f.y<l.y)return!1}return t.image||t.spriteSheet||t.type=="Shape"?o=t.globalToLocal(o.x,o.y):o=t.globalToLocal(o.x*e.scaX,o.y*e.scaY),t.hitTest(o.x,o.y)}},e.hitTestRect=function(t,r,i,o,l){if(e.zimhtr||(qe("37"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=0),n(o)&&(o=!0);var f=r.getBounds();if(!f){kt&&ht("hitTestRect():\n please setBounds() on param b object");return}if(o){var d=t.getBounds();if(d&&!e.hitTestBounds(t,r))return!1}function p(S){if(t.image||t.spriteSheet||t.type=="Shape"?S=t.globalToLocal(S.x,S.y):S=t.globalToLocal(S.x*e.scaX,S.y*e.scaY),t.hitTest(S.x,S.y))return!0}var _=f.x+f.width/2,P=f.y+f.height/2,T=r.localToGlobal(_,P),R,b;if(l){if(!p(T))return!1;for(var L=0;L<=i;L++)if(R=f.width*(L+1)/(i+1),b=f.height*(L+1)/(i+1),T=r.localToGlobal(f.x+R,f.y),!p(T)||(T=r.localToGlobal(f.x+f.width,f.y+b),!p(T))||(T=r.localToGlobal(f.x+f.width-R,f.y+f.height),!p(T))||(T=r.localToGlobal(f.x,f.y+f.height-b),!p(T)))return!1;return!0}else{if(p(T))return!0;for(var L=0;L<=i;L++)if(R=f.width*(L+1)/(i+1),b=f.height*(L+1)/(i+1),T=r.localToGlobal(f.x+R,f.y),p(T)||(T=r.localToGlobal(f.x+f.width,f.y+b),p(T))||(T=r.localToGlobal(f.x+f.width-R,f.y+f.height),p(T))||(T=r.localToGlobal(f.x,f.y+f.height-b),p(T)))return!0}},e.hitTestCircle=function(t,r,i,o,l){if(e.zimhtc||(qe("38"),e.zimhtr=!0),qe("38"),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=8),n(o)&&(o=!0);var f=r.getBounds();if(!f){kt&&ht("hitTestCircle():\n please setBounds() on param b object");return}var d=t.getBounds();if(o&&d&&!e.hitTestBounds(t,r))return!1;function p(m){if(t.image||t.spriteSheet||t.type=="Shape"?m=t.globalToLocal(m.x,m.y):m=t.globalToLocal(m.x*e.scaX,m.y*e.scaY),t.hitTest(m.x,m.y))return!0}var _=f.x+f.width/2,P=f.y+f.height/2,T=r.localToGlobal(_,P),R=(f.width+f.height)/2/2,b,L,S;if(l){if(!p(T))return!1;for(var k=0;k<i;k++)if(b=k/i*2*Math.PI,L=_+R*Math.cos(b),S=P+R*Math.sin(b),T=r.localToGlobal(L,S),!p(T))return!1;return!0}else{if(p(T))return!0;for(var k=0;k<i;k++)if(b=k/i*2*Math.PI,L=_+R*Math.cos(b),S=P+R*Math.sin(b),T=r.localToGlobal(L,S),p(T))return!0}return!1},e.hitTestCircleRect=function(t,r,i){if(e.zimhtcr||(qe("38.2"),e.zimhtcr=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=t.getBounds(),f=r.getBounds();if(!l||!f){kt&&ht("hitTestCircleRect():\n please setBounds() on both objects");return}n(i)&&(i=0);var d=(t.radius?t.radius:(l.width+l.height)/2)+i,p=t.getConcatenatedMatrix().decompose().scaleX;d*=p/o.scaleX;var _=r.boundsToGlobal(),P=t.localToGlobal(0,0),T=P.x,R=P.y,b=_.x,L=_.y,S=_.x+_.width,k=_.y+_.height,m=T<b?b:T>S?S:T,A=R<L?L:R>k?k:R,D=m-T,C=A-R;return D*D+C*C<=d*d}}},e.hitTestCircles=function(t,r,i){if(e.zimhtcs||(qe("38.5"),e.zimhtcs=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.hitTest||!t.getBounds||!r.getBounds)){var l=t.getBounds(),f=r.getBounds();if(!l||!f){kt&&ht("hitTestCircles():\n please setBounds() on both objects");return}n(i)&&(i=0);var d=t.localToGlobal(l.x+l.width/2,l.y+l.height/2),p=r.localToGlobal(f.x+f.width/2,f.y+f.height/2),_=t.getConcatenatedMatrix(),P=r.getConcatenatedMatrix(),T=Math.sqrt(_.a/o.scaleX*_.a/o.scaleX+_.c/o.scaleX*_.c/o.scaleX),R=Math.sqrt(_.b/o.scaleY*_.b/o.scaleY+_.d/o.scaleY*_.d/o.scaleY),b=Math.sqrt(P.a/o.scaleX*P.a/o.scaleX+P.c/o.scaleX*P.c/o.scaleX),L=Math.sqrt(P.b/o.scaleY*P.b/o.scaleY+P.d/o.scaleY*P.d/o.scaleY),S=Math.sqrt(Math.abs(Math.pow(d.x-p.x,2)+Math.pow(d.y-p.y,2)));return l.width*Math.max(T,R)/2+f.width*Math.max(b,L)/2>=S-i}}},e.hitTestBounds=function(t,r,i,o){if(e.zimhtb||(qe("39"),e.zimhtb=!0),!(!t.stage||!r.stage)&&!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=!1;o&&o.graphics&&(l=!0);var f=t.getBounds(),d=r.getBounds();if(!f||!d){kt&&ht("hitTestBounds():\n please setBounds() on both objects");return}n(i)&&(i=0);var p=e.boundsToGlobal(t),_=e.boundsToGlobal(r);if(l){var P=o.graphics;P.c(),P.ss(1).s("blue"),P.r(p.x,p.y,p.width,p.height),P.s("green"),P.r(_.x,_.y,_.width,_.height),o.stage.update()}return e.rectIntersect(p,_,i)}},e.hitTestPath=function(t,r,i,o,l,f){if(e.zimhtpa||(qe("37.5"),e.zimhtpa=!0),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||r.type!="Squiggle"&&r.type!="Blob")return;var d=t.getBounds();n(i)&&(i=2),n(o)&&(o=!1),n(l)&&(l=!1),n(f)&&(f=!1);var p=[],_;function P(S){var k;if(t.image||t.spriteSheet||t.type=="Shape"?k=t.globalToLocal(S.x,S.y):k=t.globalToLocal(S.x*e.scaX,S.y*e.scaY),t.hitTest(k.x,k.y))if(l)p.push({x:Math.round(S.x),y:Math.round(S.y)});else if(f)_=R/T.length*100;else return!0}var T=r.interpolate(i,null,!0,null,!0),R,b;if(o)for(r.hitPathPoints?r.hitPathPoints.removeAllChildren():r.hitPathPoints=new e.Container().addTo(),r.hitPathPoints.top(),R=0;R<T.length;R++)b=T[R],b=r.localToGlobal(b.x,b.y),new e.Circle(3).loc(b.x,b.y,r.hitPathPoints);if(d){var L=e.boundsAroundPoints(T);if(!e.rectIntersect(t.boundsToGlobal(d),r.boundsToGlobal(L)))return!1}for(R=0;R<T.length;R++){if(b=T[R],b=r.localToGlobal(b.x,b.y),P(b))return!0;if(_!=null)return _}return p.length>0?p:!1},e.hitTestGrid=function(t,r,i,o,l,f,d,p,_,P,T,R,b){if(e.zimhtg||(qe("41"),e.zimhtg=!0),!t.stage)return!1;if(!n(t)&&!R){var L=t.globalToLocal(f,d);f=L.x,d=L.y}n(p)&&(p=0),n(_)&&(_=0),n(P)&&(P=0),n(T)&&(T=0),r+=P,i+=T;var S=r/o,k=i/l,m=Math.min(o-1,Math.max(0,Math.floor((f-p+P/2)/S))),A=Math.min(l-1,Math.max(0,Math.floor((d-_+T/2)/k)));if(!(b!="open"&&(f-p>S*(m+1)-P||f-p<S*m||d-_>k*(A+1)-T||d-_<k*A))){var D=A*o+m;if(n(b)||b=="index")return D;if(b=="col")return m;if(b=="row")return A;if(b=="array"||b=="open")return[D,m,A]}},e.animate=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we,ke,pe){var Me="target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startCall, startParams, animateCall, animateParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck, noAnimateCall, pathDamp";if(t&&(t.props||t.obj)){var Ue;if(Ue=mt(e.animate,arguments,Me))return Ue}if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("animate",arguments),t;if(e.animateCheck||(qe("45"),e.animateCheck=!0),!t)return;var ue=e.ANIMATE;if(fe.ANIMATE!=null&&(ue=fe.ANIMATE),!ue)return n(ke)&&(ke=!0),l&&ke&&typeof l=="function"&&l(n(f)?t:f),t;n(we)&&(we=!0);var Ee=g(null,te,null,null,n(we)?!1:!we);(T||b||R)&&(P=!0),(V||C||V||O||D)&&(A=!0);var Te,_e,We,oe=arguments,Ye=Array.prototype.slice.call(arguments);if(n(r)&&!n(ce)&&(r=ce),ce=r,n(ce))return kt&&ht("animate() - need props"),t;if(t.type=="BeadsContainer"&&n(z)&&(z=0),t.type=="Tone"&&(Oe=!1),Oe===!1?e.pauseAnimateOnBlur=!1:(Oe||n(Oe)&&e.pauseAnimateOnBlur!==!1)&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseAnimateOnBlur=!0),!(!n(z)&&t.addChild)){i=e.Pick.choose(i),o=e.Pick.choose(o),d=e.Pick.choose(d),T=e.Pick.choose(T),R=e.Pick.choose(R),A=e.Pick.choose(A),D=e.Pick.choose(D),n(V)?V=i:V=e.Pick.choose(V),he=e.Pick.choose(he),I=e.Pick.choose(I),Q=e.Pick.choose(Q);var Ve=["loopCount","loopWait","rewind","rewindWait"];for(_e in G)Ve.indexOf(_e)>=0&&(G[_e]=e.Pick.choose(G[_e]))}var De={override:!n(t)&&!n(t.zimX)&&!n(ce.x)||!n(t)&&!n(t.zimY)&&!n(ce.y)};n(P)||(De.loop=P),n(T)||(De.count=T),n(R)||(De.loopWait=R),n(b)||(De.loopCall=b),n(k)||(De.loopWaitParams=k),n(S)||(De.loopWaitCall=S),n(L)||(De.loopParams=L),n(m)||(De.loopPick=m),n(A)||(De.rewind=A),n(D)||(De.rewindWait=D),n(C)||(De.rewindCall=C),n(E)||(De.rewindParams=E),n(X)||(De.rewindWaitCall=X),n(Z)||(De.rewindWaitParams=Z),n(ne)||(De.startCall=ne),n(N)||(De.startParams=N),n(q)||(De.animateCall=q),n(U)||(De.animateParams=U),n(r)||(De=e.merge(De,G)),G=De,e.loop(ce,function(Ne,yt){if(typeof Ne=="string"){var _t=Ne.split(".");if(_t.length>1&&Ne.substr(0,1)!="."&&(ce["."+Ne]=yt,delete ce[Ne],Ne="."+Ne),_t.length>1&&typeof yt=="string"){var Et=yt.substr(0,1);Et!="+"&&Et!="-"&&(ce[Ne]="+"+yt)}}});function de(Ne,yt){if(yt.substr(0,1)=="."){for(var _t=yt.split("."),Et=Ne,Nt=1;Nt<_t.length;Nt++)Et=Et[_t[Nt]];return Et}else return yt=="transform"&&Ne.style?Ne.style.transform:Ne[yt]}function Be(Ne,yt,_t){if(yt.substr(0,1)=="."){for(var Et=yt.split("."),Nt=Ne,Vt=1;Vt<Et.length-1;Vt++)Nt=Nt[Et[Vt]];Nt[Et[Et.length-1]]=_t}else Ne[yt]=_t}if(t.zimTweenOriginals={},!n(z)&&t.addChild){var Qe=[];for(Te=0;Te<t.numChildren;Te++)Qe.push(t.getChildAt(Te));Ae=t,t=Qe}var Ke=["extra","zoom","speed","layer","fade"],lt={zoom:t.type=="Pen"?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(t instanceof Array){for(he&&t.reverse(),Te=0;Te<t.length;Te++){var gt=t[Te];if(I){var He;gt.zimObj={};for(_e in ce){if(Ke.indexOf(_e)>=0?He=ce[_e]:He=e.Pick.choose(ce[_e]),gt.zimObj[_e]=gt[_e],typeof He=="string"&&_e!="transform"){var it;gt.zimLastObj&&!n(gt.zimLastObj[_e])?it=gt.zimLastObj[_e]:it=gt[_e],He=it+Number(He.replace(/\s/g,""))}gt.zimLastObj&&(gt.zimLastObj[_e]=A?gt.zimTweenOriginals[_e]:ce[_e]),gt[_e]=He}}else{gt.zimObj={};for(_e in ce)Ke.indexOf(_e)>=0,gt.zimObj[_e]=ce[_e]}var ft=Te*z;Te==0&&z!=0&&(ft=Ee=="s"?.02:20),e.animate(gt,gt.zimObj,i,o,Te==t.length-1?l:null,Te==t.length-1?f:null,d,p,_,null,null,null,null,null,null,null,m,null,null,null,null,null,null,V,O,ne,N,q,U,null,ie,ae,null,$,e.copy(G),v,w,h,null,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,ft,se,Oe,J,xe,te,we,ke,pe)}return Ae}var Se=i,Fe=V;n(Se)&&(Se=Ee=="s"?1:1e3),n(V)&&(V=Fe=Se),n(o)&&(o="quadInOut"),n(d)&&(d=0),n(D)&&(D=0),n(G)&&(G={override:!n(t.zimX)&&!n(ce.x)||!n(t.zimY)&&!n(ce.y)}),n(f)&&(f=t),n($)&&($=!0),n(v)&&(v=!1),n(w)&&(w=!1),n(I)&&(I=!1),n(Q)&&(Q={}),Q.scale&&(Q.scaleX=Q.scaleY=Q.scale,delete Q.scale),n(h)||(G.override=h),n(K)&&(K=!1),n(ye)&&(ye=!!K),n(Y)&&(Y=!1),n(ge)&&(ge=!0),n(ee)&&(ee=!0),n(pe)&&(pe=.15),n(se)&&(se=1),t.futureRate=se;var me,$e,st;if(ce instanceof Array){if(We=1,ce.length==0)return this;var Je,rt;return Xe(),Zt(),Ce(),t}function Ce(){t.zimLastObj&&e.loop(t.zimLastObj,function(En){n(t.zimTweenOriginals[En])||(t[En]=t.zimTweenOriginals[En],t.zimLastObj[En]=t.zimTweenOriginals[En])});for(var Ne,yt=d,_t=0,Et,Nt,Vt=0;Vt<ce.length;Vt++)if(Ne=ce[Vt],!n(Ne.target)){n(Ne.time)&&(Ne.time=Se),yt+=Ne.wait?Ne.wait:0,Et=Ne.time,Nt=n(Ne.rewindTime)?Et:Ne.rewindTime,Ne.rewind&&(Et=Et+Nt+(Ne.rewindWait?Ne.rewindWait:0)),Ne.loop&&(Et*=Ne.loopCount,Et+=(Ne.loopCount-1)*(Ne.loopWait?Ne.loopWait:0)),n(Ne.params)&&(Ne.params=Ne.target),rt=Ne.target,yt<0&&(_t+=yt,yt=0);var vn={target:Ne.target,obj:e.copy(Ne.obj),seriesWait:_t,wait:yt,waitedCall:Ne.waitedCall,waitedParams:Ne.waitedParams,time:Ne.time,ease:Ne.ease,from:Ne.from,rewind:Ne.rewind,call:Ne.call,params:Ne.params,loop:Ne.loop,loopCount:Ne.loopCount,loopWait:Ne.loopWait,loopCall:Ne.loopCall,loopParams:Ne.loopParams,loopWaitCall:Ne.loopWaitCall,loopWaitParams:Ne.loopWaitParams,loopPick:Ne.loopPick,rewindWait:Ne.rewindWait,rewindCall:Ne.rewindCall,rewindParams:Ne.rewindParams,rewindWaitCall:Ne.rewindWaitCall,rewindWaitParams:Ne.rewindWaitParams,rewindTime:Ne.rewindTime,rewindEase:Ne.rewindEase,startCall:Ne.startCall,startParams:Ne.startParams,animateCall:Ne.animateCall,animateParams:Ne.animateParams,set:e.copy(Ne.masterSet),events:F,rate:t.futureRate,pauseOnBlur:Ne.pauseOnBlur,easeAmount:Ne.easeAmount,easeFrequency:Ne.easeFrequency,override:!1,id:x};Vt==ce.length-1&&ze(vn),e.animate(vn),_t+=yt+Et,yt=0}}function ze(Ne){var yt=Ne.call,_t=Ne.params;G.loop&&(!G.count||We<G.count)?Ne.call=function(){yt&&typeof yt=="function"&&yt(_t||t),G.loopCall&&typeof G.loopCall=="function"&&G.loopCall(G.loopParams||t),G.loopWait?(n(t.zimTweens)&&(t.zimTweens={}),me=t.zimTweens[x]=t.zimTween=je.Tween.get(t,{override:G.override}).wait(G.loopWait,!0).call(Et),me.timeScale=t.futureRate):Et();function Et(){for(var Nt=0;Nt<Je.objects.length;Nt++)Je.objects[Nt].set&&Je.objects[Nt].set(Je.values[Nt]);G.loopWaitCall&&typeof G.loopWaitCall=="function"&&G.loopWaitCall(G.loopWaitParams||t),Ce()}}:Ne.call=function(){yt&&typeof yt=="function"&&yt(_t),n(f)&&(f=rt),l&&typeof l=="function"&&l(f),t.zimLastObj=null},We++}function Xe(){t&&!t.seriesTweens&&(t.seriesTweens=[],t.seriesCalls=[],t.seriesParams=[]);for(var Ne,yt=0;yt<ce.length;yt++)Ne=ce[yt],Ne.target?(Ne.target.seriesTweens||(Ne.target.seriesTweens=[]),Ne.target.seriesCalls||(Ne.target.seriesCalls=[]),Ne.target.seriesParams||(Ne.target.seriesParams=[]),Ne.target.seriesTweens.push(Ne.props),Ne.target.seriesCalls.push(Ne.call),Ne.target.seriesParams.push(Ne.params)):(t.seriesTweens.push(Ne.props),t.seriesCalls.push(Ne.call),t.seriesParams.push(Ne.params));t.seriesCalls.push(l),t.seriesParams.push(f),Ne=ce[0];var _t;for(t?_t=t:_t=Ne.target,_t.zimSeriesOriginals={},yt=ce.length-1;yt>=0;yt--)Ne=ce[yt],n(Ne.props)&&!n(Ne.obj)&&(Ne.props=Ne.obj),Ne.obj=Ne.props,e.loop(Ne.obj,function(hr){hr=="path"?_t.zimSeriesOriginals[hr]=ce[hr]:_t.zimSeriesOriginals[hr]=de(_t,hr)});var Et=new e.Dictionary;for(Je=new e.Dictionary,yt=0;yt<ce.length;yt++)if(Ne=ce[yt],t||(t=Ne.target),n(Ne.target)&&(Ne.target=t),n(Ne.ease)&&(Ne.ease=o),!n(Ne.target)){if(yt==0&&(Ne.target.zimSeriesArgs=oe),n(Ne.props)&&!n(Ne.obj)&&(Ne.props=Ne.obj),Ne.obj=Ne.props,Ne.loop&&(n(Ne.loopCount)||Ne.loopCount<=0)&&(Ne.loopCount=0,ce.splice(yt+1,ce.length)),n(Ne.obj.scale)||(Ne.obj.scaleX=Ne.obj.scaleY=Ne.obj.scale,delete Ne.obj.scale),Ne.from){var Nt=Et.at(Ne.target);if(Nt){if(Ne.set){var Vt=e.copy(Ne.obj),vn=e.merge(Nt,Ne.set);Ne.obj=jt(Ne.target,Ne.obj,vn),Ne.set=e.merge(Ne.set,Vt)}else Ne.set=e.copy(Ne.obj),Ne.obj=jt(Ne.target,Ne.obj,Nt);Ne.from=!1}else Et.add(Ne.target,jt(Ne.target,Ne.obj,Ne.set))}var En={};for(var Gn in Ne.obj)En[Gn]=Ne.set&&Ne.set[Gn]?Ne.set[Gn]:Ne.target[Gn];n(Je.at(Ne.target))&&Je.add(Ne.target,{});var ar=e.merge(Je.at(Ne.target),En);Je.remove(Ne.target),Je.add(Ne.target,ar),Ne.masterSet=e.copy(Ne.set)}n(t.zimTweens)&&(t.zimTweens={})}if(ce&&(ce.x&&(t.zimX=!0),ce.y&&(t.zimY=!0)),!n(ce.shape)&&ce.shape.type==t.type&&(t.type=="Blob"||t.type=="Squiggle")){var Ze=t.pointObjects,ot=ce.shape.pointObjects;if(Ze.length!=ot.length)kt&&ht("animate() - shapes must be of same number of points"),delete ce.shape;else{delete ce.shape;var Ge=n(ce.blobShift)?0:ce.blobShift;delete ce.blobShift;var et=!0;for(Te=0;Te<Ze.length;Te++){var pt=Ze[Te],Le=ot[(Ze.length*2e4+Te+Ge)%Ze.length];for(Xn=0;Xn<4;Xn++)if(Xn!=1){var tt=pt[Xn],vt=e.copy(Ye);vt[0]=tt,vt[1]={x:Le[Xn].x,y:Le[Xn].y,rotation:Le[Xn].rotation},et&&(vt[37]=!0,tt.animateEvent&&tt.off("animation",tt.animateEvent),tt.animateEvent=tt.on("animation",function(){t.update()})),et=!1,e.animate.apply(e.animate,vt)}}if(e.isEmpty(ce))return t}}if(n(t))return;t.tweenStates||(t.tweenStates={all:!0});var nt=!1;if(ce.note){if(Array.isArray(ce.note))e.loop(ce.note,function(Ne,yt){typeof Ne=="string"&&(ce.note[yt]=e.Synth.note(Ne))});else if(ce.note.min)ce.note.min=e.Synth.note(ce.note.min),ce.note.max=e.Synth.note(ce.note.max);else if(ce.note.array)e.loop(ce.note.array,function(Ne,yt){typeof Ne=="string"&&(ce.note.array[yt]=e.Synth.note(Ne))});else if(typeof ce.note=="function"){if(kt)return ht("animate() - use frequency in ZIM VEE functions not note"),t}else ce.note=e.Synth.note(ce.note);ce.frequency=ce.note,delete ce.note}function Tt(Ne,yt){return!!Object.getOwnPropertyDescriptor(Ne,yt).get}(t.type=="Sprite"||!Object.prototype.hasOwnProperty.call(t,"paused"))&&(Object.defineProperty(t,"paused",{get:function(){return t.animatePaused},set:function(Ne){t.animatePaused=Ne}}),t.type!=null&&(t.paused=!0),t.animating=!1),t.endTween=function(Ne,yt){if(t.stopAnimate(yt),Ne!="all"&&Ne!="main"&&Ne!="none"&&(Ne="all"),!t.seriesTweens)e.loop(t.zimLastObj,function(Et){typeof t.zimLastObj[Et]=="string"&&Et!="transform"&&(t.zimLastObj[Et]=t[Et]+Number(t.zimLastObj[Et].replace(/\s/g,""))),Be(t,Et,t.zimLastObj[Et])}),Ne!="none"&&l&&l(f);else{if(e.loop(t.seriesTweens,function(Et,Nt){e.loop(Et,function(Vt){typeof Et[Vt]=="string"&&Vt!="transform"&&(Et[Vt]=t[Vt]+Number(Et[Vt].replace(/\s/g,""))),Be(t,Vt,Et[Vt])}),Ne=="all"&&t.seriesCalls[Nt]&&t.seriesCalls[Nt](t.seriesParams[Nt])}),Ne!="none"){var _t=t.seriesCalls[t.seriesCalls.length-1];_t&&_t(t.seriesParams[t.seriesParams.length-1])}t.seriesTweens=null,t.seriesCalls=null,t.seriesParams=null}return t.stage&&t.stage.update(),t};var xt=!1;if(e.loop(ce,function(Ne,yt){Ne=="path"?t.zimTweenOriginals[Ne]=ce[Ne]:t.zimTweenOriginals[Ne]=de(t,Ne),Ne.match("hue")?(ce.hueBatch=yt,delete ce.hue,xt=!0):Ne.match("saturation")?(ce.saturationBatch=yt,delete ce.saturation,xt=!0):Ne.match("brightness")?(ce.brightnessBatch=yt,delete ce.brightness,xt=!0):Ne.match("contrast")?(ce.contrastBatch=yt,delete ce.contrast,xt=!0):Ne.match(/^.effects/)&&(xt=!0)}),t.resetTween=function(Ne){n(Ne)&&(Ne=!0),t.pauseAnimate(),t.percent=null,t.startPercent=null;var yt=t.zimSeriesOriginals?t.zimSeriesOriginals:t.zimTweenOriginals;return e.loop(yt,function(_t){if(_t=="path"){t.percentComplete=0,t.zimPath=yt[_t];var Et;t.zimStartPercent,Et=t.zimPath.getCurvePoint(t.zimStartPercent/100),t.loc(Et.x,Et.y)}else Be(t,_t,yt[_t])}),t.zimLastObj=null,t.stage&&t.stage.update(),t.stopAnimate(),t.zimPath&&(Ye[1].path=t.zimPath),n(t.zimStartRotation)||(t.rotation=t.zimStartRotation),t.zimStartRotation=null,n(t.zimStartScaleX)||(t.scaleX=t.zimStartScaleX),t.zimStartScaleX=null,n(t.zimStartScaleY)||(t.scaleY=t.zimStartScaleY),t.zimStartScaleY=null,e.animate.apply(null,t.zimSeriesArgs?t.zimSeriesArgs:Ye),t.pauseAnimate(Ne),t},t.replayTween=function(){return t.resetTween(!1),t},ce.path||Y){var Ct;t.requestedPercentComplete?Ct=t.requestedPercentComplete:t.percentComplete&&!Tt(t,"percentComplete")&&(Ct=t.percentComplete),t.requestedPercentComplete=null,n(Ct)&&(Ct=0),t.pathRatio=0,t.zimStartRotation=t.rotation,t.percent=null,t.parent&&t.parent.type=="BeadsContainer"||(t.startPercent=null)}v&&($=!1),n(t.zimTweens)&&(t.zimTweens={});var ct;if(v||(t.stage?ct=t.stage:fe.zdf?ct=fe.zdf.stage:v=!0),t.setColorRange&&!n(ce.color)){var Rt=ce.color;delete ce.color,ce.colorRange=1,t.setColorRange(t.color,Rt),t.colorRange=0}else if(ce.color&&(t.material||t.isMaterial)){if(t.isMaterial)return ht("ZIM animate - please animate the color on the mesh not the material"),t;var At=t;At.cT&&e.Ticker.remove(At.cT),t={val:0,zimTweens:{},ticker:At.cT};var bt=At.material.color.getHexString(),Ft=ce.color;if(ce={val:1},At.cT=e.Ticker.add(function(){var Ne=e.colorRange("#"+bt,Ft,t.val);At.material.color.set(Ne)}),l){var Yt=l;l=function(){At.cT==t.ticker&&(Yt(callParams||At),e.Ticker.remove(At.cT),At.cT=null,t=null)}}else l=function(){At.cT==t.ticker&&(e.Ticker.remove(At.cT),At.cT=null,t=null)}}var $t={};for(Te in ce)Ke.indexOf(Te)>=0||($t[Te]=e.copy(ce[Te]),ce[Te]=e.Pick.choose(ce[Te]));n(ce.scale)||(ce.scaleX=ce.scaleY=e.Pick.choose(ce.scale),delete ce.scale);for(var sn in ce){if(!t.zimBusy)break;t.zimBusy[sn]&&delete ce[sn]}if(e.isEmpty(ce))return;if(t.type!="Sprite")t.type!=null&&(t.paused=!1),t.animating=!0;else for(var nn in ce)if(nn!="normalizedFrame"){t.animating=!0;break}function Ot(){t.zimMouseEnabledCheck||(t.zimMouseEnabledCheck=!0,t.zimLastMouseEnabled=t.mouseEnabled),t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var Ne in ce)t.zimBusy[Ne]=!0;t.zimMouseEnabledCheck=null,t.mouseEnabled=t.zimLastMouseEnabled},70)}(w||G.loop||G.rewind)&&Ot(),Zt();function Zt(){n(x)?x=e.makeID(null,10):(x=String(x),st=x),n(t.zimIdSets)&&(t.zimIdSets={}),n(t.zimIdSets[x])?t.zimTweens&&!n(t.zimTweens[x])&&($e=x,x=e.makeID(null,10),t.zimIdSets[$e]=[$e],t.zimTweens[$e].zimIdSet=$e,t.zimIdSets[$e].push(x)):($e=x,x=e.makeID(null,10),t.zimIdSets[$e].push(x))}Ke.shift();for(Te in Q)Q[Te]=e.Pick.choose(Q[Te]);for(Te in G)Te=="waitedCall"||Te=="waitedParams"||Te=="loopCall"||Te=="rewindCall"||Te=="loopWaitCall"||Te=="rewindWaitCall"||Te=="startCall"||Te=="animateCall"||(G[Te]=e.Pick.choose(G[Te]));at();function at(){Dt(),Ut(),t.seriesTweens&&(t.seriesTweens[0]=ce),I&&!nt&&(ce=jt(t,ce,Q,!0))}function Pt(){Dt(),I&&!nt&&(ce=jt(t,ce,Q,!0))}function Dt(){var Ne;t.zimLastObj||(t.zimLastObj={});for(Te in ce){if(typeof ce[Te]=="string"&&Te!="transform"){if(Te.substring&&Te.substring(0,1)=="."){if(ce[Te].substr(0,1)=="+"||ce[Te].substr(0,1)=="-")continue}else if(ce[Te].substr(0,1)=="+")continue;if(ce[Te].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[Te])?Ne=t.zimLastObj[Te]:Ne=t[Te],ce[Te]=Ne+Number(ce[Te].replace(/\s/g,""))}t.zimLastObj[Te]=A?t.zimTweenOriginals[Te]:ce[Te]}}function Ut(){var Ne;for(Te in Q){if(typeof Q[Te]=="string"&&Te!="transform"){if(Te.substring&&Te.substring(0,1)=="."){if(Q[Te].substr(0,1)=="+"||Q[Te].substr(0,1)=="-")continue}else if(Q[Te].substr(0,1)=="+")continue;if(Q[Te].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[Te])?Ne=t.zimLastObj[Te]:Ne=t[Te],Q[Te]=Ne+Number(Q[Te].replace(/\s/g,""))}t.zimLastObj[Te]=A?t.zimTweenOriginals[Te]:ce[Te]}}t.getBounds&&n(t.percentCompleteCheck)&&(t.percentCompleteCheck=!0,t._percentComplete=0,Object.defineProperty(t,"percentComplete",{get:function(){if(t.paused)return t._percentComplete;if(t.tweenStartTime&&t.tweenEndTime){var Ne=Date.now(),yt;G.loop&&Ne>t.tweenEndTime?yt=(Ne-t.tweenStartTime)%(t.tweenEndTime-t.tweenStartTime):yt=Ne-t.tweenStartTime;var _t=Math.max(0,Math.min(100,yt/(t.tweenEndTime-t.tweenStartTime)*100));return t._percentComplete=_t,_t}else return 0},set:function(Ne){this.zimTween?(Jn=!0,Gt(Ne,!0)):this.requestedPercentComplete=Ne,t._percentComplete=Ne}}),Object.defineProperty(t,"percentCompleteNoAngle",{get:function(){if(t.paused)return t._percentComplete;if(t.tweenStartTime&&t.tweenEndTime){var Ne=Date.now(),yt;G.loop&&Ne>t.tweenEndTime?yt=(Ne-t.tweenStartTime)%(t.tweenEndTime-t.tweenStartTime):yt=Ne-t.tweenStartTime;var _t=Math.max(0,Math.min(100,yt/(t.tweenEndTime-t.tweenStartTime)*100));return t._percentComplete=_t,_t}else return 0},set:function(Ne){this.zimTween?Gt(Ne,!1):this.requestedPercentComplete=Ne,t._percentComplete=Ne}})),Object.defineProperty(t,"rate",{get:function(){return t.futureRate},set:function(Ne){t.futureRate=Ne,e.loop(t.zimTweens,function(yt,_t){_t.timeScale=Ne})},configurable:!0});function Gt(Ne,yt){t.zimTween.startPaused=!1,Y?n(t.zimTween.currentTime)||(t.zimTween.currentTime=t.zimTween.currentTime-t.zimTween.position+Ne*t.zimTween.duration/100):t.zimTweens?e.loop(t.zimTweens,function(_t,Et,Nt){var Vt=t.tweenStartTime+(t.tweenEndTime-t.tweenStartTime)*Ne/100,vn;Et.zimLoop&&Vt<=Et.startTime?vn=0:Et.zimLoop&&Vt>Et.startTime+Et.duration?vn=(Vt-Et.startTime)%Et.duration:vn=Vt-Et.startTime,Et.percentComplete=Math.max(0,Math.min(100,vn/Et.duration*100))}):t.zimTween.setPosition(Math.round(Ne*t.zimTween.duration/100)),yt&&wt&&ce.orient!==!1&&wt.getCurvePoint&&(t.rotation=wt.getCurvePoint(t.pathRatio,null,null,!0).angle+(kn||0)),Jn&&typeof Xt<"u"&&(Xt=Ne),t.handlePath&&t.handlePath()}var wt,Bt,Ht,Jt;if(!n(ce.path)&&ce.path.segmentPoints){n(ce.orient)&&(ce.orient=!0),ce.orient&&n(ce.flip)&&(ce.flip=!0),t.type=="Pen"&&(t.infinite=!0),t.zimOnPath=!0,n(t.pathRatio)&&(t.pathRatio=0),ce.orient&&(ce.orient=ce.path,ce.startOrient=ce.rotation),wt=ce.path,K?(delete ce.path,delete ce.percent,(kt&&t.startPercent&&t.startPercent>0||t.percent&&t.percent!=100)&&ht("ZIM.animate() - startPercent and percent currently not supported with drag on path"),Bt=wt.getCurvePoint(t.pathRatio,Mt,Jt),Bt&&(Ht=t.parent.globalToLocal(Bt.x,Bt.y),t.x=Ht.x,t.y=Ht.y)):(n(t.startPercent)&&(t.startPercent=e.Pick.choose(n(ce.startPercent)?0:ce.startPercent)),n(t.percent)&&(t.percent=e.Pick.choose(n(ce.percent)?100:ce.percent)),delete ce.path,delete ce.percent);var cn=!wt.lockControls;delete ce.path,ce.pathRatio=1}function jt(Ne,yt,_t,Et){nt=!0,wt&&(!n(Ne.percentComplete)||_t&&!n(_t.percentComplete))&&(_t||(_t={}),n(_t.pathRatio)&&(_t.pathRatio=n(_t.percentComplete)?Ne.percentComplete/100:_t.percentComplete/100));var Nt={};for(Te in yt)_t&&!n(_t[Te])?Nt[Te]=_t[Te]:Nt[Te]=Ne[Te],Et&&(Ne[Te]=yt[Te]);return Nt}var an=!0,en=!1,yn=!0,St=!0;n(ce.redirect)||(St=ce.redirect,delete ce.redirect);function ut(Ne){var yt=wt.globalToLocal(Ne.rawX/e.scaX,Ne.rawY/e.scaY),_t=Un;wt.type=="Blob"&&(wn[0]<wn[4]?It=!0:wn[0]>wn[4]&&(It=!1),_t<10&&!It?(Rn=Un=_t=zt-5,Zn.immediate(Rn/zt*100),wn=[zt-1,zt-2,zt,zt-3,zt-4]):_t>zt-10&&It&&(Rn=Un=_t=5,Zn.immediate(Rn/zt*100),wn=[0,0,0,0,0]));var Et={x:yt.x,y:yt.y,r:_t};Fn.sort(function(Nt,Vt){var vn={x:Nt.x,y:Nt.y,r:Nt.r*zt},En={x:Vt.x,y:Vt.y,r:Vt.r*zt},Gn=Math.sqrt(Math.pow(Et.x-vn.x,2)+Math.pow(Et.y-vn.y,2)+Math.pow(Et.r-vn.r,2)),ar=Math.sqrt(Math.pow(Et.x-En.x,2)+Math.pow(Et.y-En.y,2)+Math.pow(Et.r-En.r,2));return Gn-ar}),Rn=Fn[0].r*zt,Xt=Rn/zt*100,Xt=e.constrain(Xt,0,99.95),A&&(Xt/=2,me.position>me.duration/2&&(Xt=100-Xt))}if(wt){let Ne=function(_t){return _t.latestTween?_t.latestTween.percentComplete:_t.percentComplete},yt=function(_t,Et){_t&&(_t.zimTween&&(_t.zimTween.startPaused=!1),_t.latestTween&&(_t.latestTween.percentComplete=Et),Jn&&typeof Xt<"u"&&(Xt=value),_t.handlePath&&_t.handlePath())};var Mt;cn||(Jt=e.copy(wt.segmentPoints),Mt=e.copy(wt.segmentRatios)),t.currentPercent=t.startPercent+t.percent*t.pathRatio;var qt=(1e6+t.currentPercent)%100/100;if(Bt=wt.getCurvePoint(qt,Mt,Jt),t.parent&&Bt&&(Ht=t.parent.globalToLocal(Bt.x,Bt.y),t.x=Ht.x,t.y=Ht.y),K){o="linear",t.cur("pointer");var Xt;ce.startPercent!=null?Xt=ce.startPercent:Xt=0;var rn=!1,Qt=!0,It=!0,Wt=Xt,xn=10;Jt=e.copy(wt.segmentPoints);var zt=0;e.loop(Jt,function(_t){zt+=e.distanceAlongCurve(_t)});var ln=Math.round(zt/Jt.length/xn),Fn=wt.interpolate(ln,null,!0,null,!0),Un=(Xt||0)/100*zt,Rn=Un;wt.zimAnimateChanged=!1,t.zimAnimatePathChange=wt.on("change",function(){wt.zimAnimateChanged=!0}),t.zimAnimatePathDown=wt.on("mousedown",function(){rn=!0,t.paused==!0&&(en=!0)}),t.zimAnimatePathUp=wt.on("pressup",function(){en=!1}),t.zimAnimateDragDown=t.on("mousedown",function(_t){ct=_t.target.stage,t.amu||(t.amu=ct.frame.on("mouseupplus",function(){en=!1})),ct.mouseMoveOutside=!0,an=!1,yn=!0,setTimeout(function(){an=!0},50),en=!0,wt.zimAnimateChanged&&(Jt=e.copy(wt.segmentPoints),zt=0,e.loop(Jt,function(Nt){zt+=e.distanceAlongCurve(Nt)}),ln=Math.round(zt/Jt.length/xn),Fn=wt.interpolate(ln,null,!0,null,!0)),wt.zimAnimateChanged=!1,Xt=Ne(t),Zn.immediate(Xt);var Et=Xt;A&&(me.position>me.duration/2?Et=(100-Xt)*2:Et=Xt*2),Un=(Et||0)/100*zt,Rn=Un});var nr=!1;t.zimAnimateDragPress=t.on("pressmove",function(_t){nr=!0,ut(_t)}),t.animateReturn=function(){if(!A){kt&&ht("animate() - animateReturn() needs rewind set to true");return}Qt=!1,It=!1,Ne(t)<50&&yt(t,100-Ne(t)),t.pauseAnimate(!1)},t.zimAnimateDragUp=t.on("pressup",function(){t.paused==!1&&(en=!1),an=!1,setTimeout(function(){an=!0},50),wn[0]<wn[4]?It=!0:wn[0]>wn[4]&&(It=!1),!t.paused&&A&&St&&It!=Qt&&(yt(t,100-Ne(t)),Qt=It)});var Zn=new e.Damp(Xt,pe),Kn=0,dn=0,wn=[0,0,0,0,0],Jn=!1;t.zimDragAnimateTicker=e.Ticker.add(function(){var _t;K&&(++dn%20&&(wn.push(Rn),wn.shift()),Un=Rn,rn&&(Xt=Ne(t)),en||yn&&t.paused==!0?(rn||Jn||wt.type=="Blob"&&Math.abs(Kn-Xt)>(A?45:90)?(rn=!1,_t=Xt,Zn.immediate(_t),Jn=!1):_t=Zn.convert(Xt),Math.abs(Kn-_t)>.1?(yt(t,_t),Kn=_t):(yt(t,_t),yn=!1,nr=!1)):yn=!1)},ct)}}var un;if(ce.orient){if(ce.orient===!0){var fn=t.parent.localToGlobal(n(ce.x)?t.x:ce.x,n(ce.y)?t.y:ce.y);ce.orient={x:fn.x,y:fn.y}}un=ce.orient,delete ce.orient;var kn=t.rotation;if(t.rotation=wt.getPointAngle(0)+kn,un!=wt){var Vn;un.parent?Vn=un.parent.localToLocal(un.x,un.y,t.parent):Vn=t.parent.globalToLocal(un.x,un.y),t.rotation=e.angle(t.x,t.y,Vn.x,Vn.y)+kn}}var lr=t.scaleX,ur=t.scaleY,Pn=ce.flip!=null?ce.flip:!1,bn=ce.flipVertical!=null?ce.flipVertical:!1,In=t.x,Kt=t.y,on=0;G.loop&&(n(G.count)||(on=G.count,delete G.count,We=1));var tn=0;G.loopWait&&(tn=G.loopWait,R=G.loopWait,delete G.loopWait);var _n;G.loopCall&&(_n=G.loopCall,delete G.loopCall);var Mn=t;G.loopParams&&(Mn=G.loopParams,delete G.loopParams),fe.TIMECHECK&&we&&(Se&&a(Se,Ee),Fe&&a(Fe,Ee),d&&a(d,Ee),Wn&&a(Wn,Ee),tn&&a(tn,Ee),R&&a(R,Ee),G.rewindWait&&a(G.rewindWait,Ee),ve&&a(ve,Ee),Re&&a(Re,Ee)),Ee=="s"&&(Se&&(Se*=1e3),Fe&&(Fe*=1e3),d&&(d*=1e3),Wn&&(Wn*=1e3),tn&&(tn*=1e3),R&&(R*=1e3),G.rewindWait&&(G.rewindWait*=1e3),ve&&(ve*=1e3),Re&&(Re*=1e3));var Cn=Se;G.rewind&&(Cn+=Fe),t.zimTweenArgs={time:Cn,wait:d,wait2:Wn,wait3:tn,loopWait:R,rewindWait:G.rewindWait,seriesWait:ve,sequenceWait:Re};function er(){if(tn>0&&(t.waiting=!1),!!G.loop){if(ie&&typeof ie=="function"){var Ne=n(ae)?t:ae;ie(Ne)}if(_n&&typeof _n=="function"&&_n(Mn||t),m){var yt=e.Pick.choose(t.futureRate);n(t.futureRate)||(me.timeScale=yt);var _t;if(n($t.scale)||(_t=e.Pick.choose($t.scale)),!I&&me.step&&me.step.prev&&me.step.prev.props){for(var Et in me.step.prev.props)if(!(Ke.indexOf(Et)>=0)){var Nt=e.Pick.choose($t[Et]);if(typeof Nt=="string"&&Et!="transform"&&Nt.substr(0,1)!="+"&&Nt.substr(0,1)!="-"){var Vt;t.zimLastObj&&!n(t.zimLastObj[Et])?Vt=t.zimLastObj[Et]:Vt=t[Et],Nt=Vt+Number(Nt.replace(/\s/g,""))}t.zimLastObj[Et]=A?t.zimTweenOriginals[Et]:Nt,A?(n($t[Et])||(me.step.prev.props[Et]=Nt),Et=="scaleX"&&!n(_t)&&(me.step.prev.props.scaleX=_t),Et=="scaleY"&&!n(_t)&&(me.step.prev.props.scaleY=_t)):(n($t[Et])||(me.step.props[Et]=Nt),Et=="scaleX"&&!n(_t)&&(me.step.props.scaleX=_t),Et=="scaleY"&&!n(_t)&&(me.step.props.scaleY=_t))}}}}}var On;G.loopWaitCall&&(On=G.loopWaitCall,delete G.loopWaitCall);var Hn=t;G.loopWaitParams&&(Hn=G.loopWaitParams,delete G.loopWaitParams);function vr(){On&&typeof On=="function"&&On(Hn||t)}var rr;G.startCall&&(rr=G.startCall,delete G.startCall);var yr;G.startParams&&(yr=G.startParams,delete G.startParams);function mr(Ne){Ne.startCalled||(Ne.startCalled=!0,rr&&typeof rr=="function"&&rr(yr||t))}function $n(Ne){t.latestTween=Ne,t.waiting?Ne.startTime=Date.now():Ne.startTime=xr,Ne.zimLoop=P,t.animating||t.pauseAnimate(!0),Object.defineProperty(Ne,"percentComplete",{get:function(){return this.position/this.duration*100},set:function(yt){this.setPosition(yt*this.duration/100)}})}var fr=Date.now();t.tweenStartTime||(t.tweenStartTime=fr),t.tweenEndTime||(t.tweenEndTime=fr);var xr=fr+(d||0)+(ve||0),wr=xr+(Cn||0);wr>t.tweenEndTime&&(t.tweenEndTime=wr);var _r=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];_r.indexOf(o)!=-1&&(o=Tr(o));function Tr(Ne){var yt=[.4,.75,.9,.95],_t=[.99,-.69,.53,.014],Et=[1.18,.69,1,.96];return Ne=="ballisticIn"?Ne=dt(e.zimEase(yt)):Ne=="ballisticOut"?Ne=dt(e.zimEase(yt).reverse()):Ne=="ballisticInOut"?Ne=dt(e.zimEase(yt,null,!0)):Ne=="snapIn"?Ne=dt(e.zimEase(_t)):Ne=="snapOut"?Ne=dt(e.zimEase(_t).reverse()):Ne=="snapInOut"?Ne=dt(e.zimEase(_t,null,!0)):Ne=="slowmoIn"?Ne=dt(e.zimEase(Et)):Ne=="slowmoOut"?Ne=dt(e.zimEase(Et).reverse()):Ne=="slowmoInOut"&&(Ne=dt(e.zimEase(Et,null,!0))),Ne}var mn,An,ir;if(G.rewind&&(o&&(o instanceof Function?mn=dt(o.reverse()):(mn=o,mn.indexOf("InOut")==-1&&(mn.indexOf("Out")!=-1?mn=mn.replace("Out","In"):mn.indexOf("In")!=-1&&(mn=mn.replace("In","Out"))))),O&&(mn=O,_r.indexOf(mn)!=-1&&(mn=Tr(mn)))),o instanceof Function)An=o;else{var Yn="get"+o.charAt(0).toUpperCase()+o.slice(1),Bn=dt(J),Nn=dt(xe);(!n(Bn)||!n(Nn))&&je.Ease[Yn]?(!n(Nn)&&n(Bn)&&(Bn=1),!n(Bn)&&n(Nn)&&(Nn=.3*1.5),An=je.Ease[Yn](Bn,Nn)):An=je.Ease[o]}mn&&(mn instanceof Function?ir=mn:(Yn="get"+mn.charAt(0).toUpperCase()+mn.slice(1),Bn=dt(J),Nn=dt(xe),(!n(Bn)||!n(Nn))&&je.Ease[Yn]?(!n(Nn)&&n(Bn)&&(Bn=1),!n(Bn)&&n(Nn)&&(Nn=.3*1.5),ir=je.Ease[Yn](Bn,Nn)):ir=je.Ease[mn]));function di(){Wn>0&&(t.waiting=!1),Cr&&typeof Cr=="function"&&Cr(Lr)}function pi(){Wn>0&&(t.waiting=!0),Ar&&typeof Ar=="function"&&Ar(Dr)}function Vr(Ne){Pt(),d>0?(t.waiting=!0,me=t.zimTweens[x]=t.zimTween=je.Tween.get(t,{override:G.override}).wait(d,!0).call(function(){t.waiting=!1,d=0,Mr(me),p&&typeof p=="function"&&p(n(_)?t:_)}),me.timeScale=t.futureRate,Ne&&Er(Ne,me),$n(me)):Mr(Ne)}function Mr(Ne){var yt=qr();t.set&&!I&&t.set(Q),me=t.zimTweens[x]=t.zimTween=je.Tween.get(t,G).call(mr).to(ce,Se,An).call(pi).wait(Wn,!0).call(di).to(yt,Fe,ir).call(Wr).wait(tn,!0).call(er),me.timeScale=t.futureRate,Ne&&Er(Ne,me),Br(),$n(me)}function Hr(Ne){Pt(),d>0?(t.waiting=!0,me=t.zimTweens[x]=t.zimTween=je.Tween.get(t,{override:G.override}).wait(d,!0).call(function(){d=0,t.waiting=!1,Or(me),p&&typeof p=="function"&&p(n(_)?t:_)}),me.timeScale=t.futureRate,Ne&&Er(Ne,me),$n(me)):Or(Ne)}function Or(Ne){t.set&&!I&&t.set(Q),me=t.zimTweens[x]=t.zimTween=je.Tween.get(t,G).call(mr).to(ce,Se,An).call(Wr).wait(tn,!0).call(er),me.timeScale=t.futureRate,Ne&&Er(Ne,me),Br(),$n(me)}if(G.rewind){var Wn=0;delete G.rewind,A=!0,D=G.rewindWait,G.rewindWait&&(Wn=G.rewindWait,delete G.rewindWait);var Cr;if(G.rewindCall){Cr=G.rewindCall;var Lr=G.rewindParams;n(Lr)&&(Lr=t),delete G.rewindCall,delete G.rewindParams}var Ar;if(G.rewindWaitCall){Ar=G.rewindWaitCall;var Dr=G.rewindWaitParams;n(Dr)&&(Dr=t),delete G.rewindWaitCall,delete G.rewindWaitParams}ve>0||Re>0||d>0?ve>0||Re>0?(t.waiting=!0,me=t.zimTweens[x]=t.zimTween=je.Tween.get(t,{override:G.override}).wait(ve>0?ve:0,!0).wait(Re>0?Re:0,!0).call(function(Ne){Ne.waiting=!1,Re=ve=0,Vr(me)}),me.timeScale=t.futureRate,$n(me)):Vr():(Pt(),Mr())}else ve>0||Re>0||d>0?ve>0||Re>0?(t.waiting=!0,me=t.zimTweens[x]=t.zimTween=je.Tween.get(t,{override:G.override}).wait(ve>0?ve:0,!0).wait(Re>0?Re:0,!0).call(function(){Re=ve=0,t.waiting=!1,Hr(me)}),me.timeScale=t.futureRate,$n(me)):Hr():(Pt(),Or());function Er(Ne,yt){yt.zimIdSet=Ne.zimIdSet,yt.zimObj=Ne.zimObj,yt.zimTicker=Ne.zimTicker,yt.zimExtraTickers=Ne.zimExtraTickers,yt.requestID=Ne.requestID}me.startPaused=ye,me.rewinding=!1,n(se)||(me.timeScale=e.Pick.choose(se)),G.animateCall&&(q=G.animateCall,delete G.animateCall),G.animateParams&&(U=G.animateParams,delete G.animateParams);var cr;!v&&$&&(Ct&&(t.pathRatio=t.percentComplete&&Math.round(t.percentComplete)!=100?t.percentComplete/100:0,t.percentCompleteNoAngle=Math.round(Ct)!=100?Ct:0),F&&!n(Ae)&&Ae.dispatchEvent?cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr(),Ae.dispatchEvent("animation")},ct):F&&t.dispatchEvent?cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr(),t.dispatchEvent("animation")},ct):q&&typeof q=="function"?cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr(),q(U||t)},ct):cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr()},ct));function gi(Ne){if(Array.isArray(Ne)){for(var yt=0,_t=0,Et=Ne.length;_t<Et;_t++)yt+=Ne[_t];return yt}}var Rr=[1,1,1],sr=function(){if(!(!t.parent||me.passive||me.startPaused)){if(K&&A&&(Wt<50&&t.percentComplete>50||Wt>50&&t.percentComplete<50)&&(Qt=t.percentComplete<50),Wt=t.percentComplete,wt){if(cn&&(Jt=wt.segmentPoints,Mt=wt.segmentRatios),K)var Ne=wt.getCurvePoint(t.pathRatio,Mt,Jt);else{t.currentPercent=t.startPercent+t.percent*t.pathRatio;var yt=(1e6+t.currentPercent)%100/100;t.pathRatio==1&&(yt+=t.percent>0?1:0),Ne=wt.getCurvePoint(yt,Mt,Jt)}if(Ne){var _t=t.parent.globalToLocal(Ne.x,Ne.y);t.x=_t.x,t.y=_t.y}}var Et=Math.abs(In-t.x),Nt=Math.abs(Kt-t.y),Vt=kn==90||kn==270||kn==-90;Pn&&an&&(In>t.x&&Et>.01&&e.sign(Vt?t.scaleY:t.scaleX)==e.sign(lr)||In<t.x&&Et>.01&&e.sign(Vt?t.scaleY:t.scaleX)!=e.sign(lr)||t.percentComplete<99&&t.percentComplete>1&&Et<.01&&Nt>.01&&e.sign(Vt?t.scaleY:t.scaleX)!=e.sign(lr))&&(Vt?t.scaleY*=-1:t.scaleX*=-1),bn&&an&&(Kt>t.y&&Nt>.01&&e.sign(Vt?t.scaleX:t.scaleY)==e.sign(ur)||Kt<t.y&&Nt>.01&&e.sign(Vt?t.scaleX:t.scaleY)!=e.sign(ur)||t.percentComplete<99&&t.percentComplete>1&&Nt<.01&&Et>.01&&e.sign(Vt?t.scaleX:t.scaleY)!=e.sign(ur))&&(Vt?t.scaleX*=-1:t.scaleY*=-1);var vn;if(un&&Et>.05||un&&Nt>.05){if(wt==un)vn=e.angle(In,Kt,t.x,t.y)+kn;else{var En;un.parent?En=un.parent.localToLocal(un.x,un.y,t.parent):En=t.parent.globalToLocal(un.x,un.y),vn=e.angle(t.x,t.y,En.x,En.y)+kn}if(vn!=0&&(!t.paused||nr)){Pn&&In-t.x>.01&&(vn+=180);var Gn=vn;t.rotation=Math.round(Gn==kn?t.rotation:Gn),A&&t.percentComplete>50&&!Pn&&(t.rotation+=180)}}if(K){var ar=t.x-In+t.y-Kt;Math.abs(ar)>2&&(Rr.push(e.sign(ar)),Rr.shift(),me.forward=gi(Rr))}In=t.x,Kt=t.y}};(wt||un||Pn||bn)&&(t.handlePath=sr),n(t.zimMaskDynamic)||t.zimMaskApply();function Wr(){if(t.seriesTweens&&t.seriesTweens.shift(),t.seriesCalls&&t.seriesCalls.shift(),t.seriesParams&&t.seriesParams.shift(),t.paused&&t.type!="Sprite"){l&&typeof l=="function"&&l(f);return}if(G.loop)if(on>0)if(We<on){tn>0&&(t.waiting=!0),vr(),We++;return}else A?t.set&&t.set(qr()):t.set&&t.set(ce);else{tn>0&&(t.waiting=!0),vr();return}if(ee?Nr(x):t.pauseAnimate(!0,x),!G.loop&&ie&&typeof ie=="function"){var Ne=n(ae)?t:ae;ie(Ne)}l&&typeof l=="function"&&l(f)}function qr(){var Ne={};for(var yt in ce)if(v&&t.style)!n(Q[yt])&&!I?Ne[yt]=Q[yt]:yt=="transform"?Ne[yt]=t.style[yt]:Ne[yt]=jn(t.style[yt]);else if(!n(Q[yt])&&!I)Ne[yt]=Q[yt];else if(yt.substr(0,1)=="."){for(var _t=yt.split("."),Et=t,Nt=1;Nt<_t.length;Nt++)Et=Et[_t[Nt]];Ne[yt]=Et}else Ne[yt]=t[yt];return Ne}function vi(Ne){if(t.zimBusy){for(var yt in Ne)delete t.zimBusy[yt];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}var yi=!1;Br();function Br(){me.zimObj=ce,me.zimTicker=cr,me.zimPaused=yi,$e&&(me.zimIdSet=$e),st&&(n(e.idSets)&&(e.idSets={}),n(e.idSets[st])?e.idSets[st]=[t]:e.idSets[st].indexOf(t)<0&&e.idSets[st].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function Nr(Ne){if(t.tweenStates&&t.tweenStates[Ne]&&delete t.tweenStates[Ne],!(n(t.zimTweens)||n(t.zimTweens[Ne]))){t.zimX=null,t.zimY=null,vi(t.zimTweens[Ne].zimObj),t.zimTweens[Ne].paused=!0,Qr(Ne);var yt=t.zimTweens[Ne].zimIdSet;if(!n(yt)&&t.zimIdSets){var _t=t.zimIdSets[yt];_t&&_t.splice(_t.indexOf(Ne),1),_t&&_t.length==0&&(delete t.zimIdSets[yt],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),delete t.zimTweens[Ne],t.zimLastObj=null,e.isEmpty(t.zimTweens)&&t.stopAnimate(null,null,null,!1,!0),!(t.zimTweens&&t.zimTweens[Ne]||t.zimIdSets&&t.zimIdSets[yt||Ne])){if(e.idSets&&e.idSets[yt||Ne]){e.idSets[yt||Ne];var Et=e.idSets[yt||Ne].indexOf(t);Et>=0&&e.idSets[yt||Ne].splice(Et,1),e.idSets[yt||Ne].length<=0&&(delete e.idSets[yt||Ne],e.isEmpty(e.idSets)&&delete e.idSets)}}}}function Qr(Ne){-function(){var yt=t.zimTweens[Ne].zimTicker;if(t.zimTweens[Ne].extraTickers)for(var _t=0;_t<t.zimTweens[Ne].extraTickers.length;_t++)e.Ticker.remove(t.zimTweens[Ne].extraTickers[_t]);t.zimTweens[Ne].requestID&&cancelAnimationFrame(t.zimTweens[Ne].requestID),yt&&setTimeout(function(){yt&&e.Ticker.remove(yt),yt=null},200)}()}function br(Ne,yt){var _t=t.zimTweens[Ne];_t.paused=yt,yt!=_t.zimPaused&&(_t.zimPaused=yt,yt?_t.zimTicker&&(_t.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(_t.zimTicker)},200)):(_t.startPaused=!1,clearTimeout(_t.zimAnimateTimeout),_t.zimTicker&&(_t.zimTicker=e.Ticker.add(_t.zimTicker,ct))))}function Zr(Ne){for(var yt=[],_t=0;_t<Ne.length;_t++)t.zimIdSets&&!n(t.zimIdSets[Ne[_t]])?yt=yt.concat(t.zimIdSets[Ne[_t]]):yt.push(Ne[_t]);return yt}(!t.stopAnimate||!t.stopAnimate.real)&&(t.stopAnimate=function(Ne,yt,_t,Et,Nt){var Vt;if(t.dynamicAnimation=null,Nt&&K){t.pauseAnimate();return}if(n(Ne)&&(t.tweenStates={}),yt)return t.endTween(null,Ne),t;if(n(Et)&&(Et=!0),t.pan==null&&(t.type!=null&&(t.paused=!0),t.animating=!1),t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),n(_t)&&(_t=!0),Et&&K&&(wt&&wt.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),t.amu&&ct.frame.off("mouseupplus",t.amu),e.Ticker.remove(t.zimDragAnimateTicker)),n(Ne)){if(!_t)return t;t.zimBusy=null,je.Tween.removeTweens(t);for(Vt in t.zimTweens)Qr(Vt);t.zimTweens=null,t.zimIdSets=null,t.zimTween=null,e.idSets&&e.idSets[$e||Vt]&&(delete e.idSets[$e||Vt],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(Ne)||(Ne=[Ne]);var vn=Zr(Ne);for(Vt in t.zimTweens)t.zimTweens[Vt].requestID&&cancelAnimationFrame(t.zimTweens[Vt].requestID),_t&&vn.indexOf(Vt)>=0&&Nr(Vt,Et),!_t&&vn.indexOf(Vt)<0&&Nr(Vt,Et)}return t},t.stopAnimate.real=!0,t.pauseAnimate=function(Ne,yt,_t,Et){var Nt;if(yt=="pauseOnBlur"?yt=null:n(yt)&&(t.tweenStates={all:Ne===!1}),t.type=="Pen"&&(Ne===!1?t.zimOnPath&&(t.infinite=!0):t.stop()),$r&&!Et){if(n(yt))for(Nt in t.zimTweens)br(Nt,Ne);else t.pause(Ne,yt);return t}if(n(Ne)&&(Ne=!0),en=!1,t.type!=null&&(t.paused=Ne),t.animating=!Ne,n(_t)&&(_t=!0),n(yt)&&!_t)return t;if(n(yt))for(Nt in t.zimTweens)br(Nt,Ne);else{Array.isArray(yt)||(yt=[yt]);var Vt=Zr(yt);for(Nt in t.zimTweens)_t&&Vt.indexOf(Nt)>=0&&(br(Nt,Ne),t.tweenStates[Nt]=!Ne),!_t&&Vt.indexOf(Nt)<0&&(br(Nt,Ne),t.tweenStates[Nt]=!Ne)}return t.type=="Sprite"&&(t.running||t.stop()),t}),ye&&t.pauseAnimate(!0,x,null,!0);var Ln;for(ce.extra&&(Ln=ce.extra,delete ce.extra,Array.isArray(Ln)||(Ln=[Ln])),Te=0;Te<Ke.length;Te++){var kr=Ke[Te];ce[kr]&&(n(Ln)&&(Ln=[]),mi(kr,ce[kr]),delete ce[kr])}function mi(Ne,yt){yt===!0?Ln.push({outputProp:lt[Ne]}):Array.isArray(yt)?Ln.push({outputProp:lt[Ne],outputMin:yt[0],outputMax:yt[1],inputMin:yt[2],inputMax:yt[3]}):Ln.push({outputProp:lt[Ne],outputMax:yt})}if(Ln){t.zimStartScaleX=t.scaleX,t.zimStartScaleY=t.scaleY,me.extraTickers=[];var Kr;for(Te=0;Te<Ln.length;Te++){var hn=Ln[Te];n(hn.inputObj)&&(hn.inputObj=t),n(hn.inputProp)&&(hn.inputProp="y"),n(hn.inputMin)&&(hn.inputMin=0),n(hn.inputMax)&&(hn.inputMax=hn.inputProp=="x"?ct.width:ct.height),n(hn.outputObj)&&(hn.outputObj=t),n(hn.outputProp)&&(hn.outputProp="scale"),n(hn.outputMin)&&(hn.outputMin=0),n(hn.outputMax)&&(hn.outputMax=hn.outputMin+1),n(hn.constrain)&&(hn.constrain=!0);for(var Xn in hn)ce[Xn]=e.Pick.choose(ce[Xn]);hn.outputProp=="percentSpeed"&&(Y=!0),Kr=new e.Proportion(hn.inputMin,hn.inputMax,hn.outputMin,hn.outputMax,hn.factor,hn.outputRound);var Jr=function(){var Ne=hn,yt=Kr;return function(){var _t,Et=Ne.outputObj,Nt=Ne.inputObj[Ne.inputProp];if((Ne.inputProp=="x"||Ne.inputProp=="y")&&Ne.inputObj.parent){var Vt=Ne.inputObj.parent.localToGlobal(Nt,Nt);Nt=Vt[Ne.inputProp]}if(Ne.constrain?_t=e.constrain(yt.convert(Nt),Ne.outputMin,Ne.outputMax):_t=yt.convert(Nt),Number.isNaN(_t)&&(_t=Ne.outputMin!=null?Ne.outputMin:0),Ne.outputProp=="scale")Et.scaleX=e.sign(Et.scaleX)*_t,Et.scaleY=e.sign(Et.scaleY)*_t;else if(Ne.outputProp=="scaleX")Et.scaleX=e.sign(Et.scaleX)*_t;else if(Ne.outputProp=="scaleY")Et.scaleY=e.sign(Et.scaleY)*_t;else if(Ne.outputProp=="layer"){if(!Et.parent)return;var vn=e.constrain(Math.round(_t),0,Et.parent.numChildren-1);vn!=Et.parent.getChildIndex(Et)&&Et.parent.setChildIndex(Et,vn)}else Ne.outputProp=="percentSpeed"?Et[Ne.outputProp]=_t*100:Et[Ne.outputProp]=_t}}();Jr(),me.extraTickers.push(e.Ticker.add(Jr,ct))}}var $r;function jr(){if(me.requestID=requestAnimationFrame(jr),!(!Y||me.startPaused&&t.percentSpeed==0)){me.startPaused=!1,me!=zr&&(zr=me,me.currentTime=0,t.pauseAnimate(!0,x,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,Fr=!Re&&!ve&&!d&&!on&&G.loop),Fr&&(me.currentTime+=1e4*Yr,me.setPosition(me.currentTime,!0),Fr=!1);var Ne=me.currentTime+xi*t.percentSpeed/100;Xr&&d==0&&(Ne=e.constrain(Ne,0,Xr)),me.currentTime=Ne,me.setPosition(me.currentTime),(wt||un||Pn||bn)&&sr(),ct.update()}}if(Y&&(t.dynamicAnimation=!0),Y||t.zimAnimateDragDown){if(Y){$r=!0,t.pauseAnimate(!0,x,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,me.currentTime=0;var zr=me;n(t.percentSpeed)&&(t.percentSpeed=me.startPaused?0:100);var xi=1e3/60;me.currentTime=0;var Fr=!Re&&!ve&&!d&&!on&&G.loop;ge&&G.loop&&!on&&(ge=!1);var Yr=i+(A?V||i:0)+(D||0)+(R||0);Yr*=Ee=="s"?1e3:1;var ei=1;G.loop&&on&&(ei=on);var Xr;ge&&(Xr=Yr*ei),jr()}var Pr;t.pause=function(Ne,yt){if(n(Ne)&&(Ne=!0),n(yt)&&(yt=0),Ne){if(t.zimAnimateDragDown&&(K=!1,t.cur("default"),wt&&wt.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),!Y))return;Pr=t.percentSpeed,yt>0?e.animate({target:t,props:{percentSpeed:0},override:!1,ticker:!1,time:yt,call:function(){t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,Y=!1,t.dispatchEvent("pause")}}):(me.startPaused=!1,t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,Y=!1,setTimeout(function(){t.dispatchEvent("pause")},10))}else{if(t.zimAnimateDragDown&&(K=!0,t.cur("pointer"),wt&&(t.zimAnimatePathChange=wt.on("change",t.zimAnimatePathChange)),t.zimAnimateDragDown=t.on("mousedown",t.zimAnimateDragDown),t.zimAnimateDragPress=t.on("pressmove",t.zimAnimateDragPress),t.zimAnimateDragUp=t.on("pressup",t.zimAnimateDragUp),!Y&&ye!=!1))return;en=!1,me.currentTime=me.position,yt>0?e.animate({target:t,props:{percentSpeed:Pr},override:!1,ticker:!1,time:yt,call:function(){t.percentSpeed=Pr,t.paused=!1,t.animating=!0,Y=!0}}):(t.percentSpeed=Pr,t.type!=null&&(t.paused=!1),t.animating=!0,Y=!0)}return t}}return t},e.stopAnimate=function(t,r){qe("45.12");var i;if(n(t)){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].stopAnimate(null,r);return}if(Array.isArray(t)||(t=[t]),!!e.idSets)for(var o=0;o<t.length;o++){var l=t[o];if(e.idSets[l]){var f=e.idSets[l].length-1;for(i=f;i>=0;i--)e.idSets[l][i].stopAnimate(l,r)}}},e.stopZimAnimate=function(t){qe("45.1"),e.stopAnimate(t)},e.pauseAnimate=function(t,r){qe("45.22"),n(t)&&(t=!0);var i;if(n(r)||r=="pauseOnBlur"){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].pauseAnimate(t,r);return}if(Array.isArray(r)||(r=[r]),!!e.idSets)for(var o=0;o<r.length;o++){var l=r[o];if(e.idSets[l])for(i=e.idSets[l].length-1;i>=0;i--)e.idSets[l][i].pauseAnimate(t,l)}},e.pauseZimAnimate=function(t,r){qe("45.2"),e.pauseAnimate(t,r)},e.wiggle=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k){var m="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur",A;if(A=mt(e.wiggle,arguments,m))return A;if(qe("45.25"),n(t)||n(i)||n(o))return t;n(l)&&(l=o);var D=g(f,null,40);n(f)&&(f=D=="s"?1:1e3),n(d)&&(d=f),a(d,D,40),n(P)&&(P="quadInOut"),n(T)&&(T=!1),n(R)&&(R=e.makeID()),n(_)&&(_="both"),n(b)&&(b="both"),n(L)&&(L=!0),n(S)&&(S=0),a(p,D,40),n(p)||(t.wiggleTimeout=setTimeout(function(){t.stopAnimate(R),t.dispatchEvent("wigglestop")},p*(D=="s"?1e3:1)));var C=0,E;function X(){var Z=e.rand(e.Pick.choose(f),e.Pick.choose(d),!1),V={},O={},ne;O[r]=e.Pick.choose(i),_=="negative"||C==0&&b=="negative"?ne=-e.rand(e.Pick.choose(o),e.Pick.choose(l),T):_=="positive"||C==0&&b=="positive"?ne=e.rand(e.Pick.choose(o),e.Pick.choose(l),T):C==0?ne=e.rand(e.Pick.choose(o),e.Pick.choose(l),T,!0):ne=e.rand(e.Pick.choose(o),e.Pick.choose(l),T)*e.sign(E)*-1,V[r]=e.Pick.choose(i)+ne,C==0&&(Z=Z/2),E=ne,C++;var N=t.futureRate;_=="negative"||_=="positive"?e.animate({target:t,obj:V,set:O,ease:P,time:Z*2,wait:dt(S),rewind:!0,override:!1,call:X,id:R,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:k}):e.animate({target:t,obj:V,ease:P,time:Z,wait:dt(S),override:!1,call:X,id:R,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:k}),N&&(t.futureRate=N)}return t.addTo&&!t.stage?t.added(X):X(),t},e.loop=function(t,r,i,o,l,f,d,p,_,P){var T="obj, call, reverse, interval, step, start, end, immediate, complete, completeParams",R;if(R=mt(e.loop,arguments,T))return R;if(e.zimLoopCheck||qe("45.3"),e.zimLoopCheck=!0,n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(p)&&(p=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var b=o===0&&_&&typeof _=="function",L=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":typeof t=="string"?"string":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(L=="container"&&!t.addChild)return;var S,k,m,A;if(L=="number"||L=="string"||L=="array"||L=="nodelist"||L=="htmlcollection"||L=="Dictionary"){if(L=="Dictionary"){var D=e.copy(t.values);t=e.copy(t.objects)}if(S=L=="number"?t:t.length,m=E(S-1),m==0)return;if(i)if(o===0){for(k=f;k>=d;k-=l)if(L=="number"?A=r(k,m,f,d,t):L=="array"||L=="string"?A=r(t[k],k,m,f,d,t):L=="Dictionary"?A=r(t[k],D[k],k,m,f,d,t):A=r(t.item(k),k,m,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(k=X.count,p||k--,l&&(k*=l),k=f-k,L=="number"?A=r(k,m,f,d,t):L=="array"||L=="string"?A=r(t[k],k,m,f,d,t):L=="Dictionary"?A=r(t[k],D[k],k,m,f,d,t):A=r(t.item(k),k,m,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},m,p,null,null,_,P);else if(o===0){for(k=f;k<=d;k+=l)if(L=="number"?A=r(k,m,f,d,t):L=="array"||L=="string"?A=r(t[k],k,m,f,d,t):L=="Dictionary"?A=r(t[k],D[k],k,m,f,d,t):A=r(t.item(k),k,m,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(k=X.count,p||k--,l&&(k*=l),L=="number"?A=r(k,m,f,d,t,X):L=="array"||L=="string"?A=r(t[k],k,m,f,d,t,X):L=="Dictionary"?A=r(t[k],D[k],k,m,f,d,t):A=r(t.item(k),k,m,f,d,t,X),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},m,p,null,null,_,P);return b&&_(P),!0}else if(L=="object"){S=0;var C=[];for(k in t)S++,C.push(k);if(m=E(S-1),m==0)return;if(i)if(o===0){for(k=f;k>=d;k-=l)if(A=r(C[k],t[C[k]],k,m,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(k=X.count,p||k--,l&&(k*=l),k=f-k,A=r(C[k],t[C[k]],k,m,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},m,p,null,null,_,P);else if(o===0){for(k=f;k<=d;k+=l)if(A=r(C[k],t[C[k]],k,m,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(k=X.count,p||k--,l&&(k*=l),A=r(C[k],t[C[k]],k,m,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},m,p,null,null,_,P);return b&&_(P),!0}else{if(m=E(t.numChildren-1),m==0)return;if(i)if(o===0){for(k=f;k>=d;k-=l)if(A=r(t.getChildAt(k),k,m,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(k=X.count,p||k--,l&&(k*=l),k=f-k,A=r(t.getChildAt(k),k,m,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},m,p,null,null,_,P);else if(o===0){for(k=f;k<=d;k+=l)if(A=r(t.getChildAt(k),k,m,f,d,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(X){if(k=X.count,p||k--,l&&(k*=l),A=r(t.getChildAt(k),k,m,f,d,t),A=="next")X.next();else if(typeof A<"u")return X.clear(),A},m,p,null,null,_,P);return b&&_(P),!0}function E(X){return n(f)&&(f=i?X:0),n(d)&&(d=i?0:X),i&&d>f||!i&&f>d||(f<0&&d)<0||f>X&&d>X?0:(f=Math.max(0,Math.min(f,X)),d=Math.max(0,Math.min(d,X)),Math.floor((i?f-d:d-f)/l)+1)}},e.scaleTo=function(t,r,i,o,l,f,d){var p="obj, boundObj, percentX, percentY, type, boundsOnly, simple",_;if(_=mt(e.scaleTo,arguments,p))return _;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("scaleTo",arguments),t;if(qe("43"),n(r)&&(r=fe.zdf&&fe.zdf.stage?fe.zdf.stage:null),n(t)||!t.getBounds||!t.getBounds())return qn("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),t;if(n(r)||!r.getBounds||!r.getBounds())return qn("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),t;n(i)&&(i=-1),n(o)&&(o=-1),i==-1&&o==-1&&(i=o=100,n(l)&&(l="fill")),n(l)&&(l="fit"),l=="smallest"?l="fit":l=="biggest"||l=="outside"||l=="largest"?l="fill":(l=="both"||l=="stretch")&&(l="full"),n(f)&&(f=!1),n(d)&&(d=!1);var P=r.getBounds().width*i/100*(f?1:r.scaleX),T=r.getBounds().height*o/100*(f?1:r.scaleY);(r.type=="Stage"||r.type=="StageGL")&&(P=r.width*i/100,T=r.height*o/100);var R,b;if(d)R=t.getBounds().height,b=t.getBounds().width;else{var L=e.boundsToGlobal(t);R=L.height/t.scaleX,b=L.width/t.scaleY,(isNaN(R)||isNaN(b)||R>5e3)&&(R=t.getBounds().height,b=t.getBounds().width)}if((i==-1||o==-1)&&l!="full")return i==-1?e.sca(t,T/R):e.sca(t,P/b),t;var S;return l=="full"?(t.scaleX=i!=-1?P/b:t.scaleX,t.scaleY=o!=-1?T/R:t.scaleY,t):(l=="fill"?S=Math.max(P/b,T/R):S=Math.min(P/b,T/R),e.sca(t,S),t)},e.fit=function(t,r,i,o,l,f){var d="obj, left, top, width, height, type",p;if(p=mt(e.fit,arguments,d))return p;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("fit",arguments),t;if(qe("46"),!(n(t)||!t.getBounds)){if(!t.getBounds()){ht("zim methods - fit(): please setBounds() on object");return}if(n(r)){if(!t.stage){ht("zim methods - fit(): please add boundary dimensions or add obj to stage first");return}if(!t.stage.getBounds()){ht("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");return}var _=t.stage.getBounds().width,P=t.stage.getBounds().height;r=0,i=0,o=_,l=P}f===!0?f="fit":f===!1&&(f="fill"),n(f)&&(f="fit"),t.scaleX=t.scaleY=1;var T=o,R=l,b=t.getBounds().width,L=t.getBounds().height,S,k,m,A,D;return f=="full"?(t.scaleX=m=T/b,t.scaleY=A=R/L,S=T,k=R):(f=="fit"?T/R>=b/L?D=R/L:D=T/b:f=="fill"&&(T/R>=b/L?D=T/b:D=R/L),m=A=D),t.scaleX=m,t.scaleY=A,S=b*m,k=L*A,t.x=(t.regX-t.getBounds().x)*m+r+(T-S)/2,t.y=(t.regY-t.getBounds().y)*A+i+(R-k)/2,{x:t.x,y:t.y,width:S,height:k,scale:D,scaleX:m,scaleY:A,bX:r,bY:i,bWidth:o,bHeight:l}}},e.boundsCheck=!1,e.boundsToGlobal=function(t,r,i,o,l){if(e.boundsCheck||(qe("40"),e.boundsCheck=!0),!(n(t)||!t.getBounds)){if(n(i)&&(i=!1),l&&!t.getBounds&&!t.getBounds())return t;var f=t.getBounds();if(!f&&n(r)){ht("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)");return}r&&(f=r);var d,p,_,P;l&&l.type&&!(l.type=="Stage"||l.type=="StageGL")?(d=t.localToLocal(f.x,f.y,l),p=t.localToLocal(f.x+f.width,f.y,l),_=t.localToLocal(f.x+f.width,f.y+f.height,l),P=t.localToLocal(f.x,f.y+f.height,l)):i?(d=t.globalToLocal(f.x,f.y),p=t.globalToLocal(f.x+f.width,f.y),_=t.globalToLocal(f.x+f.width,f.y+f.height),P=t.globalToLocal(f.x,f.y+f.height)):(d=t.localToGlobal(f.x,f.y),p=t.localToGlobal(f.x+f.width,f.y),_=t.localToGlobal(f.x+f.width,f.y+f.height),P=t.localToGlobal(f.x,f.y+f.height));var T=Math.min(d.x,p.x,_.x,P.x),R=Math.min(d.y,p.y,_.y,P.y),b=Math.max(d.x,p.x,_.x,P.x),L=Math.max(d.y,p.y,_.y,P.y);return new je.Rectangle(T,R,b-T,L-R)}},e.resetBounds=function(t,r,i,o,l,f){var d="obj, a, b, c, d, margin",p;if(p=mt(e.resetBounds,arguments,d))return p;qe("40.5");var _,P,T,R;return n(o)?(_=0,P=r,T=0,R=i):(_=r,P=o,T=i,R=l),n(R)&&(R=P),n(r)?t.setBounds(null):t.setBounds(_,T,P,R),f&&(i=t.getBounds(),i&&t.setBounds(i.x-f,i.y-f,i.width+f*2,i.height+f*2)),t},e.copyMatrix=function(t,r){return qe("45.5"),t.x=r.x,t.y=r.y,t.scaleX=r.scaleX,t.scaleY=r.scaleY,t.regX=r.regX,t.regY=r.regY,t.rotation=r.rotation,t.skewX=r.skewX,t.skewY=r.skewY,t},e.duplicate=function(t,r){qe("45.6");var i=t.clone(r);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&i[o]==null){if(o=="parent"||o=="zimTouch")continue;i[o]=t[o]}return i},e.expand=function(t,r,i,o,l){var f="obj, padding, paddingV, paddingRight, paddingBottom",d;if(d=mt(e.expand,arguments,f))return d;if(qe("50"),n(t)||!t.getBounds||!t.getBounds())return ht("zim methods - expand(): please provide object with bounds set"),t;n(r)&&(r=20),n(i)&&(i=r);var p,_;!n(o)||!n(l)?(n(o)&&(o=r),n(l)&&(l=i),p=r,_=i):(p=o=r,_=l=i);var P=t.getBounds(),T=new e.Shape({style:!1});return T.graphics.f("rgba(0,0,0,.01)").r(P.x-p,P.y-_,P.width+p+o,P.height+_+l),t.hitArea=T,t},e.setSwipe=function(t,r){if(qe("34"),n(t)||!t.on)return;t.zimNoSwipe=r?null:!0,t instanceof je.Container&&i(t);function i(o){for(var l=o.numChildren,f,d=0;d<l;d++)f=o.getChildAt(d),f.zimNoSwipe=t.zimNoSwipe,f instanceof je.Container&&i(f)}return t},e.setMask=function(t,r,i){if(qe("50.1"),n(t)&&ht("zim methods - setMask(): please provide obj"),n(r))return l(),t;var o=t.stage||(fe.zdf?fe.zdf.stage:null);function l(){t.zimMask&&t.zimMask.parent&&t.zimMask.parent.removeChild(t.zimMask),t.zimMask=null,t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.mask=null}t.zimMaskOriginal&&t.zimMaskOriginal!=r&&l(),n(i)&&(i=r.type=="Blob"||!n(r.zimDown)||!n(r.transformControls)||!n(r.zimTouch)||!n(r.zimTweens),r.zimMaskDynamic=i),t.zimMaskOriginal=r;var f;function d(){if(i&&(!o||!r.stage))return t;if(f&&f.dispose&&f.dispose(),f=null,t.zimMask=r.zimMask=f=r.shape.clone(),e.copyMatrix(f,r),r.addChildAt(f,0),f.alpha=0,!t.parent){t.mask=f;return}var p=r.getConcatenatedMatrix().decompose(),_=t.parent.getConcatenatedMatrix().decompose();f.scaleX=p.scaleX/_.scaleX,f.scaleY=p.scaleY/_.scaleY,f.rotation=(p.rotation?p.rotation:0)-(_.rotation?_.rotation:0);var P=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,t.parent);f.x=P.x,f.y=P.y,t.mask=f}return r.zimMaskApply=function(){t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.zimMaskTicker=e.Ticker.add(d)},r&&r.shape?(d(),i&&r.zimMaskApply()):(f=r,t.mask=f),t},e.outline=function(t,r,i,o){var l="obj, color, size, boundsOnly",f;if(f=mt(e.outline,arguments,l))return f;if(t.type=="AC"&&fe.zdf)return fe.zdf.ac("outline",arguments),t;if(qe("47"),t.type&&t.type=="zimOultineShape")return kt&&ht("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(n(t)||!t.getBounds)return ht("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return ht("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return ht("zim methods - outline(): object should be on stage first"),t;if(n(r)&&(r="brown"),n(i)&&(i=2),i<=0){t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),t.ZIMoutlineShape=t.ZIMoutlineShapeC=null;return}var d=t.getBounds(),p=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new e.Shape;p.type="zimOutlineShape";var _=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new e.Shape;_.type="zimOutlineShape";var P=t.parent;t.outlineToggled=!0,t.outlineToggle=function(E){return E===!0?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):E===!1?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var T=t.localToLocal(d.x,d.y,P),R=t.localToLocal(d.x+d.width,d.y,P),b=t.localToLocal(d.x+d.width,d.y+d.height,P),L=t.localToLocal(d.x,d.y+d.height,P),S=t.localToLocal(0,0,P),k=p.graphics.c(),m=_.graphics.c();if(k.s(r).ss(i).mt(T.x,T.y).lt(R.x,R.y).lt(b.x,b.y).lt(L.x,L.y).lt(T.x,T.y).cp(),!o){var A=10,D=A+1;m.s("white").ss(i+2),m.mt(-D,0).lt(D,0),m.mt(0,-D).lt(0,D),m.s(r).ss(i),m.mt(-A,0).lt(A,0),m.mt(0,-A).lt(0,A),m.cp(),_.x=S.x,_.y=S.y,_.rotation=t.rotation,k.s("white").ss(i+2).dc(t.x,t.y,A+6),k.s(r).ss(i).dc(t.x,t.y,A+6)}t.parent.removeChild(p),t.parent.removeChild(_);var C=t.parent.getChildIndex(t);return t.parent.addChildAt(_,C+1),t.parent.addChildAt(p,C+1),p.mouseEnabled=!1,_.mouseEnabled=!1,t},e.blendmodes=function(t,r,i){qe("47.05"),n(r)&&(r=1);var o=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];i===!1&&o.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var l=0,f=e.interval(r,function(){var d=o[l%o.length];l++,t.ble(d),Gr(d),t.stage&&t.stage.update()});return t.on("mousedown",function(){f.pause(!f.paused)}),t},e.STYLE=null,e.ignore="ignore",e.getStyle=function(t,r,i,o){e.STYLECHECK||(qe("50.34"),e.STYLECHECK=!0);var l=["tap","change","hold","noTap","noChange","noHold","pos","addTo","center","centerReg","reg","mov","move","drag","transform","gesture","mouse","expand","outline","bounds","animate","wiggle","cache"],f=fe.STYLE||e.STYLE,d=f,p,_=!1;n(o)||(t=null,r=o,_=!0),f&&f.type&&typeof f.type=="string"&&(f.ttype=f.type,delete f.type);for(var P in f)p=f[P],P.match(/^[(A-Z)]/)?(f.type||(f.type={}),f.type[P]?f.type[P]=e.merge(f.type[P],p):f.type[P]=p,delete f[P]):p.constructor==={}.constructor&&P!="group"&&P!="type"&&!e.isPick(p)&&l.indexOf(P)==-1&&(f.group||(f.group={}),f.group[P]?f.group[P]=e.merge(f.group[P],p):f.group[P]=p,delete f[P]);n(d)?d={}:d=e.copy(d);var T;if(n(i))i={};else for(T=0;T<l.length;T++)delete i[l[T]];var R=i,b=d.type;if(b&&delete d.type,!n(r)&&!n(d.group)){var L=r.split(","),S={};for(T=0;T<L.length;T++){var k=L[T].trim();n(d.group[k])||(S=e.merge(S,d.group[k]))}delete d.group}_?!n(r)&&!n(S)&&(d=S):(!n(t)&&!n(b)&&!n(b[t])&&(d=e.merge(d,b[t])),!n(r)&&!n(S)&&(d=e.merge(d,S)));for(var m in d){if(R[m]){delete d[m];continue}if(p=l.indexOf(m)==-1&&!d.delayPick?e.Pick.choose(d[m]):d[m],p=="ignore"){delete d[m];continue}else p&&p.constructor==={}.constructor&&(p=e.copy(p,!0,!1));var A;for(var D in d)(A=D.match(/^(.+)gColor$/))&&(d[A[1]+"ackgroundColor"]=d[D],delete d[D]);d[m]=p}return d=e.merge(d,R),d.ttype&&!d.type&&(d.type=d.ttype,delete d.ttype),d.style===!1?{}:d},e.styleTransforms=function(t,r){var i=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","blendMode"],o;if(r){for(r.add&&t.addTo(),r.addTo&&t.addTo(r.addTo===!0?null:r.addTo),o=0;o<i.length;o++)r[i[o]]!=null&&(t[i[o]]=e.Pick.choose(r[i[o]]));if((r.regX!=null||r.regY!=null)&&t.reg(n(r.regX)?DEFAULT:r.regX,n(r.regY)?DEFAULT:r.regY),r.bounds&&r.bounds.constructor==={}.constructor&&t.setBounds(r.bounds.x?r.bounds.x:0,r.bounds.y?r.bounds.y:0,r.bounds.width?r.bounds.width:100,r.bounds.height?r.bounds.height:100),r.center&&t.center(r.center===!0?null:r.center),r.centerReg&&t.centerReg(r.centerReg===!0?null:r.centerReg),r.reg!=null&&(r.reg.constructor==={}.constructor?t.reg(e.Pick.choose(r.reg.x),e.Pick.choose(r.reg.y),r.reg.still):t.reg(r.reg)),r.x!=null&&(r.loc?r.loc.x==null&&(r.loc.x=r.x):r.loc={x:r.x}),r.y!=null&&(r.loc?r.loc.y==null&&(r.loc.y=r.y):r.loc={y:r.y}),r.loc&&(r.loc.constructor==={}.constructor?t.loc(e.Pick.choose(r.loc.x),e.Pick.choose(r.loc.y)):t.loc(e.Pick.choose(r.loc))),r.pos)if(r.pos.constructor==={}.constructor)t.pos(e.Pick.choose(r.pos.x),e.Pick.choose(r.pos.y),e.Pick.choose(r.pos.horizontal),e.Pick.choose(r.pos.vertical),e.Pick.choose(r.pos.container),e.Pick.choose(r.pos.index),r.pos.add,e.Pick.choose(r.pos.reg),e.Pick.choose(r.pos.regX),e.Pick.choose(r.pos.regY));else{var l=e.Pick.choose(r.pos);(l=="left"||l=="top")&&t.pos(),l=="right"&&t.pos({horizontal:"right"}),l=="bottom"&&t.pos({vertical:"bottom"}),(l=="rightbottom"||l=="bottomright")&&t.pos({horizontal:"right",vertical:"bottom"}),l=="center"&&t.center()}if((r.mov||r.move)&&(r.move&&(r.mov=r.move),r.mov.constructor==={}.constructor?t.mov(e.Pick.choose(r.mov.x),e.Pick.choose(r.mov.y)):t.mov(e.Pick.choose(r.mov))),r.outline&&setTimeout(function(){t.outline(r.outline.constructor==={}.constructor?r.outline:null),t.stage&&t.stage.update()},20),r.drag&&t.drag(r.drag.constructor==={}.constructor?r.drag:{currentTarget:!0}),r.gesture&&t.gesture(r.gesture.constructor==={}.constructor?r.gesture:null),r.mouse===!1&&t.noMouse(),r.transform&&setTimeout(function(){t.transform(r.transform.constructor==={}.constructor?r.transform:null)},20),r.animate)for(Array.isArray(r.animate)||(r.animate=[r.animate]),o=0;o<r.animate.length;o++)-function(){var d=r.animate[o];d.constructor==={}.constructor&&setTimeout(function(){t.animate(d)},20)}();if(r.wiggle)for(Array.isArray(r.wiggle)||(r.wiggle=[r.wiggle]),o=0;o<r.wiggle.length;o++)-function(){var d=r.wiggle[o];d.constructor==={}.constructor&&setTimeout(function(){t.wiggle(d)},20)}();r.expand&&t.expand(r.expand===!0?null:r.expand),r.cache&&(r.cache.constructor==={}.constructor?r.cache.x?t.cache(e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y),e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y)):t.cache(e.Pick.choose(r.cache.width),e.Pick.choose(r.cache.height)):t.cache()),r.tap&&t.tap&&t.tap(r.tap),r.change&&t.change&&t.change(r.change),r.hold&&t.hold&&t.hold(r.hold),r.noChange&&t.noChange&&t.noChange(),r.noTap&&t.noTap&&t.noTap(),r.noHold&&t.noHold&&t.noHold();var f=fe.STYLE||e.STYLE;f&&(f.once===!0||f.once==t.type)&&(fe.STYLE?fe.STYLE={}:e.STYLE={})}},e.Style={remembered:{},clear:function(){return fe.STYLE&&(fe.STYLE={}),e.STYLE&&(e.STYLE={}),e.Style},clearTypes:function(){var t=fe.STYLE||e.STYLE;return delete t.types,e.Style},clearGroups:function(){var t=fe.STYLE||e.STYLE;return delete t.groups,e.Style},remember:function(t){n(t)&&(t="default");var r=fe.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=fe.STYLE={}),e.Style.remembered[t]=e.copy(r,!0),e.Style},clearRemembered:function(t){return n(t)?e.Style.remembered={}:delete e.Style.remembered[t],e.Style},recall:function(t){return n(t)&&(t="default"),fe.STYLE?fe.STYLE=e.Style.remembered[t]:e.STYLE=e.Style.remembered[t],e.Style},add:function(t){var r=fe.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=fe.STYLE={}),fe.STYLE?fe.STYLE=e.merge(r,t):e.STYLE=e.merge(r,t),e.Style},addType:function(t,r){var i=fe.STYLE||e.STYLE;return i||(Lt?i=e.STYLE={}:i=fe.STYLE={}),i.type||(i.type={}),i.type[t]=r,e.Style},addGroup:function(t,r){var i=fe.STYLE||e.STYLE;return i||(Lt?i=e.STYLE={}:i=fe.STYLE={}),i.group||(i.group={}),i.group[t]=r,e.Style},remove:function(t){var r=fe.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=fe.STYLE={}),delete r[t],e.Style},removeType:function(t){var r=fe.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=fe.STYLE={}),r.type&&delete r.type[t],e.Style},removeGroup:function(t){var r=fe.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=fe.STYLE={}),r.group&&delete r.group[t],e.Style}},e.PATH=null,e.TIME="seconds",e.TIMECHECK=!1,e.DIR="ltr",e.SEEDRAND=null,e.SEEDRANDCOUNT=0,e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.DEFAULTWIRE="currentValue",e.KEYFOCUS=null,e.POSREG=!1,e.DRAGALL=!1,e.MOBILE="default",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,wire:new e.Dictionary,setFPS:function(t,r){n(t)&&n(r)?(t=60,r=60):n(t)?t=60:n(r)&&(r=t),e.Ticker.framerate=je.Ticker.framerate=e.mobile()?t:r},setTimingMode:function(t){je.Ticker.timingMode=je.Ticker.RAF,t=="synched"&&(je.Ticker.timingMode=je.Ticker.RAF_SYNCHED),t=="timeout"&&(je.Ticker.timingMode=je.Ticker.TIMEOUT)},add:function(t,r){qe("30");var i=e.Ticker;if(i.has(t,r))return t;if((n(r)||!r.update)&&(r=fe.zdf.stage),n(t)||typeof t!="function"){ht("zim.Ticker.add() - only add functions");return}return i.list.at(r)?i.list.at(r).push(t):i.list.add(r,[t]),i.ticker||(i.ticker=je.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},addWire:function(t,r){if(qe("30"),n(r[0]))return t;var i=e.Ticker;i.wire.add(t,r);var o=r[0][r[1]];return r[4]&&(o=r[4](o,"from")),r[3]&&(t[r[6]]=r[7]=o),i.ticker||(i.ticker=je.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},rawID:{},raw:function(t){qe("30");var r=e.makeID("letters",7);return-function i(o){t(o),e.Ticker.rawID[r]=requestAnimationFrame(i)}(),r},removeRaw:function(t){cancelAnimationFrame(e.Ticker.rawID[t]),delete e.Ticker.rawID[t]},call:function(t){var r=e.Ticker,i,o,l,f=[];for(l=0;l<r.list.length;l++){i=r.list.objects[l],o=r.list.values[l];for(var d=0;d<o.length;d++)o[d](t);var p=!1;(r.alwaysList.at(i)||o.length>0&&(n(r.update)&&!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)||r.update))&&(p=!0),p&&f.indexOf(i)<0&&f.push(i)}for(l=r.wire.length-1;l>=0;l--){var _=r.wire.objects[l],P=r.wire.values[l];if(P){var T=_[P[6]];T!=P[7]&&(P[4]&&(T=P[4](T,"to",P[7])),P[0][P[1]]=P[7]=T,P[5]&&P[5](T),i=P[0].stage,i&&f.indexOf(i)<0&&f.push(i)),P[2]&&P[0]&&(T=P[0][P[1]],P[7]!=T&&(P[4]&&(T=P[4](T,"from",P[7])),_[P[6]]=P[7]=T,P[5]&&P[5](T),i=_.stage,i&&f.indexOf(i)<0&&f.push(i)))}}if(r.list.length==0)for(l=0;l<r.alwaysList.length;l++)i=r.alwaysList.objects[l],f.indexOf(i)<0&&f.push(i);var R=f.length;for(l=0;l<R;l++)f[l].update()},always:function(t){qe("30");var r=e.Ticker;r.framerate||r.setFPS(),(n(t)||!t.update)&&(t=fe.zdf.stage),r.alwaysList.add(t,!0),r.ticker||(r.ticker=je.Ticker.on("tick",r.call))},alwaysOff:function(t){var r=e.Ticker;(n(t)||!t.update)&&(t=fe.zdf.stage),r.alwaysList.remove(t)},remove:function(t){var r=e.Ticker;if(n(t)||typeof t!="function"){ht("zim.Ticker - only remove functions");return}for(var i=0;i<r.list.length;i++){var o=r.list.values[i].indexOf(t);o>-1&&r.list.values[i].splice(o,1)}r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(je.Ticker.off("tick",r.ticker),r.ticker=null)},removeAll:function(t){for(var r=e.Ticker,i,o=0;o<r.list.length;o++)i=r.list.objects[o],(n(t)||t===i)&&(r.list.values[o]=[]);r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(je.Ticker.off("tick",r.ticker),r.ticker=null)},removeWire:function(t,r,i,o){var l=e.Ticker;if(n(t)&&n(r)&&n(i)&&n(o))l.wire.clear();else for(var f=l.wire.length-1;f>=0;f--){var d=l.wire.objects[f],p=l.wire.values[f];p&&(t&&d!=t||r&&p[0]!=r||i&&p[1]!=i||o&&p[6]!=o||(l.wire.objects.splice(f,1),l.wire.values.splice(f,1)))}l.alwaysList.length>0||l.list.length>0||l.wire.length>0||(je.Ticker.off("tick",l.ticker),l.ticker=null)},isUpdating:function(t){n(t)&&(t=fe.zdf.stage);var r=!1,i=e.Ticker;return(i.alwaysList.at(t)||i.list&&i.list.values.at(t)&&i.list.values.at(t).length>0&&(n(i.update)&&!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)||i.update))&&(r=!0),r},has:function(t,r){return(n(r)||!r.update)&&(r=fe.zdf.stage),e.Ticker.list&&e.Ticker.list.at(r)&&e.Ticker.list.at(r).indexOf(t)>=0},getFPS:function(){return je.Ticker.getMeasuredFPS()},dispose:function(t){for(var r=e.Ticker,i=0,o,l=r.list.length-1;l>=0;l--)o=r.list.objects[l],n(t)||t===o?(r.list.remove(t),r.alwaysList.remove(t)):i+=r.list.values[l].length;if(!(r.alwaysList.length>0))return i==0&&(je.Ticker.off("tick",r.ticker),r.ticker=null),!0}},e.Ticker.setFPS(),Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var r=e.Ticker;typeof t!="boolean"&&(t=null),r.myUpdate=t,r.myUpdate===!1&&(cancelAnimationFrame(r.ticker),r.alwaysList=new e.Dictionary)}}),e.Pages=function(t,r,i,o,l,f,d,p,_){var P="pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",T;if(T=mt(e.Pages,arguments,P,this))return T;qe("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=p;var R=d===!1?{}:e.getStyle(this.type,this.group,_),b=g(i);if(n(t)&&(t=R.pages!=null?R.pages:[]),this.pages=t,n(r)&&(r=R.transition!=null?R.transition:"none"),n(i)&&(i=R.speed!=null?R.speed:b=="s"?.2:200),n(o)&&(o=R.transitionTable!=null?R.transitionTable:[]),this.transitionTable=o,n(f)&&(f=R.arrowDisableColor!=null?R.arrowDisableColor:e.grey),this.arrowDisableColor=f,n(l)&&(l=R.holder!=null?R.holder:null),n(l)&&fe.zdf&&(l=fe.zdf.stage),!l.getBounds||!l.getBounds()){ht("zim controls - Pages():\nholder object must have bounds set");return}this.speed=i,this.active=!0;var L=this;L.transitioning=!1;var S=l.getBounds().width,k=l.getBounds().height,m,A;(r!="none"||o!=[])&&D();function D(){m=new je.Shape,m.graphics.f("black").r(0,0,S,k+1),A=new je.Shape,A.graphics.f("white").r(0,0,S,k+1)}var C=["left","right","up","down"],E,X,Z=!0,V;for(V=0;V<t.length;V++)E=t[V],E.constructor!={}.constructor&&(E=t[V]={page:t[V]}),E.swipe&&(Z=!1);for(V=0;V<t.length;V++){if(E=t[V],E.constructor!=={}.constructor&&(E=t[V]={page:t[V]}),Z){var O=t[V-1],ne=t[V+1];E.swipe=[O?O.page:null,ne?ne.page:null]}ie(E.page,E.swipe)}var N=this.page=t[0]?t[0].page:null;n(this.page)||(this.index=0),this.addChild(N),ae(N),this.swipe=new e.Swipe(l);var q,U=!1,z=this.swipe.on("swipe",function(G){if(L.active){var v=G.currentTarget.direction;if(v!="none"){var w="";v=="left"?w="right":v=="right"?w="left":v=="up"?w="down":v=="down"&&(w="up"),v=w;var h=C.indexOf(v);X=N.zimSwipeArray[h],q=[X,v,null,null,!0],L.page=N,L.nextPage=X,L.direction=v,L.dispatchEvent("swipe"),setTimeout(function(){U||L.go(X,v,null,null,!0)},50)}}});function ie(G,v){n(G)||(G.zimHTMLList=new e.Dictionary,he(G),G.zimSwipeArray=v||[],G.zimOriginalAlpha=G.alpha,G.parent&&G.parent.removeChild(E.page))}function ae(G){if(!n(G))for(G.removedHTML=!1,V=0;V<G.zimHTMLList.length;V++)G.addChildAt(G.zimHTMLList.values[V].obj,G.zimHTMLList.values[V].depth)}function he(G){if(!G.removedHTML){G.removedHTML=!0,G.zimHTMLList.clear();var v,w;for(w=0;w<G.numChildren;w++)if(v=G.getChildAt(w),v.type=="TextArea"||v.type=="Loader"||v.type=="Tag"){var h={obj:v,depth:G.getChildIndex(v)};G.zimHTMLList.add(v,h)}for(w=G.numChildren-1;w>=0;w--)v=G.getChildAt(w),(v.type=="TextArea"||v.type=="Loader"||v.type=="Tag")&&G.removeChild(v)}}this.addPage=function(G,v){ie(G,v),L.pages.push({page:G}),N?G.parent&&G.parent.removeChild(G):(N=L.page=G,L.addChild(N))},this.removePage=function(G){he(G),L.currentPage==G&&(L.removeChild(G),l.stage&&l.stage.update()),e.loop(L.pages,function(v,w){(v.page==G||v==G)&&L.pages.splice(w,1)},!0),G.zimSwipeArray=null},this.setSwipeArray=function(G,v){n(v)&&(v=[]);var w={page:G,swipe:v};w.page.zimSwipeArray=w.swipe?w.swipe:[]},this.pause=function(){U=!0},this.unpause=function(){U&&L.go(q[0],q[1],q[2],q[3],q[4])};var $=!0;this.go=function(G,v,w,h,I){if(typeof G=="number"){var Q=L.pages[G];if(n(Q))return;G=Q.page}setTimeout(function(){U=!1},200);for(var x=[{x:S},{x:-S},{y:k},{y:-k}],F=[{x:0},{x:0},{y:0},{y:0}],Ae=[{x:S/2,alpha:0},{x:-S/2,alpha:0},{y:k/2,alpha:0},{y:-k/2,alpha:0}],Y=r,K=L.speed,ge=0;ge<L.transitionTable.length;ge++)if(L.transitionTable[ge][0]==N&&L.transitionTable[ge][1]==G){Y=L.transitionTable[ge][2],n(L.transitionTable[ge][3])||(K=L.transitionTable[ge][3]);break}n(w)&&(w=Y),n(h)&&(h=K),L.speed=h;function ye(Ue){Ue[0].uncache(),Ue[1].uncache(),L.transitioning=!1,L.dispatchEvent("pagetransitioned"),L.removeChild(L.lastPage),w=="fan"&&(v=="right"||v=="down"?(L.lastPage.rotation=0,L.lastPage.regY=0,L.lastPage.mov(0,-L.lastPage.height)):(L.page.rotation=0,L.page.regY=0,L.page.mov(0,-L.lastPage.height))),L.removeChild(m),L.removeChild(A),ae(N),$=!0}function ee(Ue){L.removeChild(L.lastPage),e.animate(Ue.shift(),{alpha:0},L.speed/2,null,ye,Ue)}if(L.direction=v,G==""||G==null)L.page=N,L.dispatchEvent("nothing");else if(typeof G=="string")L.page=N,L.dispatchEvent(G);else{if(G==N)return;n(v)&&(v="right");var ce=C.indexOf(v);if(!$)return;$=!1,G.x=0,G.y=0,G.alpha=G.zimOriginalAlpha;var ve,Re=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"];if(Re.indexOf(w)>=0){var se=w;ve=!0,w="slide"}var Oe=["explodeDark","explodeLight","explodeZIM"];if(Oe.indexOf(w)>=0){var J=w;ve=!0,w="fade"}if(w.type=="Emitter"&&(ve=w,w.horizontal||w.vertical?w="slide":w="fade"),L.transitioning=!0,w=="slide"?(G.x=-(x[ce].x|0),G.y=-(x[ce].y|0),G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),N.cache(0,0,(S+1)/N.scaleX,(k+1)/N.scaleY),L.addChild(G),L.addChild(N),e.animate(N,x[ce],L.speed,null,ye,[N,G]),e.animate(G,F[ce],L.speed)):w=="reveal"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),N.cache(0,0,(S+1)/N.scaleX,(k+1)/N.scaleY),L.addChild(G),L.addChild(N),e.animate(N,Ae[ce],L.speed,null,ye,[N,G])):w=="fade"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),N.cache(0,0,(S+1)/N.scaleX,(k+1)/N.scaleY),G.alpha=1,L.addChild(G),L.addChild(N),e.animate(N,{alpha:0},L.speed,null,ye,[N,G])):w=="black"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),N.cache(0,0,(S+1)/N.scaleX,(k+1)/N.scaleY),G.alpha=1,L.addChild(G),L.addChild(N),m.alpha=0,L.addChild(m),e.animate(m,{alpha:1},L.speed/2,null,ee,[m,N,G])):w=="clear"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),N.cache(0,0,(S+1)/N.scaleX,(k+1)/N.scaleY),G.alpha=0,L.addChild(G),L.addChild(N),e.animate(N,{alpha:0},L.speed/2),e.animate(G,{alpha:1},L.speed/2,null,ye,[N,G],L.speed/2)):w=="white"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),N.cache(0,0,(S+1)/N.scaleX,(k+1)/N.scaleY),G.alpha=1,L.addChild(G),L.addChild(N),A.alpha=0,L.addChild(A),e.animate(A,{alpha:1},L.speed/2,null,ee,[A,N,G])):w=="fan"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),N.cache(0,0,(S+1)/N.scaleX,(k+1)/N.scaleY),G.alpha=1,v=="right"||v=="down"?(L.addChild(G),L.addChild(N),N.regY=N.height,N.mov(0,N.height),e.animate(N,{rotation:-90},L.speed,null,ye,[N,G])):(L.addChild(N),L.addChild(G),G.regY=N.height,G.mov(0,N.height),G.rotation=-90,e.animate(G,{rotation:0},L.speed,null,ye,[N,G]))):(L.transitioning=!1,L.addChild(G),L.removeChild(N),$=!0),ve){var xe=ce<2,te,we;if(se||w=="slide"){se?(se=="lineDark"||se=="lineLight"?te=new e.Rectangle(xe?30:S+5,xe?k+5:30,se=="lineDark"?e.dark:e.white).alp(.2):se=="lineZIM"?te=new e.Rectangle(xe?50:S+5,xe?k+5:50,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.5):se=="pixelDark"||se=="pixelLight"?te=new e.Rectangle(40,40,e.clear,se=="pixelDark"?e.dark:e.white,2).alp(.7):se=="pixelZIM"?te=new e.Rectangle(40,40,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7):se=="bubbleDark"||se=="bubbleLight"?te=new e.Circle(30,e.clear,se=="bubbleDark"?e.dark:e.white,2).alp(.7):se=="bubbleZIM"&&(te=new e.Circle(30,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),te.centerReg({add:!1}),se=="lineDark"||se=="lineLight"||se=="lineZIM"?we=new e.Emitter({obj:te,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):we=new e.Emitter({obj:te,num:6,life:.5,decayTime:.5,width:xe?0:S,height:xe?k:0,vertical:xe,horizontal:!xe,startPaused:!0})):we=ve;var ke=[{x:0,y:k/2},{x:S,y:k/2},{x:S/2,y:0},{x:S/2,y:k}],pe=[{x:S,y:k/2},{x:0,y:k/2},{x:S/2,y:k},{x:S/2,y:0}];we.centerReg(l).spurt(null,L.speed),we.x=ke[ce].x,we.y=ke[ce].y,e.animate(we,pe[ce],L.speed,null,function(){se&&we.dispose()})}else(J||w=="fade")&&(J?(J=="explodeDark"||J=="explodeLight"?te=new e.Circle(150,J=="explodeDark"?e.dark:e.white).alp(.5):J=="explodeZIM"&&(te=new e.Circle(130,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),we=new e.Emitter({obj:te,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):we=ve,we.centerReg(l).spurt(null,L.speed*.35),we.on("fizzed",function(){J&&we.dispose()}));l&&l.type!="Stage"&&l.type!="StageGL"&&we.particles&&l.shape&&we.particles.setMask(l.shape)}for(l&&l.shape&&we&&we.particles&&we.particles.setMask(l.shape),he(N),L.lastPage=N,L.page=G,L.index=-1,ge=0;ge<L.pages.length;ge++){var Me=L.pages[ge].page;Me==L.page&&(L.index=ge)}w=="none"&&ae(G),n(I)&&(I=!1),L.fromSwipe=I,L.dispatchEvent("page"),N=G,L.setArrows(t.index),l.stage&&l.stage.update()}},l&&l.shape&&(l.mouseChildren=!0,l.mouseEnabled=!0,L.setMask(l.shape)),this.resize=function(){S=l.getBounds().width,k=l.getBounds().height,(r!="none"||o!=[])&&D()},this.puff=function(G){for(var v=0;v<t.length;v++)L.addChild(t[v].page);L.addChild(N),G>0&&setTimeout(function(){L.settle()},G*(b=="s"?1e3:1))},this.settle=function(){L.removeAllChildren(),L.addChild(N),L.dispatchEvent("puffed")},this.disable=function(){L.active=!1},this.enable=function(){L.active=!0},this.arrows={},this.setArrows=function(){if(!e.isEmpty(L.arrows)){var G=L.pages[L.index];if(!(!G||!G.swipe)){var v=G.swipe,w=[e.LEFT,e.RIGHT,e.DOWN,e.UP];e.loop(w,function(h,I){v[I]?e.loop(L.arrows[h],function(Q){if(Q.setDisabled===!0){Q.activate(!1,L.arrowDisableColor),Q.setDisabled=null;return}Q.enabled||Q.activate(!0,Q.arrowBackgroundColor)}):e.loop(L.arrows[h],function(Q){if(Q.setDisabled===!1){Q.activate(!0,Q.arrowBackgroundColor),Q.setDisabled=null;return}Q.enabled&&Q.activate(!1,L.arrowDisableColor)})}),L.stage&&L.stage.update()}}},L.added(function(G){if(G.frame&&G.frame.scaling=="full"){if(!e.globalManager){var v=e.globalManager=new e.Manager;v.frame=G.frame,v.event=G.frame.on("resize",function(){v.resize()})}e.globalManager.add(L)}}),d!==!1&&e.styleTransforms(this,R),this.dispose=function(G,v,w){if(e.globalManager){var h=e.globalManager;h.remove(L),e.globalManager.items.length==0&&(h.frame.off("resize",h.event),h.dispose(),e.globalManager=null)}return L.swipe.off("swipe",z),L.swipe.dispose(),w||this.zimContainer_dispose(!0),!0}},e.extend(e.Pages,e.Container,["clone","dispose"],"zimContainer",!1),e.Arrow=function(t,r,i,o,l,f,d,p,_,P,T){var R="backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",b;if(b=mt(e.Arrow,arguments,R,this))return b;qe("71.2"),this.group=P;var L=_===!1?{}:e.getStyle("Arrow",this.group,T);n(o)&&(o=L.direction!=null?L.direction:"right"),n(t)&&(t=L.backgroundColor!=null?L.backgroundColor:e.blue),this.arrowBackgroundColor=t,n(r)&&(r=L.rollBackgroundColor!=null?L.rollBackgroundColor:e.blue.lighten(.2)),this.arrowRollBackgroundColor=r,n(l)&&(l=L.type!=null?L.type:"triangle"),n(f)&&(f=L.newPage!=null?L.newPage:null),n(d)&&(d=L.trans!=null?L.trans:null),n(p)&&(p=L.speed!=null?L.speed:null);var S,k,m,A,D;l=="triangle"?(S=new e.Triangle(45,45,45,t,null,null,null,null,-7).rot(90),k=new e.Triangle(45,45,45,r,null,null,null,null,-7).rot(90)):l=="thick"?(S=new e.Shape,m=S.graphics.f(t).command,D="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",S.p(D).reg(-4),k=new e.Shape,A=k.graphics.f(r).command,k.p(D).reg(-4)):l=="thin"?(S=new e.Shape,m=S.graphics.f(t).command,D="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",S.p(D).reg(-4),k=new e.Shape,A=k.graphics.f(r).command,k.p(D).reg(-4)):l=="angle"&&(S=new e.Shape,m=S.graphics.f(t).command,D="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",S.p(D).reg(-3),k=new e.Shape,A=k.graphics.f(r).command,k.p(D).reg(-3)),this.zimButton_constructor(50,50,"",e.clear,e.clear,null,null,null,null,null,null,null,null,null,null,null,S,k),this.type="Arrow";var C=this;if(this.activate=function(V,O){return n(V)&&(V=!0),n(O)&&(O=e.grey),O===!1||(V?(C.enabled=!0,O!==!1&&(l=="triangle"?(C.icon.color=C.arrowBackgroundColor,C.rollIcon.color=C.arrowRollBackgroundColor):(m.style=C.arrowBackgroundColor,A.style=C.arrowRollBackgroundColor))):(C.enabled=!1,O!==!1&&(l=="triangle"?(C.icon.color=O,C.rollIcon.color=O):(m.style=O,A.style=O)))),C},n(i)||i.type!="Pages")return;var E=(Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click";n(i.arrows)&&(i.arrows={}),n(i.arrows[o])&&(i.arrows[o]=[]),i.arrows[o].push(this);var X=Z();X||this.activate(!1,i.arrowDisableColor);function Z(){var V=i.pages[i.index];if(!(!V||!V.page||!V.page.zimSwipeArray)){var O=V.page.zimSwipeArray;if(o=="left")return O[0];if(o=="right")return O[1];if(o=="up")return O[2];if(o=="down")return O[3]}}this.expand(),this.on(E,function(){if(!i.transitioning){var V=Z();V&&i.go(V,o,d,p)}}),_!==!1&&e.styleTransforms(this,L),this.clone=function(){return C.cloneProps(new e.Arrow(t,r,i,o,l,f,d,p,_,this.group,T))}},e.extend(e.Arrow,e.Button,"clone","zimButton",!1),e.HotSpots=function(t,r,i){var o="spots, local, mouseDowns",l;if(l=mt(e.HotSpots,arguments,o,this))return l;qe("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",n(r)&&(r=!0),n(i)&&(i=!1);var f=(Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",d=this,p,_,P=d.hotSpots=[];n(t)&&(t=[]);for(var T=0;T<t.length;T++)R(t[T]);function R(L){var S=null;if(!Array.isArray(L.rect)){if(S=L.rect,!S){ht("zim controls - HotSpots(): HotSpot "+L.page+" "+L.rect+" button does not exist");return}L.rect=[S.x,S.y,S.width||1,S.height||1]}_=new e.HotSpot(L.page,L.rect[0],L.rect[1],L.rect[2],L.rect[3],L.call,L.callOver,L.callOut,r,L.talk),_.zimHSpage=L.page,_.button=S,P.push(_),_.on(f,b),S&&n(L.callOver)&&n(L.callOut)&&(_.spot.mouseEnabled=!1,_.spot.mouseChildren=!1,S.zimHScall=L.call,S.zimHSEvent=S.on(f,b,!0),i||(S.zimHSMDEvent=S.on("mousedown",function(k){k.stopImmediatePropagation()})),S.cur("pointer"))}function b(L){L.stopImmediatePropagation&&L.stopImmediatePropagation(),fe.event&&(fe.event.cancelBubble=!0),typeof L.currentTarget.zimHScall=="function"&&L.currentTarget.zimHScall(L)}this.add=this.addHotSpot=function(L,S,k,m,A,D){p={page:L,rect:S,call:k,callOver:m,callOut:A,talk:D},t.push(p),R(p)},this.show=function(){for(var L=0;L<P.length;L++)_=P[L],_.button||(_.spot.alpha=.2)},this.hide=function(){for(var L=0;L<P.length;L++)_=P[L],_.spot.alpha=0},this.remove=this.removeHotSpots=function(L,S){for(var k=t.length-1;k>=0;k--)p=t[k],_=P[k],S&&!Array.isArray(S)&&(S=[S.x,S.y,S.getBounds().width,S.getBounds().height]),(n(L)&&n(S)||n(S)&&L==p.page||n(L)&&e.arraysEqual(S,p.rect)||L==p.page&&e.arraysEqual(S,p.rect))&&(t.splice(k,1),_.button&&(_.button.off(f,_.button.zimHSEvent),_.button.zimHSEvent=null,i||(_.button.off("mousedown",_.button.zimHSMDEvent),_.button.zimHSMDEvent=null)),_.off(f,b),_.dispose(),P.splice(k,1))},this.dispose=function(){for(var L=0;L<P.length;L++)_=P[L],_.button&&(_.button.off(f,_.button.zimHSEvent),_.button.zimHSCall=null,_.button.zimHSEvent=null,i||(_.button.off("mousedown",_.button.zimHSMDEvent),_.button.zimHSMDEvent=null)),_.off(f,b),_.dispose();return!0}},e.extend(e.HotSpots,e.Container,"dispose","zimContainer",!1),e.HotSpot=function(t,r,i,o,l,f,d,p,_,P){var T="obj, x, y, width, height, call, callOver, callOut, local, talk",R;if(R=mt(e.HotSpot,arguments,T,this))return R;if(qe("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",n(t)||!t.addChild){ht("zim controls - HotSpot():\nPlease pass in container object for obj");return}if(!(t instanceof je.Container)){ht("zim controls - HotSpot():\nObjects passed in should be Containers");return}if(n(r)||n(i)||n(o)||n(l)){ht("zim controls - HotSpot():\nPlease pass in x, y, width, height");return}n(_)&&(_=!0);var b=(Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",L=o,S=l,k,m,A;if(_)k=new e.Point(r,i),m=o,A=l;else{k=t.globalToLocal(r,i);var D=t.globalToLocal(r+L,i+S);m=D.x-k.x,A=D.y-k.y}var C=new e.Shape(o,l);if(C.talk=n(P)?"HotSpot":P,C.alpha=0,C.graphics.f("black").dr(0,0,m,A),C.x=k.x,C.y=k.y,C.cur("pointer"),C.expand(0),this.spot=C,typeof f=="function")var E=C.on(b,function(V){f(V)});if(typeof d=="function")var X=C.on("mouseover",function(V){d(V)});if(typeof p=="function")var Z=C.on("mouseout",function(V){p(V)});t.addChild(C),this.show=function(){C.alpha=.5,t.stage&&t.stage.update()},this.hide=function(){C.alpha=0,t.stage&&t.stage.update()},this.dispose=function(){return E&&C.off(b,X),X&&C.off("mouseover",X),Z&&C.off("mouseout",Z),t.removeChild(C),C=null,!0}},e.extend(e.HotSpot,e.Container,"dispose","zimContainer",!1),e.Guide=function(t,r,i,o,l,f,d,p){var _="obj, vertical, pixels, hideKey, pixelKey, style, group, inherit",P;if(P=mt(e.Guide,arguments,_,this))return P;qe("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=d;var T=f===!1?{}:e.getStyle(this.type,this.group,p);if(n(t)&&(fe.zdf?t=fe.zdf.stage:t="stage"),n(r)&&(r=T.vertical!=null?T.vertical:!0),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){qn("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=T.pixels!=null?T.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=T.hideKey!=null?T.hideKey:"G"),n(l)&&(l=T.pixelKey!=null?T.pixelKey:"P");var R=this,b,L=80,S=26,k=L/6+L/2,m=S*2,A,D,C;r?(C=E("#00c5af","white","white"),C.shape.regX=L+L/6,C.shape.regY=S/2,C.label.x=-L/2-L/6):(C=E("#d61fa0","white","white"),C.shape.regX=L/2,C.shape.regY=S+S/4,C.label.y=-S*3/4);function E($,G,v){var w=new e.Container({style:!1});return w.shape=new e.Shape,w.shape.graphics.s(G).ss(1).f($).r(0,0,L,S),w.shape.alpha=.9,w.addChild(w.shape),w.label=new je.Text("10","16px arial",v),w.label.textAlign="center",w.label.textBaseline="middle",w.addChild(w.label),w.mouseChildren=!1,w.mouseEnabled=!1,w}var X;t!="stage"&&t.addChild(R);var Z=e.added(R,U),V=!1,O,ne,N,q;function U(){if(t=="stage"?(X=R.stage,t=X):X=t.stage,X.frame&&X.frame.scaling=="full"){if(!e.globalManager){var $=e.globalManager=new e.Manager;$.frame=X.frame,$.event=X.frame.on("resize",function(){$.resize()})}e.globalManager.add(R)}t.addChild(R),O=t.getBounds().width,ne=t.getBounds().height,r?(C.y=ne/2,C.label.text="x:"+(R.pixels?Math.round(O*70/100):"70%")):(C.x=O/2,C.label.text="y:"+(R.pixels?Math.round(ne*70/100):"70%")),N=new e.Shape,R.addChild(N),r?N.x=O*.7:N.y=ne*.7,V||(t.addChild(R),ae()),X.off("stagemousemove",b),b=X.on("stagemousemove",ie),X.update()}var z={x:0,y:0};function ie($){var G,v;$?(G=t.globalToLocal($.rawX/e.scaX,$.rawY/e.scaY),z=G):G={x:z.x,y:z.y},i?r?(v=Math.round(Math.abs(G.x-N.x)),C.label.text="x:"+Math.max(0,Math.min(v,Math.round(O))),C.y=Math.max(m,Math.min(G.y,D))):(v=Math.round(Math.abs(G.y-N.y)),C.label.text="y:"+Math.max(0,Math.min(v,Math.round(ne))),C.x=Math.max(k,Math.min(G.x,A))):r?(v=Math.round(Math.abs(G.x-N.x)/O*100),C.label.text="x:"+Math.max(0,Math.min(v,100))+"%",C.y=Math.max(m,Math.min(G.y,D))):(v=Math.round(Math.abs(G.y-N.y)/ne*100),C.label.text="y:"+Math.max(0,Math.min(v,100))+"%",C.x=Math.max(k,Math.min(G.x,A))),X&&X.update()}function ae(){V=!0,O=t.getBounds().width,ne=t.getBounds().height;var $;r?($="ew-resize",q=new je.Rectangle(0,0,O,0)):($="ns-resize",q=new je.Rectangle(0,0,0,ne)),e.noDrag(N),setTimeout(function(){e.drag(N,q,null,$,$,null,null,!0)},500),X.mouseMoveOutside=!0,X.enableMouseOver(10),A=O-L*2/3,D=ne-S-S,N.uncache();var G=N.graphics;r?(G.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,ne),G.f().s("white").ss(2).mt(0,0).lt(0,ne),G.s("#00c5af").sd([20,20]).mt(0,0).lt(0,ne).sd(),N.cache(-10,0,20,ne)):(G.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(O,0),G.f().s("white").ss(2).mt(0,0).lt(O,0),G.s("#d61fa0").sd([20,20]).mt(0,0).lt(O,0).sd(),N.cache(0,-10,O,20)),r?C.x=O:C.y=ne,R.addChild(C)}Object.defineProperty(this,"pixels",{get:function(){return i},set:function($){i=$,R.resize()}}),fe.addEventListener("keydown",he);function he($){$||($=event),X&&(String.fromCharCode($.keyCode)==o.toUpperCase()&&R.toggle(),String.fromCharCode($.keyCode)==l.toUpperCase()&&(R.pixels=!R.pixels))}this.toggled=!0,this.toggle=function($){return $===!0?R.visible=R.toggled=!0:$===!1?R.visible=R.toggled=!1:(R.visible=!R.visible,R.toggled=R.visible),X&&(X.off("stagemousemove",b),R.visible&&(b=X.on("stagemousemove",ie,R)),X.update()),R},this.resize=function(){return R?(X&&(ae(),ie()),!0):!1},f!==!1&&e.styleTransforms(this,T),this.dispose=function(){if(!R)return!1;if(e.globalManager){var $=e.globalManager;$.remove(R),e.globalManager.items.length==0&&($.frame.off("resize",$.event),$.dispose(),e.globalManager=null)}return e.noDrag(N),clearInterval(Z),R.removeAllChildren(),fe.removeEventListener("keydown",he),R.parent&&R.parent.removeChild(R),R=null,!0}},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.Grid=function(t,r,i,o,l,f,d,p,_,P,T){var R="obj, color, pixels, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",b;if(b=mt(e.Grid,arguments,R,this))return b;qe("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=P;var L=_===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(fe.zdf?t=fe.zdf.stage:t="stage"),n(r)&&(r=L.color!=null?L.color:e.black),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){qn("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=L.pixels!=null?L.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=L.hideKey!=null?L.hideKey:"G"),n(l)&&(l=L.pixelKey!=null?L.pixelKey:"P"),n(f)&&(f=L.allowToggle!=null?L.allowToggle:!0),n(d)&&(d=L.cache!=null?L.cache:!0),n(p)&&(p=L.numbers!=null?L.numbers:!0);var S=this,k=10,m;this.mouseChildren=!1,this.mouseEnabled=!1;var A=80,D=26,C=S.numbersX=X("#dddddd",r,"#333333");C.shape.regX=A/2,C.shape.regY=-D/4,C.label.y=D*3/4;var E=S.numbersY=X("#dddddd",r,"#333333");E.shape.regX=-A/6,E.shape.regY=D/2,E.label.x=A/2+A/6,p||(C.visible=!1,E.visible=!1);function X(h,I,Q){var x=new e.Container({style:!1});return x.shape=new je.Shape,x.shape.graphics.s(I).ss(1).f(h).r(0,0,A,D),x.shape.alpha=.9,x.addChild(x.shape),x.label=new je.Text("10","16px arial",Q),x.label.textAlign="center",x.label.textBaseline="middle",x.addChild(x.label),x.mouseChildren=!1,x.mouseEnabled=!1,x}var Z=A/6+A/2,V=D*2,O,ne;C.x=Z,E.y=V,C.label.text="x:0",E.label.text="y:0";var N;t!="stage"&&t.addChild(S);var q=e.added(S,z),U=!1;function z(){if(t=="stage"?(N=S.stage,t=N):N=t.stage,N.frame&&N.frame.scaling=="full"){if(!e.globalManager){var h=e.globalManager=new e.Manager;h.frame=N.frame,h.event=N.frame.on("resize",function(){h.resize()})}e.globalManager.add(S)}U||(v(),t.addChild(S)),N.off("stagemousemove",m),m=N.on("stagemousemove",ae),N.update()}var ie={x:0,y:0};function ae(h){var I;h?(I=t.globalToLocal(h.rawX/e.scaX,h.rawY/e.scaY),ie=I):I={x:ie.x,y:ie.y},i?(C.label.text="x:"+Math.max(0,Math.min(Math.round(I.x),Math.round(he))),C.x=Math.max(Z,Math.min(I.x,O)),E.label.text="y:"+Math.max(0,Math.min(Math.round(I.y),Math.round($))),E.y=Math.max(V,Math.min(I.y,ne))):(C.label.text="x:"+Math.max(0,Math.min(Math.round(I.x/he*100),100))+"%",C.x=Math.max(Z,Math.min(I.x,O)),E.label.text="y:"+Math.max(0,Math.min(Math.round(I.y/$*100),100))+"%",E.y=Math.max(V,Math.min(I.y,ne))),N&&N.update()}var he,$,G;function v(){U=!0,t&&t.getBounds&&(he=t.getBounds().width,$=t.getBounds().height),N&&(N.mouseMoveOutside=!0,N.enableMouseOver(10)),O=he-A*2/3,ne=$-D-D,G=S.grid=new e.Container({style:!1}),S.addChild(G);var h=new je.Shape;G.addChild(h);var I=h.graphics;I.s(r).ss(1);var Q=new je.Shape;G.addChild(Q);var x;if(i){for(x=0;x<he/k;x++)I.mt(x*k,0).lt(x*k,$);for(x=0;x<$/k;x++)I.mt(0,x*k).lt(he,x*k);for(h.alpha=.3,I=Q.graphics,I.s(r).ss(1),x=0;x<he/(k*10);x++)I.mt(x*(k*10),0).lt(x*(k*10),$);for(x=0;x<$/(k*10);x++)I.mt(0,x*(k*10)).lt(he,x*(k*10))}else{for(x=1;x<20+1;x++)I.mt(x*he/20,0).lt(x*he/20,$);for(x=1;x<20;x++)I.mt(0,x*$/20).lt(he,x*$/20);for(h.alpha=.3,I=Q.graphics,I.s(r).ss(1),x=1;x<10;x++)I.mt(x*he/10,0).lt(x*he/10,$);for(x=1;x<10;x++)I.mt(0,x*$/10).lt(he,x*$/10)}var F=80;I.s("#FFFFFF").ss(8),I.mt(he/2,$/2-F/2).lt(he/2,$/2+F/2),I.mt(he/2-F/2,$/2).lt(he/2+F/2,$/2),I.s("#000000").ss(4),I.mt(he/2,$/2-F/2).lt(he/2,$/2+F/2),I.mt(he/2-F/2,$/2).lt(he/2+F/2,$/2),I.s(r).ss(d?3:2),I.dr(0,0,he,$),Q.alpha=.5,d&&G.cache(0,0,he,$),S.addChild(C),S.addChild(E),N&&N.update()}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(h){i=h,S.resize()}}),fe.addEventListener("keydown",w);function w(h){h||(h=event),!(!N||!f)&&(String.fromCharCode(h.keyCode)==o.toUpperCase()&&S.toggle(),String.fromCharCode(h.keyCode)==l.toUpperCase()&&(S.removeChild(G),G=null,S.pixels=!S.pixels))}this.toggled=!0,this.toggle=function(h){return h===!0?S.visible=S.toggled=!0:h===!1?S.visible=S.toggled=!1:(S.visible=!S.visible,S.toggled=S.visible),N.off("stagemousemove",m),S.visible&&(m=N.on("stagemousemove",ae,S)),N&&N.update(),S},this.resize=function(){return S?(S.removeChild(G),G=null,N&&(v(),ae(),setTimeout(function(){S&&S.removeChild(G),G=null,v()},200)),!0):!1},_!==!1&&e.styleTransforms(this,L),this.dispose=function(){if(e.globalManager){var h=e.globalManager;h.remove(S),e.globalManager.items.length==0&&(h.frame.off("resize",h.event),h.dispose(),e.globalManager=null)}return clearInterval(q),S.removeAllChildren(),fe.removeEventListener("keydown",w),S.parent&&S.parent.removeChild(S),S=null,!0}},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.Wrapper=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O){var ne="items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV,  minStretchFirst, style, group, inherit",N=null;if(N=mt(e.Wrapper,arguments,ne,this))return N;qe("78.5"),this.group=V;var q=Z===!1?{}:e.getStyle("Wrapper",this.group,O);n(r)&&(r=q.width!=null?q.width:300),n(S)&&(S=q.height!=null?q.height:null),n(i)&&(i=q.spacingH!=null?q.spacingH:null),n(o)&&(o=q.spacingV!=null?q.spacingV:null),n(l)&&(l=q.wrapperType!=null?q.wrapperType:"spacing"),n(f)&&(f=q.align!=null?q.align:"left"),n(d)&&(d=q.valign!=null?q.valign:"top"),n(p)&&(p=q.alignInner!=null?q.alignInner:"left"),n(_)&&(_=q.valignInner!=null?q.valignInner:"bottom"),n(P)&&(P=q.flip!=null?q.flip:!1),n(T)&&(T=q.reverse!=null?q.reverse:!1),n(R)&&(R=q.bottomFull!=null?q.bottomFull:!1),n(b)&&(b=q.colSize!=null?q.colSize:100),n(L)&&(L=q.rowSize!=null?q.rowSize:null),n(i)&&(i=0),n(o)&&(o=0),n(k)&&(k=q.minSpreadNum!=null?q.minSpreadNum:2),n(m)&&(m=q.minStretchNum!=null?q.minStretchNum:3),n(A)&&(A=q.percentVoidH!=null?q.percentVoidH:0),n(D)&&(D=q.offsetVoidH!=null?q.offsetVoidH:0),n(C)&&(C=q.percentVoidV!=null?q.percentVoidV:0),n(E)&&(E=q.offsetVoidV!=null?q.offsetVoidV:0),n(X)&&(X=q.minStretchFirst!=null?q.minStretchFirst:!0);var U=200,z=0,ie=0,ae=0,he=r;this.items=[];var $,G;l=="spread"?$=!0:l=="stretch"&&(G=!0),this.zimContainer_constructor(r,U),this.type="Wrapper",f=="middle"&&(f="center"),d=="middle"&&(d="center"),p=="middle"&&(p="center"),_=="middle"&&(_="center");var v=this;this.add=function(h){return this.addAt(h,this.numChildren-1),v},this.addAt=function(h,I){return n(h)||((n(I)||I<0)&&(I=0),Array.isArray(h)||(h=[h]),e.loop(h,function(Q,x){v.addChildAt(Q,I+x)}),v.resize()),v},this.remove=function(h){return Array.isArray(h)||(h=[h]),e.loop(h,function(I){I&&I.removeFrom&&I.removeFrom()},!0),v.resize(),v},this.convert=function(h,I){var Q=[];return h.loop(function(x){Q.push(x),I&&x.cache()}),v.add(Q),h.removeFrom(),v},this.resize=function(h,I){if(!v.preventResize){n(h)||(r=h),n(I)||(S=I),this.items2D=[],this.items=[],z=0,ie=0,ae=0,n(A)&&(A=0),n(D)&&(D=0);var Q=e.Pick.choose(A),x=e.Pick.choose(D);he=r*(100-Q)/100,this.setBounds(he,U);var F=0,Ae=0,Y=0;v.cols=0,v.rows=0;var K=[],ge=[0],ye=null,ee=0,ce=null,ve=e.Pick.choose(b);l!="column"&&(ve=null);var Re=e.Pick.choose(L),se=0,Oe,J;e.loop(this,function(ue,Ee){R||P?ue.pos(F+(ue.marginRight?ue.marginRight:0),Ae+(ue.marginTop?ue.marginTop:0),e.RIGHT,P?e.TOP:e.BOTTOM):ue.pos(F+(ue.marginLeft?ue.marginLeft:0),Ae+(ue.marginTop?ue.marginTop:0)),se++,ce=ue.boundsToGlobal();var Te=v.globalToLocal(ce.x,ce.y),_e=v.globalToLocal(ce.x+ce.width,ce.y+ce.height);if(R||P?Oe=v.globalToLocal(ce.x,ce.y):Oe=v.globalToLocal(ce.x+ce.width,ce.y+ce.height),ue.wrapHeight=_e.y-Te.y,ue.wrapWidth=_e.x-Te.x,Q){var We=v.globalToLocal(ce.x+ue.wrapWidth/2,ce.y+ue.wrapHeight/2);ue.centerX=We.x,ue.centerY=We.y,We=null}ve?J=ve*se:R||P?J=he-Oe.x+(ue.marginLeft?ue.marginLeft:0)+i:J=Oe.x+(ue.marginRight?ue.marginRight:0)+i,Math.round(J)-i>he&&(w(K,ye,Y,ee,ve,Q,x,!1),ee=0,v.cols==0&&(v.cols=Ee),F=0,Ae+=Y+(Re?0:e.Pick.choose(o)),Y=0,Re=e.Pick.choose(L),Q=e.Pick.choose(A),x=e.Pick.choose(D),se=0,v.items2D.push(e.copy(K)),v.rows++,ge.push(Ae),K=[],R||P?ue.pos(F+(ue.marginRight?ue.marginRight:0),Ae+(ue.marginTop?ue.marginTop:0),e.RIGHT,P?e.TOP:e.BOTTOM):ue.pos(F+(ue.marginLeft?ue.marginLeft:0),Ae+(ue.marginTop?ue.marginTop:0)),Q&&(ce=ue.boundsToGlobal(),We=v.globalToLocal(ce.x+ue.wrapWidth/2,ce.y+ue.wrapHeight/2),ue.centerX=We.x,ue.centerY=We.y,We=null),se++,ve?J=0:(J=(ue.marginLeft?ue.marginLeft:0)+ue.wrapWidth+(ue.marginRight?ue.marginRight:0)+e.Pick.choose(i),R||P?Oe.x=he-((ue.marginRight?ue.marginRight:0)+ue.wrapWidth):Oe.x=(ue.marginLeft?ue.marginLeft:0)+ue.wrapWidth)),K.push(ue),ee+=ue.wrapWidth,F=J,Re?Y=Re:Y=Math.max(Y,ue.wrapHeight+(ue.marginTop?ue.marginTop:0)+(ue.marginBottom?ue.marginBottom:0)),ye=new e.Point(Oe.x,Ae+Y)},T&&R?!1:T||R),v.numChildren>0&&(v.cols==0&&(v.cols=v.numChildren),v.items2D.push(e.copy(K)),ge.push(Ae),w(K,ye,Y,ee,ve,Q,x,!0),v.rows+=1);var xe=e.Pick.choose(d),te;n(xe)&&(xe="top"),R&&(te=Ae+Y-U,e.loop(this,function(ue){ue.mov(0,te)}),v.items2D.reverse(),e.loop(v.items2D,function(ue){ue.reverse()}));var we=e.Pick.choose(C),ke=e.Pick.choose(E);if(!n(we)){n(ke)&&(ke=0);var pe=Ae+Y,Me=pe*we/100,Ue=pe/2+ke/100*pe;e.loop(ge,function(ue,Ee){if(ue>=Ue)return e.loop(v.items2D,function(Te){e.loop(Te,function(_e){_e.mov(0,Me)})},null,1,Ee),"break"})}return n(S)||(d=="bottom"?(te=S-(Ae+Y),e.loop(this,function(ue){ue.mov(0,te)})):(d=="center"||d=="middle")&&(te=(S-(Ae+Y))/2,e.loop(this,function(ue){ue.mov(0,te)}))),v.setBounds(null),ce=v.getBounds(),ce&&v.setBounds(0,ce.y,r,ce.height),e.loop(v.items2D,function(ue){e.loop(ue,function(Ee){v.items.push(Ee)})}),this.stage&&this.stage.update(),v}};function w(h,I,Q,x,F,Ae,Y,K){var ge=e.Pick.choose(f),ye=e.Pick.choose($),ee=e.Pick.choose(G),ce=e.Pick.choose(P),ve=e.Pick.choose(p),Re=e.Pick.choose(_);n(ge)&&(ge="left"),n(Re)&&(Re="top"),n(ve)&&(ve="left"),ce&&h.reverse();var se=((100-Ae)/100/2+Y/100)*r,Oe=r*Ae/100,J=0,xe=!1,te,we;if(F){(R||P)&&h.reverse();var ke=he%F,pe=he/2+Y/100*he,Me=0,Ue=0,ue=Math.floor(he/F);v.rows!=0&&K&&(xe=!0),e.loop(h,function(oe,Ye){J=0,ve=="right"?Ue=F*Ye+Me+F-oe.wrapWidth:ve=="center"||ve=="middle"?Ue=F*Ye+Me+(F-oe.wrapWidth)/2:Ue=F*Ye+Me,te=oe.x,oe.pos(Ue),we=oe.x-te,oe.centerX+=we,oe.marginLeft&&(J+=oe.marginLeft),oe.marginRight&&(J-=oe.marginRight);var Ve;ge=="center"||ge=="middle"?(Ve=Math.floor(he/F)-h.length,J+=(ke+(Ve?Ve*F:0))/2):ge=="right"&&(Ve=Math.floor(he/F)-h.length,J+=ke+(Ve?Ve*F:0)),oe.mov(J),oe.centerX+=J}),ge=="center"&&xe&&(h.length+ue)%2!=0&&(J=(pe<=he/2?-1:1)*F/2,e.loop(h,function(oe){oe.mov(J),oe.centerX+=J}))}else if(ye||ee){var Ee,Te;ye?Ee=h.length?(he-x)/(h.length+1):0:ee&&(Ee=h.length-1>0?(he-x)/(h.length-1):0),h.length<m&&K&&(X||v.rows>0)&&(Ee=v.rows==0?i:ae,xe=!0),ae=Ee;var _e=0;if((R||P)&&h.reverse(),e.loop(h,function(oe,Ye){J=0,te=oe.x,oe.pos(Ee*(Ye+(ye?1:0))+_e),we=oe.x-te,oe.centerX+=we,xe||(oe.marginLeft&&(J+=oe.marginLeft),oe.marginRight&&(J-=oe.marginRight),oe.mov(J),oe.centerX+=J),_e+=oe.wrapWidth}),xe){J=0;var We=ye?Ee:0;we=0,e.loop(h,function(oe){if(ge=="right")te=oe.x,oe.pos(We,null,e.RIGHT),we=oe.x-te,We+=oe.wrapWidth+Ee;else if(ge=="center"){var Ye=(he-(_e+(h.length-1)*Ee))/2-(ye?Ee:0);te=oe.x,oe.pos(We+Ye,null,e.RIGHT),we=oe.x-te,We+=oe.wrapWidth+Ee}oe.marginLeft&&(J+=oe.marginLeft),oe.marginRight&&(J-=oe.marginRight),oe.mov(J),oe.centerX+=we+J},!0)}}else ge=="center"?e.loop(h,function(oe){J=((R||P?0:r)-I.x)/2,(ye||ee)&&(oe.marginLeft&&(J+=oe.marginLeft),oe.marginRight&&(J-=oe.marginRight)),oe.mov(J),oe.centerX+=J}):(R||P)&&ge=="left"?(Te=h[h.length-1].marginLeft,e.loop(h,function(oe){J=-I.x+(Te||0),ye&&(J+=ie),oe.mov(J),oe.centerX+=J})):!(R||P)&&ge=="right"?(Te=h[h.length-1].marginRight,e.loop(h,function(oe){J=r-I.x-(Te||0),ye&&(J-=ie),oe.mov(J),oe.centerX+=J})):ye&&ye&&e.loop(h,function(oe){J=ie*(ge=="right"?-1:1),oe.mov(J),oe.centerX+=J});Ae&&(se=(1/2+Y/100)*he,Oe=r*Ae/100,e.loop(h,function(oe){F||ee||ye?ge=="right"?oe.centerX>he-se&&oe.mov(Oe):ge=="center"?Math.round(oe.centerX)==Math.round(he/2+Y/100*he)?oe.mov(Oe/2):Math.round(oe.centerX)>Math.round(he/2+Y/100*he)&&oe.mov(Oe):oe.centerX>se&&oe.mov(Oe):!(R||P)&&ge=="right"?oe.centerX<r-se&&oe.mov(-Oe):!(R||P)&&ge=="center"?oe.centerX>r/2+Y/100*he?oe.mov(Oe/2):oe.mov(-Oe/2):(R||P)&&ge=="right"?oe.centerX>he-se&&oe.mov(Oe):(R||P)&&ge=="center"?oe.centerX>he/2+Y/100*he&&oe.mov(Oe):oe.centerX>se&&oe.mov(Oe)})),ye&&(z+=Ee,ie=z/(v.rows+1)),Re=="center"?e.loop(h,function(oe){oe.mov(0,(Q-oe.wrapHeight)/2*(R?-1:1))}):!R&&Re=="bottom"?e.loop(h,function(oe){oe.mov(0,Q-oe.wrapHeight-(oe.marginBottom?oe.marginBottom:0))}):R&&Re=="top"&&e.loop(h,function(oe){oe.mov(0,-(Q-oe.wrapHeight)+(oe.marginTop?oe.marginTop:0))})}Object.defineProperty(v,"spacingH",{get:function(){return i},set:function(h){i=h,this.resize()}}),Object.defineProperty(v,"spacingV",{get:function(){return o},set:function(h){o=h,this.resize()}}),Object.defineProperty(v,"wrapperType",{get:function(){return l},set:function(h){h=="spread"?$=!0:$=!1,h=="stretch"?G=!0:G=!1,l=h,this.resize()}}),Object.defineProperty(v,"align",{get:function(){return f},set:function(h){f=h,f=="middle"&&(f="center"),this.resize()}}),Object.defineProperty(v,"valign",{get:function(){return d},set:function(h){d=h,d=="middle"&&(d="center"),this.resize()}}),Object.defineProperty(v,"alignInner",{get:function(){return p},set:function(h){p=h,p=="middle"&&(p="center"),this.resize()}}),Object.defineProperty(v,"valignInner",{get:function(){return _},set:function(h){_=h,_=="middle"&&(_="center"),this.resize()}}),Object.defineProperty(v,"colSize",{get:function(){return b},set:function(h){b=h,l=="column"&&this.resize()}}),Object.defineProperty(v,"rowSize",{get:function(){return L},set:function(h){L=h,this.resize()}}),Object.defineProperty(v,"flip",{get:function(){return P},set:function(h){P=h,this.resize()}}),Object.defineProperty(v,"reverse",{get:function(){return T},set:function(h){T=h,this.resize()}}),Object.defineProperty(v,"bottomFull",{get:function(){return R},set:function(h){R=h,this.resize()}}),Object.defineProperty(v,"percentVoidH",{get:function(){return A},set:function(h){A=h,this.resize()}}),Object.defineProperty(v,"offsetVoidH",{get:function(){return D},set:function(h){D=h,this.resize()}}),Object.defineProperty(v,"percentVoidV",{get:function(){return C},set:function(h){C=h,this.resize()}}),Object.defineProperty(v,"offsetVoidV",{get:function(){return E},set:function(h){E=h,this.resize()}}),n(t)||v.add(t),Z!==!1&&e.styleTransforms(this,q),this.clone=function(){var h=v.cloneProps(new e.Wrapper(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,this.style,this.group));return h}},e.extend(e.Wrapper,e.Container,"clone","zimContainer",!1),e.Tile=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$){var G="obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, scaleToH, scaleToV, scaleToType, backgroundColor, backing, backdropColor, backdropPadding, backdropPaddingH, backdropPaddingV, mat, style, group, inherit",v;if(v=mt(e.Tile,arguments,G,this))return v;qe("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=he;var w=ae===!1?{}:e.getStyle(this.type,this.group,$);n(t)&&(t=w.obj!=null?w.obj:new e.Circle),n(r)&&(r=w.cols!=null?w.cols:1121),n(i)&&(i=w.rows!=null?w.rows:1121);var h;r==1121&&i==1121?r=i=h=3:r==1121?r=1:i==1121&&(i=1),n(f)&&(f=w.unique!=null?w.unique:!1),n(d)&&(d=w.width!=null?w.width:null),n(p)&&(p=w.height!=null?w.height:null),n(T)&&(T=w.colSize!=null?w.colSize:null),n(R)&&(R=w.rowSize!=null?w.rowSize:null),n(d)||(T=null),n(p)||(R=null),n(o)&&(o=w.spacingH!=null?w.spacingH:h?3:null),n(l)&&(l=w.spacingV!=null?w.spacingV:h?3:null);var I=o,Q=l;(n(o)||!n(T)||!n(d))&&(o=0),(n(l)||!n(R)||!n(p))&&(l=0),n(_)&&(_=w.squeezeH!=null?w.squeezeH:!1),n(P)&&(P=w.squeezeV!=null?w.squeezeV:!1),n(b)&&(b=w.align!=null?w.align:"left"),n(L)&&(L=w.valign!=null?w.valign:"top"),n(S)&&(S=w.count!=null?w.count:f&&Array.isArray(t)?t.length:null),S===0&&(S=null,kt&&ht("ZIM Tile() - count parameter of 0 is ignored - see docs")),n(k)&&(k=w.mirrorH!=null?w.mirrorH:!1),n(m)&&(m=w.mirrorV!=null?w.mirrorV:!1),n(A)&&(A=w.snapToPixel!=null?w.snapToPixel:!0),A&&(t&&t.stage?t.stage.snapToPixelEnabled=!0:typeof elem<"u"&&fe.zdf&&(fe.zdf.stage.snapToPixelEnabled=!0)),n(D)&&(D=w.clone!=null?w.clone:f?!1:null),D==null&&(D=!(typeof t=="function"&&t.type!="series")),n(C)&&(C=w.events!=null?w.events:!0),n(X)&&(X=w.scaleToH!=null?w.scaleToH:null),n(Z)&&(Z=w.scaleToV!=null?w.scaleToV:null),n(V)&&(V=w.scaleToType!=null?w.scaleToType:null),n(O)&&(O=w.backgroundColor!=null?w.backgroundColor:null),n(ne)&&(ne=w.backing!=null?w.backing:null),n(N)&&(N=w.backdropColor!=null?w.backdropColor:null),n(q)&&(q=w.backdropPadding!=null?w.backdropPadding:null),n(U)&&(U=w.backdropPaddingH!=null?w.backdropPaddingH:n(N)?null:q||o),n(z)&&(z=w.backdropPaddingV!=null?w.backdropPaddingV:n(N)?null:q||l),(z||U)&&(q=!0),n(ie)&&(ie=w.mat!=null?w.mat:!1);var x=this;x.cols=r=Math.round(r),x.rows=i=Math.round(i),x.spacingH=o,x.spacingV=l,x.squeezeH=_,x.squeezeV=P;var F=typeof b=="function",Ae=typeof L=="function";x.align=F?"left":b,x.valign=Ae?"top":L,x.mirrorH=k,x.mirrorV=m,x.items=[];var Y,K=0,ge=!1;e:for(var ye=0;ye<i;ye++)for(var ee=0;ee<r;ee++){if(K++,!n(S)&&K>S)break e;Y=f?t[K-1]:e.Pick.choose(t),typeof Y=="string"&&(Y=fe.asset(Y).centerReg({add:!1}).clone()),n(Y)&&(Y=new e.Container(0,0,0,0)),D&&(ye!=0||ee!=0)&&(Y=Y.clone(E)),C&&Y.on("change",function(me){var $e=new je.Event("change");$e.item=me.currentTarget,x.dispatchEvent($e)}),x.items.push(Y),Y.type=="AC"&&(ge=!0),Y.tileNum=K-1,Y.tileCol=ee,Y.tileRow=ye}ge&&kt&&ht("ZIM Tile - assets must have dimensions for Tile");var ce,ve,Re,se,Oe,J,xe,te,we,ke,pe,Me,Ue,ue;function Ee(){x.removeAllChildren(),ce=[],ve=[],Re=[],se=[],Oe=[],J=0,xe=0,te=0,we=0,ke=[],pe=[],Me=[],ue=[],Ue=[],(!x.items||!x.items.length)&&(x.items=[]),S=x.items.length;var me=0,$e,st,Je=0,rt=0,Ce,ze;for(st=0;st<S;st++)Je=Math.floor(st/x.cols),rt=st%x.cols,n(ce[Je])&&(ce[Je]=[]),n(x.items[st])&&(x.items[st]=new e.Container(0,0,0,0)),ce[Je][rt]=x.items[st];x.rows=Math.max(1,ce.length),x.cols=Math.max(1,n(ce[0])?0:ce[0].length);e:for(Je=0;Je<x.rows;Je++)for(ke.push([]),pe.push([]),ue.push([]),R&&n(p)&&(Ce=e.Pick.choose(R)),st=0;st<x.cols;st++){if(me++,!n(S)&&me>S)break e;$e=ce[Je][st],$e.snapToPixel=A,x.addChild($e),ke[Je].push($e.scaleX),pe[Je].push($e.scaleY),T&&n(d)&&(ze=e.Pick.choose(T)),Je==0&&Ue.push(e.Pick.choose(b)),(!T||!n(d))&&(ze=Math.abs($e.width)),(!R||!n(p))&&(Ce=Math.abs($e.height)),ue[Je][st]=[ze,Ce],n(se[st])&&(se[st]=0),n(Oe[Je])&&(Oe[Je]=0),ze>se[st]&&(se[st]=ze),Ce>Oe[Je]&&(Oe[Je]=Ce),n(ve[Je])&&(ve[Je]=0),n(Re[st])&&(Re[st]=0),ve[Je]+=ze,Re[st]+=Ce,ve[Je]>J&&(J=ve[Je]),Re[st]>xe&&(xe=Re[st]),n(Me[st])&&(Me[st]=0),Me[st]++}var Xe;if(x.squeezeH===!1)for(st=0;st<se.length;st++)Xe=se[st],te+=Xe;if(x.squeezeV===!1)for(st=0;st<Oe.length;st++)Xe=Oe[st],we+=Xe}Ee();var Te=te,_e=we,We,oe,Ye,Ve,De=1,de=1;function Be(me,$e){!n(N)&&q&&(me-=Math.max(U*2,0),$e-=Math.max(z*2,0)),me<=0&&(me=null),$e<=0&&($e=null),!n(me)&&x.squeezeH=="full"?We=me:n(me)?te>0?We=te+(x.cols-1)*x.spacingH:We=J+(x.cols-1)*x.spacingH:X?We=me:We=Math.max(J+(x.cols-1)*x.spacingH,me),!n($e)&&x.squeezeV=="full"?oe=$e:n($e)?we>0?oe=we+(x.rows-1)*x.spacingV:oe=xe+(x.rows-1)*x.spacingV:Z?oe=$e:oe=Math.max(xe+(x.rows-1)*x.spacingV,$e),x.setBounds(0,0,We,oe),De=(We-(x.cols-1)*I)/Te,de=(oe-(x.rows-1)*Q)/_e;var st,Je;Ye=[],Ve=[];var rt=[];for(ye=0;ye<ce.length;ye++)for(st=ce[ye],Je=0,ee=0;ee<st.length;ee++){Y=st[ee];var Ce,ze;if(ye==0&&(Ye[ee]=0,n($e)||(x.squeezeV=="full"?Ve[ee]=Me[ee]>1?($e-Re[ee])/(Me[ee]-1):0:x.squeezeV?Ve[ee]=Me[ee]>1?Math.max(x.spacingV,($e-Re[ee])/(Me[ee]-1)):0:Ve[ee]=Me[ee]>1?Math.max(x.spacingV,(oe-Re[ee])/(Me[ee]-1)):0),x.squeezeV?x.valign=="center"||x.valign=="middle"?rt[ee]=(oe-(Re[ee]+(Me[ee]-1)*(n($e)?x.spacingV:Ve[ee])))/2:x.valign=="bottom"?rt[ee]=oe-(Re[ee]+(Me[ee]-1)*(n($e)?x.spacingV:Ve[ee])):rt[ee]=0:rt[ee]=0),ee==0){n(me)||(x.squeezeH=="full"?ze=st.length>1?(me-ve[ye])/(st.length-1):0:x.squeezeH?ze=st.length>1?Math.max(x.spacingH,(me-ve[ye])/(st.length-1)):0:ze=st.length>1?Math.max(x.spacingH,(We-ve[ye])/(st.length-1)):0),x.squeezeH?x.align=="center"||x.align=="middle"?Ce=(We-(ve[ye]+(st.length-1)*(n(me)?x.spacingH:ze)))/2:x.align=="right"?Ce=We-(ve[ye]+(st.length-1)*(n(me)?x.spacingH:ze)):Ce=0:Ce=0;var Xe=e.Pick.choose(L)}b=Ue[ee];var Ze=ue[ye][ee][0],ot=ue[ye][ee][1];x.mirrorH&&ee%2==1&&(Y.scaleX=-ke[ye][ee]),Y.pos(Je,null),!x.squeezeH&&F?n(me)&&(b=="center"||b=="middle")?Y.x+=(se[ee]-Y.width)/2:n(me)&&b=="right"&&(Y.x+=se[ee]-Y.width):x.squeezeH?n(me)&&(x.align=="center"||x.align=="middle")?Y.x+=(Ze-Y.width)/2:n(me)&&x.align=="right"&&(Y.x+=Ze-Y.width):n(me)&&(x.align=="center"||x.align=="middle")?Y.x+=(se[ee]-Y.width)/2:n(me)&&x.align=="right"&&(Y.x+=se[ee]-Y.width),x.mirrorV&&ye%2==1&&(Y.scaleY=-pe[ye][ee]),Y.pos(null,Ye[ee]),!x.squeezeV&&Ae?n($e)&&(Xe=="center"||Xe=="middle")?Y.y+=(Oe[ye]-Y.height)/2:n($e)&&Xe=="bottom"&&(Y.y+=Oe[ye]-Y.height):x.squeezeV?n($e)&&(x.valign=="center"||x.valign=="middle")?Y.y+=(ot-Y.height)/2:n($e)&&x.valign=="bottom"&&(Y.y+=ot-Y.height):n($e)&&(x.valign=="center"||x.valign=="middle")?Y.y+=(Oe[ye]-Y.height)/2:n($e)&&x.valign=="bottom"&&(Y.y+=Oe[ye]-Y.height),x.squeezeH===!0||!n(me)?Je+=Ze+(n(me)?x.spacingH:ze):Je+=se[ee]+(n(me)?x.spacingH:ze),Y.x+=Ce,Y.y+=rt[ee],x.squeezeV===!0||!n($e)?Ye[ee]+=ot+(n($e)?x.spacingV:Ve[ee]):Ye[ee]+=Oe[ye]+(n($e)?x.spacingV:Ve[ee])}}Be(d,p),this.itemUnderPoint=function(me,$e,st){if(n(st)&&(st=!0),!(n(me)||n($e))){var Je=x.globalToLocal(me,$e);me=Je.x,$e=Je.y;var rt=0,Ce=e.loop(se,function(Ze,ot){if(rt+=Ze+x.spacingH,(!st||st=="vertical")&&me>rt-x.spacingH&&me<rt)return!1;if(me<rt-x.spacingH/2)return ot});if(Ce!==!1&&(Ce===!0&&(Ce=r-1),!(me<0||me>We||$e<0||$e>oe))){var ze=0,Xe=e.loop(Oe,function(Ze,ot){var Ge=n(p)?x.spacingV:Ve[ee];if((!st||st=="horizontal")&&$e>ze-Ge&&$e<ze)return!1;if(ze+=Ze+Ge,$e<ze-Ge/2)return ot});if(Xe!==!1)return Xe===!0&&(Xe=i-1),x.items2D[Xe][Ce]}}},this.remake=function(me){return n(me)||(x.items=me),Ee(),Be(d,p),Fe(!0),x},this.resize=function(me,$e){return n(me)&&(me=d),n($e)&&($e=p),d=me,p=$e,Be(me,$e),Fe(!0),x};function Qe(me){for(var $e=[],st,Je=0;Je<me.length;Je++)Je%x.cols==0&&(st=[],$e.push(st)),st.push(me[Je]);return $e}function Ke(me){var $e=[],st;for(st=0;st<x.cols;st++)$e.push([]);for(st=0;st<me.length;st++)$e[st%x.cols][Math.floor(st/x.cols)]=me[st];return $e}Object.defineProperty(this,"items2D",{get:function(){return Qe(x.items)},set:function(){kt&&ht("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return Ke(x.items)},set:function(){kt&&ht("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var me=[];return e.loop(x.items,function($e){var st=$e.getBounds(),Je=$e.x-$e.regX+st.x+st.width/2,rt=$e.y-$e.regY+st.y+st.height/2,Ce=x.hitTestGrid(x.width,x.height,x.cols,x.rows,Je,rt,null,null,x.spacingH,x.spacingV,!0,"open");Ce!=null&&(me[Ce[0]]=$e)}),me},set:function(){kt&&ht("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return Qe(x.current)},set:function(){kt&&ht("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return Ke(x.current)},set:function(){kt&&ht("Tile() - current2DCols is read only")}});var lt,gt,He,it,ft,Se;function Fe(me){if(me&&(it&&it.removeFrom(),ie&&ie.removeFrom()),!n(O)||ne||X||Z){!me&&(X||Z)&&(ft=[],Se=[]),(!me||n(O))&&(lt=[]),!me&&!n(O)&&(He=[]),!me&&ne&&(gt=[]);var $e=(T?I:0)/2,st=(R?Q:0)/2,Je,rt=0;if(e.loop(x.items2D,function(ze,Xe){e.loop(ze,function(Ze,ot){var Ge=black;if(n(O)||(me&&!n(O)?(Ge=He[rt],Je=lt[rt].siz(se[ot]*De-(T?I:0),Oe[Xe]*de-(R?Q:0)).loc($e,st,x,0)):(Ge=dt(O),He.push(O),Je=new e.Rectangle({width:se[ot]*De-(T?I:0),height:Oe[Xe]*de-(R?Q:0),color:Ge,style:!1,scaleDimensions:!1,strokeObj:{ignoreScale:!0},group:"background"}).loc($e,st,x,0),lt.push(Je)),Ze.pos(0,0,b,L,Je).addTo(x)),$e=Je.x+Je.width+I,X||Z){var et,pt;if(me)et=ft[rt],pt=Se[rt];else{var et=dt(X)||100,pt=dt(Z)||100;ft.push(et),Se.push(pt)}Ze.scaleTo(Je,et,pt,V).pos(0,0,b,L,Je).addTo(x)}if(ne){var Le;me?Le=gt[rt]:Le=dt(ne).clone(null,!1),gt.push(Le),Le.pos(0,0,b,L,Je).addTo(x)}rt++}),$e=(T?I:0)/2,st+=Je.height+Q}),ne&&!n(O)&&e.loop(gt,function(ze){ze.addTo(x,lt.length)},!0),n(O)?(e.loop(lt,function(ze){ze.dispose()},!0),lt=null,He=null):(x.backgrounds=lt,x.backgroundColors=He),!n(O)&&(T||R)){x.loop(function(ze){ze.mov(T?-I/2:0,R?-Q/2:0)});var Ce=x.getBounds();x.setBounds(Ce.x,Ce.y,Ce.width-(T?I:0)*r,Ce.height-(R?Q:0)*i),Ce=x.getBounds()}ne&&(x.backings=gt)}if(ie&&(x.mat=ie,ie.center(x,0)),N){var Ce=x.getBounds();it=x.backdrop=new e.Rectangle({width:Ce.width+U*2,height:Ce.height+z*2,color:N,style:!1,group:"backdrop"}),it.center(x,0),x.loop(function(Xe){Xe.mov(Math.max(0,U),Math.max(z,0))}),x.setBounds(0,0,Ce.width+Math.max(0,U)*2,Ce.height+Math.max(z,0)*2)}}Fe(),ae!==!1&&e.styleTransforms(this,w),this.clone=function(me){if(me){var $e=[];if(O)var st=[];if(ne)var Je=[];for(var rt=0;rt<x.items.length;rt++)$e.push(x.items[rt].clone(!0)),O&&st.push(He[rt]),ne&&Je.push(gt[rt].clone(!0))}return x.cloneProps(new e.Tile(me&&$e?e.series($e):t.clone?t.clone():t,x.cols,x.rows,x.spacingH,x.spacingV,me?!1:f,d,p,x.squeezeH,x.squeezeV,T,R,b,L,x.items.length,x.mirrorH,x.mirrorV,A,me?!1:D,C,me,X,Z,V,me&&st?e.series(st):O,me&&Je?e.series(Je):ne&&ne.clone?ne.clone():ne,N,q,U,z,ie&&ie.clone?ie.clone():ie,this.style,this.group))}},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.Pack=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O){var ne="width, height, items, spacingH, spacingV, flatten, direction, lock, backgroundColor, align, valign, lastAlign, paddingH, paddingV, dragOrder, dragColor, dragThickness, dragDashed, reverse, funnel, showPacking, order, style, group, inherit",N;if(N=mt(e.Pack,arguments,ne,this))return N;qe("66.52"),this.group=V;var q=Z===!1?{}:e.getStyle("Pack",this.group,O);n(t)&&(t=q.width!=null?q.width:500),n(r)&&(r=q.height!=null?q.height:500),this.zimContainer_constructor(t,r),this.type="Pack",n(i)&&(i=q.items!=null?q.items:[new e.Rectangle(400,300,e.orange),new e.Rectangle(400,200,e.purple),new e.Rectangle(500,300,e.blue)]),n(o)&&(o=q.spacingH!=null?q.spacingH:10),n(l)&&(l=q.spacingV!=null?q.spacingV:10),n(f)&&(f=q.flatten!=null?q.flatten:"top"),n(d)&&(d=q.direction!=null?q.direction:"horizontal"),n(p)&&(p=q.lock!=null?q.lock:"auto"),n(_)&&(_=q.backgroundColor!=null?q.backgroundColor:e.clear),n(P)&&(P=q.align!=null?q.align:"center"),n(T)&&(T=q.valign!=null?q.valign:"center"),n(R)&&(R=q.lastAlign!=null?q.lastAlign:d=="horizontal"?"left":"top"),n(b)&&(b=q.paddingH!=null?q.paddingH:0),n(L)&&(L=q.paddingV!=null?q.paddingV:0),n(S)&&(S=q.dragOrder!=null?q.dragOrder:!1),n(k)&&(k=q.dragColor!=null?q.dragColor:e.white),n(m)&&(m=q.dragThickness!=null?q.dragThickness:2),n(A)&&(A=q.dragDashed!=null?q.dragDashed:!0),n(D)&&(D=q.reverse!=null?q.reverse:!1),n(C)&&(C=q.funnel!=null?q.funnel:!1),n(E)&&(E=q.showPacking!=null?q.showPacking:!1),n(X)&&(X=q.order!=null?q.order:null);var U=this;U.funnel=C;var z=i.length,ie=t-b*2,ae=r-L*2,he=50;f===!1&&(f=NONE);var $=this.backing=new Sn({width:t,height:r,color:_,scaleDimensions:!1}).addTo(this);if(U.items=e.copy(i),i.length<=0)return this;if(i.length==1)return v(i[0]),w(i[0]),this;var G=function(_e,We,oe){return _e.width>We.width?1:_e.width<We.width?-1:0};function v(_e){_e.scaleTo($,100-b/ie*100*2,100-L/ae*100*2),_e.scale*=U.scale,_e.scale<0&&(_e.scale=.05)}function w(_e){_e.pos(P!=CENTER&&P!=MIDDLE?b:0,T!=CENTER&&T!=MIDDLE?L:0,P,T,$).addTo(U)}function h(_e){var We=[];e.loop(_e,function(oe,Ye){We[Ye]=U.items[oe]}),i=[],e.loop(We,function(oe){oe&&i.push(oe)})}var I=U.content=new e.Container,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe;e.loop(i,function(_e,We){_e.zpRotation=_e.rotation,_e.zpIndex=We}),X&&h(X),d==VERTICAL&&J(!0);function J(_e){I.rotation=0;var We=r;r=t,t=We;var oe=ae;ae=ie,ie=oe;var Ye=l;l=o,o=Ye;var Ve=L;L=b,b=Ve,f==RIGHT?f=BOTTOM:f!=CENTER&&f!=NONE&&(f=TOP),R==BOTTOM?R=LEFT:R!=CENTER&&R!=MIDDLE&&(R=RIGHT),$.dispose(),$=new Sn(t,r,_).center(U),_e?(p==HORIZONTAL?p=VERTICAL:p==VERTICAL&&(p=HORIZONTAL),e.loop(i,function(De,de){var Be=new e.Container(De.height,De.width);De.rotation+=90,De.pos(0,0,TOP,LEFT,Be),i[de]=Be})):(p==HORIZONTAL?p=VERTICAL:p==VERTICAL&&(p=HORIZONTAL),I.rotation-=90,e.loop(i,function(De,de){var Be=De,Qe=De.getChildAt(0).addTo(I).sca(Be.scale);Be.dispose(),i[de]=Qe}))}var xe=p;function te(_e){p==AUTO&&(p=HORIZONTAL),Q=Math.ceil(Math.sqrt(z)),x=Math.ceil(z/Q),Y=null,K=null,ge=0,Oe=null,ye=0,ee=0,ce=null,ve=null,Re=null,se=null,Te(_e,Q,x),Ee(I,Q,x)}te(i),we();function we(){if(v(I),w(I),f==NONE){e.loop(i,function(Ye){Ye.surrogate?(i.splice(i.indexOf(Ye),1),Ye.dispose()):Ye.bot()},!0);var _e=x*Q-z;if(f==NONE&&_e>0){var We=I.getChildAt(I.numChildren-1);if(d==HORIZONTAL&&!D&&R!=LEFT){var oe=I.getBounds().width-(We.x+(We.getBounds().x-We.regX)*We.scaleX+We.width);e.loop(Q-_e,function(Ye){I.getChildAt(I.numChildren-Ye-1).mov(R==RIGHT?oe:oe/2)})}else if(d==HORIZONTAL&&D&&R!=RIGHT){var oe=We.x+(We.getBounds().x-We.regX)*We.scaleX;e.loop(Q-_e,function(Ve){I.getChildAt(I.numChildren-Ve-1).mov(R==LEFT?-oe:-oe/2)})}else if(d==VERTICAL&&!D&&R!=RIGHT){var oe=We.x;e.loop(Q-_e,function(Ve){I.getChildAt(I.numChildren-Ve-1).mov(R==LEFT?-oe:-oe/2)})}else if(d==VERTICAL&&D&&R!=LEFT){var oe=I.getBounds().width-We.x;e.loop(Q-_e,function(Ve){I.getChildAt(I.numChildren-Ve-1).mov(R==RIGHT?oe:oe/2)})}}}d==VERTICAL&&(J(!1),v(I),w(I)),U.cols=Q,U.rows=x,U.iterations=ge-2,U.currentItems=i,U.dispatchEvent("change")}var ke,pe,Me;S&&U.added(Ue);function Ue(){ue(),Me=Math.min(30,d==HORIZONTAL?I.height/x/3*U.scale*I.scale:I.width/Q/3*U.scale*I.scale),ke?ke.siz(Me,Me).reg(CENTER):ke=U.beacon=new e.Rectangle({width:Me,height:Me,borderColor:k,borderWidth:m,scaleDimensions:!1}).reg(CENTER).rot(45),pe||(pe=U.ghost=new e.Rectangle({width:100,height:100,borderColor:k,borderWidth:m,dashed:A,scaleDimensions:!1}).reg(CENTER));var _e,We,oe,Ye;U.mdEvent=U.on("mousedown",function(Ve){if(oe=Ve.target,ke.top(),_e=null,!(i.indexOf(oe)<0)){Ye=U.localToGlobal(U.getBounds().x,U.getBounds().y);var De=oe.boundsToGlobal();U.ghost.siz(De.width,De.height).reg(CENTER).loc(De.x+pe.width/2,De.y+pe.height/2,U.stage),pe.diffX=U.stage.frame.mouseX-pe.x,pe.diffY=U.stage.frame.mouseY-pe.y,We=I.getChildIndex(oe),U.stage.update()}}),U.pmEvent=U.on("pressmove",function(){if(pe.parent){var Ve=U.stage.frame;pe.loc(Ve.mouseX-pe.diffX,Ve.mouseY-pe.diffY);var De=U.getObjectUnderPoint((pe.x-Ye.x)/U.scaleX,(pe.y-Ye.y)/U.scaleY,1);if(i.indexOf(De)>=0){var de=De.boundsToGlobal();d==HORIZONTAL?pe.x>=de.x+de.width/2?(ke.loc(de.x+de.width+o/2*U.scaleX*I.scaleX,de.y+de.height/2,U.stage),_e=I.getChildIndex(De)+(D?0:1)):(ke.loc(de.x-o/2*U.scaleX*I.scaleX,de.y+de.height/2,U.stage),_e=I.getChildIndex(De)+(D?1:0)):pe.y>=de.y+de.height/2?(ke.loc(de.x+de.width/2,de.y+de.height+l/2,U.stage),_e=I.getChildIndex(De)+(D?0:1)):(ke.loc(de.x+de.width/2,de.y-l/2,U.stage),_e=I.getChildIndex(De)+(D?1:0))}U.stage.update()}}),U.puEvent=U.on("pressup",function(){pe.parent&&(_e!=null&&(_e>We&&_e--,_e!=We&&(oe.level=_e,i=[],I.loop(function(Ve,De){i.push(Ve.rot(Ve.zpRotation||0).sca(1))}),p=xe,d==VERTICAL&&J(!0),te(i),we())),pe.removeFrom(),ke.removeFrom(),U.stage.update())})}function ue(){U.mdEvent&&U.off("mousedown",U.mdEvent),U.pmEvent&&U.off("pressmove",U.pmEvent),U.puEvent&&U.off("pressup",U.puEvent),ke&&ke.removeFrom(),pe&&pe.removeFrom()}function Ee(_e,We,oe){if(_e.scale=1,ge++>20){Oe&&Oe.clear();return}var Ye=!1;if(_e.height>ae){if(F=We+1,Ae=Math.ceil(z/F),We==K&&p==VERTICAL)if(ee>ye)F=ve,Ae=se,Ye=!0;else return _e}else if(_e.height<=ae&&(F=Math.max(We-1,1),Ae=Math.ceil(z/F),We==K&&p==HORIZONTAL))if(ee>ye)F=ve,Ae=se,Ye=!0;else return _e;if(K=Y,Y=Q,Q=F,x=Ae,e.loop(i,function(Ve){f==NONE&&Ve.surrogate?(i.splice(i.indexOf(Ve),1),Ve.dispose()):Ve.siz(null,ae)},!0),Te(i,Q,x),ee=ye,ve=ce,se=Re,xe==AUTO||p==HORIZONTAL&&Math.round(_e.width)==ie||p==VERTICAL&&Math.round(_e.height)==ae?ye=_e.width*_e.height:ye=0,ce=Q,Re=x,Ye){Oe&&Oe.clear(),w(_e),U.stage&&U.stage.update();return}E?(Oe=si(1,function(){Ee(_e,Q,x)}),w(_e),U.stage&&U.stage.update(),_e.sca(1)):(_e.sca(1),Ee(_e,Q,x))}function Te(_e,We,oe){var Ye=0;e.loop(_e,function(He,it){He.siz(null,he),Ye+=He.width});var Ve=Ye/z,De=_e;z%We!=0&&f==NONE&&e.loop(We-z%We,function(){var He=new e.Rectangle(Ve,he,grey);He.surrogate=!0,De.push(He)});var de=new li(De,We,oe,0,0,!0),Be=[],Qe=e.copy(de.items2D);if(f!=NONE&&We*oe!=z&&Qe.length>1){var Ke;if(f==BOTTOM)Ke=U.funnel?Math.floor((We*oe-z)/2):Math.ceil((We*oe-z)/2),e.loop(Ke,function(He){Qe[oe-1].unshift(Qe[oe-2].pop())});else{var lt=We*oe-z;e.loop(Qe,function(He,it,ft){it!=ft-1&&e.loop(He.splice(-lt,lt),function(Se){Qe[it+1].unshift(Se)},!0)}),Ke=U.funnel?Math.floor((We*oe-z)/2):Math.ceil((We*oe-z)/2),e.loop(Ke,function(He){Qe[0].push(Qe[1].shift())})}}e.loop(Qe,function(He,it,ft){var Se=0;e.loop(He,function(st){Se+=st.width});var Fe=(ie-o*(He.length-1))/Se;e.loop(He,function(st){st.scale*=Fe});var me=e.copy(He);(D&&d==HORIZONTAL||!D&&d==VERTICAL)&&me.reverse();var $e=new li(me,He.length,1,o,0,!0);D&&$e.loop(function(st){st.bot()}),Be.push($e)}),de.dispose();var gt=0;return I.loc($,null,U),I.removeAllChildren(),e.loop(Be,function(He){He.loc(0,gt,I),gt+=He.height+l,He.loop(function(it,ft,Se){it.addTo(I).ord(-(Se-ft))},!0)}),e.loop(Be,function(He){He.dispose()},!0),v(I),I}U.getOrder=function(_e){if(n(_e)&&(_e=!1),_e){if(!We){var We=U.pane=new e.Pane({displayClose:!1,container:U.stage,width:Math.min(500,U.stage.width-20),height:Math.min(500,U.stage.height-20),draggable:!0}),oe=U.textArea=new e.TextArea(Math.min(400,U.stage.width-70),Math.min(400,U.stage.height-70));oe.centerReg(We)}We.show(),oe.text=JSON.stringify(U.order)}return U.order},this.setOrder=function(_e){return h(_e),te(i),we(),U},this.addAt=function(_e,We){return n(_e)||(n(We)&&(We=U.items.length),Array.isArray(_e)||(_e=[_e]),e.loop(_e,function(oe,Ye){U.items.push(oe),oe.zpIndex=U.items.length-1,U.currentItems.splice(We+Ye,0,oe)}),te(U.currentItems),we()),U},this.removeAt=function(_e,We){n(_e)&&(_e=1),n(We)&&(We=U.items.length);var oe=U.currentItems.splice(We,_e);return e.loop(oe,function(Ye){var Ve=U.items.indexOf(Ye);U.items.splice(Ve,1)}),te(U.currentItems),we(),U},Object.defineProperty(U,"order",{get:function(){var _e=[];return I.loop(function(We){_e.push(We.zpIndex)}),_e},set:function(_e){U.setOrder(_e)}}),Object.defineProperty(U,"lock",{get:function(){return xe},set:function(_e){_e!=xe&&(p=_e,te(i),we(),S&&Ue())}}),Object.defineProperty(U,"direction",{get:function(){return d},set:function(_e){_e!=d&&(d=_e,I.rotation=0,i=[],I.loop(function(We,oe){i.push(We.rot(We.zpRotation||0).sca(1))}),d==VERTICAL&&J(!0),te(i),we(),S&&Ue())}}),Object.defineProperty(U,"spacing",{get:function(){return d==VERTICAL?l:o},set:function(_e){o=l=_e,te(i),we()}}),Object.defineProperty(U,"outerWidth",{get:function(){return t},set:function(_e){t!=_e&&(t=_e,ie=t-b*2,$&&($.widthOnly=t,$.center(U)),te(i),we(),S&&Ue())}}),Object.defineProperty(U,"outerHeight",{get:function(){return r},set:function(_e){r!=_e&&(r=_e,ae=r-L*2,$&&($.heightOnly=r,$.center(U)),te(i),we(),S&&Ue())}}),Object.defineProperty(U,"flatten",{get:function(){return f},set:function(_e){f!=_e&&(f=_e,te(i),we())}}),Object.defineProperty(U,"dragOrder",{get:function(){return S},set:function(_e){_e?Ue():(ue(),U.stage&&U.stage.update())}}),Z!==!1&&e.styleTransforms(this,q),this.dispose=function(_e){return S&&ue(),U.items=null,U.currentItems=null,_e||this.zimContainer_dispose(!0),!0},this.clone=function(){return U.cloneProps(new e.Pack(t,r,e.copy(i,!0),o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,e.copy(U.order),this.style,this.group))}},e.extend(e.Pack,e.Container,["dispose","clone"],"zimContainer",!1),e.Beads=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S){var k="path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",m;if(m=mt(e.Beads,arguments,k,this))return m;qe("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=b;var A=L===!1?{}:e.getStyle(this.type,this.group,S);n(p)&&(p=A.onTop!=null?A.onTop:!1),n(_)&&(_=A.showControls!=null?A.showControls:!1),n(P)&&(P=A.visible!=null?A.visible:!0),n(T)&&(T=A.interactive!=null?A.interactive:!0),n(t)&&(t=A.path!=null?A.path:new e.Blob({color:null,borderWidth:3,borderColor:e.blue})),t.visible=P,t.interactive=T,t.toggle(_),t.onTop=p,n(r)&&(r=A.obj!=null?A.obj:new e.Circle(10)),n(i)&&(i=A.count!=null?A.count:10),n(o)&&(o=A.angle!=null?A.angle:null),n(l)&&(l=A.startPercent!=null?A.startPercent:0),n(f)&&(f=A.endPercent!=null?A.endPercent:100),n(d)&&(d=A.percents!=null?A.percents:null);var D=f;f<l&&(D=100+f);var C;if(n(d)){var E;t.type=="Squiggle"?E=(D-l)/(i-1):E=(D-l)/(i-(l!=D%100?1:0)),d=[];var X=l-E;for(C=0;C<i;C++)d.push(X+E),X+=E,X>100&&(X-=100)}n(R)&&(R=A.clone!=null?A.clone:!0);var Z=this;Z.count=i,Z.percents=d,Z.items=[];var V;for(C=0;C<i;C++)V=e.Pick.choose(r),R&&C!=0&&(V=V.clone()),V.beadNum=C,V.startPercent=d[C],Z.items.push(V);Z.path=t.addTo(Z),Z.beads=new e.Container().addTo(Z,p?0:null),Z.beads.type="BeadsContainer",this.resize=function(){for(var O=t.segmentRatios,ne=t.segmentPoints,N=0;N<Z.count;N++){var q=t.getCurvePoint(Math.max(0,Math.min(.9999,d[N]/100)),O,ne,!0);if(q){var U=Z.beads.globalToLocal(q.x,q.y);U&&Z.items[N].loc(U,null,Z.beads).rot(n(o)?q.angle>180?q.angle-360+t.rotation:q.angle+t.rotation:o)}}return this},Z.resize(),T&&(t.on("pressmove",Z.resize),t.on("update",Z.resize)),L!==!1&&e.styleTransforms(this,A),this.dispose=function(O){return O||this.zimContainer_dispose(!0),Z.items=[],!0},this.clone=function(O){if(O)for(var ne=[],N=0;N<Z.items.length;N++)ne.push(Z.items[N].clone(!0));return Z.cloneProps(new e.Beads(t.clone(),O?e.series(ne):r.clone?r.clone():r,Z.count,o,l,f,d,p,_,P,T,R,this.style,this.group))}},e.extend(e.Beads,e.Container,["clone","dispose"],"zimContainer",!1),e.Layout=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",L;if(L=mt(e.Layout,arguments,b,this))return L;qe("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=T;var S=P===!1?{}:e.getStyle(this.type,this.group,R);if(n(t)&&(t=S.holder!=null?S.holder:null),n(p)&&(p=S.scalingObject!=null?S.scalingObject:null),n(t)||!t.getBounds){qn("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");return}if(p=n(p)?t:p,!p.getBounds||!p.getBounds()){qn("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");return}var k=p.getBounds();t.setBounds(0,0,k.width,k.height),n(i)&&(i=S.lastMargin!=null?S.lastMargin:0),n(o)&&(o=S.lastMarginMin!=null?S.lastMarginMin:0),n(f)&&(f=S.vertical!=null?S.vertical:!0),n(l)&&(l=S.backgroundColor!=null?S.backgroundColor:""),n(_)&&(_=S.hideKey!=null?S.hideKey:"B"),n(d)&&(d=S.showRegions!=null?S.showRegions:null);var m;d&&(m=new e.Shape);var A=this.backing=new e.Shape,D=this;if(this.active=!0,n(r)&&(r=S.regions!=null?e.copy(S.regions):null),n(r))return;e.loop(r,function(v,w){v instanceof je.DisplayObject&&(r[w]={obj:v}),r[w].object&&(r[w].obj=r[w].object,delete r[w].object)}),this.regions=r;var C,E=0,X="minWidth",Z="width",V="height",O="marginLeft",ne="marginMinLeft",N="maxHeight";f&&(X="minHeight",Z="height",V="width",O="marginTop",ne="marginMinTop",N="maxWidth");for(var q=[],U=0,z=0;z<r.length;z++){if(C=r[z],!C.obj||!C.obj.getBounds()){ht("Layout(): each region object must have an object with setBounds() set");return}C[X]||(C[X]=0),C[Z]||(C[Z]=0),C.backgroundColor||(C.backgroundColor=""),C.given=0,C.maxGiven=0,C[O]=="auto"?(q[z]=!0,U++,C[ne]?C[O]=C[ne]:delete C[O]):C[O]&&C[ne]&&C[O]<C[ne]&&(C[O]=C[ne]),n(C[O])&&(C[O]=1e-4),C[N]||(C[N]=100),f?(C.align||(C.align="middle"),C.valign||(z==0?C.valign="top":z==r.length-1?C.valign="bottom":C.valign="middle",r.length==1&&(C.valign="middle"))):(C.valign||(C.valign="top"),C.align||(z==0?C.align="left":z==r.length-1?C.align="right":C.align="middle",r.length==1&&(C.align="middle"))),C[Z]&&(C[X]=0),E+=C[Z]+C[O]}if(i=="auto"?(q[r.length]=!0,i=o||0):i&&o&&i<o&&(i=o),E+=i,E>100){ht("Layout(): cannot fit regions into 100% bounds");return}var ie=100-E;ae();function ae(){var v=0,w;for(w=0;w<r.length;w++)C=r[w],C.given=0,C[Z]==0&&(v+=C.obj.getBounds()[Z]);for(w=0;w<r.length;w++)C=r[w],C[Z]==0&&(C.given=C.obj.getBounds()[Z]/v*ie)}this.resize=function(){var v;if(D.active){for(k=p.getBounds(),t.setBounds(0,0,k.width,k.height),A.graphics.clear(),l!=""&&(he(A,l),A.graphics.r(0,0,k.width,k.height)),v=0;v<r.length;v++)C=r[v],C.maxGiven=0,C.marginGiven=0;for(var w=!0,h,I,Q,x,F,Ae,Y=ie;w;){for(w=!1,h=!0,v=0;v<r.length;v++)C=r[v],C.given>0&&C.maxGiven==0&&(I=C.obj.getBounds()[Z],Q=C.obj.getBounds()[V],x=C.given*k[Z]/100,F=C[N]*k[V]/100,Ae=Q/I*x,Ae>F&&C.obj.type!="Window"?(C.maxGiven=I/Q*F*100/k[Z],Y-=C.maxGiven):h=!1);if(h)break;var K=0;for(v=0;v<r.length;v++)C=r[v],C[Z]==0&&C.maxGiven==0&&(K+=C.obj.getBounds()[Z]);for(v=0;v<r.length;v++)C=r[v],C[Z]==0&&C.maxGiven==0&&(C.given=C.obj.getBounds()[Z]/K*Y)}var ge=!0;if(C=r[0],C.maxGiven>0?C.maxGiven<C[X]&&(C[Z]=C[X],ge=!1):C.given>0&&C.given<C[X]&&(C[Z]=C[X],ge=!1),C=r[r.length-1],C.maxGiven>0?C.maxGiven<C[X]&&(C[Z]=C[X],ge=!1):C.given>0&&C.given<C[X]&&(C[Z]=C[X],ge=!1),!ge){for(E=0,v=0;v<r.length;v++)C=r[v],E+=C[Z]+C[O];if(E+=i,E>100){ht("zim display - Layout(): cannot fit regions into 100% bounds");return}ie=100-E,ae(),D.resize();return}var ye=!0,ee=0,ce=0;for(v=0;v<r.length;v++)C=r[v],ee+=C[O],C[Z]>0?ce+=C[Z]:C.maxGiven>0?ce+=C.maxGiven:C.given>0&&(ce+=C.given),C[Z]==0&&(ye=!1);if(ye||h){ee+=i;var ve=100-ce-ee;if(ee-=i+r[0][O],ve!=0&&ee!=0)for(v=0;v<r.length;v++)v!=0&&(C=r[v],C.marginGiven=C[O]/ee*(ee+ve))}if(U>0){var Re=0,se=0;for(v=0;v<r.length;v++)C=r[v],C.marginGiven>0?se+=C.marginGiven:se+=C[O],C.marginGiven=0,Re+=C[O]>.05?C[O]:0;var Oe=(se-Re)/U;for(v=0;v<q.length;v++)q[v]&&r[v]&&(C=r[v],C.marginGiven=(C[ne]?C[ne]:0)+Oe)}var J=0,xe=0,te,we,ke;if(m&&m.graphics){var pe=m.graphics;pe.c()}for(v=0;v<r.length;v++)C=r[v],C.marginGiven>0?J+=C.marginGiven*k[Z]/100:J+=C[O]*k[Z]/100,C[Z]>0?I=C[Z]:C.maxGiven>0?I=C.maxGiven:C.given>0?I=C.given:I=0,I=I*k[Z]/100,Q=C[N]*k[V]/100,xe=(k[V]-Q)/2,f?(C.obj.type=="Wrapper"&&C.obj.resize(Q),C.obj.type=="Window"&&C.obj.resize(Q,I),C.obj.type=="Region"&&C.obj.setBounds(Q,I),te=e.fit(C.obj,xe,J,Q,I)):(C.obj.type=="Wrapper"&&C.obj.resize(I),C.obj.type=="Window"&&C.obj.resize(I,Q),C.obj.type=="Region"&&C.obj.setBounds(I,Q),te=e.fit(C.obj,J,xe,I,Q)),C.valign=="top"?C.obj.y=te.bY:C.valign=="bottom"&&(C.obj.y=te.bY+te.bHeight-te.height),C.align=="left"?C.obj.x=te.bX:C.align=="right"&&(C.obj.x=te.bX+te.bWidth-te.width),m&&m.graphics&&(pe.s("white").ss(2).r(te.bX,te.bY,te.bWidth,te.bHeight),pe.s("#ff8203").sd([20,20]).r(te.bX,te.bY,te.bWidth,te.bHeight).sd()),ke=we=0,(J==0||J+I==k[Z])&&(f?ke=1:we=1),Q==k[V]&&(f?we=1:ke=1),C.backgroundColor!=""&&(he(A,C.backgroundColor),A.graphics.r(te.bX,te.bY,te.bWidth+we,te.bHeight+ke)),J+=I,C.obj.ZIMoutlineShape&&C.obj.outline()}};function he(v,w){w.type=="GradientColor"?v.graphics.lf(w.colors,w.ratios,w.x0,w.y0,w.x1,w.y1):w.type=="RadialColor"?v.graphics.rf(w.colors,w.ratios,w.x0,w.y0,w.r0,w.x1,w.y1,w.r1):w.type=="BitmapColor"?v.graphics.bf(w.image,w.repetition,w.matrix):v.graphics.f(C.backgroundColor)}this.resize(),m&&t.addChild(m),t.addChildAt(A,0),fe.addEventListener("keydown",$);function $(v){v||(v=event),m&&String.fromCharCode(v.keyCode)==_.toUpperCase()&&(D.toggle(),m.stage&&m.stage.update())}this.disable=function(){D.active=!1,fe.removeEventListener("keydown",$),m&&(m.alpha=0)},this.enable=function(){D.active=!0,fe.addEventListener("keydown",$),D.resize(),m&&(m.alpha=1)},this.removeShape=function(){m&&(m.graphics.clear(),m.dispose(),m=null,m=!1),fe.removeEventListener("keydown",$)},this.toggled=!0,this.toggle=function(v){return v===!0?m.visible=!0:v===!1?m.visible=!1:m.visible=!m.visible,D.toggled=m.visible,D},this.addShape=function(v){D.removeShape(),m=v,fe.addEventListener("keydown",$),t.addChild(m),D.resize()},P!==!1&&e.styleTransforms(this,S),p.added?p.added(G):G(p);function G(v){if(v&&v.frame&&v.frame.scaling=="full"){if(!e.globalManager){var w=e.globalManager=new e.Manager;w.frame=v.frame,w.event=v.frame.on("resize",function(){w.resize()})}e.globalManager.add(D)}}this.dispose=function(){if(D.resize=null,e.globalManager){var v=e.globalManager;v.remove(D),e.globalManager.items.length==0&&(v.frame.off("resize",v.event),v.dispose(),e.globalManager=null)}return D.backing&&D.backing.dispose(),D.backing=null,D.removeShape(),!0}},e.extend(e.Layout,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Accessibility=function(t,r,i,o,l,C,d,p,_,P,T,R,b,L,S){var k="appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",m;if(m=mt(e.Accessibility,arguments,k,this))return m;qe("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",n(t)&&(t="application"),n(o)&&(o=!1),n(l)&&(l=2),n(C)&&(C=fe.zdf),n(d)&&(d=!e.mobile()),n(p)&&(p=!1);var A=g(_);if(n(_)&&(_=A=="s"?.7:700),n(P)&&(P="brown"),n(T)&&(T=3),n(R)&&(R=5),n(b)&&(b=.8),n(S)&&(S=.8),n(L)){var D=new e.Shape({style:!1});D.mouseEnabled=!1}else L.mouseEnabled&&(L.mouseEnabled=!1);if(typeof C>"u")var C=fe.zdf;if(n(C)){kt&&ht("Accessibility - needs a Frame");return}var E=C.retina&&fe.devicePixelRatio||1,X=this;X.cycle=o,X.decimals=l,X.alwaysHighlight=p,X.AHTime=_,X.AHColor=P,X.AHBorderWidth=T,X.AHBorderPadding=R,X.AHAlpha=b,X.AHObjectScale=S;var Z=-1,V=-1,O=[],ne=[],N={RadioButtons:"option",Tabs:"tab",Pad:"key"},q,U=C.canvas.id,z=e.mobile(),ie=!1,ae=null,he=[],$,G,v,w,h,I,Q,x=150,F;Object.defineProperty(this,"tabOrder",{get:function(){return Z},set:function(oe){var Ye;for($&&$.removeEventListener("focus",K),G&&G.removeEventListener("focus",K),Ye=0;Ye<O.length;Ye++)O[Ye].parentElement&&(O[Ye].outerHTML="");O=[];var Ve,De;for(Ye=0;Ye<ne.length;Ye++)Ve=Z[Ye],Ve&&ne[Ye][0].off("mousedown",ne[Ye][1]);ne=[],Z=[];var de=[];F=C.shim?document.body:C.canvas,_e=!1;var Be=0;for(Ye=0;Ye<oe.length;Ye++){if(Ve=oe[Ye],Ve.type=="HotSpots"&&(oe.splice.apply(oe,[Ye,1].concat(Ve.hotSpots)),Ve=Ve.hotSpots[0]),Ve.type=="HotSpot"&&(Ve=Ve.spot),Ve.constructor=={}.constructor){if(De=Ve.obj,!De||!De.getStage)continue;Ve.title||(Ve.title=J(De,Ye+Be))}else De=Ve,Ve={obj:Ve,title:J(Ve,Ye+Be)};if(De.type=="RadioButtons"||De.type=="Tabs"||De.type=="Pad"){var Qe=[];Be--;for(var Ke=0;Ke<De.buttons.length;Ke++){Be++;var lt=De.buttons[Ke],gt={obj:lt,title:Ve.title+" - "+N[De.type]+": "+(lt.text=="a"||lt.text=="A"?"eh":lt.text)};Qe.push(gt),lt.zimTabParent=De,lt.zimTabParent.zimAccessibility=X,lt.zimTabIndex=Ye+Be,lt.tabIndex=Ke,lt.zimAccessibility=X,xe(gt),F=te(U+"Tab"+(Ye+Be),gt.title,F,gt),ne.push([lt,lt.on("mousedown",Oe)]),ie||he.push([lt,lt.on("mousedown",Y)])}de=de.concat(Qe)}else De.zimTabIndex=Ye+Be,De.zimTabParent=De,xe(Ve),De.zimAccessibility=X,ne.push([De,De.on("mousedown",Oe)]),ie||he.push([De,De.on("mousedown",Y)]),de.push(Ve),F=te(U+"Tab"+(Ye+Be),Ve.title,F,Ve)}$=X.startAppTag=te(U+"PrefixTab",t+" start",C.shim?document.body:C.canvas,null,"before"),$.addEventListener("focus",K),ie||($.addEventListener("focus",ve),w=te(U+"noAriaTab","",$,null,"before"),w.setAttribute("aria-hidden",!0),w.focusTab=$,w.addEventListener("focus",ce),I=te(U+"noAriaTab","",$),I.setAttribute("aria-hidden",!0),I.focusTab=$,I.addEventListener("focus",ce)),F=te(U+"BufferTab","",F),z&&F.setAttribute("aria-hidden",!0),F=G=X.endAppTag=te(U+"SuffixTab",t+" end",F),G.addEventListener("focus",K),ie||(G.addEventListener("focus",ve),F=h=te(U+"noAriaTab","",G),h.setAttribute("aria-hidden",!0),h.focusTab=G,h.addEventListener("focus",ce),Q=te(U+"noAriaTab","",G,null,"before"),Q.setAttribute("aria-hidden",!0),Q.focusTab=G,Q.addEventListener("focus",ce)),Z=de}});function Ae(){$&&($.removeEventListener("focus",K),$.removeEventListener("focus",ve),$.parentNode&&($.outerHTML="")),w&&(w.removeEventListener("focus",ce),w.parentNode&&(w.outerHTML="")),I&&(I.removeEventListener("focus",ce),I.parentNode&&(I.outerHTML="")),F&&F.parentNode&&(F.outerHTML=""),G&&(G.removeEventListener("focus",K),G.removeEventListener("focus",ve),G.parentNode&&(G.outerHTML="")),h&&(h.removeEventListener("focus",ce),h.parentNode&&(h.outerHTML="")),Q&&(Q.removeEventListener("focus",ce),Q.parentNode&&(Q.outerHTML=""))}Object.defineProperty(this,"tabIndex",{get:function(){return V},set:function(oe){if(!We)return;if(oe<0||oe>=Z.length)He();else{oe!=V&&gt();var Ye=Z[oe].obj;if(Ye.stage){if(V=oe,Ye.focus=!0,we=!0,ke=!1,X.changeTitle(Ye),Ye.zimTabTag.focus(),setTimeout(function(){Ye.zimTabTag.focus();var it=new je.Event("change");it.title=Ye.zimTabTag.getAttribute("aria-label"),X.dispatchEvent(it)},x),X.alwaysHighlight&&(!ae||!z)){if(X.AHObject){q=X.AHObject;var lt=e.boundsToGlobal(Ye);X.AHObject.alp(X.AHAlpha).addTo(C.stage,null,!1),X.AHObject.fit(lt.x,lt.y,lt.width,lt.height),X.AHObject.sca(X.AHObject.scaleX*X.AHObjectScale),X.AHTime>0&&(Ee=setTimeout(function(){C.stage.removeChild(X.AHObject),C.stage.update()},X.AHTime*(A=="s"?1e3:1)))}else{q=D;var Ve=Ye.getBounds(),De=Ye.localToGlobal(Ve.x-5,Ve.y-5),de=Ye.localToGlobal(Ve.x+Ve.width+5,Ve.y-5),Be=Ye.localToGlobal(Ve.x+Ve.width+5,Ve.y+Ve.height+5),Qe=Ye.localToGlobal(Ve.x-5,Ve.y+Ve.height+5),Ke=D.graphics;Ke.clear(),Ke.s(X.AHColor).ss(X.AHBorderWidth).mt(De.x-X.AHBorderPadding,De.y-X.AHBorderPadding).lt(de.x+X.AHBorderPadding,de.y-X.AHBorderPadding).lt(Be.x+X.AHBorderPadding,Be.y+X.AHBorderPadding).lt(Qe.x-X.AHBorderPadding,Qe.y+X.AHBorderPadding).lt(De.x-X.AHBorderPadding,De.y-X.AHBorderPadding).cp(),D.alpha=X.AHAlpha,X.AHTime>0&&(Ee=setTimeout(function(){C.stage.removeChild(D),C.stage.update()},X.AHTime*(A=="s"?1e3:1)))}C.stage.addChild(q),C.stage.update()}}else He()}function gt(){if(V&&V>-1)Z&&Z[V]&&(Z[V].obj.focus=!1);else for(var it=0;it<Z.length;it++)Z[it].obj.focus=!1}function He(){gt(),we=!1,X.AHObject&&C.stage.removeChild(X.AHObject),X.alwaysHighlightShape&&C.stage.removeChild(X.alwaysHighlightShape),C.stage.update(),V=-1}}}),Object.defineProperty(this,"aria",{get:function(){return ae},set:function(oe){ae=oe,ae&&ge()}});function Y(oe){var Ye=oe.currentTarget,Ve=Ye.boundsToGlobal(),De=Ve.x+Ve.width/2,de=Ve.y+Ve.height/2,Be=5;oe.stageX/e.scaX<De-Be||oe.stageX/e.scaX>De+Be||oe.stageY/e.scaY<de-Be||oe.stageY/e.scaY>de+Be?ye():ge()}function K(){v&&(v.innerHTML="")}z=="android"&&(e.ACTIONEVENT="click",Lt||(fe.ACTIONEVENT="click"));function ge(){ae=!0,Re(),v&&v.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",Lt||(fe.ACTIONEVENT="click"),C.stage.removeChild(q),z&&(X.alwaysHighlight=!1),C.stage.update();for(var oe,Ye,Ve,De=0;De<Z.length;De++)oe=Z[De],Ye=oe.obj,Ve=Ye.zimTabTag,Ve.disabled=!1,oe.title=oe.title.replace(/\s\(use arrow keys\)/,""),Ve.setAttribute("aria-label",oe.title),Ve.addEventListener("focus",ee)}function ye(){ae=!1;for(var oe,Ye,Ve,De=0;De<Z.length;De++)oe=Z[De],Ye=oe.obj,Ve=Ye.zimTabTag,Ve.disabled=!1;Re(),p&&se()}function ee(oe){var Ye=oe.currentTarget,Ve=Ye.zimObject;V=Ve.zimTabIndex,Ve.focus=!0;var De=new je.Event("change");De.title=Ye.getAttribute("aria-label"),X.dispatchEvent(De)}function ce(oe){ae=!1,oe.target.focusTab.focus()}function ve(){n(ae)||ae?ge():ye()}function Re(){ie=!0,$.removeEventListener("focus",ve),G.removeEventListener("focus",ve),w.removeEventListener("focus",ce),h.removeEventListener("focus",ce),w.parentNode&&(w.parentNode.removeChild(w),h.parentNode.removeChild(h)),I.removeEventListener("focus",ce),Q.removeEventListener("focus",ce),I.parentNode&&(I.parentNode.removeChild(I),Q.parentNode.removeChild(Q));for(var oe=0;oe<he.length;oe++)he[oe][0].off("mousedown",he[oe][1])}function se(){for(var oe=0;oe<O.length;oe++){var Ye=O[oe];Ye.zimObject&&(Ye.zimObject.type=="Loader"||Ye.zimObject.type=="TextArea"||Ye.zimObject.type=="Tag")||(O[oe].style.left="-2000px")}}n(r)?setTimeout(function(){if(Z==-1){Z=[];var oe=[];e.loop(C.stage,function(Ye){Ye.type&&oe.push(Ye)}),X.tabOrder=oe,n(i)||(X.tabIndex=i)}},50):(Z=[],X.tabOrder=r,n(i)||(X.tabIndex=i));function Oe(oe){var Ye=oe.currentTarget;if(Ye.type=="RadioButton"||Ye.type=="TabsButton"||Ye.type=="PadButton")for(var Ve=0;Ve<Ye.zimTabParent.buttons.length;Ve++){var De=Ye.zimTabParent.buttons[Ve];De.zimTabTag.setAttribute("aria-label",De.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(Ye.zimTabParent.selectedIndex==De.tabIndex?" - currently selected.":" - currently not selected."))}X.tabIndex=oe.currentTarget.zimTabIndex,X.activatedObject=Ye}function J(oe){return oe.talk?oe.talk:oe.type=="TextArea"||oe.type=="RadioButtons"||oe.type=="Tabs"||oe.type=="Pad"?oe.type:oe.type=="Waiter"?"Waiter active - please wait":oe.text?oe.type+" - "+(oe.text=="a"||oe.text=="A"?"eh":oe.text):oe.type+(oe.type=="Dial"||oe.type=="Slider"||oe.type=="ColorPicker"||oe.type=="Stepper"?" (use arrow keys)":"")+(oe.type=="TextArea"?" (press ENTER to edit)":"")}function xe(oe){var Ye=oe.obj;oe.title=oe.title.replace(/\.$/,""),Ye.type=="RadioButton"||Ye.type=="TabsButton"||Ye.type=="PadButton"?oe.title=oe.title+(Ye.tabIndex==Ye.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):Ye.type=="CheckBox"?oe.title=oe.title+(Ye.checked?" - currently checked":" - currently not checked"):Ye.type=="Stepper"?oe.title=oe.title+" - currently displaying "+Ye.currentValue:Ye.type=="Slider"||Ye.type=="Dial"?oe.title=oe.title+" - currently at "+e.decimals(Ye.currentValue,X.decimals):Ye.type=="ColorPicker"?oe.title=oe.title+" - currently at "+Ye.selectedColor:Ye.type=="TextArea"?oe.title=oe.title+(Ye.tag.value!=""?"":" - placeholder: "+Ye.tag.placeholder):Ye.type=="Indicator"?oe.title=oe.title+" - currently "+(Ye.selectedIndex>=0?"at "+(Ye.selectedIndex+1)+" of "+Ye.num:"not indicating"):Ye.type=="TextInput"&&(oe.title=oe.title+(Ye.htmlTag.value!=""?"":" - placeholder: "+Ye.htmlTag.placeholder)),oe.title+="."}function te(oe,Ye,Ve,De,de){var Be,Qe;if(De&&(Be=De.obj),De&&(Be.type=="TextArea"||Be.type=="Loader"))return Qe=Be.tag,Qe.setAttribute("aria-label",Ye),Be&&Qe.setAttribute("aria-hidden",!Be.stage),de=="before"?Ve.parentNode.insertBefore(Qe,Ve):Ve.parentNode.insertBefore(Qe,Ve.nextSibling),Be.type=="TextArea"?Qe.style.zIndex=3:Qe.style.zIndex=-5,Qe.zimObject=Be,De.obj.zimTabTag=Qe,O.push(Qe),Qe;if(De&&Be.type=="TextInput")return Qe=Be.htmlTag,Qe.setAttribute("aria-label",Ye),Be&&Qe.setAttribute("aria-hidden",!Be.stage),de=="before"?Ve.parentNode.insertBefore(Qe,Ve):Ve.parentNode.insertBefore(Qe,Ve.nextSibling),Qe.style.zIndex=-5,Qe.zimObject=Be,De.obj.zimTabTag=Qe,O.push(Qe),Qe;var Ke;if(De&&(Be.type=="Dial"||Be.type=="Slider"||Be.type=="Stepper"||Be.type=="ColorPicker")){var lt=[];if(Be.type=="Dial"||Be.type=="Slider"){var gt=Be.step<=0?(Be.max-Be.min)/20:Be.step;for(Ke=Be.min;Ke<Be.max;Ke=Ke+gt)lt.push(Be.min+Ke)}else Be.type=="Stepper"?lt=Be.stepperArray:Be.type=="ColorPicker"&&(lt=Be.colors);Qe=document.createElement("select"),Qe.disabled=!0,Qe.zimObject=Be,Qe.addEventListener("change",function(Se){!ae&&!z=="android"||(Se.currentTarget.zimObject.zimTabParent.currentValueEvent=Se.target.value,C.stage.update())}),Qe.size=1;var He,it;for(Ke=0;Ke<lt.length;Ke++)He=lt[Ke],it=document.createElement("option"),it.setAttribute("aria-label",He),it.innerHTML=He,Qe.add(it),He==Be.zimTabParent.currentValue&&it.setAttribute("selected","selected");Qe.setAttribute("role","button")}else Qe=document.createElement("div"),Be&&(Qe.zimObject=Be),Qe.innerHTML="tag",Qe.setAttribute("role",d?"application":"button"),z=="android"&&Qe.addEventListener("click",function(){Be.dispatchEvent("click")});if(Qe.setAttribute("id",oe),Qe.setAttribute("tabindex",0),Qe.setAttribute("aria-label",Ye),Be&&Qe.setAttribute("aria-hidden",!Be.stage),de=="before"?Ve.parentNode.insertBefore(Qe,Ve):Ve.parentNode.insertBefore(Qe,Ve.nextSibling),Qe.style.position="absolute",De){Be=De.obj;var ft=Be.boundsToGlobal();C.retina?(Qe.style.left=C.x+ft.x*C.scale/E+"px",Qe.style.top=C.y+ft.y*C.scale/E+"px",Qe.style.width=ft.width*C.scale/E+"px",Qe.style.height=ft.height*C.scale/E+"px"):(Qe.style.left=C.x+ft.x*C.scale+"px",Qe.style.top=C.y+ft.y*C.scale+"px",Qe.style.width=ft.width*C.scale+"px",Qe.style.height=ft.height*C.scale+"px"),De.obj.zimTabTag=Qe}else Qe.style.left="-1000px",Qe.style.top=C.y+"px";return Qe.style.overflow="hidden",Qe.style.zIndex=-5,Qe.style.fontSize="20px",Qe.style.color="rgba(0,0,0,.01)",O.push(Qe),Qe}var we=!1,ke=!0,pe=C.on("keydown",function(oe){if(oe.keyCode==9&&(Me()||(we=!1,X.tabIndex!=-1&&(X.tabIndex=-1)),we?ue(oe):Ue(oe)),we&&Z.length>0&&X.tabIndex>=0&&oe.keyCode==13){var Ye=Z[X.tabIndex],Ve=Ye.obj;if(Ye&&Ve.stage){var De=new je.Event("mousedown"),de=new je.Event("click");De.fromEnter=de.fromEnter=!0,Ve.type=="Pane"?(Ve.backdrop.dispatchEvent(De),Ve.backdrop.dispatchEvent(de)):(Ve.dispatchEvent(De),Ve.dispatchEvent(de))}}});function Me(){for(var oe=!1,Ye=0;Ye<O.length;Ye++)if(document.activeElement==O[Ye]){oe=!0;break}return!!(document.activeElement==C.canvas||oe)}function Ue(oe){!C.shiftKey&&(Tn(U+"PrefixTab")==document.activeElement||C.canvas==document.activeElement)?(Z.length>0&&(Z[Z.length-1].obj.focus=!0),ke=!0,we=!0,ue(oe)):C.shiftKey&&(Tn(U+"SuffixTab")==document.activeElement||Tn(U+"BufferTab")==document.activeElement)&&(Z.length>0&&(Z[0].obj.focus=!0),ke=!0,we=!0,ue(oe))}function ue(oe){if(oe.ctrlKey){Te(oe.shiftKey?-1:1);return}oe.shiftKey?X.tab(-1):X.tab(1),oe.preventDefault()}var Ee;this.tab=function(oe){if(clearTimeout(Ee),q&&C.stage.removeChild(q),n(oe)&&(oe=1),Z.length==0){Te(oe);return}for(var Ye=0;Ye<Z.length;Ye++){var Ve=Z[Ye].obj;if(Ve.focus){Ve.focus=!1;var De=Ye+oe,de=(De+Z.length*1e4)%Z.length,Be=Z[de];Ve=Be.obj;for(var Qe=0,Ke=!1;!(Ve.stage&&(!Ve.zimTabParent&&(n(Ve.enabled)||Ve.enabled)||Ve.zimTabParent&&(n(Ve.zimTabParent.enabled)||Ve.zimTabParent.enabled)));)if(Qe++,De=De+oe,de=(De+Z.length*100)%Z.length,Be=Z[de],Ve=Be.obj,Qe==Z.length){Ke=!0;break}if(Ke||!X.cycle&&De!=de&&!ke){Te(oe);return}ke=!1,X.tabIndex=de;break}}};function Te(oe){we=!1,Tn(U+(oe==1?"SuffixTab":"PrefixTab")).focus(),C.stage.removeChild(L),C.stage.update(),X.tabIndex=-1}this.changeTitle=function(oe,Ye,Ve){if(typeof oe!="number"&&(oe=oe.zimTabIndex),!n(oe)){if(Ve&&n(Ye)){X.tabIndex=oe;return}var De=Z[oe],de=De.obj;n(Ye)&&(Ye=de.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),De.title=Ye,xe(De),de.zimTabTag.setAttribute("aria-label",De.title),Ve&&(X.tabIndex=oe)}};var _e=!1;this.talk=function(oe){_e||(v=te(U+"TalkTab","",G),v.setAttribute("role","alert"),_e=!0),v.removeAttribute("role"),v.setAttribute("aria-label",oe),v.setAttribute("role","alert");var Ye=new je.Event("change");Ye.title=oe,X.dispatchEvent(Ye)},this.resize=function(oe){if(n(oe))for(var De=0;De<Z.length;De++)de(Z[De].obj);else{if(typeof oe!="number"&&(oe=oe.zimTabIndex),oe<0)return;var Ye=Z[oe],Ve=Ye.obj;!Ve.stage&&q&&Ve==X.currentObject&&(C.stage.removeChild(q),C.stage.update()),de(Ve)}function de(Be){if(Be.type=="TextArea"||Be.type=="Loader"){Be.resize();return}else{var Qe=Be.boundsToGlobal(),Ke=Be.zimTabTag;C.retina?(Ke.style.left=C.x+Qe.x*C.scale/E+"px",Ke.style.top=C.y+Qe.y*C.scale/E+"px",Ke.style.width=Qe.width*C.scale/E+"px",Ke.style.height=Qe.height*C.scale/E+"px"):(Ke.style.left=C.x+Qe.x*C.scale/E/E+"px",Ke.style.top=C.y+Qe.y*C.scale/E/E+"px",Ke.style.width=Qe.width*C.scale/E/E+"px",Ke.style.height=Qe.height*C.scale/E/E+"px")}Ke.setAttribute("aria-hidden",!Be.stage),Ke.hidden=!Be.stage}},Object.defineProperty(this,"currentObject",{get:function(){return Z[V]&&Z[V].obj?Z[V].obj:null},set:function(oe){for(var Ye=0;Ye<Z.length;Ye++)if(Z[Ye].obj==oe){X.tabIndex=Ye;break}}});var We=!0;Object.defineProperty(this,"enabled",{get:function(){return We},set:function(oe){We=oe}}),this.dispose=function(){D&&D.graphics.clear(),X.tabOrder=[];for(var oe=0;oe<O.length;oe++)O[oe].parentElement&&(O[oe].outerHTML="");Ae(),X.removeAllEventListeners(),C.off("keydown",pe)}},e.extend(e.Accessibility,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.TextureActive=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k){var m="width, height, color, color2, angle, borderColor, borderWidth, corner, interactive, animated, backingOrbit, pattern, scalePattern, style, group, inherit",A;if(A=mt(e.TextureActive,arguments,m,this))return A;qe("35.2"),this.group=S;var D=L===!1?{}:e.getStyle("TextureActive",this.group,k);n(t)&&(t=D.width!=null?D.width:fe.zdf.width),n(r)&&(r=D.height!=null?D.height:fe.zdf.height),n(_)&&(_=D.interactive!=null?D.interactive:!0),n(P)&&(P=D.animated!=null?D.animated:!0),n(i)&&(i=D.color!=null?D.color:null),n(o)&&(o=D.color2!=null?D.color2:null),n(l)&&(l=D.angle!=null?D.angle:null),n(f)&&(f=D.borderColor!=null?D.borderColor:null),n(d)&&(d=D.borderWidth!=null?D.borderWidth:null),f<0||d<0?f=d=null:f!=null&&d==null&&(d=1),n(p)&&(p=D.corner!=null?D.corner:10),n(T)&&(T=D.backingOrbit!=null?D.backingOrbit:!0),n(R)&&(R=D.pattern!=null?D.pattern:null),n(b)&&(b=D.scalePattern!=null?D.scalePattern:null),this.zimPage_constructor(t,r,i,o,l,R,b,null,L,S,k),this.type="TextureActive",p&&(this.backing.corner=p),n(d)||(this.backing.borderWidth=d),n(f)||(this.backing.borderColor=f),(d||!n(f))&&(this.backing.siz(this.width-d,this.height-d),this.backing.center()),this.backing.mouseChildren=!1,this.interactive=_,this.animated=P,this.backingOrbit=T,L!==!1&&e.styleTransforms(this,D),this.clone=function(){return this.cloneProps(new e.TextureActive(t,r,i,o,l,f,d,p,_,P,T,R,b,L,this.group,k))}},e.extend(e.TextureActive,e.Page,["clone"],"zimPage",!1),e.TextureActive.makeLogo=function(t,r){n(t)&&(t="light");var i=t!="dark",o=i?e.light:e.dark,l=i?e.dark:e.light,f=i?e.white:e.black,d=i?e.black:e.white,p=new e.Container(400,100),_=fe.zdf.makeIcon(o,l,[o,o,o,o,o]).ske(0,30).scaleTo(p,100,100).center(p),P=new e.Rectangle((400-_.width)/2+4,80-10,new e.GradientColor([i?o:f,i?f:o,i?o:f],-70),d,.5).addTo(p),T=P.clone().pos(0,0,"right","bottom",p);return new e.Label({text:"Texture",size:50,color:l,variant:!0}).scaleTo(P,75,75).center(P),new e.Label({text:"Active",size:50,color:l,variant:!0}).scaleTo(P,72,72).center(T),r?p:p.noMouse()},e.TextureActive.makeBacking=function(t,r,i,o){n(t)&&(t=800),n(r)&&(r=600),n(i)&&(i="CANVAS WINDOW"),n(o)&&(o=e.light);var l=new e.Container(t,r);return l.icon=fe.zdf.makeIcon({box:black}).sca(2),l.label=new e.Label({text:i,size:25,color:o,align:"center"}).reg("center"),l.tile=new e.Tile({obj:[l.icon,l.label],rows:2,spacingV:24,unique:!0,align:CENTER}).scaleTo(l,50,70).center(l),l.tile.items[1].mov(0,10),l},e.TextureActives=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A){var D="actives, threejs, zimThree, renderer, scene, camera, controls, layers, near, far, ignoreList, toggleKey, color, outerColor, damp, style, group, inherit",C;if(C=mt(e.TextureActives,arguments,D,this))return C;qe("35.4"),this.group=m;var E=k===!1?{}:e.getStyle("TextureActives",this.group,A),X,Z,V="ZIM TextureActives - need a ZIM Frame";if(n(t)&&n(t[0]))if(fe.zdf)Z=fe.zdf,X=fe.zdf.stage;else{ht(V);return}else if(n(t)||n(t[0])||n(t[0].stage))if(fe.zdf)Z=fe.zdf,X=fe.zdf.stage;else{ht(V);return}else X=t[0].stage,Z=X.frame;n(t)&&(t=E.actives!=null?E.actives:null),n(r)&&(r=E.threejs!=null?E.threejs:null),n(i)&&(i=E.zimThree!=null?E.zimThree:null),n(o)&&(o=E.renderer!=null?E.renderer:null),n(l)&&(l=E.scene!=null?E.scene:null),n(f)&&(f=E.camera!=null?E.camera:null),n(d)&&(d=E.controls!=null?E.controls:null),n(p)&&(p=E.layers!=null?E.layers:[]),Array.isArray(p)||(p=[p]),n(_)&&(_=E.near!=null?E.near:void 0),n(P)&&(P=E.far!=null?E.far:void 0),n(T)&&(T=E.ignoreList!=null?E.ignoreList:[]),Array.isArray(T)||(T=[T]),n(R)&&(R=E.toggleKey!=null?E.toggleKey:"t"),n(b)&&(b=E.color!=null?E.color:e.darker),n(L)&&(L=E.outerColor!=null?E.outerColor:"black"),n(S)&&(S=E.damp!=null?E.damp:null);var O=this;e.TAM||(e.TAM=new e.TextureActivesManager(X,R,S),o&&o.domElement&&o.domElement.addEventListener("mousedown",U=>{U.preventDefault()})),O.manager=e.TAM,this.ignoreList=T,this.raycast=!0,this.renderer=o,this.layers=p,this.animated=!1,this.interactive=!1,this.actives=[],this.threeMeshes=[];var ne=!1;function N(U){n(U)&&(U=[]),Array.isArray(U)||(U=[U]);var z=0,ie,ae;return e.loop(U,function(he){O.actives.indexOf(he)<0&&(O.actives.push(he),he.cache(),he.canvas.content=he,he.interactive&&(ie=!0,he.canvas.isTextureActive=!0),he.animated&&(ae=!0),z++)}),ie&&!O.interactive&&(O.interactive=!0,z>0&&q()),ae&&!O.animated&&(O.animated=!0),z}N(t),e.TAM.updateTile(O,O.actives),e.TAM.color=b,e.TAM.outerColor=L,Z.canvas.style.display="none";function q(){if(ne)return;ne=!0,O.pointerCheck||(O.pointerCheck=e.TAM.addPointer(O)),O.pointerData={x:Z.mouseX,y:Z.mouseY,mousedown:!1};var U=window.innerWidth,z=window.innerHeight,ie=-1,ae=-2,he=-1,$=-2;O.overInterval=e.interval(.05,function(){if(ae&&ae!=ie||$&&$!=he){var J=new je.Event("rayover");J.mesh=O.mesh=ae,J.material=O.material=$,$.userData&&(J.textureActive=O.textureActive=$.userData.ta_content),J.intersect=O.intersect,O.dispatchEvent(J),d&&!d.screenSpacePanning&&(d.activeLook=!1)}else if(!ae&&ie||!$&&he){var J=new je.Event("rayout");J.mesh=ie,J.material=he,he.userData&&(J.textureActive=he.userData.ta_content),J.intersect=O.intersect,O.dispatchEvent(J),d&&!d.screenSpacePanning&&(d.activeLook=!0)}ie=ae,he=$});var G=O.raycaster=new r.Raycaster(void 0,void 0,_,P);p.length>0&&e.loop(p,function(J){G.layers.set(J)});var v,w;O.XR=fe.XR=!1;var h=new r.Matrix4;let I=O.controllerLeft=o.xr.getController(0);I.addEventListener("selectstart",x),I.addEventListener("selectend",F),I.addEventListener("move",Ae);let Q=O.controllerRight=o.xr.getController(1);Q.addEventListener("selectstart",Y),Q.addEventListener("selectend",K),Q.addEventListener("move",ge);function x(J){w=!0,ee(J)}function F(J){w=!0,ve(J)}function Ae(J){w=!0,se(J,"left")}function Y(J){w=!0,ee(J)}function K(J){w=!0,ve(J)}function ge(J){w=!0,se(J,"right")}window.addEventListener("pointerdown",ye);function ye(J){w=!1,ee(J)}function ee(J){if(O.raycast){if(w){var xe=J.target;h.identity().extractRotation(xe.matrixWorld),G.ray.origin.setFromMatrixPosition(xe.matrixWorld),G.ray.direction.set(0,0,-1).applyMatrix4(h),J.data&&J.data.handedness=="left"?J.pointerId=2:J.pointerId=1}else{var te;!i||i.resizeEvent?te={x:J.clientX/window.innerWidth*2-1,y:1-J.clientY/window.innerHeight*2}:te={x:J.clientX/U*2-1,y:1-J.clientY/z*2},G.setFromCamera(te,f)}var we=G.intersectObjects(l.children);v=null;var ke,pe,Me;for(pe=0;pe<we.length;pe++)if(ke=we[pe].object,!(O.ignoreList.indexOf(ke)>-1)){if(O.threeMeshes.indexOf(ke)>-1)if(ke.material&&Array.isArray(ke.material))Me=ke.material[we[pe].face.materialIndex];else if(ke.material)Me=ke.material;else break;if(Me&&Me.map&&Me.map.source&&Me.map.source.data&&Me.map.source.data.isTextureActive&&Me.userData.ta_content){v=ke;var Ue=Me.userData.ta_content;if(O.pointerData.mousedown=!0,Oe(Ue,we[pe],Me.userData.ta_flipped),je.handleRemotePointer(O.pointerData.x,O.pointerData.y,"down",J,X,J.pointerId),d&&d.maxAzimuthAngle&&Ue)if(Ue.backingOrbit){var ue=Ue.globalToLocal(Z.mouseX,Z.mouseY),Ee=Ue.backing;Ee&&Ue.getObjectUnderPoint(ue.x,ue.y,1)!=Ee?d.enableRotate=!1:d.enableRotate=!0}else d.enableRotate=!1;var Te=new je.Event("raydown");Te.mesh=O.mesh=ke,Te.material=O.material=Me,Te.textureActive=O.textureActive=Ue,Te.intersect=O.intersect=we[pe],O.dispatchEvent(Te);break}else break}}}window.addEventListener("pointerup",ce);function ce(J){w=!1,ve(J)}function ve(J){if(O.raycast){if(O.pointerData.mousedown=!1,d&&d.maxAzimuthAngle&&(d.enableRotate=!0),v){var xe=new je.Event("rayup");xe.mesh=O.mesh,xe.material=O.material,xe.textureActive=O.textureActive,xe.intersect=O.intersect,O.dispatchEvent(xe)}v=null,w&&(J.data&&J.data.handedness=="left"?J.pointerId=2:J.pointerId=1),je.handleRemotePointer(null,null,"up",J,X,J.pointerId)}}window.addEventListener("pointermove",Re);function Re(J){w=!1,se(J)}function se(J,xe){if(O.raycast){if(w){var te=J.target;h.identity().extractRotation(te.matrixWorld),G.ray.origin.setFromMatrixPosition(te.matrixWorld),G.ray.direction.set(0,0,-1).applyMatrix4(h),xe=="left"?J.pointerId=2:J.pointerId=1}else{var we;!i||i.resizeEvent?we={x:J.clientX/window.innerWidth*2-1,y:1-J.clientY/window.innerHeight*2}:we={x:J.clientX/U*2-1,y:1-J.clientY/z*2},G.setFromCamera(we,f)}var ke=!1,pe,Me,Ue;if(v){let _e=G.intersectObject(v);if(_e.length>0&&(pe=v,pe.material&&Array.isArray(pe.material)?Ue=pe.material[_e[0].face.materialIndex]:pe.material&&(Ue=pe.material),Ue)){var ue=Ue.userData.ta_content;Oe(ue,_e[0],Ue.userData.ta_flipped),je.handleRemotePointer(O.pointerData.x,O.pointerData.y,"move",J,X,J.pointerId),ke=!0;var Ee=new je.Event("raymove");Ee.mesh=ae=O.mesh=pe,Ee.material=$=O.material=Ue,Ee.textureActive=O.textureActive=ue,Ee.intersect=O.intersect=_e[0],O.dispatchEvent(Ee)}}else{var Te=G.intersectObjects(l.children);for(Me=0;Me<Te.length;Me++)if(pe=Te[Me].object,!(O.ignoreList.indexOf(pe)>-1)){if(O.threeMeshes.indexOf(pe)>-1)if(pe.material&&Array.isArray(pe.material))Ue=pe.material[Te[Me].face.materialIndex];else if(pe.material)Ue=pe.material;else break;if(Ue&&Ue.map&&Ue.map.source&&Ue.map.source.data&&Ue.map.source.data.isTextureActive&&Ue.userData.ta_content){var ue=Ue.userData.ta_content;Oe(ue,Te[Me],Ue.userData.ta_flipped),je.handleRemotePointer(O.pointerData.x,O.pointerData.y,"move",J,X,J.pointerId),ke=!0;var Ee=new je.Event("raymove");Ee.material=$=O.material=Ue,Ee.mesh=ae=O.mesh=pe,Ee.textureActive=O.textureActive=ue,Ee.intersect=O.intersect=Te[Me],O.dispatchEvent(Ee);break}else break}}ke||(ae=null,$=null),e.TAM.setActive(O,ke)}}function Oe(J,xe,te){if(!(!J||!J.getBounds)){var we=J.getBounds(),ke=te?we.width-xe.uv.x*we.width:xe.uv.x*we.width,pe=(1-xe.uv.y)*we.height,Me=J.localToGlobal(ke,pe);O.pointerData.x=Me.x,O.pointerData.y=Me.y}}}this.add=function(U){var z=N(U);return z>0&&e.TAM.updateTile(O,O.actives),O},this.remove=function(U){n(U)&&(U=[]),Array.isArray(U)||(U=[U]);var z=0;return e.loop(U,function(ie){if(je.remoteQueue){var ae=je.remoteQueue.indexOf(ie);ae>=0&&je.remoteQueue.splice(ae,1)}ae=O.actives.indexOf(ie),ae>=0&&(O.actives.splice(ae,1),z++),ie.textureMap&&delete ie.textureMap.userData.ta_content,ae=O.threeMeshes.indexOf(ie),ae>=0&&O.threeMeshes.splice(ae,1),ie.dispose()},!0),z>0&&e.TAM.updateTile(O,O.actives),O},O.addMesh=function(U,z){if(n(z)||U.layers.enable(z),U.material){var ie=O.threeMeshes.indexOf(U);if(ie<0)O.threeMeshes.push(U);else return O;var ae;Array.isArray(U.material)?ae=U.material:ae=[U.material],U.onBeforeRender=function(){U.userData.ta_viewID&&clearTimeout(U.userData.ta_viewID),U.userData.ta_viewID=setTimeout(function(){U.userData.ta_view=!1,je.remoteQueue&&e.loop(U.userData.ta_content,function(he){var $=je.remoteQueue.indexOf(he);$>=0&&je.remoteQueue.splice($,1)},!0)},100),U.userData.ta_view||(U.userData.ta_view=!0,e.loop(U.userData.ta_content,function(he){je.remoteQueue.indexOf(he)<0&&je.remoteQueue.push(he)}))},U.userData.ta_content=[],e.loop(ae,function(he){if(he&&he.map&&he.map.source&&he.map.source.data&&he.map.source.data.content){var $=he.map.source.data.content;U.userData.ta_content.push($),$.mesh=U,U.textureActive=!0,he.userData.ta_content=$,$.textureMaps||($.textureMaps=[]);var G=$.textureMaps.indexOf(he.map);G<0&&$.textureMaps.push(he.map),($.animated||$.interactive)&&(je.remoteQueue||(je.remoteQueue=[]))}})}return O},O.dispose=function(){O.raycast=!1,d&&(d.enableRotate=!0,d.enabled=!0),O.remove(O.actives),e.TAM.remove(O),e.TAM.count<1&&(e.TAM.dispose(),e.TAM=null),O.material=O.mesh=O.content=O.intersect=null}},e.extend(e.TextureActives,je.EventDispatcher,"dispose"),e.TextureActivesManager=function(t,r,i){qe("35.6");var o=this;this.type="TextureActivesManager",o.color=e.darker,o.outerColor="black";var l=!1;o.toggleKey=r||"t",(n(i)||i===!0)&&(i=.2);var f=o.objects=new e.Dictionary(!0),d=t.frame,p=new e.Proportion({baseMin:1e3,baseMax:9e3,targetMin:-.1,targetMax:-.05,clamp:!1});o.backing=new e.Rectangle(100,100,e.faint).addTo(t,0);var _=[];o.updateTile=function(A,D,C){C||f.add(A,D);var E=[];if(_=[],e.loop(f,function(Z,V){e.loop(V,function(O){E.push(O),O.loop(function(ne){(ne.type=="Scrambler"||ne.type=="List"||ne.type=="Window")&&_.push(ne)})})}),E.length<0){var X=o.message=new e.Rectangle(W,H,e.yellow);new e.Label("No TextureActives Added").center(X),E.push(X)}o.tile?(o.tile.cols=E.length,o.tile.remake(E)):o.tile=new e.Tile(E,E.length,1,20,0,!0).addTo(t),o.backing.scaleTo(o.tile,100,100,"full").siz(null,t.height,!0),o.swiper&&(o.swiper.sensitivity=e.constrain(p.convert(o.tile.width),-.1,-.01))},this.addPointer=function(A){var D=[];return e.loop(f,function(C){D.indexOf(C.renderer.domElement)<0&&D.push(C.renderer.domElement)}),D.indexOf(A)<0&&D.push(A.renderer.domElement),je.remotePointers?je.remotePointers=D:je.addRemotePointers(t,D),!0},this.setActive=function(A,D){if(A.active=D,!D){var C=e.loop(f,function(E){if(E.active)return!1});C&&(t.mouseInBounds=!1)}};var P=!1,T=this.nav=new e.Panel({width:200,height:80,titleBar:"TextureActives",draggable:!0,close:!0}).pos(50,50,RIGHT,BOTTOM),R=this.slider=new e.Slider({min:0,max:100,damp:!0}).scaleTo(T,80);R.on("mousedown",function(){P=!0,o.swiper.enabled=!1,L()}),R.on("pressup",function(){o.swiper.immediate(R.currentValue),o.swiper.enabled=!0,S(),P=!1}),T.on("close",function(){o.hide(),T.addTo()});var b=0;this.ticker=e.Ticker.add(function(){o.tile.x=-R.currentValue*(o.tile.width-W)/100,l&&!P&&b!=0&&b!=100&&(R.currentValue==0||R.currentValue==100)&&S(),b=R.currentValue}),T.add(R,0,!0),T.removeFrom(),e.Ticker.remove(o.ticker);function L(){l||(l=!0,e.loop(_,function(A){A.enabled=!1}))}function S(){l&&(l=!1,e.loop(_,function(A){A.enabled=!0,A.update()}))}o.swiper=new e.Swiper({swipeOn:o.backing,target:R,property:"currentValue",sensitivity:o.tile?e.constrain(p.convert(tile.width),-.1,-.01):-.1,damp:i}),o.backing.on("mousedown",function(){b=-100,L()}),o.swiper.on("swipestop",S),o.toggled=!1;var k=d.color,m=d.outerColor;this.show=function(){if(!o.toggled)return d.color=o.color,d.outerColor=o.outerColor,o.toggled=!0,e.Ticker.add(o.ticker),T.addTo(),e.loop(f,function(A){A.lastRaycast=A.raycast,A.raycast=!1,A.renderer.domElement.style.display="none"}),je.remoteQueue&&e.loop(o.tile.items,function(A){je.remoteQueue.indexOf(A)<0&&je.remoteQueue.push(A)}),d.canvas.style.display="block",je.removeRemotePointers(t),this},this.hide=function(){if(o.toggled){d.color=k,d.outerColor=m,o.toggled=!1,e.Ticker.remove(o.ticker),T.removeFrom();var A=[];return e.loop(f,function(D){D.raycast=D.lastRaycast,D.renderer.domElement.style.display="block",A.push(D.renderer.domElement)}),je.remoteQueue&&(je.remoteQueue=[],e.loop(o.tile.items,function(D){D.mesh&&(D.mesh.userData.ta_view=!1)})),d.canvas.style.display="none",je.addRemotePointers(t,A),this}},o.toggle=function(A){return n(A)&&(A=!o.toggled),A&&!o.toggled?o.show():!A&&o.toggled&&o.hide(),this},o.keyEvent=d.on("keydown",function(A){A.key==o.toggleKey&&(o.toggled?o.hide():o.show())}),o.remove=function(A){f.remove(A),o.updateTile(null,null,!0)},o.dispose=function(){o.hide(),T.dispose(),d.off("keydown",o.keyEvent),o.backing.removeAllEventListeners(),o.backing.dispose(),o.objects.dispose(),o.tile.dispose(),o.objects=o.tile=T=null}},e.extend(e.TextureActivesManager,je.EventDispatcher),e.Manager=function(t){qe("75");var r=this;this.type=t,this.items=[],this.add=function(l){return Array.isArray(l)?r.items=r.items.concat(l):r.items.push(l),r};var i,o;this.remove=function(l){if(r){if(!l)r.items=[];else for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--){o=l[i];var f=r.items.indexOf(o);f!=-1&&r.items.splice(f,1)}return r}},this.resize=function(l){if(r){if(l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.resize();else for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].resize():r.items.splice(i,1);return r}},this.toggle=function(l,f){if(r){if(f)for(Array.isArray(f)||(f=[f]),d=f.length-1;d>=0;d--)o=f[d],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.toggle(l);else for(var d=r.items.length-1;d>=0;d--)r.items[d].resize?r.items[d].toggle(l):r.items.splice(d,1);return r}},this.dispose=function(l){if(r){if(r.resize=null,l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],r.items.indexOf(o)!=-1&&r.items.splice(r.items.indexOf(o)),o.dispose&&o.dispose();else{for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].dispose():r.items.splice(i,1);r.items=null}return!0}}},e.ResizeManager=function(){qe("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.TransformManager=function(t,r){qe("75.7");var i=this;this.type="TransformManager",this.persistID=r,this.items=[];function o(f){!localStorage||f&&!f.pressup||i.savePersist(f)}this.add=function(f){var d=[];Array.isArray(f)?d=f:d=[f];for(var p,_=!1,P=0;P<d.length;P++)if(p=d[P],p.transformControls&&(p.originalVisible=p.transformControls.visible),p.toggle&&p.toggle(!1),i.items.length==0&&P==0&&(_=!0),p.type=="Blob"||p.type=="Squiggle")i.persistID||_&&(_=!1,p.controlsVisible=!0,i.currentObject=p),p.on("change",function(R){var b=new je.Event("transformed");b.transformObject=R.target,b.transformType=R.controlType,i.dispatchEvent(b)}),p.on("controlsshow",function(R){var b=new je.Event("transformshow");i.currentObject=b.transformObject=R.target,i.dispatchEvent(b)}),p.on("controlshide",function(R){var b=new je.Event("transformhide");b.transformObject=R.target,i.currentObject=null,i.dispatchEvent(b)}),p.on("update",function(R){var b=new je.Event("transformed");b.transformObject=R.target,b.transformType=R.controlType,i.dispatchEvent(b)});else if(p.type=="Connectors")i.persistID||_&&(_=!1,i.currentObject=p),p.on("connection",function(R){var b=new je.Event("transformed");b.transformObject=R.target,b.transformType="connection",i.dispatchEvent(b)});else if(p.type=="Pack")i.persistID||_&&(_=!1,i.currentObject=p),p.on("change",function(R){var b=new je.Event("transformed");b.transformObject=R.target,b.transformType="change",i.dispatchEvent(b)});else{var T=p.transformControls;i.persistID||_&&p.type!="Layer"&&(_=!1,p.originalVisible&&(T.show(),i.currentObject=p)),p.on("transformed",function(R){var b=new je.Event("transformed");b.transformObject=R.target,b.transformType=R.transformType,i.dispatchEvent(b)}),p.on("transformshow",function(R){var b=new je.Event("transformshow");i.currentObject=b.transformObject=R.target,i.dispatchEvent(b)}),p.on("transformhide",function(R){var b=new je.Event("transformhide");b.transformObject=R.target,i.currentObject=null,i.dispatchEvent(b)})}i.items=i.items.concat(f),i.persist&&!n(i.persistID)&&i.persist(i.persistID)},this.remove=function(f){if(n(f)){i.items=[];return}Array.isArray(f)||(f=[f]);for(var d,p=0;p<f.length;p++){d=f[p],i.currentObject==d&&(i.currentObject=null),d.transformedEvent&&(d.off("transformed",d.transformedEvent),d.transformedEvent=null),d.type=="Blob"||d.type=="Squiggle"?d.controlsVisible=!1:d.transformControls&&d.transformControls.remove();var _=i.items.indexOf(d);_!=-1&&i.items.splice(_,1)}r&&i.savePersist()},this.show=function(f){if(!n(f)){if(f.type=="Blob"||f.type=="Squiggle")f.controlsVisible||(f.controlsVisible=!0);else{var d=f.transformControls;if(!d||d.visible)return;d.show()}i.currentObject=f}},this.hide=function(f){if(!n(f))if(i.currentObject==f&&(i.currentObject=null),f.type=="Blob"||f.type=="Squiggle")f.controlsVisible&&(f.controlsVisible=!1);else{var d=f.transformControls;if(!d||d.visible)return;d.hide()}},this.hideAll=function(f){for(var d,p,_=0;_<i.items.length;_++)if(p=i.items[_],!p||!(p.transformControls||p.update))i.items.splice(_);else{if(i.items[_]==f)continue;p.type=="Blob"||p.type=="Squiggle"?p.controlsVisible&&(p.controlsVisible=!1):(d=i.items[_].transformControls,d.visible&&d.hide())}i.currentObject=null},this.resize=function(){if(i){for(var f,d=0;d<i.items.length;d++)f=i.items[d],!f||!(f.transformControls||f.update)?i.items.splice(d):f.type=="Blob"||f.type=="Squiggle"?f.update():f.transformControls.resize();r&&i.savePersist()}},n(t)||i.add(t);var l="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(f){var d,p;if(n(f)&&kt){ht(l);return}i.persistID=f;var _=0;if(localStorage&&localStorage[f]){var P=i.persistData=JSON.parse(localStorage[f]);if(P.length==i.items.length)for(p=0;p<i.items.length;p++)P[p].controls&&(i.currentObject=i.items[p]),P[p]&&(P[p].type=="Blob"||P[p].type=="Squiggle")?(i.items[p].points.length!=P[p].points.length&&(i.items[p].points=P[p].points),i.items[p].setData(P[p]),i.items[p]==i.currentObject&&i.currentObject.toggle(!0),_++,_==P.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):P[p]&&P[p].type=="Connectors"?(i.items[p].setSteps(P[p].steps),i.items[p].loc(P[p].x,P[p].y),i.items[p].sca(P[p].scale),_++,_==P.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):P[p]&&P[p].type=="Pack"?(i.items[p].setOrder(P[p].order),i.items[p].outerWidth=P[p].outerWidth,i.items[p].outerHeight=P[p].outerHeight,_++,_==P.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):P[p]&&(n(i.items[p].transformControls)?-function(){var T=d=i.items[p],R=P[p];e.interval(50,function(b){T.transformControls&&(T.transformControls.setData(R),T.dispatchEvent("persistset"),_++,_==P.length&&(setTimeout(function(){T==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),b.clear()))},20,null,null,"ms")}():(i.items[p].transformControls.setData(P[p]),-function(){var T=d=i.items[p];e.interval(50,function(R){T.dispatchEvent("persistset"),_++,_==P.length&&(setTimeout(function(){T==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),R.clear())},20,null,null,"ms")}()))}for(p=0;p<i.items.length;p++)d=i.items[p],d.transformedEvent||(d.type=="Blob"||d.type=="Squiggle"?(d.transformedEvent=d.on("change",function(T){T.pressup=!0,o(T)}),d.transformedUEvent=d.on("update",function(T){T.pressup=!0,o(T)}),d.transformedSEvent=d.on("controlsshow",function(T){T.pressup=!0,o(T)}),d.transformedHEvent=d.on("controlshide",function(T){T.pressup=!0,o(T)})):d.type=="Connectors"?d.transformedEvent=d.on("connection",function(T){T.pressup=!0,o(T)}):d.type=="Pack"?d.transformedEvent=d.on("change",function(T){T.pressup=!0,o(T)}):(d.transformedEvent=d.on("transformed",o),d.transformedSEvent=d.on("transformshow",o),d.transformedHEvent=d.on("transformhide",o)))},this.savePersist=function(){for(var f=[],d=0;d<i.items.length;d++){var p=i.items[d];p.type=="Blob"||p.type=="Squiggle"?p.recordData&&f.push(p.recordData()):p.type=="Connectors"?f.push({type:p.type,x:p.x,y:p.y,scale:p.scale,steps:p.getSteps()}):p.type=="Pack"?f.push({type:p.type,outerWidth:p.outerWidth,outerHeight:p.outerHeight,order:p.getOrder()}):p.transformControls&&p.transformControls.recordData&&f.push(p.transformControls.recordData())}i.persistData=f,localStorage[i.persistID]=JSON.stringify(f)},this.clearPersist=function(f){if(n(f)&&kt){ht(l);return}i.persistData=null,localStorage&&localStorage.removeItem(f)},this.stopPersist=function(){for(var f=0;f<i.items.length;f++){var d=i.items[f];d.transformedEvent&&(d.type=="Blob"||d.type=="Squiggle"?(d.off("change",d.transformedEvent),d.off("update",d.transformedUEvent),d.off("controlsshow",d.transformedSEvent),d.off("controlshide",d.transformedHEvent)):d.type=="Connectors"?d.off("connection",d.transformedEvent):d.type=="Pack"?d.off("change",d.transformedEvent):(d.off("transformed",d.transformedEvent),d.off("transformshow",d.transformedSEvent),d.off("transformhide",d.transformedHEvent)),d.transformedEvent=null,d.transformedUEvent=null,d.transformedSEvent=null,d.transformedHEvent=null)}i.persistData=null},n(r)||i.persist(r),this.dispose=function(f,d){if(n(f)&&(f=!0),i.removeAllEventListeners(),i.persistID&&f&&i.stopPersist(),d)for(var p=0;p<i.items.length;p++){var _=i.items[p];_.type=="Blob"||_.type=="Squiggle"?_.dispose():_.transformControls.dispose()}}},e.extend(e.TransformManager,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.GuideManager=function(){qe("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.GridManager=function(){qe("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.LayoutManager=function(){qe("81"),e.Manager.call(this,"LayoutManager")},e.LayoutManager.prototype=new e.Manager,e.LayoutManager.prototype.constructor=e.LayoutManager,e.SelectionSet=function(t){qe("81.5"),this.type="SelectionSet",n(t)&&(t=[]),this.selections=t,this.clear=function(){this.selections=[]},this.isSelected=function(r){return this.selections.indexOf(r)>=0},this.add=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear();var f=this.selections.indexOf(r);if(!(f>=0)){if(this.selections.push(r),!n(o)){Array.isArray(o)||(o=[o]);for(var d=0;d<=o.length;d++)o[d].add(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),d=0;d<=l.length;d++)l[d].remove(r,i)}}},this.remove=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||this.selectionManager.setCurrent(this),i||this.clear();var f=this.selections.indexOf(r);if(n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear(),i?f>=0&&this.selections.splice(f,1):this.clear(),!n(o)){Array.isArray(o)||(o=[o]);for(var d=0;d<=o.length;d++)o[d].remove(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),d=0;d<=l.length;d++)l[d].add(r,i)}},this.toggle=function(r,i,o,l){this.isSelected(r)?this.remove(r,i,o,l):this.add(r,i,o,l)},this.dispose=function(){return this.clear(),this.selections=null,!0}},e.SelectionManager=function(t,r,i){qe("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",n(t)&&(t=[]),n(i)&&(i=!0),Array.isArray(t)||(t=[t]),this.sets=t,this.multipleKey=r,this.multipleSets=i,this.multiple=!1;for(var o=this,l=0;l<t.length;l++)t[l].selectionManager=this;this.clear=function(){this.currentSet=null;for(var d=0;d<t.length;d++)t[d].clear()},this.setCurrent=function(d){this.currentSet=d;for(var p=0;p<t.length;p++)t[p]!=d&&(this.multipleSets||t[p].clear())};var f=new je.Event("keydown");this.eventRemove=f.remove,this.keydownEvent=function(d){d.remove=o.eventRemove,o.multipleKey&&(o.multiple=d[o.multipleKey+"Key"]),o.ctrlKey=d.ctrlKey,o.shiftKey=d.shiftKey,o.metaKey=d.metaKey,o.dispatchEvent(d),d.keyCode==90&&(o.ctrlKey||o.metaKey)&&o.dispatchEvent("undo")},fe.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(d){o.multipleKey&&(o.multiple=d[o.multipleKey+"Key"]),o.ctrlKey=d.ctrlKey,o.shiftKey=d.shiftKey,o.metaKey=d.metaKey,d.remove=o.eventRemove,o.dispatchEvent(d)},fe.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),fe.removeEventListener("keydown",this.keydownEvent),fe.removeEventListener("keyup",this.keyupEvent)}},e.extend(e.SelectionManager,je.EventDispatcher,null,"cjsEventDispatcher",!1),typeof y>"u")var y;e.Bind=function(t,r,i,o,l,f,d,p){var _="connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",P;if(P=mt(e.Bind,arguments,_,this))return P;qe("81.8"),this.type="Bind";var T=this;n(t)&&localStorage&&n(y)&&(n(r)||r==e.LOCALSTORAGE)?(t="zimBind",r=e.LOCALSTORAGE):t&&t.match(/\/|\./)?(n(r)&&(r=e.GET),t.match(/\?/)?t+="&":t+="?"):t&&n(r)&&(r=e.LOCALSTORAGE),n(f)&&(f=!0),r==e.LOCALSTORAGE&&!localStorage&&(kt&&ht("Bind() - no localStorage"),T.error="error - no localStorage"),this.connection=t,this.bindType=r,this.master=i,this.masterFilter=o,this.smartDecimals=f,n(d)&&(d=!1),(!y||p)&&(y=this),Object.defineProperty(T,"default",{get:function(){return T==y},set:function(m){!m&&y==T?y=null:m&&(y=T)}}),this.bindType==e.POST&&(T.ajax=new e.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(m,A,D,C,E){if(n(D)||n(A)||n(m))return T;if(T.bindings[m]){if(T.bindings[m].obj!=A)return kt&&ht("Bind() - id can be used with only one object"),T}else{T.ids.indexOf(m)<=0&&T.ids.push(m),T.bindings[m]={obj:A,props:[]},!n(E)&&typeof E=="function"&&(T.bindings[m].filter=E);var X=T.objIDs.at(A);X?X.indexOf(m)<0&&X.push(m):T.objIDs.add(A,[m])}!Array.isArray(D)&&D.constructor!={}.constructor&&(D=[D]);var Z=T.bindings[m].props;Array.isArray(D)?e.loop(D,function(O){V(T.toIDs,O,m),V(T.fromIDs,O,m),Z.indexOf(O)<0&&Z.push(O)}):e.loop(D,function(O,ne){(ne==e.BOTH||ne==e.TO)&&V(T.toIDs,O,m),(ne==e.BOTH||ne==e.FROM)&&V(T.fromIDs,O,m),Z.indexOf(O)<0&&Z.push(O)});function V(O,ne,N){n(O[ne])?O[ne]=[N]:O[ne].indexOf(N)<0&&O[ne].push(N)}return d&&k("Bind Report: ADD ["+m+"]",(D?" "+D:"")+(C?" "+C:"")),T.bindType==e.LOCALSTORAGE?(T.from(null,m,D,C),(!T.data||e.isEmpty(T.data))&&T.to(m,D)):(L("bind",null,[E],T.data,C),T.applyData()),T},this.updatefilter=function(m,A){var D=T.bindings[m];return D&&(n(A)?D.filter&&delete D.filter:typeof A=="function"&&(D.filter=A)),T},this.remove=function(m,A,D,C,E,X){var Z;if(!n(m)&&!Array.isArray(m)&&(m=[m]),!n(m)){Z=[];var V=[];e.loop(m,function(he){typeof he=="string"?Z.push(he):V.push(he)})}!n(A)&&!Array.isArray(A)&&(A=[A]),n(E)&&(E=!0),m=Z.concat(V),m.length==0&&(m=null);var O=R("from",m,A,!1),ne=O[0];O=O[1];var N=L("remove",C,ne,O,D);if(N=="stop")return;var q=e.copy(O);n(A)||A.length==0?(Z.length>0&&e.loop(Z,function(he){ae(he,!0)}),V.length>0&&e.loop(V,function(he){Z=T.objIDs.at(he),Z.length>0&&e.loop(Z,function($){ae($,!1)}),T.objIDs.remove(he)})):(Z=[],e.loop(O,function(he,$){var G=T.bindings[he],v=G.props;e.loop($,function(w){var h=v.indexOf(w);h>=0&&v.splice(h,1),ie(w,he)}),v.length==0&&Z.push(he)}),Z.length>0&&T.remove(Z));function U(he){X&&typeof X=="function"&&(l&&(he=e.couple(he)),X(he)),d&&k("Bind Report: REMOVE"+(D?" ["+D+"]":""),he)}if(E){var z="type="+T.bindType+"&";T.bindType==e.LOCALSTORAGE?(T.to(),U("success")):T.bindType==e.GET?(N=JSON.stringify(q),l&&(N=e.couple(N)),e.async(T.connection+z+"remove="+N,U,"callbackRemove")):T.bindType==e.POST?T.ajax.post(T.connection+z,q,U,"remove"):T.bindType==e.SOCKET}function ie(he,$){var G,v;G=T.fromIDs[he],G&&(v=G.indexOf($),v>=0&&G.splice(v,1),G.length==0&&delete T.fromIDs[he]),G=T.toIDs[he],G&&(v=G.indexOf($),v>=0&&G.splice(v,1),G.length==0&&delete T.toIDs[he])}function ae(he,$){var G=T.bindings[he].obj,v=T.bindings[he].props,w=T.objIDs.at(G),h=w.indexOf(he);h>=0&&w.splice(h,1),$&&w.length==0&&V.push(G),h=T.ids.indexOf(he),h>=0&&T.ids.splice(h,1),e.loop(v,function(I){ie(I,he)}),delete T.bindings[he]}return T};function R(m,A,D){var C=[],E;if(n(A)&&n(D)){if(m=="from"&&T.bindType!=e.LOCALSTORAGE)return e.loop(T.bindings,function(O){O.filter&&C.push(O.filter)}),[C,"full"];E=T.ids}else!n(A)&&!Array.isArray(A)&&(A=[A]),!n(D)&&!Array.isArray(D)&&(D=[D]),A&&(E=[],e.loop(A,function(O){if(typeof O=="string")E.indexOf(O)<0&&E.push(O);else{var ne=T.objIDs.at(O);ne&&e.loop(ne,function(N){E.indexOf(N)<0&&E.push(N)})}}));var X={};return E?Z(D):D&&V(),[C,X];function Z(O){e.loop(E,function(ne){var N=T.bindings[ne];if(N){N.filter&&C.push(N.filter);var q=N.obj;e.loop(O||N.props,function(U){var z=T.toIDs[U];if(z&&z.indexOf(ne)>=0)if(m=="from")X[ne]||(X[ne]=[]),X[ne].push(U);else{X[ne]||(X[ne]={});var ie=q[U];typeof ie=="number"&&T.smartDecimals&&(ie>1?ie=e.decimals(ie,1):ie=e.decimals(ie,2)),X[ne][U]=e.copy(ie)}})}})}function V(){var O=[];e.loop(D,function(ne){e.loop(T.toIDs[ne],function(N){var q=T.bindings[N];O.indexOf(N)<0&&(q.filter&&C.push(q.filter),O.push(N));var U=q.obj;if(m=="from")X[N]||(X[N]=[]),X[N].push(ne);else{X[N]||(X[N]={});var z=U[ne];typeof z=="number"&&T.smartDecimals&&(z>1?z=e.decimals(z,1):z=e.decimals(z,2)),X[N][ne]=e.copy(z)}})})}}this.stopProcess=!1,this.stop=function(){T.stopped=!0};var b=function(){var m=this;m.stop=function(){m.stopped=!0}};function L(m,A,D,C,E){var X=new b,Z=C!=null&&!e.isEmpty(C)&&T.data;if(S(X,E))return["stop",C];T.masterFilter&&typeof T.masterFilter=="function"&&(C=T.data=T.masterFilter(C,m,E,X));var V=e.loop(D,function(O){if(typeof O=="function"){if(S(X,E))return"stop";C=T.data=O(C,m,E,X)}});return V=="stop"||S(X,E)?["stop",C]:(A&&typeof A=="function"&&(C=T.data=A(C,m,E,X)),S(X,E)?["stop",C]:(Z&&!T.data&&kt&&ht("Bind()"+(m?" ["+m+"]":"")+(E?" ["+E+"]":"")+" - warning, a filter may not have returned data"),["go",C]))}function S(m,A){if(T.stopped||m.stopped)return k("STOP"+(A?" ["+A+"]":""),m.stopped?"process stopped":"bind stopped"),m.stopped?m.stop=null:T.stopped=!1,!0}this.to=function(m,A,D,C,E,X,Z,V){var O="targets, props, extra, filter, smartDecimals, call, lock, unique",ne;if(ne=mt(T.to,arguments,O))return ne;var N=R("to",m,A,E),q=N[0];N=N[1];var U=L("to",C,q,N,D);if(N=U[1],U[0]=="stop")return;if(T.bindType==e.LOCALSTORAGE)localStorage[T.connection]=JSON.stringify(N),w(N);else{var z="type="+T.bindType+"&";if(!N||e.isEmpty(N))return T;if(T.bindType==e.GET){var ie=N;e.isJSON(ie)||(ie=JSON.stringify(ie)),l&&(ie=e.couple(ie)),d&&k("Bind Report: TO [bindings]",ie),ie=e.urlEncode(ie);var ae=n(T.master)?"":"&master="+e.urlEncode(i),he=n(Z)?"":"&lock="+e.urlEncode(Z),$=n(V)?"":"&unique="+e.urlEncode(V),G=n(D)?"":"&extra="+e.urlEncode(D),v=T.connection+z+"command=to&data="+ie+ae+he+$+G;d&&k("Bind Report: TO [url]",v),e.async(v,w,"callbackTo")}else T.bindType==e.POST&&(T.ajax.master=i,T.ajax.couple=l,T.ajax.lock=Z,T.ajax.unique=V,d&&k("Bind Report: TO [bindings]",N),T.ajax.post(T.connection+z,N,"to",D,w))}function w(h){l&&(h=e.decouple(h)),X&&typeof X=="function"&&X(h),d&&k("Bind Report: TO"+(D?" ["+D+"]":" -"),h)}return T},this.toLock=function(m,A,D,C,E,X){var Z="targets, props, extra, filter, smartDecimals, call",V;if(V=mt(T.toLock,arguments,Z))return V;if(T.bindType.toLowerCase()=="localstorage")return T.to(m,A,D,C,E,X),T;var O=e.makeID();T.from(ne,m,A,D,C,O);function ne(){T.to(m,A,D,C,E,X,O)}return T},this.toUnique=function(m,A,D,C,E,X){var Z="targets, props, extra, filter, smartDecimals, call",V;return(V=mt(T.toUnique,arguments,Z))?V:(T.to(m,A,D,C,E,X,null,!0),T)},this.toggleReport=function(m){return n(m)?d=!d:d=m,T},d&&k("Bind Report: CREATE ["+r.toUpperCase()+"]",t+(i?" "+i:""));function k(m,A){T==y?Sr(m,A):Ir(m,A)}return this.report=function(){var m="Bind {DATA} Report:",A=e.copy(T.data);return T==y?Sr(m,A):Ir(m,A),m="Bind {BINDINGS} Report:",A=e.copy(T.bindings),T==y?Sr(m,A):Ir(m,A),T},this.from=function(m,A,D,C,E,X){var Z="call, targets, props, extra, filter, lock",V;if(V=mt(T.from,arguments,Z))return V;var O=R("from",A,D,f),ne=O[0];O=O[1];var N=L("fromTo",E,ne,O,C);if(O=N[1],N[0]=="stop")return;var q="type="+T.bindType+"&";if(T.bindType==e.LOCALSTORAGE)(!localStorage[T.connection]||localStorage[T.connection]==null)&&(localStorage[T.connection]="{}"),T.data=JSON.parse(localStorage[T.connection]),$(T.data);else if(T.bindType==e.GET){var U=O;e.isJSON(U)||(U=JSON.stringify(U)),l&&(U=e.couple(U)),d&&k("Bind Report: FROM [bindings]",U),U=e.urlEncode(U);var z=n(T.master)?"":"&master="+e.urlEncode(i),ie=n(X)?"":"&lock="+e.urlEncode(X),ae=n(C)?"":"&extra="+e.urlEncode(C),he=T.connection+q+"data="+U+"&command=from"+z+ie+ae;d&&k("Bind Report: FROM [url]",he),e.async(he,$,"callbackFrom")}else T.bindType==e.POST&&(T.ajax.master=i,T.ajax.couple=l,T.ajax.lock=X,d&&k("Bind Report: FROM [bindings]",O),T.ajax.post(T.connection+q,O,"from",C,$));function $(G){if(T.data=G,l&&(T.data=e.decouple(T.data)),!n(X))var v=JSON.stringify(T.data);var w=L("from",E,ne,T.data,C);if(w[0]!="stop"){var h=!1;(n(X)||v!=JSON.stringify(T.data))&&(h=!0,T.applyData()),d&&k("Bind Report: FROM"+(C?" ["+C+"]":" -"),h?T.data:"data not applied in toLock()"),m&&typeof m=="function"&&m(T.data)}}return T},this.applyData=function(){return e.loop(T.data,function(m,A){var D=T.bindings[m];if(D){var C=T.bindings[m].obj;e.loop(A,function(E,X){C[E]=X})}}),T},this.clear=function(){return T.bindType==e.LOCALSTORAGE&&(localStorage[T.connection]=null),T},this.removeAllBindings=function(m,A){if(n(m)&&(m=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},m){var D="type="+T.bindType+"&";if(T.bindType==e.LOCALSTORAGE)T.clear(),E("success");else if(T.bindType==e.GET){var C=n(T.master)?"":"&master="+encodeURI(i);e.async(T.connection+D+"command=removeAll"+C,E,"callbackRemoveAll")}else T.bindType==e.POST&&(T.ajax.master=i,T.ajax.post(T.connection+D,{},"removeAll",null,E,"removeAll"))}function E(X){A&&typeof A=="function"&&A(X),d&&k("Bind Report: REMOVEALL",X)}return T},T},e.Swipe=function(t,r,i,o,l){var f="obj, distance, duration, isometric, overrideNoSwipe",d;if(d=mt(e.Swipe,arguments,f,this))return d;if(qe("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",n(t)||!t.on){ht("zim controls - Swipe():\nPlease pass in object");return}n(r)&&(r=30);var p=g(i);n(i)&&(i=p=="s"?.08:80),this.distance=r,this.duration=i,this.active=!0;var _,P,T,R,b,L,S=this,k,m,A=t.on("mousedown",function(D){if(!S.active||!l&&D.target.zimNoSwipe)return;S.obj=D.target,R=_=D.stageX/e.scaX,b=P=D.stageY/e.scaY,T=!0,S.dispatchEvent("swipedown"),clearTimeout(L),L=setTimeout(function(){T&&(C(),T=!1)},S.duration*(p=="s"?1e3:1)),k=t.on("pressmove",function(E){R=E.stageX/e.scaX,b=E.stageY/e.scaY}),m=t.on("pressup",function(){T&&(C(),T=!1,clearTimeout(L))});function C(){var E=new je.Event("swipe");if(E.obj=S.obj,E.stageX=D.stageX/e.scaX,E.stageY=D.stageY/e.scaY,E.rawX=D.rawX/e.scaX,E.rawY=D.rawY/e.scaY,E.swipeX=E.swipeY=0,S.direction="none",o){if(Math.abs(R-_)>S.distance||Math.abs(b-P)>S.distance){var X=Math.atan2(b-P,R-_)*180/Math.PI;X=(X+360)%360,X>=270&&X<360?(E.swipeY=-1,S.direction="up"):X>=0&&X<90?(E.swipeX=1,S.direction="right"):X>=90&&X<180?(E.swipeY=1,S.direction="down"):X>=180&&X<270&&(E.swipeX=-1,S.direction="left")}}else Math.abs(R-_)>Math.abs(b-P)?(R-_>S.distance&&(E.swipeX=1,S.direction="right"),_-R>S.distance&&(E.swipeX=-1,S.direction="left")):(b-P>S.distance&&(E.swipeY=1,S.direction="down"),P-b>S.distance&&(E.swipeY=-1,S.direction="up"));S.dispatchEvent(E)}});this.disable=function(){S.active=!1},this.enable=function(){S.active=!0},this.dispose=function(){A&&t.off("mousedown",A),k&&t.off("pressmove",k),m&&t.off("pressup",m)}},e.extend(e.Swipe,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swiper=function(t,r,i,o,l,f,d,p,_,P,T,R,b){var L="swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",S;if(S=mt(e.Swiper,arguments,L,this))return S;if(qe("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",n(t)||!t.getStage||!t.stage){ht("zim.Swiper() - please provide container on stage");return}if(n(r))return;n(o)&&(o=1),n(l)&&(l="horizontal"),n(p)&&(p=.1),p===!1&&(p=1),n(_)&&(_=!1),n(P)&&(P=1),n(T)&&(T=!1);var k=g(R);n(R)&&(R=k=="s"?.2:200);var m=this,A=t,D,C,E=m.desiredValue=r[i],X;this.target=r,this.property=i,this.sensitivity=o;var Z=!1,V=fe.zdf||t.stage?t.stage.frame:{};A.canvas?(X=A,m.downEvent=A.on("stagemousedown",function(Y){Z=!0,$(Y),m.moveEvent=A.on("stagemousemove",G),m.upEvent=A.on("stagemouseup",O),m.upEvent2=V.on("mouseupplus",O)})):(X=A.stage,x(),m.downEvent=A.on("mousedown",$),m.moveEvent=A.on("pressmove",G),m.upEvent=A.on("pressup",ne),m.upEvent2=V.on("mouseupplus",ne));function O(){Z=!1,A.off("stagemousemove",m.moveEvent),A.off("stagemouseup",m.upEvent),m.dispatchEvent("swipeup")}function ne(){Z=!1,m.dispatchEvent("swipeup")}var N,q,U,z=Math.sqrt(Math.pow(A.width,2)+Math.pow(A.height,2)),ie,ae,he=!1;function $(Y){he=!0,X=Y.target.stage,U=(A.parent?A.parent:A).localToGlobal(A.x,A.y),Z=!0,l=="radial"?(ie=Y.stageX/e.scaX,ae=Y.stageY/e.scaY,N=Math.atan2(ae-U.y,ie-U.x)*e.DEG):D=l=="horizontal"?Y.stageX/e.scaX:Y.stageY/e.scaY,C=m.target[m.property],m.dispatchEvent("swipedown")}function G(Y){if(Z){if(l=="radial"){m.diff=e.dist(ie,ae,Y.stageX/e.scaX,Y.stageY/e.scaY),q=Math.atan2(Y.stageY/e.scaY-U.y,Y.stageX/e.scaX-U.x)*e.DEG;var K=e.sign(N-q);if(Math.abs(q-N)>180){Z=!1;return}m.diff=m.diff*K;var ge=Math.max(10,e.dist(U.x,U.y,Y.stageX/e.scaX,Y.stageY/e.scaY));m.diff*=(z-ge)/z}else m.diff=D-(l=="horizontal"?Y.stageX/e.scaX:Y.stageY/e.scaY);if(b&&(Math.abs(m.diff)<Math.abs(b.diff)?(m.override=!0,b.override=!1):(m.override=!1,b.override=!0)),!m.override){if(Math.abs(m.diff)>0&&(m.swiperMoving=!0),E=C-m.diff*m.sensitivity*P,!n(f)&&!n(d)&&T){var ye=E;E=(E+(d-f)*1e4-f)%(d-f)+f,Math.abs(ye-E)>Math.abs(d-f)*.8&&(m.immediate(E),D=l=="horizontal"?Y.stageX/e.scaX:Y.stageY/e.scaY,C=m.target[m.property])}else n(f)||(E=Math.max(E,f)),n(d)||(E=Math.min(E,d));m.desiredValue=E,m.dispatchEvent("swipemove")}}}var v=new e.Damp(m.target[m.property],p),w=E,h=E;m.swiperTicker=e.Ticker.add(function(){E==w?E!=h&&(m.pauseTimeout&&m.pauseTimeout.clear(),h=E,m.pauseTimeout=e.timeout(R,function(){Z&&m.dispatchEvent("swipepause"),m.pauseTimeout=null})):(h=null,w=E,m.pauseTimeout&&m.pauseTimeout.clear()),m.swiperMoving&&(m.target[m.property]=_?Math.round(v.convert(E)):v.convert(E),he&&!Z&&Math.abs(m.target[m.property]-E)<Math.abs(o)/2&&(m.swiperMoving=!1,he=!1,m.target[m.property]=E,m.immediate(m.target[m.property]),m.dispatchEvent("swipestop")))},X),this.immediate=function(Y){v.immediate(Y),m.target[m.property]=_?Math.round(Y):Y,m.desiredValue=E=Y};var I=!0;Object.defineProperty(m,"enabled",{get:function(){return I},set:function(Y){I!=Y&&(Y?Ae():F(),I=!!Y)}}),Object.defineProperty(m,"desiredValue",{get:function(){return E},set:function(Y){m.swiperMoving=!0,E=Y}}),Object.defineProperty(m,"damp",{get:function(){return p},set:function(Y){p=Y,v.damp=p}});function Q(){A.off("stagemousedown",m.downEvent),A.off("stagemousemove",m.moveEvent),A.off("stagemouseup",m.upEvent),V.off("mouseupplus",m.upEvent2)}function x(){A.off("mousedown",m.downEvent),A.off("pressmove",m.moveEvent),A.off("pressup",m.upEvent),V.off("mouseupplus",m.upEvent2)}function F(){A.canvas?Q():x(),e.Ticker.remove(m.swiperTicker)}function Ae(){A.canvas?m.downEvent=A.on("stagemousedown",m.downEvent):(m.downEvent=A.on("mousedown",m.downEvent),m.moveEvent=A.on("pressmove",m.moveEvent),m.upEvent=A.on("pressup",m.upEvent),m.upEvent2=V.on("mouseupplus",m.upEvent2)),m.immediate(m.target[m.property]),m.swiperTicker=e.Ticker.add(m.swiperTicker,X)}this.dispose=function(){F(),v=null,m.swiperTicker=null}},e.extend(e.Swiper,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V){var O="target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBoundary, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate, mouseOutside",ne;if(ne=mt(e.MotionController,arguments,O,this))return ne;qe("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var N=this,q,U="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(n(k))if(fe.zdf)q=k=fe.zdf.stage;else{ht(U);return}else if(n(k.stage))if(fe.zdf)q=fe.zdf.stage;else{ht(U);return}else q=k.stage;var z=q.frame;n(P)||(Z=P),n(t)&&(t=new e.Container(1,1,null,null,!1));var ie=t.type=="Accelerator";if(n(i)&&(i=r=="pressmove"?20:7),!n(r)&&r.type=="DPad"){var ae=r;r="manual",n(o)&&(o=ae.axis),o=="all"&&(o="both"),ae.on("change",function(){N.convert(t.x+ae.dirX*i,t.y+ae.dirY*i)})}(n(r)||r!="mousemove"&&r!="pressmove"&&r!="pressdrag"&&r!="keydown"&&r!="gamebutton"&&r!="gamestick"&&r!="swipe"&&r!="follow"&&r!="manual")&&(r="mousedown"),n(o)&&(o=ie?"horizontal":"both"),r=="keydown"&&n(f)&&(f=[[65,37],[68,39],[87,38],[83,40]]),r=="gamebutton"&&n(f)&&(R?f=[14,15,e.GamePad.RT,e.GamePad.LT]:f=[14,15,12,13]),r=="gamestick"&&n(f)&&(R?f=[[0,2],[0,2],[1],[1]]:f=[0,0,1,1]),r=="gamestick"&&n(f)&&(f=[0,0,1,1]),n(d)&&(d=!0),(o=="horizontal"||o=="vertical")&&(d=!1),(n(p)||p===!0)&&(p=r=="keydown"||r=="gamebutton"?1:r=="pressmove"?.5:.1),p===!1&&(p=1),n(R)&&(R=!1),n(b)&&(b=i*.4),n(L)&&(L=4),n(S)&&(S=.2),n(A)&&(A=!0),q.mouseMoveOutside=A,n(D)&&(D=[]),Array.isArray(D)||(D=[D]),t.type=="Pen"&&!t.move?D.push(t,t.paper):D.push(t),l&&l.getBounds&&(D?D.indexOf(l)==-1&&D.push(l):D=[l]),t.motionController=this,this.mousedownIncludes=D,k&&k.backing&&this.mousedownIncludes.push(k.backing),n(X)&&(X=.3),N.dampKeyup=X,this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=b,this.axis=o,this.target=t,this.moveThreshold=L,this.stickThreshold=S,this.boundary=l,t.zimMCStartAngle=t.rotation;var he=N.speed,$=N.speed,G=0;N.rotation=t.zimMCStartAngle;var v,w;if(ie){w=k.getBounds();var h;!w||o=="vertical"&&!w.height||o!="vertical"&&!w.width?h=1e3:h=o=="vertical"?w.height:w.width,n(C)&&(C=0),n(E)&&(E=100),n(this.target.percentSpeed)&&(this.target.percentSpeed=(E-C)/2),N.x=h/2,N.y=h/2,v=new e.Proportion(0,h,C,E)}else N.x=this.target.x,N.y=this.target.y;var I=N.scaleX=t.scaleX,Q=N.scaleY=t.scaleY,x,F,Ae,Y,K=!1,ge=!1,ye,ee,ce,ve,Re;if(r=="keydown"||r=="gamebutton"){for(ee=0;ee<4;ee++)Array.isArray(f[ee])||(f[ee]=[f[ee]]);var se=[0,0,0,0],Oe=[],J=["X","X","Y","Y"],xe=[-1,1,-1,1],te={dirX:0,dirY:0};if(r=="keydown")var we=z.on("keydown",We);else{ve=N.gamepad=new e.GamePad;var ke=ve.on("buttondown",We)}if(n(T))if(r=="keydown")var pe=z.on("keyup",oe);else var Me=ve.on("buttonup",oe);Re={rotation:0,speedX:N.speed,speedY:N.speed};var Ue=e.Ticker.add(function(){if(R){Ve(te);return}var rt=N.speed,Ce=N.speed;if(N.axis=="both"&&te.dirX!=0&&te.dirY!=0){var ze=Be(te.dirX,te.dirY);rt=ze.speedX,Ce=ze.speedY}(N.axis=="horizontal"||N.axis=="both")&&(N.x+=rt*te.dirX),(N.axis=="vertical"||N.axis=="both")&&(N.y+=Ce*te.dirY),De()},q)}else if(r=="mousedown"||r=="mousemove")x=q.on("stage"+r,function(rt){q=rt.target.stage;var Ce,ze;if(!V&&N.boundary&&!N.boundary.type=="Blob"?ze=N.boundary:!V&&k&&k.boundsToGlobal&&(ze=k.boundsToGlobal()),!(ze&&(Ce={x:rt.stageX/e.scaX,y:rt.stageY/e.scaY},Ce.x<ze.x||Ce.x>ze.x+ze.width||Ce.y<ze.y||Ce.y>ze.y+ze.height))){if(r=="mousedown"){if(Array.isArray(N.mousedownIncludes)||(N.mousedownIncludes=[N.mousedownIncludes]),N.mousedownIncludes.indexOf(k)<0)for(ee=0;ee<k.numChildren;ee++){var Xe=k.getChildAt(ee);if(N.mousedownIncludes.indexOf(Xe)==-1&&Xe.mouseEnabled&&Xe.hitTestPoint&&Xe.hitTestPoint(rt.stageX/e.scaX,rt.stageY/e.scaY))return}N.dispatchEvent("mousedown")}var Ze=k.globalToLocal(A?rt.rawX/e.scaX:rt.stageX/e.scaX,A?rt.rawY/e.scaY:rt.stageY/e.scaY);N.x=Ze.x,N.y=Ze.y,De()}});else if(r=="pressmove"||r=="pressdrag"||r=="follow")t.type=="Pen"&&(t.write=!1),x=q.on("stagemousedown",function(rt){var Ce,ze;if(!V&&N.boundary&&!N.boundary.type=="Blob"?ze=N.boundary:!V&&k&&k.boundsToGlobal&&(ze=k.boundsToGlobal()),!(ze&&(Ce={x:rt.stageX/e.scaX,y:rt.stageY/e.scaY},Ce.x<ze.x||Ce.x>ze.x+ze.width||Ce.y<ze.y||Ce.y>ze.y+ze.height))&&!(N.boundary&&N.boundary.type=="Blob"&&(r=="pressmove"||r=="pressdrag")&&(Ce={x:rt.stageX/e.scaX,y:rt.stageY/e.scaY},!N.boundary.shape.hitTestPoint(Ce.x,Ce.y)))&&!(r=="pressdrag"&&!t.hitTestPoint(rt.stageX/e.scaX,rt.stageY/e.scaY))){ge=!1,Array.isArray(N.mousedownIncludes)||(N.mousedownIncludes=[N.mousedownIncludes]);var Xe=!1;for(N.mouseDownIncludes&&(ye=q.getObjectUnderPoint(rt.stageX,rt.stageY,1)),ee=0;ee<N.mousedownIncludes.length;ee++)ye&&N.mousedownIncludes[ee].hitTestPoint&&N.mousedownIncludes[ee].hitTestPoint(rt.stageX/e.scaX,rt.stageY/e.scaY)&&N.mousedownIncludes[ee].contains(ye)&&(Xe=!0);if(!Xe)for(ee=0;ee<k.numChildren;ee++){var Ze=k.getChildAt(ee);if(N.mousedownIncludes.indexOf(Ze)==-1&&Ze.mouseEnabled&&Ze.hitTestPoint&&Ze.hitTestPoint(rt.stageX/e.scaX,rt.stageY/e.scaY))return}var ot=k.globalToLocal(A?rt.rawX/e.scaX:rt.stageX/e.scaX,A?rt.rawY/e.scaY:rt.stageY/e.scaY);r!="follow"&&r!="pressdrag"&&N.immediate(o=="both"||o=="horizontal"?ot.x:null,o=="both"||o=="vertical"?ot.y:null),De(),N.dispatchEvent("mousedown"),K=!0,N.moveX=A?rt.rawX/e.scaX:rt.stageX/e.scaX,N.moveY=A?rt.rawY/e.scaY:rt.stageY/e.scaY,F=q.on("stagemousemove",function(Ge){N.moveX=A?Ge.rawX/e.scaX:Ge.stageX/e.scaX,N.moveY=A?Ge.rawY/e.scaY:Ge.stageY/e.scaY,r!="follow"&&Ye()}),Y&&e.Ticker.remove(Y),r=="follow"&&(Y=e.Ticker.add(Ye)),t.type=="Pen"&&(t.write=!0,t.paper.noMouse(),t.zimDragCheck=!0)}}),Ae=q.on("stagemouseup",function(){t.type=="Pen"&&(t.write=!1,t.paper.mouse(),t.zimDragCheck=!1,ge&&t.stopCheck()),Y&&e.Ticker.remove(Y),q.off("stagemousemove",F),K=!1});else if(r=="gamestick"){for(ve=this.gamepad=new e.GamePad,ee=0;ee<4;ee++)Array.isArray(f[ee])||(f[ee]=[f[ee]]);Re={rotation:t.zimMCStartAngle,speedX:N.speed,speedY:N.speed};var ue=ve.on("data",function(rt){for(te={dirX:0,dirY:0},ee=0;ee<f[0].length;ee++)if(ce=rt.axes[f[0][ee]],Math.abs(ce)>N.stickThreshold){te.dirX=ce;break}for(ee=0;ee<f[2].length;ee++)if(ce=rt.axes[f[2][ee]],Math.abs(ce)>N.stickThreshold){te.dirY=ce;break}if(R){Ve(te);return}N.x+=N.speed*te.dirX,N.y+=N.speed*te.dirY,De()})}else if(r=="swipe")var Ee=new e.Swiper(q,N,"x",.8),Te=new e.Swiper(q,N,"y",.8,!1),_e=Ee.on("swipemove",function(){De()});function We(rt){var Ce=r=="keydown"?rt.keyCode:rt.buttonCode,ze;for(ee=0;ee<4;ee++)if(f[ee].indexOf(Ce)>-1){if(!d&&N.axis=="both"&&(te.dirX=te.dirY=0),te["dir"+J[ee]]=xe[ee],se[ee]=1,ze=Oe.indexOf(ee),ze==0)return;ze>0&&Oe.splice(ze,1),Oe.unshift(ee);return}}function oe(rt){var Ce=r=="keydown"?rt.keyCode:rt.buttonCode,ze;for(ee=0;ee<4;ee++)if(f[ee].indexOf(Ce)>-1){if(se[ee]=0,ze=Oe.indexOf(ee),ze>=0&&Oe.splice(ze,1),N.axis!="both"||d)te["dir"+J[ee]]=-se[Math.floor(ee/2)*2]+se[Math.floor(ee/2)*2+1];else if(Oe.length>0){te["dir"+J[ee]]=0;var Xe=Oe[0];te["dir"+J[Xe]]=xe[Xe]}else te.dirX=te.dirY=0;return}}function Ye(){var rt=k.globalToLocal(N.moveX,N.moveY);N.x=rt.x,N.y=rt.y,De(),t.type=="Pen"&&!ge&&t.drawing&&(ge=!0)}function Ve(rt){Re.rotation+=rt.dirX*N.turnSpeed,N.rotation=Re.rotation,Re.speedX=Math.sin(Re.rotation*Math.PI/180)*N.speed*-rt.dirY,Re.speedY=-Math.cos(Re.rotation*Math.PI/180)*N.speed*-rt.dirY,N.x+=Re.speedX,N.y+=Re.speedY}function De(){var rt=N.x-(ie?N.target.percentSpeed:N.target.x),Ce=N.y-(ie?N.target.percentSpeed:N.target.y),ze=Be(rt,Ce);if(he=ze.speedX,$=ze.speedY,!!Z){if(n(ze.angle)||(N.rotation=ze.angle+t.zimMCStartAngle),n(N.rotation)){N.rotation=N.target.rotation;return}N.rotation+=G;var Xe=de(N.rotation),Ze=N.target.rotation=de(N.target.rotation);Math.abs(Xe-Ze)>180&&(Ze>Xe?Ze-=360:Xe-=360),N.dampR.immediate(Ze),N.target.rotation=Ze,N.rotation=Xe}}function de(rt){return(rt%360+360)%360}function Be(rt,Ce){var ze=N.speed,Xe=N.speed,Ze,ot=Math.sqrt(Math.pow(rt,2)+Math.pow(Ce,2));return ot>0&&(ze=Math.abs(rt)/ot*N.speed,Xe=Math.abs(Ce)/ot*N.speed,Ze=90-Math.atan2(rt,Ce)*180/Math.PI),{speedX:ze,speedY:Xe,angle:Ze}}var Qe=this.x,Ke=this.y,lt=this.x,gt=this.y,He=this.x=ie?h/2:this.target.x,it=this.y=ie?h/2:this.target.y;this.dampX=new e.Damp(He,p),this.dampY=new e.Damp(it,p),this.dampR=new e.Damp(this.target.rotation,p);var ft=0,Se=0,Fe=e.Ticker.add(function(){if(r=="manual"&&De(),N.boundary&&N.boundary.type!="Blob"&&(N.x=e.constrain(N.x,N.boundary.x,N.boundary.x+N.boundary.width),N.y=e.constrain(N.y,N.boundary.y,N.boundary.y+N.boundary.height)),N.axis=="horizontal"||N.axis=="both"){if(N.dirX=e.sign(N.x-He),Math.abs(N.x-He)<he?He=N.x:He+=N.dirX*he,te&&te.dirX==0){var rt=N.boundary?N.boundary.width/2:q.width/2,Ce=N.x-(N.x-rt)*(ie?N.dampKeyup:0);He=Ce,N.x=He}ie&&w&&w.width?N.target.percentSpeed=v.convert(N.dampX.convert(He)):N.target.x=N.dampX.convert(He)}if(N.axis=="vertical"||N.axis=="both"){if(N.dirY=e.sign(N.y-it),Math.abs(N.y-it)<$?it=N.y:it+=e.sign(N.y-it)*$,te&&te.dirY==0){rt=N.boundary?N.boundary.height/2:q.height/2;var ze=N.y-(N.y-rt)*(ie?N.dampKeyup:0);it=ze,N.y=it}ie&&w&&w.height?N.target.percentSpeed=v.convert(N.dampY.convert(it)):N.target.y=N.dampY.convert(it)}if(N.boundary&&N.boundary.type=="Blob"&&(N.boundary.shape.hitTestPoint(N.target.x,N.target.y)?(Qe=N.target.x,Ke=N.target.y):(N.target.x=N.x=Qe,N.target.y=N.y=Ke,N.immediate(Qe,Ke))),r=="pressmove"&&K&&N.dispatchEvent("pressing"),p==1?(N.movingX=Math.round(lt-N.x)!=0,N.movingY=Math.round(gt-N.y)!=0,lt=N.x,gt=N.y):(N.movingX=Math.abs(He-(ie?N.target.percentSpeed:N.target.x))>N.moveThreshold,N.movingY=Math.abs(it-(ie?N.target.percentSpeed:N.target.y))>N.moveThreshold),N.moving&&!(N.movingX||N.movingY)?N.dispatchEvent("stopmoving"):!N.moving&&(N.movingX||N.movingY)&&N.dispatchEvent("startmoving"),N.moving=N.movingX||N.movingY,N.moving&&N.dispatchEvent("moving"),N.dirX!=ft||N.dirY!=Se){var Xe=new je.Event("change"),Ze;N.dirX!=ft?(Ze=["left",null,"right"],Xe.dir=Ze[N.dirX+1],ft=N.dirX,!t.zimMCStartAngle&&(_=="horizontal"||_=="both")&&(N.scaleX=t.scaleX=N.dirX?Math.abs(t.scaleX)*N.dirX:t.scaleX,I!=0&&Math.round(N.scaleX/I)==-1?G=180:G=0)):(Ze=["up",null,"down"],Xe.dir=Ze[N.dirY+1],Se=N.dirY,!t.zimMCStartAngle&&(_=="vertical"||_=="both")&&(N.scaleY=t.scaleY=N.dirY?-Math.abs(t.scaleY)*N.dirY:t.scaleY,Q!=0&&Math.round(N.scaleY/Q)==-1?G=180:G=0)),N.dispatchEvent(Xe)}Z&&!n(N.rotation)&&(N.target.rotation=N.dampR.convert(N.rotation))},q);this.immediate=function(rt,Ce,ze){return!n(rt)&&N.dampX&&(N.dampX.immediate(rt),ie?N.x=N.target.percentSpeed=He=rt:N.x=N.target.x=He=rt,Ee&&Ee.immediate(rt)),!n(Ce)&&N.dampY&&(N.dampY.immediate(Ce),ie?N.y=N.target.percentSpeed=it=Ce:N.y=N.target.y=it=Ce,Te&&Te.immediate(Ce)),!n(ze)&&N.dampR&&(N.dampR.immediate(ze),N.rotation=N.target.rotation=ze),Qe=N.x,Ke=N.y,N},this.convert=function(rt,Ce){n(rt)||(N.x=rt),n(Ce)||(N.y=Ce),De()},Object.defineProperty(N,"pausingSpeed",{get:function(){return N.speed},set:function(rt){N.speed=rt}}),this.paused=!1;var me;this.pause=function(rt,Ce,ze){return n(rt)&&(rt=!0),n(Ce)&&(Ce=0),n(ze)&&(ze=!1),rt?(me=N.speed,Ce>0?(e.animate({target:N,obj:{pausingSpeed:0},ticker:!1,time:Ce,call:function(){N.speed=0,N.paused=!0,N.enabled=!1,N.immediate(N.target.x,N.target.y),N.dispatchEvent("pause")}}),ze&&(K=!1,F&&q.off("stagemousemove",F),Y&&e.Ticker.remove(Y),t.type=="Pen"&&(t.write=!1,t.zimDragCheck=!1),Ae&&q.off("stagemouseup",Ae),ge&&t.stopCheck(),r=="keydown"?pe&&z.off("keyup",pe):Me&&ve.off("buttonup",Me))):(N.speed=0,N.paused=!0,N.enabled=!1,N.immediate(N.target.x,N.target.y),setTimeout(function(){N.dispatchEvent("pause")},10))):(N.enabled=!0,Ce>0?e.animate({target:N,obj:{pausingSpeed:me},ticker:!1,time:Ce,call:function(){N.speed=me,N.paused=!1}}):(N.speed=me,N.paused=!1)),N};var $e=!0;Object.defineProperty(N,"enabled",{get:function(){return $e},set:function(rt){$e!=rt&&(rt?(st(),N.paused=!1):(Je(),N.paused=!0),$e=!!rt)}});function st(){r=="keydown"?(we=z.on("keydown",we),pe&&(pe=z.on("keyup",pe)),Ue=e.Ticker.add(Ue,q)):r=="gamebutton"?(ke=ve.on("buttondown",ke),Me&&(Me=ve.on("buttonup",Me)),Ue=e.Ticker.add(Ue,q)):r=="gamestick"?ue=ve.on("data",ue):r=="swipe"?(Ee.enabled=!0,Te.enabled=!0,_e&&(_e=Ee.on("swipemove",_e))):r=="mousedown"||r=="mousemove"?x=q.on("stage"+r,x):r=="pressmove"&&(x=q.on("stagemousedown",x),F&&(F=q.on("stagemousemove",F)),Ae&&(Ae=q.on("stagemouseup",Ae))),Fe=e.Ticker.add(Fe,q)}function Je(){r=="keydown"?(z.off("keydown",we),z.off("keyup",pe),e.Ticker.remove(Ue)):r=="gamebutton"?(ve.off("buttondown",ke),ve.off("buttonup",Me),e.Ticker.remove(Ue)):r=="gamestick"?ve.off("data",ue):r=="swipe"?(Ee.enabled=!1,Te.enabled=!1,Ee.off("swipemove",_e)):r=="mousedown"||r=="mousemove"?q.off("stage"+r,x):r=="pressmove"&&(q.off("stagemousedown",x),q.off("stagemousemove",F),q.off("stagemouseup",Ae)),e.Ticker.remove(Fe)}this.dispose=function(){Je(),ve&&ve.dispose(),Ee&&Ee.dispose(),Te&&Ee.dispose()}},e.extend(e.MotionController,je.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){if(qe("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads){this.error=!0,kt&&ht("zim.GamePad() - no browswer support");return}var t;fe.addEventListener("gamepadconnected",i),this.currentIndex=0;var r=this;function i(d){r.connected=!0,l("gamepadconnected",d);var p=navigator.getGamepads()[r.currentIndex];r.lastData=[];for(var _=0;_<p.buttons.length;_++)r.lastData[_]=p.buttons[_].pressed;function P(){if(t=requestAnimationFrame(P),r.data=navigator.getGamepads()[r.currentIndex],!!r.data){for(var T=r.buttons=[],R,b=0;b<r.data.buttons.length;b++)T[b]=r.data.buttons[b].pressed,T[b]!=r.lastData[b]&&(r.lastData[b]=T[b],T[b]?R=new je.Event("buttondown"):R=new je.Event("buttonup"),R.buttonCode=b,R.button=B[b],r.dispatchEvent(R));R=new je.Event("data"),R.axes=r.axes=r.data.axes,R.buttons=r.buttons,r.dispatchEvent(R)}}P()}var o=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(r.connected||i(),clearInterval(o))},500);function l(d,p){var _=new je.Event(d);_.index=p.gamepad.index,_.id=p.gamepad.id,_.buttons=p.gamepad.buttons,_.axes=p.gamepad.axes,r.dispatchEvent(_)}var f=function(d){d.gamepad.index==r.currentIndex&&(cancelAnimationFrame(t),r.connected=!1,r.dispatchEvent("gamepaddisconnected"))};fe.addEventListener("gamepaddisconnected",f),this.dispose=function(){fe.removeEventListener("gamepadconnected",i),fe.removeEventListener("gamepaddisconnected",f),cancelAnimationFrame(t),clearInterval(o),r.connected=!1}};var B=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(pn=0;pn<B.length;pn++)e.GamePad[B[pn]]=pn;var j=["LSX","LSY","RSX","RSY"];for(pn=0;pn<j.length;pn++)e.GamePad[j[pn]]=pn;e.extend(e.GamePad,je.EventDispatcher,null,"cjsEventDispatcher"),e.Portal=function(t,r){var i="obj, lands",o;if(o=mt(e.Portal,arguments,i,this))return o;if(qe("69.96"),n(t)||!t.stage)return;this.type="Portal";var l=this,f=r&&r.numChildren&&r.numChildren>0;if(f){var d=r.getChildAt(r.numChildren-1),p=r.getChildAt(r.numChildren-2);r.setChildIndex(p,r.numChildren-1),p.setMask(t)}function _(){r.setChildIndex(d,0),d=p,p=r.getChildAt(r.numChildren-2),r.setChildIndex(p,r.numChildren-1),d.setMask(null),p.setMask(t),t.stage.update()}t.on(e.mobile()?"mousedown":"mouseover",function(){l._enabled&&(f&&_(),l.dispatchEvent("enter"))}),t.on(e.mobile()?"pressup":"mouseout",function(){l._enabled&&l.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(P){if((n(P)||!P.stage)&&kt){ht("zim.Portal() - please provide a Display Object to act as the portal");return}p.setMask(t)}}),Object.defineProperty(this,"currentLand",{get:function(){return d},set:function(P){if(r.contains(P))for(;P!=d;)_()}}),Object.defineProperty(this,"nextLand",{get:function(){return p},set:function(){if(kt){ht("zim.Portal() - nextLand is read only - remake Portal to change");return}}}),this._enabled=!0,Object.defineProperty(l,"enabled",{get:function(){return l._enabled},set:function(P){l._enabled=P}})},e.extend(e.Portal,je.EventDispatcher,null,"cjsEventDispatcher",!1),fe.zimContactListener=null;var le,be;function Pe(t,r,i,o,l,f,d,p,_,P,T,R){if(qe("69.97"),n(i)&&(i=0),o=="rectangle")t.body=t.physics.makeRectangle(t.width-i,t.height-i,r,l,d,p,_,P,T,f,R);else if(o=="circle")t.body=t.physics.makeCircle(t.width/2-i,r,l,d,p,_,P,T,f,R);else if(o=="triangle")n(t.a)&&(t.a=t.width,t.b=t.c=Math.sqrt(Math.pow(t.a/2,2)+Math.pow(t.height,2))),t.body=t.physics.makeTriangle(t.a-i,t.b-i,t.c-i,r,l,d,p,_,P,T,f,R);else if(o=="poly"){var b=[];t.reg(0,0,!0);var L=t;t.scale!=1&&(L=t.clone().transformPoints("scale",t.scale)),i&&(L=t.clone().transformPoints("scale",Math.max(0,1-i/((t.width+t.height)/4)))),e.loop(L.points,function(k){b.push({x:k[0],y:k[1]})}),t.body=t.physics.makePoly(b,t.width,t.height,r,l,d,p,_,P,T,f,R)}t.body.x=t.x,t.body.y=t.y,t.body.rotation=t.rotation,t.physics.addMap(t.body,t),t.impulse=function(k,m,A,D){n(k)&&(k=0),n(m)&&(m=0);var C=t.body.GetWorldCenter();return n(A)&&(A=C.x*t.physics.scale),n(D)&&(D=C.y*t.physics.scale),t.body.ApplyImpulse(new fe.b2Vec2(k,m),new fe.b2Vec2(A/t.physics.scale,D/t.physics.scale)),t},t.force=function(k,m,A,D){n(k)&&(k=0),n(m)&&(m=0);var C=t.body.GetWorldCenter();return n(A)&&(A=C.x*t.physics.scale),n(D)&&(D=C.y*t.physics.scale),t.body.ApplyForce(new fe.b2Vec2(k,m),new fe.b2Vec2(A/t.physics.scale,D/t.physics.scale)),t},t.setLinearVelocity=function(k,m){return t.body.SetLinearVelocity(new fe.b2Vec2(k,m)),t},t.setAngularVelocity=function(k){return t.body.SetAngularVelocity(k),t},t.spin=function(k){return n(k)&&(k=10),t.body.ApplyTorque(k*1e3),t},t.torque=function(k){return n(k)&&(k=10),t.body.ApplyTorque(k),t},t.follow=function(k,m,A,D,C,E,X,Z,V,O,ne,N){var q="damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal",U;return(U=mt(t.follow,arguments,q))?U:(t.physics.follow(t,k,m,A,D,C,E,X,Z,V,O,ne,N),t)},t.noFollow=function(){return t.physics.follow(null),t},t.control=function(k,m,A,D,C){var E="type, speed, speedY, horizontal, vertical",X;return(X=mt(t.control,arguments,E))?X:(t.physics.control(t,k,m,A,D,C),t)},t.customControl=function(k,m,A){var D="dir, speed, speedY",C;return(C=mt(t.customControl,arguments,D))?C:(t.physics.customControl(k,m,A),t)},t.noControl=function(){return t.physics.noControl(t),t},t.sleep=function(){return t.body.SetAwake(!1),t},t.wake=function(){return t.body.SetAwake(!0),t};function S(){fe.zimContactListener=new fe.b2ContactListener,le=new e.Dictionary(!0),be=new e.Dictionary(!0),fe.zimContactListener.BeginContact=k,fe.zimContactListener.EndContact=m;function k(A){var D=le.at(A.m_fixtureB.GetBody());D&&D(A.m_fixtureA.GetBody().zimObj,A.m_fixtureA.GetBody()),D=le.at(A.m_fixtureA.GetBody()),D&&D(A.m_fixtureB.GetBody().zimObj,A.m_fixtureB.GetBody())}function m(A){var D=be.at(A.m_fixtureB.GetBody());D&&D(A.m_fixtureA.GetBody().zimObj,A.m_fixtureA.GetBody()),D=be.at(A.m_fixtureA.GetBody()),D&&D(A.m_fixtureB.GetBody().zimObj,A.m_fixtureB.GetBody())}t.physics.world.SetContactListener(fe.zimContactListener)}t.contact=function(k){return fe.zimContactListener||S(),le.add(t.body,k),t},t.noContact=function(){return le.remove(t.body),t},t.contactEnd=function(k){return fe.zimContactListener||S(),be.add(t.body,k),t},t.noContactEnd=function(){return be.remove(t.body),t},t.hasOwnProperty("dynamic")||Object.defineProperty(t,"dynamic",{get:function(){return t.body.GetType()==2},set:function(k){t.body.SetType(k==!0?2:0)}})}for(e.Timeline=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S){var k="objects, width, startPaused, barColor, buttonColor, themeColor, corner, ticks, damp, loop, noLoop, call, style, group, inherit",m;if(m=mt(e.Timeline,arguments,k,this))return m;qe("69.971"),this.group=L;var A=b===!1?{}:e.getStyle("Timeline",L,S),D=this.stage?this.stage:zimDefaultFrame.stage,C=D.frame,E=D.width,X=D.height;n(i)&&(i=A.startPaused!=null?A.startPaused:!1),n(P)&&(P=A.loop!=null?A.loop:!0),n(T)&&(T=A.noLoop!=null?A.noLoop:!1),n(o)&&(o=A.barColor!=null?A.barColor:e.tin),n(l)&&(l=A.buttonColor!=null?A.buttonColor:e.light),n(f)&&(f=A.themeColor!=null?A.themeColor:e.purple),n(r)&&(r=A.width!=null?A.width:E*.5),n(p)&&(p=A.ticks!=null?A.ticks:!0),n(_)&&(_=A.damp!=null?A.damp:!1),n(K)&&(K=A.labels!=null?A.labels:!0),n(d)&&(d=A.corner!=null?A.corner:5);var Z=50;this.zimContainer_constructor(r,Z,null,null,!1),this.type="Timeline";var V=this,O=t,ne=e.toBW(C.color);if(n(O)){if(!e.animatedObjects||!e.animatedObjects.objects)return ht("ZIM Timeline - add Timeline after animated objects"),V;O=e.copy(e.animatedObjects.objects)}Array.isArray(O)||(O=[O]);var N=Date.now(),q=0;e.loop(O,function(Me){Me.pauseAnimate(),Me.tweenEndTime&&Me.tweenEndTime>q&&(q=Me.tweenEndTime)});var U=Math.ceil((q-N)/1e3),z=this.backing=new e.Rectangle(r,Z,o,null,null,d).alp(.8).addTo(V),ie=ne=="#000000"?0:1,ae=this.shade=new e.Rectangle(Z-ie,Z-ie*2,black,null,null,[d,0,0,d]).alp(.7).pos(ie,ie,LEFT,TOP,V),he=this.shade2=new e.Rectangle(Z-ie,Z-ie*2,black,null,null,[0,d,d,0]).alp(.7).pos(ie,ie,RIGHT,TOP,V),$=new e.Container(50,50).alp(.9);new e.Rectangle(7,24,white).center($).mov(-6),new e.Rectangle(7,24,white).center($).mov(6);var G=V.controls=new e.Button({icon:new e.Triangle(30,30,30,white).reg(null,16).rot(90).alp(.9),toggleIcon:$.reg("center"),downBackgroundColor:e.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(z,null,70).center(ae).addTo(V).expand(10).tap(function(){se.pauseAnimate(!G.toggled)});i||G.toggle();var v=new e.Container(50,50).reg("center").alp(.8).expand(10);new Sn(24,5,e.white).center(v).mov(0,-8),new Sn(24,5,e.white).center(v),new Sn(24,5,e.white).center(v).mov(0,8);var w=!0,h=V.menu=new e.Button({icon:v,downBackgroundColor:e.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(z,null,70).center(he).addTo(V).tap(function(){Re.show(),w&&Re.loc(V.x,V.y).mov(V.width-Re.width/2,-Re.height/2-10)});function I(Me){se.rate=Me,pe.speed=Me,V.trailInterval.time=ke.convert(pe.speed);try{localStorage&&(localStorage.zim_tl=JSON.stringify(pe))}catch(Ue){}}function Q(Me){se.ticks.vis(Me),se.labels.vis(Me),D.update(),pe.labels=Me;try{localStorage&&(localStorage.zim_tl=JSON.stringify(pe))}catch(Ue){}}function x(Me){P=Me,pe.looping=Me;try{localStorage&&(localStorage.zim_tl=JSON.stringify(pe))}catch(Ue){}}function F(Me){we(),Me&&(se.percentComplete=0,setTimeout(function(){te()},50)),pe.trailing=Me;try{localStorage&&(localStorage.zim_tl=JSON.stringify(pe))}catch(Ue){}}function Ae(Me){e.loop([G,h],function(Ue){Ue.backgroundColor=Me,Ue.toggleBackgroundColor=Me,Ue.rollBackgroundColor=Me.lighten(.2),Ue.rollToggleBackgroundColor=Me.lighten(.2),Ue.downBackgroundColor=Me.darken(.2)}),Re.backing.color=Me,Y.slider.bar.color=Me,D.update(),pe.color=Me;try{localStorage&&(localStorage.zim_tl=JSON.stringify(pe))}catch(Ue){}return this}this.setThemeColor=Ae;var Y=e.List.slider("speed",0,2,1,I,.1),K=e.List.checkBox("labels",!1,Q),ge=e.List.checkBox("loop",!1,x),ye=e.List.checkBox("trails",!1,F),ee=e.List.colorPicker("color",e.purple,new e.ColorPicker({colors:[e.purple,e.pink,e.red,e.orange,e.brown,e.green,e.blue,e.grey,e.black],cols:9}),Ae),ce=this.title=new e.Container(300,25).noMouse();new e.Rectangle(500,70,e.black.toAlpha(.4)).pos(0,-45,CENTER,TOP,ce),this.icon=C.makeIcon({edges:"white",box:faint,slats:["white","white","white","white","white"]}).alp(.6).scaleTo(ce,null,140).pos(7,-10,"left","center",ce),new e.Label({text:"Z  I  M  -  T  I  M  E  L  I  N  E",color:"white"}).alp(.6).sca(.47).loc(51,-4,ce),new e.Line(219,1,"white").alp(.6).center(ce).mov(8,3);var ve=this.list=new e.List({width:300,height:260,backdropColor:clear,borderWidth:-1,shadowColor:-1,viewNum:6,padding:12,scrollBarV:!1,list:[Y,K,ge,ye,ee],swipe:!1});Y.slider.bar.color=e.purple,ve.tabs.mov(0,8);var Re=V.pane=new e.Pane({width:ve.width,height:ve.height+40,backgroundColor:e.purple,backdropColor:e.faint,draggable:!0,corner:8,content:ve,resets:!1});Re.contentContainer.mov(0,20),Re.backing.on("pressmove",function(){w=!1},null,!0),ce.scaleTo(Re.contentContainer,100).pos(0,2,"center","top",Re.contentContainer).setMask(Re.backing);var se=V.slider=new e.Slider({min:0,max:U,inside:!0,barColor:o,barWidth:Z,barLength:r-Z*2-12,tickColor:ne.toAlpha(.8),damp:_,useTicks:!0,tickScale:1,tickStep:.1,semiTicks:4,semiTickScale:1,useLabels:!0,labelColor:ne.toAlpha(.8)}).center(V,1);se.bar.dye(e.faint),se.currentValue=0,se.ticks.mov(0,-20),se.bar.widthOnly=se.bar.width+14,new e.Triangle({color:e.dark}).alp(.3).scaleTo(se.button,70,90,"full").center(se.button),se.animate({props:{currentValue:se.max},time:se.max,ease:"linear",startPaused:i,loop:!0,loopWait:.5,loopWaitCall:function(){P||(se.pauseAnimate(),G.toggle(!1),se.currentValue=se.max),J&&V.trailInterval.pause(),R&&typeof R=="function"&&R()},loopCall:function(){e.loop(O,function(Me){Me.percentComplete=0})}}),se.bar.on("mousedown",function(){se.percentComplete=se.currentValue/se.max*100});var Oe=!0;se.button.on("mousedown",function(){Oe=se.animating,se.pauseAnimate()}),se.button.on("pressup",function(){Oe&&se.pauseAnimate(!1),se.percentComplete=se.currentValue/se.max*100}),V.keyEvent=C.on("keydown",function(Me){Me.key==" "&&(G.toggled?(G.toggle(!1),se.pauseAnimate(!0)):(G.toggle(!0),se.pauseAnimate(!1)))}),V.tickerID=e.Ticker.add(function(){var Me=Math.min(100,V.slider.currentValue/U*100)-.01;e.loop(O,function(Ue){var ue=N+Me/100*(q-N)-Ue.tweenStartTime;T&&(Ue.percentComplete=Math.max(0,Math.min(100,ue/(Ue.tweenEndTime-Ue.tweenStartTime)*100))),Ue.percentComplete=ue/(Ue.tweenEndTime-Ue.tweenStartTime)*100})});var J;function xe(){e.loop(O,function(Me){var Ue=Me.clone().addTo(J).alp(.05);Ue.color=clear,Ue.borderColor=ne}),J.updateCache("source-over"),J.disposeAllChildren()}V.trailInterval=e.interval(.05,function(){se.animating&&Y.slider.currentValue>0&&xe()}),V.trailInterval.pause();function te(){V.trails||(J=new e.Container(E,X).addTo(D,0).cache(),V.trails=new e.Bitmap(J.cacheCanvas).addTo(D,1),V.trailInterval.pause(!1))}function we(){V.trails&&(V.trailInterval.pause(),V.trails.dispose(),V.trails=null,J.dispose(),J=null)}var ke=new e.Proportion(.1,2,.1,.01);try{if(localStorage){var pe=localStorage.zim_tl;pe||(pe=JSON.stringify({speed:1,labels:!1,looping:!1,color:purple})),pe=JSON.parse(pe),I(pe.speed),Y.slider.currentValue=pe.speed,Y.stepper.currentValue=pe.speed,Q(pe.labels),K.checkBox.checked=pe.labels,x(pe.looping),ge.checkBox.checked=pe.looping,Ae(pe.color),ee.colorPicker.selectedColor=pe.color,ee.swatch.color=pe.color,ee.colorLabel.text=pe.color.toUpperCase(),pe.trailing&&te(),ye.checkBox.checked=pe.trailing,V.trailInterval.time=ke.convert(pe.speed)}}catch(Me){}this.pos(0,20,"center","bottom"),f!=e.purple&&Ae(f),this.dispose=function(Me,Ue,ue){return e.Ticker.remove(V.tickerID),C.off("keydown",V.keyEvent),ue||this.zimContainer_dispose(!0),!0},b!==!1&&e.styleTransforms(this,A)},e.extend(e.Timeline,e.Container,"dispose","zimContainer",!1),e.BlurEffect=function(t,r,i,o,l,f){var d="blurX, blurY, quality, style, group, inherit",p;if(p=mt(e.BlurEffect,arguments,d,this))return p;qe("69.972"),this.group=l;var _=o===!1?{}:e.getStyle("BlurEffect",l,f);n(t)&&(t=_.blurX!=null?_.blurX:10),n(r)&&(r=_.blurY!=null?_.blurY:10),n(i)&&(i=_.quality!=null?_.quality:1);var P=T(t,r,i);this.veeObj={blurX:P[0],blurY:P[1],quality:P[2]};function T(){return arguments}t=dt(t),r=dt(r),i=dt(i),this.createjsBlurFilter_constructor(t,r,i),this.type="BlurEffect",this.clone=function(R){return new e.BlurEffect(R||!e.isPick(P[0])?t:P[0],R||!e.isPick(P[1])?r:P[1],R||!e.isPick(P[2])?i:P[2],o,this.group,f)}},e.extend(e.BlurEffect,je.BlurFilter,"clone","createjsBlurFilter",!1),e.GlowEffect=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",L;if(L=mt(e.GlowEffect,arguments,b,this))return L;qe("69.9725"),this.group=T;var S=P===!1?{}:e.getStyle("GlowEffect",T,R);n(t)&&(t=S.color!=null?S.color:e.white),n(r)&&(r=S.alpha!=null?S.alpha:1),n(i)&&(i=S.blurX!=null?S.blurX:30),n(o)&&(o=S.blurY!=null?S.blurY:30),n(l)&&(l=S.strength!=null?S.strength:1),n(f)&&(f=S.quality!=null?S.quality:1),n(d)&&(d=S.inner!=null?S.inner:!1),n(p)&&(p=S.knockout!=null?S.knockout:!1),n(_)&&(_=S.hideObject!=null?S.hideObject:!1);var k=m(t,r,i,o,l,f,d,p,_);this.veeObj={color:k[0],alpha:k[1],blurX:k[2],blurY:k[3],strength:k[4],quality:k[5],inner:k[6],knockout:k[7],hideObject:k[8]};function m(){return arguments}i=dt(i),o=dt(o),f=dt(f),t=dt(t),this.alpha=dt(r),this.strength=dt(l),this.inner=dt(d),this.knockout=dt(p),this.hideObject=dt(_),this.createjsBlurFilter_constructor(i,o,f),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(A,D,C,E,X,Z,V,O){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;Z=Z||A,V===void 0&&(V=D),O===void 0&&(O=C);var ne=Z.getImageData(V,O,E,X),N=ne.data,q=document.createElement("canvas");q.width=E,q.height=X;for(var U=q.getContext("2d",{willReadFrequently:!0}),z=U.getImageData(0,0,E,X),ie=z.data,ae=this.inner,he=this._red,$=this._green,G=this._blue,v=0,w=ie.length;v<w;v+=4){var h=v+3,I=N[h];ae?I!==255&&(ie[v]=he,ie[v+1]=$,ie[v+2]=G,ie[h]=255-I):I!==0&&(ie[v]=he,ie[v+1]=$,ie[v+2]=G,ie[h]=I)}U.putImageData(z,0,0);var Q=this.strength;if(0<Q){this.createjsBlurFilter_applyFilter(U,0,0,E,X),255<Q&&(Q=255);for(var x=1;x<Q;x++)U.drawImage(q,0,0)}var F=this.alpha;F<0?F=0:1<F&&(F=1);var Ae;return this.knockout?ae?Ae="source-in":Ae="source-out":this.hideObject?ae?Ae="source-in":Ae="copy":ae?Ae="source-atop":Ae="destination-over",Z.save(),Z.setTransform(1,0,0,1,0,0),Z.globalAlpha=F,Z.globalCompositeOperation=Ae,Z.drawImage(q,V,O),Z.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(A){A=e.convertColor(A,"hexNumber"),this._red=A>>16&255,this._green=A>>8&255,this._blue=A&255}}),this.color=t,this.clone=function(A){return new e.GlowFilter(A||!e.isPick(k[0])?t:k[0],A||!e.isPick(k[1])?r:k[1],A||!e.isPick(k[2])?i:k[2],A||!e.isPick(k[3])?o:k[3],A||!e.isPick(k[4])?f:k[4],A||!e.isPick(k[5])?l:k[5],A||!e.isPick(k[6])?d:k[6],A||!e.isPick(k[7])?p:k[7],A||!e.isPick(k[8])?p:k[8],P,this.group,R)}},e.extend(e.GlowEffect,je.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),e.ShadowEffect=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L){var S="distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",k;if(k=mt(e.ShadowEffect,arguments,S,this))return k;qe("69.973"),this.group=b;var m=R===!1?{}:e.getStyle("ShadowEffect",b,L);n(t)&&(t=m.distance!=null?m.distance:10),n(r)&&(r=m.angle!=null?m.angle:45),n(i)&&(i=m.color!=null?m.color:e.black),n(o)&&(o=m.alpha!=null?m.alpha:.4),n(l)&&(l=m.blurX!=null?m.blurX:15),n(f)&&(f=m.blurY!=null?m.blurY:15),n(d)&&(d=m.strength!=null?m.strength:1),n(p)&&(p=m.quality!=null?m.quality:1),n(_)&&(_=m.inner!=null?m.inner:!1),n(P)&&(P=m.knockout!=null?m.knockout:!1),n(T)&&(T=m.hideObject!=null?m.hideObject:!1);var A=D(t,r,i,o,l,f,d,p,_,P,T);this.veeObj={distance:A[0],angle:A[1],color:A[2],alpha:A[3],blurX:A[4],blurY:A[5],strength:A[6],quality:A[7],inner:A[8],knockout:A[9],hideObject:A[10]};function D(){return arguments}l=dt(l),f=dt(f),p=dt(p),i=dt(i),t=dt(t),r=dt(r);var C=this;this.alpha=dt(o),this.strength=dt(d),this.inner=dt(_),this.knockout=dt(P),this.hideObject=dt(T),this.createjsBlurFilter_constructor(l,f,p),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return r},set:function(X){r=X=(X%360+360)%360,E(t,X)}}),this.angle=r,Object.defineProperty(this,"distance",{get:function(){return t},set:function(X){t=X,E(X,r)}}),this.distance=t;function E(X,Z){var V=Z*e.RAD;C._offsetX=Math.cos(V)*X,C._offsetY=Math.sin(V)*X}Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(X){X=e.convertColor(X,"hexNumber"),this._red=X>>16&255,this._green=X>>8&255,this._blue=X&255}}),this.color=i,this.applyFilter=function(X,Z,V,O,ne,N,q,U){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;N=N||X,q===void 0&&(q=Z),U===void 0&&(U=V);var z=N.getImageData(q,U,O,ne),ie=z.data,ae=document.createElement("canvas");ae.width=O,ae.height=ne;for(var he=ae.getContext("2d",{willReadFrequently:!0}),$=he.getImageData(0,0,O,ne),G=$.data,v=this.inner,w=this._red,h=this._green,I=this._blue,Q=0,x=G.length;Q<x;Q+=4){var F=Q+3,Ae=ie[F];v?Ae!==255&&(G[Q]=w,G[Q+1]=h,G[Q+2]=I,G[F]=255-Ae):Ae!==0&&(G[Q]=w,G[Q+1]=h,G[Q+2]=I,G[F]=Ae)}he.putImageData($,0,0);var Y=this.strength;if(0<Y){this.createjsBlurFilter_applyFilter(he,0,0,O,ne),255<Y&&(Y=255);for(var K=1;K<Y;K++)he.drawImage(ae,0,0)}var ge=this.alpha;ge<0?ge=0:1<ge&&(ge=1);var ye;return this.knockout?v?ye="source-in":ye="source-out":this.hideObject?v?ye="source-in":ye="copy":v?ye="source-atop":ye="destination-over",N.save(),N.setTransform(1,0,0,1,0,0),N.globalAlpha=ge,N.globalCompositeOperation=ye,N.drawImage(ae,q+this._offsetX,U+this._offsetY),N.restore(),!0},this.getBounds=function(X){var Z=this.createjsBlurFilter_getBounds(X),V=this._offsetX,O=this._offsetY;return V!==0&&(V<0?(Z.x+=V,Z.width+=-V):Z.width+=V),O!==0&&(O<0?(Z.y+=O,Z.height+=-O):Z.height+=O),Z},this.clone=function(X){return new e.ShadowFilter(X||!e.isPick(A[0])?t:A[0],X||!e.isPick(A[1])?r:A[1],X||!e.isPick(A[2])?i:A[2],X||!e.isPick(A[3])?o:A[3],X||!e.isPick(A[4])?l:A[4],X||!e.isPick(A[5])?f:A[5],X||!e.isPick(A[6])?p:A[6],X||!e.isPick(A[7])?d:A[7],X||!e.isPick(A[8])?_:A[8],X||!e.isPick(A[9])?P:A[9],X||!e.isPick(A[10])?T:A[10],R,this.group,L)}},e.extend(e.ShadowEffect,je.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),e.ColorEffect=function(t,r,i,o,l,f,d,p,_,P,T){var R="redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",b;if(b=mt(e.ColorEffect,arguments,R,this))return b;qe("69.9735"),this.group=P;var L=_===!1?{}:e.getStyle("ColorEffect",P,T);n(t)&&(t=L.redMultiplier!=null?L.redMultiplier:1),n(r)&&(r=L.greenMultiplier!=null?L.greenMultiplier:1),n(i)&&(i=L.blueMultiplier!=null?L.blueMultiplier:1),n(o)&&(o=L.alphaMultiplier!=null?L.alphaMultiplier:1),n(l)&&(l=L.redOffset!=null?L.redOffset:0),n(f)&&(f=L.greenOffset!=null?L.greenOffset:0),n(d)&&(d=L.blueOffset!=null?L.blueOffset:0),n(p)&&(p=L.alphaOffset!=null?L.alphaOffset:0);var S=k(t,r,i,o,l,f,d,p);this.veeObj={redMultiplier:S[0],greenMultiplier:S[1],blueMultiplier:S[2],alphaMultiplier:S[3],redOffset:S[4],greenOffset:S[5],blueOffset:S[6],alphaOffset:S[7]};function k(){return arguments}t=dt(t),r=dt(r),i=dt(i),o=dt(o),l=dt(l),f=dt(f),d=dt(d),p=dt(p),this.createjsColorFilter_constructor(t,r,i,o,l,f,d,p),this.type="ColorEffect",this.clone=function(m){return new e.ColorEffect(t,r,i,o,l,f,d,p,m||!e.isPick(S[0])?t:S[0],m||!e.isPick(S[1])?r:S[1],m||!e.isPick(S[2])?i:S[2],m||!e.isPick(S[2])?o:S[3],m||!e.isPick(S[2])?l:S[4],m||!e.isPick(S[2])?f:S[5],m||!e.isPick(S[2])?d:S[6],m||!e.isPick(S[2])?p:S[7],_,this.group,T)}},e.extend(e.ColorEffect,je.ColorFilter,"clone","createjsColorFilter",!1),e.MultiEffect=function(t,r,i,o,l,f,d){var p="hue, saturation, brightness, contrast, style, group, inherit",_;if(_=mt(e.MultiEffect,arguments,p,this))return _;qe("69.974"),this.group=f;var P=l===!1?{}:e.getStyle("MultiEffect",f,d);n(t)&&(t=P.hue!=null?P.hue:0),n(r)&&(r=P.saturation!=null?P.saturation:0),n(i)&&(i=P.brightness!=null?P.brightness:0),n(o)&&(o=P.contrast!=null?P.contrast:0);var T=R(t,r,i,o);this.veeObj={hue:T[0],saturation:T[1],brightness:T[2],contrast:T[3]};function R(){return arguments}t=dt(t),this.createjsColorMatrixFilter_constructor(new je.ColorMatrix().adjustColor(i,o,r,t)),this.type="MultiEffect",this.adjustColor=function(b,L,S,k){n(t)||(t=dt(b)),n(r)||(r=dt(L)),n(i)||(i=dt(S)),n(o)||(o=dt(k)),this.matrix.reset().adjustColor(b,L,S,k)},Object.defineProperty(this,"brightness",{get:function(){return i},set:function(b){i=dt(b),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"contrast",{get:function(){return o},set:function(b){o=dt(b),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"saturation",{get:function(){return r},set:function(b){r=dt(b),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"hue",{get:function(){return t},set:function(b){t=dt(b),this.matrix=new je.ColorMatrix().adjustColor(i,o,r,t),this.applyFilter()}}),this.clone=function(b){return new e.MultiEffect(b||!e.isPick(T[0])?t:T[0],b||!e.isPick(T[0])?r:T[0],b||!e.isPick(T[0])?i:T[0],b||!e.isPick(T[0])?o:T[0],l,this.group,d)}},e.extend(e.MultiEffect,je.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),e.AlphaEffect=function(t,r,i,o){var l="mask, style, group, inherit",f;if(f=mt(e.AlphaEffect,arguments,l,this))return f;qe("69.9745"),this.group=i;var d=r===!1?{}:e.getStyle("AlphaEffect",i,o);n(t)&&(t=d.mask!=null?d.mask:null);var p=_(t);this.veeObj={mask:p[0]};function _(){return arguments}t=dt(t),t.type=="Bitmap"?t=t.image:t.cache&&(t=t.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(P){return new e.AlphaEffect(P||!e.isPick(p[0])?t:p[0],r,this.group,o)}},e.extend(e.AlphaEffect,je.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),e.Pixel=function(t,r,i,o,l,f,d,p,_,P,T,R,b){var L="obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",S;if(S=mt(e.Pixel,arguments,L,this))return S;qe("69.9747"),this.group=R;var k=T===!1?{}:e.getStyle("Pixel",R,b);n(t)&&(t=k.obj!=null?k.obj:null),n(r)&&(r=k.amount!=null?k.amount:.5),n(i)&&(i=k.amountY!=null?k.amountY:null);var m=!1;i==null&&(m=!0,i=r),n(o)&&(o=k.blur!=null?k.blur:0),n(l)&&(l=k.dynamic!=null?k.dynamic:!1),n(f)&&(f=k.blendmode!=null?k.blendmode:null),n(d)&&(d=k.boundary!=null?k.boundary:new e.Boundary(t.getBounds())),n(p)&&(p=k.expand!=null?k.expand:0),n(_)&&(_=k.amountFactor!=null?k.amountFactor:.6),n(P)&&(P=k.blurFactor!=null?k.blurFactor:.6);var A=D(t,r,i,o,f,_,P);this.veeObj={obj:A[0],amount:A[1],amountY:A[2],blur:A[3],blendmode:A[4],amountFactor:A[5],blurFactor:A[6]};function D(){return arguments}t=dt(t),r=dt(r),i=dt(i),o=dt(o),f=dt(f),_=dt(_),P=dt(P),p&&(Array.isArray(p)?p.length==1?d.contract(-p):p.length==2?d.contract(-p[0],-p[1]):d.contract(-p[0],-p[1],-p[2],-p[3]):d.contract(-p));var C=e.constrain(_*10,0,10),E=e.constrain(P*10,0,10),X=this,Z=Math.pow(Math.E,-r*C),V=Math.pow(Math.E,-i*C),O=Math.pow(Math.E,-o*E);n(t)&&(t=new e.Tile(new e.Circle(20,[e.green,e.blue,e.yellow,e.pink,e.purple]),5,5,5,5));var ne=document.createElement("canvas"),N=ne.getContext("2d"),q=document.createElement("canvas"),U=q.getContext("2d"),z=O;this.update=function(){!t.cacheCanvas||O!=z?(t.cache(d.x,d.y,d.width,d.height,O),z=O):t.updateCache(f);var ie=t.width,ae=t.height,he=t.width*Z,$=t.height*V;ne.width=ie,ne.height=ae,q.width=ie,q.height=ae,U.msImageSmoothingEnabled=!1,U.mozImageSmoothingEnabled=!1,U.webkitImageSmoothingEnabled=!1,U.imageSmoothingEnabled=!1,N.drawImage(t.cacheCanvas,0,0,he,$),U.drawImage(ne,0,0,he,$,-p*t.scale,-p*t.scale,q.width+p*2*t.scaleX,q.height+p*2*t.scaleY)},this.update(),this.zimBitmap_constructor(q),l&&(this.dynamicTicker=e.Ticker.add(function(){X.update()})),Object.defineProperty(this,"amount",{get:function(){return r},set:function(ie){r=ie,Z=Math.pow(Math.E,-r*C),m&&(V=Math.pow(Math.E,-r*C),i=r),X.update()}}),Object.defineProperty(this,"amountX",{get:function(){return r},set:function(ie){r=ie,m=!1,Z=Math.pow(Math.E,-r*C),X.update()}}),Object.defineProperty(this,"amountY",{get:function(){return i},set:function(ie){i=ie,m=!1,V=Math.pow(Math.E,-i*C),X.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return _},set:function(ie){_=ie,C=e.constrain(_*10,0,10),Z=Math.pow(Math.E,-r*C),V=Math.pow(Math.E,-i*C),X.update()}}),Object.defineProperty(this,"blur",{get:function(){return o},set:function(ie){o=ie,O=Math.pow(Math.E,-o*E),X.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return P},set:function(ie){P=ie,E=e.constrain(P*10,0,10),O=Math.pow(Math.E,-o*E),X.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return l},set:function(ie){l!=ie&&(l=ie,l?X.dynamicTicker?X.dynamicTicker=e.Ticker.add(X.dynamicTicker):X.dynamicTicker=e.Ticker.add(X.update):X.dynamicTicker&&e.Ticker.remove(X.dynamicTicker))}}),this.dispose=function(){X.dynamicTicker&&e.Ticker.remove(X.dynamicTicker),this.zimBitmap_dispose()},T!==!1&&e.styleTransforms(this,k),this.clone=function(ie){return X.cloneProps(new e.Pixel(ie||!e.isPick(A[0])?t:A[0],ie||!e.isPick(A[1])?r:A[1],ie||!e.isPick(A[2])?i:A[2],ie||!e.isPick(A[3])?o:A[3],l,ie||!e.isPick(A[4])?f:A[4],d,p,ie||!e.isPick(A[5])?_:A[5],ie||!e.isPick(A[6])?P:A[6],T,this.group,b))}},e.extend(e.Pixel,e.Bitmap,["clone","dispose"],"zimBitmap",!1),e.Parallax=function(t,r,i,o,l,f,d){var p="layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",_;if(_=mt(e.Parallax,arguments,p,this))return _;if(qe("68"),this.type="Parallax",n(o))if(t&&t[0]&&t[0].obj&&t[0].obj.stage)o=t[0].obj.stage;else if(fe.zdf)o=fe.zdf.stage;else return;n(i)?i=!0:i=!1,n(l)&&(l=!1),n(f)&&(f=!1);var P=o.getBounds().width,T=o.getBounds().height;o.mouseMoveOutside=f;var R=this;R.stageEvent=o.on("stagemousemove",function(A){R.mouseX=A.rawX/e.scaX,R.mouseY=A.rawY/e.scaY});var b=n(r)?.1:r;this.addLayer=function(A){if(!(n(A.obj)||n(A.prop)||n(A.propChange))){var D={obj:A.obj,prop:A.prop};D[D.prop]=A.propChange,n(A.input)&&(A.input="mouseX"),D.input=A.input,D.split=n(A.split)?!!(A.input=="mouseX"&&i):A.split;var C=n(A.inMin)?0:A.inMin,E=n(A.inMax)?A.input=="mouseX"||A.input=="scrollX"?P:T:A.inMax,X=n(A.factor)?1:A.factor,Z=n(A.integer)?!1:A.integer;return D["p_"+D.prop]=new e.ProportionDamp(C,E,0,D[D.prop],b,X,Z,d),D.prop=="scale"?D["s_"+D.prop]=D.obj.scaleX:D.prop=="frame"?D["s_"+D.prop]=D.obj.currentFrame:D["s_"+D.prop]=D.obj[D.prop],n(A.immediate)||D["p_"+D.prop].immediate(A.immediate),L.push(D),R}},this.removeLayer=function(A){if(!n(A)){var D=L[A];return D["p_"+D.prop].dispose(),L.splice(A,1),R}},this.immediate=function(A){for(var D,C=0;C<L.length;C++)D=L[C],D["p_"+D.prop].immediate(A[C]);return R},this.dispose=function(){return o.off("stagemousemove",R.stageEvent),L=null,i&&e.Ticker.remove(k),!0},t=n(t)?[]:t;for(var L=[],S=0;S<t.length;S++)this.addLayer(t[S]);if(i){var k=e.Ticker.add(m,o);l&&e.Ticker.remove(k)}function m(){R.step()}this.step=function(A){for(var D,C,E=0;E<L.length;E++)D=L[E],n(A)?D.input=="mouseX"?C=R.mouseX:D.input=="mouseY"?C=R.mouseY:D.input=="scrollX"?C=e.scrollX():D.input=="scrollY"&&(C=e.scrollY()):C=A,D.prop=="scale"?D.obj.scaleX=D.obj.scaleY=D["s_"+D.prop]+D["p_"+D.prop].convert(C):D.prop=="frame"?D.obj.gotoAndStop(D["s_"+D.prop]+D["p_"+D.prop].convert(C)):(D.obj[D.prop]=D["s_"+D.prop]+D["p_"+D.prop].convert(C),D.split&&(D.obj[D.prop]-=D[D.prop]/2));return R},R.paused=l,R.pause=function(A){return n(A)&&(A=!0),R.paused!=A&&(R.paused=A,k&&(A?e.Ticker.remove(k):k=e.Ticker.add(k))),R},Object.defineProperty(R,"damp",{get:function(){return b},set:function(A){b=A;for(var D,C=0;C<L.length;C++)D=L[C],D["p_"+D.prop].damp=b}})},e.Flipper=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L){var S="front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",k;if(k=mt(e.Flipper,arguments,S,this))return k;qe("68.5"),this.group=b;var m=R===!1?{}:e.getStyle("Flipper",this.group,L);if(n(t)&&(t=m.front!=null?m.front:fe.zdf.makeIcon().sca(2)),n(r)&&(r=m.back!=null?m.back:new e.Page(t.width,t.height,e.dark)),this.front=t,this.back=r,f){var A=t;t=r,r=A}var D=Math.max(t.width,r.width),C=Math.max(t.height,r.height);this.zimContainer_constructor(D,C),this.type="Flipper",n(o)&&(o=m.time!=null?m.time:.2),n(l)&&(l=m.vertical!=null?m.vertical:!1),n(i)&&(i=m.interactive!=null?m.interactive:!1),n(f)&&(f=m.flipped!=null?m.flipped:!1),n(d)&&(d=m.easeRoot!=null?m.easeRoot:"quad"),n(p)&&(p=m.frontPress!=null?m.frontPress:!0),n(_)&&(_=m.backPress!=null?m.backPress:!0),n(P)&&(P=m.reverse!=null?m.reverse:!1),n(T)&&(T=m.continuous!=null?m.continuous:!1);var E=f;this.flipped=f;var X=this;t.centerReg(this);var Z;(p&&!f||_&&f)&&(Z=i&&t.backing?t.backing:t,Z.on("mousedown",function(){V(t,r)}),Z.cur()),(_&&!f||p&&f)&&(Z=i&&r.backing?r.backing:r,Z.on("mousedown",function(){V(r,t,-1)}),Z.cur()),t.oScale=t.scale,r.oScale=r.scale,t.flipper=X,t.other=r,r.flipper=X,r.other=t,i||(t.mouseChildren=r.mouseChildren=!1),this.flip=function(O,ne){O!=X.flipped&&(X.flipped?V(E?t:r,E?r:t,-1,ne):V(E?r:t,E?t:r,1,ne))};function V(O,ne,N,q){if(n(N)&&(N=1),N*=P?-1:1,T&&(N=P?E?1:-1:E?-1:1),n(q)&&(q=o),X.flipped=!X.flipped,X.dispatchEvent("flip"),q==0){X.removeAllChildren(),ne.scale=ne.oScale,ne.skewX=ne.skewY=0,ne.centerReg(X),X.dispatchEvent("flipped");return}var U,z;l?(U={skewX:-90*N,scaleY:O.oScale/2},z={skewX:0,scaleY:ne.oScale},ne.ske(90*N,0).sca(ne.oScale,ne.oScale/2)):(U={skewY:-90*N,scaleX:O.oScale/2},z={skewY:0,scaleX:ne.oScale},ne.ske(0,90*N).sca(ne.oScale/2,ne.oScale)),O.animate({props:U,time:o,ease:d+"In",call:function(){O.removeFrom(),ne.centerReg(X).animate({props:z,time:o,ease:d+"Out",call:function(){X.dispatchEvent("flipped")}})}})}R!==!1&&e.styleTransforms(this,m),this.clone=function(){return X.cloneProps(new e.Flipper(t.clone(),r.clone(),i,o,l,f,d,p,_,P,T,R,this.group,L))}},e.extend(e.Flipper,e.Container,"clone","zimContainer"),e.Book=function(t,r,i,o,l,f,d,p,_){var P="width, height, pages, startPage, rollUp, radius, backgroundColor, arrows, handleHTML",T;if(T=mt(e.Book,arguments,P,this))return T;qe("68.7"),n(t)&&(t=fe.zdf?fe.zdf.stage.width:1024),n(r)&&(r=fe.zdf?fe.zdf.stage.height:768),this.zimContainer_constructor(t,r),this.type="Book",n(i)&&(i=[]),n(o)&&(o=0),n(l)&&(l=!0),n(d)&&(d=e.darker),n(p)&&(p=!0),n(_)&&(_=!0),this.handleHTML=_;var R=g(),b=this;if(i.length==0)return;b.backing=new e.Rectangle(t-2,r-2,d),e.loop(i,function(Z,V){typeof Z=="string"&&(i[V]=e.asset(Z)),i[V].zimBookIndex=V,A(Z)}),b.added(m);var L,S,k;function m(Z){L=Z,S=L.frame;var V=new e.Shape,O,ne,N,q,U,z,ie;b._currentPage=o;function ae(Q){if(b._currentPage=Q,b.removeAllChildren(),b.backing.loc(1,1,b),b.setMask(b.backing),V.addTo(b),V.c().f(e.black).dr(0,0,0,0),b.moving=!1,i[Q-1]?O=i[Q-1].reg(0,0).rot(0).loc(0,0,b):Q>0&&ie.reg(0,0).rot(0).loc(0,0,b).setMask(null),i[Q-2]?ne=i[Q-2].reg(t/2,r).loc(0,r,b).rot(-90):ne=new e.Rectangle(t/2,r,d).reg(t/2,r).loc(0,r,b).rot(-90),i[Q-3]?N=i[Q-3].rot(0).loc(0,0,b).setMask(V):N=new e.Rectangle(t/2,r,d).loc(0,0,b).setMask(V),i[Q])q=i[Q].rot(0).reg(0,0).pos(0,0,e.RIGHT,e.TOP,b);else{L.update();return}i[Q+1]?U=i[Q+1].reg(0,r).loc(t,r,b).rot(90):(U=new e.Rectangle(t/2,r,d).reg(0,r).loc(t,r,b).rot(90),ie=U),i[Q+2]?z=i[Q+2].rot(0).pos(0,0,e.RIGHT,e.TOP,b).setMask(V):z=new e.Rectangle(t/2,r,d).pos(0,0,e.RIGHT,e.TOP,b).setMask(V),L.update()}ae(o),Object.defineProperty(b,"directPage",{get:function(){return b._currentPage},set:function(Q){X(),o%2==1?Q=Math.ceil(Q/2)*2-1:Q=Math.ceil(Q/2)*2,Q!=b.page&&(Q>b.page?(U.reg(0,0),z.setMask(null)):(ne.reg(0,0),N.setMask(null)),ae(Q),b.moving=!1,he=!1,b.currentW=0,b.currentH=0,E())}});var he=!1;b.currentW=0,b.currentH=0,b.moving=!1;function $(){b.stageEvent=L.on("stagemousedown",function(){if(b.hitTestPoint(S.mouseX,S.mouseY)){var Q,x;if(!b.moving){var F=b.globalToLocal(S.mouseX,S.mouseY);if(!(F.x<0||F.x>t||F.y<0||F.y>r)&&!(f>0&&e.dist(F,new e.Point(0,r))>f&&e.dist(F,new e.Point(t,r))>f)){var Ae=F.x>t/2?"right":"left";Ae=="right"&&b._currentPage>=i.length-1||Ae=="left"&&b._currentPage<=1||(b.moving=!0,Ae=="right"?(q.addTo(b),U.addTo(b),z.addTo(b),b.pageNext=z.zimBookIndex):(O.addTo(b),ne.addTo(b),N.addTo(b),b.rolledUp&&w(0,0,"right"),b.pageNext=ne.zimBookIndex),X(),b.direction=Ae,b.dispatchEvent("rollpress"),b.moveEvent=L.on("stagemousemove",function(){G&&(G.clear(),G=null);var Y=b.globalToLocal(S.mouseX,S.mouseY);Ae=="right"?Q=t-Y.x:Q=Y.x,x=r-Y.y+Q,b.currentW=Q=e.constrain(Q,0,t/2),b.currentH=x=e.constrain(x,0,r),w(Q,x,Ae)}),b.upEvent=L.on("stagemouseup",function(){L.off("stagemousemove",b.moveEvent),!he&&v(Q,x,Ae)},null,!0))}}}})}if($(),b.rollUp=function(Q,x,F,Ae,Y){if(!b.moving&&!(F=="right"&&b._currentPage>=i.length-1)&&!(F=="left"&&b._currentPage<=1)){F=="right"?(q.addTo(b),U.addTo(b),z.addTo(b)):(b.rolledUp&&w(0,0,"right"),O.addTo(b),ne.addTo(b),N.addTo(b)),b.moving=!0,n(Ae)&&(Ae=R=="s"?.5:.5/1e3),n(Y)&&(Y=null),b.animate({props:{currentW:Q,currentH:x},time:Ae,ease:Y,call:function(){e.Ticker.remove(K),b.moving=!1,w(Q,x,F)}});var K=e.Ticker.add(function(){w(b.currentW,b.currentH,F)})}},l!==!1){b.rolledUp=!0,l===!0&&(l=R=="s"?1:1/1e3);var G=e.timeout(l,function(){b.rollUp(60,130,"right",.5),b.dispatchEvent("rollup")})}b.rollDown=function(Q,x,F,Ae){b.moving||F=="right"&&b._currentPage>=i.length-1||F=="left"&&b._currentPage<=1||v(Q,x,F,Ae)};function v(Q,x,F,Ae){b.moving=!0,b.rolledUp=!1,n(Ae)&&(Ae=R=="s"?.7:.7/1e3),b.animate({props:{currentW:0,currentH:0},time:Ae,call:function(){e.Ticker.remove(Y),w(0,0,F),b.moving=!1,E(),b.dispatchEvent("rolldown")}});var Y=e.Ticker.add(function(){w(b.currentW,b.currentH,F)})}function w(Q,x,F){var Ae;F=="right"?(V.c().mt(t,r).lt(t-Q,r).lt(t,r-x).cp(),Ae=Math.atan2(Q,x),U.loc(t-(Q+Q*Math.cos(2*Ae)),r-Q*Math.sin(2*Ae)).rot(Ae*2*e.DEG),!he&&Q>=t/2&&x>=r&&h()):(V.c().mt(0,r).lt(Q,r).lt(0,r-x).cp(),Ae=Math.atan2(Q,x),ne.loc(Q+Q*Math.cos(2*Ae),r-Q*Math.sin(2*Ae)).rot(-Ae*2*e.DEG),!he&&Q>=t/2&&x>=r&&I()),L.update()}function h(){X(),he=!0,b.moving=!0,b.moveEvent&&L.off("stagemousemove",b.moveEvent),b.upEvent&&L.off("stagemouseup",b.upEvent),b.currentW=0,b.currentH=0,b.lastPage=e.constrain(b._currentPage),b.direction="right",b.pageNext=z.zimBookIndex,b.dispatchEvent("pageanimate"),b.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(Q),U.reg(0,0),z.setMask(null),ae(b._currentPage+2),b.moving=!1,he=!1,b.currentW=0,b.currentH=0,E(),b.dispatchEvent("page")}});var Q=e.Ticker.add(function(){V.c().mt(t,r).lt(t/2,r).lt(t-b.currentW,0).lt(t,0).cp()});U.reg(t/2,r).loc(t/2,r,b).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}function I(){X(),he=!0,b.moving=!0,b.moveEvent&&L.off("stagemousemove",b.moveEvent),b.upEvent&&L.off("stagemouseup",b.upEvent),b.currentW=0,b.currentH=0,b.lastPage=e.constrain(b._currentPage),b.direction="left",b.pageNext=ne.zimBookIndex,b.dispatchEvent("pageanimate"),b.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(Q),ne.reg(0,0),N.setMask(null),ae(b._currentPage-2),b.moving=!1,he=!1,b.currentW=0,b.currentH=0,E(),b.dispatchEvent("page")}});var Q=e.Ticker.add(function(){V.c().mt(0,r).lt(t/2,r).lt(b.currentW,0).lt(0,0).cp()});ne.reg(0,r).loc(t/2,r,b).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}p&&(p===!0&&(p=.2),b.keydown=S.on("keydown",function(Q){Q.keyCode==39?b.nextPage(p):Q.keyCode==37&&b.prevPage(p)})),b.changeFrame=function(Q){return b.stageEvent&&L.off("stagemousedown",b.stageEvent),b.moveEvent&&L.off("stagemousemove",b.moveEvent),b.upEvent&&L.off("stagemouseup",b.upEvent),S=Q,L=Q.stage,$(),b},E()}b.nextPage=function(Z){if(n(b.rollUp))return setTimeout(function(){b.nextPage(Z)},10),b;b.moving||b.rollUp(t/2+.1,r+.1,"right",Z,"quadIn")},b.prevPage=function(Z){if(n(b.rollUp))return setTimeout(function(){b.prevPage(Z)},10),b;b.moving||b.rollUp(t/2+.1,r+.1,"left",Z,"quadIn")},b.gotoPage=function(Z,V){if(n(b.rollUp))return setTimeout(function(){b.gotoPage(Z,V)},10),b;Z=e.constrain(Z,0,b.pages.length-1),n(V)&&(V=R=="s"?.3:300);var O=V+(R=="s"?.35:350);b.pageInterval=e.interval(O,function(ne){var N=!1;b._currentPage<Z?b.nextPage(V):b._currentPage>Z?b.prevPage(V):N=!0,b.dispatchEvent("pageturn"),ne.count==ne.total-1&&(N?(E(),b.dispatchEvent("pagedone")):e.timeout(O,function(){E(),b.dispatchEvent("pagedone")}))},Math.floor(Math.abs(Z-b._currentPage)/2+1),!0)};function A(Z){Z.addChild&&(Z.zimHTMLList=new e.Dictionary,b.handleHTML&&C(Z))}function D(Z){if(!(n(Z)||!Z.addChild))for(Z.removedHTML=!1,k=0;k<Z.zimHTMLList.length;k++)Z.addChildAt(Z.zimHTMLList.values[k].obj,Z.zimHTMLList.values[k].depth)}function C(Z){if(!(Z.removedHTML||!Z.addChild)){Z.removedHTML=!0,Z.zimHTMLList.clear();var V,O;for(O=0;O<Z.numChildren;O++)if(V=Z.getChildAt(O),V.type=="TextArea"||V.type=="Loader"||V.type=="Tag"){var ne={obj:V,depth:Z.getChildIndex(V)};Z.zimHTMLList.add(V,ne)}for(O=Z.numChildren-1;O>=0;O--)V=Z.getChildAt(O),(V.type=="TextArea"||V.type=="Loader"||V.type=="Tag")&&Z.removeChild(V)}}function E(){b.handleHTML&&(b.pages[b.page]&&D(b.pages[b.page]),b.pages[b.page-1]&&D(b.pages[b.page-1]))}function X(){b.handleHTML&&(b.pages[b.page]&&C(b.pages[b.page]),b.pages[b.page-1]&&C(b.pages[b.page-1]))}Object.defineProperty(b,"page",{get:function(){return b._currentPage},set:function(Z){b.gotoPage(Z,R=="s"?.1:100)}}),Object.defineProperty(b,"pages",{get:function(){return i},set:function(){kt&&ht("Book() - pages is read only")}}),this.dispose=function(Z,V,O){return b.stageEvent&&L.off("stagemousedown",b.stageEvent),b.moveEvent&&L.off("stagemousemove",b.moveEvent),b.upEvent&&L.off("stagemouseup",b.upEvent),b.keydown&&S.off("keydown",b.keydown),b.removeFrom(),O||this.zimContainer_dispose(!0),!0}},e.extend(e.Book,e.Container,["clone","dispose"],"zimContainer"),e.Scrambler=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L){var S="tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",k;if(k=mt(e.Scrambler,arguments,S,this))return k;qe("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=b;var m=R===!1?{}:e.getStyle(this.type,this.group,L);n(t)&&(t=m.tile!=null?m.tile:t),n(r)&&(r=m.keys!=null?m.keys:null),n(i)&&(i=m.keyProperty!=null?m.keyProperty:null),n(o)&&(o=m.scramble!=null?m.scramble:!0),n(l)&&(l=m.time!=null?m.time:0),n(f)&&(f=m.wait!=null?m.wait:0),n(d)&&(d=m.num!=null?m.num:1),n(p)&&(p=m.shadowColor!=null?m.shadowColor:"rgba(0,0,0,.3)"),n(_)&&(_=m.shadowBlur!=null?m.shadowBlur:5),n(P)&&(P=m.swap!=null?m.swap:!1),n(T)&&(T=m.swapLock!=null?m.swapLock:!1),T&&(P=!0),n(t)&&(t=new e.Tile(new e.Rectangle(100,100,e.series(e.silver,e.tin,e.grey,e.dark,e.darker)),5,1,5)),t.addTo(this);var A=this;A.tile=t,A.complete=!0;var D=g(l);g(f);var C=(t.width+t.spacingH)/t.cols,E=(t.height+t.spacingV)/t.rows,X=fe.zdf,Z=e.makeID(null,10),V,O,ne,N=!1;t.pointers={},t.on("mousedown",function(G){if(N)return;N=!0,U(G.target),A.myDownCheck=!0,ne=G.target;var v="id"+Math.abs(G.pointerID+1);if(t.pointers[v]=!0,V=G.target.x,O=G.target.y,T){var w=t.current;if(A.testItem(G.target,w.indexOf(G.target))){G.target.noMouse(),G.target.noDrag(),G.target.locked=!0,A.myDownCheck=N=!1,z();return}}if(p!=-1&&_>0){var h=new je.Shadow(p,3,3,_);G.target.backing?G.target.backing.shadow=h:G.target.shadow=h}X&&(A.scrmu||(A.scrmu=X.on("mouseupplusonly",function(x){if(A.myDownCheck){A.myDownCheck=!1;var F=e.loop(t.pointers,function(Ae,Y){return Y});F||(t.pointers.id0=!0),x={target:ne,pointerID:x.pointerID?F:-1},I(x)}}))),A.upEvent&&t.off("pressup",A.upEvent),A.upEvent=t.on("pressup",function(x){var F="id"+Math.abs(x.pointerID+1);t.pointers[F]&&(A.myDownCheck=N=!1,I(x))});function I(x){var F="id"+Math.abs(x.pointerID+1);if(t.pointers[F]){delete t.pointers[F];var Ae=!0;if(z(),N=!1,A.moveEvent&&t.off("pressmove",A.moveEvent),T){var Y=x.target.boundsToGlobal(),K=t.hitTestGrid(t.width,t.height,t.cols,t.rows,Y.x+Y.width/2,Y.y+Y.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(n(K))Ae=!1;else{var ge=w[K[0]];x.target==ge?Ae=!1:Ae=!A.testItem(ge,K[0])}}P&&Ae&&q(x),x.target.mouseEnabled=!1,x.target.animate({props:{x:V,y:O},time:.1,id:Z,timeUnit:"seconds",pauseOnBlur:!1,call:Q,params:x})}}function Q(x){!A.complete&&A.test()&&(A.complete=!0,A.dispatchEvent("complete")),p!=-1&&_>0&&(x.target.backing?x.target.backing.shadow=null:x.target.shadow=null),x.target.mouseEnabled=!0}P||(A.moveEvent&&t.off("pressmove",A.moveEvent),A.moveEvent=t.on("pressmove",function(x){q(x)}))});function q(G){var v=G.target;v.stopAnimate();var w=v.boundsToGlobal(),h=t.hitTestGrid(t.width,t.height,t.cols,t.rows,w.x+w.width/2,w.y+w.height/2,null,null,t.spacingH,t.spacingV,null,"open");n(h)||e.loop(t,function(I){if(!(I==v||I.paused===!1)){var Q=I.boundsToGlobal(),x=t.hitTestGrid(t.width,t.height,t.cols,t.rows,Q.x+Q.width/2,Q.y+Q.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(!n(x)){var F;h[2]==x[2]&&(I.x>=v.x&&I.x<=v.x+C/2||I.x<=v.x&&I.x>=v.x-C/2)&&(F=I.x,I.top().ord(-1),I.animate({props:{x:V},time:.2,id:Z,timeUnit:"seconds",call:function(){P&&!A.complete&&A.test()&&(A.complete=!0,A.dispatchEvent("complete"))}}),V=F),h[1]==x[1]&&(I.y>=v.y&&I.y<=v.y+E/2||I.y<=v.y&&I.y>=v.y-E/2)&&(F=I.y,I.top().ord(-1),I.animate({props:{y:O},time:.201,override:!1,id:Z,timeUnit:"seconds",call:function(){P&&!A.complete&&A.test()&&(A.complete=!0,A.dispatchEvent("complete"))}}),O=F)}}},!0)}function U(G){t.loop(function(v){v!=G&&v.noMouse()})}function z(){t.loop(function(G){G.locked||G.mouse()})}this.test=function(){var G=t.current;return e.loop(G,function(v,w){if(n(v)||!A.testItem(v,w))return!1})},this.testItem=function(G,v){if(!n(G)){if(n(v)&&(v=t.current.indexOf(G)),r){var w=n(i)?G.key:G[i];if(w!=r[v])return!1}else if(t.items[v]!=G)return!1;return!0}},this.update=function(){return t.noDrag(),t.drag({boundary:t,singleTouch:!0}),this},this.starts=[];var ie=[];e.loop(t.rows*t.cols,function(G){ie.push(G)});var ae=ie.slice();t.loop(function(G){G.mouseChildren=!1,A.starts.push({x:G.x,y:G.y})}),this.inactive=!1,this.scramble=function(G,v,w){n(v)&&(v=0),n(G)&&(G=0),(n(w)||G==0)&&(w=1),he(),e.timeout(v,function(){G>0?e.interval(G/w,h,w,!0):h()}),setTimeout(function(){A.complete=!1,t.loop(function(I){I.mouse(),I.locked=!1}),A.mouse(),t.drag({boundary:t,singleTouch:!0}),N=!1},D=="s"?(v+G)*1e3:v+G);function h(){for(var I=!0,Q=0;I&&Q<50;)Q++,e.shuffle(ie),I=e.loop(ie,function(x,F){var Ae=t.getChildAt(x);if(r){var Y=n(i)?Ae.key:Ae[i];if(Y!=r[F])return!1}else if(t.items[F]!=Ae)return!1});$(ie,G/w),e.timeout(G,function(){A.dispatchEvent("scrambled")})}return A},o?A.scramble(l,f,d):A.added(function(){t.drag({boundary:t,singleTouch:!0})});function he(){A.upEvent&&t.off("pressup",A.upEvent),A.moveEvent&&t.off("pressmove",A.moveEvent),t.noDrag(),f+l>0&&A.noMouse()}function $(G,v,w){e.stopAnimate(Z),e.loop(t.items,function(h,I,Q){var x=A.starts[G[I]];v?h.animate({props:{x:x.x,y:x.y},time:v,ease:w?"quadInOut":"quadOut",wait:w,timeUnit:"seconds",id:Z}):(h.loc(x),A.stage?h.drag({boundary:t,singleTouch:!0}):I==Q-1&&A.added(function(){t.drag({boundary:t,singleTouch:!0})}))})}this.solve=function(G,v,w){n(w)&&(w=!0),n(v)&&(v=0),n(G)&&(G=0),v+G==0&&w&&A.noMouse(),setTimeout(function(){ie=ae.slice(),he(),$(ie,G,0,w)},D=="s"?v*1e3:v),w||setTimeout(function(){A.mouse(),t.drag({boundary:t,singleTouch:!0})},D=="s"?(v+G)*1e3:v+G)},this._enabled=!0,Object.defineProperty(A,"enabled",{get:function(){return A._enabled},set:function(G){c(A,G),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&A.stage&&A.stage.update()}}),Object.defineProperty(A,"order",{get:function(){var G=[],v=e.loop(t.current,function(w){if(!w)return!1;G.push(w.tileNum)});return!v||G.length!=ie.length||(ie=G),ie},set:function(G){var v=[];e.loop(G,function(w){v.push(t.items[w])}),t.remake(v),t.stage&&t.stage.update()}}),this.dispose=function(G,v,w){return A.scrmu&&X.off("mouseupplus",A.scrmu),t.removeAllEventListeners(),w||(A.zimContainer_dispose(!0),A.stage&&A.stage.update()),!0},R!==!1&&e.styleTransforms(this,m),this.clone=function(){return A.cloneProps(new e.Scrambler(t.clone(),r,i,o,l,f,d,p,_,P,T,R,A.group,L))}},e.extend(e.Scrambler,e.Container,["clone","dispose"],"zimContainer",!1),e.Scroller=function(t,r,i,o,l,f,d,p,_,P,T){var R="backing, speed, direction, horizontal, gapFix, stage, container, backing2, style, group, inherit",b;if(b=mt(e.Scroller,arguments,R,this))return b;qe("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=P;var L=_===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(t=L.backing!=null?L.backing:null),n(t))return;var S=this.backing1=t;if(n(S)||!S.getBounds)return;var k;n(p)?k=this.backing2=t.clone(!0):k=p,n(o)&&(o=L.horizontal!=null?L.horizontal:!0),n(l)&&(l=L.gapFix!=null?L.gapFix:0),n(d)&&(d=L.container!=null?L.container:null),n(f)&&(f=L.stage!=null?L.stage:null);var m=this;n(r)&&(r=L.speed!=null?L.speed:1),this.speed=r;var A=this.baseSpeed=this.speed;n(i)&&(i=L.direction!=null?L.direction:1),this.direction=i;var D=o?S.scaleX:S.scaleY;if(S.type=="AC"){ht("ZIM Scroller(): please provide Pic() with dimensions for backing objects");return}if(!S.getBounds()){ht("ZIM Scroller(): please setBounds() on backing objects");return}if(!f&&!S.stage){ht("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start");return}if(!S.parent){ht("ZIM Scroller(): please add object to container or stage before adding to Scroller");return}if(S.parent.addChildAt(k,S.parent.getChildIndex(S)),f=f||S.stage,n(d)&&(d=f),!d.getBounds()){ht("zim display - Scroller(): please setBounds() on container or stage if no container");return}var C=S.getBounds().width*D-l,E=S.getBounds().height*D-l,X,Z;o?k.x=C:k.y=E;var V=!1,O=e.Ticker.add(ne,f);function ne(){X||(X=d.getBounds().width,Z=d.getBounds().height),!(m.speed==0||m.direction==0)&&(o?(S.x-=m.speed*m.direction,S.x<k.x?k.x=S.x+C:k.x=S.x-C,m.direction*m.speed>0?k.x<0&&S.x<k.x?S.x=k.x+C:S.x<0&&k.x<S.x&&(k.x=S.x+C):k.x>X&&k.x>S.x?k.x=S.x-C:S.x>X&&S.x>k.x&&(S.x=k.x-C)):(S.y-=m.speed*m.direction,S.y<k.y?k.y=S.y+E:k.y=S.y-E,m.direction*m.speed>0?k.y<0&&S.y<k.y?S.y=k.y+E:S.y<0&&k.y<S.y&&(k.y=S.y+E):k.y>Z&&k.y>S.y?k.y=S.y-E:S.y>Z&&S.y>k.y&&(S.y=k.y-E)))}this.paused=!1,this.pause=function(N,q){return n(N)&&(N=!0),n(q)&&(q=0),N?(A=m.speed,q>0?(V=!0,e.animate({target:m,obj:{pausingSpeed:0},ticker:!1,time:q,call:function(){m.speed=0,m.paused=!0,V=!1,m.dispatchEvent("pause")}})):(V=!1,m.speed=0,m.paused=!0,setTimeout(function(){m.dispatchEvent("pause")},10))):(V=!1,q>0?e.animate({target:m,obj:{pausingSpeed:A},ticker:!1,time:q,call:function(){m.speed=A,m.paused=!1,V=!1}}):(m.speed=A,m.paused=!1)),m},Object.defineProperty(m,"percentSpeed",{get:function(){return m.baseSpeed==0?NaN:m.speed/m.baseSpeed*100},set:function(N){V||m.paused||(m.speed=m.baseSpeed*N/100)}}),Object.defineProperty(m,"pausingSpeed",{get:function(){return m.baseSpeed==0?NaN:m.speed/m.baseSpeed*100},set:function(N){m.speed=m.baseSpeed*N/100}}),Object.defineProperty(m,"percentComplete",{get:function(){return o?S.x<0&&S.x>k.x?-S.x/S.width*100:(-k.x/k.width*100+1e9)%100:S.y<0&&S.y>k.y?-S.y/S.height*100:(-k.y/k.height*100+1e9)%100},set:function(N){N=(N+1e9)%100,o?(S.x=-N*S.width/100,k.x=S.x+C):(S.y=-N*S.height/100,k.y=S.y+E)}}),_!==!1&&e.styleTransforms(this,L),this.dispose=function(){return e.Ticker.remove(O),!0}},e.extend(e.Scroller,je.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",L;if(L=mt(e.Dynamo,arguments,b,this))return L;qe("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=T;var S=P===!1?{}:e.getStyle(this.type,this.group,R);if(n(t)&&(t=S.sprite!=null?S.sprite:null),n(t))return;var k=this.frames=t.parseFrames(i,o,l,!0);if(k.length==0)return;this.totalFrames=k.length;var m=0;n(r)&&(r=S.speed!=null?S.speed:30),n(d)&&(d=S.reversible!=null?S.reversible:!0);var A=this.baseSpeed=this.speed=r;n(f)&&(f=S.update!=null?S.update:!1),n(p)&&(p=S.flip!=null?S.flip:null),n(p)&&d==!1&&(p=!0);var D=this,C,E,X=Date.now(),Z,V,O,ne=!1;D.scaleX=t.scaleX,D.scaleY=t.scaleY;function N(){if(C=requestAnimationFrame(N),E=k[m].s,!(D.speed==0||E==0)&&(V=1e3/Math.abs(D.speed)*E,Z=Date.now(),Z-X>V)){X=Z;var q=D.frame+(D.speed>0||!d?1:-1),U=!1;q>=k.length&&(U=!0,q=0),q<0&&(U=!0,q=k.length-1),D.frame=q,p&&(D.speed<0?t.scaleX=-D.scaleX:t.scaleX=D.scaleX),_&&(D.speed<0?t.scaleY=-D.scaleY:t.scaleY=D.scaleY),U&&D.dispatchEvent("loop"),D.dispatchEvent("change"),f&&t.stage&&t.stage.update(),!n(O)&&O==D.frame&&(ne=!1,D.speed=0,D.paused=!0,D.dispatchEvent("pause"))}}N(),this.paused=!1,this.pause=function(q,U,z){if(n(q)&&(q=!0),q!=D.paused)return n(U)&&(U=0),q?(A=D.speed,typeof z>"u"?U>0?(ne=!0,e.animate({target:D,obj:{pausingSpeed:0},ticker:!1,time:U,call:function(){ne=!1,D.speed=0,D.paused=!0,D.dispatchEvent("pause")}})):(ne=!1,D.speed=0,D.paused=!0,setTimeout(function(){D.dispatchEvent("pause")},10)):(ne=!0,O=z)):(O=null,U>0?(ne=!0,e.animate({target:D,obj:{pausingSpeed:A},ticker:!1,time:U,call:function(){ne=!1,D.speed=A,D.paused=!1}})):(ne=!1,D.speed=A,D.paused=!1)),D},Object.defineProperty(D,"frame",{get:function(){return m},set:function(q){m=Math.round(q)%k.length;var U=k[m];n(U)||(t.frame=U.f)}}),Object.defineProperty(D,"percentSpeed",{get:function(){return D.baseSpeed==0?NaN:ne||D.paused?A/D.baseSpeed*100:D.speed/D.baseSpeed*100},set:function(q){if(ne||D.paused){A=D.baseSpeed*q/100;return}D.speed=D.baseSpeed*q/100}}),Object.defineProperty(D,"pausingSpeed",{get:function(){return D.baseSpeed==0?NaN:D.speed/D.baseSpeed*100},set:function(q){D.speed=D.baseSpeed*q/100}}),P!==!1&&e.styleTransforms(this,S),this.dispose=function(){cancelAnimationFrame(C)}},e.extend(e.Dynamo,je.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(t){qe("69.3"),this.cjsEventDispatcher_constructor();var r=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,f=0;f<o.length;f++)l=r.items.indexOf(o[f]),l<0&&r.items.push(o[f]);return r},t&&this.add(t),this.remove=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,f=0;f<o.length;f++)l=r.items.indexOf(o[f]),l>=0&&r.items.splice(l,1);return r},this.pause=function(i,o,l){if(n(i)&&(i=!0),i==r.paused)return;var f=[];if(i){n(l)||(o=null);for(var d=!1,p=0;p<r.items.length;p++)(!n(o)&&n(l)&&!r.items[p].totalFrames||r.items[p].totalFrames&&(!n(o)||!n(l)))&&(r.items[p].pause(!0,o,l),d=!0,f[p]=1,r.items[p].on("pause",function(){r.paused||(_(!0),r.paused=!0,r.dispatchEvent("pause"))},null,!0));d||(_(),r.paused=!0,setTimeout(function(){r.dispatchEvent("pause")},10))}else r.paused=!1,_();function _(){for(var P=0;P<r.items.length;P++)f[P]!=1&&r.items[P].pause(i)}},Object.defineProperty(r,"percentSpeed",{get:function(){return r._percentSpeed},set:function(i){r._percentSpeed=i;for(var o=0;o<r.items.length;o++)r.items[o].percentSpeed=i}}),this.dispose=function(){for(var i=0;i<r.items.length;i++)r.items[i].dispose();return r.items=null,!0}},e.extend(e.Accelerator,je.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v){var w="obj, width, height, interval, num, life, fade, shrink, warm, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, focusWarm, style, group, inherit",h;if(h=mt(e.Emitter,arguments,w,this))return h;qe("69.9"),this.type="Emitter",this.group=G;var I=$===!1?{}:e.getStyle(this.type,this.group,v);n(t)&&(t=I.obj!=null?I.obj:[new e.Circle(20,e.pink),new e.Circle(20,e.green),new e.Circle(20,e.blue)]),n(r)&&(r=I.width!=null?I.width:300),n(i)&&(i=I.height!=null?I.height:300);var Q=g(o);n(o)&&(o=I.interval!=null?I.interval:Q=="s"?.02:20),typeof o=="number"&&(o=Math.max(Q=="s"?.01:10,o)),n(l)&&(l=I.num!=null?I.num:1),n(R)&&(R=I.trace!=null?R.size:!1),n(b)&&(b=I.traceFadeTime!=null?I.traceFadeTime:P),n(L)&&(L=I.traceShiftX!=null?I.traceShiftX:0),n(S)&&(S=I.traceShiftY!=null?I.traceShiftY:0),a(f,Q),n(f)&&(f=I.life!=null?I.life:Q=="s"?1:1e3),n(d)&&(d=I.fade!=null?I.fade:!0),n(p)&&(p=I.shrink!=null?I.shrink:!R),n(_)&&(_=I.warm!=null?I.warm:null),a(P,Q),n(P)&&(P=I.decayTime!=null?I.decayTime:Q=="s"?1:1e3),n(k)&&(k=I.angle!=null?I.angle:{min:0,max:360}),n(m)&&(m=I.force!=null?I.force:5),n(A)&&(A=I.gravity!=null?I.gravity:9.8),n(D)&&(D=I.wind!=null?I.wind:0),n(C)&&(C=I.layers!=null?I.layers:"top"),n(r)&&(r=I.width!=null?I.width:100),n(i)&&(i=I.height!=null?I.height:100),n(Z)&&(Z=I.horizontal!=null?I.horizontal:!1),n(V)&&(V=I.vertical!=null?I.vertical:!1),n(O)&&(O=I.sink!=null?I.sink:null),!n(O)&&n(ne)&&(ne=I.sinkForce!=null?I.sinkForce:10),n(q)&&(q=I.events!=null?I.events:!1),n(U)&&(U=I.startPaused!=null?I.startPaused:!1),n(z)&&(z=I.pool!=null?I.pool:!0),n(ie)&&(ie=I.poolMin!=null?I.poolMin:0),n(ae)&&(ae=I.particles!=null?I.particles:new e.Container),n(he)&&(he=I.focusWarm!=null?I.focusWarm:!0),t.type=="shape"&&(he=!1),ae.type="Particles",ae.emitter=this,this.zimContainer_constructor(r,i,null,null,!1),this.type="Emitter";var x=this;this.regX=r/2,this.regY=i/2,x.obj=t,x.particles=ae,x.interval=o,x.num=l,x.life=f,x.fade=d,x.shrink=p,x.decayTime=P,x.decayStart=T,x.trace=R,x.traceFadeTime=b,x.traceShiftX=L,x.traceShiftY=S,x.angle=k,x.emitterForce=m,x.gravity=A,x.wind=D,x.layers=C,x.animation=E,x.random=X,x.horizontal=Z,x.vertical=V,x.sink=O,x.sinkForce=ne,x.events=q,x.startEmitterPaused=x.emitterPaused=U,x.pool=z,x.poolMin=ie,x.particlesEmitted=0;var F=[],Ae=0,Y=0,K,ge;e.added(x,ye);function ye(se){if(x.emitterPaused=null,x.on("added",function(){e.loop(x.particles,function(xe){xe.visible=!1}),x.particles.addTo(x.parent)}),ge=se,n(N)&&(ge.isWebGL?N=!1:N=e.mobile()),N&&(ge.snapToPixelEnabled=!0),ge){let xe=function(){var we=e.isPick(x.life)?e.Pick.getMinMax(x.life).max:x.life;if(n(we)&&(we=Q=="s"?1:1e3),x.startEmitterPaused){x.pauseEmitter();return}if(t=Array.isArray(x.obj)?x.obj:[x.obj],t.length<=0)return;var ke,pe;function Me(Ue,ue){return Ue-ue}Array.isArray(x.interval)?(x.interval.sort(Me),ke=x.interval[0]):x.interval.constructor=={}.constructor?ke=x.interval.min:ke=x.interval,Array.isArray(x.num)?(x.num.sort(Me),pe=x.num[x.num.length-1]):x.num.constructor=={}.constructor?pe=x.num.max:pe=x.num,e.loop(e.Pick.choose(x.num),function(){if(x.decayTime>0){var Ue={};x.shrink&&(Ue.scale=0),x.fade&&(Ue.alpha=0)}var ue,Ee,Te;if(x.pool&&F.length>0&&Y>=Math.max(x.poolMin,we/ke*pe))ue=F[Ae++%F.length],ue.visible=!0,Te=ue.trace?ue.getChildAt(0):ue,Te.emitShape&&(Ee=Te.template,Te.graphics.c().s(Ee.s?e.Pick.choose(Ee.s):null).ss(Ee.ss?e.Pick.choose(Ee.ss):null).sd(Ee.sd?e.Pick.choose(Ee.sd):null,Ee.offset?e.Pick.choose(Ee.offset):null)),ue.trace&&ue.cacheCanvas&&ue.updateCache(),x.layers=="top"?Te.emitShape?ue.addTo(ae,null,!1):ue.addTo(ae,ae.numChildren-1):Te.emitShape?ue.addTo(ae,x.layers=="bottom"?0:e.rand(ae.numChildren),!1):ue.addTo(ae,x.layers=="bottom"?0:e.rand(ae.numChildren)),R||ue.reg("center"),ue.scaleX=1,ue.scaleY=1,ue.alpha=ue.originalAlpha,Te.scaleX=Te.originalScaleX,Te.scaleY=Te.originalScaleY,Te.rotation=Te.originalRotation,Te.color=Te.originalColor,Te.endSpurt=!1;else{Y++,x.trace&&(ue=new e.Container(r,i,null,null,!1),ue.trace=!0);var _e=e.Pick.choose(e.shuffle(t)[0]);_e.type=="shape"?(Ee=_e,Te=new e.Shape(1,1,null,null,null,!1),Te.emitShape=!0,Te.template=Ee,Te.graphics.s(Ee.s?e.Pick.choose(Ee.s):null).ss(Ee.ss?e.Pick.choose(Ee.ss):null).sd(Ee.sd?e.Pick.choose(Ee.sd):null,Ee.offset?e.Pick.choose(Ee.offset):null),x.trace?Te.addTo(ue,null,!1):x.layers=="top"?Te.addTo(ae,null,!1):Te.addTo(ae,x.layers=="bottom"?0:e.rand(ae.numChildren),null,!1)):(Te=_e.clone(),Te.centerReg||Qn(Te),x.trace?Te.centerReg(ue).loc(-1e3,-1e3):x.layers=="top"?Te.centerReg(ae):Te.centerReg(ae,x.layers=="bottom"?0:e.rand(ae.numChildren))),x.trace&&(x.layers=="top"?ue.addTo(ae,null,!1):ue.addTo(ae,x.layers=="bottom"?0:e.rand(ae.numChildren),!1),ue.cache(L,S,r*2,i*2)),x.trace||(ue=Te),ue.particle=Te,ue.originalAlpha=ue.alpha,Te.originalAlpha=Te.alpha,Te.originalScaleX=Te.scaleX,Te.originalScaleY=Te.scaleY,Te.originalRotation=Te.rotation,Te.originalColor=Te.color}x.currentParticle=Te,x.particlesEmitted++,ue.particleNormal=!0,ue.particleDecaying=!1,ue.particleFizzing=!1;var We=e.Pick.choose(x.angle),oe=e.Pick.choose(x.emitterForce),Ye=oe*Math.cos(We*Math.PI/180),Ve=oe*Math.sin(We*Math.PI/180);Te.info={position:{x:x.x,y:x.y},velocity:{x:Ye,y:Ve},sink:n(ne)?null:dt(ne)},x.horizontal&&(Te.info.position={x:x.x-x.regX+e.rand(0,r),y:x.y-x.regY+(x.vertical?i/2:0)}),x.vertical&&(Te.info.position={x:x.x-x.regX+(x.horizontal?r/2:0),y:x.y-x.regY+e.rand(0,i)}),Te.emitShape?Te.graphics.mt(Te.info.position.x,Te.info.position.y):(Te.x=Te.info.position.x,Te.y=Te.info.position.y),Te.alpha=Te.originalAlpha,x.random&&e.loop(x.random,function(Ke,lt){var gt=e.Pick.choose(lt);Ke=="scale"?Te.sca(gt):(Ke=="x"?Te.info.position.x=x.horizontal||x.vertical?gt:gt+r/2:Ke=="y"&&(Te.info.position.y=x.horizontal||x.vertical?gt:gt+i/2),(Ke=="x"||Ke=="y")&&Te.emitShape&&Te.graphics.mt(Te.info.position.x,Te.info.position.y),Te[Ke]=gt,Te.emitShape&&(Te.x=0,Te.y=0))}),N&&!Te.emitShape&&Te.cache(Te.getBounds().x-10,Te.getBounds().y-10,Te.getBounds().width+20,Te.getBounds().height+20);var De=Te.emitShape?!1:x.shrink,de=(ue||Te).life=dt(x.life);if(x.decayTime>0&&(x.fade||De||x.trace&&x.traceFadeTime>0)){if(x.trace&&x.traceFadeTime>0&&ue.animate({obj:{alpha:0},time:x.traceFadeTime,wait:de-x.traceFadeTime,waitedCall:function(Ke){Ke.particleNormal=!1,Ke.particleFizzing=!0},call:ee,override:!1,id:"decay"}),x.fade||De){var Be={};x.fade&&(Be.alpha=0),De&&(Be.scaleX=0,Be.scaleY=0),Te.animate({obj:Be,time:x.decayTime,wait:n(x.decayStart)?de-x.decayTime:x.decayStart,waitedCall:function(Ke){Ke.parent!=x&&(Ke=Ke.parent),Ke.particleNormal=!1,Ke.particleDecaying=!0},call:function(Ke){x.events&&ce("decayed",Ke),Ke.endSpurt&&ce("spurtdecayed",Ke),x.trace&&x.traceFadeTime>0||(n(x.decayStart)||x.decayStart+x.decayTime>x.life?Ke.parent&&ee(Ke.parent.trace?Ke.parent:Ke):-function(){var lt=ue;e.timeout(de-(x.decayStart+x.decayTime),function(){ee(lt)})}())},override:!1,id:"decay"})}}else ue.life=x.life,x.life>0&&-function(){var Ke=ue;Ke.timeOut=e.timeout(x.life,function(){ee(Ke)})}();if(x.events&&ce("emitted",ue),ve(Te),x.animation){var Qe=e.Pick.choose(x.animation);Array.isArray(Qe)?e.loop(Qe,function(Ke){n(Ke.override)&&(Ke.override=!1),Te.animate(e.copy(Ke))}):(n(Qe.override)&&(Qe.override=!1),Te.animate(e.copy(Qe)))}})},te=function(){e.loop(ae,function(we){if(we.trace){var ke=we;we=we.getChildAt(0)}var pe=we.info,Me=0,Ue=0;if(!n(x.sink)){var ue=x.particles.localToGlobal(pe.position.x,pe.position.y),Ee;x.sink.parent&&x.sink.parent.localToGlobal?Ee=x.sink.parent.localToGlobal(x.sink.x,x.sink.y):Ee=new je.Point(e.Pick.choose(x.sink.x),e.Pick.choose(x.sink.y));var Te=e.angle(ue.x,ue.y,Ee.x,Ee.y);Me=pe.sink*Math.cos(Te*Math.PI/180),Ue=pe.sink*Math.sin(Te*Math.PI/180)}var _e=x.wind+Me,We=x.gravity+Ue;pe.velocity.x+=_e*J,pe.velocity.y+=We*J,pe.position.x+=pe.velocity.x*J*100,pe.position.y+=pe.velocity.y*J*100,we.emitShape?we.graphics.lt(pe.position.x,pe.position.y):(we.x=pe.position.x,we.y=pe.position.y),x.trace&&ke&&ke.cacheCanvas&&ke.updateCache(we.emitShape?null:"source-over")})};var Oe=x.parent.getChildIndex(x);x.parent.addChildAt(ae,Oe),!Z&&!V&&x.centerReg(null,null,!1),x.zimInterval=e.interval(x.interval,xe,null,!0,!0);var J=0;K=x.emitterTicker=e.Ticker.add(te,ge),J=1/e.Ticker.framerate,x.focusWarm=he,x.doWarm=function(we){if(n(we)||we===!0){var ke;f.max?ke=f.max:Array.isArray(f)?ke=e.arrayMinMax(f).max:ke=dt(f);var pe;o.min?pe=o.min:Array.isArray(o)?pe=e.arrayMinmin(o).min:pe=dt(o),we=Math.min(200,Math.round(ke/pe))}var Me=x.pool;x.pool=!1;var Ue=Math.round(o*e.Ticker.framerate);e.loop(Math.round(we*o*e.Ticker.framerate),function(ue){ue%Ue==0&&xe(),e.loop(ae,function(Ee){Ee.warmTick?Ee.warmTick++:Ee.warmTick=1,Ee.warmTick/e.Ticker.framerate>Ee.life&&ee(Ee)}),te()}),e.loop(ae,function(ue){if(ue.zimTweens){var Ee=ue.warmTick/e.Ticker.framerate/ue.life*100;Ee>=100&&(ue.alpha=0),ue.percentComplete=Ee}}),x.pool=Me},_&&x.doWarm(_)}}x.particles.noMouse();function ee(se){if(x.events&&ce("fizzed",se),(se.trace?se.getChildAt(0).endSpurt:se.endSpurt)&&(ce("spurtfizzed",se),x.spurting=!1),x.pool&&se.pooled!="end")if(se.pooled){se.visible=!1;return}else{se.pooled=!0,F&&F.push(se),se.visible=!1;return}x.removeChild(se),x.trace&&se.uncache(),se=null}function ce(se,Oe){if(!n(Oe)){var J=new je.Event(se);J.particle=Oe.trace?Oe.getChildAt(0):Oe,x.dispatchEvent(J)}}function ve(se){n(x.spurtCount)&&n(x.spurtNum)||(x.spurtCount++,x.spurtCount>=x.spurtNum&&Re(se))}function Re(se){x.pauseEmitter(),x.spurtCount=x.spurtNum=null,!n(se)&&(ce("spurted",se),se.endSpurt=!0)}Object.defineProperty(x,"interval",{get:function(){return o},set:function(se){o=se,x.zimInterval&&(x.zimInterval.time=o)}}),this.removeFrom=function(){x.parent&&x.parent.removeChild(x),x.particles.removeFrom()},this.spurting=!1,this.spurt=function(se,Oe,J){var xe="num, time, restart",te;return(te=mt(x.spurt,arguments,xe))?te:(n(Oe)||(e.timeout(e.Pick.choose(Oe),function(){Re(x.currentParticle)},!0),x.spurting=!0),n(se)||(x.spurtNum=e.Pick.choose(se),x.spurtCount=0,x.spurting=!0),x.pauseEmitter(!1,J,null,!0),x)},this.clearPool=function(){e.loop(x.particles,function(se){se.pooled="end",se.visible||x.removeChild(se)},!0),Y=0,Ae=0,F=[]},x.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(se,Oe,J,xe){if(x.startEmitterPaused=null,n(se)&&(se=!0),n(Oe)&&(Oe=!1),n(J)&&(J=!1),se){if(x.emitterPaused)return x;J&&(K&&e.Ticker.remove(K),e.loop(x.particles,function(te){te.pauseAnimate(),te.trace&&te.getChildAt(0).pauseAnimate(),te.timeOut&&te.timeOut.pause()})),x.zimInterval.pause(),x.emitterPaused=!0}else{if(!x.emitterPaused)return x;Oe&&(e.loop(x.particles,function(te){te.stopAnimate(),te.timeOut&&te.timeOut.clear(),te.trace&&te.getChildAt(0).pauseAnimate()}),x.removeAllChildren()),ge&&K&&!e.Ticker.has(ge,K)&&(e.Ticker.add(K,ge),e.loop(x.particles,function(te){te.pauseAnimate(!1),te.timeOut&&te.timeOut.pause(!1),te.trace&&te.getChildAt(0).pauseAnimate(!1)})),x.zimInterval&&x.zimInterval.pause(!1,xe),x.emitterPaused=!1}return x},this.resize=function(se,Oe){n(se)||(r=se),n(Oe)||(i=Oe),x.setBounds(0,0,r,i),!Z&&!V&&x.centerReg(),x.clearPool()},$!==!1&&e.styleTransforms(this,I),this.clone=function(se){var Oe;return Array.isArray(x.obj)||x.obj.constructor=={}.constructor?Oe=e.copy(x.obj):x.obj.clone?Oe=x.obj.clone(se):Oe=x.obj,x.cloneProps(new e.Emitter(Oe,r,i,x.interval,x.num,x.life,x.fade,x.shrink,x.decayTime,x.decayStart,x.trace,x.traceFadeTime,x.traceShiftX,x.traceShiftY,x.angle,x.emitterForce,x.gravity,x.wind,x.layers,x.animation,e.copy(x.random),x.horizontal,x.vertical,x.sink,x.sinkForce,N,x.events,U,x.pool,x.poolMin,$,x.group,v))},this.dispose=function(){return x.zimInterval&&x.zimInterval.clear(),K&&e.Ticker.remove(K),e.loop(F,function(se){se&&se.dispose()}),ae&&ae.dispose&&ae.dispose(),x.currentParticle&&x.currentParticle.dispose&&x.currentParticle.dispose(),t&&Array.isArray(t)?e.loop(t,function(se){se.dispose&&se.dispose()}):t&&t.dispose&&t.dispose(),ae=x.currentParticle=x.particles=t=x.obj=F=x.poolList=null,!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.Generator=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X){var Z="color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",V;if(V=mt(e.Generator,arguments,Z,this))return V;qe("69.92"),this.group=E;var O=C===!1?{}:e.getStyle("Generator",this.group,X);n(k)&&(k=O.frame!=null?O.frame:fe.zdf);var ne=k.stage;n(t)&&(t=O.color!=null?O.color:null),n(r)&&(r=O.strokeColor!=null?O.strokeColor:e.white),n(i)&&(i=O.strokeWidth!=null?O.strokeWidth:1),n(d)&&(d=O.maxCount!=null?O.maxCount:1e3),n(p)&&(p=O.boundary!=null?O.boundary:new e.Boundary(0,0,ne.width,ne.height)),n(_)&&(_=O.drawCount!=null?O.drawCount:1),n(P)&&(P=O.drawPause!=null?O.drawPause:!0),n(T)&&(T=O.drawSpacebarPause!=null?O.drawSpacebarPause:!0),n(R)&&(R=O.startX!=null?O.startX:ne.width/2),n(b)&&(b=O.startY!=null?O.startY:ne.height/2),n(L)&&(L=O.cache!=null?O.cache:!1);var N=this.drawing=new e.Container(p.x,p.y,p.width,p.height).addTo(ne),q=this.shape=new e.Shape(p.width,p.height).addTo(N);this.drawCount=_,n(P)&&(P=!0),L&&q.cache(p.x,p.y,p.width,p.height),this.zimContainer_constructor(p.x,p.y,p.width,p.height),this.type="Generator";var U=this;if(U.draw=null,A){U.drawCount=10,!n(l)&&n(o)&&(o=l),l=null;var z=new e.Loader;U.outputNum=0,U.outputName=A===!0?"gen_":A.match(/_$/)?A:A+"_"}this.color=t,this.strokeColor=r,this.strokeWidth=i;var ie=R,ae=b;this.fill=function(w){return U.color=w,U.currentColor=dt(U.color),q.f(U.currentColor),this},this.stroke=function(w,h){return n(w)||(U.strokeColor=w,U.currentStrokeColor=dt(U.strokeColor),q.s(U.currentStrokeColor)),n(h)||(U.strokeWidth=h,U.currentStrokeWidth=dt(U.strokeWidth),q.ss(U.currentStrokeWidth)),this},this.noStroke=function(){return U.strokeColor=U.currentStrokeColor=null,U.strokeWidth=U.currentStrokeWidth=null,q.s(),q.ss(1),this},q.matrix=q.getMatrix(),this.translate=function(w,h){n(w)&&(w=0),n(h)&&(h=0),w=dt(w),h=dt(h);var I=q.matrix.transformPoint(w,h);return ie=I.x,ae=I.y,q.mt(ie,ae),q.matrix.translate(w,h),this},this.rotate=function(w){return n(w)&&(w=0),w=dt(w),q.matrix.rotate(w),this},this.scale=function(w,h){return n(w)&&(w=1),n(h)&&(h=w),w=dt(w),h=dt(h),q.matrix.scale(w,h),this},this.skew=function(w,h){return n(w)&&(w=0),n(h)&&(h=0),w=dt(w),h=dt(h),q.matrix.skew(w,h),this},S&&(U.linePoints=[]),this.line=function(w,h,I,Q){n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=0),n(Q)&&(Q=0),w=dt(w),h=dt(h),I=dt(I),Q=dt(Q),(S=="zero"||S=="nonzero"&&w&&h)&&U.linePoints.push([w,h]),U.translate(w,h);var x=q.matrix.transformPoint(I,Q);return ie=x.x,ae=x.y,q.lt(ie,ae),S&&U.linePoints.push([ie,ae]),q.matrix.translate(I,Q),this},this.arc=function(w,h,I,Q,x,F){n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=50),w=dt(w),h=dt(h),I=dt(I),I=Math.abs(I),n(Q)&&(Q=0),n(x)&&(x=180),Q=dt(Q),x=dt(x),n(F)&&(F=!1),F=dt(F),U.translate(w,h);var Ae=q.matrix.transformPoint(0,0);q.decomp||(q.decomp={}),q.matrix.decompose(q.decomp);var Y=(Math.abs(q.decomp.scaleX)+Math.abs(q.decomp.scaleY))/2,K=q.decomp.rotation||0,ge=I*Y;return q.mt(Ae.x+ge*Math.cos((Q+K)*Math.PI/180),Ae.y+ge*Math.sin((Q+K)*Math.PI/180)),q.a(Ae.x,Ae.y,ge,(Q+K)*Math.PI/180,(x+K)*Math.PI/180,F),this},this.curve=function(w,h,I,Q,x,F){n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=50),n(Q)&&(Q=50),n(x)&&(x=100),n(F)&&(F=0),w=dt(w),h=dt(h),I=dt(I),Q=dt(Q),x=dt(x),F=dt(F),U.translate(w,h);var Ae=q.matrix.transformPoint(I,Q),Y=q.matrix.transformPoint(x,F),K=Y.x,ge=Y.y;return q.qt(Ae.x,Ae.y,K,ge),q.matrix.translate(x,F),this},this.bezier=function(w,h,I,Q,x,F,Ae,Y){n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=50),n(Q)&&(Q=50),n(x)&&(x=-50),n(F)&&(F=-50),n(Ae)&&(Ae=100),n(Y)&&(Y=0),w=dt(w),h=dt(h),I=dt(I),Q=dt(Q),x=dt(x),F=dt(F),Ae=dt(Ae),Y=dt(Y),U.translate(w,h);var K=q.matrix.transformPoint(I,Q),ge=q.matrix.transformPoint(x,F),ye=q.matrix.transformPoint(Ae,Y),ee=ye.x,ce=ye.y;return q.bt(K.x,K.y,ge.x,ge.y,ee,ce),q.matrix.translate(Ae,Y),this},this.rectangle=function(w,h,I,Q,x,F,Ae,Y){if(n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=100),n(Q)&&(Q=I),w=dt(w),h=dt(h),I=dt(I),Q=dt(Q),!x&&!F&&!Ae&&!Y){U.translate(w,h);var K=q.matrix.transformPoint(0,0),ge=q.matrix.transformPoint(I,0),ye=q.matrix.transformPoint(I,Q),ee=q.matrix.transformPoint(0,Q);return q.mt(K.x,K.y).lt(ge.x,ge.y).lt(ye.x,ye.y).lt(ee.x,ee.y).lt(K.x,K.y).lt(ge.x,ge.y),q.mt(K.x,K.y),this}n(x)&&(x=0),n(F)&&(F=x),n(Ae)&&(Ae=x),n(Y)&&(Y=x),x=dt(x),F=dt(F),Ae=dt(Ae),Y=dt(Y);var ce=(I<Q?I:Q)/2,ve=0,Re=0,se=0,Oe=0;ce=Math.abs(ce),x<0&&(x*=ve=-1),x>ce&&(x=ce),F<0&&(F*=Re=-1),F>ce&&(F=ce),Ae<0&&(Ae*=se=-1),Ae>ce&&(Ae=ce),Y<0&&(Y*=Oe=-1),Y>ce&&(Y=ce),U.translate(w,h),q.decomp||(q.decomp={}),q.matrix.decompose(q.decomp);var J=(Math.abs(q.decomp.scaleX)+Math.abs(q.decomp.scaleY))/2,xe=I<0?-1:1,te=Q<0?-1:1,we=q.matrix.transformPoint(I-F*xe,0),ke=q.matrix.transformPoint(I+F*Re*xe,-F*Re*te),pe=q.matrix.transformPoint(I,F*te),Me=q.matrix.transformPoint(I,Q-Ae*te),Ue=q.matrix.transformPoint(I+Ae*se*xe,Q+Ae*se*te),ue=q.matrix.transformPoint(I-Ae*xe,Q),Ee=q.matrix.transformPoint(Y*xe,Q),Te=q.matrix.transformPoint(-Y*Oe*xe,Q+Y*Oe*te),_e=q.matrix.transformPoint(0,Q-Y*te),We=q.matrix.transformPoint(0,x*te),oe=q.matrix.transformPoint(-x*ve*xe,-x*ve*te),Ye=q.matrix.transformPoint(x*xe,0);return q.mt(we.x,we.y).at(ke.x,ke.y,pe.x,pe.y,F*J).lt(Me.x,Me.y).at(Ue.x,Ue.y,ue.x,ue.y,Ae*J).lt(Ee.x,Ee.y).at(Te.x,Te.y,_e.x,_e.y,Y*J).lt(We.x,We.y).at(oe.x,oe.y,Ye.x,Ye.y,x*J).cp(),this},this.circle=function(w,h,I,Q,x){n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=50),n(Q)&&(Q=100),n(x)&&(x=!0),w=dt(w),h=dt(h),I=dt(I),Q=dt(Q),I=Math.abs(I),U.translate(w,h);var F=q.matrix.transformPoint(0,0);q.decomp||(q.decomp={}),q.matrix.decompose(q.decomp);var Ae=(Math.abs(q.decomp.scaleX)+Math.abs(q.decomp.scaleY))/2,Y=q.decomp.rotation||0,K=I*Ae;if(U.circleHeight=K*2,typeof Q=="number"&&Q>=0&&Q<100){var ge=360*Q/100/2;q.mt(F.x+K*Math.cos((-ge-90+Y)*Math.PI/180),F.y+K*Math.sin((-ge-90+Y)*Math.PI/180)),q.a(F.x,F.y,K,(-ge-90+Y)*Math.PI/180,(ge-90+Y)*Math.PI/180,!1),x&&q.cp(),U.circleHeight=K-Math.cos(ge*Math.PI/180)*K}else q.mt(F.x+K,F.y),q.a(F.x,F.y,K,0,Math.PI*2);return this},this.elipse=function(w,h,I,Q){n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=100),n(Q)&&(Q=50),w=dt(w),h=dt(h),I=dt(I),Q=dt(Q),U.translate(w,h);var x=q.matrix.transformPoint(-I/2,-Q/2);q.decomp||(q.decomp={}),q.matrix.decompose(q.decomp);var F=q.decomp.scaleX,Ae=q.decomp.scaleY;return q.de(x.x,x.y,I*F,Q*Ae),this},this.poly=function(w,h,I,Q,x,F){n(w)&&(w=0),n(h)&&(h=0),n(I)&&(I=100),n(Q)&&(Q=5),n(x)&&(x=0),n(F)&&(F=0),w=dt(w),h=dt(h),I=dt(I),Q=dt(Q),x=dt(x),F=dt(F),I=Math.abs(I),U.translate(w,h);var Ae=q.matrix.transformPoint(0,0);q.decomp||(q.decomp={}),q.matrix.decompose(q.decomp);var Y=(Math.abs(q.decomp.scaleX)+Math.abs(q.decomp.scaleY))/2,K=q.decomp.rotation||0,ge=I*Y;return q.dp(Ae.x,Ae.y,ge,Q,x,K),this},this.closePath=this.close=this.cp=function(){return q.cp(),this},this._noise=new e.Noise(m),this.noise=function(){if(arguments.length==1)return(this._noise.simplex1D.apply(null,arguments)+1)/2;if(arguments.length==2)return(this._noise.simplex2D.apply(null,arguments)+1)/2;if(arguments.length==3)return(this._noise.simplex3D.apply(null,arguments)+1)/2;if(arguments.length==4)return(this._noise.simplex4D.apply(null,arguments)+1)/2},this.stack=[],this.colorStrokeStack=[],this.push=function(){return U.stack.push(q.matrix.clone()),U.colorStrokeStack.push([U.color,U.strokeColor,U.strokeWidth,U.currentColor,U.currentStrokeColor,U.currentStrokeWidth]),this},this.pop=function(){q.matrix=U.stack.pop()||q.matrix;var w=U.colorStrokeStack.pop()||[U.color,U.strokeColor,U.strokeWidth,U.currentColor,U.currentStrokeColor,U.currentStrokeWidth];return U.color=w[0],U.strokeColor=w[1],U.strokeWidth=w[2],U.currentColor=w[3],U.currentStrokeColor=w[4],U.currentStrokeWidth=w[5],q.f(U.currentColor).s(U.currentStrokeColor).ss(U.currentStrokeWidth),q.mt(q.matrix.x,q.matrix.y),this},this.blit=function(){return q.updateCache("source-over"),q.c(),this},this.step=function(){return U.draw&&v(),this},n(U.color)||this.fill(U.color),!n(U.strokeColor)&&U.strokeWidth?this.stroke(U.strokeColor,U.strokeWidth):U.noStroke(),this.translate(ie,ae),typeof f=="function"&&(this.setup=f,e.timeout(.01,function(){f(0,U.count,U),L&&q.updateCache(),ne.update()}));var he=0;this.maxCount=d,this.resetup=function(w){return n(w)&&(w=!0),he=0,w&&U.shape.c(),n(U.color)||this.fill(U.color),!n(U.strokeColor)&&U.strokeWidth?this.stroke(U.strokeColor,U.strokeWidth):U.noStroke(),this.reset(),this.setup&&(f(0,U.count,U),L&&q.updateCache(),ne.update()),this},this.stampNum=0,typeof l=="function"&&(this.stamp=l,e.timeout(.015,function(){G(0)})),this.restamp=function(w,h){return n(w)&&(w=!0),n(h)&&(h=!0),he=0,w&&U.shape.c(),h&&U.resetup(w),G(0),this},this.reset=function(){return this.fill(t),!n(r)&&i?this.stroke(r,i):this.noStroke(),q.matrix.identity(),this.translate(R,b),this},this.clear=function(){return this.shape.c(),this};function $(){z.save({content:ne,filename:U.outputName+e.decimals(U.outputNum,null,null,6),type:D}),U.outputNum++}A&&(ne.update(),$());function G(w){U.stampNum++;var h=e.loop(U.maxCount,function(I,Q){if(U.paused)return U.pausedCount=I,!1;if(U.changeCount)return U.changeCount=!1,!1;he=I+1;var x=l(I+1,Q,U,U.stampNum);if(U.currentColor=dt(U.color),q.f(U.currentColor),U.currentStrokeColor=dt(U.strokeColor),q.s(U.currentStrokeColor),U.currentStrokeWidth=dt(U.strokeWidth),q.ss(U.currentStrokeWidth),A&&(ne.update(),$()),x)return x},null,null,w);L&&q.updateCache(),h&&U.dispatchEvent("complete"),ne.update()}U.iterator=0,typeof o=="function"&&(this.draw=o,f?setTimeout(function(){U.ticker=e.Ticker.add(v)},100):this.ticker=e.Ticker.add(v),U.generatorPaused=!1,P&&(U.pauseEvent=ne.on("stagemousedown",function(){U.count>=U.maxCount||U.pauseTimeout||(e.Ticker.has(U.ticker)?(e.Ticker.remove(U.ticker),U.generatorPaused=!0,U.dispatchEvent("generatorpaused")):(U.ticker=e.Ticker.add(U.ticker),U.generatorPaused=!1,U.dispatchEvent("generatorunpaused")))})),T&&(U.pauseSpacebarEvent=k.on("keydown",function(w){U.count>=U.maxCount||U.pauseTimeout||w.keyCode==20&&(e.Ticker.has(U.ticker)?(e.Ticker.remove(U.ticker),U.generatorPaused=!0,U.dispatchEvent("generatorpaused")):(U.ticker=e.Ticker.add(U.ticker),U.generatorPaused=!1,U.dispatchEvent("generatorunpaused")))})));function v(){U.iterator++,U.iterator%Math.ceil(U.drawCount)==0&&(U.count++,U.draw(U.count,U.maxCount,U),L&&U.blit(),U.currentColor=dt(U.color),q.f(U.currentColor),U.currentStrokeColor=dt(U.strokeColor),q.s(U.currentStrokeColor),U.currentStrokeWidth=dt(U.strokeWidth),q.ss(U.currentStrokeWidth),U.dispatchEvent("drawing"),ne.update(),A&&$()),U.maxCount&&U.count>=U.maxCount&&(U.dispatchEvent("complete"),e.Ticker.remove(U.ticker))}this.redraw=function(w,h){return n(w)&&(w=!0),U.reset(),n(h)&&(h=!0),U.ticker&&e.Ticker.remove(U.ticker),U.iterator=0,U.count=0,w&&U.shape.c(),h?(U.resetup(w),setTimeout(function(){U.ticker&&(U.ticker=e.Ticker.add(U.ticker))},100)):U.ticker&&(U.ticker=e.Ticker.add(U.ticker)),this},this.paused=!1,this.pause=function(w,h){if(n(w)&&(w=!0),!(U.count>=U.maxCount)){if(w==this.paused)return this;this.paused=w,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?U.ticker&&e.Ticker.remove(U.ticker):U.ticker?U.ticker=e.Ticker.add(U.ticker):G(U.pausedCount,U.maxCount),setTimeout(function(){ne.update()},20),h&&(this.pauseTimeout=e.timeout(h,function(){U.pause(!U.paused),U.pauseTimeout=null})),U.dispatchEvent(U.paused?"paused":"unpaused")}},this.outOfBounds=function(w,h){n(w)&&(w=0),n(h)&&(h=w);var I=U.shape.stage;if(I)return U.currentX>I.width-w||U.currentX<0+w||U.currentY>I.height-h||U.currentY<0+h},this.stop=function(){U.pause(),U.pauseEvent&&ne.off("stagemousedown",U.pauseEvent),U.pauseSpaceEvent&&k.off("keydown",U.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return he},set:function(w){he=w,U.stamp&&(U.changeCount=!0,setTimeout(function(){G(he,U.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return ie},set:function(){kt&&ht("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return ae},set:function(){kt&&ht("Generator() - currentY is read only")}}),this.clone=function(){return U.cloneProps(new e.Generator(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,C,U.group,X))},U.dispose=function(w,h,I){return U.pause(),U.ticker&&e.Ticker.remove(U.ticker),U.pauseEvent&&ne.off("stagemousedown",U.pauseEvent),U.pauseSpacebarEvent&&k.off("keydown",U.pauseSpacebarEvent),U._noise&&(U._noise=null),U.shape&&U.shape.dispose(),U.drawing&&U.drawing.dispose(),U.shape=U.drawing=null,I||U.zimContainer_dispose(),!0},C!==!1&&e.styleTransforms(this,O)},e.extend(e.Generator,e.Container,["clone","dispose"],"zimContainer",!1),e.Pen=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z){var ie="size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, holdDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, pullColor, pullThickness, style, group, inherit",ae;if(ae=mt(e.Pen,arguments,ie,this))return ae;qe("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=U;var he=q===!1?{}:e.getStyle(this.type,this.group,z);n(i)&&(i=he.penType!=null?he.penType:"line");var $={size:2,color:e.dark,spread:{min:5,max:20},borderColor:e.darker,borderWidth:0},G={line:{size:2},kitetail:{size:{min:5,max:20},color:e.series(e.pink,e.blue,e.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:e.green,size:3,spread:{min:10,max:30}},hair:{color:[e.pink,e.blue],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:[e.dark,e.darker,e.grey]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};n(G[i])&&(i="line"),n(t)&&(t=he.size!=null?he.size:n(G[i].size)?$.size:G[i].size),n(r)&&(r=he.color!=null?he.color:n(G[i].color)?$.color:G[i].color),n(o)&&(o=he.damp!=null?he.damp:.5),o===!1&&(o=1),n(l)&&(l=he.spread!=null?he.spread:n(G[i].spread)?$.spread:G[i].spread),n(f)&&(f=he.borderColor!=null?he.borderColor:n(G[i].borderColor)?$.borderColor:G[i].borderColor),n(d)&&(d=he.borderWidth!=null?he.borderWidth:n(G[i].borderWidth)?$.borderWidth:G[i].borderWidth),n(p)&&(p=he.end!=null?he.end:e.isPick(t)||e.isPick(r)||i!="line"?"butt":"round"),n(b)&&(b=he.cropScale!=null?he.cropScale:1),n(T)&&(T=he.cache!=null?he.cache:!0),n(L)&&(L=he.undo!=null?he.undo:0),n(S)&&(S=he.undoKeys!=null?he.undoKeys:!0),n(k)&&(k=he.move!=null?he.move:!0),n(A)&&(A=he.deleteable!=null?he.deleteable:!0),n(D)&&(D=he.doubleClickDelete!=null?he.doubleClickDelete:!0),n(C)&&(C=he.holdDelete!=null?he.holdDelete:!0),n(m)&&(m=he.onTop!=null?he.onTop:!0),n(E)&&(E=he.immediateStop!=null?he.immediateStop:"both"),n(X)&&(X=he.lineAlpha!=null?he.lineAlpha:1),n(Z)&&(Z=he.lineBlendMode!=null?he.lineBlendMode:"normal"),n(_)&&(_=he.paper!=null?he.paper:new e.Container),n(P)&&(P=he.nib!=null?he.nib.clone():null),n(V)&&(V=he.frame!=null?he.frame:fe.zdf),n(O)&&(O=he.dashed!=null?he.dashed:null),O===!0&&(O=[3,100]),n(ne)&&(ne=he.pullColor!=null?he.pullColor:null),n(N)&&(N=he.pullThickness!=null?he.pullThickness:1);var v=this;this.dampX=new e.Damp(null,o),this.dampY=new e.Damp(null,o);var w=!0;this.drawing=!1,this.immediateStop=E,this.undoLevels=L,this.undoKeys=S,this.move=k,this.draggable=!0,this.lineAlpha=X,this.lineBlendMode=Z;var h=v.shape=new e.Shape,I=V.stage.width,Q=V.stage.height,x,F,Ae,Y;v.paperNum=0,v.sizeScale=1,v.spreadScale=1,v.sizeFactor=1,v.spreadFactor=1,v.pullThickness=N,v.stop=function(){};var K;this.added(function(J){K=J,v.paper=_,I=v.stage.width,Q=v.stage.height,n(P)?v.stageDown=K.on("stagemousedown",function(pe){v.dispatchEvent("start")}):v.zimDown?v.nib=P.addTo(v):(v.nib=P.addTo(v.parent,v.parent.getChildIndex(v)),v.nib.x=v.x,v.nib.y=v.y,v.nib.mouseEnabled=!1,v.stageDown=K.on("stagemousedown",function(pe){K=pe.target.stage,v.nibEvent=K.on("stagemousemove",xe),v.dispatchEvent("start")}),v.stageUp=K.on("stagemouseup",function(){K.off("stagemousemove",v.nibEvent)}));function xe(pe){v.drawing&&(v.nib.x=pe.stageX/e.scaX,v.nib.y=pe.stageY/e.scaY)}v.zimDragCheck=!1,v.stop=function(){v.stopCheck(!0)},v.infinite=!1,v.stopCheck=function(pe){if(pe)v.drawing=!1,v.infinite=!1;else if(v.infinite||v.zimDragCheck||!v.immediateStop&&v.drawing)return;v.immediate(v.x,v.y),setTimeout(function(){var Me;if(!v.drawing){if(T?(h.cache(-(I*b-I)/2,-(Q*b-Q)/2,I*b,Q*b),Me=_.bitmap=new e.Bitmap(h.cacheCanvas).reg((I*b-I)/2,(Q*b-Q)/2).addTo(_),h.graphics.clear(),h.uncache(),h.top()):Me=h,v.undoLevels>0){var Ue={paper:_,line:Me};L.push(Ue),L.length>v.undoLevels&&L.shift(),v.dispatchEvent("recordUndo")}T||(h=new e.Shape().clone().addTo(_)),v.lastSegment=Me,v.lastSelected=Me,Me.alpha=v.lineAlpha,Me.blendMode=v.lineBlendMode,Me.paper=_,v.dispatchEvent("stop"),v.dispatchEvent("change")}},v.immediateStop||pe?0:50)};var te=0;v.dampX.immediate(v.x),v.dampY.immediate(v.y),v.lastX=v.lastMidX=v.drawX=v.x,v.lastY=v.lastMidY=v.drawY=v.y;var we,ke;v.ticker=e.Ticker.add(function(){if(v.parent){var pe=v.dampX.convert(w?v.x:v.finishX),Me=v.dampY.convert(w?v.y:v.finishY),Ue=v.parent.localToLocal(pe,Me,h);if(Math.abs(v.lastX-pe)+Math.abs(v.lastY-Me)<1){if(v.drawing&&(v.drawing=!1,v.zimDown?(v.x=v.lastX=v.lastMidX=w?v.x:v.finishX,v.y=v.lastY=v.lastMidY=w?v.y:v.finishY):(v.x=v.finishX=v.lastX=v.lastMidX=pe,v.y=v.finishY=v.lastY=v.lastMidY=Me),v.stopCheck(),we=ke=null),v.lastX=v.lastMidX=pe,v.lastY=v.lastMidY=Me,_){var ue=_.localToLocal(0,0,v.parent);v.lastMidX-=ue.x,v.lastMidY-=ue.y}return}else{var Ee=e.Pick.choose(t)*v.sizeScale*v.sizeFactor,Te=e.Pick.choose(l)*v.spreadScale*v.spreadFactor;v.drawing||(ee=[],_.getChildIndex(h)!=_.numChildren-1&&h.top()),v.drawing=!0,v.dispatchEvent("drawing")}var _e=v.parent.localToLocal(v.lastX,v.lastY,h),We;_?We=_.localToLocal(v.lastMidX,v.lastMidY,h):We=v.parent.localToLocal(v.lastMidX,v.lastMidY,h);var oe,Ye,Ve;if(i=="splatter")for(var De=0;De<=3;De++){var de=e.rand(360)*Math.PI/180,Be=Te,Qe={x:pe+Be*Math.cos(de),y:Me+Be*Math.sin(de)},Ke=v.parent.localToLocal(Qe.x,Qe.y,h);h.graphics.mt(Ke.x,Ke.y).f(e.Pick.choose(r)).dc(Ke.x,Ke.y,Ee/2)}else i=="grass"||i=="hair"||i=="city"?((i=="grass"||i=="hair")&&(oe=v.lastX+(pe-v.lastX)/2,Ye=v.lastY+(Me-v.lastY)/2,Ve=v.parent.localToLocal(oe,Ye,h),h.graphics.s(e.Pick.choose(r)).ss(Ee,p).mt(Ve.x,Ve.y).lt(Ve.x+e.rand(-Te/4,Te/4),i=="hair"?Ve.y+Te:Ve.y-Te)),(i=="grass"||i=="hair"||i=="city"&&te%3==0)&&h.graphics.s(e.Pick.choose(r)).ss(Ee,p).mt(Ue.x,Ue.y).lt(Ue.x+(i=="city"?0:e.rand(-Te/4,Te/4)),i=="hair"?Ve.y+Te:Ue.y-Te),te++):(i=="kitetail"&&h.graphics.s(e.Pick.choose(r)).ss(Ee,p),i=="barbwire"?(h.graphics.s(e.Pick.choose(r)).ss(Ee,p),oe=v.lastX+(pe-v.lastX)/2+e.rand(-Te,Te),Ye=v.lastY+(Me-v.lastY)/2+e.rand(-Te,Te)):(oe=v.lastX+(pe-v.lastX)/2,Ye=v.lastY+(Me-v.lastY)/2),Ve=v.parent.localToLocal(oe,Ye,h),i!="line"&&h.graphics.qt(_e.x,_e.y,Ve.x,Ve.y));if(d>0&&i!="line"&&(oe=v.lastX+(pe-v.lastX)/2,Ye=v.lastY+(Me-v.lastY)/2,Ve=v.parent.localToLocal(oe,Ye,h),h.graphics.s(e.Pick.choose(f)).ss(e.Pick.choose(d)).mt(We.x,We.y).qt(_e.x,_e.y,Ve.x,Ve.y),i=="splatter"&&h.graphics.es()),i=="splatter")h.graphics.f(e.Pick.choose(r));else if(i!="kitetail")if(i=="line"){if(e.isPick(r)||Ee!=ke){var lt=e.Pick.choose(r);(lt!=we||Ee!=ke)&&h.graphics.s(lt).ss(Ee,p),we=lt,ke=Ee}}else h.graphics.s(e.Pick.choose(r)).ss(Ee,p);i!="grass"&&i!="hair"&&i!="city"&&i!="splatter"&&h.graphics.mt(We.x,We.y).qt(_e.x,_e.y,Ve.x,Ve.y),O&&h.graphics.sd(O),v.lastX=pe,v.lastY=Me,Ve&&(v.lastMidX=Ve.x,v.lastMidY=Ve.y),v.drawX=v.lastMidX||0,v.drawY=v.lastMidY||0}}),n(ne)||ge(K),v.mouseChildren=!1});function ge(J){var xe=J.frame;v.ppdEvent&&v.off("drawing",v.ppdEvent),v.ppsEvent&&v.off("stop",v.ppsEvent),v.ppmEvent&&J.off("stagemousedown",v.ppmEvent),v.pullShape||(v.pullShape=new e.Shape),v.ppdEvent=v.on("drawing",function(){setTimeout(function(){var te=_.localToGlobal(v.drawX,v.drawY);v.pullShape.c().s(ne).ss(v.pullThickness).mt(xe.mouseX,xe.mouseY).lt(te.x,te.y)},10)}),v.ppsEvent=v.on("stop",function(){v.pullShape.removeFrom(),v.pullShape.c()}),v.ppmEvent=J.on("stagemousedown",function(){v.pullShape.addTo(J),v.immediate(xe.mouseX,xe.mouseY),v.motionController&&v.motionController.immediate(xe.mouseX,xe.mouseY)})}function ye(){v.ppdEvent&&v.off("drawing",v.ppdEvent),v.ppsEvent&&v.off("stop",v.ppsEvent),v.ppmEvent&&v.off("stagemousedown",v.ppmEvent),v.pullShape&&v.pullShape.dispose()}L=[];var ee=[];this.saveState=function(J,xe,te){var we=J.type=="Container"?"paper":"line",ke={paper:v.paper};ke[we]=J,ke[we+"Transform"]={x:J.x,y:J.y,r:J.rotation,a:J.alpha,rX:J.regX,rY:J.regY,sX:J.scaleX,sY:J.scaleY,skX:J.skewX,skY:J.skewY,v:J.visible},!n(xe)&&!n(te)&&xe!=te&&(ke.startLayer=xe,ke.endLayer=te),L.push(ke),v.dispatchEvent("recordUndo"),L.length>v.undoLevels&&L.shift()};var ce={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var J=L.pop();if(J){if(ee.push(J),J.clear){for(var xe=0;xe<J.clear.length;xe++)J.paper.addChild(J.clear[xe]);J.paper.addChild(h)}else J.line&&J.lineTransform?(n(J.startLayer)||(h.top(),J.paper.setChildIndex(J.line,Ae)),ve("line",J.line)):J.line?J.line.removeFrom():J.paperTransform&&ve("paper",J.paper);v.lastPaper=v.paper,J.paper!=v.paper&&(v.paper=J.paper,v.dispatchEvent("paperChange")),v.dispatchEvent("change"),v.dispatchEvent("undo"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&v.stage&&v.stage.update()}};function ve(J,xe){for(var te,we=L.length-1;we>=0;we--)if(L[we][J]==xe&&L[we][J+"Transform"]){te=L[we][J+"Transform"];break}te||(te=e.copy(ce)),xe.x=te.x,xe.y=te.y,xe.alpha=te.a,xe.rotation=te.r,xe.regX=te.rX,xe.regY=te.rY,xe.scaleX=te.sX,xe.scaleY=te.sY,xe.skewX=te.skX,xe.skewY=te.skY,xe.visible=te.v,J=="line"&&T&&(xe.regX=(I*b-I)/2,xe.regY=(Q*b-Q)/2)}this.redo=function(){var J=ee.pop(),xe,te;J&&(L.push(J),J.clear?(J.paper.removeAllChildren(),J.paper.addChild(h)):J.line&&J.lineTransform?(n(J.endLayer)||(h.top(),J.paper.setChildIndex(J.line,Y)),te=J.lineTransform,xe=J.line):J.line?J.line.addTo(J.paper):J.paperTransform&&(te=J.paperTransform,xe=J.paper),xe&&(xe.x=te.x,xe.y=te.y,xe.alpha=te.a,xe.rotation=te.r,xe.regX=te.rX,xe.regY=te.rY,xe.scaleX=te.sX,xe.scaleY=te.sY,xe.skewX=te.skX,xe.skewY=te.skY,xe.visible=te.v),v.lastPaper=v.paper,J.paper!=v.paper&&(v.paper=J.paper,v.dispatchEvent("paperChange")),v.dispatchEvent("change"),v.dispatchEvent("redo"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&v.stage&&v.stage.update())},v.ctrlKey=!1,v.shiftKey=!1,v.ctrlKeyCheck=!1,v.zimkeydownEvent=function(J){v.ctrlKey=J.ctrlKey,v.shiftKey=J.shiftKey,J.keyCode==17&&k&&!v.ctrlKeyCheck&&(v.ctrlKeyCheck=!0,_.noDrag(),_.drag({onTop:m,all:!0})),!(v.undoLevels<=0)&&v.undoKeys&&(J.ctrlKey&&(J.shiftKey&&J.keyCode==90||J.keyCode==89)?v.redo():J.ctrlKey&&J.keyCode==90&&v.undo(),V&&V.ctrlKey&&v.write&&(v.lastWrite=v.write,v.write=!1))},fe.addEventListener("keydown",v.zimkeydownEvent),v.zimkeyupEvent=function(J){J.keyCode==17&&k&&v.ctrlKeyCheck&&(v.ctrlKeyCheck=!1,_.noDrag(),_.drag({onTop:m})),J.ctrlKey||(v.ctrlKey=!1),J.shiftKey||(v.shiftKey=!1),V&&!V.ctrlKey&&v.write==!1&&(v.write=v.lastWrite)},fe.addEventListener("keyup",v.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return _},set:function(J){J.type=="Container"&&(_=J,h.addTo(_,0,!1),_.shape=h,v.dampX.immediate(v.x),v.dampY.immediate(v.y),v.lastX=v.lastMidX=v.finishX=v.x,v.lastY=v.lastMidY=v.finishY=v.y,i=="barbwire"&&h.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*v.sizeScale*v.sizeFactor,p),h.graphics.mt(v.x,v.y),_.parent||_.addTo(v.parent,v.parent.getChildIndex(v)),n(_.paperNum)&&(_.paperNum=++v.paperNum,A&&_.on("mousedown",function(xe){v.lastSelected=xe.target,v.nibEvent&&v.stage.off("stagemousemove",v.nibEvent);var te=xe.target.paper;te&&(te!=v.paper&&(v.paper=te,v.dispatchEvent("paperChange")),v.shiftKey&&(v.ctrlKey?v.clear():(xe.target.visible=!1,v.undoLevels>0&&v.saveState(xe.target),v.dispatchEvent("change"))))}),D&&_.on("dblclick",function(xe){xe.target.visible=!1,v.undoLevels>0&&v.saveState(xe.target)}),D&&_.hold(function(xe){xe.target.visible=!1,v.undoLevels>0&&v.saveState(xe.target)}),k&&(_.on("mousedown",function(xe){K=xe.target.stage,v.draggingCheck=!0,!(v.shiftKey&&A)&&(x=xe.stageX/e.scaX,F=xe.stageY/e.scaY,h.top(),Ae=_.getChildIndex(xe.target))}),_.drag({onTop:m}),_.on("pressup",function(xe){if(!(A&&v.shiftKey)&&xe.target.visible!=!1&&!(v.undoLevels<=0)){if(Math.abs(xe.stageX/e.scaX-x)<1&&Math.abs(xe.stageY/e.scaY-F)<1){m&&(h.top(),Y=_.getChildIndex(xe.target),Ae!=Y&&v.saveState(xe.target,Ae,Y));return}v.ctrlKey?(v.saveState(_),v.dispatchEvent("paperChange")):(h.top(),Y=_.getChildIndex(xe.target),v.saveState(xe.target,Ae,Y)),v.dispatchEvent("change"),h.top()}}))))}}),Object.defineProperty(this,"write",{get:function(){return w},set:function(J){w&&J===!1&&(v.finishX=v.x,v.finishY=v.y),!w&&J&&(h.graphics.es(),h.graphics.ef(),v.dampX.immediate(v.x),v.dampY.immediate(v.y),v.lastX=v.lastMidX=v.x,v.lastY=v.lastMidY=v.y),w=J}}),Object.defineProperty(this,"size",{get:function(){return t},set:function(J){h.graphics.es(),h.graphics.ef(),t=J,i!="splatter"&&h.graphics.ss(e.Pick.choose(t)*v.sizeScale*v.sizeFactor,p)}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(J){r=J,h.graphics.es(),h.graphics.ef(),i!="splatter"&&h.graphics.s(e.Pick.choose(r))}}),Object.defineProperty(this,"penType",{get:function(){return i},set:function(J){i=J,h.graphics.ef().es(),i!="splatter"?h.graphics.s(e.Pick.choose(r)):h.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*v.sizeScale*v.sizeFactor,p)}}),Object.defineProperty(this,"end",{get:function(){return p},set:function(J){p=J}}),Object.defineProperty(this,"damp",{get:function(){return o},set:function(J){o=J,v.dampX.damp=o,v.dampY.damp=o}}),Object.defineProperty(this,"spread",{get:function(){return l},set:function(J){l=J}});var Re,se;this.setColorRange=function(J,xe){return n(xe)?(Re=v.color,se=J):n(J)?(Re=v.color,se=xe):(Re=J,se=xe),v};var Oe=0;Object.defineProperty(v,"colorRange",{get:function(){return Oe},set:function(J){Oe=J,!n(Re)&&!n(se)&&(v.color=e.colorRange(Re,se,J))}}),Object.defineProperty(this,"borderColor",{get:function(){return f},set:function(J){f=J}}),Object.defineProperty(this,"borderWidth",{get:function(){return d},set:function(J){d=J}}),Object.defineProperty(this,"pullColor",{get:function(){return ne},set:function(J){if(n(J||J==-1))ye(),ne=null;else if(n(ne)){ne=J;var xe=K||zdf.stage;ge(xe)}else ne=J}}),v.setPen=function(J){v.dampX.immediate(v.x),v.dampY.immediate(v.y),v.lastX=v.lastMidX=v.finishX=v.x,v.lastY=v.lastMidY=v.finishY=v.y,n(J)&&(J=i),n(G[J])&&(J="line"),v.penType=i=J;var xe=e.merge($,G[J]);for(var te in xe)v[te]!=xe[te]&&(v[te]=xe[te]);return v},v.immediate=function(J,xe){return n(J)||(v.x=J,v.dampX.immediate(v.x),v.lastX=v.lastMidX=v.finishX=v.x),n(xe)||(v.y=xe,v.dampY.immediate(v.y),v.lastY=v.lastMidY=v.finishY=v.y),v},v.clear=function(){for(var J=[],xe=0;xe<_.numChildren-1;xe++)J.push(_.getChildAt(xe));return L.push({paper:_,clear:J}),L.length>v.undoLevels&&L.shift(),v.dispatchEvent("recordUndo"),_.removeAllChildren(),h.graphics.clear(),_.addChild(h),v.dispatchEvent("change"),v.stage&&v.stage.update(),v},this.deleteSegment=function(J){J.visible=!1,v.undoLevels>0&&v.saveState(J)},this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Pen(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z)))},v.dispose=function(J,xe,te){return n(J)&&(J=!0),fe.removeEventListener("keydown",v.zimkeydownEvent),fe.removeEventListener("keyup",v.zimkeyupEvent),K&&v.nibEvent&&K.off("stagemousemove",v.nibEvent),K&&v.stageDown&&K.off("stagemousedown",v.stageDown),K&&v.stageUp&&K.off("stagemouseup",v.stageUp),K&&v.upEvent&&K.off("stagemouseup",v.upEvent),e.Ticker.remove(v.ticker),v.removeAllEventListeners(),P&&P.removeFrom(),J&&(v.shape&&v.shape.dispose(),v.paper&&v.paper.dispose(),T&&(v.bitmap&&v.bitmap.dispose(),v.bitmap=null),v.zimContainer_dispose(te),_=h=v.shape=null),!0},q!==!1&&e.styleTransforms(this,he)},e.extend(e.Pen,e.Container,["dispose","clone"],"zimContainer",!1),e.SoundWave=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",L;if(L=mt(e.SoundWave,arguments,b,this))return L;qe("69.95"),this.type="SoundWave",n(t)&&(t=120),n(r)&&(r="mic"),n(i)&&(i=120/1024),n(o)&&(o=.85),n(l)&&(l=r=="mic"?-80:(r.oscillator,-100)),n(f)&&(f=r=="mic"?-40:(r.oscillator,-10)),n(d)&&(d=function(X,Z){return X*(.5+Z*1/Math.pow(e.SoundWave.bufferLength,.95))}),n(p)&&(p=r=="mic"?0:(r.oscillator,30)),n(_)&&(_=r=="mic"?1:r.oscillator?5:10),n(P)&&(P=0),n(T)&&(T=5),e.SoundWave.bufferLength=1024;var S=t,k=this;k.baseline=p,k.magnify=_,k.reduce=P,k.input=r,k.adjust=T;var m;r.type=="Tone"||r.type=="SynthSound"?m=r.audioContext:m=new(fe.AudioContext||fe.webkitAudioContext);var A=k.analyser=m.createAnalyser();A.minDecibels=l,A.maxDecibels=f,A.smoothingTimeConstant=o,Object.defineProperty(this,"smoothing",{get:function(){return A.smoothingTimeConstant},set:function(X){A.smoothingTimeConstant=X}}),Object.defineProperty(this,"num",{get:function(){return S},set:function(X){S=X,D=Math.floor(i*e.SoundWave.bufferLength/S),D<1&&ht("ZIM SoundWave: num is too big")}}),this.setInput=function(X){if(k.input=X,X=="mic"){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(O){var ne=k.source=m.createMediaStreamSource(O);E(ne)}).catch(function(O){ht("ZIM SoundWave: Error occured: "+O)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(O){var ne=k.source=m.createMediaStreamSource(O);E(ne)},function(O){ht("ZIM SoundWave: Error occured: "+O)}):ht("ZIM SoundWave: Sorry, mic not supported");return}else if(X.type=="Tone")E(X.compressor);else if(X.type=="SynthSound")E(X.gain);else{if(X.type&&X.type=="sound"){ht("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");return}var Z,V;X.playbackResource?(Z=X.playbackResource,V=m.createMediaElementSource(Z)):(Z=X,V=m.createMediaElementSource(Z)),E(V)}},this.setInput(r);var D,C;function E(X){if(C&&C.disconnect(A),C=X,n(R)||R!==0&&R!==1)X.connect(A),r!="mic"&&A.connect(m.destination);else{var Z=new ChannelSplitterNode(m,{numberOfOutputs:2});X.connect(Z),Z.connect(A,R);var V=new ChannelMergerNode(m,{numberOfInputs:2});A.connect(V,0,R),r!="mic"&&V.connect(m.destination)}if(A.fftSize=e.SoundWave.bufferLength*2,D=Math.floor(i*e.SoundWave.bufferLength/S),D<1){ht("ZIM SoundWave: include param is too small or num param is too big");return}var O=A.frequencyBinCount,ne=new Uint8Array(O),N=300,q=0,U=0,z=Math.round(60*k.adjust*.8),ie=new e.Damp(N,.01);k.calculate=function(ae){n(ae)&&(ae=!0),A.getByteFrequencyData(ne);var he=ne.map(d);if(D==1&&!ae)return he;var $=[],G=0,v;for(v=0;v<=i*e.SoundWave.bufferLength;v++)G+=he[v],v!=0&&v%D==0&&($.push(Math.max(0,(G/D-k.baseline)*k.magnify-k.reduce)),G=0);var w=$.length;if(r!="mic"&&($[0]*=.75,$[1]*=.85,$[2]*=.9,$[w-2]*=.8,$[w-1]*=.75),$[w-1]*=1.3,$[w-2]*=1.2,$[w-3]*=1.1,ae){var h=[];z++,z>=60*k.adjust&&(N=q/z,q=0,U=0,z=0);var I=ie.convert(N);for(v=0;v<w;v++)$[v]>U&&(U=$[v]),h[v]=Math.min(1,I!=0?$[v]/I:0);return q+=U,h}return $},setTimeout(function(){k.dispatchEvent("ready")},50)}this.dispose=function(X){return X&&m&&m.close(),A&&A.disconnect(),!0}},e.extend(e.SoundWave,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Synth=function(t,r){qe("69.955"),this.type="Synth",n(t)&&(t=.3),n(r)&&(r=220),this.volume=t,this.frequency=r;var i=this,o;this.play=function(l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe){var J=Array.prototype.slice.call(arguments);if(J=J.shift(),!o&&(fe.AudioContext||fe.webkitAudioContext)&&(o=new(fe.AudioContext||fe.webkitAudioContext),o.z=o.createBufferSource,o.createBufferSource=function(we){return we==null&&(we=o.z()),we.start=we.start||function(ke){o.noteOn(ke)},we}),!!o){for(l=l!=null?dt(l):0,f=f!=null?dt(f):.3,d=d!=null?dt(d):.05,p=p!=null?dt(p):220,_=_!=null?dt(_):0,P=P!=null?dt(P):0,T=T!=null?dt(T):.1,R=R!=null?dt(R):0,b=b!=null?dt(b):1,L=L!=null?dt(L):0,S=S!=null?dt(S):0,k=k!=null?dt(k):0,m=m!=null?dt(m):0,A=A!=null?dt(A):0,D=D!=null?dt(D):0,C=C!=null?dt(C):0,E=E!=null?dt(E):0,X=X!=null?dt(X):0,O=O!=null?dt(O):0,Z=Z!=null?dt(Z):1,V=V!=null?dt(V):0,ae=ae!=null?dt(ae):44100,he==null&&(he=99+_*ae),$==null&&($=P*ae),G==null&&(G=T*ae),v==null&&(v=V*ae),w==null&&(w=X*ae),h==null&&(h=Math.PI*2),I==null&&(I=function(we){return we>0?1:-1}),Q==null&&(Q=he+v+$+G+w),x==null&&(x=L*=500*h/Math.pow(ae,2)),F==null&&(F=p*=(1+d*2*Math.random()-d)*h/ae),Ae==null&&(Ae=I(C)*h/4),Y==null&&(Y=0),K==null&&(K=0),ge==null&&(ge=0),ye==null&&(ye=0),ee==null&&(ee=0),ce==null&&(ce=0),ve==null&&(ve=1),Re==null&&(Re=[]),se==null&&(se=o.createBufferSource()),Oe==null&&(Oe=o.createBuffer(1,Q,ae)),se.connect(o.destination);ge<Math.floor(Q);Re[ge++]=ce)++ee>E*100&&(ee=0,ce=Y*p*Math.sin(K*C*h/ae-Ae),ce=R?R>1?R>2?R>3?Math.sin(Math.pow(ce%h,3)):Math.max(Math.min(Math.tan(ce),1),-1):1-(2*ce/h%2+2)%2:1-4*Math.abs(Math.round(ce/h)-ce/h):Math.sin(ce),ce=(A?1-O+O*Math.sin(h*ge/A):1)*I(ce)*Math.pow(Math.abs(ce),b)*f*i.volume*(ge<he?ge/he:ge<he+v?1-(ge-he)/v*(1-Z):ge<he+v+$?Z:ge<Q-w?(Q-ge-w)/G*Z:0),ce=w?ce/2+(w>ge?0:(ge<Q-w?1:(ge-Q)/w)*Re[ge-w|0]/2):ce),Y+=1-D+(Math.sin(ge)+1)*1e9%2*D,K+=1-D+(Math.pow(Math.sin(ge),2)+1)*1e9%2*D,p+=L+=S*500*h/Math.pow(ae,3),ve&&++ve>m*ae&&(p+=k*h/ae,F+=k*h/ae,ve=0),A&&++ye>A*ae&&(p=F,L=x,ye=1,ve=ve||1);Oe.getChannelData(0).set(Re),se.buffer=Oe;var xe=new je.EventDispatcher;xe.type="SynthSound",xe.audioContext=o,xe.gain=o.createGain(),se.connect(xe.gain),xe.gain.connect(o.destination),xe.pan=o.createStereoPanner(),xe.pan.pan.value=l,se.connect(xe.pan),xe.pan.connect(o.destination),se.start(),xe.duration=Re.length/ae,xe.playing=!0,xe.stop=function(){clearTimeout(xe.completeID),clearInterval(xe.repeatID),xe.gain.gain.setTargetAtTime(0,o.currentTime,.1),xe.playing=!1,setTimeout(function(){o.close()},.1*1e3)};var te;return xe.repeat=xe.loop=function(we,ke){te=0,we===!0&&(we=null),n(ke)&&(ke=0),clearTimeout(xe.completeID);function pe(){return xe.duration+dt(ke)}return xe.repeatID=e.interval(pe,function(){te++,we&&te>=we?(xe.dispatchEvent("complete"),xe.repeatID.clear(),xe.playing=!1):(xe.dispatchEvent("loop"),i.play.apply(i,J))}),xe},xe.play=function(){return i.play.apply(i,J),xe.playing=!0,xe},xe.completeID=setTimeout(function(){xe.dispatchEvent("complete")},(Re.length/ae+.1)*1e3),xe}},this.Tone=function(l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V){var O="volume, note, shape, pan, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",ne;if(ne=mt(i.Tone,arguments,O,this))return ne;this.type="Tone";var N=this,q;n(l)&&(l=i.volume),n(f)&&(f=i.frequency),n(d)&&(d=e.SINE),n(p)&&(p=0),n(P)&&(P=.02),n(T)&&(T=.05),n(Z)&&(Z=0),fe.AudioContext||fe.webkitAudioContext?q=this.audioContext=new(fe.AudioContext||fe.webkitAudioContext):kt&&ht("Synth tone() needs AudioContext"),l=dt(l),f=dt(f),d=dt(d),p=dt(p),_=dt(_),P=dt(P),T=dt(T),R=dt(R),b=dt(b),L=dt(L),S=dt(S),k=dt(k),m=dt(m),A=dt(A),D=dt(D),C=dt(C),E=dt(E),X=dt(X),Z=dt(Z);var U=g(_);i.duration=_,_&&(_=_*(U=="s"?1:1/1e3)),Z&&(g(Z),Z=Z*(U=="s"?1:1/1e3)),i.attack=P,i.release=T,i.rampDuration=.02,i.hush=.1;var z=this.note=this.oscillator=q.createOscillator();z.frequency.value=e.Synth.note(f),e.Synth.setShape(z,d);var ie=this.filter=q.createBiquadFilter();ie.type="bandpass",ie.frequency.value=z.frequency.value,ie.Q.value=0;var ae=this.gain=z.gain=q.createGain();ae.type="gain",ae.gain.setValueAtTime(0,q.currentTime);var he=this.compressor=q.createDynamicsCompressor();he.threshold.setValueAtTime(-50,q.currentTime),he.knee.setValueAtTime(40,q.currentTime),he.ratio.setValueAtTime(12,q.currentTime),he.attack.setValueAtTime(0,q.currentTime),he.release.setValueAtTime(.25,q.currentTime);var $=this.panNode=q.createStereoPanner();this.panNode.pan.value=p,z.connect(ie),ie.connect($),$.connect(ae),ae.connect(he),he.connect(q.destination);function G(ee,ce){n(ee)&&(ee=q.currentTime),n(ce)&&(ce=i.attack),z.start(ee);var ve=fe.zdf&&new Date().getTime()-fe.zdf.startTime<200?.1:i.attack;ae.gain.setValueAtTime(0,q.currentTime+.1),ae.gain.linearRampToValueAtTime(l*i.hush,q.currentTime+.1+ve)}G(Z),this.stop=function(ee){n(ee)&&(ee=i.release),ae&&w(ae.gain,0,!0,ee),K&&w(K.gain,0,!0,ee),F&&w(F.gain,0,!0,ee),setTimeout(function(){N.dispatchEvent("complete")},(.6+ee+i.rampDuration)*1e3),setTimeout(function(){q&&!q.iamClosed&&(q.iamClosed=!0,q.close())},(ee+1)*1e3),setTimeout(function(){h&&N.removeWah()},(ee+1)*1e3)},_&&this.stop(Z+_-.1);var v=this.notes=[z];this.addNote=function(ee,ce,ve,Re,se,Oe){n(Re)&&(Re=!0),n(se)&&(se=!1),n(ee)&&(ee=.1),n(Oe)&&(Oe=0);var J={type:"Note"};J._volume=ee,J._note=e.Synth.note(ce),v.push(J);var xe=J.oscillator=q.createOscillator();xe.frequency.value=J._note,xe.type=e.Synth.setShape(xe,ve);var te=J.gain=q.createGain();return w(te.gain,J._volume,!0),te.connect(Re?ie:ae),xe.connect(te),F&&se&&F.connect(xe.frequency),xe.start(q.currentTime+Oe),Object.defineProperty(J,"volume",{get:function(){return J._volume},set:function(we){n(we)||(J._volume=dt(we),w(J.gain.gain,J._volume,!0))}}),Object.defineProperty(J,"note",{get:function(){return J._note},set:function(we){n(we)||(J._note=dt(we),w(J.oscillator.frequency,e.Synth.note(J._note)))}}),J},this.removeNote=function(ee){var ce=v.indexOf(ee);return ce>=0&&v.splice(ce,1),ee.oscillator.disconnect(),ee=null,this};function w(ee,ce,ve,Re){n(ce)&&(ce=0),n(Re)&&(Re=i.rampDuration),ve?(ee.cancelScheduledValues(q.currentTime),ee.linearRampToValueAtTime(ee.value,q.currentTime+.02),ee.linearRampToValueAtTime(ce,q.currentTime+.05+Re)):(ee.cancelScheduledValues(q.currentTime),ee.setTargetAtTime(ce,q.currentTime,Re))}this.ramp=function(ee,ce){w(ae.gain,ee*i.hush,!0,ce)},this.rampPan=function(ee,ce){w($.pan,ee,!1,ce)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.wiggle.apply(null,arguments),this},e.addWires(this);var h,I;function Q(){n(R)&&(R=1e3),n(b)&&(b=1),n(L)&&(L="sine"),n(S)&&(S=5),n(k)?k=N.oscillator.frequency.value:k=e.Synth.note(k),n(I)&&(I=200),N.filter.Q.value=S,h=N.wah=i.oscillator(b,R/2,L,k+R/2+I),h.ticker=e.Ticker.add(function(){N.filter.frequency.value=N.wah.amplitude})}(R||b||!n(L)||!n(S))&&Q(),N.removeWah=function(){e.Ticker.remove(h.ticker),h.dispose(),h=N.wah=null,N.filter.Q.value=0};var x,F;function Ae(){n(A)&&(A=5),n(D)&&(D="sine"),n(m)&&(m=10),x=N.vibrato=q.createOscillator(),F=N.vibratoGain=q.createGain(),F.gain.value=0,x.frequency.value=A,e.Synth.setShape(x,D),x.connect(F),F.connect(z.frequency),x.start(0),F.gain.setValueAtTime(0,q.currentTime+.1),F.gain.linearRampToValueAtTime(m,q.currentTime+.1+i.attack)}(m||A||!n(D))&&Ae(),N.removeVibrato=function(){w(F.gain,0,!0),setTimeout(function(){F.disconnect(),x.disconnect(),x.stop(),x=null},(i.rampDuration+1)*1e3)};var Y,K;function ge(){n(E)&&(E=5),n(X)&&(X="sine"),Y=N.tremelo=q.createOscillator(),K=N.tremeloGain=q.createGain(),K.gain.value=0,Y.frequency.value=E,e.Synth.setShape(Y,X),Y.connect(K),K.connect(ae.gain),Y.start(0);var ee=fe.zdf&&new Date().getTime()-fe.zdf.startTime<200?.1:i.attack;K.gain.setValueAtTime(0,q.currentTime+.1),K.gain.linearRampToValueAtTime(l*i.hush,q.currentTime+.1+ee)}(C||E||!n(X))&&ge(),N.removeTremelo=function(){w(K.gain,0,!0),setTimeout(function(){K.disconnect(),Y.disconnect(),Y.stop(),Y=null},(i.rampDuration+1)*1e3)},Object.defineProperty(this,"volume",{get:function(){return l},set:function(ee){if(!n(ee)){var ce;Y?(ae.gain.value?ce=K.gain.value/ae.gain.value:ce=l?C/l:0,l=dt(ee),l=e.constrain(l,.001),w(K.gain,l*ce*i.hush,!0)):l=dt(ee),w(ae.gain,l*i.hush,!1,i.rampDuration)}}}),this.paused=!1;var ye=l;this.pause=function(ee){n(ee)&&(ee=!0),ee?(ye=N.volume,N.volume=0):N.volume=ye},V&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return r},set:function(ee){n(ee)||(r=dt(ee),w(z.frequency,ee))}}),Object.defineProperty(this,"note",{get:function(){return f},set:function(ee){n(ee)||(f=dt(ee),z.frequency.value=e.Synth.note(f))}}),Object.defineProperty(this,"shape",{get:function(){return d},set:function(ee){d=dt(ee),e.Synth.setShape(z,d)}}),Object.defineProperty(this,"pan",{get:function(){return p},set:function(ee){n(ee)||(p=dt(ee),w($.pan,p,!1,.1))}}),Object.defineProperty(this,"currentTime",{get:function(){return q.currentTime},set:function(){kt&&ht("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return R},set:function(ee){n(ee)||(R=dt(ee),R=e.constrain(R,i.wahAmountMin,i.wahAmountMax),n(h)?Q():h.gain=R/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return b},set:function(ee){n(ee)||(b=dt(ee),b=e.constrain(b,i.wahRateMin,i.wahRateMax),n(h)?Q():h.frequency=b)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return S},set:function(ee){S=dt(ee),S=e.constrain(S,i.wahThroatMin,i.wahThroatMax),n(h)?Q():ie.Q.value=S}}),Object.defineProperty(this,"wahNote",{get:function(){return k},set:function(ee){n(ee)||(k=dt(ee),n(h)?Q():h.offset=k+R/2+I)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return I},set:function(ee){n(ee)||(I=dt(ee),n(h)?Q():h.offset=k+R/2+I)}}),Object.defineProperty(this,"wahShape",{get:function(){return L},set:function(ee){L=dt(ee),n(h)?Q():h.shape=L}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return C},set:function(ee){n(ee)||(C=dt(ee),n(Y)?ge():K.gain.setValueAtTime(C,q.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return E},set:function(ee){n(ee)||(E=dt(ee),n(h)?ge():Y.frequency.value=E)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return X},set:function(ee){X=dt(ee),n(Y)?ge():e.Synth.setShape(Y,X)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return m},set:function(ee){n(ee)||(m=dt(ee),n(x)?Ae():F.gain.setValueAtTime(m,q.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return A},set:function(ee){n(ee)||(A=dt(ee),n(x)?Ae():x.frequency.value=A)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return D},set:function(ee){D=dt(ee),n(x)?Ae():e.Synth.setShape(x,D)}})},e.extend(this.Tone,je.EventDispatcher),this.tone=function(l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Tone,arguments))},this.Oscillator=function(l,f,d,p){var _="frequency, gain, shape, offset",P;if(P=mt(i.Oscillator,arguments,_,this))return P;this.type="Oscillator",n(l)&&(l=1),n(f)&&(f=10),n(d)&&(d="sine"),n(p)&&(p=0),this.frequency=dt(l),this.gain=dt(f),this.shape=dt(d),this.shape=="saw"&&(this.shape="sawtooth"),this.offset=dt(p),this.paused=!1;var T=this,R=0,b=e.Ticker.framerate;this.ticker=e.Ticker.add(function(){if(!T.paused){var L=0;T.shape=="sine"?L=Math.sin(T.frequency*(Math.PI*2*(R/b))):T.shape=="square"?(L=Math.sin(T.frequency*(Math.PI*2*(R/b))),L=L<=0?0:1):T.shape=="triangle"?L=2/Math.PI*Math.asin(Math.sin(T.frequency*Math.PI*2*R/b)):T.shape=="sawtooth"||T.shape=="saw"?L=-2/Math.PI*Math.atan(1/Math.tan(T.frequency*Math.PI*R/b)):T.shape=="zap"&&(L=2/Math.PI*Math.atan(1/Math.tan(T.frequency*Math.PI*R/b))),T.amplitude=L*T.gain+T.offset,R++}}),this.pause=function(L){T.paused=L},this.dispose=function(){e.Ticker.remove(this.ticker)}},this.oscillator=function(l,f,d,p){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Oscillator,arguments))}},e.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],e.Synth.major=["C","D","E","F","G","A","B","C4"],e.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],e.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],e.Synth.setShape=function(t,r){if(!n(t)){n(r)&&(r="sine"),r=="saw"&&(r="sawtooth");var i;if(typeof r=="number")r=e.Synth.shapes[r],r||(r="sine");else if(r.real&&r.imag)i=t.context.createPeriodicWave(new Float32Array(r.real),new Float32Array(r.imag));else if(r.constructor==PeriodicWave)i=r;else if(typeof r=="string"){var o=e.Synth.shapes.indexOf(r);if(o<0&&(r="sine"),r=="noise"){for(var l=4096,f=new Float32Array(l),d=new Float32Array(l),p=1;p<l;p+=2)d[p]=e.shuffle([0,.5,1])[0];i=t.context.createPeriodicWave(f,d)}else r=="tan"&&(r="sawtooth")}else r="sine";i?(t.setPeriodicWave(i),r="custom"):t.type=r}},e.Synth.getNote=function(t,r){return n(r)&&(r=0),t*Math.pow(2,r/12)},e.Synth.note=function(t){if(typeof t=="string"){var r=t.substr(0,1).toUpperCase(),i=e.loop(t,function(p){if(!isNaN(p))return Number(p)});i=i!==!0&&!isNaN(i)?i:3;var o=e.Synth.notes.indexOf(r);o<0&&(o=9);var l=t.match(/b/g),f=t.match(/#/g);l=l?l.length:0,f=f?f.length:0;var d=(i-3)*12+o+f-l;return e.Synth.getNote(e.Synth.getNote(220,-9),d)}else return typeof t!="number"&&(t=220),t},e.Synth.wave=function(t,r){if(fe.AudioContext||fe.webkitAudioContext){var i=new(fe.AudioContext||fe.webkitAudioContext);if(t.real)r=t.imag,t=t.real;else if(n(r)&&kt){ht("Synth.wave() - pass in asset('wave.json') or real and imag properties");return}return t.constructor!==Float32Array&&(t=new Float32Array(t)),r.constructor!==Float32Array&&(r=new Float32Array(r)),i.createPeriodicWave(t,r)}},e.Synth.drawWave=function(t,r,i,o,l,f,d,p,_){var P="shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingV",T;if(T=mt(e.Synth.drawWave,arguments,P))return T;var R=45,b=45;t=dt(t),n(i)&&(i=2),n(r)&&(r=e.darker),n(p)&&(p=8),n(_)&&(_=p);var L=p,S=_,k=new e.Container(R,b);k.mouseChildren=!1,n(o)||(k.backing=new e.Rectangle(R,b,o,l,f,d).addTo(k)),k.shape=new e.Shape(R,b).addTo(k).s(r).ss(i);var m=R-L*2;return t=="square"?k.shape.mt(L,b/2).lt(L,S+3).lt(R/2,S+3).lt(R/2,b-S-3).lt(R-L,b-S-3).lt(R-L,b/2):t=="triangle"?k.shape.mt(L,b/2).lt(L+m/4,S+3).lt(L+m*3/4,b-S-3).lt(R-L,b/2):t=="sawtooth"||t=="saw"?k.shape.mt(L,b/2).lt(R/2,S+2).lt(R/2,b-S-2).lt(R-L,b/2):t=="zap"?k.shape.mt(L,b/2).lt(R/2,b-S-2).lt(R/2,S+2).lt(R-L,b/2):k.shape.mt(L,b/2).bt(R/2,0-15,R/2,b+15,R-L,b/2),k.type=t,k},e.VR=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",L;if(L=mt(e.VR,arguments,b,this))return L;if(qe("69.98"),this.type="VR",!fe.zdf){kt&&ht("VR() - please use ZIM Frame");return}var S=fe.zdf;(n(R)||!R.getBounds||!R.getBounds().width)&&(R=S.stage),n(r)&&(r=0),n(i)&&(i=100),n(f)&&(f=.5),n(o)&&(o=0),n(l)&&(l=60),n(d)&&(d=.1),n(p)&&(p=0),n(_)&&(_=!1),n(P)&&(P=!0),n(T)&&(T=!0),this.angle=r,this.currentAngle=p,e.mobile()&&(T=!1);var k=this,m=R.width,A=R.height;k.zimContainer_constructor();var D=k.left=new e.Container(m/2,A,null,null,!1),C=new e.Rectangle(m/2,A,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1);D.addChild(C);var E=k.right=D.clone();k.addChild(D,E),E.x=m/2;var X=k.contentLeft=k.content=t,Z=k.contentRight=t.clone();if(p!=0)var V=setTimeout(O,100);else O();function O(){X.addTo(D,null,!1).setMask(D.getChildAt(0)).pos({y:(R.height-X.height)/2,reg:!0}),Z.addTo(E,null,!1).setMask(E.getChildAt(0)).pos({y:(R.height-X.height)/2,reg:!0})}var ne=[],N=[];function q(J,xe,te,we){J.vrMatch=xe,xe.vrMatch=J,J.cacheCanvas&&xe.cache(),J.dep&&!n(J.depth)&&(ne.push(J),N.push(xe),n(te)||te.push(J),n(we)||we.push(xe),xe.dep(J.depth)),e.loop(J,function(ke,pe){q(ke,xe.getChildAt(pe),te,we)})}q(X,Z);function U(J,xe){e.loop(J,function(te){te.vrChannel=xe,te.vrStartX=te.x,r!=0&&i!=0&&(te.vrAngle=r,te.vrDistance=i),o!=0&&i!=0&&(te.vrParallax=o/100,te.vrParallaxDistance=0,r!=0&&(te.vrParallaxDamp=new e.Damp(0,d))),te.dep(te.depth)})}if(U(ne,"left"),U(N,"right"),r!=0&&i!=0){var z=new e.Damp(180+p,f);z.immediate(180+p);var ie=!1,ae=!1;S.on("deviceorientation",function(J){he(z.convert((J.rotation.z>180?-180:180)+J.rotation.z+p)-180)}),e.Ticker.always()}function he(J){k.currentAngle=J;var xe=-k.currentAngle*i/r;k.contentLeft.x=xe,k.contentRight.x=xe;var te;Math.round(k.currentAngle)<=-r/2&&!ie?(te=new je.Event("boundaryout"),te.boundary="left",ie=!0,k.dispatchEvent(te)):Math.round(k.currentAngle)>=r/2&&!ae?(te=new je.Event("boundaryout"),te.boundary="right",ae=!0,k.dispatchEvent(te)):Math.round(k.currentAngle)>-r/2&&Math.round(k.currentAngle)<r/2&&(te=new je.Event("boundaryin"),ie?(te.boundary="left",k.dispatchEvent(te),ie=!1):ae&&(te.boundary="right",k.dispatchEvent(te),ae=!1))}function $(J){var xe=J.parent.localToLocal(J.vrStartX,0,R),te=J.vrParallaxDamp.convert(J.vrChannel=="left"?k.contentLeft.x+xe.x-m/4:k.contentRight.x+xe.x-m/2-m/4);J.depth<=0&&!_&&(te=0),J.vrParallaxDistance=Math.max(-i/r*l/2,Math.min(i/r*l/2,te)),J.dep(J.depth)}if(o!=0&&i!=0){var G=new e.ProportionDamp(180-l/2,180+l/2,-l/2,l/2,d);G.immediate(180),S.on("deviceorientation",function(J){var xe=0;r==0&&o!=0&&i!=0&&(xe=G.convert((J.rotation.z>180?-180:180)+J.rotation.z)),w(xe)}),e.Ticker.always()}function v(J,xe){J.vrParallaxDistance=J.depth<=0&&!_?0:xe,J.dep(J.depth)}function w(J){r!=0&&i!=0?(e.loop(ne,$),e.loop(N,$)):(e.loop(ne,function(xe){v(xe,J)}),e.loop(N,function(xe){v(xe,J)}))}T&&i!=0&&(r!=0||o!=0)&&k.added(function(){var J={swipeAngle:0};k.swiper=new e.Swiper({swipeOn:k,target:J,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),e.Ticker.add(function(){r!=0&&i!=0&&he(J.swipeAngle),o!=0&&i!=0&&w(G.convert(J.swipeAngle+180))})});var h=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,I=h,Q=!1;X.startRegX=X.regX,Z.startRegX=Z.regX;var x=this.adjuster=new e.Container(800,300,null,null,!1);C=x.backing=new e.Rectangle(x.width,x.height,e.lighter,null,null,null,null,null,null,!1).center(x).alp(1).sha("rgba(0,0,0,.2)",0,0,30),x.strip=new e.Rectangle(x.width,x.height/3,e.white,null,null,null,null,null,null,!1).center(x).alp(1),x.label=new e.Label({text:"slide to adjust center of left and right",size:28,color:e.dark,align:"center",valign:"center"}).center(x).pos({y:50,reg:!0});var F=x.close=new e.Rectangle(50,50,e.light,null,null,null,null,null,null,!1).addTo(x).mov(x.width-70,26),Ae=new e.Shape(-40,-40,80,80,null,!1);Ae.graphics.f(e.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),Ae.center(F).sca(.3),F.cur("pointer"),F.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){k.hideAdjuster(),ge.currentValue=(ge.max-ge.min)/2+I,k.dispatchEvent("closed")});var Y=new e.Circle(30,e.dark,null,null,null,null,null,null,!1).center(x).pos({x:x.width/4,reg:!0});Y.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,!1).center(Y);var K=new e.Circle(30,e.dark,null,null,null,null,null,!1).center(x).pos({x:x.width/4*3,reg:!0});K.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,null,!1).center(K);var ge=x.slider=new e.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(x).pos({y:x.height-40,reg:!0});ge.currentValue=(ge.max-ge.min)/2+h;var ye=new e.Proportion(ge.min,ge.max,Y.x-x.width/4,Y.x+x.width/4,-1),ee=new e.Proportion(ge.min,ge.max,K.x-x.width/4,K.x+x.width/4);ge.on("change",function(){Y.x=ye.convert(ge.currentValue),K.x=ee.convert(ge.currentValue)}),new e.Label("closer",24,null,e.silver).centerReg(x).pos({x:ge.x-220,y:ge.y,reg:!0}),new e.Label("farther",24,null,e.silver).centerReg(x).pos({x:ge.x+220,y:ge.y,reg:!0});var ce=k.ok=new e.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:e.blue,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(x).sca(.8).pos({x:x.width-58,y:ge.y,reg:!0});ce.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=ge.currentValue-(ge.max-ge.min)/2),se(),k.hideAdjuster(),k.dispatchEvent("saved"),k.dispatchEvent("closed")});var ve=k.zero=new e.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:e.yellow,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(x).sca(.8).pos({x:58,y:ge.y,reg:!0});ve.on((Lt?e.ACTIONEVENT=="mousedown":fe.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ge.currentValue=(ge.max-ge.min)/2,Y.x=ye.convert(ge.currentValue),K.x=ee.convert(ge.currentValue)});var Re=new e.Proportion(0,30,-R.width/4,R.width/4);function se(){var J=Re.convert(ge.currentValue);X.regX=X.startRegX+J,Z.regX=Z.startRegX-J}se(),this.showAdjuster=function(){if(Q)return k;Q=!0,Y.x=ye.convert(ge.currentValue),K.x=ee.convert(ge.currentValue),I=ge.currentValue-(ge.max-ge.min)/2,x.scaleTo(R,100,100).center(this),R.stage.update()},this.hideAdjuster=function(){if(!Q)return k;Q=!1,x.removeFrom(this),R.stage.update()},this.position=function(J,xe,te){we(J),we(J.vrMatch);function we(ke){ke.vrStartX=xe,ke.vrParallaxDamp&&ke.vrParallaxDamp.immediate(xe),ke.mov(xe,te)}return J},this.register=function(J){if(!J.parent||!J.parent.vrMatch)return kt&&ht("ZIM VR() - please only register objects already inside content container"),J;var xe=J.clone().addTo(J.parent.vrMatch),te=[],we=[];return q(J,xe,te,we),U(te,"left"),U(we,"right"),J},r!=0&&i!=0&&P&&(k.boundaryRight=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(k.boundaryRight).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(-90).center(k.boundaryRight).dep(-6),k.boundaryRight.center(t).mov(i/2+24),k.boundaryLeft=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(k.boundaryLeft).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(90).center(k.boundaryLeft).dep(-6),k.boundaryLeft.center(t).mov(-i/2-24),k.register(k.boundaryRight),k.register(k.boundaryLeft));function Oe(J){var xe=ne.indexOf(J);ne.indexOf(J)>=0&&(ne.splice(xe,1),N.splice(xe,1)),e.loop(J,function(te){Oe(te)})}this.remove=function(){return e.loop(arguments,function(J,xe){t.contains(xe)&&(Oe(xe),xe.parent.removeChild(xe),xe.vrMatch.parent.removeChild(xe.vrMatch))}),k},this.resize=function(){m=R.width,A=R.height,D.getChildAt(0).widthOnly=E.getChildAt(0).widthOnly=m/2,D.getChildAt(0).heightOnly=E.getChildAt(0).heightOnly=A,E.x=m/2,D.setBounds(0,0,m/2,A),E.setBounds(0,0,m/2,A),p!=0?(clearTimeout(V),V=setTimeout(O,100)):O(),x.scaleTo(R,100,100).center(this,null,!1)}},e.extend(e.VR,e.Container,"clone","zimContainer",!1),e.scaX=1,e.scaY=1,e.Frame=function(t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he){var $="scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",G;if(G=mt(e.Frame,arguments,$,this))return G;qe("83"),kt&&ui("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var v=this;(!fe.zdf||!fe.zdf.type)&&(fe.zimDefaultFrame=fe.zdf=fe.F=this),fe.M=e.mobile();var w=Date;this.startTime=new w().getTime(),n(D)&&(D=!0);var h=!!fe.HTMLCanvasElement;if(!h&&D){setTimeout(function(){v.dispatchEvent("failed")},100);return}var I=e.mobile();n(t)&&(t="full"),t=="outside"&&(t="fill"),n(p)||(fe.PATH=p),n(T)&&(T=!I),n(R)&&(R=!0),n(b)&&(b=!1),n(L)&&(L="center"),n(S)&&(S="center");var Q="";n(k)&&(fe.zdf!=this?(Q=e.makeID(null,5),k="myCanvas"+Q):k="myCanvas");var x=g(A);n(m)&&(m=20),n(A)&&(A=I?x=="s"?1:1e3:x=="s"?.03:30),n(C)&&(C=!1),n(V)&&(V=!1),n(O)&&(O="circles"),this.loadFailObj=O,n(ne)&&(ne=!1),n(N)&&(N=!0),this.retina=N,n(q)&&(q=!1),n(U)&&(U=!0),n(z)&&(z=!1),n(ie)&&(ie=10),n(he)&&(he=!1),he&&(R=!0);var F=ie;v.maxNum=ae,C&&(N=!1),this.retina=N;var Ae=!1,Y=!1;this.leftMouseDown=!1;function K(Le){v.leftMouseDown=Le.buttons===void 0?Le.which===1:Le.buttons===1,Ae&&!v.leftMouseDown&&v.dispatchEvent("mouseupplus"),Y&&!v.leftMouseDown&&v.dispatchEvent("mouseupplusonly"),Ae=Y=v.leftMouseDown}var ge=["fit","fill","full"],ye,ee,ce;if(z){this.shim=!0,z.stage.frame=this;var ve=this.canvas=z.canvas;this.scale=z.stage.scaleX;var Re,se;setTimeout(function(){Oe(),se=function(){Oe(),Re&&clearTimeout(Re),Re=setTimeout(Oe,50)},fe.addEventListener("resize",se)},20),ye=z.stage,ee=ye.getBounds()?ye.getBounds().width:ve.width/ye.scaleX,ce=ye.getBounds()?ye.getBounds().height:ve.height/ye.scaleY,ye.getBounds()||ye.setBounds(0,0,ee,ce),o=ve.style.backgroundColor,Ke(),Oe()}else this.scale=1,this.x=0,this.y=0;function Oe(){v.scale=z.stage.scaleX;var Le=ve.getBoundingClientRect();v.x=Le.x+e.scrollX(),v.y=Le.y+e.scrollY(),e.scaX=je.stageTransformable?1:z.stage.scaleX,e.scaY=je.stageTransformable?1:z.stage.scaleY}var J,xe,te=!1,we,ke,pe=!1,Me=!1,Ue=!1;z||(document.readyState==="interactive"||document.readyState==="complete"?setTimeout(function(){de()},200):document.addEventListener("DOMContentLoaded",de));var ue,Ee=!1,Te=t=="full"&&typeof InstallTrigger<"u";if(this.swapRotation=!1,I&&!fe.parent){var _e=isNaN(fe.innerWidth)?fe.clientWidth:fe.innerWidth,We=isNaN(fe.innerHeight)?fe.clientHeight:fe.innerHeight;this.swapRotation=(fe.orientation==0||fe.orientation==180)&&_e>We||Math.abs(fe.orientation)==90&&We>_e}fe.addEventListener("resize",Ye);var oe;function Ye(){if(z){if(ye.canvas){var Le=ee=ye.canvas.width,tt=ce=ye.canvas.height;ye.setBounds(0,0,Le,tt)}v.dispatchEvent("resize");return}oe=Date.now()+A*(x=="s"?1e3:1),Te?Ee||(Ee=!0,ue=e.Ticker.update,e.tickerFrame||(e.Ticker.update=!1,e.tickerFrame=v),gt(),ft(),clearInterval(v.frameTime),v.frameTime=setInterval(function(){if(Date.now()>oe){clearInterval(v.frameTime),Ee=!1,v==e.tickerFrame&&(e.Ticker.update=ue);return}gt(),ft()},50)):(gt(),ft(),clearInterval(v.frameTime),v.frameTime=setInterval(function(){if(Date.now()>oe){clearInterval(v.frameTime);return}gt(),ft()},A*(x=="s"?1e3:1)<50?A*(x=="s"?1e3:1)+5:50))}v.loadAssetsCount=0,n(e.assets)&&(e.assets={},e.assetIDs={});var Ve=[];Ve[0]="h",Ve[1]="c",Ve[2]="o",Ve[3]="p",Ve[4]="e";var De=!1;function de(){if(Ue)return;if(Ue=!0,ge.indexOf(t)==-1){if(we=t,n(Tn(we))){ht("Frame - scaling: HTML tag with id="+t+" must exist");return}ke=v.tag=Tn(we),v.scaling=t=n(r)||n(i)?"tag":"inline",k.indexOf("myCanvas")==0&&(k=we+"Canvas"),ke.tagName.toLowerCase()=="canvas"&&(De=!0,k=we)}else v.scaling=t;v.canvasID=k,n(r)&&(r=500),n(i)&&(i=500),ee=r,ce=i,n(l)||(v.outerColor=l),Qe(),lt(),I?(b&&setTimeout(function(){fe.scrollTo(0,0)},50),setTimeout(Le,100),A*(x=="s"?1e3:1)!=100&&setTimeout(Le,A*(x=="s"?1e3:1))):(pe=!0,Be());function Le(){gt(),pe=!0,Be(),ft(),ye&&ye.update()}if(n(d))Me=!0,Be();else{var tt;d.constructor=={}.constructor&&!(d.audioSprite||d.id||d.data||d.src)?tt=v.loadAssets(e.merge(d,{progress:_,queueOnly:!0})):tt=v.loadAssets({assets:d,path:p,progress:_,queueOnly:!0}),n(tt)||!tt.on?(kt&&ht("Frame() - load failed"),Me=!0,Be()):tt.on("complete",function(){Me=!0,Be()})}}function Be(){if(pe&&Me&&!te)if(ye.width>=1&&ye.height>=1){if(!n(_)&&_.show&&_.hide(),v==fe.zdf&&(fe.S=ye,fe.W=ye.width,fe.H=ye.height),f&&typeof f=="function"&&f(v,ye,ye.width,ye.height),!v)return;if(P&&typeof P=="function"){var Le=0;if(!v)return;v.updateID=e.Ticker.add(function(){P(++Le,v,ye,ye.width,ye.height)}),v.pauseTicker=function(tt){n(tt)&&(tt=!0),tt?e.Ticker.remove(v.updateID):e.Ticker.add(v.updateID)}}v.dispatchEvent("ready"),te=!0,ft(),ye.update()}else setTimeout(function(){gt(),Be()},50)}function Qe(){var Le;De?Le=v.canvas=v.tag:(Le=v.canvas=document.createElement("canvas"),Le.setAttribute("id",k)),Le.setAttribute("tabindex",0);var tt=e.windowWidth(),vt=e.windowHeight(),nt=fe.devicePixelRatio||1;t=="full"||t=="tag"?N?(v.scale=nt,Le.setAttribute("width",tt*v.scale),Le.setAttribute("height",vt*v.scale),t=="full"&&(Le.style.width=tt+"px",Le.style.height=vt+"px")):(Le.setAttribute("width",tt),Le.setAttribute("height",vt)):(Le.setAttribute("width",ee),Le.setAttribute("height",ce));var Tt=Tn(k+"Alternative");Tt&&Le.appendChild(Tt),De||(t=="tag"||t=="inline"?ke.appendChild(Le):document.body.appendChild(Le)),n(o)||(Le.style.backgroundColor=o),t=="full"||t=="fit"||t=="fill"?(Le.style.position="absolute",V||(document.body.style.overflow="hidden")):getComputedStyle(Le.parentElement).position=="static"&&(Le.parentElement.style.position="relative"),Le.addEventListener("pointerdown",function(xt){Le.setPointerCapture(xt.pointerId),v.dispatchEvent(xt)}),Le.addEventListener("pointerup",function(xt){Le.releasePointerCapture(xt.pointerId),v.dispatchEvent(xt)}),Le.addEventListener("pointermove",function(xt){v.dispatchEvent(xt)}),Le.addEventListener("pointerenter",function(xt){v.dispatchEvent(xt)}),Le.addEventListener("pointerleave",function(xt){v.dispatchEvent(xt)})}function Ke(){U&&(v.mouseX=0,v.mouseY=0,v.mousedownEvent=ye.on("stagemousedown",function(Le){v.mouseX=Le.stageX/e.scaX,v.mouseY=Le.stageY/e.scaY}),v.mousemoveEvent=ye.on("stagemousemove",function(Le){v.mouseX=Le.stageX/e.scaX,v.mouseY=Le.stageY/e.scaY})),fe.removeEventListener("mousedown",K,!0),fe.removeEventListener("mousemove",K,!0),fe.removeEventListener("mouseup",K),fe.addEventListener("mousedown",K,!0),fe.addEventListener("mousemove",K,!0),fe.addEventListener("mouseup",K)}function lt(){gt(),ge.indexOf(t)!=-1&&!V&&(v.zil=Ur()),v.mousedownEvent&&ye&&ye.off("stagemousedown",v.mousedownEvent),v.mousemoveEvent&&ye&&ye.off("stagemousemove",v.mousemoveEvent),ye=C?new e.StageGL(k,E):new e.Stage(k),ye.frame=v,ye.mouseMoveOutside=q,!n(o)&&C&&ye.setClearColor(e.convertColor(o)),ye.setBounds(0,0,ee,ce),ye.width=ee,ye.height=ce,N&&gt(),T&&ye.enableMouseOver(m),R&&(he?je.Touch.enable(ye,!0,V):je.Touch.enable(ye,!1,V)),V&&(ye.preventSelection=!1),X&&(ye.nextStage=X.stage),Z&&(ye.nextStage=Z),Ke(),ye.on("stagemouseup",function(){Y=!1})}function gt(){if(v){var Le=Tn(k),tt=e.windowWidth(),vt=e.windowHeight(),nt,Tt,xt,Ct;if(J=v.orientation=tt>vt?"horizontal":"vertical",J!=xe&&(xe=J,v.dispatchEvent("orientation")),I&&b&&setTimeout(function(){fe.scrollTo(0,0)},100),!!Le){if(t=="fit")v.scale=tt/vt>=ee/ce?vt/ce:tt/ee;else if(t=="fill")v.scale=tt/vt>=ee/ce?tt/ee:vt/ce;else if(t=="full"){Le.style.left=Le.style.top="0px",Le.width=ee=tt,Le.height=ce=vt,ye&&(ye.setBounds(0,0,ee,ce),N?(xt=fe.devicePixelRatio||1,Le.width=tt*xt,Le.height=vt*xt,Le.style.width=tt+"px",Le.style.height=vt+"px",v.scale=xt,ye.scaleX=ye.scaleY=v.scale):ye.scaleX=ye.scaleY=1,ye.tickOnUpdate=!1,ye.update(),ye.tickOnUpdate=!0,ye.width=ee,ye.height=ce,C&&ye.updateViewport(ee/ye.scaleX,ce/ye.scaleY),e.scaX=je.stageTransformable?1:ye.scaleX,e.scaY=je.stageTransformable?1:ye.scaleY),V||(e.scrollX(0),e.scrollY(0)),it();return}else if(t=="tag"){ee=ke.style.width==""?ke.getAttribute("width")||ke.offsetWidth:ke.style.width,ce=ke.style.height==""?ke.getAttribute("height")||ke.offsetHeight:ke.style.height,N?(Le.width=ee*v.scale,Le.height=ce*v.scale,Le.style.width=ee+"px",Le.style.height=ce+"px",ye&&(ye.scaleX=ye.scaleY=v.scale)):(ye&&(ye.scaleX=ye.scaleY=1),Le.width=ee,Le.height=ce),ye&&(ye.tickOnUpdate=!1,ye.update(),ye.tickOnUpdate=!0,ye.setBounds(0,0,ee,ce),ye.width=ee,ye.height=ce,C&&ye.updateViewport(ee/ye.scaleX,ce/ye.scaleY),e.scaX=je.stageTransformable?1:ye.scaleX,e.scaY=je.stageTransformable?1:ye.scaleY),ke.style.overflow="hidden",Le.style.left=Le.style.top="0px",Ct=Le.getBoundingClientRect(),v.x=Ct.x+e.scrollX(),v.y=Ct.y+e.scrollY(),it();return}else if(t=="inline"){if(N){if(document.styleSheets[0])try{for(var ct=document.styleSheets[0].rules||document.styleSheets[0].cssRules,Rt=0;Rt<ct.length;Rt++){var At=ct[Rt];if(At.selectorText=="#"+k){var bt=At.style.getPropertyValue("width");if(bt){var Ft=jn(Le.style.width),Yt=jn(Le.style.height);Le.style.width=bt}}}}catch(Ot){+function(){}()}var $t=fe.getComputedStyle(Le),sn=jn($t.getPropertyValue("width"));Ft&&(Le.style.height=Yt*sn/Ft+"px",$t=fe.getComputedStyle(Le));var nn=jn($t.getPropertyValue("height"));xt=fe.devicePixelRatio||1,v.scale=sn/r*xt,Le.width=ee*v.scale,Le.height=ce*v.scale,Le.style.width=sn+"px",Le.style.height=nn+"px",ye&&(ye.scaleX=ye.scaleY=v.scale)}else ye&&(ye.scaleX=ye.scaleY=1);ye&&(ye.tickOnUpdate=!1,ye.update(),ye.tickOnUpdate=!0,ye.setBounds(0,0,ee,ce),ye.width=ee,ye.height=ce,C&&ye.updateViewport(ee/ye.scaleX,ce/ye.scaleY),e.scaX=je.stageTransformable?1:ye.scaleX,e.scaY=je.stageTransformable?1:ye.scaleY),Le.style.left=Le.style.top="0px",Ct=Le.getBoundingClientRect(),v.x=Ct.x+e.scrollX(),v.y=Ct.y+e.scrollY(),it();return}Tt=ce*v.scale,nt=ee*v.scale,N?(xt=fe.devicePixelRatio||1,v.scale*=xt,Le.width=ee*v.scale,Le.height=ce*v.scale,Le.style.width=ee*v.scale/xt+"px",Le.style.height=ce*v.scale/xt+"px",ye&&(ye.scaleX=ye.scaleY=v.scale)):(ye&&(ye.scaleX=ye.scaleY=1),Le.style.width=nt+"px",Le.style.height=Tt+"px"),ye&&(ye.tickOnUpdate=!1,ye.update(),ye.tickOnUpdate=!0),L=="left"?v.x=0:L=="right"?v.x=tt-nt:v.x=(tt-nt)/2,S=="top"?v.y=0:S=="bottom"?v.y=vt-Tt:v.y=(vt-Tt)/2,Le.style.left=v.x+"px",Le.style.top=v.y+"px",V||(e.scrollX(0),e.scrollY(0)),it(),ye&&(e.scaX=je.stageTransformable?1:ye.scaleX,e.scaY=je.stageTransformable?1:ye.scaleY)}}}var He=Ve.reverse().join("");this.update=function(){gt(),v.dispatchEvent("update")};function it(){if(t=="fill"){var Le=(jn(v.canvas.style.width)-e.windowWidth())/2;L=="left"?(v.visibleLeft=0,v.visibleRight=e.windowWidth()/(e.windowWidth()+Le*2)*ee):L=="right"?(v.visibleLeft=Le*2/(e.windowWidth()+Le*2)*ee,v.visibleRight=ee):(v.visibleLeft=Le/(e.windowWidth()+Le*2)*ee,v.visibleRight=(e.windowWidth()+Le)/(e.windowWidth()+Le*2)*ee);var tt=(jn(v.canvas.style.height)-e.windowHeight())/2;S=="top"?(v.visibleTop=0,v.visibleBottom=e.windowHeight()/(e.windowHeight()+tt*2)*ce):S=="bottom"?(v.visibleTop=tt*2/(e.windowHeight()+tt*2)*ce,v.visibleBottom=ce):(v.visibleTop=tt/(e.windowHeight()+tt*2)*ce,v.visibleBottom=(e.windowHeight()+tt)/(e.windowHeight()+tt*2)*ce)}else v.visibleLeft=v.visibleTop=0,v.visibleRight=ee,v.visibleBottom=ce}function ft(){if(!(!te||!v)){v==fe.zdf&&(fe.W=v.width,fe.H=v.height),v.dispatchEvent("resize");var Le=new Date().getTime();setTimeout(function(){new Date().getTime()-Le>80&&(gt(),v==fe.zdf&&(fe.W=v.width,fe.H=v.height),setTimeout(function(){v.dispatchEvent("resize"),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ye&&(t=="full"||t=="tag")&&ye.update()},100))},100),!e.OPTIMIZE&&(Lt||!fe.OPTIMIZE)&&ye&&(t=="full"||t=="tag")&&ye.update()}}setTimeout(function(){v&&v.dispatchEvent("orientation")},250);var Se=["ttf","otf","woff2","woff","fnt"];w[He]=function(){var vt=w.now(),Le=Math.floor(vt/1e3%10),tt=(tt=vt.toString()).substring(0,tt.length-2)+(10+Le-3)%10+tt.substring(tt.length-1),vt=Math.floor(vt/1e4%10);return tt=(tt=tt.substring(0,tt.length-1)+(vt+1)%10).substring(0,tt.length-3)+(Le+vt+3)%10+tt.substring(tt.length-2),Number(tt)},this.loadAssets=function(Le,tt,vt,nt,Tt,xt,Ct,ct,Rt,At,bt,Ft){if(n(Le))return nn();if(n(Le.src)){var Yt="assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum",$t;if($t=mt(v.loadAssets,arguments,Yt))return $t}n(tt)||(fe.PATH=tt);var sn=g(Tt||null);if(!n(vt)&&vt.type=="ProgressBar"&&n(nt)&&(nt=!0),n(nt)&&(nt=!0),Array.isArray(Le)||(Le=[Le]),Le.length==0)return nn();function nn(){var Kt=new e.Queue;return Kt.isLoading=!1,Kt.loadAssetsCount=0,setTimeout(function(){Kt.dispatchEvent("complete"),v.dispatchEvent("complete")},10),Kt}n(Tt)&&(Tt=0),n(xt)&&(xt=sn=="s"?8:8e3),n(Ct)&&(Ct=!1),n(ct)&&(ct="anonymous"),n(At)&&(At=!1),n(bt)&&(bt=F),n(Ft)&&(Ft=v.maxNum);var Ot=!1,Zt=[],at,Pt,Dt,Ut,Gt,wt=/\.([^.]+)$/i,Bt=[],Ht=[],Jt=[],cn=0,jt=!0;for(Dt=0;Dt<Le.length;Dt++){if(at=Le[Dt],at.assets){var an=[];for(Le.splice(Dt,1),Array.isArray(at.assets)||(at.assets=[at.assets]),Ut=0;Ut<at.assets.length;Ut++){var en=at.assets[Ut];if(en.split){var yn=en.split("?");Pt=yn[0].match(wt)}Pt&&Se.indexOf(Pt[1])>=0?Bt.push(en):en.match&&en.match(/fonts\.googleapis\.com/i)?Ht.push(en):en.font?(en.src?en.src=at.path+en.src:en.font=at.path+en.font,Bt.push(en)):e.assetIDs[en]?an.push({id:at.path+en,src:at.path+en,path:null,loadTimeout:at.loadTimeout,maxNum:at.maxNum,noCORSonImage:at.noCORSonImage}):an.push({id:en,src:en,path:at.path,loadTimeout:at.loadTimeout,maxNum:at.maxNum,noCORSonImage:at.noCORSonImage})}for(var St=an.length-1;St>=0;St--)Le.splice(Dt,0,an[St]);if(at=an[0],at==null)continue}if(at.constructor=={}.constructor){var ut=0;for(var Mt in at)ut++;ut==1&&at.src&&!at.src.match(/fonts\.googleapis\.com/i)&&(at=at.src)}var qt;if(at.constructor=={}.constructor)if(at.audioSprite){Gt=e.copy(at),at=Gt.src,Kn(at);var Xt=[],rn;for(Ut=0;Ut<Gt.audioSprite.length;Ut++)rn=Gt.audioSprite[Ut],Xt.push({id:rn[0],startTime:Math.round(rn[1]*1e3),duration:Math.round((rn[2]-rn[1])*1e3)});delete Gt.audioSprite,Gt.data={audioSprite:Xt},Zt.push(Gt)}else if(at.data&&at.data.audioSprite)Gt=e.copy(at),at=Gt.src,Kn(at),Zt.push(Gt);else if(at.id){if(at.path){var Qt,It;if(at.path.match(/http/i))at.src=at.path+at.src;else if(at.path.match(/^\//))Qt=fe.location.href,It=Qt.match(/(.*?)([^/])\/[^/]/),Qt=It[1]+It[2],at.src=Qt+at.path+at.src;else{var Wt=fe.location.pathname;Qt=fe.location.href;var xn=Qt.split(Wt)[0]+Wt;It=xn.match(/(.*)\//),at.src=It[1]+"/"+at.path+at.src}delete at.path}if(at.noCORSonImage){var zt=new Image;Jt.push(zt),zt.src=at.src,zt.id=at.id;var ln;zt.onload=function(Kt){var on=Kt.currentTarget,tn=e.assets[on.id]=new e.Bitmap({image:on,style:!1}).expand(0);ln=new je.Event("assetload"),tn&&typeof tn!="string"&&typeof tn!="number"&&(tn.file=on.id,tn.src=on.src),ln.asset=tn,dn.dispatchEvent(ln),At||(ln=new je.Event("assetload"),ln.asset=tn,v.dispatchEvent(ln)),dn.loadAssetsCount--,dn.loadAssetsCount==0&&In()}}else{e.assetIDs[at.id]=at.src;var Fn=at.maxNum;n(Fn)&&(Fn=Ft);var Un=at.type,Rn=n(at.loadTimeout)?xt:at.loadTimeout;at=at.src,Kn(at),qt={src:at,loadTimeout:Rn*(sn=="s"?1e3:1),data:Fn,type:Un},n(Rt)||(qt.type=Rt),Zt.push(qt)}}else at.src&&at.src.match(/fonts\.googleapis\.com/i)?Ht.push(at):Bt.push(at);else{var nr=Kn(at);nr&&Se.indexOf(nr[1])>=0?(Bt.push(at),cn--):at.match(/fonts\.googleapis\.com/i)?(Ht.push(at),cn--):(qt={src:at,loadTimeout:xt*(sn=="s"?1e3:1),data:Ft},n(Rt)||(qt.type=Rt),Zt.push(qt))}if(Ot&&jt){var Zn=document.createElement("audio");Zn.setAttribute("src",(!n(tt)&&!at.match(/^http:\/\/|https:\/\//i)?tt:"")+at),document.body.appendChild(Zn),jt=!1}}function Kn(Kt){if(Pt=null,Kt.split){var on=Kt.split("?");Pt=on[0].match(wt),Pt&&je.Sound.SUPPORTED_EXTENSIONS.indexOf(Pt[1])>=0&&(Ot=!0)}return cn++,Pt}v.loadAssetsCount++,v.isLoading=!0;var dn=new e.Queue;dn.isLoading=!0,dn.loadAssetsCount=0,!n(vt)&&vt.show&&(vt.zimActiveLoader=dn,vt.show());var wn;if(Bt.length>0){var Jn=[],un,fn;for(Dt=0;Dt<Bt.length;Dt++){if(fn=Bt[Dt],fn.font&&!fn.src){fn.src=fn.font,fn.font=fn.font.split(".")[0];var kn=fn.font.split("/");fn.font=kn[kn.length-1]}typeof fn=="string"&&(fn={font:fn.split(".")[0],src:fn}),un={src:"url("+(fn.src.match(/\//i)?"":tt||"")+fn.src+")"+(fn.type?" format('"+fn.type+"')":""),family:fn.font},fn.weight&&(un.weight=fn.weight),fn.style&&(un.style=fn.style),Jn.push(un)}wn=new je.FontLoader({src:Jn},!0),wn.on("complete",Vn),wn.on("error",Vn),wn.load(),dn.loadAssetsCount++}if(Ht.length>0)for(Dt=0;Dt<Ht.length;Dt++)fn=Ht[Dt],typeof fn=="string"&&(fn={src:fn}),un={src:fn.src,type:"fontcss"},dn.loadAssetsCount++,wn=new je.FontLoader(un,!0),wn.on("complete",Vn),wn.on("error",Vn),wn.load();function Vn(){dn.loadAssetsCount--,dn.loadAssetsCount==0&&In()}if(Jt.length>0)for(Dt=0;Dt<Jt.length;Dt++)dn.loadAssetsCount++;function lr(Kt,on){dn.loadAssetsCount--;var tn=on.item,_n=e.assets[tn.id]=Kt;_n.src=tn.src,_n.file=tn.id,_n.item=tn,_n.svg=on.svg;var Mn=new je.Event("assetload");Mn.item=tn,Mn.asset=_n,_n.type="SVG",dn.dispatchEvent(Mn),At||(Mn=new je.Event("assetload"),Mn.item=tn,Mn.asset=_n,v.dispatchEvent(Mn)),dn.loadAssetsCount==0&&In()}var ur=Date.now(),Pn=new je.Event("complete");if(cn>0){dn.loadAssetsCount++;var bn=dn.preload=v.preload=new je.LoadQueue(nt,tt,ct);bt!=1&&bn.setMaxConnections(bt),Ot&&bn.installPlugin(je.Sound),bn.on("progress",function(Kt){dn.dispatchEvent(Kt),At||v.dispatchEvent(Kt)}),bn.on("error",function(Kt){dn.dispatchEvent(Kt),At||v.dispatchEvent(Kt)}),bn.on("fileload",function(Kt){if(!Kt.result||(Kt.result.nodeName=="IMG"||Kt.result.nodeName=="SVG")&&!Kt.rawResult&&nt){var on=new je.Event("error");on=new je.Event("error"),on.item=Kt.item,dn.dispatchEvent(on),on=new je.Event("error"),on.item=Kt.item,v.dispatchEvent(on)}else{var tn=Kt.item,_n=Kt.item.type,Mn=tn.id.match(wt),Cn;if(_n&&_n=="sound"){var er=[];if(tn.data&&tn.data.audioSprite)for(var On=0;On<tn.data.audioSprite.length;On++)er.push(tn.data.audioSprite[On].id);else er.push(tn.id);for(On=0;On<er.length;On++)~function(){var Hn=er[On],vr=Kt.item.src,rr=Kt.item;Cn=e.assets[Hn]={type:"sound",path:tt,id:Hn,file:Hn,src:vr,item:rr,dispose:function(){delete e.assets[Hn],Cn=null},play:function(yr,mr,$n,fr,xr,wr,_r){var Tr="volume, loop, loopCount, pan, offset, delay, interrupt",mn;if(mn=mt(e.assets[Hn].play,arguments,Tr))return mn;var An={volume:yr,loop:mr,loopCount:$n,pan:fr,offset:xr,delay:wr,interrupt:_r},ir=g(An.offset,null,30);ir=="s"&&(An.offset&&(An.offset*=1e3),An.delay&&(An.delay*=1e3)),An.loop===!0&&(An.loop=-1),An.loopCount&&(An.loop=An.loopCount,delete An.loopCount);var Yn=je.Sound.play(Hn,An);return Yn.getStage=function(){return ye},Yn.dispose=function(){Yn.destroy()},Yn}}}()}else if(_n=="image")Kt.result.width&&(Cn=e.assets[tn.id]=new e.Bitmap({image:Kt.result,width:Kt.result.width,height:Kt.result.height,style:!1}),tn.avoidCORS&&Cn.expand(0));else if(_n=="svg"){dn.loadAssetsCount++,e.svgToBitmap(Kt.result,lr,null,null,{svg:Kt.result,item:tn,type:_n,ext:Mn});return}else Cn=e.assets[tn.id]=Kt.result;Cn&&typeof Cn!="string"&&typeof Cn!="number"&&_n!="json"&&_n!="xml"&&(Cn.file=Kt.item.id,Cn.src=Kt.item.src,Cn.item=Kt.item),on=new je.Event("assetload"),on.item=tn,on.asset=Cn,dn.dispatchEvent(on),At||(on=new je.Event("assetload"),on.item=tn,on.asset=Cn,v.dispatchEvent(on))}}),v.preloadEvent=bn.on("complete",function(Kt){Pn=Kt,dn.loadAssetsCount--,dn.loadAssetsCount==0&&In()});try{bn.loadManifest(Zt)}catch(Kt){+function(){}()}}function In(){var Kt=Date.now();Tt=Math.max(0,Tt-(Kt-ur)),setTimeout(function(){v.loadAssetsCount--,v.loadAssetsCount<=0&&(v.isLoading=!1),dn.isLoading=!1,dn.dispatchEvent(Pn),!n(vt)&&vt.show&&vt.hide(),At||v.dispatchEvent(Pn)},Tt*(sn=="s"?1e3:1))}return dn},this.ac=function(Le,tt,vt){vt?(vt.commands||(vt.commands=[]),vt.commands.push([Le,tt,vt])):(tt[0].commands||(tt[0].commands=[]),tt[0].commands.push([Le,tt]))},e.asset=this.asset=function(Le,tt,vt,nt,Tt){if(!n(Le)){Le=dt(Le);var xt=e.assetIDs[Le];if(xt&&(Le=xt),e.assets[Le]&&(!e.assets[Le].type||e.assets[Le].type&&e.assets[Le].type.substr(0,2)!="AC"))return e.assets[Le];if(fe.PATH!=null&&(e.PATH=fe.PATH),Tt){var Ct;return v.loadFailObj=="circles"?Ct=v.makeCircles(14):Ct=v.loadFailObj,Ct&&(Ct.type="EmptyAsset",Ct.id=Le,Ct.play=function(){if(kt)return ht("Frame - asset("+Le+") not found"),{}}),Ct}else{var ct=new e.Container(tt,vt);e.assets[Le]=ct,tt&&vt?ct.type="ACWD":ct.type="AC";var Rt=v.loadAssets({assets:Le,path:Le.split("/").length==1?e.PATH:null,queueOnly:!0,maxNum:nt}),At=Le.split(".");return je.Sound.SUPPORTED_EXTENSIONS.indexOf(At[At.length-1])>=0&&(ct.play=function(){return ct.playParams=arguments,ct.proxy=new je.EventDispatcher,Object.defineProperty(ct.proxy,"volume",{get:function(){return ct.sound?ct.sound.volume:null},set:function(bt){ct.volume=bt,ct.sound&&(ct.sound.volume=bt)}}),Object.defineProperty(ct.proxy,"pan",{get:function(){return ct.sound?ct.sound.pan:null},set:function(bt){ct.pan=bt,ct.sound&&(ct.sound.pan=bt)}}),ct.proxy}),Rt.on("complete",function(){Le.id?Le=Le.id:Le.src&&(Le=Le.src);var bt=v.asset(Le,null,null,null,!0),Ft=Le.split("."),Yt;if(je.Sound.SUPPORTED_EXTENSIONS.indexOf(Ft[Ft.length-1])>=0)ct.play=bt.play,ct.type="Sound",ct.src=bt.src,ct.item=bt.item,ct.playParams&&(ct.sound=ct.play.apply(null,ct.playParams),ct.volume!=null&&(ct.sound.volume=ct.volume),ct.pan!=null&&(ct.sound.pan=ct.pan),ct.sound.on("complete",function(){ct.proxy.dispatchEvent("complete")}));else if(bt.type=="Bitmap"||bt.type=="Image"||bt.type=="Pic"){if(bt.type=="Bitmap"?(bt.addTo(ct),ct.bitmap=bt,ct.image=bt.image,ct.id=bt.id,ct.item=bt.item):(ct.bitmap=bt.getChildAt(0).clone(),ct.bitmap.addTo(ct),ct.image=ct.bitmap.image,ct.id=ct.bitmap.id,ct.item=ct.bitmap.item),ct.mouseChildren=!1,ct.type="Image",ct.commands)for(Yt=0;Yt<ct.commands.length;Yt++)ct.commands[Yt][2]?ct[ct.commands[Yt][0]].apply(ct,ct.commands[Yt][1]):e[ct.commands[Yt][0]].apply(ct,ct.commands[Yt][1]);ct.commands=null,ct.stage&&ct.stage.update()}else if(bt.type=="EmptyAsset"){if(bt.addTo(ct),ct.mouseChildren=!1,ct.type="EmptyAsset",ct.commands)for(Yt=0;Yt<ct.commands.length;Yt++)ct.commands[Yt][2]?ct[ct.commands[Yt][0]].apply(ct,ct.commands[Yt][1]):e[ct.commands[Yt][0]].apply(ct,ct.commands[Yt][1]);ct.commands=null,ct.stage&&ct.stage.update()}else if(bt.type=="SVG"){if(bt.addTo(ct),ct.mouseChildren=!1,ct.type="SVG",ct.bitmap=bt,ct.svg=bt.svg,ct.commands)for(Yt=0;Yt<ct.commands.length;Yt++)ct.commands[Yt][2]?ct[ct.commands[Yt][0]].apply(ct,ct.commands[Yt][1]):e[ct.commands[Yt][0]].apply(ct,ct.commands[Yt][1]);ct.commands=null,ct.stage&&ct.stage.update()}e.assets[Le]=ct,ct.dispatchEvent("assetLoad"),ct.dispatchEvent("complete")}),Rt.on("error",function(bt){var Ft=new je.Event("error");Ft.id=bt.id,Ft.item=bt.item,ct.dispatchEvent(Ft)}),ct}}},e.asset.getIDs=function(){var Le=[];for(var tt in e.assetIDs)Le.push(tt);return Le},e.image=function(Le,tt,vt,nt,Tt){return Le.match(/^htt/i)&&(Le="https://cors.zimjs.com/"+Le),e.asset(Le,tt,vt,nt,Tt)},e.zimObjectIDs={},e.object=this.object=function(Le){return e.zimObjectIDs[Le]},e.object.getNames=function(){var Le=[];for(var tt in e.zimObjectIDs)Le.push(tt);return Le},fe.zns||(fe.asset=this.asset,fe.image=e.image,fe.object=this.object),this.setDefault=function(){return fe.zimDefaultFrame=fe.zdf=fe.F=v,fe.S=ye,fe.W=ye.width,fe.H=ye.height,v},Object.defineProperty(v,"isDefault",{get:function(){return fe.zdf==v},set:function(){ht("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(v,"stage",{get:function(){return ye},set:function(){ht("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(v,"width",{get:function(){return ee},set:function(){ht("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(v,"height",{get:function(){return ce},set:function(){ht("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(Le){o=Le,n(Le)?v.canvas.style.backgroundColor="default":(v.canvas.style.backgroundColor=o,!n(o)&&C&&ye.setClearColor(e.convertColor(o)))}});var Fe;Object.defineProperty(this,"outerColor",{get:function(){return Fe},set:function(Le){Fe=Le,gr("body").css({backgroundColor:Fe})}}),Object.defineProperty(v,"allowDefault",{get:function(){return V},set:function(Le){Le?(ye.preventSelection=!1,document.body.style.overflow="visible",v.zil&&(fe.removeEventListener("keydown",v.zil[0]),fe.removeEventListener("wheel",v.zil[1]),fe.removeEventListener("DOMMouseScroll",v.zil[2]),v.zil=null)):(ye.preventSelection=!0,ye.enableDOMEvents(!0),(t=="full"||t=="fit"||t=="fill")&&(document.body.style.overflow="hidden"),n(v.zil)&&(v.zil=Ur())),V=Le,ye.__touch&&(ye.__touch.preventDefault=!V)}});var me;Object.defineProperty(v,"cursors",{get:function(){return me},set:function(Le){me=Le&&Le.constructor=={}.constructor?Le:null,me?$e(me):st()}}),v.cursorTypes=["none","auto","pointer","text","wait","crosshair","default","help","move","progress","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","context-menu","cell","vertical-text","alias","copy","no-drop","not-allowed","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","grab","grabbing","zoom-in","zoom-out"],v.cursorList=new e.Dictionary(!0);function $e(Le){e.loop(Le,function(xt,Ct){Ct.noMouse&&Ct.noMouse()}),v.pme&&st(),e.loop(v.cursorList,function(xt){!xt._cursor&&xt.cursor&&Le[xt.cursor]&&(xt._cursor=xt.cursor,v.cursorList.add(xt,xt._cursor),xt.cursor="none")}),Le.default&&(document.body.style.cursor="none"),v.pme=v.on("pointermove",function(xt){if(v.cursorObj){var Ct=v.cursorObj,ct=v.stage.getObjectUnderPoint(v.mouseX,v.mouseY,1);ct&&(ct._cursor||ct.cursor)?Tt(ct):Le.default?(Je("none"),v.cursorObj=Le.default,Le.default.addTo(v.stage)):Je(),v.cursorObj!=Ct&&Ct.removeFrom&&Ct.removeFrom(),v.cursorObj.x=v.mouseX,v.cursorObj.y=v.mouseY,v.cursorObj.top(),e.Ticker.isUpdating(v.stage)||v.stage.update()}});var tt=!1;if(v.mouseX!=0&&v.mouseY!=0){tt=!0;var vt=v.stage.getObjectUnderPoint(v.mouseX,v.mouseY,1);vt&&(vt._cursor||vt.cursor)?(qn("setting"),Tt(vt)):Le.default?(Je("none"),Le.default.x=v.mouseX,Le.default.y=v.mouseY,v.cursorObj=Le.default,v.cursorObj.mouseChildren=!1,v.cursorObj.mouseEnabled=!1,Le.default.addTo(v.stage)):Je(),v.stage.update()}function nt(xt){Je("none"),v.cursorObj=xt,v.cursorObj.x=v.mouseX,v.cursorObj.y=v.mouseY,v.cursorObj.mouseChildren=!1,v.cursorObj.mouseEnabled=!1,v.cursorObj.addTo(v.stage)}v.pee=v.on("pointerenter",function(xt){if(tt){tt=!1;return}setTimeout(function(){var Ct=v.stage.getObjectUnderPoint(v.mouseX,v.mouseY,1);Ct&&(Ct._cursor||Ct.cursor)||(Le.default?nt(Le.default):Je(),v.stage.update())},50)}),v.smo=v.stage.on("mouseover",function(xt){Tt(xt.target)});function Tt(xt){var Ct=v.cursorsExclude;if(Ct&&(Array.isArray(Ct)||(Ct=[Ct]),Ct.includes(xt))){xt.cursor=v.cursorTypes.includes(xt._cursor)?xt._cursor:"default";return}if(xt._cursor&&Le[xt._cursor]){if(Le[xt._cursor]==v.cursorObj)return;v.cursorObj&&v.cursorObj.removeFrom(),nt(Le[xt._cursor])}else if(Le.default&&(!xt.cursor||!v.cursorTypes.includes(xt.cursor))){if(Le.default==v.cursorObj)return;v.cursorObj&&v.cursorObj.removeFrom(),nt(Le.default)}else v.cursorTypes.includes(xt.cursor)||(xt.cursor="default"),v.cursorObj&&v.cursorObj.removeFrom();v.stage.update()}v.ple=v.on("pointerdown",function(xt){v.cursorObj&&e.interval(.001,function(){v.cursorObj&&v.cursorObj.top(),v.stage.update()},2,!0)}),v.pde=v.on("pointerleave",function(xt){tt=!1,v.cursorObj&&v.cursorObj.removeFrom(),v.stage.update()}),v.smu=v.stage.on("mouseout",function(xt){v.cursorObj&&v.cursorObj.removeFrom(),Le.default?nt(Le.default):Je()})}function st(){v.pme&&v.off("pointermove",v.pme),v.pee&&v.off("pointerenter",v.pee),v.ple&&v.off("pointerdown",v.ple),v.pde&&v.off("pointerleave",v.pde),v.smo&&v.stage.off("mouseover",v.smo),v.smu&&v.stage.off("mouseout",v.smu),v.pme=v.pee=v.ple=v.pde=v.smo=v.smu=null,e.loop(v.cursorList,function(Le,tt){tt!==!0&&(Le.cursor=tt),Le._cursor=null}),e.loop(v.cursorList,function(Le){v.cursorList.add(Le,!0)}),v.cursorObj&&(v.cursorObj.dispose(),v.cursorObj=null,v.stage.update()),Je()}function Je(Le){Le!="none"&&(v.cursorObj=null),v.canvas.parentElement&&(v.canvas.parentElement.style.cursor=Le||"default")}function rt(Le){v.dispatchEvent(Le)}fe.addEventListener("contextmenu",rt,!1);var Ce=new je.Event("keydown");this.eventRemove=Ce.remove;function ze(Le){Le.remove=v.eventRemove,v.altKey=Le.altKey,v.ctrlKey=Le.ctrlKey,v.metaKey=Le.metaKey,v.shiftKey=Le.shiftKey,v.dispatchEvent(Le)}fe.addEventListener("keydown",ze);function Xe(Le){v.altKey=Le.altKey,v.ctrlKey=Le.ctrlKey,v.metaKey=Le.metaKey,v.shiftKey=Le.shiftKey,Le.remove=v.eventRemove,v.dispatchEvent(Le)}fe.addEventListener("keyup",Xe);function Ze(Le){v.dispatchEvent(Le)}fe.addEventListener("wheel",Ze);function ot(Le){Le.remove=v.eventRemove,v.dispatchEvent(Le)}ne&&fe.DeviceMotionEvent&&fe.addEventListener("devicemotion",ot);function Ge(Le){Le.remove=v.eventRemove;var tt=360-Le.alpha;Math.abs(tt-et)>180-45&&Math.abs(tt-et)<180+45&&(pt=pt==0?180:0),et=tt,Le.rotation={x:Le.beta,y:Le.gamma,z:(tt+pt)%360},v.dispatchEvent(Le)}if(ne&&fe.DeviceOrientationEvent){var et=0,pt=0;fe.addEventListener("deviceorientation",Ge)}this.isFullscreen=!!document.fullscreenElement,this.htmlobc=gr("html").css("backgroundColor"),this.fullscreen=function(Le){if(n(Le)&&(Le=!0),Le){if(document.fullscreenElement)return;var tt=v.canvas.parent?v.canvas.parent:document.body;tt.requestFullscreen?tt.requestFullscreen():tt.webkitRequestFullscreen?tt.webkitRequestFullscreen():tt.mozRequestFullscreen?tt.mozRequestFullscreen():tt.msRequestFullscreen&&tt.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=Le},document.addEventListener("fullscreenchange",function(){v.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(gr("html").css("backgroundColor",v.color),v.dispatchEvent("fullscreenenter")):(gr("html").css("backgroundColor",v.htmlobc?v.htmlobc:"transparent"),v.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(Le,tt){if(t!="full"){n(Le)&&(Le=ee),n(tt)&&(tt=ce),Tn(k)&&Tn(k).parentNode.removeChild(Tn(k)),ee=Le,ce=tt;for(var vt=[],nt=0;nt<v.stage.numChildren;nt++)vt.push(v.stage.getChildAt(nt));for(Qe(),lt(),nt=0;nt<vt.length;nt++)v.stage.addChild(vt[nt])}},this.follow=function(Le,tt,vt,nt,Tt,xt,Ct,ct,Rt,At,bt,Ft,Yt,$t){var sn="obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag",nn;if(nn=mt(v.follow,arguments,sn))return nn;if(v.followObj=null,v.followTicker&&e.Ticker.remove(v.followTicker),n(Le))return;Le.dirX=Le.dirY=0,v.followObj=Le,Le.followDampX=null,Le.followDampY=null,n(tt)&&(tt=new e.Boundary(0,0,v.stage.width,v.stage.height)),v.followBoundary=tt,n(vt)&&(vt=.05),n(nt)&&(nt=vt),n(Tt)&&(Tt=0),n(xt)&&(xt=0),n(Ct)&&(Ct=0),n(ct)&&(ct=0),n(Rt)&&(Rt=.02),n(At)&&(At=Rt),n(bt)&&(bt=!0),n(Ft)&&(Ft=!0),n(Yt)&&(Yt=!1),n($t)&&($t=!1),Le.parent?Ot():Le.on("added",Ot);function Ot(){var Zt=Le.parent;v.frameBorderLock=Yt,bt&&(v.followDampX=new e.Damp(Zt.x,vt),v.offsetDampX=new e.Damp(tt.x+Tt+(tt.width-Tt-xt)/2,Rt)),Ft&&(v.followDampY=new e.Damp(Zt.y,nt),v.offsetDampY=new e.Damp(tt.y+Ct+(tt.height-Ct-ct)/2,At)),v.followTicker=e.Ticker.add(function(){var at=v.followBoundary;if(bt){var Pt=at.x+Tt+(at.width-Tt-xt)/2;v.followOffsetX=[$t?at.x+at.width-Tt:Pt,Pt,$t?at.x+Tt:Pt],v.followObj&&(Zt.x=v.followDampX.convert(v.offsetDampX.convert(v.followOffsetX[Le.motionController?Le.motionController.dirX+1:1])-Le.x))}if(Ft){var Dt=at.y+Ct+(at.height-Ct-ct)/2;v.followOffsetY=[$t?at.y+at.height-ct:Dt,Dt,$t?at.y+Ct:Dt],v.followObj&&(Zt.y=v.followDampY.convert(v.offsetDampY.convert(v.followOffsetY[Le.motionController?Le.motionController.dirY+1:1])-Le.y))}v.frameBorderLock&&(Zt.x>v.followBoundary.x&&(Zt.x=v.followBoundary.x),Zt.y>v.followBoundary.y&&(Zt.y=v.followBoundary.y),Zt.x<v.followBoundary.x+v.followBoundary.width-Zt.width&&(Zt.x=v.followBoundary.x+v.followBoundary.width-Zt.width),Zt.y<v.followBoundary.y+v.followBoundary.height-Zt.height&&(Zt.y=v.followBoundary.y+v.followBoundary.height-Zt.height))})}return Le},n(e.blurCheck)&&e.setBlurDetect(),this.keyboardMessage=function(Le,tt,At,nt,Tt){var xt="color, backgroundColor, message, response, percent",Ct;if(Ct=mt(v.keyboardMessage,arguments,xt))return Ct;n(Le)&&(Le=e.yellow),n(tt)&&(tt="black"),n(At)&&(At="PRESS SCREEN FOR KEYBOARD CONTROL"),n(nt)&&(nt="YOU HAVE KEYBOARD CONTROL"),n(Tt)&&(Tt=80);function ct(){try{return window.self!==window.top}catch(Ft){return!0}}var Rt=ct();Rt&&(v.canvas.style.pointerEvents="none");var At=new e.Label({text:At,size:40,color:Le,backgroundColor:tt,paddingV:15,paddingH:30,shiftV:1,align:CENTER}).scaleTo(v.stage,Tt).ske(10).reg(CENTER).pos(0,50,CENTER,BOTTOM);document.addEventListener("mousedown",bt),document.addEventListener("pointerdown",bt);function bt(){Rt&&(v.canvas.style.pointerEvents="auto"),document.removeEventListener("mousedown",bt),document.removeEventListener("pointerdown",bt),At&&(At.text=nt,At.animate({props:{alpha:0},wait:1,call:()=>{At.dispose(),At=null}}),v.stage.update())}return At},this.dispose=function(){v.zil&&v.zil.length&&(fe.removeEventListener("keydown",v.zil[0]),fe.removeEventListener("wheel",v.zil[1]),fe.removeEventListener("DOMMouseScroll",v.zil[2])),ve&&ve.removeAllEventListeners(),se&&fe.removeEventListener("resize",se),fe.removeEventListener("resize",Ye),fe.removeEventListener("contextmenu",rt),fe.removeEventListener("keydown",ze),fe.removeEventListener("keyup",Xe),fe.removeEventListener("wheel",Ze),fe.removeEventListener("devicemotion",ot),fe.removeEventListener("deviceorientation",Ge),fe.removeEventListener("mousedown",K,!0),fe.removeEventListener("mousemove",K,!0),fe.removeEventListener("mouseup",K),V||(document.body.style.overflow="auto"),Le(ye);function Le(tt){if(tt.dispose)tt.dispose();else{if(tt.removeAllEventListeners(),tt.numChildren)for(var vt=tt.numChildren-1;vt>=0;vt--)Le(tt.getChildAt(vt));tt.parent&&tt.parent.removeChild(tt)}tt=null}return Tn(k)&&Tn(k).parentNode.removeChild(Tn(k)),v==e.tickerFrame&&(e.tickerFrame=null),v===fe.zdf&&(fe.zdf=fe.S=fe.W=fe.H=null),ye=null,v=null,!0},this.makeCircles=function(Le,tt){n(Le)&&(Le=100);var vt=[e.orange,e.green,e.pink,e.blue,e.brown,e.dark],nt,Tt;if(tt)for(nt=new e.Container({style:!1}),nt.radius=Le,Tt=0;Tt<vt.length;Tt++)nt.addChild(new e.Circle(nt.radius/vt.length*(vt.length-Tt),vt[Tt],null,null,null,null,null,null,!1));else{nt=new e.Shape({style:!1});var xt=nt.graphics;for(nt.radius=Le,Tt=0;Tt<vt.length;Tt++)xt.f(vt[Tt]).dc(0,0,nt.radius/vt.length*(vt.length-Tt));nt.setBounds(-nt.radius,-nt.radius,nt.radius*2,nt.radius*2)}return nt},this.madeWith=function(Le,tt,vt,nt,Tt,xt,Ct){var ct="color, text, edges, box, slats, borderColor, borderWidth",Rt;if(Rt=mt(v.madeWith,arguments,ct))return Rt;n(Le)&&(Le=e.dark),n(tt)&&(tt="Made with ZIM");var At=new e.Container,bt=At.icon=v.makeIcon(vt,nt,Tt,xt,Ct).sca(.5).alp(.92).hov(1).addTo(At).tap(function(){bt.alp(.92),bt.stage.update(),or("https://zimjs.com","_blank")});return At.label=new e.Label(tt,16,null,Le).sca(.7).pos(0,-19,e.CENTER,e.BOTTOM,At),At},this.makeIcon=function(Le,tt,vt,nt,Tt){var xt="edges, box, slats, borderColor, borderWidth",Ct;if(Ct=mt(v.makeIcon,arguments,xt))return Ct;var ct=new e.Container(-20,-13,102,120).reg(-20,-13);n(Le)&&(Le=e.light),n(tt)&&(tt=e.dark),vt===!0&&(vt=[e.silver,e.silver,e.silver,e.silver,e.silver]),new e.Rectangle(ct.width,ct.height,tt,nt,Tt).loc(-20,-13,ct);var Rt=[[vt?vt[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[vt?vt[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[vt?vt[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[vt?vt[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[vt?vt[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[Le,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return e.loop(Rt,function(At){var bt=new e.Shape().addTo(ct);bt.graphics.f(At[0]).p(At[1]),bt.setTransform(At[2],At[3])}),ct.mouseChildren=!1,ct},this.makeAbstract=function(Le){n(Le)&&(Le="black");var tt=[[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],vt=new e.Rectangle(200,200);e.loop(tt,function(Tt){var xt=new e.Shape().f(Tt[2]).p(Tt[3]);xt.setTransform(Tt[0]+20,Tt[1]+27),xt.addTo(vt)},!0);var nt=new e.Container;return vt.sca(.4).addTo(nt),nt.mouseChildren=!1,nt},this.makeCat=function(Le){n(Le)&&(Le=246);var tt=[[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],vt=new e.Container(157.5,246);e.loop(tt,function(Tt){var xt=new e.Shape().f(Tt[2]).s(Tt[3]).ss(Tt[4]?Tt[4][0]:null,Tt[4]?Tt[4][1]:null,Tt[4]?Tt[4][2]:null).p(Tt[5]);xt.setTransform(Tt[0],Tt[1]),xt.addTo(vt)},!0);var nt=new e.Container;return vt.sca(Le/246).addTo(nt).mov(0,-.4),I&&nt.cache(),nt.mouseChildren=!1,nt}},e.extend(e.Frame,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},e.extend(e.Queue,je.EventDispatcher,null,"cjsEventDispatcher"),e.Pic=function(t,r,i,o,l,f,d){var p="file, width, height, noCors, style, group, inherit",_;if(_=mt(e.Pic,arguments,p,this))return _;qe("83.03"),this.group=f;var P=l===!1?{}:e.getStyle("Pic",this.group,d);if(n(t)&&(t=P.file!=null?P.file:null),n(o)&&(o=P.noCors!=null?P.noCors:!1),n(t)){kt&&ht("ZIM Pic - needs a file");return}this.zimContainer_constructor(r,i);var T=this,R=t;t=T.file=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var b=o?e.image(t):e.asset(t);T.mouseChildren=!1,b.type=="Bitmap"||b.type=="Image"?(b.type=="Bitmap"?T.bitmap=b.clone().addTo(T):T.bitmap=b.getChildAt(0).clone().addTo(T),T.id=b.id,T.image=T.bitmap.image,T.src=T.bitmap.src,T.item=T.bitmap.item,T.setBounds(null),T.type="Pic",setTimeout(function(){T.dispatchEvent("ready"),T.dispatchEvent("complete")},20)):b.on("complete",function(){if(T.bitmap=b.getChildAt(0).clone().addTo(T),T.id=b.id,T.setBounds(null),T.type="Pic",T.commands)for(var L=0;L<T.commands.length;L++)T.commands[L][2]?T[T.commands[L][0]].apply(T,T.commands[L][1]):e[T.commands[L][0]].apply(T,T.commands[L][1]);T.image=T.bitmap.image,T.src=T.bitmap.src,T.item=T.bitmap.item,T.commands=null,T.dispatchEvent("ready"),T.dispatchEvent("complete"),T.stage&&T.stage.update()}),T.keyOut=function(L,S,k){return T.type=="AC"&&fe.zdf?(fe.zdf.ac("keyOut",arguments,T),T):(T.bitmap&&T.bitmap.keyOut(L,S,k),T.stage&&T.stage.update(),T)},l!==!1&&e.styleTransforms(this,P),T.clone=function(L){return this.cloneProps(new e.Pic(L?t:R,r,i,o,l,this.group,d))}},e.extend(e.Pic,e.Container,["clone"],"zimContainer",!1),e.Aud=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",L;if(L=mt(e.Aud,arguments,b,this))return L;qe("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=T;var S=P===!1?{}:e.getStyle(this.type,this.group,R);if(n(t)&&(t=S.file!=null?S.file:null),n(t)){kt&&ht("ZIM Sound - needs a file");return}n(r)&&(r=S.volume!=null?S.volume:1),n(i)&&(i=S.loop!=null?S.loop:!1),n(o)&&(o=S.loopCount!=null?S.loopCount:null),n(l)&&(l=S.pan!=null?S.pan:0),n(f)&&(f=S.offset!=null?S.offset:0),n(d)&&(d=S.delay!=null?S.delay:0),n(p)&&(p=S.interrupt!=null?S.interrupt:"none"),n(_)&&(_=S.maxNum!=null?S.maxNum:null);var k=this;t=k.file=e.Pick.choose(t);var m=k.sound=e.asset(t,null,null,_);m.type=="AC"?m.on("complete",function(){k.src=m.src,k.item=m.item,k.dispatchEvent("ready"),k.dispatchEvent("complete")}):setTimeout(function(){k.src=m.src,k.item=m.item,k.dispatchEvent("ready"),k.dispatchEvent("complete")},20),k.volume=r,k.loop=i,k.loopCount=o,k.pan=l,k.offset=f,k.delay=d,k.interrupt=p,k.maxNum=_,k.play=function(A,D,C,E,X,Z,V){var O="volume, loop, loopCount, pan, offset, delay, interrupt",ne;return(ne=mt(k.play,arguments,O))?ne:(n(A)&&(A=k.volume),n(D)&&(D=k.loop),n(C)&&(C=k.loopCount),n(E)&&(E=k.pan),n(X)&&(X=k.offset),n(Z)&&(Z=k.delay),n(V)&&(V=k.interrupt),k.sound.play(A,D,C,E,X,Z,V))},k.dispose=function(){return k.sound&&k.sound.dispose(),k.sound=null,!0}},e.extend(e.Aud,je.EventDispatcher,null,"cjsEventDispatcher"),e.Vid=function(t,r,i,o,l,f,d,p,_,P,T,R){var b="file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",L;if(L=mt(e.Vid,arguments,b,this))return L;qe("83.07"),this.group=T;var S=P===!1?{}:e.getStyle("Vid",this.group,R);if(n(t)&&(t=S.file!=null?S.file:null),n(t)){kt&&ht("ZIM Vid - needs a file");return}n(r)&&(r=S.width!=null?S.width:null),n(i)&&(i=S.height!=null?S.height:null),n(o)&&(o="fit"),n(f)&&(f=S.loop!=null?S.loop:!1),n(l)&&(l=S.volume!=null?S.volume:1),n(d)&&(d=S.align!=null?S.align:"center"),n(p)&&(p=S.valign!=null?S.valign:"center"),n(_)&&(_=S.type!=null?S.type:"video/mp4"),this.zimContainer_constructor(r,i),r&&i?this.type="ACWD":this.type="AC";var k=this,m,A=t;t=e.Pick.choose(t),k.file=t,fe.PATH!=null&&(e.PATH=fe.PATH);var D="";t.split("/").length==1&&e.PATH&&(D=e.PATH),this.mouseChildren=!1;var C=k.source=document.createElement("video");document.body.appendChild(C),C.style.display="none",C.setAttribute("autoplay","autoplay"),C.setAttribute("playsinline","playsinline"),C.setAttribute("crossorigin","anonymous"),f&&C.setAttribute("loop","loop");var E=k.innerSource=document.createElement("source");t.split("?").length==1&&(t+="?playsinline=1"),E.setAttribute("src",D+t),E.setAttribute("type",_),C.appendChild(E),Z();var X=0;function Z(){X++>5&&k.dispatchEvent("error"),C.addEventListener("stalled",Z),C.addEventListener("error",Z),C.addEventListener("canplay",V)}function V(){k.type="Vid",C.removeEventListener("stalled",Z),C.removeEventListener("error",Z),C.removeEventListener("canplay",V),C.pause();var O=C.videoWidth,ne=C.videoHeight;if(k.setBounds(0,0,r||O,i||ne),m=k.bitmap=new e.Bitmap(C,O,ne).addTo(k),m.setBounds(0,0,O,ne),m.scaleTo(k,100,100,o).pos(0,0,d,p,k),k.commands)for(var N=0;N<k.commands.length;N++)k.commands[N][2]?k[k.commands[N][0]].apply(k,k.commands[N][1]):e[k.commands[N][0]].apply(k,k.commands[N][1]);k.commands=null,k.dispatchEvent("ready")}k.videoPaused=!0,k.play=function(){if(!m){kt&&ht("ZIM Vid - no file found");return}if(C.play(),C.volume=l,k.videoPaused=!1,!k.ticker)if(k.keyObj){var O=k.keyObj.color,ne=k.keyObj.tolerance,N=k.keyObj.replacement;k.ticker=e.Ticker.add(function(){m.keyOut(O,ne,N)})}else k.ticker=e.Ticker.add(function(){});return k},k.keyOut=function(O,ne,N){return k.ticker?(e.Ticker.remove(k.ticker),k.ticker=e.Ticker.add(function(){m.keyOut(O,ne,N)})):k.keyObj={color:O,tolerance:ne,replacement:N},k},k.pause=function(O){return n(O)&&(O=!0),k.videoPaused=O,O?(C.pause(),k.ticker&&e.Ticker.remove(k.ticker)):(k.ticker&&e.Ticker.add(k.ticker),C.play()),k},Object.defineProperty(this,"duration",{get:function(){return C.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return C.currentTime},set:function(O){C.currentTime=O}}),Object.defineProperty(this,"volume",{get:function(){return C.volume},set:function(O){l=O,C.volume=O}}),P!==!1&&e.styleTransforms(this,S),k.clone=function(O){return this.cloneProps(new e.Vid(O?t:A,r,i,o,l,f,d,p,_,P,this.group,R))},k.dispose=function(O,ne,N){this.ticker&&e.Ticker.remove(this.ticker);var q=k.stage;return k.bitmap.dispose(),m=k.bitmap=null,C.pause(),C.removeAttribute("src"),C.load(),C.remove(),C=null,N||this.zimContainer_dispose(!0),q&&q.update(),!0}},e.extend(e.Vid,e.Container,["clone","dispose"],"zimContainer",!1),e.SVG=function(t,r,i,o,l,f,d,p,_,P,T){var R="svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",b;if(b=mt(e.SVG,arguments,R,this))return b;qe("83.09"),this.group=P;var L=_===!1?{}:e.getStyle("SVG",this.group,T);if(n(t)&&(t=L.svg!=null?L.svg:null),n(t)){kt&&ht("ZIM SVG - needs a svg value");return}n(o)&&(o=L.bitmap!=null?L.bitmap:!0),n(l)&&(l=L.splitTypes!=null?L.splitTypes:!1),n(f)&&(f=L.geometric!=null?L.geometric:!0),n(d)&&(d=L.showControls!=null?L.showControls:!0),n(p)&&(p=L.interactive!=null?L.interactive:!0),this.zimContainer_constructor(r,i);var S=this;o&&(this.mouseChildren=!1);var k=t;t=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var m=e.assets[t];if(m&&(S.src=m.src,S.file=m.file,S.item=m.item,S.svg=m.svg),m&&m.type=="Bitmap")S.type="SVG",S.bitmap=m.clone(),D();else if(m&&m.type=="AC")m.on("complete",function(){S.type="SVG",S.bitmap=m.bitmap.clone(),D(n(r)&&n(i))});else if(m&&m.type=="ACWB")n(r)&&n(i)&&S.setBounds(0,0,m.width,m.height),m.on("complete",function(){S.type="SVG",S.bitmap=m.bitmap.clone(),D()});else if(m&&m.type=="SVG")S.type="SVG",m.bitmap?S.bitmap=m.bitmap.clone():S.bitmap=m.clone(),D();else if(t&&t.match(/<svg/i)&&(S.svg=t),S.svg&&S.svg.match(/<svg/i))S.type="SVG",D();else{var A=e.asset(t);A.on("complete",function(){S.type="SVG",A.bitmap&&(S.src=A.bitmap.src,S.file=A.bitmap.file,S.item=A.bitmap.item,S.svg=A.bitmap.svg,S.bitmap=A.bitmap.clone()),D(n(r)&&n(i))})}function D(E){if(o)S.bitmap?(S.svg=S.bitmap.svg,S.bitmap.addTo(S),E&&C(),setTimeout(function(){S.dispatchEvent("ready"),S.dispatchEvent("complete")},20)):e.svgToBitmap(S.svg,function(V){S.bitmap=V,S.bitmap.addTo(S),C(),S.dispatchEvent("ready"),S.dispatchEvent("complete"),S.stage&&S.stage.update()});else if(S.bitmap&&(S.svg=S.bitmap.svg),t.match(/<svg/i)||m&&m.type=="SVG"||E){var X=new e.SVGContainer(S.svg);X.loop(function(V){V&&V.addTo(S)},!0),E&&C(),setTimeout(function(){S.dispatchEvent("ready"),S.dispatchEvent("complete")},20)}else{var Z=e.asset(t);Z.on("complete",function(){var V=new e.SVGContainer(Z);V.loop(function(O){O&&O.addTo(S)},!0),C(),S.dispatchEvent("ready"),S.dispatchEvent("complete"),S.stage&&S.stage.update()})}}function C(){if(n(r)&&n(i)&&S.setBounds(null),S.type="SVG",S.commands)for(var E=0;E<S.commands.length;E++)S.commands[E][2]?S[S.commands[E][0]].apply(S,S.commands[E][1]):e[S.commands[E][0]].apply(S,S.commands[E][1]);S.commands=null}S.keyOut=function(E,X,Z){return S.type=="AC"&&fe.zdf?(fe.zdf.ac("keyOut",arguments,S),S):(S.bitmap&&S.bitmap.keyOut(E,X,Z),S.stage&&S.stage.update(),S)},_!==!1&&e.styleTransforms(this,L),S.clone=function(E){return this.cloneProps(new e.SVG(E?t:k,r,i,o,l,f,d,p,_,this.group,T))}},e.extend(e.SVG,e.Container,["clone"],"zimContainer",!1),e.SensorAsk=function(t,r,i,o,l,f,d){var p="callback, sensorType, color, backgroundColor, style, group, inherit",_;if(_=mt(e.SensorAsk,arguments,p,this))return _;qe("83.01"),this.group=f;var P=l===!1?{}:e.getStyle("SensorAsk",this.group,d);if(n(r)&&(r=P.sensorType!=null?P.sensorType:"deviceorientation"),r!="devicemotion"&&(r="deviceorientation"),this.sensorType=r,!n(t)){n(i)&&(i=P.color!=null?P.color:e.dark),n(o)&&(o=P.backgroundColor!=null?P.backgroundColor:e.lighter),this.zimPane_constructor("",o,i,200,200,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="SensorAsk";var T=this;if(Style.addGroup("sensorAsk",{width:100,color:i,rollColor:o,corner:10,backgroundColor:e.faint,rollBackgroundColor:i,borderColor:i,borderWidth:2}),T.yes=new e.Button({label:"YES",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){T.hide(!0);var b=DeviceMotionEvent;r!="devicemotion"&&(b=DeviceOrientationEvent),b.requestPermission().then(function(L){L!="denied"?t(!0):t(!1)})}),T.label=new e.Label("Use sensor?",null,null,i,null,null,null,"center").sca(.9).centerReg(this),T.no=new e.Button({label:"NO",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){T.hide(!1),t(!1)}),new e.Circle(110,e.clear,i,1).center(this).alp(.8),new e.Circle(120,e.clear,i,1).center(this).alp(.5),new e.Circle(130,e.clear,i,1).center(this).alp(.2),l!==!1&&e.styleTransforms(this,P),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")T.show();else{let b=function(L){r=="deviceorientation"?L.alpha==null||L.alpha==0&&L.beta==0&&L.gamma==0?t(!1):t(!0):!L.acceleration||L.acceleration.x==null||L.acceleration.x==0&&L.acceleration.y==0&&L.acceleration.z==0?t(!1):t(!0),R=!0,fe.removeEventListener(r,b)};var R=!1;fe.addEventListener(r,b),setTimeout(function(){R||t(!1)},100)}}},e.extend(e.SensorAsk,e.Pane,null,"zimPane",!1),e.colorsHex=["#fb4758","#f58e25","#ebcb35","#acd241","#50c4b7","#993399","#e472c4","#d1a170","#112233","#000000","#111111","#222222","#333333","#444444","#555555","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],e.colors=["red","orange","yellow","green","blue","purple","pink","brown","interstellar","black","darker","licorice","dark","charcoal","grey","gray","granite","tin","pewter","silver","fog","mist","light","moon","lighter","white","faint","clear"],pn=0;pn<e.colors.length;pn++)e[e.colors[pn]]=e.colorsHex[pn];return String.prototype.darken=function(t){return e.darken(this,t)},String.prototype.lighten=function(t){return e.lighten(this,t)},String.prototype.toColor=function(t,r){return e.toColor(this,t,r)},String.prototype.toAlpha=function(t){return e.toAlpha(this,t)},e.FIT="fit",e.FILL="fill",e.FULL="full",e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.MIDDLE="middle",e.START="start",e.END="end",e.TOP="top",e.BOTTOM="bottom",e.OVER="over",e.UNDER="under",e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.BOTH="both",e.RADIAL="radial",e.UP="up",e.DOWN="down",e.NEXT="next",e.PREV="prev",e.AUTO="auto",e.AVE="ave",e.DEFAULT="default",e.ALL="all",e.NONE="none",e.GET="get",e.POST="post",e.LOCALSTORAGE="localStorage",e.SOCKET="socket",e.TO="to",e.FROM="from",e.SINE="sine",e.SQUARE="square",e.TRIANGLE="triangle",e.SAW="saw",e.SAWTOOTH="saw",e.ZAP="zap",e.DISTILL=!1,e.distillery=[],e.distill=function(){!fe.zns&&e&&(e.DISTILL||fe.DISTILL)&&e.distillery.push("83.3","83.35");function t(r,i,o){return o.indexOf(r)===i}e.distillery.length>0?(e.distillery=e.distillery.filter(t),ht("zim.distill() - go to https://zimjs.com/distill and enter the following:"),qn(e.distillery.join(" "))):ht("must set zim.DISTILL = true;")},e.parseAudioSprite=function(t,r){if(qe("83.25"),!(n(t)||n(t.resources)||n(t.spritemap))){var i=t,o=i.resources[0],l=i.spritemap,f=[],d,p={src:o,data:{}};for(var _ in l)d=l[_],f.push({id:_,startTime:Math.round(d.start*1e3),duration:Math.round((d.end-d.start)*1e3)});return p.data.audioSprite=f,r&&ht(JSON.stringify(p)),p}},e.previewAudioSprite=function(t,r,i){if(qe("83.26"),!n(t)){if(n(r)&&(r=3),typeof i>"u"){if(n(fe.zdf))return;var i=fe.zdf}var o=i.width,l=t,f=[],d=[];if(l.constructor=={}.constructor)l.resources&&(l=e.parseAudioSprite(l)),l.audioSprite?e.loop(l.audioSprite,function(_){f.push(_[0].substr(0,r)),d.push(_[0])}):l.data&&l.data.audioSprite&&e.loop(l.data.audioSprite,function(_){f.push(_.id.substr(0,r)),d.push(_.id)});else return;var p=new e.Tabs({tabs:f,width:o,currentEnabled:!0}).addTo();return p.on("change",function(){i.asset(d[p.selectedIndex]).play()}),p}},e.svgToBitmap=function(t,r,i,o,l){if(qe("83.27"),!n(t.draggable)){var f=new DOMParser;t=t.innerHTML?f.parseFromString(t.innerHTML,"text/xml"):t;var d=t.getElementsByTagName("svg"),p=d?t.getElementsByTagName("svg")[0]:null;t=p}if(!XMLSerializer&&kt){ht("ZIM svgToBitmap() - sorry, not supported in Browser");return}var _=typeof t=="string"?t:new XMLSerializer().serializeToString(t);if(_){var P=_.split(">")[0];if(P.length>1){var T=P.split(/width/i);if(T.length==1){var R=100,b=100,L=P.split(/viewBox/i);if(L.length>1){var S=L[1].split('"')[1];if(S){var k=S.split(" ");k.length>1&&(R=k[k.length-2],b=k[k.length-1])}}_=_.replace(/svg /i,'svg  width="'+R+'" height="'+b+'" ')}}_.match(/xmlns/i)||(_=_.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var m=self.URL||self.webkitURL||self,A=new Image;A.onload=function(){var C=new e.Bitmap(A,i,o);r(C,l),m.revokeObjectURL(D)};var D=m.createObjectURL(new document.Blob([_],{type:"image/svg+xml"}));A.src=D},e.makeContent=function(t,r,i){qe("83.29");var o;if(n(i)&&(i=e.dark),typeof t=="string"||typeof t=="number")t=this.message=new e.Label(t,null,null,i);else if(t.constructor=={}.constructor){var l=t;l.buttonScale||(l.buttonScale=.5),n(l.spacingH)&&(l.spacingH=20*l.buttonScale),n(l.spacingV)&&(l.spacingV=20);var f=l.spacingH,d=l.spacingV;l.align||(l.align="center"),t=new e.Container;var p=new ai(10,d).addTo(t);if(l.header&&l.header.pos(0,d,"left","top",t),l.message)var _=new e.Label(l.message,null,null,n(l.color)?i:l.color).loc(0,t.height+(l.header?d:0),t);if(l.display&&l.display.pos(0,-l.display.height-(l.header||l.message?d:0),"left","bottom",t),l.buttons){Array.isArray(l.buttons)||(l.buttons=[l.buttons]);for(var P=l.length*100,T=new e.Container().loc(0,t.height+(l.header||l.message||l.display?d:0),t),R=0;R<l.buttons.length;R++){var b=l.buttons[R],L=b.call||function(){};b.button||(b.button=new e.Button({width:b.width,label:b.label,backgroundColor:b.backgroundColor||b.bgColor,color:b.color,rollBackgroundColor:b.rollBackgroundColor||b.rollBgColor,rollColor:b.rollColor})),b.button.call=L,b.button.sca(l.buttonScale).loc(R==0?0:T.width+f,0,T).tap(function(k){k.target.call(k.target)})}}for(o=0;o<t.numChildren;o++){var S=t.getChildAt(o);S.lastY=S.y,l.align=="center"?S.center(t).loc(null,S.lastY):l.align=="right"&&S.pos(0,null,"right")}if(r&&typeof r=="number"&&(t.width=Math.min(t.width,r-f*2-(l.scrollBar===!0?12:l.scrollBar>0?l.scrollBar:0))),new e.Container(10,d).pos(0,-p.height,"center","bottom",t).bot(),p.top(),t.config=l,t.header=l.header,t.message=_,t.text=l.message,t.display=l.display,l.buttons)for(t.buttons=[],o=0;o<T.numChildren;o++)t.buttons.push(T.getChildAt(o))}return t},e}(Ie||{});function qe(e){Ie&&(Ie.DISTILL||fe.DISTILL)&&Ie.distillery.push(e)}function Qn(e,g,a,u,c,y){if(qe("83.3"),e&&e.noDrag)return e;y!==!0&&(y=null);var B={drag:function(Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m){return gn(arguments)?(arguments[0].obj=this,Ie.drag(arguments[0])):Ie.drag(this,Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m)},noDrag:function(Pe){return Ie.noDrag(this,Pe)},mouse:function(){return Ie.mouse(this)},noMouse:function(){return Ie.noMouse(this)},effect:function(Pe,t,r,i,o){return Ie.effect(this,Pe,t,r,i,o)},noEffect:function(Pe,t){return Ie.noEffect(this,Pe,t)},updateEffects:function(Pe){return Ie.updateEffects(this,Pe)},wire:function(Pe,t,r,i,o,l,f){return gn(arguments)?(arguments[0].source=this,Ie.wire(arguments[0])):Ie.wire(this,Pe,t,r,i,o,l,f)},noWire:function(Pe,t,r){return gn(arguments)?(arguments[0].source=this,Ie.noWire(arguments[0])):Ie.noWire(this,Pe,t,r)},wired:function(Pe,t,r,i,o,l,f){return gn(arguments)?(arguments[0].target=this,Ie.wired(arguments[0])):Ie.wired(this,Pe,t,r,i,o,l,f)},noWired:function(Pe,t,r){return gn(arguments)?(arguments[0].target=this,Ie.noWired(arguments[0])):Ie.noWired(this,Pe,t,r)},bind:function(Pe,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.bind(arguments[0])):Ie.bind(this,Pe,t,r,i,o)},noBind:function(Pe,t,r,i){return gn(arguments)?(arguments[0].obj=this,Ie.noBind(arguments[0])):Ie.noBind(this,Pe,t,r,i)},dragBoundary:function(Pe){return Ie.dragBoundary(this,Pe)},dragRect:function(Pe){return Ie.dragBoundary(this,Pe)},transform:function(Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q){return gn(arguments)?(arguments[0].obj=this,Ie.transform(arguments[0])):Ie.transform(this,Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q)},setSwipe:function(Pe){return Ie.setSwipe(this,Pe)},gesture:function(Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L){return gn(arguments)?(arguments[0].obj=this,Ie.gesture(arguments[0])):Ie.gesture(this,Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L)},noGesture:function(Pe,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.noGesture(arguments[0])):Ie.noGesture(this,Pe,t,r)},gestureBoundary:function(Pe,t){return Ie.gestureBoundary(this,Pe,t)},gestureRect:function(Pe,t){return Ie.gestureBoundary(this,Pe,t)},addPhysics:function(Pe,t,r,i,o,l,f,d,p,_,P){return gn(arguments)?(arguments[0].obj=this,Ie.addPhysics(arguments[0])):Ie.addPhysics(this,Pe,t,r,i,o,l,f,d,p,_,P)},removePhysics:function(){return Ie.removePhysics(this)},hitTestPoint:function(Pe,t,r){return Ie.hitTestPoint(this,Pe,t,r)},hitTestReg:function(Pe,t){return Ie.hitTestReg(this,Pe,t)},hitTestRect:function(Pe,t,r,i){return Ie.hitTestRect(this,Pe,t,r,i)},hitTestCircle:function(Pe,t,r,i){return Ie.hitTestCircle(this,Pe,t,r,i)},hitTestCircleRect:function(Pe,t){return Ie.hitTestCircleRect(this,Pe,t)},hitTestCircles:function(Pe,t){return Ie.hitTestCircles(this,Pe,t)},hitTestBounds:function(Pe,t,r){return Ie.hitTestBounds(this,Pe,t,r)},boundsToGlobal:function(Pe,t,r,i){return Ie.boundsToGlobal(this,Pe,t,r,i)},resetBounds:function(Pe,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.resetBounds(arguments[0])):Ie.resetBounds(this,Pe,t,r,i,o)},hitTestPath:function(Pe,t,r,i,o){return Ie.hitTestPath(this,Pe,t,r,i,o)},hitTestGrid:function(Pe,t,r,i,o,l,f,d,p,_,P,T){return Ie.hitTestGrid(this,Pe,t,r,i,o,l,f,d,p,_,P,T)},animate:function(Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we){return Pe&&(Pe.props||Pe.obj)&&gn(arguments)?(arguments[0].target=this,Ie.animate(arguments[0])):Ie.animate(this,Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L,S,k,m,A,D,C,E,X,Z,V,O,ne,N,q,U,z,ie,ae,he,$,G,v,w,h,I,Q,x,F,Ae,Y,K,ge,ye,ee,ce,ve,Re,se,Oe,J,xe,te,we)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L){return gn(arguments)?(arguments[0].target=this,Ie.wiggle(arguments[0])):Ie.wiggle(this,Pe,t,r,i,o,l,f,d,p,_,P,T,R,b,L)},loop:function(Pe,t,r,i,o,l,f,d,p,_){return gn(arguments)?(arguments[0].obj=this,Ie.loop(arguments[0])):Ie.loop(this,Pe,t,r,i,o,l,f,d,p,_)},copyMatrix:function(Pe){return Ie.copyMatrix(this,Pe)},duplicate:function(Pe){return Ie.duplicate(this,Pe)},cur:function(Pe){return Ie.cur(this,Pe)},sha:function(Pe,t,r,i){return Ie.sha(this,Pe,t,r,i)},pos:function(Pe,t,r,i,o,l,f,d,p,_){return gn(arguments)?(arguments[0].obj=this,Ie.pos(arguments[0])):Ie.pos(this,Pe,t,r,i,o,l,f,d,p,_)},loc:function(Pe,t,r,i,o,l,f){return gn(arguments)?(arguments[0].obj=this,Ie.loc(arguments[0])):Ie.loc(this,Pe,t,r,i,o,l,f)},mov:function(Pe,t){return gn(arguments)?(arguments[0].obj=this,Ie.mov(arguments[0])):Ie.mov(this,Pe,t)},top:function(){return Ie.top(this)},bot:function(){return Ie.bot(this)},ord:function(Pe){return Ie.ord(this,Pe)},dep:function(Pe){return Ie.dep(this,Pe)},nam:function(Pe){return Ie.nam(this,Pe)},alp:function(Pe){return Ie.alp(this,Pe)},vis:function(Pe){return Ie.vis(this,Pe)},ble:function(Pe){return Ie.ble(this,Pe)},dye:function(Pe){return Ie.dye(this,Pe)},hov:function(Pe,t){return Ie.hov(this,Pe,t)},rot:function(Pe,t,r){return Ie.rot(this,Pe,t,r)},siz:function(Pe,t,r){return Ie.siz(this,Pe,t,r)},ske:function(Pe,t){return Ie.ske(this,Pe,t)},reg:function(Pe,t,r){return Ie.reg(this,Pe,t,r)},sca:function(Pe,t){return Ie.sca(this,Pe,t)},scaleTo:function(Pe,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.scaleTo(arguments[0])):Ie.scaleTo(this,Pe,t,r,i,o)},fit:function(Pe,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.fit(arguments[0])):Ie.fit(this,Pe,t,r,i,o)},outline:function(Pe,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.outline(arguments[0])):Ie.outline(this,Pe,t,r)},blendmodes:function(Pe){return Ie.blendmodes(this,Pe)},addTo:function(Pe,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.addTo(arguments[0])):Ie.addTo(this,Pe,t,r)},removeFrom:function(Pe){return Ie.removeFrom(this,Pe)},added:function(Pe,t,r){return Ie.added(this,Pe,t,r)},movement:function(Pe,t){return Ie.movement(this,Pe,t)},noMovement:function(){return Ie.noMovement(this)},tap:function(Pe,t,r,i,o,l,f,d,p){return gn(arguments)?(arguments[0].obj=this,Ie.tap(arguments[0])):Ie.tap(this,Pe,t,r,i,o,l,f,d,p)},noTap:function(){return Ie.noTap(this)},hold:function(Pe,t,r,i){return Ie.hold(this,Pe,t,r,i)},noHold:function(){return Ie.noHold(this)},change:function(Pe,t){return Ie.change(this,Pe,t)},noChange:function(){return Ie.noChange(this)},centerReg:function(Pe,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.centerReg(arguments[0])):Ie.centerReg(this,Pe,t,r)},center:function(Pe,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.center(arguments[0])):Ie.center(this,Pe,t,r)},place:function(Pe){return Ie.place(this,Pe)},placeReg:function(Pe){return Ie.placeReg(this,Pe)},expand:function(Pe,t,r,i){return gn(arguments)?(arguments[0].obj=this,Ie.expand(arguments[0])):Ie.expand(this,Pe,t,r,i)},setMask:function(Pe,t){return Ie.setMask(this,Pe,t)},cloneProps:function(Pe){return Pe.type=this.type,Pe.group=this.group,Pe.style=this.style,Pe.alpha=this.alpha,Pe.rotation=this.rotation,Pe.mouseEnabled=this.mouseEnabled,Pe.mouseChildren=this.mouseChildren,Pe.tickEnabled=this.tickEnabled,Pe.x=this.x,Pe.y=this.y,Pe.scaleX=this.scaleX,Pe.scaleY=this.scaleY,Pe.skewX=this.skewX,Pe.skewY=this.skewY,Pe.name&&(Pe.name=this.name),Pe.regX=this.regX*Pe.width/(this.width||1),Pe.regY=this.regY*Pe.height/(this.height||1),Pe.visible=this.visible,Pe.shadow=this.shadow,(!this.type||this.type=="Shape")&&Ie.copyMatrix(Pe,this),Pe.compositeOperation=this.compositeOperation,Pe.snapToPixel=this.snapToPixel,this.filters&&this.filters.length>0&&(Pe.filters=this.filters.slice(0),Pe.cache()),Pe.mask=this.mask,Pe.hitArea=this.hitArea,(!this.type||this.type=="Shape"||this.type=="Blob"||this.type=="Squiggle")&&this._bounds&&Pe.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),Pe},cloneChildren:function(Pe,t){Pe.children.length&&Pe.removeAllChildren();for(var r=Pe.children,i=0,o=this.children.length;i<o;i++){var l=this.children[i].clone(t);l.parent=Pe,r.push(l)}return Pe}};if(!n(y)){y=[];for(var j in B)y.push(j);return y}for(var le in B)Object.prototype.hasOwnProperty.call(B,le)&&(e[le]=B[le]);if(Ie&&(e.cjsLocalToGlobal=e.localToGlobal,e.cjsGlobalToLocal=e.globalToLocal,e.cjsLocalToLocal=e.localToLocal,e.localToGlobal=function(Pe,t){return Ie.localToGlobal(Pe,t,e,e.cjsLocalToGlobal)},e.globalToLocal=function(Pe,t){return Ie.globalToLocal(Pe,t,e,e.cjsGlobalToLocal)},e.localToLocal=function(Pe,t,r){return Ie.localToLocal(Pe,t,r,e)},e.hueBatch||Ie.displayBase(e)),!n(g)&&!n(a)&&!n(u)&&!n(c)?g=g:!n(g)&&!n(a)&&(u=g,c=a,g=0,a=0),!n(g)&&!n(a)&&!n(u)&&!n(c))e.setBounds(g,a,u,c);else if(e.nominalBounds!=null&&e.getBounds&&e.getBounds()==null){var be=e.nominalBounds;e.setBounds(be.x,be.y,be.width,be.height)}return e.parent&&e.parent.actionFrames&&!e.parent.addPhysics&&Qn(e.parent,zdf?zdf.width:null,zdf?zdf.height:null),e}var Bi;function Ni(e){qe("83.35"),document.Window=Window,document.Blob=Blob,Bi="ignore",n(e)&&(e=[]),Array.isArray(e)||(e=[e]);var g=Qn(null,null,null,null,null,!0),a=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var u in Ie)(g.indexOf(u)==-1||a.indexOf(u)>=0)&&e.indexOf(u)==-1&&(window[u]=Ie[u])}Ie.fastFrame=function(e,g){if(qe("83.355"),je=e,n(fe.zdf))return g.frame=new Ie.Frame({shim:{stage:g,canvas:g.canvas}}),fe.zimDefaultFrame=fe.zdf=g.frame,Ie.scaX=je.stageTransformable?1:g.scaleX,Ie.scaY=je.stageTransformable?1:g.scaleY,g.frame};Ie.addWires=function(e){return qe("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),Ie.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),Ie.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),Ie.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),Ie.noWired.apply(null,arguments),e},e};Ie.setBlurDetect=function(){qe("83.36"),Ie.blurCheck=!0,Ie.pauseAnimateOnBlur=!0,Ie.pauseOnBlur=[],Ie.blurDetect=function(){var e,g,a={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in a)if(e in document){g=a[e];break}return function(u){return u&&document.addEventListener(g,u),!document[e]}}(),Ie.blurDetect(function(){var e,g,a;if(Ie.blurDetect())setTimeout(function(){if(Ie.pauseOnBlur)for(e=0;e<Ie.pauseOnBlur.length;e++)g=Ie.pauseOnBlur[e],g.pauseOnBlurPaused||g.pause(!1);if(Ie.pauseAnimateOnBlur&&Ie.animatedObjects){var u=[],c;for(e=0;e<Ie.animatedObjects.objects.length;e++){g=Ie.animatedObjects.objects[e];var y=Ie.copy(g.tweenStates);if(!g.tweenStates)g.pauseAnimate(!1);else if(n(y.all)||y.all){if(g.pauseAnimate(!1),!g.dynamicAnimation)for(a in y)a!="all"&&y[a]===!1&&g.pauseAnimate(!0,a)}else{g.pauseAnimate(!0);for(a in y)a!="all"&&y[a]&&g.pauseAnimate(!1,a)}g.type=="Sprite"&&(g.paused=!0),g.parent&&g.parent.type=="Particles"&&g.parent.emitter&&g.parent.emitter.focusWarm&&(c=g.parent.emitter,u.indexOf(g.parent.emitter)<0&&u.push(g.parent.emitter))}if(u.length>0)for(e=0;e<u.length;e++)u[e].doWarm(u[e].focusWarm)}},300),fe.zdf&&fe.zdf.dispatchEvent("tabfocus");else{if(Ie.pauseOnBlur)for(e=0;e<Ie.pauseOnBlur.length;e++)g=Ie.pauseOnBlur[e],g.pauseOnBlurPaused=g.paused,g.pause(!0);Ie.pauseAnimateOnBlur&&Ie.animatedObjects&&Ie.pauseAnimate(!0,"pauseOnBlur"),fe.zdf&&fe.zdf.dispatchEvent("tabblur")}})};var hi=!1;Ie=function(e){e.ZIMON={stringify:function(a,u){if(qe("83.39"),n(a))return;if(!hi){kt&&ht("ZIMON - set ZIMONON=true before using ZIMON.stringify()");return}return a=e.copy(a),c(a),JSON.stringify({obj:a,key:u,zimon:1,info:"https://zimjs.com/zimon/"});function c(y,B,j){if(!n(y))if(Array.isArray(y))e.loop(y,function(be,Pe){c(be,y,Pe)});else if(y.constructor=={}.constructor)e.loop(y,function(be,Pe){c(Pe,y,be)});else if(y.type){var le={zimon:y.type};y.arguments&&(le.args=Array.prototype.slice.call(y.arguments),c(le.args)),y.type=="series"&&(le.args=Array.prototype.slice.call(y.array),c(le.args)),u&&u[y.type]&&u[y.type].props&&(le.props=[],e.loop(u[y.type].props,function(be){le.props.push(y[be])})),B?B[j]=le:a=le}else typeof y!="string"&&typeof y!="number"&&typeof y!="boolean"&&y!==null&&kt&&ht("ZIMON - potentially bad JSON value"+y)}},parse:function(a,u){if(qe("83.39"),n(a))return;var c=JSON.parse(a),y=c.obj;return u=c.key,j(y),y;function B(le){try{return Function("return("+le+")")()}catch(be){return kt&&ht("ZIMON - bad function scope or name: "+le),null}}function j(le,be,Pe){if(!n(le)){if(Array.isArray(le))e.loop(le,function(f,d){j(f,le,d)});else if(n(le.zimon)&&le.constructor=={}.constructor)e.loop(le,function(f,d){j(d,le,f)});else if(le.zimon){var t=le.zimon,r="";u&&(u[t]&&u[t].scope?r=u[t].scope+".":u.scope&&(r=u.scope+"."));var i=B(r+t),o=le.args;n(o)&&(o=[]),j(o);var l;le.type=="series"?l=e.series(o):l=i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(o)))):null,be?be[Pe]=l:y=l,u&&u[t]&&u[t].props&&l&&e.loop(u[t].props,function(f,d){n(le.props[d])||(l[f]=le.props[d])})}}}}},e.Wonder=function(a,u,c,y,B){var j="wid, client, app, notes, server",le;if(le=mt(e.Wonder,arguments,j,this))return le;if(qe("82"),n(a)){ht("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");return}n(B)&&(B="https://wonder.zimjs.org/wonder");var be=this;n(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var Pe=[],t=setInterval(i,1e3),r=0;function i(){Pe.length>0&&(e.async(B+"?wonder="+JSON.stringify(Pe)),Pe=[],r++)}var o,l=setInterval(function(){r>28&&(Pe.push({id:a,c:u,a:c,n:y,k:o,t:"e",v:"frequency max - terminated",s:e.wonderSession}),ht("zim.Wonder() - frequency max - terminated"),be.dispose()),r=0},30*1e3);this.countsOff={},this.timesOff={},this.ordersOff={};function f(_,P){return n(_)?(ht("zim.Wonder "+P+" - please provide a keyword"),!1):!be[P+"sOff"][_]}this.count=function(_){f(_,"count")&&(o=_,Pe.push({id:a,c:u,a:c,n:y,k:_,t:"c",v:1,s:e.wonderSession}))};var d={};this.timeStart=function(_){f(_,"time")&&(be.timeEnd(_),o=_,d[_]=new Date().getTime())};var p={};this.timePause=function(_){f(_,"time")&&(p[_]||(p[_]=new Date().getTime()))},this.timeUnpause=function(_){if(f(_,"time")&&p[_]){var P=new Date().getTime()-p[_];d[_]&&(d[_]+=P),delete p[_]}},this.timeEnd=function(_){if(f(_,"time")&&d[_]){var P=p[_]?p[_]:new Date().getTime(),T=Math.round((P-d[_])/1e3);delete p[_],delete d[_],Pe.push({id:a,c:u,a:c,n:y,k:_,t:"t",v:T,s:e.wonderSession})}},this.order=function(_,P){if(f(_,"order")){if(o=_,n(P)){ht("zim.Wonder order() - please provide an item");return}Pe.push({id:a,c:u,a:c,n:y,k:_,t:"o",v:P,s:e.wonderSession})}},this.countOff=function(_){be.countsOff[_]=1},this.countOn=function(_){delete be.countOff[_]},this.timeOff=function(_){be.timesOff[_]=1},this.timeOn=function(_){delete be.timesOff[_]},this.orderOff=function(_){be.ordersOff[_]=1},this.orderOn=function(_){delete be.ordersOff[_]},this.dispose=function(){return i(),clearInterval(t),clearInterval(l),!0}},e.VERSION="015/zim",e.getLatestVersions=function(a){qe("82.2");var u="https://zimjs.com/live/getLatestVersions.php";function c(y){a(JSON.parse(y))}e.async(u,c,"returnLatestVersions")},typeof je<"u"&&(e.PWA=function(a,u,c,y,B,j,le){var be="call, label, backgroundColor, color, backdropColor, pane, noScale",Pe;if(Pe=mt(e.PWA,arguments,be,this))return Pe;qe("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var t,r=this,i=fe.M=="ios"?"In Safari, please add to\nhome screen as an app":"Please add to\nhome screen as an app";if(n(u)&&(u=new e.Label({text:i,align:e.LEFT,lineHeight:44,color:y})),n(c)&&(c=e.yellow),n(j)){j=new e.Pane({width:1200,height:230,content:u,backgroundColor:c,backdropColor:B});var o=new e.Container;new e.Shape().s(e.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.7).addTo(o),new e.Shape().s(e.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.7).addTo(o).mov(0,-38);var l=new e.Tile([o,u],2,1,40,0,!0);l.width>zdf.stage.width*.7&&(l.width=zdf.stage.width*.7),l.setBounds(-70,-10,480,100),o.mov(-30,35),l.center(j)}M&&!(fe.matchMedia("(display-mode: standalone)").matches||fe.navigator.standalone||document.referrer.includes("android-app://"))?f():(a&&a.constructor===Function&&a(),setTimeout(function(){r.dispatchEvent("ready")},20));function f(){r.pane=t=j.show(),t.on("close",function(){a&&a.constructor===Function&&a(),r.scaleEvent&&d.off("resize",r.scaleEvent),r.dispatchEvent("ready"),fe.zdf.stage.update()});var d=d||fe.zdf;d&&!le&&(t.scaleTo(d.stage,105).center(),(d.scaling=="full"||d.scaling=="tag")&&(r.scaleEvent=d.on("resize",function(){t.scaleTo(d.stage,105).center()})),d.stage.update())}this.show=function(){return f(),this}},e.extend(e.PWA,je.EventDispatcher,null,"cjsEventDispatcher",!1)),e.QR=function(a,u,c,y,B,j){var le="url, color, backgroundColor, size, clickable, correctLevel",be;if(be=mt(e.QR,arguments,le,this))return be;qe("82.5"),n(a)&&(a="https://zimjs.com"),n(y)&&(y=256),n(u)&&(u=e.black),n(c)&&(c=e.white),n(B)&&(B=!0),n(j)&&(j=2);var Pe=document.createElement("div");if(typeof QRCode>"u"){ht("ZIM QR - needs qrcode.js library - see docs");return}var t=new QRCode(Pe,{text:a,width:y,height:y,colorDark:u,colorLight:c,correctLevel:j});this.zimBitmap_constructor(t._oDrawing._oContext.canvas),B&&this.cur().on("click",function(){or(a,"_blank")}),Pe=null},e.extend(e.QR,e.Bitmap,null,"zimBitmap",!1),e.GIF=function(a,u,c,y){var B="file, width, height, startPaused",j;if(j=mt(e.GIF,arguments,B,this))return j;if(qe("82.7"),typeof gifler>"u"){ht("ZIM GIF - needs gifler.js library - see docs");return}n(u)&&(u=100),n(c)&&(c=100);var le=this;le.paused=!1,this.zimBitmap_constructor(null,u,c),this.cache();var be,Pe,t;if(fe.PATH!=null&&(e.PATH=fe.PATH),a.match(/http/)||a.match(/^\//)?t=a:t=(e.PATH?e.PATH:"")+a,le.gifler=gifler(t).animate(this.cacheCanvas).then(function(l){le.animator=l,y&&(be=setInterval(function(){le.animator.running()&&(Pe=setTimeout(function(){le.animator.stop(),le.paused=!0},.1),clearInterval(be))},.05))}),!le.ticker)if(le.keyObj){var r=le.keyObj.color,i=le.keyObj.tolerance,o=le.keyObj.replacement;le.ticker=e.Ticker.add(function(){le.keyOut(r,i,o)})}else le.ticker=e.Ticker.add(function(){});le.keyOut=function(l,f,d){return le.ticker?(e.Ticker.remove(le.ticker),le.ticker=e.Ticker.add(function(){le.keyOut(l,f,d)})):le.keyObj={color:l,tolerance:f,replacement:d},le},this.pause=function(l){return n(l)&&(l=!0),le.animator&&(be&&clearInterval(be),Pe&&clearTimeout(Pe),l&&le.animator.running()?(le.animator.stop(),e.Ticker.remove(le.ticker)):!l&&!le.animator.running()&&(le.animator.start(),e.Ticker.add(le.ticker))),le.paused=l,le},this.stop=function(){le.dispose()},this.reset=function(){return le.animator.reset(),le.paused&&(le.animator.start(),e.Ticker.add(le.ticker)),le},this.clone=function(){return this.cloneProps(new e.GIF(a,u,c,y))},this.dispose=function(){le.animator.stop(),le.parent&&le.removeFrom(),e.Ticker.remove(le.ticker),e.gD(this)}},e.extend(e.GIF,e.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),e.Theme={set:function(a,u,c,y,B){var j="name, lightenRatio, tint, tintRatio, exclude",le;if(le=mt(e.Theme.set,arguments,j))return le;qe("82.8"),n(a)&&(a="zim");var be=a.toLowerCase();n(u)&&(u=0),c==-1&&(c=null),n(y)&&(y=0),B==-1&&(B=null),!n(B)&&!Array.isArray(B)&&(B=[B]),e.THEME=window.THEME={name:be,lightenRatio:u,tint:c,tintRatio:y,exclude:B};var Pe={},t,r=e.colors.slice(0,8),i=e.colors.slice(8,25);be=="zim"?e.loop(e.colors,function(o,l){o=="clear"||o=="faint"||(Pe[o]=e.colorsHex[l])}):be=="html"?(e.loop(r,function(o){Pe[o]=o}),e.loop(i,function(o,l){Pe[o]=e.colorsHex[l+8]})):be=="future"?(t=["f25019","fd8918","ffc955","1dcfae","00a5ab","007175","00969b","d6b361"],e.loop(r,function(o,l){Pe[o]="#"+t[l]}),e.loop(i,function(o,l){Pe[o]=e.colorsHex[l+8].toColor("#1dcfae",.4-l*.025)})):be=="invert"?(Pe={},e.loop(e.colorsHex,function(o,l,f){if(l==f-2)return 1;Pe[e.colors[l]]=e.invertColor(o)})):be=="greyscale"?(t=["222222","aaaaaa","dddddd","888888","333333","111111","777777","bbbbbb"],e.loop(r,function(o,l){Pe[o]="#"+t[l]})):be=="neon"?(t=["FF3624","ff6f00","e2f705","a3f307","05f9e2","ED0AF5","ff33c9","e16d00"],e.loop(r,function(o,l){Pe[o]="#"+t[l]}),e.loop(i,function(o,l){Pe[o]=e.colorsHex[l+8].toColor("#000",.9)}),Pe.light=e.lighter,Pe.moon=e.lighter,Pe.lighter=e.white,Pe.white=e.white):be=="seventies"?(t=["e5771e","f4a127","ffecb4","6F8212","75c8ae","5a3d2b","956e4e","4c3607"],e.loop(r,function(o,l){Pe[o]="#"+t[l]}),e.loop(i,function(o,l){Pe[o]=e.colorsHex[l+8].toColor(l<8?"#344f00":"#f4a127",.8-l*.04)})):be=="warm"?(t=["965746","c07768","ffecb4","8da279","6da0b1","745c58","9a7e79","be8858"],e.loop(r,function(o,l){Pe[o]="#"+t[l]}),e.loop(i,function(o,l){Pe[o]=e.colorsHex[l+8].toColor(l<8?"#4e352e":"#745c58",.8-l*.05)})):be.constructor=={}.constructor&&(Pe=be,e.loop(Pe,function(o){e.colors.indexOf(o)==-1&&delete Pe[o]})),e.loop(B,function(o){o.toLowerCase()=="colors"?e.loop(e.colors,function(l,f){if(f>=8)return 1;B.push(l)}):(o.toLowerCase()=="greys"||o.toLowerCase()=="grays")&&e.loop(e.colors,function(l,f){f<8||B.push(l)})}),e.loop(Pe,function(o,l){B&&B.indexOf(o)!=-1||(c&&(l=l.toColor(c,y)),u!=0&&(l=l.lighten(u)),Lt||(window[o]=l),e[o]=l)})},apply:function(a,u,c,y,B){var j="name, lightenRatio, tint, tintRatio, exclude",le;if(le=mt(e.Theme.apply,arguments,j))return le;try{if(localStorage){n(a)&&(a="zim");var be=a.toLowerCase();n(u)&&(u=0),n(c)&&(c=-1),n(y)&&(y=0),n(B)?B=-1:Array.isArray(B)||(B=[B]),localStorage.setItem(g,JSON.stringify({name:be,lightenRatio:u,tint:c,tintRatio:y,exclude:B})),window.location.reload()}else ht("ZIM applyTheme() - needs localStorage")}catch(Pe){ht("ZIM applyTheme() - needs localStorage")}},clear:function(){try{localStorage&&localStorage.getItem(g)&&localStorage.removeItem(g),window.location.reload()}catch(a){}}};var g=window.location.href.replace(/[.\/:]/g,"");try{localStorage&&localStorage.getItem(g)?(e.THEME=window.THEME=JSON.parse(localStorage.getItem(g)),e.Theme.set(pr.name,pr.lightenRatio,pr.tint,pr.tintRatio,pr.exclude)):e.THEME=window.THEME=null}catch(a){e.THEME=window.THEME=null}return e}(Ie||{});var ri=[["zog",qn],["zid",Tn],["zss",Oi],["zgo",or],["zum",jn],["zot",n],["zop",Li],["zil",Ur],["zet",gr],["zob",mt],["zik",dt],["zta",Di],["zor",Ri],["zogg",ui],["zogp",Mi],["zogb",Gr],["zogr",fi],["zogy",ht],["zogo",ci],["zogl",Sr],["zogd",Ir],["zimplify",Ni],["zimify",Qn]];for(pn=0;pn<ri.length;pn++)zn=ri[pn],fe[zn[0]]=Ie[zn[0]]=zn[1];var zn,ii=[["FIT",Ie.FIT],["FILL",Ie.FILL],["FULL",Ie.FULL],["LEFT",Ie.LEFT],["RIGHT",Ie.RIGHT],["CENTER",Ie.CENTER],["MIDDLE",Ie.MIDDLE],["START",Ie.START],["END",Ie.END],["TOP",Ie.TOP],["BOTTOM",Ie.BOTTOM],["OVER",Ie.OVER],["UNDER",Ie.UNDER],["HORIZONTAL",Ie.HORIZONTAL],["VERTICAL",Ie.VERTICAL],["BOTH",Ie.BOTH],["RADIAL",Ie.RADIAL],["UP",Ie.UP],["DOWN",Ie.DOWN],["NEXT",Ie.NEXT],["PREV",Ie.PREV],["AUTO",Ie.AUTO],["AVE",Ie.AVE],["DEFAULT",Ie.DEFAULT],["ALL",Ie.ALL],["NONE",Ie.NONE],["GET",Ie.GET],["POST",Ie.POST],["LOCALSTORAGE",Ie.LOCALSTORAGE],["SOCKET",Ie.SOCKET],["TO",Ie.TO],["FROM",Ie.FROM],["SINE",Ie.SINE],["SQUARE",Ie.SQUARE],["TRIANGLE",Ie.TRIANGLE],["SAW",Ie.SAW],["SAWTOOTH",Ie.SAWTOOTH],["ZAP",Ie.ZAP],["TAU",Ie.TAU],["DEG",Ie.DEG],["RAD",Ie.RAD],["PHI",Ie.PHI]];for(pn=0;pn<ii.length;pn++)zn=ii[pn],fe[zn[0]]=zn[1];var zn;for(pn=0;pn<Ie.colors.length;pn++)fe[Ie.colors[pn]]=Ie.colorsHex[pn];fe.zim=Ie;var Gi=Ie;var Ui=Ie.chop,Vi=Ie.shuffle,Hi=Ie.pluck,Wi=Ie.rand,qi=Ie.seedRandom,Qi=Ie.odds,Zi=Ie.rarity,Ki=Ie.repeats,Ji=Ie.series,$i=Ie.loop,ji=Ie.getTIME,si=Ie.timeout,Fi=Ie.interval,zi=Ie.async,es=Ie.couple,ts=Ie.decouple,ns=Ie.convertColor,rs=Ie.colorRange,is=Ie.lighten,ss=Ie.darken,as=Ie.toColor,os=Ie.toAlpha,ls=Ie.toBW,us=Ie.invertColor,fs=Ie.zimEase,cs=Ie.spline,hs=Ie.pointAlongCurve,ds=Ie.distanceAlongCurve,ps=Ie.closestPointAlongCurve,gs=Ie.transformPoints,vs=Ie.trimEndPoints,ys=Ie.reversePoints,ms=Ie.appendPoints,xs=Ie.prependPoints,ws=Ie.splitPoints,_s=Ie.makeID,Ts=Ie.makeSyllable,Cs=Ie.makePrimitive,As=Ie.makeMath,Es=Ie.swapProperties,bs=Ie.mobile,ks=Ie.vee,Ps=Ie.extend,Ss=Ie.copy,Is=Ie.merge,Ms=Ie.sortObject,Os=Ie.arraysEqual,Ls=Ie.arrayMinMax,Ds=Ie.isEmpty,Rs=Ie.isPick,Bs=Ie.isJSON,Ns=Ie.parseJSON,Fs=Ie.decimals,Ys=Ie.countDecimals,Xs=Ie.sign,Gs=Ie.constrain,Us=Ie.dist,Vs=Ie.rectIntersect,Hs=Ie.boundsAroundPoints,Ws=Ie.angle,qs=Ie.smoothStep,Qs=Ie.unicodeToUTF,Zs=Ie.capitalizeFirst,Ks=Ie.Ajax,Js=Ie.Noise,$s=Ie.Point,js=Ie.Bezier,zs=Ie.Boundary,ea=Ie.GradientColor,ta=Ie.RadialColor,na=Ie.BitmapColor,ra=Ie.Damp,ia=Ie.Proportion,sa=Ie.ProportionDamp,aa=Ie.Dictionary,oa=Ie.Hierarchy,la=Ie.Pick,ua=Ie.scrollX,fa=Ie.scrollY,ca=Ie.windowWidth,ha=Ie.windowHeight,da=Ie.browserZoom,pa=Ie.getQueryString,ga=Ie.swapHTML,va=Ie.urlEncode,ya=Ie.urlDecode,ma=Ie.setCookie,xa=Ie.getCookie,wa=Ie.deleteCookie,_a=Ie.Stage,Ta=Ie.StageGL,ai=Ie.Container,Ca=Ie.Shape,Aa=Ie.Bitmap,Ea=Ie.Sprite,ba=Ie.MovieClip,ka=Ie.SVGContainer,Pa=Ie.CustomShape,Sa=Ie.Circle,Sn=Ie.Rectangle,Ia=Ie.Triangle,Ma=Ie.Poly,Oa=Ie.Line,La=Ie.Squiggle;var Da=Ie.Flare,Ra=Ie.MultiFlare,Ba=Ie.FlareBox,oi=Ie.Label,Na=Ie.LabelOnPath,Fa=Ie.LabelOnArc,Ya=Ie.LabelLetters,Xa=Ie.Emoji,Ga=Ie.Button,Ua=Ie.CheckBox,Va=Ie.RadioButtons,Ha=Ie.Toggle,Wa=Ie.Tip,qa=Ie.Pane,Qa=Ie.Panel;var Za=Ie.Page,Ka=Ie.Central,Ja=Ie.Layer,$a=Ie.Waiter,ja=Ie.ProgressBar,za=Ie.Indicator,eo=Ie.TextInput,to=Ie.List,no=Ie.Stepper,ro=Ie.Slider,io=Ie.Selector,so=Ie.Dial,ao=Ie.Tabs,oo=Ie.Pad,lo=Ie.NumPad,uo=Ie.DPad,fo=Ie.Radial,co=Ie.RadialMenu,ho=Ie.ColorPicker,po=Ie.EmojiPicker,go=Ie.TextEditor,vo=Ie.Keyboard,yo=Ie.Organizer,mo=Ie.Connectors,xo=Ie.Marquee,wo=Ie.Carousel,_o=Ie.Loader,To=Ie.TextArea,Co=Ie.Tag,Ao=Ie.localToGlobal,Eo=Ie.globalToLocal,bo=Ie.localToLocal,ko=Ie.addTo,Po=Ie.removeFrom,So=Ie.added,Io=Ie.centerReg,Mo=Ie.center,Oo=Ie.place,Lo=Ie.placeReg,Do=Ie.pos,Ro=Ie.loc,Bo=Ie.mov,No=Ie.sca,Fo=Ie.alp,Yo=Ie.vis,Xo=Ie.ble,Go=Ie.dye,Uo=Ie.hov,Vo=Ie.rot,Ho=Ie.siz,Wo=Ie.ske,qo=Ie.reg,Qo=Ie.top,Zo=Ie.bot,Ko=Ie.ord,Jo=Ie.cur,$o=Ie.sha,jo=Ie.dep,zo=Ie.nam,el=Ie.movement,tl=Ie.noMovement,nl=Ie.tap,rl=Ie.noTap,il=Ie.hold,sl=Ie.noHold,al=Ie.change,ol=Ie.noChange,ll=Ie.drag,ul=Ie.noDrag,fl=Ie.dragBoundary,cl=Ie.mouse,hl=Ie.noMouse,dl=Ie.wire,pl=Ie.noWire,gl=Ie.wired,vl=Ie.noWired,yl=Ie.bind,ml=Ie.noBind,xl=Ie.transform,wl=Ie.gesture,_l=Ie.noGesture,Tl=Ie.gestureBoundary,Cl=Ie.effect,Al=Ie.updateEffects,El=Ie.noEffect,bl=Ie.addPhysics,kl=Ie.removePhysics,Pl=Ie.hitTestPoint,Sl=Ie.hitTestReg,Il=Ie.hitTestRect,Ml=Ie.hitTestCircle,Ol=Ie.hitTestCircleRect,Ll=Ie.hitTestCircles,Dl=Ie.hitTestBounds,Rl=Ie.hitTestPath,Bl=Ie.hitTestGrid,Nl=Ie.animate,Fl=Ie.stopAnimate,Yl=Ie.pauseAnimate,Xl=Ie.wiggle,Gl=Ie.scaleTo,Ul=Ie.fit,Vl=Ie.boundsToGlobal,Hl=Ie.resetBounds,Wl=Ie.copyMatrix,ql=Ie.duplicate,Ql=Ie.expand,Zl=Ie.setSwipe,Kl=Ie.setMask,Jl=Ie.outline,$l=Ie.blendmodes,jl=Ie.Pages,zl=Ie.Arrow,eu=Ie.HotSpots,tu=Ie.HotSpot,nu=Ie.Guide,ru=Ie.Grid,iu=Ie.Wrapper,li=Ie.Tile,su=Ie.Pack,au=Ie.Beads,ou=Ie.Layout,lu=Ie.Accessibility,uu=Ie.TextureActive,fu=Ie.TextureActives,cu=Ie.TextureActivesManager,hu=Ie.Manager,du=Ie.ResizeManager,pu=Ie.TransformManager,gu=Ie.GuideManager,vu=Ie.GridManager,yu=Ie.LayoutManager,mu=Ie.SelectionSet,xu=Ie.SelectionManager,wu=Ie.Bind,_u=Ie.Swipe,Tu=Ie.Swiper,Cu=Ie.MotionController,Au=Ie.GamePad,Eu=Ie.Portal,bu=Ie.Physics,ku=Ie.TimeLine,Pu=Ie.BlurEffect,Su=Ie.GlowEffect,Iu=Ie.ShadowEffect,Mu=Ie.ColorEffect,Ou=Ie.MultiEffect,Lu=Ie.AlphaEffect,Du=Ie.Pixel,Ru=Ie.Parallax,Bu=Ie.Flipper,Nu=Ie.Book,Fu=Ie.Scrambler,Yu=Ie.Scroller,Xu=Ie.Dynamo,Gu=Ie.Accelerator,Uu=Ie.Emitter,Vu=Ie.Generator,Hu=Ie.Pen,Wu=Ie.SoundWave,qu=Ie.Synth,Qu=Ie.VR,Zu=Ie.Frame,Ku=Ie.Pic,Ju=Ie.Aud,$u=Ie.Vid,ju=Ie.SVG,zu=Ie.SensorAsk,ef=Ie.distill,tf=Ie.parseAudioSprite,nf=Ie.previewAudioSprite,rf=Ie.svgToBitmap,sf=Ie.makeContent,af=Ie.fastFrame,of=Ie.addWires,lf=Ie.setBlurDetect,uf=Ie.Wonder,ff=Ie.getLatestVersions,cf=Ie.PWA,hf=Ie.QR,df=Ie.GIF,pr=Ie.THEME;})();
/*! ZIM - JavaScript Canvas Framework - Code Creativity
https://zimjs.com (c) 2023 modified MIT License
Donations welcome https://zimjs.com/donate
Node module - also see ES6 modules at https://zimjs.com/cdn
*/
/*! Bundled license information:

@danzen/createjs/create.js:
  (*!
  * CreateJS
  * Visit http://createjs.com/ for documentation, updates and examples.
  *
  * Copyright (c) 2010 gskinner.com, inc.
  *
  * Permission is hereby granted, free of charge, to any person
  * obtaining a copy of this software and associated documentation
  * files (the "Software"), to deal in the Software without
  * restriction, including without limitation the rights to use,
  * copy, modify, merge, publish, distribute, sublicense, and/or sell
  * copies of the Software, and to permit persons to whom the
  * Software is furnished to do so, subject to the following
  * conditions:
  *
  * The above copyright notice and this permission notice shall be
  * included in all copies or substantial portions of the Software.
  *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  * OTHER DEALINGS IN THE SOFTWARE.
  *)
*/
