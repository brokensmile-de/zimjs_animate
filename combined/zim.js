(()=>{var wi=Object.create;var ti=Object.defineProperty;var _i=Object.getOwnPropertyDescriptor;var Ti=Object.getOwnPropertyNames;var Ci=Object.getPrototypeOf,Ai=Object.prototype.hasOwnProperty;var Ei=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(v,a)=>(typeof require<"u"?require:v)[a]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var bi=(e,v)=>()=>(v||e((v={exports:{}}).exports,v),v.exports);var ki=(e,v,a,u)=>{if(v&&typeof v=="object"||typeof v=="function")for(let c of Ti(v))!Ai.call(e,c)&&c!==a&&ti(e,c,{get:()=>v[c],enumerable:!(u=_i(v,c))||u.enumerable});return e};var Pi=(e,v,a)=>(a=e!=null?wi(Ci(e)):{},ki(v||!e||!e.__esModule?ti(a,"default",{value:e,enumerable:!0}):a,e));var ni=bi((Dn,dr)=>{var re=re||{};re.stageTransformable=!0,re.extend=function(e,v){"use strict";function a(){this.constructor=e}return a.prototype=v.prototype,e.prototype=new a},re.promote=function(e,v){"use strict";var a=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(a)||a.__proto__;if(u)for(var c in a[(v+="_")+"constructor"]=u.constructor,u)a.hasOwnProperty(c)&&typeof u[c]=="function"&&(a[v+c]=u[c]);return e},re.indexOf=function(e,v){"use strict";for(var a=0,u=e.length;a<u;a++)if(v===e[a])return a;return-1},function(){"use strict";function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},re.UID=e}(),re.deprecate=function(e,v){"use strict";return function(){var a="Deprecated property or method '"+v+"'. See docs for info.";return console&&(console.warn?console.warn(a):console.log(a)),e&&e.apply(this,arguments)}},function(){"use strict";function e(a,u,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!u,this.cancelable=!!c,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var v=e.prototype;v.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},v.stopPropagation=function(){this.propagationStopped=!0},v.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},v.remove=function(){this.removed=!0},v.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},v.set=function(a){for(var u in a)this[u]=a[u];return this},v.toString=function(){return"[Event (type="+this.type+")]"},re.Event=e}(),function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var v=e.prototype;e.initialize=function(a){a.addEventListener=v.addEventListener,a.on=v.on,a.removeEventListener=a.off=v.removeEventListener,a.removeAllEventListeners=v.removeAllEventListeners,a.hasEventListener=v.hasEventListener,a.dispatchEvent=v.dispatchEvent,a._dispatchEvent=v._dispatchEvent,a.willTrigger=v.willTrigger},v.addEventListener=function(a,u,c){var m=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},B=m[a];return B&&this.removeEventListener(a,u,c),(B=m[a])?B.push(u):m[a]=[u],u},v.on=function(a,u,c,m,B,z){return u.handleEvent&&(c=c||u,u=u.handleEvent),c=c||this,this.addEventListener(a,function(oe){u.call(c,oe,B),m&&oe.remove()},z)},v.removeEventListener=function(a,u,c){var m=c?this._captureListeners:this._listeners;if(m){var B=m[a];if(B){for(var z=0,oe=B.length;z<oe;z++)if(B[z]==u){oe==1?delete m[a]:B.splice(z,1);break}}}},v.off=v.removeEventListener,v.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},v.dispatchEvent=function(a,u,c){if(typeof a=="string"){var m=this._listeners;if(!(u||m&&m[a]))return!0;a=new re.Event(a,u,c)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(Se){}if(a.bubbles&&this.parent){for(var B=this,z=[B];B.parent;)z.push(B=B.parent);for(var oe=z.length,ke=oe-1;0<=ke&&!a.propagationStopped;ke--)z[ke]._dispatchEvent(a,1+(ke==0));for(ke=1;ke<oe&&!a.propagationStopped;ke++)z[ke]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented},v.hasEventListener=function(a){var u=this._listeners,c=this._captureListeners;return!!(u&&u[a]||c&&c[a])},v.willTrigger=function(a){for(var u=this;u;){if(u.hasEventListener(a))return!0;u=u.parent}return!1},v.toString=function(){return"[EventDispatcher]"},v._dispatchEvent=function(a,u){var c,m,B=u<=2?this._captureListeners:this._listeners;if(a&&B&&(m=B[a.type])&&(c=m.length)){try{a.currentTarget=this}catch(ke){}try{a.eventPhase=0|u}catch(ke){}a.removed=!1,m=m.slice();for(var z=0;z<c&&!a.immediatePropagationStopped;z++){var oe=m[z];oe.handleEvent?oe.handleEvent(a):oe(a),a.removed&&(this.off(a.type,oe,u==1),a.removed=!1)}}u===2&&this._dispatchEvent(a,2.1)},re.EventDispatcher=e}(),function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,re.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return e._inited||e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e._setInterval=function(u){e._interval=u,e._inited&&e._setupTick()},e.setInterval=re.deprecate(e._setInterval,"Ticker.setInterval"),e._getInterval=function(){return e._interval},e.getInterval=re.deprecate(e._getInterval,"Ticker.getInterval"),e._setFPS=function(u){e._setInterval(1e3/u)},e.setFPS=re.deprecate(e._setFPS,"Ticker.setFPS"),e._getFPS=function(){return 1e3/e._interval},e.getFPS=re.deprecate(e._getFPS,"Ticker.getFPS");try{Object.defineProperties(e,{interval:{get:e._getInterval,set:e._setInterval},framerate:{get:e._getFPS,set:e._setFPS}})}catch(u){console.log(u)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){var u;e._raf?(u=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&u(e._timerId):clearTimeout(e._timerId),e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=e._pausedTime=0,e._inited=!1},e.getMeasuredTickTime=function(u){var c=0,m=e._tickTimes;if(!m||m.length<1)return-1;u=Math.min(m.length,u||0|e._getFPS());for(var B=0;B<u;B++)c+=m[B];return c/u},e.getMeasuredFPS=function(u){var c=e._times;return!c||c.length<2?-1:(u=Math.min(c.length-1,u||0|e._getFPS()),1e3/((c[0]-c[u])/u))},e.getTime=function(u){return e._startTime?e._getTime()-(u?e._pausedTime:0):-1},e.getEventTime=function(u){return e._startTime?(e._lastTime||e._startTime)-(u?e._pausedTime:0):-1},e.getTicks=function(u){return e._ticks-(u?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(e._timerId==null){var u=e.timingMode;if(u==e.RAF_SYNCHED||u==e.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return e._timerId=c(u==e.RAF?e._handleRAF:e._handleSynch),void(e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var u,c,m=e.paused,B=e._getTime(),z=B-e._lastTime;for(e._lastTime=B,e._ticks++,m&&(e._pausedTicks++,e._pausedTime+=z),e.hasEventListener("tick")&&(u=new re.Event("tick"),c=e.maxDelta,u.delta=c&&c<z?c:z,u.paused=m,u.time=B,u.runTime=B-e._pausedTime,e.dispatchEvent(u)),e._tickTimes.unshift(e._getTime()-B);100<e._tickTimes.length;)e._tickTimes.pop();for(e._times.unshift(B);100<e._times.length;)e._times.pop()};var v=window,a=v.performance.now||v.performance.mozNow||v.performance.msNow||v.performance.oNow||v.performance.webkitNow;e._getTime=function(){return(a&&a.call(v.performance)||new Date().getTime())-e._startTime},re.Ticker=e}(),function(){"use strict";function e(a){this.readyState=a.readyState,this._video=a,this._canvas=null,this._lastTime=-1,this.readyState<2&&a.addEventListener("canplaythrough",this._videoReady.bind(this))}var v=e.prototype;v.getImage=function(){if(!(this.readyState<2)){var a,u=this._canvas,c=this._video;return u||((u=this._canvas=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=c.videoWidth,u.height=c.videoHeight),2<=c.readyState&&c.currentTime!==this._lastTime&&((a=u.getContext("2d")).clearRect(0,0,u.width,u.height),a.drawImage(c,0,0,u.width,u.height),this._lastTime=c.currentTime),u}},v._videoReady=function(){this.readyState=2},re.VideoBuffer=e}(),function(){"use strict";function e(a,u,c,m,B,z,oe,ke,Se,t,r){this.Event_constructor(a,u,c),this.stageX=m,this.stageY=B,this.rawX=Se==null?m:Se,this.rawY=t==null?B:t,this.nativeEvent=z,this.pointerID=oe,this.primary=!!ke,this.relatedTarget=r}var v=re.extend(e,re.Event);v._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},v._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},v._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(v,{localX:{get:v._get_localX},localY:{get:v._get_localY},isTouch:{get:v._get_isTouch}})}catch(a){}v.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},v.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},re.MouseEvent=re.promote(e,"Event")}(),function(){"use strict";function e(a,u,c,m,B,z){this.setValues(a,u,c,m,B,z)}var v=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,v.setValues=function(a,u,c,m,B,z){return this.a=a==null?1:a,this.b=u||0,this.c=c||0,this.d=m==null?1:m,this.tx=B||0,this.ty=z||0,this},v.append=function(a,u,c,m,B,z){var oe=this.a,ke=this.b,Se=this.c,t=this.d;return a==1&&u==0&&c==0&&m==1||(this.a=oe*a+Se*u,this.b=ke*a+t*u,this.c=oe*c+Se*m,this.d=ke*c+t*m),this.tx=oe*B+Se*z+this.tx,this.ty=ke*B+t*z+this.ty,this},v.prepend=function(a,u,c,m,B,z){var oe=this.a,ke=this.c,Se=this.tx;return this.a=a*oe+c*this.b,this.b=u*oe+m*this.b,this.c=a*ke+c*this.d,this.d=u*ke+m*this.d,this.tx=a*Se+c*this.ty+B,this.ty=u*Se+m*this.ty+z,this},v.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty)},v.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)},v.appendTransform=function(a,u,c,m,B,z,oe,ke,Se){var t,r=B%360?(r=B*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return z||oe?(z*=e.DEG_TO_RAD,oe*=e.DEG_TO_RAD,this.append(Math.cos(oe),Math.sin(oe),-Math.sin(z),Math.cos(z),a,u),this.append(t*c,r*c,-r*m,t*m,0,0)):this.append(t*c,r*c,-r*m,t*m,a,u),(ke||Se)&&(this.tx-=ke*this.a+Se*this.c,this.ty-=ke*this.b+Se*this.d),this},v.prependTransform=function(a,u,c,m,B,z,oe,ke,Se){var t,r=B%360?(r=B*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return(ke||Se)&&(this.tx-=ke,this.ty-=Se),z||oe?(z*=e.DEG_TO_RAD,oe*=e.DEG_TO_RAD,this.prepend(t*c,r*c,-r*m,t*m,0,0),this.prepend(Math.cos(oe),Math.sin(oe),-Math.sin(z),Math.cos(z),a,u)):this.prepend(t*c,r*c,-r*m,t*m,a,u),this},v.rotate=function(B){B*=e.DEG_TO_RAD;var u=Math.cos(B),c=Math.sin(B),m=this.a,B=this.b;return this.a=m*u+this.c*c,this.b=B*u+this.d*c,this.c=-m*c+this.c*u,this.d=-B*c+this.d*u,this},v.skew=function(a,u){return a*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(a),Math.cos(a),0,0),this},v.scale=function(a,u){return this.a*=a,this.b*=a,this.c*=u,this.d*=u,this},v.translate=function(a,u){return this.tx+=this.a*a+this.c*u,this.ty+=this.b*a+this.d*u,this},v.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},v.invert=function(){var a=this.a,u=this.b,c=this.c,m=this.d,B=this.tx,z=a*m-u*c;return this.a=m/z,this.b=-u/z,this.c=-c/z,this.d=a/z,this.tx=(c*this.ty-m*B)/z,this.ty=-(a*this.ty-u*B)/z,this},v.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},v.equals=function(a){return this.tx===a.tx&&this.ty===a.ty&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d},v.transformPoint=function(a,u,c){return(c=c||{}).x=a*this.a+u*this.c+this.tx,c.y=a*this.b+u*this.d+this.ty,c},v.decompose=function(a){a==null&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var u=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a);return Math.abs(1-u/c)<1e-5?(a.rotation=c/e.DEG_TO_RAD,this.a<0&&0<=this.d&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=u/e.DEG_TO_RAD,a.skewY=c/e.DEG_TO_RAD),a},v.copy=function(a){return this.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)},v.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},v.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,re.Matrix2D=e}(),function(){"use strict";function e(a,u,c,m,B){this.setValues(a,u,c,m,B)}var v=e.prototype;v.setValues=function(a,u,c,m,B){return this.visible=a==null||!!a,this.alpha=u==null?1:u,this.shadow=c,this.compositeOperation=m,this.matrix=B||this.matrix&&this.matrix.identity()||new re.Matrix2D,this},v.append=function(a,u,c,m,B){return this.alpha*=u,this.shadow=c||this.shadow,this.compositeOperation=m||this.compositeOperation,this.visible=this.visible&&a,B&&this.matrix.appendMatrix(B),this},v.prepend=function(a,u,c,m,B){return this.alpha*=u,this.shadow=this.shadow||c,this.compositeOperation=this.compositeOperation||m,this.visible=this.visible&&a,B&&this.matrix.prependMatrix(B),this},v.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},v.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},re.DisplayProps=e}(),function(){"use strict";function e(a,u){this.setValues(a,u)}var v=e.prototype;v.setValues=function(a,u){return this.x=a||0,this.y=u||0,this},v.copy=function(a){return this.x=a.x,this.y=a.y,this},v.clone=function(){return new e(this.x,this.y)},v.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},re.Point=e}(),function(){"use strict";function e(a,u,c,m){this.setValues(a,u,c,m)}var v=e.prototype;v.setValues=function(a,u,c,m){return this.x=a||0,this.y=u||0,this.width=c||0,this.height=m||0,this},v.extend=function(a,u,c,m){return m=m||0,a+(c=c||0)>this.x+this.width&&(this.width=a+c-this.x),u+m>this.y+this.height&&(this.height=u+m-this.y),a<this.x&&(this.width+=this.x-a,this.x=a),u<this.y&&(this.height+=this.y-u,this.y=u),this},v.pad=function(a,u,c,m){return this.x-=u,this.y-=a,this.width+=u+m,this.height+=a+c,this},v.copy=function(a){return this.setValues(a.x,a.y,a.width,a.height)},v.contains=function(a,u,c,m){return c=c||0,m=m||0,a>=this.x&&a+c<=this.x+this.width&&u>=this.y&&u+m<=this.y+this.height},v.union=function(a){return this.clone().extend(a.x,a.y,a.width,a.height)},v.intersection=function(B){var u=B.x,c=B.y,m=u+B.width,B=c+B.height;return this.x>u&&(u=this.x),this.y>c&&(c=this.y),this.x+this.width<m&&(m=this.x+this.width),this.y+this.height<B&&(B=this.y+this.height),m<=u||B<=c?null:new e(u,c,m-u,B-c)},v.intersects=function(a){return a.x<=this.x+this.width&&this.x<=a.x+a.width&&a.y<=this.y+this.height&&this.y<=a.y+a.height},v.isEmpty=function(){return this.width<=0||this.height<=0},v.clone=function(){return new e(this.x,this.y,this.width,this.height)},v.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},re.Rectangle=e}(),function(){"use strict";function e(a,u,c,m,B,z,oe){a.addEventListener&&(this.target=a,this.overLabel=c==null?"over":c,this.outLabel=u==null?"out":u,this.downLabel=m==null?"down":m,this.play=B,this._isPressed=!1,this._isOver=!1,this._enabled=!1,a.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),z&&(oe&&(z.actionsEnabled=!1,z.gotoAndStop&&z.gotoAndStop(oe)),a.hitArea=z))}var v=e.prototype;v._setEnabled=function(a){var u;a!=this._enabled&&(u=this.target,(this._enabled=a)?(u.cursor="pointer",u.addEventListener("rollover",this),u.addEventListener("rollout",this),u.addEventListener("mousedown",this),u.addEventListener("pressup",this),u._reset&&(u.__reset=u._reset,u._reset=this._reset)):(u.cursor=null,u.removeEventListener("rollover",this),u.removeEventListener("rollout",this),u.removeEventListener("mousedown",this),u.removeEventListener("pressup",this),u.__reset&&(u._reset=u.__reset,delete u.__reset)))},v.setEnabled=re.deprecate(v._setEnabled,"ButtonHelper.setEnabled"),v._getEnabled=function(){return this._enabled},v.getEnabled=re.deprecate(v._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(v,{enabled:{get:v._getEnabled,set:v._setEnabled}})}catch(a){}v.toString=function(){return"[ButtonHelper]"},v.handleEvent=function(c){var u=this.target,c=c.type,c=c=="mousedown"?(this._isPressed=!0,this.downLabel):c=="pressup"?(this._isPressed=!1,this._isOver?this.overLabel:this.outLabel):c=="rollover"?(this._isOver=!0,this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,this._isPressed?this.overLabel:this.outLabel);this.play?u.gotoAndPlay&&u.gotoAndPlay(c):u.gotoAndStop&&u.gotoAndStop(c)},v._reset=function(){var a=this.paused;this.__reset(),this.paused=a},re.ButtonHelper=e}(),function(){"use strict";function e(a,u,c,m){this.color=a||"black",this.offsetX=u||0,this.offsetY=c||0,this.blur=m||0}var v=e.prototype;e.identity=new e("transparent",0,0,0),v.toString=function(){return"[Shadow]"},v.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},re.Shadow=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(a)}var v=re.extend(e,re.EventDispatcher);v._getAnimations=function(){return this._animations.slice()},v.getAnimations=re.deprecate(v._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(v,{animations:{get:v._getAnimations}})}catch(a){}v.getNumFrames=function(a){return a==null?this._frames?this._frames.length:this._numFrames||0:(a=this._data[a],a==null?0:a.frames.length)},v.getAnimation=function(a){return this._data[a]},v.getFrame=function(a){var u;return this._frames&&(u=this._frames[a])?u:null},v.getFrameBounds=function(a,u){return a=this.getFrame(a),a?(u||new re.Rectangle).setValues(-a.regX,-a.regY,a.rect.width,a.rect.height):null},v.toString=function(){return"[SpriteSheet]"},v.clone=function(){throw"SpriteSheet cannot be cloned."},v._parseData=function(a){var u,c,m,B;if(a!=null){if(this.framerate=a.framerate||0,a.images&&0<(c=a.images.length))for(i=this._images=[],u=0;u<c;u++){var z,oe=a.images[u];typeof oe=="string"&&(z=oe,(oe=document.createElement("img")).src=z),i.push(oe),oe.getContext||oe.naturalWidth||(this._loadCount++,this.complete=!1,function(o,l){oe.onload=function(){o._handleImageLoad(l)}}(this,z),function(o,l){oe.onerror=function(){o._handleImageError(l)}}(this,z))}if(a.frames!=null)if(Array.isArray(a.frames))for(this._frames=[],u=0,c=(i=a.frames).length;u<c;u++){var ke=i[u];this._frames.push({image:this._images[ke[4]||0],rect:new re.Rectangle(ke[0],ke[1],ke[2],ke[3]),regX:ke[5]||0,regY:ke[6]||0})}else m=a.frames,this._frameWidth=m.width,this._frameHeight=m.height,this._regX=m.regX||0,this._regY=m.regY||0,this._spacing=m.spacing||0,this._margin=m.margin||0,this._numFrames=m.count,this._loadCount==0&&this._calculateFrames();if(this._animations=[],(m=a.animations)!=null)for(B in this._data={},m){var Se={name:B},t=m[B];if(typeof t=="number")i=Se.frames=[t];else if(Array.isArray(t))if(t.length==1)Se.frames=[t[0]];else for(Se.speed=t[3],Se.next=t[2],i=Se.frames=[],u=t[0];u<=t[1];u++)i.push(u);else{Se.speed=t.speed,Se.next=t.next;var r=t.frames,i=Se.frames=typeof r=="number"?[r]:r.slice(0)}Se.next!==!0&&Se.next!==void 0||(Se.next=B),(Se.next===!1||i.length<2&&Se.next==B)&&(Se.next=null),Se.speed||(Se.speed=1),this._animations.push(B),this._data[B]=Se}}},v._handleImageLoad=function(a){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},v._handleImageError=function(a){var u=new re.Event("error");u.src=a,this.dispatchEvent(u),--this._loadCount==0&&this.dispatchEvent("complete")},v._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];var a=this._numFrames||1e5,u=0,c=this._frameWidth,m=this._frameHeight,B=this._spacing,z=this._margin;e:for(var oe=0,ke=this._images;oe<ke.length;oe++)for(var Se=ke[oe],t=Se.width||Se.naturalWidth,r=Se.height||Se.naturalHeight,i=z;i<=r-z-m;){for(var o=z;o<=t-z-c;){if(a<=u)break e;u++,this._frames.push({image:Se,rect:new re.Rectangle(o,i,c,m),regX:this._regX,regY:this._regY}),o+=c+B}i+=m+B}this._numFrames=u}},re.SpriteSheet=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var v=e.prototype,a=e;e.getRGB=function(c,m,B,z){return c!=null&&B==null&&(z=m,B=255&c,m=c>>8&255,c=c>>16&255),z==null?"rgb("+c+","+m+","+B+")":"rgba("+c+","+m+","+B+","+z+")"},e.getHSL=function(c,m,B,z){return z==null?"hsl("+c%360+","+m+"%,"+B+"%)":"hsla("+c%360+","+m+"%,"+B+"%,"+z+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var u=re.createCanvas?re.createCanvas():document.createElement("canvas");u.getContext&&(e._ctx=u.getContext("2d"),u.width=u.height=1),v._getInstructions=function(){return this._updateInstructions(),this._instructions},v.getInstructions=re.deprecate(v._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(v,{instructions:{get:v._getInstructions}})}catch(c){}v.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},v.draw=function(c,m){this._updateInstructions();for(var B=this._instructions,z=this._storeIndex,oe=B.length;z<oe;z++)B[z].exec(c,m)},v.drawAsPath=function(c){this._updateInstructions();for(var m,B=this._instructions,z=this._storeIndex,oe=B.length;z<oe;z++)(m=B[z]).path!==!1&&m.exec(c)},v.moveTo=function(c,m){return this.append(new a.MoveTo(c,m),!0)},v.lineTo=function(c,m){return this.append(new a.LineTo(c,m))},v.arcTo=function(c,m,B,z,oe){return this.append(new a.ArcTo(c,m,B,z,oe))},v.arc=function(c,m,B,z,oe,ke){return this.append(new a.Arc(c,m,B,z,oe,ke))},v.quadraticCurveTo=function(c,m,B,z){return this.append(new a.QuadraticCurveTo(c,m,B,z))},v.bezierCurveTo=function(c,m,B,z,oe,ke){return this.append(new a.BezierCurveTo(c,m,B,z,oe,ke))},v.rect=function(c,m,B,z){return this.append(new a.Rect(c,m,B,z))},v.closePath=function(){return this._activeInstructions.length?this.append(new a.ClosePath):this},v.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},v.beginFill=function(c){return this._setFill(c?new a.Fill(c):null)},v.beginLinearGradientFill=function(c,m,B,z,oe,ke){return this._setFill(new a.Fill().linearGradient(c,m,B,z,oe,ke))},v.beginRadialGradientFill=function(c,m,B,z,oe,ke,Se,t){return this._setFill(new a.Fill().radialGradient(c,m,B,z,oe,ke,Se,t))},v.beginBitmapFill=function(c,m,B){return this._setFill(new a.Fill(null,B).bitmap(c,m))},v.endFill=function(){return this.beginFill()},v.setStrokeStyle=function(c,m,B,z,oe){return this._updateInstructions(!0),this._strokeStyle=this.command=new a.StrokeStyle(c,m,B,z,oe),this._stroke&&(this._stroke.ignoreScale=oe),this._strokeIgnoreScale=oe,this},v.setStrokeDash=function(c,m){return this._updateInstructions(!0),this._strokeDash=this.command=new a.StrokeDash(c,m),this},v.beginStroke=function(c){return this._setStroke(c?new a.Stroke(c):null)},v.beginLinearGradientStroke=function(c,m,B,z,oe,ke){return this._setStroke(new a.Stroke().linearGradient(c,m,B,z,oe,ke))},v.beginRadialGradientStroke=function(c,m,B,z,oe,ke,Se,t){return this._setStroke(new a.Stroke().radialGradient(c,m,B,z,oe,ke,Se,t))},v.beginBitmapStroke=function(c,m){return this._setStroke(new a.Stroke().bitmap(c,m))},v.endStroke=function(){return this.beginStroke()},v.curveTo=v.quadraticCurveTo,v.drawRect=v.rect,v.drawRoundRect=function(c,m,B,z,oe){return this.drawRoundRectComplex(c,m,B,z,oe,oe,oe,oe)},v.drawRoundRectComplex=function(c,m,B,z,oe,ke,Se,t){return this.append(new a.RoundRect(c,m,B,z,oe,ke,Se,t))},v.drawCircle=function(c,m,B){return this.append(new a.Circle(c,m,B))},v.drawEllipse=function(c,m,B,z){return this.append(new a.Ellipse(c,m,B,z))},v.drawPolyStar=function(c,m,B,z,oe,ke){return this.append(new a.PolyStar(c,m,B,z,oe,ke))},v.drawPolygon=function(c,m){return this.append(new a.Polygon(c,m))},v.append=function(c,m){return this._activeInstructions.push(c),this.command=c,m||(this._dirty=!0),this},v.decodePath=function(c){for(var m=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],B=[2,2,4,6,0],z=0,oe=c.length,ke=[],Se=0,t=0,r=e.BASE_64;z<oe;){var i=c.charAt(z),o=r[i],l=o>>3,f=m[l];if(!f||3&o)throw"bad path data (@"+z+"): "+i;var h=B[l];l||(Se=t=0),z++;for(var g=2+(o>>2&1),_=ke.length=0;_<h;_++){var P=(C=r[c.charAt(z)])>>5?-1:1,C=(31&C)<<6|r[c.charAt(z+1)];g==3&&(C=C<<6|r[c.charAt(z+2)]),C=P*C/10,_%2?Se=C+=Se:t=C+=t,ke[_]=C,z+=g}f.apply(this,ke)}return this},v.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},v.unstore=function(){return this._storeIndex=0,this},v.clone=function(){var c=new e;return c.command=this.command,c._stroke=this._stroke,c._strokeStyle=this._strokeStyle,c._strokeDash=this._strokeDash,c._strokeIgnoreScale=this._strokeIgnoreScale,c._fill=this._fill,c._instructions=this._instructions.slice(),c._commitIndex=this._commitIndex,c._activeInstructions=this._activeInstructions.slice(),c._dirty=this._dirty,c._storeIndex=this._storeIndex,c},v.toString=function(){return"[Graphics]"},v.mt=v.moveTo,v.lt=v.lineTo,v.at=v.arcTo,v.bt=v.bezierCurveTo,v.qt=v.quadraticCurveTo,v.a=v.arc,v.r=v.rect,v.cp=v.closePath,v.c=v.clear,v.f=v.beginFill,v.lf=v.beginLinearGradientFill,v.rf=v.beginRadialGradientFill,v.bf=v.beginBitmapFill,v.ef=v.endFill,v.ss=v.setStrokeStyle,v.sd=v.setStrokeDash,v.s=v.beginStroke,v.ls=v.beginLinearGradientStroke,v.rs=v.beginRadialGradientStroke,v.bs=v.beginBitmapStroke,v.es=v.endStroke,v.dr=v.drawRect,v.rr=v.drawRoundRect,v.rc=v.drawRoundRectComplex,v.dc=v.drawCircle,v.de=v.drawEllipse,v.dp=v.drawPolyStar,v.pg=v.drawPolygon,v.p=v.decodePath,v._updateInstructions=function(c){var m=this._instructions,B=this._activeInstructions,z=this._commitIndex;if(this._dirty&&B.length){m.length=z,m.push(e.beginCmd);var oe=B.length,ke=m.length;m.length=ke+oe;for(var Se=0;Se<oe;Se++)m[Se+ke]=B[Se];this._fill&&m.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&m.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&m.push(this._strokeStyle),c&&(this._oldStrokeStyle=this._strokeStyle,this._oldStrokeDash=this._strokeDash),m.push(this._stroke)),this._dirty=!1}c&&(B.length=0,this._commitIndex=m.length)},v._setFill=function(c){return this._updateInstructions(!0),this.command=this._fill=c,this},v._setStroke=function(c){return this._updateInstructions(!0),(this.command=this._stroke=c)&&(c.ignoreScale=this._strokeIgnoreScale),this},(a.LineTo=function(c,m){this.x=c,this.y=m}).prototype.exec=function(c){c.lineTo(this.x,this.y)},(a.MoveTo=function(c,m){this.x=c,this.y=m}).prototype.exec=function(c){c.moveTo(this.x,this.y)},(a.ArcTo=function(c,m,B,z,oe){this.x1=c,this.y1=m,this.x2=B,this.y2=z,this.radius=oe}).prototype.exec=function(c){c.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(a.Arc=function(c,m,B,z,oe,ke){this.x=c,this.y=m,this.radius=B,this.startAngle=z,this.endAngle=oe,this.anticlockwise=!!ke}).prototype.exec=function(c){c.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(a.QuadraticCurveTo=function(c,m,B,z){this.cpx=c,this.cpy=m,this.x=B,this.y=z}).prototype.exec=function(c){c.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(a.BezierCurveTo=function(c,m,B,z,oe,ke){this.cp1x=c,this.cp1y=m,this.cp2x=B,this.cp2y=z,this.x=oe,this.y=ke}).prototype.exec=function(c){c.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(a.Rect=function(c,m,B,z){this.x=c,this.y=m,this.w=B,this.h=z}).prototype.exec=function(c){c.rect(this.x,this.y,this.w,this.h)},(a.ClosePath=function(){}).prototype.exec=function(c){c.closePath()},(a.BeginPath=function(){}).prototype.exec=function(c){c.beginPath()},(v=(a.Fill=function(c,m){this.style=c,this.matrix=m}).prototype).exec=function(c){var m;this.style&&(c.fillStyle=this.style,(m=this.matrix)&&(c.save(),c.transform(m.a,m.b,m.c,m.d,m.tx,m.ty)),c.fill(),m&&c.restore())},v.linearGradient=function(c,m,B,z,oe,ke){for(var Se=this.style=e._ctx.createLinearGradient(B,z,oe,ke),t=0,r=c.length;t<r;t++)Se.addColorStop(m[t],c[t]);return Se.props={colors:c,ratios:m,x0:B,y0:z,x1:oe,y1:ke,type:"linear"},this},v.radialGradient=function(c,m,B,z,oe,ke,Se,t){for(var r=this.style=e._ctx.createRadialGradient(B,z,oe,ke,Se,t),i=0,o=c.length;i<o;i++)r.addColorStop(m[i],c[i]);return r.props={colors:c,ratios:m,x0:B,y0:z,r0:oe,x1:ke,y1:Se,r1:t,type:"radial"},this},v.bitmap=function(c,m,B){return B&&(this.matrix=B),(c.naturalWidth||c.getContext||2<=c.readyState)&&((this.style=e._ctx.createPattern(c,m||"")).props={image:c,repetition:m,type:"bitmap"}),this},v.path=!1,(v=(a.Stroke=function(c,m){this.style=c,this.ignoreScale=m}).prototype).exec=function(c){this.style&&(c.strokeStyle=this.style,this.ignoreScale&&(c.save(),c.setTransform(1,0,0,1,0,0)),c.stroke(),this.ignoreScale&&c.restore())},v.linearGradient=a.Fill.prototype.linearGradient,v.radialGradient=a.Fill.prototype.radialGradient,v.bitmap=a.Fill.prototype.bitmap,v.path=!1,(v=(a.StrokeStyle=function(c,m,B,z,oe){this.width=c,this.caps=m,this.joints=B,this.miterLimit=z,this.ignoreScale=oe}).prototype).exec=function(c){c.lineWidth=this.width==null?"1":this.width,c.lineCap=this.caps==null?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],c.lineJoin=this.joints==null?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],c.miterLimit=this.miterLimit==null?"10":this.miterLimit,c.ignoreScale=this.ignoreScale!=null&&this.ignoreScale},v.path=!1,(a.StrokeDash=function(c,m){this.segments=c,this.offset=m||0}).prototype.exec=function(c){c.setLineDash&&(c.setLineDash(this.segments||a.StrokeDash.EMPTY_SEGMENTS),c.lineDashOffset=this.offset||0)},a.StrokeDash.EMPTY_SEGMENTS=[],(a.RoundRect=function(c,m,B,z,oe,ke,Se,t){this.x=c,this.y=m,this.w=B,this.h=z,this.radiusTL=oe,this.radiusTR=ke,this.radiusBR=Se,this.radiusBL=t}).prototype.exec=function(c){var m=(r<i?r:i)/2,B=0,z=0,oe=0,ke=0,Se=this.x,t=this.y,r=this.w,i=this.h,o=this.radiusTL,l=this.radiusTR,f=this.radiusBR,h=this.radiusBL;o<0&&(o*=B=-1),m<o&&(o=m),l<0&&(l*=z=-1),m<l&&(l=m),f<0&&(f*=oe=-1),m<f&&(f=m),h<0&&(h*=ke=-1),m<h&&(h=m),c.moveTo(Se+r-l,t),c.arcTo(Se+r+l*z,t-l*z,Se+r,t+l,l),c.lineTo(Se+r,t+i-f),c.arcTo(Se+r+f*oe,t+i+f*oe,Se+r-f,t+i,f),c.lineTo(Se+h,t+i),c.arcTo(Se-h*ke,t+i+h*ke,Se,t+i-h,h),c.lineTo(Se,t+o),c.arcTo(Se-o*B,t-o*B,Se+o,t,o),c.closePath()},(a.Circle=function(c,m,B){this.x=c,this.y=m,this.radius=B}).prototype.exec=function(c){c.arc(this.x,this.y,this.radius,0,2*Math.PI)},(a.Ellipse=function(c,m,B,z){this.x=c,this.y=m,this.w=B,this.h=z}).prototype.exec=function(c){var m=this.x,B=this.y,t=this.w,r=this.h,z=t/2*.5522848,oe=r/2*.5522848,ke=m+t,Se=B+r,t=m+t/2,r=B+r/2;c.moveTo(m,r),c.bezierCurveTo(m,r-oe,t-z,B,t,B),c.bezierCurveTo(t+z,B,ke,r-oe,ke,r),c.bezierCurveTo(ke,r+oe,t+z,Se,t,Se),c.bezierCurveTo(t-z,Se,m,r+oe,m,r)},(a.PolyStar=function(c,m,B,z,oe,ke){this.x=c,this.y=m,this.radius=B,this.sides=z,this.pointSize=oe,this.angle=ke}).prototype.exec=function(c){var m=this.x,B=this.y,z=this.radius,oe=(this.angle||0)/180*Math.PI,ke=this.sides,Se=1-(this.pointSize||0),t=Math.PI/ke;c.moveTo(m+Math.cos(oe)*z,B+Math.sin(oe)*z);for(var r=0;r<ke+1&&(oe+=t,Se==1||(c.lineTo(m+Math.cos(oe)*z*Se,B+Math.sin(oe)*z*Se),r!=ke));r++)oe+=t,c.lineTo(m+Math.cos(oe)*z,B+Math.sin(oe)*z);c.closePath()},(a.Polygon=function(c,m){this.points=c,m==null&&(m=!0),this.close=m}).prototype.exec=function(c){var m,B,z=this.points,oe=this.close,ke=z[0];c.moveTo(ke[0],ke[1]);for(var Se=1;Se<z.length;Se++)m=z[Se],Se==1&&(B=[m[0],m[1]]),c.lineTo(m[0],m[1]);oe&&(c.lineTo(ke[0],ke[1]),c.lineTo(B[0],B[1])),c.closePath()},e.beginCmd=new a.BeginPath,re.Graphics=e}(),function(){"use strict";function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=re.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new re.DisplayProps,this._rectangle=new re.Rectangle,this._bounds=null,this._webGLRenderStyle=e._StageGL_NONE}var v=re.extend(e,re.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1,e._StageGL_NONE=0,e._StageGL_SPRITE=1,e._StageGL_BITMAP=2;var a=re.createCanvas?re.createCanvas():document.createElement("canvas");a.getContext&&(e._hitTestCanvas=a,e._hitTestContext=a.getContext("2d"),a.width=a.height=1),v._getStage=function(){for(var u=this,c=re.Stage;u.parent;)u=u.parent;return u instanceof c?u:null},v.getStage=re.deprecate(v._getStage,"DisplayObject.getStage");try{Object.defineProperties(v,{stage:{get:v._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(u){this.bitmapCache&&(this.bitmapCache.cacheID=u)}},scale:{get:function(){return this.scaleX},set:function(u){this.scaleX=this.scaleY=u}}})}catch(u){}v.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},v.draw=function(u,c){var m=this.bitmapCache;return!(!m||c)&&m.draw(u)},v.updateContext=function(u){var c=this,z=c.mask,m=c._props.matrix;z&&z.graphics&&!z.graphics.isEmpty()&&(z.getMatrix(m),u.transform(m.a,m.b,m.c,m.d,m.tx,m.ty),z.graphics.drawAsPath(u),u.clip(),m.invert(),u.transform(m.a,m.b,m.c,m.d,m.tx,m.ty)),this.getMatrix(m);var B=m.tx,z=m.ty;e._snapToPixelEnabled&&c.snapToPixel&&(B=B+(B<0?-.5:.5)|0,z=z+(z<0?-.5:.5)|0),u.transform(m.a,m.b,m.c,m.d,B,z),u.globalAlpha*=c.alpha,c.compositeOperation&&(u.globalCompositeOperation=c.compositeOperation),c.shadow&&this._applyShadow(u,c.shadow)},v.cache=function(u,c,m,B,z,oe){this.bitmapCache||(this.bitmapCache=new re.BitmapCache),this.bitmapCache.define(this,u,c,m,B,z,oe)},v.updateCache=function(u){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(u)},v.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},v.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getCacheDataURL():null},v.localToGlobal=function(u,c,m){return m=this.getConcatenatedMatrix(this._props.matrix).transformPoint(u,c,m||new re.Point),this.stage&&re.stageTransformable&&(m=this.stage.getConcatenatedMatrix(this._mtx).invert().transformPoint(m.x,m.y)),m},v.globalToLocal=function(u,c,m){var B;return this.stage&&re.stageTransformable&&(u=(B=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(u,c)).x,c=B.y),this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(u,c,m||new re.Point)},v.localToLocal=function(u,c,m,B){return B=this.localToGlobal(u,c,B),m.globalToLocal(B.x,B.y,B)},v.setTransform=function(u,c,m,B,z,oe,ke,Se,t){return this.x=u||0,this.y=c||0,this.scaleX=m==null?1:m,this.scaleY=B==null?1:B,this.rotation=z||0,this.skewX=oe||0,this.skewY=ke||0,this.regX=Se||0,this.regY=t||0,this},v.getMatrix=function(m){var c=this,m=m&&m.identity()||new re.Matrix2D;return c.transformMatrix?m.copy(c.transformMatrix):m.appendTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY)},v.getConcatenatedMatrix=function(u){for(var c=this,m=this.getMatrix(u);c=c.parent;)m.prependMatrix(c.getMatrix(c._props.matrix));return m},v.getConcatenatedDisplayProps=function(u){u=u?u.identity():new re.DisplayProps;for(var c=this,m=c.getMatrix(u.matrix);u.prepend(c.visible,c.alpha,c.shadow,c.compositeOperation),c!=this&&m.prependMatrix(c.getMatrix(c._props.matrix)),c=c.parent;);return u},v.hitTest=function(u,c){var m=e._hitTestContext;return m.setTransform(1,0,0,1,-u,-c),this.draw(m),c=this._testHit(m),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,2,2),c},v.set=function(u){for(var c in u)this[c]=u[c];return this},v.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var u=this.cacheCanvas;if(u){var c=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,u.width/c,u.height/c)}return null},v.getTransformedBounds=function(){return this._getBounds()},v.setBounds=function(u,c,m,B){this._bounds=u!=null?(this._bounds||new re.Rectangle).setValues(u,c,m,B):u},v.clone=function(){return this._cloneProps(new e)},v.toString=function(){return"[DisplayObject (name="+this.name+")]"},v._updateState=null,v._cloneProps=function(u){return u.alpha=this.alpha,u.mouseEnabled=this.mouseEnabled,u.tickEnabled=this.tickEnabled,u.name=this.name,u.regX=this.regX,u.regY=this.regY,u.rotation=this.rotation,u.scaleX=this.scaleX,u.scaleY=this.scaleY,u.shadow=this.shadow,u.skewX=this.skewX,u.skewY=this.skewY,u.visible=this.visible,u.x=this.x,u.y=this.y,u.compositeOperation=this.compositeOperation,u.snapToPixel=this.snapToPixel,u.filters=this.filters==null?null:this.filters.slice(0),u.mask=this.mask,u.hitArea=this.hitArea,u.cursor=this.cursor,u._bounds=this._bounds,u},v._applyShadow=function(u,c){c=c||Shadow.identity,u.shadowColor=c.color,u.shadowOffsetX=c.offsetX,u.shadowOffsetY=c.offsetY,u.shadowBlur=c.blur},v._tick=function(u){var c=this._listeners;c&&c.tick&&(u.target=null,u.propagationStopped=u.immediatePropagationStopped=!1,this.dispatchEvent(u))},v._testHit=function(u){try{var c=1<u.getImageData(0,0,1,1).data[3]}catch(m){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},v._getBounds=function(u,c){return this._transformBounds(this.getBounds(),u,c)},v._transformBounds=function(u,o,i){if(!u)return u;var B=u.x,z=u.y,l=u.width,f=u.height,h=this._props.matrix,h=i?h.identity():this.getMatrix(h);(B||z)&&h.appendTransform(0,0,1,1,0,0,0,-B,-z),o&&h.prependMatrix(o);var oe=l*h.a,ke=l*h.b,Se=f*h.c,t=f*h.d,r=h.tx,i=h.ty,o=r,l=r,f=i,h=i;return(B=oe+r)<o?o=B:l<B&&(l=B),(B=oe+Se+r)<o?o=B:l<B&&(l=B),(B=Se+r)<o?o=B:l<B&&(l=B),(z=ke+i)<f?f=z:h<z&&(h=z),(z=ke+t+i)<f?f=z:h<z&&(h=z),(z=t+i)<f?f=z:h<z&&(h=z),u.setValues(o,f,l-o,h-f)},v._hasMouseEventListener=function(){for(var u=e._MOUSE_EVENTS,c=0,m=u.length;c<m;c++)if(this.hasEventListener(u[c]))return!0;return!!this.cursor},re.DisplayObject=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var v=re.extend(e,re.DisplayObject);v._getNumChildren=function(){return this.children.length},v.getNumChildren=re.deprecate(v._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(v,{numChildren:{get:v._getNumChildren}})}catch(a){}v.initialize=e,v.isVisible=function(){var a=this.cacheCanvas||this.children.length;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;for(var c=this.children.slice(),m=0,B=c.length;m<B;m++){var z=c[m];z.isVisible()&&(a.save(),z.updateContext(a),z.draw(a),a.restore())}return!0},v.addChild=function(a){if(a==null)return a;var u=arguments.length;if(1<u){for(var c=0;c<u;c++)this.addChild(arguments[c]);return arguments[u-1]}var m=a.parent,B=m===this;return m&&m._removeChildAt(re.indexOf(m.children,a),B),(a.parent=this).children.push(a),B||a.dispatchEvent("added"),a},v.addChildAt=function(a,u){var c=arguments.length,m=arguments[c-1];if(m<0||m>this.children.length)return arguments[c-2];if(2<c){for(var B=0;B<c-1;B++)this.addChildAt(arguments[B],m+B);return arguments[c-2]}var z=a.parent,oe=z===this;return z&&z._removeChildAt(re.indexOf(z.children,a),oe),(a.parent=this).children.splice(u,0,a),oe||a.dispatchEvent("added"),a},v.removeChild=function(a){var u=arguments.length;if(1<u){for(var c=!0,m=0;m<u;m++)c=c&&this.removeChild(arguments[m]);return c}return this._removeChildAt(re.indexOf(this.children,a))},v.removeChildAt=function(a){var u=arguments.length;if(1<u){for(var c=[],m=0;m<u;m++)c[m]=arguments[m];c.sort(function(z,oe){return oe-z});for(var B=!0,m=0;m<u;m++)B=B&&this._removeChildAt(c[m]);return B}return this._removeChildAt(a)},v.removeAllChildren=function(){for(var a=this.children;a.length;)this._removeChildAt(0)},v.getChildAt=function(a){return this.children[a]},v.getChildByName=function(a){for(var u=this.children,c=0,m=u.length;c<m;c++)if(u[c].name==a)return u[c];return null},v.sortChildren=function(a){this.children.sort(a)},v.getChildIndex=function(a){return re.indexOf(this.children,a)},v.swapChildrenAt=function(a,u){var c=this.children,m=c[a],B=c[u];m&&B&&(c[a]=B,c[u]=m)},v.swapChildren=function(a,u){for(var c,m,B=this.children,z=0,oe=B.length;z<oe&&(B[z]==a&&(c=z),B[z]==u&&(m=z),c==null||m==null);z++);z!=oe&&(B[c]=u,B[m]=a)},v.setChildIndex=function(a,u){var c=this.children,m=c.length;if(!(a.parent!=this||u<0||m<=u)){for(var B=0;B<m&&c[B]!=a;B++);B!=m&&B!=u&&(c.splice(B,1),c.splice(u,0,a))}},v.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},v.hitTest=function(a,u){return this.getObjectUnderPoint(a,u)!=null},v.getObjectsUnderPoint=function(a,B,c){var m=[],B=this.localToGlobal(a,B);return this._getObjectsUnderPoint(B.x,B.y,m,0<c,c==1),m},v.getObjectUnderPoint=function(a,u,c){return u=this.localToGlobal(a,u),this._getObjectsUnderPoint(u.x,u.y,null,0<c,c==1)},v.getBounds=function(){return this._getBounds(null,!0)},v.getTransformedBounds=function(){return this._getBounds()},v.clone=function(a){var u=this._cloneProps(new e);return a&&this._cloneChildren(u),u},v.toString=function(){return"[Container (name="+this.name+")]"},v._tick=function(a){if(this.tickChildren)for(var u=this.children.length-1;0<=u;u--){var c=this.children[u];c.tickEnabled&&c._tick&&c._tick(a)}this.DisplayObject__tick(a)},v._cloneChildren=function(a){a.children.length&&a.removeAllChildren();for(var u=a.children,c=0,m=this.children.length;c<m;c++){var B=this.children[c].clone(!0);B.parent=a,u.push(B)}},v._removeChildAt=function(a,u){if(a<0||a>this.children.length-1)return!1;var c=this.children[a];return c&&(c.parent=null),this.children.splice(a,1),u||c.dispatchEvent("removed"),!0},v._getObjectsUnderPoint=function(a,u,c,m,B,z){var oe,ke,Se;if(this.stage&&re.stageTransformable&&(oe=a,ke=u,a=(Se=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(a,u)).x,u=Se.y),!(z=z||0)&&!this._testMask(this,a,u))return null;var t=re.DisplayObject._hitTestContext;B=B||m&&this._hasMouseEventListener();for(var r=this.children,i=r.length-1;0<=i;i--){var o=r[i],l=o.hitArea;if(o.visible&&(l||o.isVisible())&&(!m||o.mouseEnabled)&&(l||this._testMask(o,a,u))){if(!l&&o instanceof e){var f=o._getObjectsUnderPoint(oe!=null?oe:a,ke!=null?ke:u,c,m,B,z+1);if(!c&&f)return m&&!this.mouseChildren?this:f}else if(!m||B||o._hasMouseEventListener()){var h=o.getConcatenatedDisplayProps(o._props),f=h.matrix;if(l&&(f.appendMatrix(l.getMatrix(l._props.matrix)),h.alpha=l.alpha),t.globalAlpha=h.alpha,t.setTransform(f.a,f.b,f.c,f.d,f.tx-a,f.ty-u),(l||o).draw(t),this._testHit(t)){if(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,2,2),!c)return m&&!this.mouseChildren?this:o;c.push(o)}}}}return null},v._testMask=function(B,u,c){var m=B.mask;if(!m||!m.graphics||m.graphics.isEmpty())return!0;var z=this._props.matrix,B=B.parent,z=B?B.getConcatenatedMatrix(z):z.identity();return z=m.getMatrix(m._props.matrix).prependMatrix(z),B=re.DisplayObject._hitTestContext,B.setTransform(z.a,z.b,z.c,z.d,z.tx-u,z.ty-c),m.graphics.drawAsPath(B),B.fillStyle="#000",B.fill(),!!this._testHit(B)&&(B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,2,2),!0)},v._getBounds=function(a,u){var c=this.DisplayObject_getBounds();if(c)return this._transformBounds(c,a,u);var m=this._props.matrix,m=u?m.identity():this.getMatrix(m);a&&m.prependMatrix(a);for(var B=this.children.length,z=null,oe=0;oe<B;oe++){var ke=this.children[oe];ke.visible&&(c=ke._getBounds(m))&&(z?z.extend(c.x,c.y,c.width,c.height):z=c.clone())}return z},re.Container=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.Container_constructor(),this.autoClear=!0,this.canvas=typeof a=="string"?document.getElementById(a):a,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var v=re.extend(e,re.Container);v._get_nextStage=function(){return this._nextStage},v._set_nextStage=function(a){this._nextStage&&(this._nextStage._prevStage=null),a&&(a._prevStage=this),this._nextStage=a};try{Object.defineProperties(v,{nextStage:{get:v._get_nextStage,set:v._set_nextStage}})}catch(a){}v.update=function(a){var u;this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart",!1,!0)!==!1&&(re.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled,u=this.drawRect,(a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),this.autoClear&&(u?a.clearRect(u.x,u.y,u.width,u.height):a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),a.save(),this.drawRect&&(a.beginPath(),a.rect(u.x,u.y,u.width,u.height),a.clip()),this.updateContext(a),this.draw(a,!1),a.restore(),this.dispatchEvent("drawend")))},v.tick=function(a){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var u=new re.Event("tick");if(a)for(var c in a)a.hasOwnProperty(c)&&(u[c]=a[c]);this._tick(u),this.dispatchEvent("tickend")}},v.handleEvent=function(a){a.type=="tick"&&this.update(a)},v.clear=function(){var a;this.canvas&&((a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1))},v.toDataURL=function(a,u){var c,m,B=this.canvas.getContext("2d"),z=this.canvas.width,oe=this.canvas.height;return a&&(c=B.getImageData(0,0,z,oe),m=B.globalCompositeOperation,B.globalCompositeOperation="destination-over",B.fillStyle=a,B.fillRect(0,0,z,oe)),u=this.canvas.toDataURL(u||"image/png"),a&&(B.putImageData(c,0,0),B.globalCompositeOperation=m),u},v.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,a==0&&this._testMouseOver(!0)),a==null)a=20;else if(a<=0)return;var u=this;this._mouseOverIntervalID=setInterval(function(){u._testMouseOver()},1e3/Math.min(50,a))},v.enableDOMEvents=function(a){a==null&&(a=!0);var u,c,m=this._eventListeners;if(!a&&m){for(u in m)(c=m[u]).t.removeEventListener(u,c.f,!1);this._eventListeners=null}else if(a&&!m&&this.canvas){var a=window.addEventListener?window:document,B=this;for(u in(m=this._eventListeners={}).mouseup={t:a,f:function(oe){B._handleMouseUp(oe)}},m.mousemove={t:a,f:function(oe){B._handleMouseMove(oe)}},m.dblclick={t:this.canvas,f:function(oe){B._handleDoubleClick(oe)}},m.mousedown={t:this.canvas,f:function(oe){B._handleMouseDown(oe)}},m)(c=m[u]).t.addEventListener(u,c.f,!1)}},v.clone=function(){throw"Stage cannot be cloned."},v.toString=function(){return"[Stage (name="+this.name+")]"},v._getElementRect=function(a){var u;try{u=a.getBoundingClientRect()}catch(Se){u={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var c=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),m=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),ke=window.getComputedStyle?getComputedStyle(a,null):a.currentStyle,B=parseInt(ke.paddingLeft)+parseInt(ke.borderLeftWidth),z=parseInt(ke.paddingTop)+parseInt(ke.borderTopWidth),oe=parseInt(ke.paddingRight)+parseInt(ke.borderRightWidth),ke=parseInt(ke.paddingBottom)+parseInt(ke.borderBottomWidth);return{left:u.left+c+B,right:u.right+c-oe,top:u.top+m+z,bottom:u.bottom+m-ke}},v._getPointerData=function(a){return this._pointerData[a]||(this._pointerData[a]={x:0,y:0})},v._handleMouseMove=function(a){a=a||window.event,this._handlePointerMove(-1,a,a.pageX,a.pageY)},v._handlePointerMove=function(a,u,c,m,B){var z,oe;this._prevStage&&B===void 0||this.canvas&&(z=this._nextStage,B=(oe=this._getPointerData(a)).inBounds,this._updatePointerPosition(a,u,c,m),(B||oe.inBounds||this.mouseMoveOutside)&&(a===-1&&oe.inBounds==!B&&this._dispatchMouseEvent(this,B?"mouseleave":"mouseenter",!1,a,oe,u),this._dispatchMouseEvent(this,"stagemousemove",!1,a,oe,u),this._dispatchMouseEvent(oe.target,"pressmove",!0,a,oe,u)),z&&z._handlePointerMove(a,u,c,m,null))},v._updatePointerPosition=function(a,u,c,m){var ke=this._getElementRect(this.canvas);c-=ke.left,m-=ke.top;var B=this.canvas.width,z=this.canvas.height;c/=(ke.right-ke.left)/B,m/=(ke.bottom-ke.top)/z;var oe,ke=this._getPointerData(a);re.stageTransformable?(this._mtx=this.getConcatenatedMatrix(this._mtx).invert(),(ke.inBounds=0<=c&&0<=m&&c<=B-1&&m<=z-1)?(ke.x=c,ke.y=m,oe=this._mtx.transformPoint(ke.x,ke.y),ke.x=oe.x,ke.y=oe.y):this.mouseMoveOutside&&(ke.x=c<0?0:B-1<c?B-1:c,ke.y=m<0?0:z-1<m?z-1:m,oe=this._mtx.transformPoint(ke.x,ke.y),ke.x=oe.x,ke.y=oe.y),ke.rawX=c,ke.rawY=m,oe=this._mtx.transformPoint(ke.rawX,ke.rawY),ke.rawX=oe.x,ke.rawY=oe.y):((ke.inBounds=0<=c&&0<=m&&c<=B-1&&m<=z-1)?(ke.x=c,ke.y=m):this.mouseMoveOutside&&(ke.x=c<0?0:B-1<c?B-1:c,ke.y=m<0?0:z-1<m?z-1:m),ke.rawX=c,ke.rawY=m),ke.posEvtObj=u,a!==this._primaryPointerID&&a!==-1||(this.mouseX=ke.x,this.mouseY=ke.y,this.mouseInBounds=ke.inBounds)},v._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},v._handlePointerUp=function(a,u,c,m){var B,z,oe=this._nextStage,ke=this._getPointerData(a);this._prevStage&&m===void 0||(B=null,z=ke.target,m||!z&&!oe||(B=this._getObjectsUnderPoint(ke.x,ke.y,null,!0)),ke.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,a,ke,u,B),ke.down=!1),B==z&&this._dispatchMouseEvent(z,"click",!0,a,ke,u),this._dispatchMouseEvent(z,"pressup",!0,a,ke,u),c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):ke.target=null,oe&&oe._handlePointerUp(a,u,c,m||B&&this))},v._handleMouseDown=function(a){this._handlePointerDown(-1,a,a.pageX,a.pageY)},v._handlePointerDown=function(a,u,c,m,B){this.preventSelection&&u.preventDefault(),this._primaryPointerID!=null&&a!==-1||(this._primaryPointerID=a),m!=null&&this._updatePointerPosition(a,u,c,m);var z=null,oe=this._nextStage,ke=this._getPointerData(a);B||(z=ke.target=this._getObjectsUnderPoint(ke.x,ke.y,null,!0)),ke.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,a,ke,u,z),ke.down=!0),this._dispatchMouseEvent(z,"mousedown",!0,a,ke,u),oe&&oe._handlePointerDown(a,u,c,m,B||z&&this)},v._testMouseOver=function(a,u,c){if(!this._prevStage||u!==void 0){var m=this._nextStage;if(this._mouseOverIntervalID){var B=this._getPointerData(-1);if(B&&(a||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var z,oe,ke=B.posEvtObj,Se=c||ke&&ke.target==this.canvas,t=null,r=-1,i="";!u&&(a||this.mouseInBounds&&Se)&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);for(var o=this._mouseOverTarget||[],l=o[o.length-1],f=this._mouseOverTarget=[],h=t;h;)f.unshift(h),i=i||h.cursor,h=h.parent;for(this.canvas.style.cursor=i,!u&&c&&(c.canvas.style.cursor=i),z=0,oe=f.length;z<oe&&f[z]==o[z];z++)r=z;for(l!=t&&this._dispatchMouseEvent(l,"mouseout",!0,-1,B,ke,t),z=o.length-1;r<z;z--)this._dispatchMouseEvent(o[z],"rollout",!1,-1,B,ke,t);for(z=f.length-1;r<z;z--)this._dispatchMouseEvent(f[z],"rollover",!1,-1,B,ke,l);l!=t&&this._dispatchMouseEvent(t,"mouseover",!0,-1,B,ke,l),m&&m._testMouseOver(a,u||t&&this,c||Se&&this)}}else m&&m._testMouseOver(a,u,c)}},v._handleDoubleClick=function(a,u){var c=null,m=this._nextStage,B=this._getPointerData(-1);u||(c=this._getObjectsUnderPoint(B.x,B.y,null,!0),this._dispatchMouseEvent(c,"dblclick",!0,-1,B,a)),m&&m._handleDoubleClick(a,u||c&&this)},v._dispatchMouseEvent=function(a,u,c,m,B,z,oe){a&&(c||a.hasEventListener(u))&&(oe=new re.MouseEvent(u,c,!1,B.x,B.y,z,m,m===this._primaryPointerID||m===-1,B.rawX,B.rawY,oe),a.dispatchEvent(oe))},re.Stage=re.promote(e,"Container")}(),function(){"use strict";function e(a,u){if(this.Stage_constructor(a),u!==void 0){if(typeof u!="object")throw"Invalid options object";var c=u.premultiply,m=u.transparent,B=u.antialias,z=u.preserveBuffer,oe=u.autoPurge}this.vocalDebug=!1,this._preserveBuffer=z||!1,this._antialias=B||!1,this._transparent=m||!1,this._premultiply=c||!1,this._autoPurge=void 0,this.autoPurge=oe,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._clearColor={r:.5,g:.5,b:.5,a:0},this._maxCardsPerBatch=e.DEFAULT_MAX_BATCH_SIZE,this._activeShader=null,this._vertices=null,this._vertexPositionBuffer=null,this._uvs=null,this._uvPositionBuffer=null,this._indices=null,this._textureIndexBuffer=null,this._alphas=null,this._alphaBuffer=null,this._textureDictionary=[],this._textureIDs={},this._batchTextures=[],this._baseTextures=[],this._batchTextureCount=8,this._lastTextureInsert=-1,this._batchID=0,this._drawID=0,this._slotBlacklist=[],this._isDrawing=0,this._lastTrackedCanvas=0,this.isCacheControlled=!1,this._cacheContainer=new re.Container,this._initializeWebGL()}var v=re.extend(e,re.Stage);e.buildUVRects=function(a,u,c){if(!a||!a._frames)return null;u===void 0&&(u=-1),c===void 0&&(c=!1);for(var m=u!=-1&&c?u:0,B=u!=-1&&c?u+1:a._frames.length,z=m;z<B;z++){var oe,ke=a._frames[z];ke.uvRect||ke.image.width<=0||ke.image.height<=0||(oe=ke.rect,ke.uvRect={t:oe.y/ke.image.height,l:oe.x/ke.image.width,b:(oe.y+oe.height)/ke.image.height,r:(oe.x+oe.width)/ke.image.width})}return a._frames[u!=-1?u:0].uvRect||{t:0,l:0,b:1,r:1}},e.isWebGLActive=function(a){return a&&a instanceof WebGLRenderingContext&&typeof WebGLRenderingContext<"u"},e.VERTEX_PROPERTY_COUNT=6,e.INDICIES_PER_CARD=6,e.DEFAULT_MAX_BATCH_SIZE=1e4,e.WEBGL_MAX_INDEX_NUM=Math.pow(2,16),e.UV_RECT={t:0,l:0,b:1,r:1};try{e.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]),e.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),e.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch(a){}e.REGULAR_VERTEX_HEADER=(e.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",e.REGULAR_FRAGMENT_HEADER=e.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",e.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",e.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",e.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",e.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",e.PARTICLE_VERTEX_BODY=e.REGULAR_VERTEX_BODY,e.PARTICLE_FRAGMENT_BODY=e.REGULAR_FRAGMENT_BODY,e.COVER_VERTEX_HEADER=(e.COVER_VARYING_HEADER="precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;",e.COVER_FRAGMENT_HEADER=e.COVER_VARYING_HEADER+"uniform sampler2D uSampler;",e.COVER_VERTEX_BODY="void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}",e.COVER_FRAGMENT_BODY="void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}",v._get_isWebGL=function(){return!!this._webGLContext},v._set_autoPurge=function(a){(a=isNaN(a)?1200:a)!=-1&&(a=a<10?10:a),this._autoPurge=a},v._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(v,{isWebGL:{get:v._get_isWebGL},autoPurge:{get:v._get_autoPurge,set:v._set_autoPurge}})}catch(a){}v._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var a={depth:!1,alpha:this._transparent,stencil:!0,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer},a=this._webGLContext=this._fetchWebGLContext(this.canvas,a);if(!a)return null;this.updateSimultaneousTextureCount(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),this._maxTextureSlots=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._createBuffers(a),this._initTextures(a),a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply),this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else this._webGLContext=null;return this._webGLContext},v.update=function(a){this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext?(this._batchDraw(this,this._webGLContext),this._autoPurge==-1||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)):((a=this.canvas.getContext("2d")).save(),this.updateContext(a),this.draw(a,!1),a.restore()),this.dispatchEvent("drawend"))},v.clear=function(){var a,u,c;this.canvas&&(e.isWebGLActive(this._webGLContext)?(a=this._webGLContext,u=this._clearColor,c=this._transparent?u.a:1,this._webGLContext.clearColor(u.r*c,u.g*c,u.b*c,c),a.clear(a.COLOR_BUFFER_BIT),this._webGLContext.clearColor(u.r,u.g,u.b,u.a)):this.Stage_clear())},v.draw=function(a,u){if(a===this._webGLContext&&e.isWebGLActive(this._webGLContext)){var c=this._webGLContext;return this._batchDraw(this,c,u),!0}return this.Stage_draw(a,u)},v.cacheDraw=function(a,u,c){if(e.isWebGLActive(this._webGLContext)){var m=this._webGLContext;return this._cacheDraw(m,a,u,c),!0}return!1},v.protectTextureSlot=function(a,u){if(a>this._maxTextureSlots||a<0)throw"Slot outside of acceptable range";this._slotBlacklist[a]=!!u},v.getTargetRenderTexture=function(a,u,c){var m=!1,B=this._webGLContext;if(a.__lastRT!==void 0&&a.__lastRT===a.__rtA&&(m=!0),!(B=m?(a.__rtB===void 0?a.__rtB=this.getRenderBufferTexture(u,c):(u==a.__rtB._width&&c==a.__rtB._height||this.resizeTexture(a.__rtB,u,c),this.setTextureParams(B)),a.__rtB):(a.__rtA===void 0?a.__rtA=this.getRenderBufferTexture(u,c):(u==a.__rtA._width&&c==a.__rtA._height||this.resizeTexture(a.__rtA,u,c),this.setTextureParams(B)),a.__rtA)))throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances";return a.__lastRT=B},v.releaseTexture=function(a){var u,c;if(a){if(a.children)for(u=0,c=a.children.length;u<c;u++)this.releaseTexture(a.children[u]);a.cacheCanvas&&a.uncache();var m=void 0;if(a._storeID!==void 0){if(a===this._textureDictionary[a._storeID])return this._killTextureObject(a),void(a._storeID=void 0);m=a}else if(a._webGLRenderStyle===2)m=a.image;else if(a._webGLRenderStyle===1){for(u=0,c=a.spriteSheet._images.length;u<c;u++)this.releaseTexture(a.spriteSheet._images[u]);return}m!==void 0?(this._killTextureObject(this._textureDictionary[m._storeID]),m._storeID=void 0):this.vocalDebug&&console.log("No associated texture found on release")}},v.purgeTextures=function(a){a==null&&(a=100);for(var u=this._textureDictionary,c=u.length,m=0;m<c;m++){var B=u[m];B&&B._drawID+a<=this._drawID&&this._killTextureObject(B)}},v.updateSimultaneousTextureCount=function(a){var u=this._webGLContext,c=!1;for((a<1||isNaN(a))&&(a=1),this._batchTextureCount=a;!c;)try{this._activeShader=this._fetchShaderProgram(u),c=!0}catch(m){if(this._batchTextureCount==1)throw"Cannot compile shader "+m;this._batchTextureCount-=4,this._batchTextureCount<1&&(this._batchTextureCount=1),this.vocalDebug&&console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}},v.updateViewport=function(a,u){this._viewportWidth=0|a,this._viewportHeight=0|u,u=this._webGLContext,u&&(u.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,.1,0]),this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._projectionMatrixFlip.set(this._projectionMatrix),this._projectionMatrixFlip[5]*=-1,this._projectionMatrixFlip[13]*=-1)},v.getFilterShader=function(a){a=a||this;var u=this._webGLContext,c=this._activeShader;if(a._builtShader)c=a._builtShader,a.shaderParamSetup&&(u.useProgram(c),a.shaderParamSetup(u,this,c));else try{c=this._fetchShaderProgram(u,"filter",a.VTX_SHADER_BODY,a.FRAG_SHADER_BODY,a.shaderParamSetup&&a.shaderParamSetup.bind(a)),(a._builtShader=c)._name=a.toString()}catch(m){console&&console.log("SHADER SWITCH FAILURE",m)}return c},v.getBaseTexture=function(B,z){var c=Math.ceil(0<B?B:1)||1,m=Math.ceil(0<z?z:1)||1,B=this._webGLContext,z=B.createTexture();return this.resizeTexture(z,c,m),this.setTextureParams(B,!1),z},v.resizeTexture=function(a,u,c){var m=this._webGLContext;m.bindTexture(m.TEXTURE_2D,a),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,u,c,0,m.RGBA,m.UNSIGNED_BYTE,null),a.width=u,a.height=c},v.getRenderBufferTexture=function(a,u){var c=this._webGLContext,m=this.getBaseTexture(a,u);if(!m)return null;var B=c.createFramebuffer();return B?(m.width=a,m.height=u,c.bindFramebuffer(c.FRAMEBUFFER,B),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,m,0),(B._renderTexture=m)._frameBuffer=B,m._storeID=this._textureDictionary.length,this._textureDictionary[m._storeID]=m,c.bindFramebuffer(c.FRAMEBUFFER,null),m):null},v.setTextureParams=function(a,u){u&&this._antialias?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},v.setClearColor=function(a){var u,c,m,B,z;typeof a=="string"?a.indexOf("#")==0?(a.length==4&&(a="#"+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)+a.charAt(3)+a.charAt(3)),u=+("0x"+a.slice(1,3))/255,c=+("0x"+a.slice(3,5))/255,m=+("0x"+a.slice(5,7))/255,B=+("0x"+a.slice(7,9))/255):a.indexOf("rgba(")==0&&(z=a.slice(5,-1).split(","),u=Number(z[0])/255,c=Number(z[1])/255,m=Number(z[2])/255,B=Number(z[3])):(u=((4278190080&a)>>>24)/255,c=((16711680&a)>>>16)/255,m=((65280&a)>>>8)/255,B=(255&a)/255),this._clearColor.r=u||0,this._clearColor.g=c||0,this._clearColor.b=m||0,this._clearColor.a=B||0,this._webGLContext&&this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)},v.toString=function(){return"[StageGL (name="+this.name+")]"},v._fetchWebGLContext=function(a,u){var c,m;try{c=a.getContext("webgl",u)||a.getContext("experimental-webgl",u)}catch(B){}return c?(c.viewportWidth=a.width,c.viewportHeight=a.height):(m="Could not initialize WebGL",console.error?console.error(m):console.log(m)),c},v._fetchShaderProgram=function(a,u,c,m,B){var z,oe;switch(a.useProgram(null),u){case"filter":oe=e.COVER_VERTEX_HEADER+(c||e.COVER_VERTEX_BODY),z=e.COVER_FRAGMENT_HEADER+(m||e.COVER_FRAGMENT_BODY);break;case"particle":oe=e.REGULAR_VERTEX_HEADER+e.PARTICLE_VERTEX_BODY,z=e.REGULAR_FRAGMENT_HEADER+e.PARTICLE_FRAGMENT_BODY;break;case"override":oe=e.REGULAR_VERTEX_HEADER+(c||e.REGULAR_VERTEX_BODY),z=e.REGULAR_FRAGMENT_HEADER+(m||e.REGULAR_FRAGMENT_BODY);break;case"regular":default:oe=e.REGULAR_VERTEX_HEADER+e.REGULAR_VERTEX_BODY,z=e.REGULAR_FRAGMENT_HEADER+e.REGULAR_FRAGMENT_BODY}var ke=this._createShader(a,a.VERTEX_SHADER,oe),Se=this._createShader(a,a.FRAGMENT_SHADER,z),t=a.createProgram();if(a.attachShader(t,ke),a.attachShader(t,Se),a.linkProgram(t),t._type=u,!a.getProgramParameter(t,a.LINK_STATUS))throw a.useProgram(this._activeShader),a.getProgramInfoLog(t);switch(a.useProgram(t),u){case"filter":t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1i(t.samplerUniform,0),t.uprightUniform=a.getUniformLocation(t,"uUpright"),a.uniform1f(t.uprightUniform,0),B&&B(a,this,t);break;case"override":case"particle":case"regular":default:t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.textureIndexAttribute=a.getAttribLocation(t,"textureIndex"),a.enableVertexAttribArray(t.textureIndexAttribute),t.alphaAttribute=a.getAttribLocation(t,"objectAlpha"),a.enableVertexAttribArray(t.alphaAttribute);for(var r=[],i=0;i<this._batchTextureCount;i++)r[i]=i;t.samplerData=r,t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1iv(t.samplerUniform,r),t.pMatrixUniform=a.getUniformLocation(t,"pMatrix")}return a.useProgram(this._activeShader),t},v._createShader=function(a,u,c){c=c.replace(/{{count}}/g,this._batchTextureCount);for(var m="",B=1;B<this._batchTextureCount;B++)m+="} else if (indexPicker <= "+B+".5) { color = texture2D(uSampler["+B+"], vTextureCoord);";if(c=(c=c.replace(/{{alternates}}/g,m)).replace(/{{fragColor}}/g,this._premultiply?e.REGULAR_FRAG_COLOR_PREMULTIPLY:e.REGULAR_FRAG_COLOR_NORMAL),u=a.createShader(u),a.shaderSource(u,c),a.compileShader(u),!a.getShaderParameter(u,a.COMPILE_STATUS))throw a.getShaderInfoLog(u);return u},v._createBuffers=function(a){var u,c=this._maxCardsPerBatch*e.INDICIES_PER_CARD,m=this._vertexPositionBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,m),u=2;for(var B=this._vertices=new Float32Array(c*u),z=0,oe=B.length;z<oe;z+=u)B[z]=B[z+1]=0;a.bufferData(a.ARRAY_BUFFER,B,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c,m=this._uvPositionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=2;var ke=this._uvs=new Float32Array(c*u);for(z=0,oe=ke.length;z<oe;z+=u)ke[z]=ke[z+1]=0;a.bufferData(a.ARRAY_BUFFER,ke,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c,m=this._textureIndexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=1;var Se=this._indices=new Float32Array(c*u);for(z=0,oe=Se.length;z<oe;z++)Se[z]=0;a.bufferData(a.ARRAY_BUFFER,Se,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c,m=this._alphaBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=1;var t=this._alphas=new Float32Array(c*u);for(z=0,oe=t.length;z<oe;z++)t[z]=1;a.bufferData(a.ARRAY_BUFFER,t,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c},v._initTextures=function(){this._lastTextureInsert=-1,this._textureDictionary=[],this._textureIDs={},this._baseTextures=[],this._batchTextures=[];for(var a=0;a<this._batchTextureCount;a++){var u=this.getBaseTexture();if(!(this._baseTextures[a]=this._batchTextures[a]=u))throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}},v._loadTextureImage=function(a,u){var c=u.src;c||(u._isCanvas=!0,c=u.src="canvas_"+this._lastTrackedCanvas++);var m=this._textureIDs[c];return m===void 0&&(m=this._textureIDs[c]=this._textureDictionary.length),this._textureDictionary[m]===void 0&&(this._textureDictionary[m]=this.getBaseTexture()),c=this._textureDictionary[m],c?(c._batchID=this._batchID,c._storeID=m,c._imageData=u,this._insertTextureInBatch(a,c),u._storeID=m,u.complete||u.naturalWidth||u._isCanvas?this._updateTextureImageData(a,u):u.addEventListener("load",this._updateTextureImageData.bind(this,a,u))):(u="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances",console.error&&console.error(u)||console.log(u),(c=this._baseTextures[0])._batchID=this._batchID,c._storeID=-1,c._imageData=c,this._insertTextureInBatch(a,c)),c},v._updateTextureImageData=function(a,u){var c=u.width&u.width-1||u.height&u.height-1,m=this._textureDictionary[u._storeID];a.activeTexture(a.TEXTURE0+m._activeIndex),a.bindTexture(a.TEXTURE_2D,m),m.isPOT=!c,this.setTextureParams(a,m.isPOT);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,u)}catch(z){var B="\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins";console.error?(console.error(B),console.error(z)):console&&(console.log(B),console.log(z))}u._invalid=!1,m._w=u.width,m._h=u.height,this.vocalDebug&&(c&&console.warn("NPOT(Non Power of Two) Texture: "+u.src),(u.width>a.MAX_TEXTURE_SIZE||u.height>a.MAX_TEXTURE_SIZE)&&console&&console.error("Oversized Texture: "+u.width+"x"+u.height+" vs "+a.MAX_TEXTURE_SIZE+"max"))},v._insertTextureInBatch=function(a,u){if(this._batchTextures[u._activeIndex]!==u){var c=-1,m=(this._lastTextureInsert+1)%this._batchTextureCount,B=m;do if(this._batchTextures[B]._batchID!=this._batchID&&!this._slotBlacklist[B]){c=B;break}while((B=(B+1)%this._batchTextureCount)!==m);c===-1&&(this.batchReason="textureOverflow",this._drawBuffers(a),this.batchCardCount=0,c=m),(this._batchTextures[c]=u)._activeIndex=c,(z=u._imageData)&&z._invalid&&u._drawID!==void 0?this._updateTextureImageData(a,z):(a.activeTexture(a.TEXTURE0+c),a.bindTexture(a.TEXTURE_2D,u),this.setTextureParams(a)),this._lastTextureInsert=c}else{var z=u._imageData;u._storeID!=null&&z&&z._invalid&&this._updateTextureImageData(a,z)}u._drawID=this._drawID,u._batchID=this._batchID},v._killTextureObject=function(a){if(a){var u=this._webGLContext;if(a._storeID!==void 0&&0<=a._storeID){for(var c in this._textureDictionary[a._storeID]=void 0,this._textureIDs)this._textureIDs[c]==a._storeID&&delete this._textureIDs[c];a._imageData&&(a._imageData._storeID=void 0),a._imageData=a._storeID=void 0}a._activeIndex!==void 0&&this._batchTextures[a._activeIndex]===a&&(this._batchTextures[a._activeIndex]=this._baseTextures[a._activeIndex]);try{a._frameBuffer&&u.deleteFramebuffer(a._frameBuffer),a._frameBuffer=void 0}catch(m){this.vocalDebug&&console.log(m)}try{u.deleteTexture(a)}catch(m){this.vocalDebug&&console.log(m)}}},v._backupBatchTextures=function(a,u){var c=this._webGLContext;this._backupTextures||(this._backupTextures=[]),u===void 0&&(u=this._backupTextures);for(var m=0;m<this._batchTextureCount;m++)c.activeTexture(c.TEXTURE0+m),a?this._batchTextures[m]=u[m]:(u[m]=this._batchTextures[m],this._batchTextures[m]=this._baseTextures[m]),c.bindTexture(c.TEXTURE_2D,this._batchTextures[m]),this.setTextureParams(c,this._batchTextures[m].isPOT);a&&u===this._backupTextures&&(this._backupTextures=[])},v._batchDraw=function(a,u,c){0<this._isDrawing&&this._drawBuffers(u),this._isDrawing++,this._drawID++,this.batchCardCount=0,this.depth=0,this._appendToBatchGroup(a,u,new re.Matrix2D,this.alpha,c),this.batchReason="drawFinish",this._drawBuffers(u),this._isDrawing--},v._cacheDraw=function(a,u,c,m){var B=this._activeShader,z=this._slotBlacklist,oe=this._maxTextureSlots-1,ke=this._viewportWidth,Se=this._viewportHeight;this.protectTextureSlot(oe,!0);var t=u.getMatrix();(t=t.clone()).scale(1/m.scale,1/m.scale),(t=t.invert()).translate(-m.offX/m.scale*u.scaleX,-m.offY/m.scale*u.scaleY);var r=this._cacheContainer;r.children=[u],r.transformMatrix=t,this._backupBatchTextures(!1),c&&c.length?this._drawFilters(u,c,m):this.isCacheControlled?(a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0)):(a.activeTexture(a.TEXTURE0+oe),u.cacheCanvas=this.getTargetRenderTexture(u,m._drawWidth,m._drawHeight),u=u.cacheCanvas,a.bindFramebuffer(a.FRAMEBUFFER,u._frameBuffer),this.updateViewport(m._drawWidth,m._drawHeight),this._projectionMatrix=this._projectionMatrixFlip,a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0),a.bindFramebuffer(a.FRAMEBUFFER,null),this.updateViewport(ke,Se)),this._backupBatchTextures(!0),this.protectTextureSlot(oe,!1),this._activeShader=B,this._slotBlacklist=z},v._drawFilters=function(a,u,c){var m,B=this._webGLContext,z=this._maxTextureSlots-1,oe=this._viewportWidth,ke=this._viewportHeight,Se=this._cacheContainer,t=u.length;B.activeTexture(B.TEXTURE0+z),m=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,m._frameBuffer),this.updateViewport(c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._batchDraw(Se,B,!0),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,m),this.setTextureParams(B);for(var r=!1,i=0,o=u[i];this._activeShader=this.getFilterShader(o),this._activeShader&&(B.activeTexture(B.TEXTURE0+z),m=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,m._frameBuffer),B.viewport(0,0,c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,r),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,m),this.setTextureParams(B),(1<t||u[0]._multiPass)&&(r=!r),o=o._multiPass!==null?o._multiPass:u[++i]),o;);this.isCacheControlled?(B.bindFramebuffer(B.FRAMEBUFFER,null),this.updateViewport(oe,ke),this._activeShader=this.getFilterShader(this),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,r)):(r&&(B.activeTexture(B.TEXTURE0+z),m=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,m._frameBuffer),this._activeShader=this.getFilterShader(this),B.viewport(0,0,c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,!r)),B.bindFramebuffer(B.FRAMEBUFFER,null),this.updateViewport(oe,ke),a.cacheCanvas=m)},v._appendToBatchGroup=function(a,u,c,m,B){a._glMtx||(a._glMtx=new re.Matrix2D);var z,oe,ke,Se,t=a._glMtx;t.copy(c),a.transformMatrix?t.appendMatrix(a.transformMatrix):t.appendTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.regX,a.regY);for(var r=a.children.length,i=0;i<r;i++){var o=a.children[i];if(o.visible&&m)if(o.cacheCanvas&&!B||(o._updateState&&o._updateState(),!o.children)){this.batchCardCount+1>this._maxCardsPerBatch&&(this.batchReason="vertexOverflow",this._drawBuffers(u),this.batchCardCount=0),o._glMtx||(o._glMtx=new re.Matrix2D);var l,f,h,g,_=o._glMtx;_.copy(t),o.transformMatrix?_.appendMatrix(o.transformMatrix):_.appendTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.skewX,o.skewY,o.regX,o.regY);var P=o.cacheCanvas&&!B;if(o._webGLRenderStyle===2||P)l=!B&&o.cacheCanvas||o.image;else{if(o._webGLRenderStyle!==1||(f=o.spriteSheet.getFrame(o.currentFrame))===null)continue;l=f.image}var C=this._uvs,T=this._vertices,N=this._indices,O=this._alphas;if(l){if(l._storeID===void 0)h=this._loadTextureImage(u,l),this._insertTextureInBatch(u,h);else{if(!(h=this._textureDictionary[l._storeID])){this.vocalDebug&&console.log("Texture should not be looked up while not being stored.");continue}h._batchID!==this._batchID&&this._insertTextureInBatch(u,h)}var S,k=h._activeIndex;o._webGLRenderStyle===2||P?Se=!P&&o.sourceRect?(o._uvRect||(o._uvRect={}),g=o.sourceRect,(S=o._uvRect).t=g.y/l.height,S.l=g.x/l.width,S.b=(g.y+g.height)/l.height,S.r=(g.x+g.width)/l.width,oe=z=0,ke=g.width+z,g.height+oe):(S=e.UV_RECT,P?(z=(g=o.bitmapCache).x+g._filterOffX/g.scale,oe=g.y+g._filterOffY/g.scale,ke=g._drawWidth/g.scale+z,g._drawHeight/g.scale+oe):(oe=z=0,ke=l.width+z,l.height+oe)):o._webGLRenderStyle===1&&(x=f.rect,S=(S=f.uvRect)||e.buildUVRects(o.spriteSheet,o.currentFrame,!1),z=-f.regX,oe=-f.regY,ke=x.width-f.regX,Se=x.height-f.regY);var P=this.batchCardCount*e.INDICIES_PER_CARD,x=2*P;T[x]=z*_.a+oe*_.c+_.tx,T[1+x]=z*_.b+oe*_.d+_.ty,T[2+x]=z*_.a+Se*_.c+_.tx,T[3+x]=z*_.b+Se*_.d+_.ty,T[4+x]=ke*_.a+oe*_.c+_.tx,T[5+x]=ke*_.b+oe*_.d+_.ty,T[6+x]=T[2+x],T[7+x]=T[3+x],T[8+x]=T[4+x],T[9+x]=T[5+x],T[10+x]=ke*_.a+Se*_.c+_.tx,T[11+x]=ke*_.b+Se*_.d+_.ty,C[x]=S.l,C[1+x]=S.t,C[2+x]=S.l,C[3+x]=S.b,C[4+x]=S.r,C[5+x]=S.t,C[6+x]=S.l,C[7+x]=S.b,C[8+x]=S.r,C[9+x]=S.t,C[10+x]=S.r,C[11+x]=S.b,N[P]=N[1+P]=N[2+P]=N[3+P]=N[4+P]=N[5+P]=k,O[P]=O[1+P]=O[2+P]=O[3+P]=O[4+P]=O[5+P]=o.alpha*m,this.batchCardCount++}}else this._appendToBatchGroup(o,u,t,o.alpha*m)}},v._drawBuffers=function(a){if(!(this.batchCardCount<=0)){this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason);var u=this._activeShader,c=this._vertexPositionBuffer,m=this._textureIndexBuffer,B=this._uvPositionBuffer,z=this._alphaBuffer;a.useProgram(u),a.bindBuffer(a.ARRAY_BUFFER,c),a.vertexAttribPointer(u.vertexPositionAttribute,c.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._vertices),a.bindBuffer(a.ARRAY_BUFFER,m),a.vertexAttribPointer(u.textureIndexAttribute,m.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._indices),a.bindBuffer(a.ARRAY_BUFFER,B),a.vertexAttribPointer(u.uvPositionAttribute,B.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._uvs),a.bindBuffer(a.ARRAY_BUFFER,z),a.vertexAttribPointer(u.alphaAttribute,z.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._alphas),a.uniformMatrix4fv(u.pMatrixUniform,a.FALSE,this._projectionMatrix);for(var oe=0;oe<this._batchTextureCount;oe++){var ke=this._batchTextures[oe];a.activeTexture(a.TEXTURE0+oe),a.bindTexture(a.TEXTURE_2D,ke),this.setTextureParams(a,ke.isPOT)}a.drawArrays(a.TRIANGLES,0,this.batchCardCount*e.INDICIES_PER_CARD),this._batchID++}},v._drawCover=function(a,u){0<this._isDrawing&&this._drawBuffers(a),this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover");var c=this._activeShader,m=this._vertexPositionBuffer,B=this._uvPositionBuffer;a.clear(a.COLOR_BUFFER_BIT),a.useProgram(c),a.bindBuffer(a.ARRAY_BUFFER,m),a.vertexAttribPointer(c.vertexPositionAttribute,m.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,e.COVER_VERT),a.bindBuffer(a.ARRAY_BUFFER,B),a.vertexAttribPointer(c.uvPositionAttribute,B.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,u?e.COVER_UV_FLIP:e.COVER_UV),a.uniform1i(c.samplerUniform,0),a.uniform1f(c.uprightUniform,u?0:1),a.drawArrays(a.TRIANGLES,0,e.INDICIES_PER_CARD)},re.StageGL=re.promote(e,"Stage")}(),function(){function e(a){this.DisplayObject_constructor(),typeof a=="string"?(this.image=document.createElement("img"),this.image.src=a):this.image=a,this.sourceRect=null,this._webGLRenderStyle=re.DisplayObject._StageGL_BITMAP}var v=re.extend(e,re.DisplayObject);v.initialize=e,v.isVisible=function(){var a=this.image,a=this.cacheCanvas||a&&(a.naturalWidth||a.getContext||2<=a.readyState);return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;var c,m,B,z,oe,ke=this.image,Se=this.sourceRect;return ke.getImage&&(ke=ke.getImage()),ke&&(Se?(c=Se.x,m=Se.y,B=c+Se.width,z=m+Se.height,c<(u=oe=0)&&(oe-=c,c=0),(Se=ke.width)<B&&(B=Se),m<0&&(u-=m,m=0),(Se=ke.height)<z&&(z=Se),a.drawImage(ke,c,m,B-c,z-m,oe,u,B-c,z-m)):a.drawImage(ke,0,0)),!0},v.cache=function(a,u,c,m,B,z){this.bitmapCache||(this.bitmapCache=new re.BitmapCache),this.bitmapCache.define(this,a,u,c,m,B,z)},v.updateCache=function(a){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(a)},v.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},v.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},v.getBounds=function(){var u=this.DisplayObject_getBounds();if(u)return u;var a=this.image,u=this.sourceRect||a;return a&&(a.naturalWidth||a.getContext||2<=a.readyState)?this._rectangle.setValues(0,0,u.width,u.height):null},v.clone=function(a){var u=this.image;return u&&a&&(u=u.cloneNode()),u=new e(u),this.sourceRect&&(u.sourceRect=this.sourceRect.clone()),this._cloneProps(u),u},v.toString=function(){return"[Bitmap (name="+this.name+")]"},re.Bitmap=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=a,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=re.DisplayObject._StageGL_SPRITE,u!=null&&this.gotoAndPlay(u)}var v=re.extend(e,re.DisplayObject);v.initialize=e,v.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(0|this._currentFrame);return c?(u=c.rect,u.width&&u.height&&a.drawImage(c.image,u.x,u.y,u.width,u.height,-c.regX,-c.regY,u.width,u.height),!0):!1},v.play=function(){this.paused=!1},v.stop=function(){this.paused=!0},v.gotoAndPlay=function(a){this.paused=!1,this._skipAdvance=!0,this._goto(a)},v.gotoAndStop=function(a){this.paused=!0,this._goto(a)},v.advance=function(a){var u=this.framerate||this.spriteSheet.framerate,u=u&&a!=null?a/(1e3/u):1;this._normalizeFrame(u)},v.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},v.clone=function(){return this._cloneProps(new e(this.spriteSheet))},v.toString=function(){return"[Sprite (name="+this.name+")]"},v._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.currentAnimationFrame=this.currentAnimationFrame,a.framerate=this.framerate,a._animation=this._animation,a._currentFrame=this._currentFrame,a._skipAdvance=this._skipAdvance,a},v._tick=function(a){this.paused||(this._skipAdvance||this.advance(a&&a.delta),this._skipAdvance=!1),this.DisplayObject__tick(a)},v._normalizeFrame=function(a){a=a||0;var u=this._animation,c=this.paused,m=this._currentFrame;if(u){var B,z=u.speed||1,oe=this.currentAnimationFrame;if((B=u.frames.length)<=oe+a*z){var ke=u.next;if(this._dispatchAnimationEnd(u,m,c,ke,B-1))return;if(ke)return this._goto(ke,a-(B-oe)/z);this.paused=!0,oe=u.frames.length-1}else oe+=a*z;this.currentAnimationFrame=oe,this._currentFrame=u.frames[0|oe]}else if(m=this._currentFrame+=a,B=this.spriteSheet.getNumFrames(),B<=m&&0<B&&!this._dispatchAnimationEnd(u,m,c,B-1)&&(this._currentFrame-=B)>=B)return this._normalizeFrame();m=0|this._currentFrame,this.currentFrame!=m&&(this.currentFrame=m,this.dispatchEvent("change"))},v._dispatchAnimationEnd=function(a,u,c,m,B){var z,oe=a?a.name:null;return this.hasEventListener("animationend")&&((z=new re.Event("animationend")).name=oe,z.next=m,this.dispatchEvent(z)),u=this._animation!=a||this._currentFrame!=u,u||c||!this.paused||(this.currentAnimationFrame=B,u=!0),u},v._goto=function(a,u){var c;this.currentAnimationFrame=0,isNaN(a)?(c=this.spriteSheet.getAnimation(a))&&(this._animation=c,this.currentAnimation=a,this._normalizeFrame(u)):(this.currentAnimation=this._animation=null,this._currentFrame=a,this._normalizeFrame())},re.Sprite=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),this.graphics=a||new re.Graphics}var v=re.extend(e,re.DisplayObject);v.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){return this.DisplayObject_draw(a,u)||this.graphics.draw(a,this),!0},v.clone=function(a){return a=a&&this.graphics?this.graphics.clone():this.graphics,this._cloneProps(new e(a))},v.toString=function(){return"[Shape (name="+this.name+")]"},re.Shape=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(u,c,m){this.DisplayObject_constructor(),this.text=u,this.font=c,this.color=m,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var v=re.extend(e,re.DisplayObject),a=re.createCanvas?re.createCanvas():document.createElement("canvas");a.getContext&&(e._workingContext=a.getContext("2d"),a.width=a.height=1),e.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},v.isVisible=function(){var u=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&u)},v.draw=function(u,c){return this.DisplayObject_draw(u,c)?!0:(c=this.color||"#000",this.outline?(u.strokeStyle=c,u.lineWidth=+this.outline):u.fillStyle=c,this._drawText(this._prepContext(u)),!0)},v.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},v.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},v.getMeasuredHeight=function(){return this._drawText(null,{}).height},v.getBounds=function(){var B=this.DisplayObject_getBounds();if(B)return B;if(this.text==null||this.text==="")return null;var u=this._drawText(null,{}),c=this.maxWidth&&this.maxWidth<u.width?this.maxWidth:u.width,m=c*e.H_OFFSETS[this.textAlign||"left"],B=(this.lineHeight||this.getMeasuredLineHeight())*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(m,B,c,u.height)},v.getMetrics=function(){var u={lines:[]};return u.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),u.vOffset=u.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,u,u.lines)},v.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},v.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},v._cloneProps=function(u){return this.DisplayObject__cloneProps(u),u.textAlign=this.textAlign,u.textBaseline=this.textBaseline,u.maxWidth=this.maxWidth,u.outline=this.outline,u.lineHeight=this.lineHeight,u.lineWidth=this.lineWidth,u},v._prepContext=function(u){return u.font=this.font||"10px sans-serif",u.textAlign=this.textAlign||"left",u.textBaseline=this.textBaseline||"top",u.lineJoin="miter",u.miterLimit=2.5,u},v._drawText=function(u,c,m){var B=!!u;B||((u=e._workingContext).save(),this._prepContext(u));for(var z=this.lineHeight||this.getMeasuredLineHeight(),oe=0,ke=0,Se=String(this.text).split(/(?:\r\n|\r|\n)/),t=0,r=Se.length;t<r;t++){var i=Se[t],o=null;if(this.lineWidth!=null&&(o=u.measureText(i).width)>this.lineWidth)for(var l=i.split(/(\s)/),i=l[0],o=u.measureText(i).width,f=1,h=l.length;f<h;f+=2){var g=u.measureText(l[f]+l[f+1]).width;o+g>this.lineWidth?(B&&this._drawTextLine(u,i,ke*z),m&&m.push(i),oe<o&&(oe=o),i=l[f+1],o=u.measureText(i).width,ke++):(i+=l[f]+l[f+1],o+=g)}B&&this._drawTextLine(u,i,ke*z),m&&m.push(i),c&&o==null&&(o=u.measureText(i).width),oe<o&&(oe=o),ke++}return c&&(c.width=oe,c.height=ke*z),B||u.restore(),c},v._drawTextLine=function(u,c,m){this.outline?u.strokeText(c,0,m,this.maxWidth||65535):u.fillText(c,0,m,this.maxWidth||65535)},v._getMeasuredWidth=function(u){var c=e._workingContext;return c.save(),u=this._prepContext(c).measureText(u).width,c.restore(),u},re.Text=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.Container_constructor(),this.text=a||"",this.spriteSheet=u,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}var v=re.extend(e,re.Container);e.maxPoolSize=100,e._spritePool=[],v.draw=function(a,u){this.DisplayObject_draw(a,u)||(this._updateState(),this.Container_draw(a,u))},v.getBounds=function(){return this._updateText(),this.Container_getBounds()},v.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&0<this.alpha&&this.scaleX!==0&&this.scaleY!==0&&a)},v.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},v.addChild=v.addChildAt=v.removeChild=v.removeChildAt=v.removeAllChildren=function(){},v._updateState=function(){this._updateText()},v._cloneProps=function(a){return this.Container__cloneProps(a),a.lineHeight=this.lineHeight,a.letterSpacing=this.letterSpacing,a.spaceWidth=this.spaceWidth,a},v._getFrameIndex=function(a,u){var c,m=u.getAnimation(a);return m||(a!=(c=a.toUpperCase())||a!=(c=a.toLowerCase())||(c=null),c&&(m=u.getAnimation(c))),m&&m.frames[0]},v._getFrame=function(a,u){return a=this._getFrameIndex(a,u),a==null?a:u.getFrame(a)},v._getLineHeight=function(a){return a=this._getFrame("1",a)||this._getFrame("T",a)||this._getFrame("L",a)||a.getFrame(0),a?a.rect.height:1},v._getSpaceWidth=function(a){return a=this._getFrame("1",a)||this._getFrame("l",a)||this._getFrame("e",a)||this._getFrame("a",a)||a.getFrame(0),a?a.rect.width:1},v._updateText=function(){var a,u,c=0,m=0,B=this._oldProps,z=!1,oe=this.spaceWidth,ke=this.lineHeight,Se=this.spriteSheet,t=e._spritePool,r=this.children,i=0,o=r.length;for(u in B)B[u]!=this[u]&&(B[u]=this[u],z=!0);if(z){var l=!!this._getFrame(" ",Se);l||oe||(oe=this._getSpaceWidth(Se)),ke=ke||this._getLineHeight(Se);for(var f=0,h=this.text.length;f<h;f++){var g,_=this.text.charAt(f);_!=" "||l?_!="\n"&&_!="\r"?(g=this._getFrameIndex(_,Se))!=null&&(i<o?a=r[i]:(r.push(a=t.length?t.pop():new re.Sprite),a.parent=this,o++),a.spriteSheet=Se,a.gotoAndStop(g),a.x=c,a.y=m,i++,c+=a.getBounds().width+this.letterSpacing):(_=="\r"&&this.text.charAt(f+1)=="\n"&&f++,c=0,m+=ke):c+=oe}for(;i<o;)t.push(a=r.pop()),a.parent=null,o--;t.length>e.maxPoolSize&&(t.length=e.maxPoolSize)}},re.BitmapText=re.promote(e,"Container")}(),function(){"use strict";function e(u){var c,m,B,z;this.Container_constructor(),e.inited||e.init(),u instanceof String||1<arguments.length?(c=u,m=arguments[1],B=arguments[2],z=arguments[3],B==null&&(B=-1),u=null):u&&(c=u.mode,m=u.startPosition,B=u.loop,z=u.labels),u=u||{labels:z},this.mode=c||e.INDEPENDENT,this.startPosition=m||0,this.loop=B===!0?-1:B||0,this.currentFrame=0,this.paused=u.paused||!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||u.frameBounds,this.framerate=null,u.useTicks=u.paused=!0,this.timeline=new re.Timeline(u),this._synchOffset=0,this._rawPosition=-1,this._bound_resolveState=this._resolveState.bind(this),this._t=0,this._managed={}}var v=re.extend(e,re.Container);e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",e.inited=!1,e.init=function(){e.inited||(a.install(),e.inited=!0)},v._getLabels=function(){return this.timeline.getLabels()},v.getLabels=re.deprecate(v._getLabels,"MovieClip.getLabels"),v._getCurrentLabel=function(){return this.timeline.currentLabel},v.getCurrentLabel=re.deprecate(v._getCurrentLabel,"MovieClip.getCurrentLabel"),v._getDuration=function(){return this.timeline.duration},v.getDuration=re.deprecate(v._getDuration,"MovieClip.getDuration");try{Object.defineProperties(v,{labels:{get:v._getLabels},currentLabel:{get:v._getCurrentLabel},totalFrames:{get:v._getDuration},duration:{get:v._getDuration}})}catch(u){}function a(){throw"MovieClipPlugin cannot be instantiated."}v.initialize=e,v.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},v.draw=function(u,c){return this.DisplayObject_draw(u,c)||(this._updateState(),this.Container_draw(u,c)),!0},v.play=function(){this.paused=!1},v.stop=function(){this.paused=!0},v.gotoAndPlay=function(u){this.paused=!1,this._goto(u)},v.gotoAndStop=function(u){this.paused=!0,this._goto(u)},v.advance=function(u){var c=e.INDEPENDENT;if(this.mode===c){for(var m=this,B=m.framerate;(m=m.parent)&&B===null;)m.mode===c&&(B=m._framerate);if(this._framerate=B,!(this.totalFrames<=1)){var u=B!==null&&B!==-1&&u!==null?u/(1e3/B)+this._t:1,z=0|u;for(this._t=u-z;!this.paused&&z--;)this._updateTimeline(this._rawPosition+1,!1)}}},v.clone=function(){throw"MovieClip cannot be cloned."},v.toString=function(){return"[MovieClip (name="+this.name+")]"},v._updateState=function(){this._rawPosition!==-1&&this.mode===e.INDEPENDENT||this._updateTimeline(-1)},v._tick=function(u){this.advance(u&&u.delta),this.Container__tick(u)},v._goto=function(u){u=this.timeline.resolve(u),u!=null&&(this._t=0,this._updateTimeline(u,!0))},v._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},v._updateTimeline=function(u,c){var m=this.mode!==e.INDEPENDENT,B=this.timeline;m&&(u=this.startPosition+(this.mode===e.SINGLE_FRAME?0:this._synchOffset)),u<0&&(u=0),this._rawPosition===u&&!m||(this._rawPosition=u,B.loop=this.loop,B.setPosition(u,m||!this.actionsEnabled,c,this._bound_resolveState))},v._renderFirstFrame=function(){var u=this.timeline,c=u.rawPosition;u.setPosition(0,!0,!0,this._bound_resolveState),u.rawPosition=c},v._resolveState=function(){var u,c=this.timeline;for(u in this.currentFrame=c.position,this._managed)this._managed[u]=1;for(var m=c.tweens,B=0,z=m.length;B<z;B++){var oe=m[B],ke=oe.target;ke===this||oe.passive||(oe=oe._stepPosition,ke instanceof re.DisplayObject?this._addManagedChild(ke,oe):this._setState(ke.state,oe))}for(var Se=this.children,B=Se.length-1;0<=B;B--){var t=Se[B].id;this._managed[t]===1&&(this.removeChildAt(B),delete this._managed[t])}},v._setState=function(u,c){if(u)for(var m=u.length-1;0<=m;m--){var B,z=u[m],oe=z.t,ke=z.p;for(B in ke)oe[B]=ke[B];this._addManagedChild(oe,c)}},v._addManagedChild=function(u,c){u._off||(this.addChildAt(u,0),u instanceof e&&(u._synchOffset=c,u.mode===e.INDEPENDENT&&u.autoReset&&!this._managed[u.id]&&u._reset()),this._managed[u.id]=2)},v._getBounds=function(u,c){var m=this.DisplayObject_getBounds();return m||this.frameBounds&&(m=this._rectangle.copy(this.frameBounds[this.currentFrame])),m?this._transformBounds(m,u,c):this.Container__getBounds(u,c)},re.MovieClip=re.promote(e,"Container"),a.priority=100,a.ID="MovieClip",a.install=function(){re.Tween._installPlugin(a)},a.init=function(u,c,m){c==="startPosition"&&u.target instanceof e&&u._addPlugin(a)},a.step=function(u,c,m){},a.change=function(u,c,m,B,z,oe){if(m==="startPosition")return(z===1?c:c.prev).props[m]}}(),function(){"use strict";function e(){throw"SpriteSheetUtils cannot be instantiated"}var v=re.createCanvas?re.createCanvas():document.createElement("canvas");v.getContext&&(e._workingCanvas=v,e._workingContext=v.getContext("2d"),v.width=v.height=1),e.extractFrame=function(a,u){isNaN(u)&&(u=a.getAnimation(u).frames[0]);var c=a.getFrame(u);return c?(a=c.rect,u=e._workingCanvas,u.width=a.width,u.height=a.height,e._workingContext.drawImage(c.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),a=document.createElement("img"),a.src=u.toDataURL("image/png"),a):null},e.addFlippedFrames=re.deprecate(null,"SpriteSheetUtils.addFlippedFrames"),e.mergeAlpha=re.deprecate(null,"SpriteSheetUtils.mergeAlpha"),e._flip=function(a,u,c,m){for(var B=a._images,z=e._workingCanvas,oe=e._workingContext,ke=B.length/u,Se=0;Se<ke;Se++){var t=B[Se];t.__tmp=Se,oe.setTransform(1,0,0,1,0,0),oe.clearRect(0,0,z.width+1,z.height+1),z.width=t.width,z.height=t.height,oe.setTransform(c?-1:1,0,0,m?-1:1,c?t.width:0,m?t.height:0),oe.drawImage(t,0,0);var r=document.createElement("img");r.src=z.toDataURL("image/png"),r.width=t.width||t.naturalWidth,r.height=t.height||t.naturalHeight,B.push(r)}for(var i=a._frames,o=i.length/u,Se=0;Se<o;Se++){var l=(t=i[Se]).rect.clone(),f={image:r=B[t.image.__tmp+ke*u],rect:l,regX:t.regX,regY:t.regY};c&&(l.x=(r.width||r.naturalWidth)-l.x-l.width,f.regX=l.width-t.regX),m&&(l.y=(r.height||r.naturalHeight)-l.y-l.height,f.regY=l.height-t.regY),i.push(f)}var h="_"+(c?"h":"")+(m?"v":""),g=a._animations,_=a._data,P=g.length/u;for(Se=0;Se<P;Se++){var C=g[Se],T={name:C+h,speed:(t=_[C]).speed,next:t.next,frames:[]};t.next&&(T.next+=h);for(var N=0,O=(i=t.frames).length;N<O;N++)T.frames.push(i[N]+o*u);_[T.name]=T,g.push(T.name)}},re.SpriteSheetUtils=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=a||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var v=re.extend(e,re.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",v.addFrame=function(a,u,c,m,B){if(this._data)throw e.ERR_RUNNING;return u=u||a.bounds||a.nominalBounds,!u&&a.getBounds&&(u=a.getBounds()),u?(c=c||1,this._frames.push({source:a,sourceRect:u,scale:c,funct:m,data:B,index:this._frames.length,height:u.height*c})-1):null},v.addAnimation=function(a,u,c,m){if(this._data)throw e.ERR_RUNNING;this._animations[a]={frames:u,next:c,speed:m}},v.addMovieClip=function(a,u,c,m,B,z){if(this._data)throw e.ERR_RUNNING;var oe=a.frameBounds,ke=u||a.bounds||a.nominalBounds;if(!ke&&a.getBounds&&(ke=a.getBounds()),ke||oe){for(var Se,t=this._frames.length,r=a.timeline.duration,i=0;i<r;i++){var o=oe&&oe[i]?oe[i]:ke;this.addFrame(a,o,c,this._setupMovieClipFrame,{i,f:m,d:B})}var l,f=a.timeline._labels,h=[];for(l in f)h.push({index:f[l],label:l});if(h.length)for(h.sort(function(N,O){return N.index-O.index}),i=0,Se=h.length;i<Se;i++){for(var g=h[i].label,_=t+h[i].index,P=t+(i==Se-1?r:h[i+1].index),C=[],T=_;T<P;T++)C.push(T);z&&!(g=z(g,a,_,P))||this.addAnimation(g,C,!0)}}},v.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},v.buildAsync=function(a){if(this._data)throw e.ERR_RUNNING;this.timeSlice=a,this._startBuild();var u=this;this._timerID=setTimeout(function(){u._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},v.stopAsync=function(){clearTimeout(this._timerID),this._data=null},v.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},v.toString=function(){return"[SpriteSheetBuilder]"},v._startBuild=function(){var a=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var u=[];this._data={images:[],frames:u,framerate:this.framerate,animations:this._animations};var c=this._frames.slice();if(c.sort(function(Se,t){return Se.height<=t.height?-1:1}),c[c.length-1].height+2*a>this.maxHeight)throw e.ERR_DIMENSIONS;for(var m=0,B=0,z=0;c.length;){var oe,ke=this._fillRow(c,m,z,u,a);ke.w>B&&(B=ke.w),m+=ke.h,ke.h&&c.length||((oe=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=this._getSize(B,this.maxWidth),oe.height=this._getSize(m,this.maxHeight),this._data.images[z]=oe,ke.h||(B=m=0,z++))}},v._setupMovieClipFrame=function(a,u){var c=a.actionsEnabled;a.actionsEnabled=!1,a.gotoAndStop(u.i),a.actionsEnabled=c,u.f&&u.f(a,u.d,u.i)},v._getSize=function(a,u){for(var c=4;Math.pow(2,++c)<a;);return Math.min(u,Math.pow(2,c))},v._fillRow=function(a,u,c,m,B){for(var z=this.maxWidth,oe=this.maxHeight-(u+=B),ke=B,Se=0,t=a.length-1;0<=t;t--){var r=a[t],i=this._scale*r.scale,g=r.sourceRect,o=r.source,l=Math.floor(i*g.x-B),f=Math.floor(i*g.y-B),h=Math.ceil(i*g.height+2*B),g=Math.ceil(i*g.width+2*B);if(z<g)throw e.ERR_DIMENSIONS;oe<h||z<ke+g||(r.img=c,r.rect=new re.Rectangle(ke,u,g,h),Se=Se||h,a.splice(t,1),m[r.index]=[ke,u,g,h,c,Math.round(-l+i*o.regX-B),Math.round(-f+i*o.regY-B)],ke+=g)}return{w:ke,h:Se}},v._endBuild=function(){this.spriteSheet=new re.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},v._run=function(){for(var a,u=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),c=new Date().getTime()+u,m=!1;c>new Date().getTime();)if(!this._drawNext()){m=!0;break}m?this._endBuild():(a=this)._timerID=setTimeout(function(){a._run()},50-u);var B=this.progress=this._index/this._frames.length;this.hasEventListener("progress")&&((u=new re.Event("progress")).progress=B,this.dispatchEvent(u))},v._drawNext=function(){var a=this._frames[this._index],u=a.scale*this._scale,c=a.rect,m=a.sourceRect,B=this._data.images[a.img].getContext("2d");return a.funct&&a.funct(a.source,a.data),B.save(),B.beginPath(),B.rect(c.x,c.y,c.width,c.height),B.clip(),B.translate(Math.ceil(c.x-m.x*u),Math.ceil(c.y-m.y*u)),B.scale(u,u),a.source.draw(B),B.restore(),++this._index<this._frames.length},re.SpriteSheetBuilder=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),typeof a=="string"&&(a=document.getElementById(a)),this.mouseEnabled=!1;var u=a.style;u.position="absolute",u.transformOrigin=u.WebkitTransformOrigin=u.msTransformOrigin=u.MozTransformOrigin=u.OTransformOrigin="0% 0%",this.htmlElement=a,this._oldProps=null,this._oldStage=null,this._drawAction=null}var v=re.extend(e,re.DisplayObject);v.isVisible=function(){return this.htmlElement!=null},v.draw=function(a,u){return!0},v.cache=function(){},v.uncache=function(){},v.updateCache=function(){},v.hitTest=function(){},v.localToGlobal=function(){},v.globalToLocal=function(){},v.localToLocal=function(){},v.clone=function(){throw"DOMElement cannot be cloned."},v.toString=function(){return"[DOMElement (name="+this.name+")]"},v._tick=function(a){var u=this.stage;u&&u!==this._oldStage&&(this._drawAction&&u.off("drawend",this._drawAction),this._drawAction=u.on("drawend",this._handleDrawEnd,this),this._oldStage=u),this.DisplayObject__tick(a)},v._handleDrawEnd=function(a){var u,c,m,B,z,oe=this.htmlElement;oe&&(u=oe.style,m=(c=this.getConcatenatedDisplayProps(this._props)).matrix,(z=c.visible?"visible":"hidden")!=u.visibility&&(u.visibility=z),c.visible&&(B=1e4,(z=(oe=this._oldProps)&&oe.matrix)&&z.equals(m)||(z="matrix("+(m.a*B|0)/B+","+(m.b*B|0)/B+","+(m.c*B|0)/B+","+(m.d*B|0)/B+","+(m.tx+.5|0),u.transform=u.WebkitTransform=u.OTransform=u.msTransform=z+","+(m.ty+.5|0)+")",u.MozTransform=z+"px,"+(m.ty+.5|0)+"px)",(oe=oe||(this._oldProps=new re.DisplayProps(!0,null))).matrix.copy(m)),oe.alpha!=c.alpha&&(u.opacity=""+(c.alpha*B|0)/B,oe.alpha=c.alpha)))},re.DOMElement=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}var v=e.prototype;v.getBounds=function(a){return a},v.shaderParamSetup=function(a,u,c){},v.applyFilter=function(a,u,c,m,B,z,oe,ke){z=z||a,oe==null&&(oe=u),ke==null&&(ke=c);try{var Se=a.getImageData(u,c,m,B)}catch(t){return!1}return!!this._applyFilter(Se)&&(z.putImageData(Se,oe,ke),!0)},v.toString=function(){return"[Filter]"},v.clone=function(){return new e},v._applyFilter=function(a){return!0},re.Filter=e}(),function(){"use strict";function e(){this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0}var v=e.prototype;e.getFilterBounds=function(a,u){u=u||new re.Rectangle;var c=a.filters,m=c&&c.length;if(!!m<=0)return u;for(var B=0;B<m;B++){var z=c[B];z&&z.getBounds&&(z=z.getBounds())&&(B==0?u.setValues(z.x,z.y,z.width,z.height):u.extend(z.x,z.y,z.width,z.height))}return u},v.toString=function(){return"[BitmapCache]"},v.define=function(a,u,c,m,B,z,oe){if(!a)throw"No symbol to cache";this._options=oe,this.target=a,this.width=1<=m?m:1,this.height=1<=B?B:1,this.x=u||0,this.y=c||0,this.scale=z||1,this.update()},v.update=function(a){if(!this.target)throw"define() must be called before update()";var u=e.getFilterBounds(this.target),c=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+u.width,this._drawHeight=Math.ceil(this.height*this.scale)+u.height,c&&this._drawWidth==c.width&&this._drawHeight==c.height||this._updateSurface(),this._filterOffX=u.x,this._filterOffY=u.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(a),this.cacheID=this.cacheID?this.cacheID+1:1},v.release=function(){var a;this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):(a=this.target.stage)instanceof re.StageGL&&a.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},v.getCacheDataURL=function(){var a=this.target&&this.target.cacheCanvas;return a?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=a.toDataURL?a.getCacheDataURL():null),this._cacheDataURL):null},v.draw=function(a){return!!this.target&&(a.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)},v._updateSurface=function(){if(!this._options||!this._options.useGL)return(a=(a=this.target.cacheCanvas)||(this.target.cacheCanvas=re.createCanvas?re.createCanvas():document.createElement("canvas"))).width=this._drawWidth,void(a.height=this._drawHeight);if(!this._webGLCache)if(this._options.useGL==="stage"){if(!this.target.stage||!this.target.stage.isWebGL){var u="Cannot use 'stage' for cache because the object's parent stage is ";throw u+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage."}this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else if(this._options.useGL==="new")this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new re.StageGL(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0;else{if(!(this._options.useGL instanceof re.StageGL))throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=!0,this._webGLCache=this._options.useGL,this._webGLCache.isCacheControlled=!0}var a=this.target.cacheCanvas,u=this._webGLCache;u.isCacheControlled&&(a.width=this._drawWidth,a.height=this._drawHeight,u.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):u.isCacheControlled||u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},v._drawToCache=function(a){var u=this.target.cacheCanvas,c=this.target,m=this._webGLCache;m?(m.cacheDraw(c,c.filters,this),(u=this.target.cacheCanvas).width=this._drawWidth,u.height=this._drawHeight):(m=u.getContext("2d"),a||m.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),m.save(),m.globalCompositeOperation=a,m.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),m.translate(-this.x,-this.y),c.draw(m,!0),m.restore(),c.filters&&c.filters.length&&this._applyFilters(m)),u._invalid=!0},v._applyFilters=function(a){for(var u,c=this.target.filters,m=this._drawWidth,B=this._drawHeight,z=0,oe=c[z];oe.usesContext?(u&&(a.putImageData(u,0,0),u=null),oe.applyFilter(a,0,0,m,B)):(u=u||a.getImageData(0,0,m,B),oe._applyFilter(u)),oe=oe._multiPass!==null?oe._multiPass:c[++z],oe;);u&&a.putImageData(u,0,0)},re.BitmapCache=e}(),function(){"use strict";function e(a,u,c){this.Filter_constructor(),this._blurX=a,this._blurXTable=[],this._lastBlurX=null,this._blurY=u,this._blurYTable=[],this._lastBlurY=null,this._quality,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}",(isNaN(c)||c<1)&&(c=1),this.setQuality(0|c)}var v=re.extend(e,re.Filter);v.getBlurX=function(){return this._blurX},v.getBlurY=function(){return this._blurY},v.setBlurX=function(a){(isNaN(a)||a<0)&&(a=0),this._blurX=a},v.setBlurY=function(a){(isNaN(a)||a<0)&&(a=0),this._blurY=a},v.getQuality=function(){return this._quality},v.setQuality=function(a){(isNaN(a)||a<0)&&(a=0),this._quality=0|a},v._getShader=function(){var a=this._lastBlurX!==this._blurX,u=this._lastBlurY!==this._blurY,c=this._lastQuality!==this._quality;return a||u||c?((a||c)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(u||c)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader},v._setShader=function(){this._compiledShader};try{Object.defineProperties(v,{blurX:{get:v.getBlurX,set:v.setBlurX},blurY:{get:v.getBlurY,set:v.setBlurY},quality:{get:v.getQuality,set:v.setQuality},_builtShader:{get:v._getShader,set:v._setShader}})}catch(a){console.log(a)}v._getTable=function(a){if(a<=1)return[1];for(var u=[],a=Math.ceil(2*a),c=(a+=a%2?0:1)/2|0,m=-c;m<=c;m++){var B=m/c*4.2;u.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(B,2)/4))}var z=u.reduce(function(oe,ke){return oe+ke});return u.map(function(oe,ke,Se){return oe/z})},v._updateShader=function(){var a;this._blurX!==void 0&&this._blurY!==void 0&&(a=(a=(a=this.FRAG_SHADER_TEMPLATE).replace(/\{\{blurX\}\}/g,this._blurXTable.length.toFixed(0))).replace(/\{\{blurY\}\}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=a)},v.shaderParamSetup=function(a,u,c){a.uniform1fv(a.getUniformLocation(c,"xWeight"),this._blurXTable),a.uniform1fv(a.getUniformLocation(c,"yWeight"),this._blurYTable),a.uniform2f(a.getUniformLocation(c,"textureOffset"),2/(u._viewportWidth*this._quality),2/(u._viewportHeight*this._quality))},e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],v.getBounds=function(a){var u=0|this.blurX,c=0|this.blurY;if(u<=0&&c<=0)return a;var m=Math.pow(this.quality,.2);return(a||new re.Rectangle).pad(c*m+1,u*m+1,c*m+1,u*m+1)},v.clone=function(){return new e(this.blurX,this.blurY,this.quality)},v.toString=function(){return"[BlurFilter]"},v._applyFilter=function(a){var u=this._blurX>>1;if(isNaN(u)||u<0)return!1;var c=this._blurY>>1;if(isNaN(c)||c<0||u==0&&c==0)return!1;var m=this.quality;(isNaN(m)||m<1)&&(m=1),3<(m|=0)&&(m=3),m<1&&(m=1);for(var B=a.data,z=0,oe=0,b=0,ke=0,Se=0,t=0,r=0,i=0,o=0,l=0,f=0,h=0,g=0,_=0,P=0,C=u+u+1|0,T=c+c+1|0,N=0|a.width,O=0|a.height,S=N-1|0,k=O-1|0,x=1+u|0,E=1+c|0,L={r:0,b:0,g:0,a:0},A=L,b=1;b<C;b++)A=A.n={r:0,b:0,g:0,a:0};A.n=L;var F={r:0,b:0,g:0,a:0},q=F;for(b=1;b<T;b++)q=q.n={r:0,b:0,g:0,a:0};q.n=F;for(var V=null,I=0|e.MUL_TABLE[u],ne=0|e.SHG_TABLE[u],R=0|e.MUL_TABLE[c],Q=0|e.SHG_TABLE[c];0<m--;){r=t=0;for(var U=I,ee=ne,oe=O;-1<--oe;){for(i=x*(h=B[0|t]),o=x*(g=B[t+1|0]),l=x*(_=B[t+2|0]),f=x*(P=B[t+3|0]),A=L,b=x;-1<--b;)A.r=h,A.g=g,A.b=_,A.a=P,A=A.n;for(b=1;b<x;b++)ke=t+((S<b?S:b)<<2)|0,i+=A.r=B[ke],o+=A.g=B[ke+1],l+=A.b=B[ke+2],f+=A.a=B[ke+3],A=A.n;for(V=L,z=0;z<N;z++)B[t++]=i*U>>>ee,B[t++]=o*U>>>ee,B[t++]=l*U>>>ee,B[t++]=f*U>>>ee,ke=r+((ke=z+u+1)<S?ke:S)<<2,i-=V.r-(V.r=B[ke]),o-=V.g-(V.g=B[ke+1]),l-=V.b-(V.b=B[ke+2]),f-=V.a-(V.a=B[ke+3]),V=V.n;r+=N}for(U=R,ee=Q,z=0;z<N;z++){for(i=E*(h=B[t=z<<2|0])|0,o=E*(g=B[t+1|0])|0,l=E*(_=B[t+2|0])|0,f=E*(P=B[t+3|0])|0,q=F,b=0;b<E;b++)q.r=h,q.g=g,q.b=_,q.a=P,q=q.n;for(Se=N,b=1;b<=c;b++)t=Se+z<<2,i+=q.r=B[t],o+=q.g=B[t+1],l+=q.b=B[t+2],f+=q.a=B[t+3],q=q.n,b<k&&(Se+=N);if(t=z,V=F,0<m)for(oe=0;oe<O;oe++)B[(ke=t<<2)+3]=P=f*U>>>ee,0<P?(B[ke]=i*U>>>ee,B[ke+1]=o*U>>>ee,B[ke+2]=l*U>>>ee):B[ke]=B[ke+1]=B[ke+2]=0,ke=z+((ke=oe+E)<k?ke:k)*N<<2,i-=V.r-(V.r=B[ke]),o-=V.g-(V.g=B[ke+1]),l-=V.b-(V.b=B[ke+2]),f-=V.a-(V.a=B[ke+3]),V=V.n,t+=N;else for(oe=0;oe<O;oe++)B[(ke=t<<2)+3]=P=f*U>>>ee,0<P?(P=255/P,B[ke]=(i*U>>>ee)*P,B[ke+1]=(o*U>>>ee)*P,B[ke+2]=(l*U>>>ee)*P):B[ke]=B[ke+1]=B[ke+2]=0,ke=z+((ke=oe+E)<k?ke:k)*N<<2,i-=V.r-(V.r=B[ke]),o-=V.g-(V.g=B[ke+1]),l-=V.b-(V.b=B[ke+2]),f-=V.a-(V.a=B[ke+3]),V=V.n,t+=N}}return!0},re.BlurFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.alphaMap=a,this._alphaMap=null,this._mapData=null,this._mapTexture=null,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.alphaMap),a.uniform1i(a.getUniformLocation(c,"uAlphaSampler"),1)},v.clone=function(){var a=new e(this.alphaMap);return a._alphaMap=this._alphaMap,a._mapData=this._mapData,a},v.toString=function(){return"[AlphaMapFilter]"},v._applyFilter=function(a){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var u=a.data,c=this._mapData,m=0,B=u.length;m<B;m+=4)u[m+3]=c[m]||0;return!0},v._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var a,u=this._alphaMap=this.alphaMap,c=u;u instanceof HTMLCanvasElement?a=c.getContext("2d"):((c=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=u.width,c.height=u.height,(a=c.getContext("2d")).drawImage(u,0,0));try{var m=a.getImageData(0,0,u.width,u.height)}catch(B){return!1}return this._mapData=m.data,!0},re.AlphaMapFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.mask=a,this.usesContext=!0,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.mask),a.uniform1i(a.getUniformLocation(c,"uAlphaSampler"),1)},v.applyFilter=function(a,u,c,m,B,z,oe,ke){return!this.mask||(oe==null&&(oe=u),ke==null&&(ke=c),(z=z||a).save(),a==z&&(z.globalCompositeOperation="destination-in",z.drawImage(this.mask,oe,ke),z.restore(),!0))},v.clone=function(){return new e(this.mask)},v.toString=function(){return"[AlphaMaskFilter]"},re.AlphaMaskFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a,u,c,m,B,z,oe,ke){this.Filter_constructor(),this.redMultiplier=a!=null?a:1,this.greenMultiplier=u!=null?u:1,this.blueMultiplier=c!=null?c:1,this.alphaMultiplier=m!=null?m:1,this.redOffset=B||0,this.greenOffset=z||0,this.blueOffset=oe||0,this.alphaOffset=ke||0,this.FRAG_SHADER_BODY="uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){a.uniform4f(a.getUniformLocation(c,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),a.uniform4f(a.getUniformLocation(c,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},v.toString=function(){return"[ColorFilter]"},v.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},v._applyFilter=function(a){for(var u=a.data,c=u.length,m=0;m<c;m+=4)u[m]=u[m]*this.redMultiplier+this.redOffset,u[m+1]=u[m+1]*this.greenMultiplier+this.greenOffset,u[m+2]=u[m+2]*this.blueMultiplier+this.blueOffset,u[m+3]=u[m+3]*this.alphaMultiplier+this.alphaOffset;return!0},re.ColorFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a,u,c,m){this.setColor(a,u,c,m)}var v=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.LENGTH=(e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]).length,v.setColor=function(a,u,c,m){return this.reset().adjustColor(a,u,c,m)},v.reset=function(){return this.copy(e.IDENTITY_MATRIX)},v.adjustColor=function(a,u,c,m){return this.adjustHue(m),this.adjustContrast(u),this.adjustBrightness(a),this.adjustSaturation(c)},v.adjustBrightness=function(a){return a==0||isNaN(a)||(a=this._cleanValue(a,255),this._multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1])),this},v.adjustContrast=function(a){return a==0||isNaN(a)||(u=(a=this._cleanValue(a,100))<0?127+a/100*127:127*(u=(u=a%1)==0?e.DELTA_INDEX[a]:e.DELTA_INDEX[a<<0]*(1-u)+e.DELTA_INDEX[1+(a<<0)]*u)+127,this._multiplyMatrix([u/127,0,0,0,.5*(127-u),0,u/127,0,0,.5*(127-u),0,0,u/127,0,.5*(127-u),0,0,0,1,0,0,0,0,0,1])),this;var u},v.adjustSaturation=function(a){return a==0||isNaN(a)?this:(a=1+(0<(a=this._cleanValue(a,100))?3*a/100:a/100),this._multiplyMatrix([.3086*(1-a)+a,.6094*(1-a),.082*(1-a),0,0,.3086*(1-a),.6094*(1-a)+a,.082*(1-a),0,0,.3086*(1-a),.6094*(1-a),.082*(1-a)+a,0,0,0,0,0,1,0,0,0,0,0,1]),this)},v.adjustHue=function(z){if(z==0||isNaN(z))return this;z=this._cleanValue(z,180)/180*Math.PI;var u=Math.cos(z),c=Math.sin(z),m=.213,B=.715,z=.072;return this._multiplyMatrix([m+.787*u+c*-m,B+u*-B+c*-B,z+u*-z+.928*c,0,0,m+u*-m+.143*c,B+u*(1-B)+.14*c,z+u*-z+-.283*c,0,0,m+u*-m+-.787*c,B+u*-B+c*B,z+.928*u+c*z,0,0,0,0,0,1,0,0,0,0,0,1]),this},v.concat=function(a){return(a=this._fixMatrix(a)).length!=e.LENGTH||this._multiplyMatrix(a),this},v.clone=function(){return new e().copy(this)},v.toArray=function(){for(var a=[],u=0,c=e.LENGTH;u<c;u++)a[u]=this[u];return a},v.copy=function(a){for(var u=e.LENGTH,c=0;c<u;c++)this[c]=a[c];return this},v.toString=function(){return"[ColorMatrix]"},v._multiplyMatrix=function(a){for(var u,c=[],m=0;m<5;m++){for(u=0;u<5;u++)c[u]=this[u+5*m];for(u=0;u<5;u++){for(var B=0,z=0;z<5;z++)B+=a[u+5*z]*c[z];this[u+5*m]=B}}},v._cleanValue=function(a,u){return Math.min(u,Math.max(-u,a))},v._fixMatrix=function(a){return a instanceof e&&(a=a.toArray()),a.length<e.LENGTH?a=a.slice(0,a.length).concat(e.IDENTITY_MATRIX.slice(a.length,e.LENGTH)):a.length>e.LENGTH&&(a=a.slice(0,e.LENGTH)),a},re.ColorMatrix=e}(),function(){"use strict";function e(a){this.Filter_constructor(),this.matrix=a,this.FRAG_SHADER_BODY="uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){var m=this.matrix,B=new Float32Array([m[0],m[1],m[2],m[3],m[5],m[6],m[7],m[8],m[10],m[11],m[12],m[13],m[15],m[16],m[17],m[18]]);a.uniformMatrix4fv(a.getUniformLocation(c,"uColorMatrix"),!1,B),a.uniform4f(a.getUniformLocation(c,"uColorMatrixOffset"),m[4]/255,m[9]/255,m[14]/255,m[19]/255)},v.toString=function(){return"[ColorMatrixFilter]"},v.clone=function(){return new e(this.matrix)},v._applyFilter=function(a){for(var u,c,m,B,z=a.data,oe=z.length,a=this.matrix,ke=a[0],Se=a[1],t=a[2],r=a[3],i=a[4],o=a[5],l=a[6],f=a[7],h=a[8],g=a[9],_=a[10],P=a[11],C=a[12],T=a[13],N=a[14],O=a[15],S=a[16],k=a[17],x=a[18],E=a[19],L=0;L<oe;L+=4)u=z[L],c=z[L+1],m=z[L+2],B=z[L+3],z[L]=u*ke+c*Se+m*t+B*r+i,z[L+1]=u*o+c*l+m*f+B*h+g,z[L+2]=u*_+c*P+m*C+B*T+N,z[L+3]=u*O+c*S+m*k+B*x+E;return!0},re.ColorMatrixFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.MSPointerEvent&&0<window.navigator.msMaxTouchPoints||window.PointerEvent&&0<window.navigator.maxTouchPoints)},e.enable=function(v,a,u,c){return!!(v&&v.canvas&&e.isSupported())&&(v.__touch||(v.__touch={pointers:{},multitouch:!a,preventDefault:!u,count:0},c?"ontouchstart"in window?e._enable(v):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(v):"ontouchstart"in window||re.BrowserDetect.isChrome||re.BrowserDetect.isEdge||re.BrowserDetect.isFirefox?e._enable(v):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(v)),!0)},e.disable=function(v){v&&("ontouchstart"in window||re.BrowserDetect.isChrome||re.BrowserDetect.isFirefox?e._disable(v):(window.PointerEvent||window.MSPointerEvent)&&e._IE_disable(v),delete v.__touch)},e._enable=function(v){var a=v.canvas,u=v.__touch.f=function(c){e._handleEvent(v,c)};a.addEventListener("pointerdown",function(c){c.pointerType=="touch"?v.enableDOMEvents(!1):c.pointerType=="mouse"&&v.enableDOMEvents(!0)},!1),a.addEventListener("touchstart",u,!1),a.addEventListener("touchmove",u,!1),a.addEventListener("touchend",u,!1),a.addEventListener("touchcancel",u,!1)},e._disable=function(v){var a=v.canvas;a&&(v=v.__touch.f,a.removeEventListener("touchstart",v,!1),a.removeEventListener("touchmove",v,!1),a.removeEventListener("touchend",v,!1),a.removeEventListener("touchcancel",v,!1))},e._handleEvent=function(v,a){if(v){v.__touch.preventDefault&&a.preventDefault&&a.preventDefault();for(var u=a.changedTouches,c=a.type,m=0,B=u.length;m<B;m++){var z=u[m],oe=z.identifier;z.target==v.canvas&&(c==="touchstart"?this._handleStart(v,oe,a,z.pageX,z.pageY):c==="touchmove"?this._handleMove(v,oe,a,z.pageX,z.pageY):c!=="touchend"&&c!=="touchcancel"||this._handleEnd(v,oe,a))}}},e._IE_enable=function(v){var a=v.canvas,u=v.__touch.f=function(c){e._IE_handleEvent(v,c)};a.style["-webkit-tap-highlight-color"]="transparent",window.PointerEvent===void 0?(a.addEventListener("MSPointerDown",u,!1),window.addEventListener("MSPointerMove",u,!1),window.addEventListener("MSPointerUp",u,!1),window.addEventListener("MSPointerCancel",u,!1),v.__touch.preventDefault&&(a.style.msTouchAction="none")):(a.addEventListener("pointerdown",u,!1),window.addEventListener("pointermove",u,!1),window.addEventListener("pointerup",u,!1),window.addEventListener("pointercancel",u,!1),v.__touch.preventDefault&&(a.style.touchAction="none")),v.__touch.activeIDs={}},e._IE_disable=function(v){var a=v.__touch.f;window.PointerEvent===void 0?(window.removeEventListener("MSPointerMove",a,!1),window.removeEventListener("MSPointerUp",a,!1),window.removeEventListener("MSPointerCancel",a,!1),v.canvas&&v.canvas.removeEventListener("MSPointerDown",a,!1)):(window.removeEventListener("pointermove",a,!1),window.removeEventListener("pointerup",a,!1),window.removeEventListener("pointercancel",a,!1),v.canvas&&v.canvas.removeEventListener("pointerdown",a,!1))},e._IE_handleEvent=function(v,a){if(v){v.__touch.preventDefault&&a.preventDefault&&a.preventDefault();var u=a.type,c=a.pointerId,m=v.__touch.activeIDs;if(u==="MSPointerDown"||u==="pointerdown"){if(a.srcElement==v.canvas)switch(m[c]=!0,this._handleStart(v,c,a,a.pageX,a.pageY),a.pointerType){case"mouse":v.enableDOMEvents(!0);break;case"touch":v.enableDOMEvents(!1)}}else m[c]&&(u==="MSPointerMove"||u==="pointermove"?this._handleMove(v,c,a,a.pageX,a.pageY):u!=="MSPointerUp"&&u!=="MSPointerCancel"&&u!=="pointerup"&&u!=="pointercancel"||(delete m[c],this._handleEnd(v,c,a)))}},e._handleStart=function(v,a,u,c,m){var B,z=v.__touch;!z.multitouch&&z.count||(B=z.pointers)[a]||(B[a]=!0,z.count++,v._handlePointerDown(a,u,c,m))},e._handleMove=function(v,a,u,c,m){v.__touch.pointers[a]&&v._handlePointerMove(a,u,c,m)},e._handleEnd=function(v,a,u){var c=v.__touch,m=c.pointers;m[a]&&(c.count--,v._handlePointerUp(a,u,!0),delete m[a])},re.Touch=e}(),function(){"use strict";var e=re.EaselJS=re.EaselJS||{};e.version="1.0.0",e.buildDate="Thu, 12 Oct 2017 16:34:05 GMT"}(),function(){"use strict";var e=re.PreloadJS=re.PreloadJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";re.proxy=function(e,v){var a=Array.prototype.slice.call(arguments,2);return function(){return e.apply(v,Array.prototype.slice.call(arguments,0).concat(a))}}}(),function(){"use strict";function e(v,a,u){this.Event_constructor("error"),this.title=v,this.message=a,this.data=u}re.extend(e,re.Event).clone=function(){return new re.ErrorEvent(this.title,this.message,this.data)},re.ErrorEvent=re.promote(e,"Event")}(),function(){"use strict";function e(v,a){this.Event_constructor("progress"),this.loaded=v,this.total=a==null?1:a,this.progress=a==0?0:this.loaded/this.total}re.extend(e,re.Event).clone=function(){return new re.ProgressEvent(this.loaded,this.total)},re.ProgressEvent=re.promote(e,"Event")}(window),(function(){var e,v,a,u,c=typeof define=="function"&&define.amd,m={function:!0,object:!0},B=m[typeof Dn]&&Dn&&!Dn.nodeType&&Dn,z=m[typeof window]&&window||this,oe=B&&m[typeof dr]&&dr&&!dr.nodeType&&typeof global=="object"&&global;function ke(g,t){g=g||z.Object(),t=t||z.Object();var r=g.Number||z.Number,i=g.String||z.String,ce=g.Object||z.Object,o=g.Date||z.Date,l=g.SyntaxError||z.SyntaxError,f=g.TypeError||z.TypeError,h=g.Math||z.Math,g=g.JSON||z.JSON;typeof g=="object"&&g&&(t.stringify=g.stringify,t.parse=g.parse);var _,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce=ce.prototype,j=ce.toString,G=new o(-0xc782b5b800cec);try{G=G.getUTCFullYear()==-109252&&G.getUTCMonth()===0&&G.getUTCDate()===1&&G.getUTCHours()==10&&G.getUTCMinutes()==37&&G.getUTCSeconds()==6&&G.getUTCMilliseconds()==708}catch(p){}function y(p){if(y[p]!==C)return y[p];var d;if(p=="bug-string-char-index")d="a"[0]!="a";else if(p=="json")d=y("json-stringify")&&y("json-parse");else{var D,K='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(p=="json-stringify"){var w=t.stringify,Y=typeof w=="function"&&G;if(Y){(D=function(){return 1}).toJSON=D;try{Y=w(0)==="0"&&w(new r)==="0"&&w(new i)=='""'&&w(j)===C&&w(C)===C&&w()===C&&w(D)==="1"&&w([D])=="[1]"&&w([C])=="[null]"&&w(null)=="null"&&w([C,j,null])=="[null,null,null]"&&w({a:[D,!0,!1,null,"\0\b\n\f\r	"]})==K&&w(null,D)==="1"&&w([1,2],null,1)=="[\n 1,\n 2\n]"&&w(new o(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&w(new o(864e13))=='"+275760-09-13T00:00:00.000Z"'&&w(new o(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&w(new o(-1))=='"1969-12-31T23:59:59.999Z"'}catch(Z){Y=!1}}d=Y}if(p=="json-parse"){var Ee=t.parse;if(typeof Ee=="function")try{if(Ee("0")===0&&!Ee(!1)){var X=(D=Ee(K)).a.length==5&&D.a[0]===1;if(X){try{X=!Ee('"	"')}catch(Z){}if(X)try{X=Ee("01")!==1}catch(Z){}if(X)try{X=Ee("1.")!==1}catch(Z){}}}}catch(Z){X=!1}d=X}}return y[p]=!!d}return y("json")||(T="[object Function]",N="[object Number]",O="[object String]",S="[object Array]",k=y("bug-string-char-index"),G||(x=h.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],L=function(p,d){return E[d]+365*(p-1970)+x((p-1969+(d=+(1<d)))/4)-x((p-1901+d)/100)+x((p-1601+d)/400)}),(_=ce.hasOwnProperty)||(_=function(p){var d,D={__proto__:null};return D.__proto__={toString:1},_=D.toString!=j?function(Y){var w=this.__proto__,Y=Y in(this.__proto__=null,this);return this.__proto__=w,Y}:(d=D.constructor,function(K){var w=(this.constructor||d).prototype;return K in this&&!(K in w&&this[K]===w[K])}),D=null,_.call(this,p)}),P=function(p,d){var D,K,w,Y=0;for(w in(D=function(){this.valueOf=0}).prototype.valueOf=0,K=new D)_.call(K,w)&&Y++;return D=K=null,(P=Y?Y==2?function(Ee,X){var Z,pe={},ve=j.call(Ee)==T;for(Z in Ee)ve&&Z=="prototype"||_.call(pe,Z)||!(pe[Z]=1)||!_.call(Ee,Z)||X(Z)}:function(Ee,X){var Z,pe,ve=j.call(Ee)==T;for(Z in Ee)ve&&Z=="prototype"||!_.call(Ee,Z)||(pe=Z==="constructor")||X(Z);(pe||_.call(Ee,Z="constructor"))&&X(Z)}:(K=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(Ee,X){var Z,pe,ve=j.call(Ee)==T,$=!ve&&typeof Ee.constructor!="function"&&m[typeof Ee.hasOwnProperty]&&Ee.hasOwnProperty||_;for(Z in Ee)ve&&Z=="prototype"||!$.call(Ee,Z)||X(Z);for(pe=K.length;Z=K[--pe];$.call(Ee,Z)&&X(Z));}))(p,d)},y("json-stringify")||(A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},b=function(p,d){return("000000"+(d||0)).slice(-p)},F=function(p){for(var d='"',D=0,K=p.length,w=!k||10<K,Y=w&&(k?p.split(""):p);D<K;D++){var Ee=p.charCodeAt(D);switch(Ee){case 8:case 9:case 10:case 12:case 13:case 34:case 92:d+=A[Ee];break;default:if(Ee<32){d+="\\u00"+b(2,Ee.toString(16));break}d+=w?Y[D]:p.charAt(D)}}return d+'"'},q=function(p,d,D,K,w,Y,Ee){var X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye;try{X=d[p]}catch(Re){}if(typeof X=="object"&&X)if((Z=j.call(X))!="[object Date]"||_.call(X,"toJSON"))typeof X.toJSON=="function"&&(Z!=N&&Z!=O&&Z!=S||_.call(X,"toJSON"))&&(X=X.toJSON(p));else if(-1/0<X&&X<1/0){if(L){for($=x(X/864e5),pe=x($/365.2425)+1970-1;L(pe+1,0)<=$;pe++);for(ve=x(($-L(pe,0))/30.42);L(pe,ve+1)<=$;ve++);$=1+$-L(pe,ve),ue=x((J=(X%864e5+864e5)%864e5)/36e5)%24,xe=x(J/6e4)%60,Ye=x(J/1e3)%60,J=J%1e3}else pe=X.getUTCFullYear(),ve=X.getUTCMonth(),$=X.getUTCDate(),ue=X.getUTCHours(),xe=X.getUTCMinutes(),Ye=X.getUTCSeconds(),J=X.getUTCMilliseconds();X=(pe<=0||1e4<=pe?(pe<0?"-":"+")+b(6,pe<0?-pe:pe):b(4,pe))+"-"+b(2,ve+1)+"-"+b(2,$)+"T"+b(2,ue)+":"+b(2,xe)+":"+b(2,Ye)+"."+b(3,J)+"Z"}else X=null;if(D&&(X=D.call(d,p,X)),X===null)return"null";if((Z=j.call(X))=="[object Boolean]")return""+X;if(Z==N)return-1/0<X&&X<1/0?""+X:"null";if(Z==O)return F(""+X);if(typeof X=="object"){for(_e=Ee.length;_e--;)if(Ee[_e]===X)throw f();if(Ee.push(X),se=[],J=Y,Y+=w,Z==S){for(te=0,_e=X.length;te<_e;te++)be=q(te,X,D,K,w,Y,Ee),se.push(be===C?"null":be);ye=se.length?w?"[\n"+Y+se.join(",\n"+Y)+"\n"+J+"]":"["+se.join(",")+"]":"[]"}else P(K||X,function(Re){var de=q(Re,X,D,K,w,Y,Ee);de!==C&&se.push(F(Re)+":"+(w?" ":"")+de)}),ye=se.length?w?"{\n"+Y+se.join(",\n"+Y)+"\n"+J+"}":"{"+se.join(",")+"}":"{}";return Ee.pop(),ye}},t.stringify=function(p,d,D){var K,w,Y,Ee;if(m[typeof d]&&d){if((Ee=j.call(d))==T)w=d;else if(Ee==S){Y={};for(var X,Z=0,pe=d.length;Z<pe;X=d[Z++],(Ee=j.call(X))!=O&&Ee!=N||(Y[X]=1));}}if(D)if((Ee=j.call(D))==N){if(0<(D-=D%1))for(K="",10<D&&(D=10);K.length<D;K+=" ");}else Ee==O&&(K=D.length<=10?D:D.slice(0,10));return q("",((X={})[""]=p,X),w,Y,K,"",[])}),y("json-parse")||(V=i.fromCharCode,I={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},Q=function(){throw ne=R=null,l()},U=function(){for(var p,d,D,K,w,Y=R,Ee=Y.length;ne<Ee;)switch(w=Y.charCodeAt(ne)){case 9:case 10:case 13:case 32:ne++;break;case 123:case 125:case 91:case 93:case 58:case 44:return p=k?Y.charAt(ne):Y[ne],ne++,p;case 34:for(p="@",ne++;ne<Ee;)if((w=Y.charCodeAt(ne))<32)Q();else if(w==92)switch(w=Y.charCodeAt(++ne)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:p+=I[w],ne++;break;case 117:for(d=++ne,D=ne+4;ne<D;ne++)48<=(w=Y.charCodeAt(ne))&&w<=57||97<=w&&w<=102||65<=w&&w<=70||Q();p+=V("0x"+Y.slice(d,ne));break;default:Q()}else{if(w==34)break;for(w=Y.charCodeAt(ne),d=ne;32<=w&&w!=92&&w!=34;)w=Y.charCodeAt(++ne);p+=Y.slice(d,ne)}if(Y.charCodeAt(ne)==34)return ne++,p;Q();default:if(d=ne,w==45&&(K=!0,w=Y.charCodeAt(++ne)),48<=w&&w<=57){for(w==48&&48<=(w=Y.charCodeAt(ne+1))&&w<=57&&Q(),K=!1;ne<Ee&&48<=(w=Y.charCodeAt(ne))&&w<=57;ne++);if(Y.charCodeAt(ne)==46){for(D=++ne;D<Ee&&48<=(w=Y.charCodeAt(D))&&w<=57;D++);D==ne&&Q(),ne=D}if((w=Y.charCodeAt(ne))==101||w==69){for((w=Y.charCodeAt(++ne))!=43&&w!=45||ne++,D=ne;D<Ee&&48<=(w=Y.charCodeAt(D))&&w<=57;D++);D==ne&&Q(),ne=D}return+Y.slice(d,ne)}if(K&&Q(),Y.slice(ne,ne+4)=="true")return ne+=4,!0;if(Y.slice(ne,ne+5)=="false")return ne+=5,!1;if(Y.slice(ne,ne+4)=="null")return ne+=4,null;Q()}return"$"},ee=function(p){var d,D;if(p=="$"&&Q(),typeof p=="string"){if((k?p.charAt(0):p[0])=="@")return p.slice(1);if(p=="["){for(d=[];(p=U())!="]";D=D||!0)!D||p==","&&(p=U())!="]"||Q(),p==","&&Q(),d.push(ee(p));return d}if(p=="{"){for(d={};(p=U())!="}";D=D||!0)!D||p==","&&(p=U())!="}"||Q(),p!=","&&typeof p=="string"&&(k?p.charAt(0):p[0])=="@"&&U()==":"||Q(),d[p.slice(1)]=ee(U());return d}Q()}return p},ae=function(p,d,D){D=ie(p,d,D),D===C?delete p[d]:p[d]=D},ie=function(p,d,D){var K,w=p[d];if(typeof w=="object"&&w)if(j.call(w)==S)for(K=w.length;K--;)ae(w,K,D);else P(w,function(Y){ae(w,Y,D)});return D.call(p,d,w)},t.parse=function(p,d){var D;return ne=0,R=""+p,D=ee(U()),U()!="$"&&Q(),ne=R=null,d&&j.call(d)==T?ie(((p={})[""]=D,p),"",d):D})),t.runInContext=ke,t}!oe||oe.global!==oe&&oe.window!==oe&&oe.self!==oe||(z=oe),B&&!c?ke(z,B):(e=z.JSON,v=z.JSON3,a=!1,u=ke(z,z.JSON3={noConflict:function(){return a||(a=!0,z.JSON=e,z.JSON3=v,e=v=null),u}}),z.JSON={parse:u.parse,stringify:u.stringify}),c&&define(function(){return u})}).call(Dn),function(){var e={a:function(){return e.el("a")},svg:function(){return e.el("svg")},object:function(){return e.el("object")},image:function(){return e.el("image")},img:function(){return e.el("img")},style:function(){return e.el("style")},link:function(){return e.el("link")},script:function(){return e.el("script")},audio:function(){return e.el("audio")},video:function(){return e.el("video")},text:function(v){return document.createTextNode(v)},el:function(v){return document.createElement(v)}};re.Elements=e}(),function(){var e={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(v){var a={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(v==null)return a;var u,c=re.Elements.a();for(u in c.href=v,a)u in c&&(a[u]=c[u]);var m=v.indexOf("?");return-1<m&&(v=v.substr(0,m)),e.ABSOLUTE_PATT.test(v)?a.absolute=!0:e.RELATIVE_PATT.test(v)&&(a.relative=!0),(v=v.match(e.EXTENSION_PATT))&&(a.extension=v[1].toLowerCase()),a},formatQueryString:function(v,a){if(v==null)throw new Error("You must specify data.");var u,c=[];for(u in v)c.push(u+"="+escape(v[u]));return a&&(c=c.concat(a)),c.join("&")},buildURI:function(v,a){if(a==null)return v;var u,c=[],m=v.indexOf("?");return m!=-1&&(u=v.slice(m+1),c=c.concat(u.split("&"))),m!=-1?v.slice(0,m)+"?"+this.formatQueryString(a,c):v+"?"+this.formatQueryString(a,c)},isCrossDomain:function(v){var a=re.Elements.a();return a.href=v.src,v=re.Elements.a(),v.href=location.href,a.hostname!=""&&(a.port!=v.port||a.protocol!=v.protocol||a.hostname!=v.hostname)},isLocal:function(v){var a=re.Elements.a();return a.href=v.src,a.hostname==""&&a.protocol=="file:"}};re.URLUtils=e}(),function(){var e={container:null,appendToHead:function(v){e.getHead().appendChild(v)},appendToBody:function(v){var a;e.container==null&&(e.container=document.createElement("div"),e.container.id="preloadjs-container",(a=e.container.style).visibility="hidden",a.position="absolute",a.width=e.container.style.height="10px",a.overflow="hidden",a.transform=a.msTransform=a.webkitTransform=a.oTransform="translate(-10px, -10px)",e.getBody().appendChild(e.container)),e.container.appendChild(v)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]},removeChild:function(v){v.parent&&v.parent.removeChild(v)},isImageTag:function(v){return v instanceof HTMLImageElement},isAudioTag:function(v){return!!window.HTMLAudioElement&&v instanceof HTMLAudioElement},isVideoTag:function(v){return!!window.HTMLVideoElement&&v instanceof HTMLVideoElement}};re.DomUtils=e}(),function(){var e={parseXML:function(v){var a=null;try{window.DOMParser&&(a=new DOMParser().parseFromString(v,"text/xml"))}catch(u){}if(!a)try{(a=new ActiveXObject("Microsoft.XMLDOM")).async=!1,a.loadXML(v)}catch(u){a=null}return a},parseJSON:function(v){if(v==null)return null;try{return JSON.parse(v)}catch(a){throw a}}};re.DataUtils=e}(),function(){var e={BINARY:"binary",CSS:"css",FONT:"font",FONTCSS:"fontcss",IMAGE:"image",JAVASCRIPT:"javascript",JSON:"json",JSONP:"jsonp",MANIFEST:"manifest",SOUND:"sound",VIDEO:"video",SPRITESHEET:"spritesheet",SVG:"svg",TEXT:"text",XML:"xml"};re.Types=e}(),function(){var e={POST:"POST",GET:"GET"};re.Methods=e}(),function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=re.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=a.LOAD_TIMEOUT_DEFAULT}var v=e.prototype={},a=e;a.LOAD_TIMEOUT_DEFAULT=8e3,a.create=function(u){if(typeof u=="string"){var c=new e;return c.src=u,c}if(u instanceof a)return u;if(u instanceof Object&&u.src)return u.loadTimeout==null&&(u.loadTimeout=a.LOAD_TIMEOUT_DEFAULT),u;throw new Error("Type not recognized.")},v.set=function(u){for(var c in u)this[c]=u[c];return this},re.LoadItem=a}(),function(){var e={isBinary:function(v){switch(v){case re.Types.IMAGE:case re.Types.BINARY:return!0;default:return!1}},isText:function(v){switch(v){case re.Types.TEXT:case re.Types.JSON:case re.Types.MANIFEST:case re.Types.XML:case re.Types.CSS:case re.Types.SVG:case re.Types.JAVASCRIPT:case re.Types.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(v){if(v==null)return re.Types.TEXT;switch(v.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return re.Types.IMAGE;case"ogg":case"mp3":case"webm":return re.Types.SOUND;case"mp4":case"webm":case"ts":return re.Types.VIDEO;case"json":return re.Types.JSON;case"xml":return re.Types.XML;case"css":return re.Types.CSS;case"js":return re.Types.JAVASCRIPT;case"svg":return re.Types.SVG;default:return re.Types.TEXT}}};re.RequestUtils=e}(),function(){"use strict";function e(u,c,m){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=m,this.resultFormatter=null,this._item=u?re.LoadItem.create(u):null,this._preferXHR=c,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var v=re.extend(e,re.EventDispatcher),a=e;try{Object.defineProperties(a,{POST:{get:re.deprecate(function(){return re.Methods.POST},"AbstractLoader.POST")},GET:{get:re.deprecate(function(){return re.Methods.GET},"AbstractLoader.GET")},BINARY:{get:re.deprecate(function(){return re.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:re.deprecate(function(){return re.Types.CSS},"AbstractLoader.CSS")},FONT:{get:re.deprecate(function(){return re.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:re.deprecate(function(){return re.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:re.deprecate(function(){return re.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:re.deprecate(function(){return re.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:re.deprecate(function(){return re.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:re.deprecate(function(){return re.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:re.deprecate(function(){return re.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:re.deprecate(function(){return re.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:re.deprecate(function(){return re.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:re.deprecate(function(){return re.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:re.deprecate(function(){return re.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:re.deprecate(function(){return re.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:re.deprecate(function(){return re.Types.XML},"AbstractLoader.XML")}})}catch(u){}v.getItem=function(){return this._item},v.getResult=function(u){return u?this._rawResult:this._result},v.getTag=function(){return this._tag},v.setTag=function(u){this._tag=u},v.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var u=new re.Event("initialize");u.loader=this._request,this.dispatchEvent(u),this._request.load()},v.cancel=function(){this.canceled=!0,this.destroy()},v.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},v.getLoadedItems=function(){return this._loadedItems},v._createRequest=function(){this._preferXHR?this._request=new re.XHRRequest(this._item):this._request=new re.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},v._createTag=function(u){return null},v._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},v._sendProgress=function(u){var c;this._isCanceled()||(c=null,typeof u=="number"?(this.progress=u,c=new re.ProgressEvent(this.progress)):(c=u,this.progress=u.loaded/u.total,c.progress=this.progress,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(c))},v._sendComplete=function(){var u;this._isCanceled()||(this.loaded=!0,(u=new re.Event("complete")).rawResult=this._rawResult,this._result!=null&&(u.result=this._result),this.dispatchEvent(u))},v._sendError=function(u){!this._isCanceled()&&this.hasEventListener("error")&&(u==null&&(u=new re.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(u))},v._isCanceled=function(){return!(window.createjs!=null&&!this.canceled)},v.resultFormatter=null,v.handleEvent=function(u){switch(u.type){case"complete":this._rawResult=u.target._response;var c=this.resultFormatter&&this.resultFormatter(this);c instanceof Function?c.call(this,re.proxy(this._resultFormatSuccess,this),re.proxy(this._resultFormatFailed,this)):(this._result=c||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(u);break;case"error":this._sendError(u);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new re.ErrorEvent("PRELOAD_"+u.type.toUpperCase()+"_ERROR"))}},v._resultFormatSuccess=function(u){this._result=u,this._sendComplete()},v._resultFormatFailed=function(u){this._sendError(u)},v.toString=function(){return"[PreloadJS AbstractLoader]"},re.AbstractLoader=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,c){this.AbstractLoader_constructor(a,u,c),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var v=re.extend(e,re.AbstractLoader);v.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},v._createTag=function(){},v._createRequest=function(){this._preferXHR?this._request=new re.XHRRequest(this._item):this._request=new re.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},v._updateXHR=function(a){a.loader.setResponseType&&a.loader.setResponseType("blob")},v._formatResult=function(a){var u,c;return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(u=window.URL||window.webkitURL,c=a.getResult(!0),a.getTag().src=u.createObjectURL(c)),a.getTag()},re.AbstractMediaLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this._item=a}var v=re.extend(e,re.EventDispatcher);v.load=function(){},v.destroy=function(){},v.cancel=function(){},re.AbstractRequest=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,c){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=c,this._loadedHandler=re.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var v=re.extend(e,re.AbstractRequest);v.load=function(){this._tag.onload=re.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=re.proxy(this._handleReadyStateChange,this),this._tag.onerror=re.proxy(this._handleError,this);var a=new re.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,this._tag.parentNode==null&&(re.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},v.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},v._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},v._handleError=function(){this._clean(),this.dispatchEvent("error")},v._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},v._handleTimeout=function(){this._clean(),this.dispatchEvent(new re.Event("timeout"))},v._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&this._tag.parentNode!=null&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},v._handleStalled=function(){},re.TagRequest=re.promote(e,"AbstractRequest")}(),function(){"use strict";function e(a,u,c){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=c,this._loadedHandler=re.proxy(this._handleTagComplete,this)}var v=re.extend(e,re.TagRequest);v.load=function(){var a=re.proxy(this._handleStalled,this);this._stalledCallback=a;var u=re.proxy(this._handleProgress,this);this._handleProgress=u,this._tag.addEventListener("stalled",a),this._tag.addEventListener("progress",u),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},v._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},v._handleStalled=function(){},v._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new re.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},v._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},re.MediaTagRequest=re.promote(e,"TagRequest")}(),function(){"use strict";function e(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=re.proxy(this._handleLoadStart,this),this._handleProgressProxy=re.proxy(this._handleProgress,this),this._handleAbortProxy=re.proxy(this._handleAbort,this),this._handleErrorProxy=re.proxy(this._handleError,this),this._handleTimeoutProxy=re.proxy(this._handleTimeout,this),this._handleLoadProxy=re.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=re.proxy(this._handleReadyStateChange,this),this._createXHR(a)}var v=re.extend(e,re.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],v.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},v.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},v.load=function(){if(this._request!=null){this._request.addEventListener!=null?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),this._xhrLevel==1&&(this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(re.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new re.ErrorEvent("XHR_SEND",null,a))}}else this._handleError()},v.setResponseType=function(a){a==="blob"&&(a=window.URL?"blob":"arraybuffer",this._responseType=a),this._request.responseType=a},v.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},v.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},v._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new re.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},v._handleLoadStart=function(a){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},v._handleAbort=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent("XHR_ABORTED",null,a))},v._handleError=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent(a.message))},v._handleReadyStateChange=function(a){this._request.readyState==4&&this._handleLoad()},v._handleLoad=function(a){if(!this.loaded){this.loaded=!0;var u=this._checkError();if(u)this._handleError(u);else{if(this._response=this._getResponse(),this._responseType==="arraybuffer")try{this._response=new Blob([this._response])}catch(c){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,c.name==="TypeError"&&window.BlobBuilder&&((u=new BlobBuilder).append(this._response),this._response=u.getBlob())}this._clean(),this.dispatchEvent(new re.Event("complete"))}}},v._handleTimeout=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent("PRELOAD_TIMEOUT",null,a))},v._checkError=function(){var a=parseInt(this._request.status);return 400<=a&&a<=599?new Error(a):a==0&&/^https?:/.test(location.protocol)?new Error(0):null},v._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;try{if(this._request.responseText!=null)return this._request.responseText}catch(a){}try{if(this._request.responseXML!=null)return this._request.responseXML}catch(a){}return null},v._createXHR=function(a){var u=re.URLUtils.isCrossDomain(a),c={},m=null;if(window.XMLHttpRequest)m=new XMLHttpRequest,u&&m.withCredentials===void 0&&window.XDomainRequest&&(m=new XDomainRequest);else{for(var B=0,z=s.ACTIVEX_VERSIONS.length;B<z;B++){var oe=s.ACTIVEX_VERSIONS[B];try{m=new ActiveXObject(oe);break}catch(t){}}if(m==null)return!1}a.mimeType==null&&re.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset=utf-8"),a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType),this._xhrLevel=typeof m.responseType=="string"?2:1;var ke=null,ke=a.method==re.Methods.GET?re.URLUtils.buildURI(a.src,a.values):a.src;if(m.open(a.method||re.Methods.GET,ke,!0),u&&m instanceof XMLHttpRequest&&this._xhrLevel==1&&(c.Origin=location.origin),a.values&&a.method==re.Methods.POST&&(c["Content-Type"]="application/x-www-form-urlencoded"),u||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var Se in a.headers)c[Se]=a.headers[Se];for(Se in c)m.setRequestHeader(Se,c[Se]);return m instanceof XMLHttpRequest&&a.withCredentials!==void 0&&(m.withCredentials=a.withCredentials),this._request=m,!0},v._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener!=null?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},v.toString=function(){return"[PreloadJS XHRRequest]"},re.XHRRequest=re.promote(e,"AbstractRequest")}(),function(){"use strict";function e(u,c,m){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[re.FontLoader,re.ImageLoader,re.JavaScriptLoader,re.CSSLoader,re.JSONLoader,re.JSONPLoader,re.SoundLoader,re.ManifestLoader,re.SpriteSheetLoader,re.XMLLoader,re.SVGLoader,re.BinaryLoader,re.VideoLoader,re.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(u,c,m)}var v=re.extend(e,re.AbstractLoader),a=e;try{Object.defineProperties(a,{POST:{get:re.deprecate(function(){return re.Methods.POST},"AbstractLoader.POST")},GET:{get:re.deprecate(function(){return re.Methods.GET},"AbstractLoader.GET")},BINARY:{get:re.deprecate(function(){return re.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:re.deprecate(function(){return re.Types.CSS},"AbstractLoader.CSS")},FONT:{get:re.deprecate(function(){return re.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:re.deprecate(function(){return re.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:re.deprecate(function(){return re.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:re.deprecate(function(){return re.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:re.deprecate(function(){return re.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:re.deprecate(function(){return re.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:re.deprecate(function(){return re.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:re.deprecate(function(){return re.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:re.deprecate(function(){return re.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:re.deprecate(function(){return re.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:re.deprecate(function(){return re.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:re.deprecate(function(){return re.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:re.deprecate(function(){return re.Types.XML},"AbstractLoader.XML")}})}catch(u){}v.init=function(u,c,m){this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(u),this._paused=!1,this._basePath=c,this._crossOrigin=m,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},v.registerLoader=function(u){if(!u||!u.canLoadItem)throw new Error("loader is of an incorrect type.");if(this._availableLoaders.indexOf(u)!=-1)throw new Error("loader already exists.");this._availableLoaders.unshift(u)},v.unregisterLoader=function(u){u=this._availableLoaders.indexOf(u),u!=-1&&u<this._defaultLoaderLength-1&&this._availableLoaders.splice(u,1)},v.setPreferXHR=function(u){return this.preferXHR=u!=0&&window.XMLHttpRequest!=null,this.preferXHR},v.removeAll=function(){this.remove()},v.remove=function(u){var c=null;if(u&&!Array.isArray(u))c=[u];else if(u)c=u;else if(0<arguments.length)return;var m=!1;if(c){for(;c.length;){for(var B=c.pop(),z=this.getResult(B),oe=this._loadQueue.length-1;0<=oe;oe--)if((ke=this._loadQueue[oe].getItem()).id==B||ke.src==B){this._loadQueue.splice(oe,1)[0].cancel();break}for(oe=this._loadQueueBackup.length-1;0<=oe;oe--)if((ke=this._loadQueueBackup[oe].getItem()).id==B||ke.src==B){this._loadQueueBackup.splice(oe,1)[0].cancel();break}if(z)this._disposeItem(this.getItem(B));else for(var oe=this._currentLoads.length-1;0<=oe;oe--){var ke=this._currentLoads[oe].getItem();if(ke.id==B||ke.src==B){this._currentLoads.splice(oe,1)[0].cancel(),m=!0;break}}}m&&this._loadNext()}else{for(var Se in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[Se]);this.init(this.preferXHR,this._basePath)}},v.reset=function(){for(var u in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[u]);for(var c=[],m=0,B=this._loadQueueBackup.length;m<B;m++)c.push(this._loadQueueBackup[m].getItem());this.loadManifest(c,!1)},v.installPlugin=function(u){if(u!=null&&u.getPreloadHandlers!=null){this._plugins.push(u);var c=u.getPreloadHandlers();if(c.scope=u,c.types!=null)for(var m=0,B=c.types.length;m<B;m++)this._typeCallbacks[c.types[m]]=c;if(c.extensions!=null)for(m=0,B=c.extensions.length;m<B;m++)this._extensionCallbacks[c.extensions[m]]=c}},v.setMaxConnections=function(u){this._maxConnections=u,!this._paused&&0<this._loadQueue.length&&this._loadNext()},v.loadFile=function(u,c,m){u!=null?(this._addItem(u,null,m),c!==!1?this.setPaused(!1):this.setPaused(!0)):(c=new re.ErrorEvent("PRELOAD_NO_FILE"),this._sendError(c))},v.loadManifest=function(u,c,m){var B=null,z=null;if(Array.isArray(u)){if(u.length==0){var oe=new re.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(oe)}B=u}else if(typeof u=="string")B=[{src:u,type:a.MANIFEST}];else{if(typeof u!="object")return oe=new re.ErrorEvent("PRELOAD_MANIFEST_NULL"),void this._sendError(oe);u.src!==void 0?(u.type==null?u.type=a.MANIFEST:u.type!=a.MANIFEST&&(oe=new re.ErrorEvent("PRELOAD_MANIFEST_TYPE"),this._sendError(oe)),B=[u]):u.manifest!==void 0&&(B=u.manifest,z=u.path)}for(var ke=0,Se=B.length;ke<Se;ke++)this._addItem(B[ke],z,m);c!==!1?this.setPaused(!1):this.setPaused(!0)},v.load=function(){this.setPaused(!1)},v.getItem=function(u){return this._loadItemsById[u]||this._loadItemsBySrc[u]},v.getResult=function(u,c){return u=this._loadItemsById[u]||this._loadItemsBySrc[u],u==null?null:(u=u.id,(c&&this._loadedRawResults[u]?this._loadedRawResults:this._loadedResults)[u])},v.getItems=function(u){var c,m=[];for(c in this._loadItemsById){var B=this._loadItemsById[c],z=this.getResult(c);u===!0&&z==null||m.push({item:B,result:z,rawResult:this.getResult(c,!0)})}return m},v.setPaused=function(u){this._paused=u,this._paused||this._loadNext()},v.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},v._addItem=function(u,c,m){c=this._createLoadItem(u,c,m),c==null||(m=this._createLoader(c))!=null&&("plugins"in m&&(m.plugins=this._plugins),c._loader=m,this._loadQueue.push(m),this._loadQueueBackup.push(m),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&c.type==re.Types.JAVASCRIPT||c.maintainOrder===!0)&&(this._scriptOrder.push(c),this._loadedScripts.push(null)))},v._createLoadItem=function(u,c,m){var B=re.LoadItem.create(u);if(B==null)return null;if(u="",m=m||this._basePath,B.src instanceof Object){if(!B.type)return null;c?(u=c,oe=re.URLUtils.parseURI(c),m==null||oe.absolute||oe.relative||(u=m+u)):m!=null&&(u=m)}else{var z=re.URLUtils.parseURI(B.src);z.extension&&(B.ext=z.extension),B.type==null&&(B.type=re.RequestUtils.getTypeByExtension(B.ext));var oe,ke=B.src;z.absolute||z.relative||(c?(u=c,oe=re.URLUtils.parseURI(c),ke=c+ke,m==null||oe.absolute||oe.relative||(u=m+u)):m!=null&&(u=m)),B.src=u+B.src}if(B.path=u,B.id!==void 0&&B.id!==null&&B.id!==""||(B.id=ke),ke=this._typeCallbacks[B.type]||this._extensionCallbacks[B.ext],ke){if(ke=ke.callback.call(ke.scope,B,this),ke===!1)return null;ke===!0||ke!=null&&(B._loader=ke),(z=re.URLUtils.parseURI(B.src)).extension!=null&&(B.ext=z.extension)}return this._loadItemsById[B.id]=B,(this._loadItemsBySrc[B.src]=B).crossOrigin==null&&(B.crossOrigin=this._crossOrigin),B},v._createLoader=function(u){if(u._loader!=null)return u._loader;for(var c=this.preferXHR,m=0;m<this._availableLoaders.length;m++){var B=this._availableLoaders[m];if(B&&B.canLoadItem(u))return new B(u,c)}return null},v._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var u=0;u<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);u++){var c=this._loadQueue[u];this._canStartLoad(c)&&(this._loadQueue.splice(u,1),u--,this._loadItem(c))}}},v._loadItem=function(u){u.on("fileload",this._handleFileLoad,this),u.on("progress",this._handleProgress,this),u.on("complete",this._handleFileComplete,this),u.on("error",this._handleError,this),u.on("fileerror",this._handleFileError,this),this._currentLoads.push(u),this._sendFileStart(u.getItem()),u.load()},v._handleFileLoad=function(u){u.target=null,this.dispatchEvent(u)},v._handleFileError=function(u){u=new re.ErrorEvent("FILE_LOAD_ERROR",null,u.item),this._sendError(u)},v._handleError=function(u){var c=u.target;this._numItemsLoaded++,this._finishOrderedItem(c,!0),this._updateProgress(),u=new re.ErrorEvent("FILE_LOAD_ERROR",null,c.getItem()),this._sendError(u),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(c),this._cleanLoadItem(c),this._loadNext())},v._handleFileComplete=function(u){var c=u.target,m=c.getItem(),B=c.getResult();this._loadedResults[m.id]=B,u=c.getResult(!0),u!=null&&u!==B&&(this._loadedRawResults[m.id]=u),this._saveLoadedItems(c),this._removeLoadItem(c),this._finishOrderedItem(c)||this._processFinishedLoad(m,c),this._cleanLoadItem(c)},v._saveLoadedItems=function(u){var c=u.getLoadedItems();if(c!==null)for(var m=0;m<c.length;m++){var B=c[m].item;this._loadItemsBySrc[B.src]=B,this._loadItemsById[B.id]=B,this._loadedResults[B.id]=c[m].result,this._loadedRawResults[B.id]=c[m].rawResult}},v._finishOrderedItem=function(u,c){var m=u.getItem();return this.maintainScriptOrder&&m.type==re.Types.JAVASCRIPT||m.maintainOrder?(u instanceof re.JavaScriptLoader&&(this._currentlyLoadingScript=!1),u=re.indexOf(this._scriptOrder,m),u==-1?!1:(this._loadedScripts[u]=c===!0||m,this._checkScriptLoadOrder(),!0)):!1},v._checkScriptLoadOrder=function(){for(var u=this._loadedScripts.length,c=0;c<u;c++){var m,B=this._loadedScripts[c];if(B===null)break;B!==!0&&(m=this._loadedResults[B.id],B.type==re.Types.JAVASCRIPT&&re.DomUtils.appendToHead(m),m=B._loader,this._processFinishedLoad(B,m),this._loadedScripts[c]=!0)}},v._processFinishedLoad=function(u,c){var m;this._numItemsLoaded++,this.maintainScriptOrder||u.type!=re.Types.JAVASCRIPT||(m=c.getTag(),re.DomUtils.appendToHead(m)),this._updateProgress(),this._sendFileComplete(u,c),this._loadNext()},v._canStartLoad=function(u){if(!this.maintainScriptOrder||u.preferXHR||(u=u.getItem(),u.type!=re.Types.JAVASCRIPT))return!0;if(this._currentlyLoadingScript)return!1;for(var c=this._scriptOrder.indexOf(u),m=0;m<c;){if(this._loadedScripts[m]==null)return!1;m++}return this._currentlyLoadingScript=!0},v._removeLoadItem=function(u){for(var c=this._currentLoads.length,m=0;m<c;m++)if(this._currentLoads[m]==u){this._currentLoads.splice(m,1);break}},v._cleanLoadItem=function(u){u=u.getItem(),u&&delete u._loader},v._handleProgress=function(u){u=u.target,this._sendFileProgress(u.getItem(),u.progress),this._updateProgress()},v._updateProgress=function(){var u=this._numItemsLoaded/this._numItems,c=this._numItems-this._numItemsLoaded;if(0<c){for(var m=0,B=0,z=this._currentLoads.length;B<z;B++)m+=this._currentLoads[B].progress;u+=m/c*(c/this._numItems)}this._lastProgress!=u&&(this._sendProgress(u),this._lastProgress=u)},v._disposeItem=function(u){delete this._loadedResults[u.id],delete this._loadedRawResults[u.id],delete this._loadItemsById[u.id],delete this._loadItemsBySrc[u.src]},v._sendFileProgress=function(u,c){var m;this._isCanceled()||this._paused||this.hasEventListener("fileprogress")&&((m=new re.Event("fileprogress")).progress=c,m.loaded=c,m.total=1,m.item=u,this.dispatchEvent(m))},v._sendFileComplete=function(u,c){var m;this._isCanceled()||this._paused||((m=new re.Event("fileload")).loader=c,m.item=u,m.result=this._loadedResults[u.id],m.rawResult=this._loadedRawResults[u.id],u.completeHandler&&u.completeHandler(m),this.hasEventListener("fileload")&&this.dispatchEvent(m))},v._sendFileStart=function(u){var c=new re.Event("filestart");c.item=u,this.hasEventListener("filestart")&&this.dispatchEvent(c)},v.toString=function(){return"[PreloadJS LoadQueue]"},re.LoadQueue=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(v){this.AbstractLoader_constructor(v,!0,re.Types.TEXT)}re.extend(e,re.AbstractLoader),e.canLoadItem=function(v){return v.type==re.Types.TEXT},re.TextLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.BINARY),this.on("initialize",this._updateXHR,this)}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.BINARY},v._updateXHR=function(a){a.loader.setResponseType("arraybuffer")},re.BinaryLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=u?re.Elements.style():re.Elements.link(),this._tag.rel="stylesheet",this._tag.type="text/css"}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.CSS},v._formatResult=function(a){var u;return this._preferXHR?(u=a.getTag()).styleSheet?u.styleSheet.cssText=a.getResult(!0):(a=re.Elements.text(a.getResult(!0)),u.appendChild(a)):u=this._tag,re.DomUtils.appendToHead(u),u},re.CSSLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,a.type),this._faces={},this._watched=[],this._count=0,this._watchInterval=null,this._loadTimeout=null,this._injectCSS=a.injectCSS===void 0||a.injectCSS,this.dispatchEvent("initialize")}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.FONT||a.type==re.Types.FONTCSS},e.sampleText="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",e._ctx=document.createElement("canvas").getContext("2d"),e._referenceFonts=["serif","monospace"],e.WEIGHT_REGEX=/[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/gi,e.STYLE_REGEX=/[- ._]*(italic|oblique)[- ._]*/gi,e.FONT_FORMAT={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"truetype"},e.FONT_WEIGHT={thin:100,extralight:200,ultralight:200,light:300,semilight:300,demilight:300,book:"normal",regular:"normal",semibold:600,demibold:600,extrabold:800,ultrabold:800,black:900,heavy:900},e.WATCH_DURATION=10,v.load=function(){var a;if(this.type==re.Types.FONTCSS){if(!this._watchCSS())return void this.AbstractLoader_load()}else this._item.src instanceof Array?this._watchFontArray():(a=this._defFromSrc(this._item.src),this._watchFont(a),this._injectStyleTag(this._cssFromDef(a)));this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this.dispatchEvent("loadstart")},v._handleTimeout=function(){this._stopWatching(),this.dispatchEvent(new re.ErrorEvent("PRELOAD_TIMEOUT"))},v._createRequest=function(){return this._request},v.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response,this._result=!0,this._parseCSS(this._rawResult);break;case"error":this._stopWatching(),this.AbstractLoader_handleEvent(a)}},v._watchCSS=function(){var a=this._item.src;return a instanceof HTMLStyleElement&&(this._injectCSS&&!a.parentNode&&(document.head||document.getElementsByTagName("head")[0]).appendChild(a),this._injectCSS=!1,a="\n"+a.textContent),a.search(/\n|\r|@font-face/i)!==-1?(this._parseCSS(a),!0):(this._request=new re.XHRRequest(this._item),!1)},v._parseCSS=function(a){for(var u=/@font-face\s*\{([^}]+)}/g;;){var c=u.exec(a);if(!c)break;this._watchFont(this._parseFontFace(c[1]))}this._injectStyleTag(a)},v._watchFontArray=function(){for(var a=this._item.src,u="",c=a.length-1;0<=c;c--){var m=a[c],m=typeof m=="string"?this._defFromSrc(m):this._defFromObj(m);this._watchFont(m),u+=this._cssFromDef(m)+"\n"}this._injectStyleTag(u)},v._injectStyleTag=function(a){var u,c;this._injectCSS&&(u=document.head||document.getElementsByTagName("head")[0],(c=document.createElement("style")).type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),u.appendChild(c))},v._parseFontFace=function(a){var u=this._getCSSValue(a,"font-family"),c=this._getCSSValue(a,"src");return u&&c?this._defFromObj({family:u,src:c,style:this._getCSSValue(a,"font-style"),weight:this._getCSSValue(a,"font-weight")}):null},v._watchFont=function(a){a&&!this._faces[a.id]&&(this._faces[a.id]=a,this._watched.push(a),this._count++,this._calculateReferenceSizes(a),this._startWatching())},v._startWatching=function(){this._watchInterval==null&&(this._watchInterval=setInterval(re.proxy(this._watch,this),e.WATCH_DURATION))},v._stopWatching=function(){clearInterval(this._watchInterval),clearTimeout(this._loadTimeout),this._watchInterval=null},v._watch=function(){for(var a=this._watched,u=e._referenceFonts,c=a.length,m=c-1;0<=m;m--)for(var B=a[m],z=B.refs,oe=z.length-1;0<=oe;oe--)if(this._getTextWidth(B.family+","+u[oe],B.weight,B.style)!=z[oe]){var ke=new re.Event("fileload");B.type="font-family",ke.item=B,this.dispatchEvent(ke),a.splice(m,1);break}c!==a.length&&(ke=new re.ProgressEvent(this._count-a.length,this._count),this.dispatchEvent(ke)),c===0&&(this._stopWatching(),this._sendComplete())},v._calculateReferenceSizes=function(a){for(var u=e._referenceFonts,c=a.refs=[],m=0;m<u.length;m++)c[m]=this._getTextWidth(u[m],a.weight,a.style)},v._defFromSrc=function(a){var u=/[- ._]+/g,c=a,m=null,B=c.search(/[?#]/);B!==-1&&(c=c.substr(0,B)),(B=c.lastIndexOf("."))!==-1&&(m=c.substr(B+1),c=c.substr(0,B)),(B=c.lastIndexOf("/"))!==-1&&(c=c.substr(B+1));var z=c,oe=z.match(e.WEIGHT_REGEX);return oe&&(oe=oe[0],z=z.replace(oe,""),oe=oe.replace(u,"").toLowerCase()),B=c.match(e.STYLE_REGEX),B&&(z=z.replace(B[0],""),B="italic"),z=z.replace(u,""),a="local('"+c.replace(u," ")+"'), url('"+a+"')",m=e.FONT_FORMAT[m],m&&(a+=" format('"+m+"')"),this._defFromObj({family:z,weight:e.FONT_WEIGHT[oe]||oe,style:B,src:a})},v._defFromObj=function(a){return a={family:a.family,src:a.src,style:a.style||"normal",weight:a.weight||"normal"},a.id=a.family+";"+a.style+";"+a.weight,a},v._cssFromDef=function(a){return"@font-face {\n	font-family: '"+a.family+"';\n	font-style: "+a.style+";\n	font-weight: "+a.weight+";\n	src: "+a.src+";\n}"},v._getTextWidth=function(a,u,c){var m=e._ctx;return m.font=c+" "+u+" 72px "+a,m.measureText(e.sampleText).width},v._getCSSValue=function(a,u){return a=new RegExp(u+":s*([^;}]+?)s*[;}]").exec(a),a&&a[1]?a[1]:null},re.FontLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",re.DomUtils.isImageTag(a)?this._tag=a:re.DomUtils.isImageTag(a.src)?this._tag=a.src:re.DomUtils.isImageTag(a.tag)&&(this._tag=a.tag),this._tag!=null?this._preferXHR=!1:this._tag=re.Elements.img(),this.on("initialize",this._updateXHR,this)}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.IMAGE},v.load=function(){var a;this._tag.src!=""&&this._tag.complete?this._sendComplete():((a=this._item.crossOrigin)==1&&(a="Anonymous"),a==null||re.URLUtils.isLocal(this._item)||(this._tag.crossOrigin=a),this.AbstractLoader_load())},v._updateXHR=function(a){a.loader.mimeType="text/plain; charset=x-user-defined-binary",a.loader.setResponseType&&a.loader.setResponseType("blob")},v._formatResult=function(a){return this._formatImage},v._formatImage=function(a,u){var c=this._tag,m=window.URL||window.webkitURL;this._preferXHR&&(m?(this.getResult(!0)&&(m=m.createObjectURL(this.getResult(!0)),c.src=m),c.addEventListener("load",this._cleanUpURL,!1),c.addEventListener("error",this._cleanUpURL,!1)):c.src=this._item.src),c.complete?a(c):(c.onload=re.proxy(function(){a(this._tag),c.onload=c.onerror=null},this),c.onerror=re.proxy(function(B){u(new re.ErrorEvent("IMAGE_FORMAT",null,B)),c.onload=c.onerror=null},this))},v._cleanUpURL=function(a){(window.URL||window.webkitURL).revokeObjectURL(a.target.src)},re.ImageLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(re.Elements.script())}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JAVASCRIPT},v._formatResult=function(a){var u=a.getTag();return this._preferXHR&&(u.text=a.getResult(!0)),u},re.JavaScriptLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.JSON),this.resultFormatter=this._formatResult}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JSON},v._formatResult=function(a){var u=null;try{u=re.DataUtils.parseJSON(a.getResult(!0))}catch(m){var c=new re.ErrorEvent("JSON_FORMAT",null,m);return this._sendError(c),m}return u},re.JSONLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!1,re.Types.JSONP),this.setTag(re.Elements.script()),this.getTag().type="text/javascript"}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JSONP},v.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},v.load=function(){if(this._item.callback==null)throw new Error("callback is required for loading JSONP requests.");if(window[this._item.callback]!=null)throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=re.proxy(this._handleLoad,this),re.DomUtils.appendToBody(this._tag),this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},v._handleLoad=function(a){this._result=this._rawResult=a,this._sendComplete(),this._dispose()},v._handleTimeout=function(){this._dispose(),this.dispatchEvent(new re.ErrorEvent("timeout"))},v._dispose=function(){re.DomUtils.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},re.JSONPLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,c){this.AbstractLoader_constructor(u,c,re.Types.MANIFEST),this.plugins=null,this._manifestQueue=null}var v=re.extend(e,re.AbstractLoader),a=e;a.MANIFEST_PROGRESS=.25,a.canLoadItem=function(u){return u.type==re.Types.MANIFEST},v.load=function(){this.AbstractLoader_load()},v._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?re.JSONPLoader:re.JSONLoader)(this._item)},v.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.MANIFEST_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},v.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},v._loadManifest=function(u){if(u&&u.manifest){var c=this._manifestQueue=new re.LoadQueue(this._preferXHR);c.on("fileload",this._handleManifestFileLoad,this),c.on("progress",this._handleManifestProgress,this),c.on("complete",this._handleManifestComplete,this,!0),c.on("error",this._handleManifestError,this,!0);for(var m=0,B=this.plugins.length;m<B;m++)c.installPlugin(this.plugins[m]);c.loadManifest(u)}else this._sendComplete()},v._handleManifestFileLoad=function(u){u.target=null,this.dispatchEvent(u)},v._handleManifestComplete=function(u){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},v._handleManifestProgress=function(u){this.progress=u.progress*(1-a.MANIFEST_PROGRESS)+a.MANIFEST_PROGRESS,this._sendProgress(this.progress)},v._handleManifestError=function(u){var c=new re.Event("fileerror");c.item=u.data,this.dispatchEvent(c)},re.ManifestLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,re.Types.SOUND),re.DomUtils.isAudioTag(a)||re.DomUtils.isAudioTag(a.src)?this._tag=a:re.DomUtils.isAudioTag(a.tag)&&(this._tag=re.DomUtils.isAudioTag(a)?a:a.src),this._tag!=null&&(this._preferXHR=!1)}var v=re.extend(e,re.AbstractMediaLoader);e.canLoadItem=function(a){return a.type==re.Types.SOUND},v._createTag=function(a){var u=re.Elements.audio();return u.autoplay=!1,u.preload="none",u.src=a,u},re.SoundLoader=re.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,re.Types.VIDEO),re.DomUtils.isVideoTag(a)||re.DomUtils.isVideoTag(a.src)?(this.setTag(re.DomUtils.isVideoTag(a)?a:a.src),this._preferXHR=!1):this.setTag(this._createTag())}var v=e;re.extend(e,re.AbstractMediaLoader)._createTag=function(){return re.Elements.video()},v.canLoadItem=function(a){return a.type==re.Types.VIDEO},re.VideoLoader=re.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(u,c){this.AbstractLoader_constructor(u,c,re.Types.SPRITESHEET),this._manifestQueue=null}var v=re.extend(e,re.AbstractLoader),a=e;a.SPRITESHEET_PROGRESS=.25,a.canLoadItem=function(u){return u.type==re.Types.SPRITESHEET},v.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},v._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?re.JSONPLoader:re.JSONLoader)(this._item)},v.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.SPRITESHEET_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},v._loadManifest=function(u){var c;u&&u.images&&((c=this._manifestQueue=new re.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin)).on("complete",this._handleManifestComplete,this,!0),c.on("fileload",this._handleManifestFileLoad,this),c.on("progress",this._handleManifestProgress,this),c.on("error",this._handleManifestError,this,!0),c.loadManifest(u.images))},v._handleManifestFileLoad=function(u){var c,m=u.result;m!=null&&(u=(c=this.getResult().images).indexOf(u.item.src),c[u]=m)},v._handleManifestComplete=function(u){this._result=new re.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},v._handleManifestProgress=function(u){this.progress=u.progress*(1-a.SPRITESHEET_PROGRESS)+a.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},v._handleManifestError=function(u){var c=new re.Event("fileerror");c.item=u.data,this.dispatchEvent(c)},re.SpriteSheetLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",u?this.setTag(re.Elements.svg()):(this.setTag(re.Elements.object()),this.getTag().type="image/svg+xml")}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.SVG},v._formatResult=function(c){var u=re.DataUtils.parseXML(c.getResult(!0)),c=c.getTag();return!this._preferXHR&&document.body.contains(c)&&document.body.removeChild(c),u.documentElement==null?u:(u=u.documentElement,document.importNode&&(u=document.importNode(u,!0)),c.appendChild(u),c)},re.SVGLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.XML),this.resultFormatter=this._formatResult}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.XML},v._formatResult=function(a){return re.DataUtils.parseXML(a.getResult(!0))},re.XMLLoader=re.promote(e,"AbstractLoader")}(),function(){var e=re.SoundJS=re.SoundJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var v=e.agent=window.navigator.userAgent;e.isWindowPhone=-1<v.indexOf("IEMobile")||-1<v.indexOf("Windows Phone"),e.isFirefox=-1<v.indexOf("Firefox"),e.isOpera=window.opera!=null,e.isChrome=-1<v.indexOf("Chrome"),e.isIOS=(-1<v.indexOf("iPod")||-1<v.indexOf("iPhone")||-1<v.indexOf("iPad"))&&!e.isWindowPhone,e.isAndroid=-1<v.indexOf("Android")&&!e.isWindowPhone,e.isBlackberry=-1<v.indexOf("Blackberry"),e.isEdge=-1<v.indexOf("Edg"),re.BrowserDetect=e}(),function(){"use strict";function e(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null}var v=e.prototype={},a=e;a.create=function(u){if(typeof u=="string")return console&&(console.warn||console.log)("Deprecated behaviour. Sound.play takes a configuration object instead of individual arguments. See docs for info."),new re.PlayPropsConfig().set({interrupt:u});if(u==null||u instanceof a||u instanceof Object)return new re.PlayPropsConfig().set(u);if(u==null)throw new Error("PlayProps configuration not recognized.")},v.set=function(u){if(u!=null)for(var c in u)this[c]=u[c];return this},v.toString=function(){return"[PlayPropsConfig]"},re.PlayPropsConfig=a}(),function(){"use strict";function e(){throw"Sound cannot be instantiated"}var v=e;function a(c,m){this.init(c,m)}v.INTERRUPT_ANY="any",v.INTERRUPT_EARLY="early",v.INTERRUPT_LATE="late",v.INTERRUPT_NONE="none",v.PLAY_INITED="playInited",v.PLAY_SUCCEEDED="playSucceeded",v.PLAY_INTERRUPTED="playInterrupted",v.PLAY_FINISHED="playFinished",v.PLAY_FAILED="playFailed",v.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],v.EXTENSION_MAP={m4a:"mp4"},v.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,v.defaultInterruptBehavior=v.INTERRUPT_NONE,v.alternateExtensions=[],v.activePlugin=null,v._masterVolume=1,v._getMasterVolume=function(){return this._masterVolume},v.getVolume=re.deprecate(v._getMasterVolume,"Sound.getVolume"),v._setMasterVolume=function(c){if(Number(c)!=null&&(c=Math.max(0,Math.min(1,c)),v._masterVolume=c,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(c)))for(var m=this._instances,B=0,z=m.length;B<z;B++)m[B].setMasterVolume(c)},v.setVolume=re.deprecate(v._setMasterVolume,"Sound.setVolume"),v._masterMute=!1,v._getMute=function(){return this._masterMute},v.getMute=re.deprecate(v._getMute,"Sound.getMute"),v._setMute=function(c){if(c!=null&&(this._masterMute=c,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(c)))for(var m=this._instances,B=0,z=m.length;B<z;B++)m[B].setMasterMute(c)},v.setMute=re.deprecate(v._setMute,"Sound.setMute"),v._getCapabilities=function(){return v.activePlugin==null?null:v.activePlugin._capabilities},v.getCapabilities=re.deprecate(v._getCapabilities,"Sound.getCapabilities"),Object.defineProperties(v,{volume:{get:v._getMasterVolume,set:v._setMasterVolume},muted:{get:v._getMute,set:v._setMute},capabilities:{get:v._getCapabilities}}),v._pluginsRegistered=!1,v._lastID=0,v._instances=[],v._idHash={},v._preloadHash={},v._defaultPlayPropsHash={},v.addEventListener=null,v.removeEventListener=null,v.removeAllEventListeners=null,v.dispatchEvent=null,v.hasEventListener=null,v._listeners=null,re.EventDispatcher.initialize(v),v.getPreloadHandlers=function(){return{callback:re.proxy(v.initLoad,v),types:["sound"],extensions:v.SUPPORTED_EXTENSIONS}},v._handleLoadComplete=function(c){var m=c.target.getItem().src;if(v._preloadHash[m])for(var B=0,z=v._preloadHash[m].length;B<z;B++){var oe=v._preloadHash[m][B];v._preloadHash[m][B]=!0,v.hasEventListener("fileload")&&((c=new re.Event("fileload")).src=oe.src,c.id=oe.id,c.data=oe.data,c.sprite=oe.sprite,v.dispatchEvent(c))}},v._handleLoadError=function(c){var m=c.target.getItem().src;if(v._preloadHash[m])for(var B=0,z=v._preloadHash[m].length;B<z;B++){var oe=v._preloadHash[m][B];v._preloadHash[m][B]=!1,v.hasEventListener("fileerror")&&((c=new re.Event("fileerror")).src=oe.src,c.id=oe.id,c.data=oe.data,c.sprite=oe.sprite,v.dispatchEvent(c))}},v._registerPlugin=function(c){return!!c.isSupported()&&(v.activePlugin=new c,!0)},v.registerPlugins=function(c){v._pluginsRegistered=!0;for(var m=0,B=c.length;m<B;m++)if(v._registerPlugin(c[m]))return!0;return!1},v.initializeDefaultPlugins=function(){return v.activePlugin!=null||!v._pluginsRegistered&&!!v.registerPlugins([re.WebAudioPlugin,re.HTMLAudioPlugin])},v.isReady=function(){return v.activePlugin!=null},v.initLoad=function(c){return c.type=="video"||v._registerSound(c)},v._registerSound=function(c){if(!v.initializeDefaultPlugins()||(c.src instanceof Object?(ke=v._parseSrc(c.src)).src=c.path+ke.src:ke=v._parsePath(c.src),ke==null))return!1;c.src=ke.src,c.type="sound";var m=c.data,B=null;if(m!=null&&(isNaN(m.channels)?isNaN(m)||(B=parseInt(m)):B=parseInt(m.channels),m.audioSprite))for(var z,oe=m.audioSprite.length;oe--;)z=m.audioSprite[oe],v._idHash[z.id]={src:c.src,startTime:parseInt(z.startTime),duration:parseInt(z.duration)},z.defaultPlayProps&&(v._defaultPlayPropsHash[z.id]=re.PlayPropsConfig.create(z.defaultPlayProps));c.id!=null&&(v._idHash[c.id]={src:c.src});var ke=v.activePlugin.register(c);return a.create(c.src,B),m!=null&&isNaN(m)?c.data.channels=B||a.maxPerChannel():c.data=B||a.maxPerChannel(),ke.type&&(c.type=ke.type),c.defaultPlayProps&&(v._defaultPlayPropsHash[c.src]=re.PlayPropsConfig.create(c.defaultPlayProps)),ke},v.registerSound=function(c,m,B,z,oe){if(oe={src:c,id:m,data:B,defaultPlayProps:oe},c instanceof Object&&c.src&&(z=m,oe=c),((oe=re.LoadItem.create(oe)).path=z)==null||oe.src instanceof Object||(oe.src=z+oe.src),z=v._registerSound(oe),!z)return!1;if(v._preloadHash[oe.src]||(v._preloadHash[oe.src]=[]),v._preloadHash[oe.src].push(oe),v._preloadHash[oe.src].length==1)z.on("complete",this._handleLoadComplete,this),z.on("error",this._handleLoadError,this),v.activePlugin.preload(z);else if(v._preloadHash[oe.src][0]==1)return!0;return oe},v.registerSounds=function(c,m){var B=[];c.path&&(m?m+=c.path:m=c.path,c=c.manifest);for(var z=0,oe=c.length;z<oe;z++)B[z]=re.Sound.registerSound(c[z].src,c[z].id,c[z].data,m,c[z].defaultPlayProps);return B},v.removeSound=function(c,m){if(v.activePlugin==null)return!1;var B,z;if(c instanceof Object&&c.src&&(c=c.src),(B=c instanceof Object?v._parseSrc(c):(c=v._getSrcById(c).src,v._parsePath(c)))==null)return!1;for(z in c=B.src,m!=null&&(c=m+c),v._idHash)v._idHash[z].src==c&&delete v._idHash[z];return a.removeSrc(c),delete v._preloadHash[c],v.activePlugin.removeSound(c),!0},v.removeSounds=function(c,m){var B=[];c.path&&(m?m+=c.path:m=c.path,c=c.manifest);for(var z=0,oe=c.length;z<oe;z++)B[z]=re.Sound.removeSound(c[z].src,m);return B},v.removeAllSounds=function(){v._idHash={},v._preloadHash={},a.removeAll(),v.activePlugin&&v.activePlugin.removeAllSounds()},v.loadComplete=function(c){if(!v.isReady())return!1;var m=v._parsePath(c);return c=(m?v._getSrcById(m.src):v._getSrcById(c)).src,v._preloadHash[c]!=null&&v._preloadHash[c][0]==1},v._parsePath=function(c){typeof c!="string"&&(c=c.toString());var m=c.match(v.FILE_PATTERN);if(m==null)return!1;for(var B=m[4],z=m[5],oe=v.capabilities,ke=0;!oe[z];)if(z=v.alternateExtensions[ke++],ke>v.alternateExtensions.length)return null;return{name:B,src:c=c.replace("."+m[5],"."+z),extension:z}},v._parseSrc=function(c){var m,B={name:void 0,src:void 0,extension:void 0},z=v.capabilities;for(m in c)if(c.hasOwnProperty(m)&&z[m]){B.src=c[m],B.extension=m;break}if(!B.src)return!1;var oe=B.src.lastIndexOf("/");return B.name=oe!=-1?B.src.slice(oe+1):B.src,B},v.play=function(c,m){var B;return re.WebAudioPlugin&&re.WebAudioPlugin.context&&(console.log("audio context available"),(B=re.WebAudioPlugin.context).state!=="interrupted"&&B.state!=="suspended"||B.resume()),m=re.PlayPropsConfig.create(m),c=v.createInstance(c,m.startTime,m.duration),B&&(c.audioCtx=B),v._playInstance(c,m)||c._playFailed(),c},v.createInstance=function(c,m,B){if(!v.initializeDefaultPlugins())return new re.DefaultSoundInstance(c,m,B);var z=v._defaultPlayPropsHash[c];c=v._getSrcById(c);var oe=v._parsePath(c.src),ke=null;return oe!=null&&oe.src!=null?(a.create(oe.src),m==null&&(m=c.startTime),ke=v.activePlugin.create(oe.src,m,B||c.duration),(z=z||v._defaultPlayPropsHash[oe.src])&&ke.applyPlayProps(z)):ke=new re.DefaultSoundInstance(c,m,B),ke.uniqueId=v._lastID++,ke},v.stop=function(){for(var c=this._instances,m=c.length;m--;)c[m].stop()},v.setDefaultPlayProps=function(c,m){c=v._getSrcById(c),v._defaultPlayPropsHash[v._parsePath(c.src).src]=re.PlayPropsConfig.create(m)},v.getDefaultPlayProps=function(c){return c=v._getSrcById(c),v._defaultPlayPropsHash[v._parsePath(c.src).src]},v._playInstance=function(c,m){var B=v._defaultPlayPropsHash[c.src]||{};if(m.interrupt==null&&(m.interrupt=B.interrupt||v.defaultInterruptBehavior),m.delay==null&&(m.delay=B.delay||0),m.offset==null&&(m.offset=c.position),m.loop==null&&(m.loop=c.loop),m.volume==null&&(m.volume=c.volume),m.pan==null&&(m.pan=c.pan),m.delay==0){if(!v._beginPlaying(c,m))return!1}else B=setTimeout(function(){v._beginPlaying(c,m)},m.delay),c.delayTimeoutId=B;return this._instances.push(c),!0},v._beginPlaying=function(c,m){return a.add(c,m.interrupt)?c._beginPlaying(m)?!0:(c=re.indexOf(this._instances,c),-1<c&&this._instances.splice(c,1),!1):!1},v._getSrcById=function(c){return v._idHash[c]||{src:c}},v._playFinished=function(c){a.remove(c),c=re.indexOf(this._instances,c),-1<c&&this._instances.splice(c,1)},re.Sound=e,a.channels={},a.create=function(c,m){return a.get(c)==null&&(a.channels[c]=new a(c,m),!0)},a.removeSrc=function(c){var m=a.get(c);return m!=null&&(m._removeAll(),delete a.channels[c],!0)},a.removeAll=function(){for(var c in a.channels)a.channels[c]._removeAll();a.channels={}},a.add=function(c,m){var B=a.get(c.src);return B!=null&&B._add(c,m)},a.remove=function(c){var m=a.get(c.src);return m!=null&&(m._remove(c),!0)},a.maxPerChannel=function(){return u.maxDefault},a.get=function(c){return a.channels[c]};var u=a.prototype;u.constructor=a,u.src=null,u.max=null,u.maxDefault=100,u.length=0,u.init=function(c,m){this.src=c,this.max=m||this.maxDefault,this.max==-1&&(this.max=this.maxDefault),this._instances=[]},u._get=function(c){return this._instances[c]},u._add=function(c,m){return!!this._getSlot(m,c)&&(this._instances.push(c),this.length++,!0)},u._remove=function(c){return c=re.indexOf(this._instances,c),c!=-1&&(this._instances.splice(c,1),this.length--,!0)},u._removeAll=function(){for(var c=this.length-1;0<=c;c--)this._instances[c].stop()},u._getSlot=function(c,m){var B,z;if(c!=e.INTERRUPT_NONE&&(z=this._get(0))==null)return!0;for(var oe=0,ke=this.max;oe<ke;oe++){if((B=this._get(oe))==null)return!0;if(B.playState==e.PLAY_FINISHED||B.playState==e.PLAY_INTERRUPTED||B.playState==e.PLAY_FAILED){z=B;break}c!=e.INTERRUPT_NONE&&(c==e.INTERRUPT_EARLY&&B.position<z.position||c==e.INTERRUPT_LATE&&B.position>z.position)&&(z=B)}return z!=null&&(z._interrupt(),this._remove(z),!0)},u.toString=function(){return"[Sound SoundChannel]"}}(),function(){"use strict";function e(a,u,c,m){this.EventDispatcher_constructor(),this.src=a,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this._getVolume,set:this._setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this._getPan,set:this._setPan}),this._startTime=Math.max(0,u||0),Object.defineProperty(this,"startTime",{get:this._getStartTime,set:this._setStartTime}),this._duration=Math.max(0,c||0),Object.defineProperty(this,"duration",{get:this._getDuration,set:this._setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this._getPlaybackResource,set:this._setPlaybackResource}),m!==!1&&m!==!0&&this._setPlaybackResource(m),this._position=0,Object.defineProperty(this,"position",{get:this._getPosition,set:this._setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this._getLoop,set:this._setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this._getMuted,set:this._setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this._getPaused,set:this._setPaused})}var v=re.extend(e,re.EventDispatcher);v.play=function(a){return a=re.PlayPropsConfig.create(a),this.playState==re.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this._setPaused(!1))):(this._cleanUp(),re.Sound._playInstance(this,a),this)},v.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=re.Sound.PLAY_FINISHED,this},v.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},v.applyPlayProps=function(a){return a.offset!=null&&this._setPosition(a.offset),a.loop!=null&&this._setLoop(a.loop),a.volume!=null&&this._setVolume(a.volume),a.pan!=null&&this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this},v.toString=function(){return"[AbstractSoundInstance]"},v._getPaused=function(){return this._paused},v._setPaused=function(a){if(!(a!==!0&&a!==!1||this._paused==a||a==1&&this.playState!=re.Sound.PLAY_SUCCEEDED))return(this._paused=a)?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},v._setVolume=function(a){return a==this._volume||(this._volume=Math.max(0,Math.min(1,a)),this._muted||this._updateVolume()),this},v._getVolume=function(){return this._volume},v._setMuted=function(a){if(a===!0||a===!1)return this._muted=a,this._updateVolume(),this},v._getMuted=function(){return this._muted},v._setPan=function(a){return a==this._pan||(this._pan=Math.max(-1,Math.min(1,a)),this._updatePan()),this},v._getPan=function(){return this._pan},v._getPosition=function(){return this._paused||this.playState!=re.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},v._setPosition=function(a){return this._position=Math.max(0,a),this.playState==re.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},v._getStartTime=function(){return this._startTime},v._setStartTime=function(a){return a==this._startTime||(this._startTime=Math.max(0,a||0),this._updateStartTime()),this},v._getDuration=function(){return this._duration},v._setDuration=function(a){return a==this._duration||(this._duration=Math.max(0,a||0),this._updateDuration()),this},v._setPlaybackResource=function(a){return this._playbackResource=a,this._duration==0&&this._playbackResource&&this._setDurationFromSource(),this},v._getPlaybackResource=function(){return this._playbackResource},v._getLoop=function(){return this._loop},v._setLoop=function(a){this._playbackResource!=null&&(this._loop!=0&&a==0?this._removeLooping(a):this._loop==0&&a!=0&&this._addLooping(a)),this._loop=a},v._sendEvent=function(a){a=new re.Event(a),this.dispatchEvent(a)},v._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,re.Sound._playFinished(this)},v._interrupt=function(){this._cleanUp(),this.playState=re.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},v._beginPlaying=function(a){return this._setPosition(a.offset),this._setLoop(a.loop),this._setVolume(a.volume),this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this._playbackResource!=null&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=re.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},v._playFailed=function(){this._cleanUp(),this.playState=re.Sound.PLAY_FAILED,this._sendEvent("failed")},v._handleSoundComplete=function(a){if((this._position=0)!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=re.Sound.PLAY_FINISHED,this._sendEvent("complete")},v._handleSoundReady=function(){},v._updateVolume=function(){},v._updatePan=function(){},v._updateStartTime=function(){},v._updateDuration=function(){},v._setDurationFromSource=function(){},v._calculateCurrentPosition=function(){},v._updatePosition=function(){},v._removeLooping=function(a){},v._addLooping=function(a){},v._pause=function(){},v._resume=function(){},v._handleStop=function(){},v._handleCleanUp=function(){},v._handleLoop=function(){},re.AbstractSoundInstance=re.promote(e,"EventDispatcher"),re.DefaultSoundInstance=re.AbstractSoundInstance}(),function(){"use strict";function e(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass}var v=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},v.register=function(a){var u=this._loaders[a.src];return u&&!u.canceled?this._loaders[a.src]:(this._audioSources[a.src]=!0,this._soundInstances[a.src]=[],(u=new this._loaderClass(a)).on("complete",this._handlePreloadComplete,this),this._loaders[a.src]=u)},v.preload=function(a){a.on("error",this._handlePreloadError,this),a.load()},v.isPreloadStarted=function(a){return this._audioSources[a]!=null},v.isPreloadComplete=function(a){return!(this._audioSources[a]==null||this._audioSources[a]==1)},v.removeSound=function(a){if(this._soundInstances[a]){for(var u=this._soundInstances[a].length;u--;)this._soundInstances[a][u].destroy();delete this._soundInstances[a],delete this._audioSources[a],this._loaders[a]&&this._loaders[a].destroy(),delete this._loaders[a]}},v.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)},v.create=function(a,u,c){return this.isPreloadStarted(a)||this.preload(this.register(a)),c=new this._soundInstanceClass(a,u,c,this._audioSources[a]),this._soundInstances[a]&&this._soundInstances[a].push(c),c.setMasterVolume&&c.setMasterVolume(re.Sound.volume),c.setMasterMute&&c.setMasterMute(re.Sound.muted),c},v.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},v.getVolume=function(){return this._volume},v.setMute=function(a){return this._updateVolume(),!0},v.toString=function(){return"[AbstractPlugin]"},v._handlePreloadComplete=function(a){var u=a.target.getItem().src;this._audioSources[u]=a.result;for(var c=0,m=this._soundInstances[u].length;c<m;c++)this._soundInstances[u][c].setPlaybackResource(this._audioSources[u]),this._soundInstances[u]=null},v._handlePreloadError=function(a){},v._updateVolume=function(){},re.AbstractPlugin=e}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.SOUND)}var v=re.extend(e,re.AbstractLoader);e.context=null,v.toString=function(){return"[WebAudioLoader]"},v._createRequest=function(){this._request=new re.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},v._sendComplete=function(a){e.context.decodeAudioData(this._rawResult,re.proxy(this._handleAudioDecoded,this),re.proxy(this._sendError,this))},v._handleAudioDecoded=function(a){this._result=a,this.AbstractLoader__sendComplete()},re.WebAudioLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,c,m,B){this.AbstractSoundInstance_constructor(u,c,m,B),this.gainNode=a.context.createGain(),this.panNode=a.context.createPanner(),this.panNode.panningModel=a._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=re.proxy(this._handleSoundComplete,this)}var v=re.extend(e,re.AbstractSoundInstance),a=e;a.context=null,a._scratchBuffer=null,a.destinationNode=null,a._panningModel="equalpower",v.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},v.toString=function(){return"[WebAudioSoundInstance]"},v._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},v._removeLooping=function(u){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},v._addLooping=function(u){this.playState==re.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},v._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},v._handleCleanUp=function(){this.sourceNode&&this.playState==re.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},v._cleanUpAudioNode=function(u){if(u){if(u.stop(0),u.disconnect(0),re.BrowserDetect.isIOS)try{u.buffer=a._scratchBuffer}catch(c){}u=null}return u},v._handleSoundReady=function(u){this.gainNode.connect(a.destinationNode);var c=.001*this._duration,m=Math.min(.001*Math.max(0,this._position),c);this.sourceNode=this._createAndPlayAudioNode(a.context.currentTime-c,m),this._playbackStartTime=this.sourceNode.startTime-m,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(c-m)),this._loop!=0&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},v._createAndPlayAudioNode=function(u,c){var m=a.context.createBufferSource();m.buffer=this.playbackResource,m.connect(this.panNode);var B=.001*this._duration;return m.startTime=u+B,m.start(m.startTime,c+.001*this._startTime,B-c),m},v._pause=function(){this._position=1e3*(a.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},v._resume=function(){this._handleSoundReady()},v._updateVolume=function(){var u=this._muted?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},v._calculateCurrentPosition=function(){return 1e3*(a.context.currentTime-this._playbackStartTime)},v._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},v._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},v._updateDuration=function(){this.playState==re.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},re.WebAudioSoundInstance=re.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=a._panningModel,this.context=a.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),re.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=a._capabilities,this._loaderClass=re.WebAudioLoader,this._soundInstanceClass=re.WebAudioSoundInstance,this._addPropsToClasses()}var v=re.extend(e,re.AbstractPlugin),a=e;a._capabilities=null,a._panningModel="equalpower",a.context=null,a._scratchBuffer=null,a._unlocked=!1,a.DEFAULT_SAMPLE_RATE=44100,a.isSupported=function(){var u=re.BrowserDetect.isIOS||re.BrowserDetect.isAndroid||re.BrowserDetect.isBlackberry;return!(location.protocol=="file:"&&!u&&!this._isFileXHRSupported())&&(a._generateCapabilities(),a.context!=null)},a.playEmptySound=function(){var u;a.context!=null&&((u=a.context.createBufferSource()).buffer=a._scratchBuffer,u.connect(a.context.destination),u.start(0,0,0))},a._isFileXHRSupported=function(){return document.location.host},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null||a.context==null&&(a.context=a._createAudioContext(),a.context==null))return null;a._scratchBuffer==null&&(a._scratchBuffer=a.context.createBuffer(1,1,22050)),a._compatibilitySetUp(),"ontouchstart"in window&&a.context.state!="running"&&(a._unlock(),document.addEventListener("mousedown",a._unlock,!0),document.addEventListener("touchstart",a._unlock,!0),document.addEventListener("touchend",a._unlock,!0)),a._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=re.Sound.SUPPORTED_EXTENSIONS,m=re.Sound.EXTENSION_MAP,B=0,z=c.length;B<z;B++){var oe=c[B],ke=m[oe]||oe;a._capabilities[oe]=u.canPlayType("audio/"+oe)!="no"&&u.canPlayType("audio/"+oe)!=""||u.canPlayType("audio/"+ke)!="no"&&u.canPlayType("audio/"+ke)!=""}a.context.destination.numberOfChannels<2&&(a._capabilities.panning=!1)}},a._createAudioContext=function(){var u=window.AudioContext||window.webkitAudioContext;if(u==null)return null;var c,m,B=new u;return console.warn("The AudioContext is ready"),/(iPhone|iPad)/i.test(navigator.userAgent)&&B.sampleRate!==a.DEFAULT_SAMPLE_RATE&&(c=B.createBuffer(1,1,a.DEFAULT_SAMPLE_RATE),(m=B.createBufferSource()).buffer=c,m.connect(B.destination),m.start(0),m.disconnect(),B.close(),B=new u),B},a._compatibilitySetUp=function(){var u;a._panningModel="equalpower",a.context.createGain||(a.context.createGain=a.context.createGainNode,(u=a.context.createBufferSource()).__proto__.start=u.__proto__.noteGrainOn,u.__proto__.stop=u.__proto__.noteOff,a._panningModel=0)},a._unlock=function(){a._unlocked||(a.playEmptySound(),a.context.state=="running"&&(document.removeEventListener("mousedown",a._unlock,!0),document.removeEventListener("touchend",a._unlock,!0),document.removeEventListener("touchstart",a._unlock,!0),a._unlocked=!0))},v.toString=function(){return"[WebAudioPlugin]"},v._addPropsToClasses=function(){var u=this._soundInstanceClass;u.context=this.context,u._scratchBuffer=a._scratchBuffer,u.destinationNode=this.gainNode,u._panningModel=this._panningModel,this._loaderClass.context=this.context},v._updateVolume=function(){var u=re.Sound._masterMute?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},re.WebAudioPlugin=re.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(){throw"HTMLAudioTagPool cannot be instantiated"}var v=e;function a(c){this._tags=[]}v._tags={},v._tagPool=new a,v._tagUsed={},v.get=function(c){var m=v._tags[c];return m==null?(m=v._tags[c]=v._tagPool.get()).src=c:v._tagUsed[c]?(m=v._tagPool.get()).src=c:v._tagUsed[c]=!0,m},v.set=function(c,m){m==v._tags[c]?v._tagUsed[c]=!1:v._tagPool.set(m)},v.remove=function(c){var m=v._tags[c];return m!=null&&(v._tagPool.set(m),delete v._tags[c],delete v._tagUsed[c],!0)},v.getDuration=function(c){return c=v._tags[c],c!=null&&c.duration?1e3*c.duration:0},re.HTMLAudioTagPool=e;var u=a.prototype;u.constructor=a,u.get=function(){var c=this._tags.length==0?this._createTag():this._tags.pop();return c.parentNode==null&&document.body.appendChild(c),c},u.set=function(c){re.indexOf(this._tags,c)==-1&&(this._tags.src=null,this._tags.push(c))},u.toString=function(){return"[TagPool]"},u._createTag=function(){var c=document.createElement("audio");return c.autoplay=!1,c.preload="none",c}}(),function(){"use strict";function e(a,u,c,m){this.AbstractSoundInstance_constructor(a,u,c,m),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=re.proxy(this._handleSoundComplete,this),this._readyHandler=re.proxy(this._handleTagReady,this),this._stalledHandler=re.proxy(this._playFailed,this),this._audioSpriteEndHandler=re.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=re.proxy(this._handleSoundComplete,this),c?this._audioSpriteStopTime=.001*(u+c):this._duration=re.HTMLAudioTagPool.getDuration(this.src)}var v=re.extend(e,re.AbstractSoundInstance);v.setMasterVolume=function(a){this._updateVolume()},v.setMasterMute=function(a){this._updateVolume()},v.toString=function(){return"[HTMLAudioSoundInstance]"},v._removeLooping=function(){this._playbackResource!=null&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},v._addLooping=function(){this._playbackResource==null||this._audioSpriteStopTime||(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},v._handleCleanUp=function(){var a=this._playbackResource;if(a!=null){a.pause(),a.loop=!1,a.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(u){}re.HTMLAudioTagPool.set(this.src,a),this._playbackResource=null}},v._beginPlaying=function(a){return this._playbackResource=re.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(a)},v._handleSoundReady=function(a){if(this._playbackResource.readyState!==4){var u=this._playbackResource;return u.addEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),u.addEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),u.preload="auto",void u.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._loop!=0&&(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},v._handleTagReady=function(a){this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},v._pause=function(){this._playbackResource.pause()},v._resume=function(){this._playbackResource.play()},v._updateVolume=function(){var a;this._playbackResource==null||(a=this._muted||re.Sound._masterMute?0:this._volume*re.Sound._masterVolume)!=this._playbackResource.volume&&(this._playbackResource.volume=a)},v._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},v._updatePosition=function(){this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(a){this._handleSetPositionSeek(null)}},v._handleSetPositionSeek=function(a){this._playbackResource!=null&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},v._handleAudioSpriteLoop=function(a){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),this._loop==0?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},v._handleLoop=function(a){this._loop==0&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},v._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==re.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},v._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==re.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},v._setDurationFromSource=function(){this._duration=re.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},re.HTMLAudioSoundInstance=re.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._capabilities=a._capabilities,this._loaderClass=re.SoundLoader,this._soundInstanceClass=re.HTMLAudioSoundInstance}var v=re.extend(e,re.AbstractPlugin),a=e;a.MAX_INSTANCES=30,a._AUDIO_READY="canplaythrough",a._AUDIO_ENDED="ended",a._AUDIO_SEEKED="seeked",a._AUDIO_STALLED="stalled",a._TIME_UPDATE="timeupdate",a._capabilities=null,a.isSupported=function(){return a._generateCapabilities(),a._capabilities!=null},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null)return null;a._capabilities={panning:!1,volume:!0,tracks:-1};for(var c=re.Sound.SUPPORTED_EXTENSIONS,m=re.Sound.EXTENSION_MAP,B=0,z=c.length;B<z;B++){var oe=c[B],ke=m[oe]||oe;a._capabilities[oe]=u.canPlayType("audio/"+oe)!="no"&&u.canPlayType("audio/"+oe)!=""||u.canPlayType("audio/"+ke)!="no"&&u.canPlayType("audio/"+ke)!=""}}},v.register=function(m){var c=re.HTMLAudioTagPool.get(m.src),m=this.AbstractPlugin_register(m);return m.setTag(c),m},v.removeSound=function(u){this.AbstractPlugin_removeSound(u),re.HTMLAudioTagPool.remove(u)},v.create=function(u,c,m){return m=this.AbstractPlugin_create(u,c,m),m.playbackResource=null,m},v.toString=function(){return"[HTMLAudioPlugin]"},v.setVolume=v.getVolume=v.setMute=null,re.HTMLAudioPlugin=re.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,this._status=-1,this._lastTick=0,a&&(this.useTicks=!!a.useTicks,this.ignoreGlobalPause=!!a.ignoreGlobalPause,this.loop=a.loop===!0?-1:a.loop||0,this.reversed=!!a.reversed,this.bounce=!!a.bounce,this.timeScale=a.timeScale||1,a.onChange&&this.addEventListener("change",a.onChange),a.onComplete&&this.addEventListener("complete",a.onComplete))}var v=re.extend(e,re.EventDispatcher);v._setPaused=function(a){return re.Tween._register(this,a),this},v.setPaused=re.deprecate(v._setPaused,"AbstractTween.setPaused"),v._getPaused=function(){return this._paused},v.getPaused=re.deprecate(v._getPaused,"AbstactTween.getPaused"),v._getCurrentLabel=function(a){var u=this.getLabels();a==null&&(a=this.position);for(var c=0,m=u.length;c<m&&!(a<u[c].position);c++);return c===0?null:u[c-1].label},v.getCurrentLabel=re.deprecate(v._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(v,{paused:{set:v._setPaused,get:v._getPaused},currentLabel:{get:v._getCurrentLabel}})}catch(a){}v.advance=function(a,u){this.setPosition(this.rawPosition+a*this.timeScale,u)},v.setPosition=function(a,u,c,m){var B=this.duration,z=this.loop,oe=this.rawPosition,ke=0,Se=0,t=!1;if(a<0&&(a=0),B===0){if(t=!0,oe!==-1)return t}else{if(Se=a-(ke=a/B|0)*B,(t=z!==-1&&z*B+B<=a)&&(a=(Se=B)*(ke=z)+B),a===oe)return t;!this.reversed!=!(this.bounce&&ke%2)&&(Se=B-Se)}this.position=Se,this.rawPosition=a,this._updatePosition(c,t),t&&(this.paused=!0),m&&m(this),u||this._runActions(oe,a,c,!c&&oe===-1),this.dispatchEvent("change"),t&&this.dispatchEvent("complete")},v.calculatePosition=function(a){var u=this.duration,c=this.loop,m=0,B=0;return u===0?0:(c!==-1&&c*u+u<=a?(B=u,m=c):B=a<0?0:a-(m=a/u|0)*u,!this.reversed!=!(this.bounce&&m%2)?u-B:B)},v.getLabels=function(){var a=this._labelList;if(!a){a=this._labelList=[];var u,c=this._labels;for(u in c)a.push({label:u,position:c[u]});a.sort(function(m,B){return m.position-B.position})}return a},v.setLabels=function(a){this._labels=a,this._labelList=null},v.addLabel=function(a,u){this._labels||(this._labels={}),this._labels[a]=u;var c=this._labelList;if(c){for(var m=0,B=c.length;m<B&&!(u<c[m].position);m++);c.splice(m,0,{label:a,position:u})}},v.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},v.gotoAndStop=function(a){this.paused=!0,this._goto(a)},v.resolve=function(a){var u=Number(a);return isNaN(u)&&(u=this._labels&&this._labels[a]),u},v.toString=function(){return"[AbstractTween]"},v.clone=function(){throw"AbstractTween can not be cloned."},v._init=function(a){a&&a.paused||(this.paused=!1),a&&a.position!=null&&this.setPosition(a.position)},v._updatePosition=function(a,u){},v._goto=function(a){a=this.resolve(a),a!=null&&this.setPosition(a,!1,!0)},v._runActions=function(a,u,c,m){if(this._actionHead||this.tweens){var B,z,oe,ke,Se=this.duration,t=this.reversed,r=this.bounce,i=this.loop;if(Se===0?(B=z=oe=ke=0,t=r=!1):(oe=a-(B=a/Se|0)*Se,ke=u-(z=u/Se|0)*Se),i!==-1&&(i<z&&(ke=Se,z=i),i<B&&(oe=Se,B=i)),c)return this._runActionsRange(ke,ke,c,m);if(B!==z||oe!==ke||c||m){B===-1&&(B=oe=0);var o=a<=u,l=B;do{var f=!t!=!(r&&l%2),h=l===B?oe:o?0:Se,g=l===z?ke:o?Se:0;if(f&&(h=Se-h,g=Se-g),(!r||l===B||h!==g)&&this._runActionsRange(h,g,c,m||l!==B&&!r))return!0}while(m=!1,o&&++l<=z||!o&&--l>=z)}}},v._runActionsRange=function(a,u,c,m){},re.AbstractTween=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(c,m){this.AbstractTween_constructor(m),this.pluginData=null,this.target=c,this.passive=!1,this._stepHead=new a(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,m&&(this.pluginData=m.pluginData,m.override&&e.removeTweens(c)),this.pluginData||(this.pluginData={}),this._init(m)}var v=re.extend(e,re.AbstractTween);function a(c,m,B,z,oe,ke){this.next=null,this.prev=c,this.t=m,this.d=B,this.props=z,this.ease=oe,this.passive=ke,this.index=c?c.index+1:0}function u(c,m,B,z,oe){this.next=null,this.prev=c,this.t=m,this.d=0,this.scope=B,this.funct=z,this.params=oe}e.IGNORE={},e._tweens=[],e._plugins=null,e._tweenHead=null,e._tweenTail=null,e._inTick=0,e.get=function(c,m){return new e(c,m)},e.tick=function(c,m){for(var B=e._tweenHead,z=e._inTick=Date.now();B;){var oe=B._next,ke=B._status;B._lastTick=z,ke===1?B._status=0:ke===-1?e._delist(B):m&&!B.ignoreGlobalPause||B._paused||B.advance(B.useTicks?1:c),B=oe}e._inTick=0},e.handleEvent=function(c){c.type==="tick"&&this.tick(c.delta,c.paused)},e.removeTweens=function(c){if(c.tweenjs_count){for(var m=e._tweenHead;m;){var B=m._next;m.target===c&&e._register(m,!0),m=B}c.tweenjs_count=0}},e.removeAllTweens=function(){for(var c=e._tweenHead;c;){var m=c._next;c._paused=!0,c.target&&(c.target.tweenjs_count=0),c._next=c._prev=null,c=m}e._tweenHead=e._tweenTail=null},e.hasActiveTweens=function(c){return c?!!c.tweenjs_count:!!e._tweenHead},e._installPlugin=function(c){for(var m=c.priority=c.priority||0,B=e._plugins=e._plugins||[],z=0,oe=B.length;z<oe&&!(m<B[z].priority);z++);B.splice(z,0,c)},e._register=function(c,m){var B,z=c.target;!m&&c._paused?(z&&(z.tweenjs_count=z.tweenjs_count?z.tweenjs_count+1:1),(B=e._tweenTail)?(e._tweenTail=B._next=c)._prev=B:e._tweenHead=e._tweenTail=c,c._status=e._inTick?1:0,!e._inited&&re.Ticker&&(re.Ticker.addEventListener("tick",e),e._inited=!0)):m&&!c._paused&&(z&&z.tweenjs_count--,e._inTick&&c._lastTick!==e._inTick||e._delist(c),c._status=-1),c._paused=m},e._delist=function(c){var m=c._next,B=c._prev;m?m._prev=B:e._tweenTail=B,B?B._next=m:e._tweenHead=m,c._next=c._prev=null},v.wait=function(c,m){return 0<c&&this._addStep(+c,this._stepTail.props,null,m),this},v.to=function(c,m,B){return(m==null||m<0)&&(m=0),B=this._addStep(+m,null,B),this._appendProps(c,B),this},v.label=function(c){return this.addLabel(c,this.duration),this},v.call=function(c,m,B){return this._addAction(B||this.target,c,m||[this])},v.set=function(c,m){return this._addAction(m||this.target,this._set,[c])},v.play=function(c){return this._addAction(c||this,this._set,[{paused:!1}])},v.pause=function(c){return this._addAction(c||this,this._set,[{paused:!0}])},v.w=v.wait,v.t=v.to,v.c=v.call,v.s=v.set,v.toString=function(){return"[Tween]"},v.clone=function(){throw"Tween can not be cloned."},v._addPlugin=function(c){var m=this._pluginIds||(this._pluginIds={}),B=c.ID;if(B&&!m[B]){m[B]=!0;for(var z=this._plugins||(this._plugins=[]),oe=c.priority||0,ke=0,Se=z.length;ke<Se;ke++)if(oe<z[ke].priority)return void z.splice(ke,0,c);z.push(c)}},v._updatePosition=function(c,m){var B=this._stepHead.next,z=this.position,oe=this.duration;if(this.target&&B){for(var ke=B.next;ke&&ke.t<=z;)ke=(B=B.next).next;oe=m?oe===0?1:z/oe:(z-B.t)/B.d,this._updateTargetProps(B,oe,m)}this._stepPosition=B?z-B.t:0},v._updateTargetProps=function(c,m,B){if(!(this.passive=!!c.passive)){var z,oe,ke,Se,t=c.prev.props,r=c.props;(Se=c.ease)&&(m=Se(m,0,1,1));var i=this._plugins;e:for(var o in t){if(z=(oe=t[o])!==(ke=r[o])&&typeof oe=="number"?oe+(ke-oe)*m:1<=m?ke:oe,i)for(var l=0,f=i.length;l<f;l++){var h=i[l].change(this,c,o,z,m,B);if(h===e.IGNORE)continue e;h!==void 0&&(z=h)}this.target[o]=z}}},v._runActionsRange=function(c,m,B,z){var oe=m<c,ke=oe?this._actionTail:this._actionHead,Se=m,t=c;oe&&(Se=c,t=m);for(var r=this.position;ke;){var i=ke.t;if((i===m||t<i&&i<Se||z&&i===c)&&(ke.funct.apply(ke.scope,ke.params),r!==this.position))return!0;ke=oe?ke.prev:ke.next}},v._appendProps=function(c,m,B){var z,oe,ke,Se,t=this._stepHead.props,r=this.target,i=e._plugins,o=m.prev,l=o.props,f=m.props||(m.props=this._cloneProps(l)),h={};for(z in c)if(c.hasOwnProperty(z)&&(h[z]=f[z]=c[z],t[z]===void 0)){if(Se=void 0,i){for(oe=i.length-1;0<=oe;oe--)if((ke=i[oe].init(this,z,Se))!==void 0&&(Se=ke),Se===e.IGNORE){delete f[z],delete h[z];break}}Se!==e.IGNORE&&(Se===void 0&&(Se=r[z]),l[z]=Se===void 0?null:Se)}for(z in h){ke=c[z];for(var g,_=o;(g=_)&&(_=g.prev);)if(_.props!==g.props){if(_.props[z]!==void 0)break;_.props[z]=l[z]}}if(B!==!1&&(i=this._plugins))for(oe=i.length-1;0<=oe;oe--)i[oe].step(this,m,h);(B=this._injected)&&(this._injected=null,this._appendProps(B,m,!1)),this.step=m},v._injectProp=function(c,m){(this._injected||(this._injected={}))[c]=m},v._addStep=function(c,m,B,z){return z=new a(this._stepTail,this.duration,c,m,B,z||!1),this.duration+=c,this._stepTail=this._stepTail.next=z},v._addAction=function(c,m,B){return B=new u(this._actionTail,this.duration,c,m,B),this._actionTail?this._actionTail.next=B:this._actionHead=B,this._actionTail=B,this},v._set=function(c){for(var m in c)this[m]=c[m]},v._cloneProps=function(c){var m,B={};for(m in c)B[m]=c[m];return B},re.Tween=re.promote(e,"AbstractTween")}(),function(){"use strict";function e(a){var u,c;a instanceof Array||a==null&&1<arguments.length?(u=a,c=arguments[1],a=arguments[2]):a&&(u=a.tweens,c=a.labels),this.AbstractTween_constructor(a),this.tweens=[],u&&this.addTween.apply(this,u),this.setLabels(c),this._init(a)}var v=re.extend(e,re.AbstractTween);v.addTween=function(a){a._parent&&a._parent.removeTween(a);var u=arguments.length;if(1<u){for(var c=0;c<u;c++)this.addTween(arguments[c]);return arguments[u-1]}if(u===0)return null;this.tweens.push(a),a._parent=this,a.paused=!0;var m=a.duration;return 0<a.loop&&(m*=a.loop+1),m>this.duration&&(this.duration=m),0<=this.rawPosition&&a.setPosition(this.rawPosition),a},v.removeTween=function(a){var u=arguments.length;if(1<u){for(var c=!0,m=0;m<u;m++)c=c&&this.removeTween(arguments[m]);return c}if(u===0)return!0;for(var B=this.tweens,m=B.length;m--;)if(B[m]===a)return B.splice(m,1),a._parent=null,a.duration>=this.duration&&this.updateDuration(),!0;return!1},v.updateDuration=function(){for(var a=this.duration=0,u=this.tweens.length;a<u;a++){var c=this.tweens[a],m=c.duration;0<c.loop&&(m*=c.loop+1),m>this.duration&&(this.duration=m)}},v.toString=function(){return"[Timeline]"},v.clone=function(){throw"Timeline can not be cloned."},v._updatePosition=function(a,u){for(var c=this.position,m=0,B=this.tweens.length;m<B;m++)this.tweens[m].setPosition(c,!0,a)},v._runActionsRange=function(a,u,c,m){for(var B=this.position,z=0,oe=this.tweens.length;z<oe;z++)if(this.tweens[z]._runActions(a,u,c,m),B!==this.position)return!0},re.Timeline=re.promote(e,"AbstractTween")}(),function(){"use strict";function e(){throw"Ease cannot be instantiated."}e.none=e.linear=function(v){return v},e.get=function(v){return v<-1?v=-1:1<v&&(v=1),function(a){return v==0?a:v<0?a*(a*-v+1+v):a*((2-a)*v+(1-v))}},e.getPowIn=function(v){return function(a){return Math.pow(a,v)}},e.getPowOut=function(v){return function(a){return 1-Math.pow(1-a,v)}},e.getPowInOut=function(v){return function(a){return(a*=2)<1?.5*Math.pow(a,v):1-.5*Math.abs(Math.pow(2-a,v))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(v){return 1-Math.cos(v*Math.PI/2)},e.sineOut=function(v){return Math.sin(v*Math.PI/2)},e.sineInOut=function(v){return-.5*(Math.cos(Math.PI*v)-1)},e.backIn=(e.getBackIn=function(v){return function(a){return a*a*((v+1)*a-v)}})(1.7),e.backOut=(e.getBackOut=function(v){return function(a){return--a*a*((v+1)*a+v)+1}})(1.7),e.backInOut=(e.getBackInOut=function(v){return v*=1.525,function(a){return(a*=2)<1?a*a*((v+1)*a-v)*.5:.5*((a-=2)*a*((v+1)*a+v)+2)}})(1.7),e.circIn=function(v){return-(Math.sqrt(1-v*v)-1)},e.circOut=function(v){return Math.sqrt(1- --v*v)},e.circInOut=function(v){return(v*=2)<1?-.5*(Math.sqrt(1-v*v)-1):.5*(Math.sqrt(1-(v-=2)*v)+1)},e.bounceIn=function(v){return 1-e.bounceOut(1-v)},e.bounceOut=function(v){return v<1/2.75?7.5625*v*v:v<2/2.75?7.5625*(v-=1.5/2.75)*v+.75:v<2.5/2.75?7.5625*(v-=2.25/2.75)*v+.9375:7.5625*(v-=2.625/2.75)*v+.984375},e.bounceInOut=function(v){return v<.5?.5*e.bounceIn(2*v):.5*e.bounceOut(2*v-1)+.5},e.elasticIn=(e.getElasticIn=function(v,a){var u=2*Math.PI;return function(c){if(c==0||c==1)return c;var m=a/u*Math.asin(1/v);return-(v*Math.pow(2,10*--c)*Math.sin((c-m)*u/a))}})(1,.3),e.elasticOut=(e.getElasticOut=function(v,a){var u=2*Math.PI;return function(c){if(c==0||c==1)return c;var m=a/u*Math.asin(1/v);return v*Math.pow(2,-10*c)*Math.sin((c-m)*u/a)+1}})(1,.3),e.elasticInOut=(e.getElasticInOut=function(v,a){var u=2*Math.PI;return function(c){var m=a/u*Math.asin(1/v);return(c*=2)<1?v*Math.pow(2,10*--c)*Math.sin((c-m)*u/a)*-.5:v*Math.pow(2,-10*--c)*Math.sin((c-m)*u/a)*.5+1}})(1,.3*1.5),re.Ease=e}(),function(){"use strict";function e(){throw"MotionGuidePlugin cannot be instantiated."}var v=e;v.priority=0,v.ID="MotionGuide",v.install=function(){return re.Tween._installPlugin(e),re.Tween.IGNORE},v.init=function(a,u,c){u=="guide"&&a._addPlugin(v)},v.step=function(a,u,c){for(var m in c)if(m==="guide"){var B=u.props.guide,z=v._solveGuideData(c.guide,B);B.valid=!z;var oe=B.endData;if(a._injectProp("x",oe.x),a._injectProp("y",oe.y),z||!B.orient)break;if(z=u.prev.props.rotation===void 0?a.target.rotation||0:u.prev.props.rotation,B.startOffsetRot=z-B.startData.rotation,B.orient=="fixed")B.endAbsRot=oe.rotation+B.startOffsetRot,B.deltaRotation=0;else{var oe=c.rotation===void 0?a.target.rotation||0:c.rotation,ke=oe-B.endData.rotation-B.startOffsetRot,Se=ke%360;switch(B.endAbsRot=oe,B.orient){case"auto":B.deltaRotation=ke;break;case"cw":B.deltaRotation=(360+Se)%360+360*Math.abs(ke/360|0);break;case"ccw":B.deltaRotation=(Se-360)%360+-360*Math.abs(ke/360|0)}}a._injectProp("rotation",B.endAbsRot)}},v.change=function(a,u,c,m,B,z){var oe=u.props.guide;if(oe&&u.props!==u.prev.props&&oe!==u.prev.props.guide)return c==="guide"&&!oe.valid||c=="x"||c=="y"||c==="rotation"&&oe.orient?re.Tween.IGNORE:void v._ratioToPositionData(B,oe,a.target)},v.debug=function(a,u,c){a=a.guide||a;var m=v._findPathProblems(a);if(m&&console.error("MotionGuidePlugin Error found: \n"+m),!u)return m;var B=a.path,z=B.length;for(u.save(),u.lineCap="round",u.lineJoin="miter",u.beginPath(),u.moveTo(B[0],B[1]),t=2;t<z;t+=4)u.quadraticCurveTo(B[t],B[t+1],B[t+2],B[t+3]);u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="white",u.lineWidth=3,u.stroke(),u.closePath();var oe=c.length;if(c&&oe){var ke={},Se={};v._solveGuideData(a,ke);for(var t=0;t<oe;t++)ke.orient="fixed",v._ratioToPositionData(c[t],ke,Se),u.beginPath(),u.moveTo(Se.x,Se.y),u.lineTo(Se.x+9*Math.cos(.0174533*Se.rotation),Se.y+9*Math.sin(.0174533*Se.rotation)),u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="red",u.lineWidth=3,u.stroke(),u.closePath()}return u.restore(),m},v._solveGuideData=function(N,u){if(T=v.debug(N))return T;var c=u.path=N.path;u.orient=N.orient,u.subLines=[],u.totalLength=0,u.startOffsetRot=0,u.deltaRotation=0,u.startData={ratio:0},u.endData={ratio:1},u.animSpan=1;for(var m,B,z,oe,ke=c.length,Se={},t=c[0],r=c[1],i=2;i<ke;i+=4){m=c[i],B=c[i+1],z=c[i+2],oe=c[i+3];for(var o={weightings:[],estLength:0,portion:0},l=t,f=r,h=1;h<=10;h++){v._getParamsForCurve(t,r,m,B,z,oe,h/10,!1,Se);var g=Se.x-l,_=Se.y-f,P=Math.sqrt(g*g+_*_);o.weightings.push(P),o.estLength+=P,l=Se.x,f=Se.y}for(u.totalLength+=o.estLength,h=0;h<10;h++)P=o.estLength,o.weightings[h]=o.weightings[h]/P;u.subLines.push(o),t=z,r=oe}P=u.totalLength;var C=u.subLines.length;for(i=0;i<C;i++)u.subLines[i].portion=u.subLines[i].estLength/P;var T=isNaN(N.start)?0:N.start,N=isNaN(N.end)?1:N.end;v._ratioToPositionData(T,u,u.startData),v._ratioToPositionData(N,u,u.endData),u.startData.ratio=T,u.endData.ratio=N,u.animSpan=u.endData.ratio-u.startData.ratio},v._ratioToPositionData=function(a,u,c){for(var m,B,z,oe=u.subLines,ke=0,Se=a*u.animSpan+u.startData.ratio,t=oe.length,r=0;r<t;r++){if(Se<=ke+(B=oe[r].portion)){z=r;break}ke+=B}z===void 0&&(z=t-1,ke-=B);var i=oe[z].weightings,o=B;for(t=i.length,r=0;r<t&&!(Se<=ke+(B=i[r]*o));r++)ke+=B;z=4*z+2,m=r/10+(Se-ke)/B*.1;var l=u.path;return v._getParamsForCurve(l[z-2],l[z-1],l[z],l[z+1],l[z+2],l[z+3],m,u.orient,c),u.orient&&(.99999<=a&&a<=1.00001&&u.endAbsRot!==void 0?c.rotation=u.endAbsRot:c.rotation+=u.startOffsetRot+a*u.deltaRotation),c},v._getParamsForCurve=function(a,u,c,m,B,z,oe,ke,Se){var t=1-oe;Se.x=t*t*a+2*t*oe*c+oe*oe*B,Se.y=t*t*u+2*t*oe*m+oe*oe*z,ke&&(Se.rotation=57.2957795*Math.atan2((m-u)*t+(z-m)*oe,(c-a)*t+(B-c)*oe))},v._findPathProblems=function(a){var u=a.path,c=u&&u.length||0;if(c<6||(c-2)%4){var m="	Cannot parse 'path' array due to invalid number of entries in path. ";return m+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",m+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",m+="Only [ "+c+" ] values found. Expected: "+Math.max(4*Math.ceil((c-2)/4)+2,6)}for(var B=0;B<c;B++)if(isNaN(u[B]))return"All data in path array must be numeric";return m=a.start,isNaN(m)&&m!==void 0?"'start' out of bounds. Expected 0 to 1, got: "+m:(m=a.end,isNaN(m)&&m!==void 0?"'end' out of bounds. Expected 0 to 1, got: "+m:(a=a.orient,a&&a!="fixed"&&a!="auto"&&a!="cw"&&a!="ccw"?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a:void 0))},re.MotionGuidePlugin=e}(),function(){"use strict";var e=re.TweenJS=re.TweenJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),Dn.createjs=Dn.createjs||{},function(){"use strict";function e(){throw"CSSPlugin cannot be instantiated."}var v=e;function a(u,c){for(var m,B,z,oe=[!1,u];m=v.TRANSFORM_RE.exec(u);)m[3]!=="*"?(B=[m[1]],z=c&&c[oe.length],!c||z&&B[0]===z[0]||(console.log("transforms don't match: ",B[0],z&&z[0]),c=null),function(ke,Se,t){for(;;){var r=v.TRANSFORM_VALUE_RE.exec(ke);if(!r)return;(t=t||[]).push(+r[1],r[2]),Se&&Se[t.length-1]!==r[2]&&(console.log("transform units don't match: ",t[0],Se[t.length-1],r[2]),Se=null)}}(m[2],z,B),oe.push(B)):oe.push(c[oe.length]);return oe[0]=!!c,oe}v.priority=100,v.ID="CSS",v.VALUE_RE=/^(-?[\d.]+)([a-z%]*)$/,v.TRANSFORM_VALUE_RE=/(?:^| |,)(-?[\d.]+)([a-z%]*)/g,v.TRANSFORM_RE=/(\w+?)\(([^)]+)\)|(?:^| )(\*)(?:$| )/g,v.compute=!1,v.install=function(){re.Tween._installPlugin(e)},v.init=function(u,c,m){var B=u.pluginData;if(!B.CSS_disabled&&u.target instanceof HTMLElement){var z,oe=m||(z=u.target,oe=c,((m=B.CSS_compute)||m==null&&v.compute?window.getComputedStyle(z):z.style)[oe]);if(oe!==void 0)return u._addPlugin(e),u=B.CSS||(B.CSS={}),c==="transform"?(u[c]="_t",a(oe)):(B=v.VALUE_RE.exec(oe),B===null?(u[c]="",oe):(u[c]=B[2],parseFloat(B[1])))}},v.step=function(u,c,m){m.transform&&(c.props.transform=a(c.props.transform,c.prev.props.transform))},v.change=function(u,c,m,B,z,oe){var ke=u.pluginData.CSS[m];if(ke!==void 0)return m==="transform"?B=function(Se,t,r){if(r===1)return t[1];if(r===0||!t[0])return Se[1];for(var i,o,l="",f=Se.length,h=2;h<f;h++){var g=Se[h],_=t[h];for(l+=g[0]+"(",i=1,o=g.length;i<o;i+=2)l+=g[i]+(_[i]-g[i])*r,l+=_[i+1]||g[i+1],i<o-2&&(l+=", ");l+=")",h<f-1&&(l+=" ")}return l}(c.prev.props[m],c.props[m],z):B+=ke,u.target.style[m]=B,re.Tween.IGNORE},re.CSSPlugin=v}(),re.CSSPlugin.install(),Dn.createjs=Dn.createjs||{},function(){"use strict";function e(){throw"DotPlugin cannot be instantiated."}var v=e;v.priority=100,v.ID="Dot",v.install=function(){re.Tween._installPlugin(e)},v.init=function(a,u,c){var m=a.pluginData;if(!m.Dot_disabled&&u[0]==="."){a._addPlugin(e);for(var B=a.target,z=u.split("."),oe=1,ke=z.length;oe<ke-1;oe++)if(!(B=B[z[oe]]))return re.Tween.IGNORE;var Se=z[oe],a=B[Se],c=c===void 0?a:c;return m.Dot=m.Dot||{},m.Dot[u]={t:B,n:Se},c}},v.step=function(a,u,c){},v.change=function(ke,u,c,m,B,z){var oe,ke=ke.pluginData.Dot;if(ke&&(oe=ke[c]))return oe.t[oe.n]=m,re.Tween.IGNORE},re.DotPlugin=v}(),Dn.createjs=Dn.createjs||{},function(){"use strict";function e(){throw"RelativePlugin plugin cannot be instantiated."}var v=e;v.ID="Relative",v.install=function(){re.Tween._installPlugin(e)},v.init=function(a,u,c){a.pluginData.Relative_disabled||a._addPlugin(v)},v.step=function(a,u,c){for(var m in c){var B,z,oe=c[m];typeof oe=="string"&&(B=u.prev.props[m],(z=oe[0])!=="+"&&z!=="-"||isNaN(oe=+oe+B)||(u.props[m]=oe))}},v.change=function(a,u,c,m,B,z){},re.RelativePlugin=v}(),re.DotPlugin.install(),re.RelativePlugin.install(),window.addEventListener("DOMContentLoaded",function(){var e=document.createElement("style");e.innerHTML="canvas {-webkit-tap-highlight-color: transparent;}",document.body.appendChild(e)});window.createjs=re;dr.exports=function(){return re}});var Xi=Pi(ni(),1);var le=window||{},ze=le.createjs,Lt=le.zns,Et=le.zon==null?!0:le.zon,Si,Ii,pn,qn=Et?console.log.bind(console):function(){},tr=" border:thin solid black; color: black",ui=Et?console.log.bind(console,"%c Z ","background: #acd241;"+tr):function(){},Mi=Et?console.log.bind(console,"%c Z ","background: #e472c4;"+tr):function(){},Gr=Et?console.log.bind(console,"%c Z ","background: #50c4b7;"+tr):function(){},fi=Et?console.log.bind(console,"%c Z ","background: #fb4758;"+tr):function(){},ht=Et?console.log.bind(console,"%c Z ","background: #ebcb35;"+tr):function(){},ci=Et?console.log.bind(console,"%c Z ","background: #f58e25;"+tr):function(){},Sr=Et?console.log.bind(console,"%c Z ","background: #eeeeee;"+tr):function(){},Ir=Et?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function Tn(e){return qe("1"),document.getElementById(e)}function Oi(e){if(qe("2"),document.getElementById(e))return document.getElementById(e).style;Et&&ht("zss(): id not found")}function or(e,v,a,u,c,m){if(qe("3"),n(v)&&v!=""||v=="_self")le.location.href=e;else{var B="";return a&&(B+="width="+a+","),u&&(B+="height="+u+","),c&&(B+="fullscreen=yes,"),m&&(B+="modal=yes,alwaysRaised=yes"),le.open(e,v,B)}}function jn(e){if(qe("4"),!n(e))return Number(String(e).replace(/[^\d.-]/g,""))}function n(e){return e==null}function Li(e){qe("5"),!n(e)&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),le.event&&(le.event.cancelBubble=!0))}function Ur(){return qe("6"),le.zilK&&(le.removeEventListener("keydown",le.zilK),le.removeEventListener("wheel",le.zilW),le.removeEventListener("DOMMouseScroll",le.zilS)),le.zilK=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},le.zilW=function(e){e||(e=event),e.preventDefault()},le.zilS=le.zilW,le.addEventListener("keydown",le.zilK,{passive:!1}),le.addEventListener("wheel",le.zilW,{passive:!1}),le.addEventListener("DOMMouseScroll",le.zilS,{passive:!1}),[le.zilK,le.zilW,le.zilS]}function gr(e,v){qe("6.1");function a(){var u=this;this.on=function(c,m){if(!(n(e)||n(c)||n(m)))for(var B=u.tags,z=0;z<B.length;z++)B[z].addEventListener(c,m)},this.off=function(c,m){if(!(n(e)||n(c)||n(m)))for(var B=u.tags,z=0;z<B.length;z++)B[z].removeEventListener(c,m)},Object.defineProperty(u,"tags",{get:function(){return n(e)?[]:typeof e=="string"||e instanceof String?(v&&ci(e,document.querySelector(e)),v?[document.querySelector(e)]:document.querySelectorAll(e)):typeof e.innerHTML=="string"?[e]:[]},set:function(){}}),this.css=function(c,m){for(var B=u.tags,z=0;z<B.length;z++)if(arguments.length==1&&arguments[0].constructor==={}.constructor)for(var oe in c)B[z].style[oe]=c[oe];else{if(arguments.length==1)return u.tags[0].style[c];B[z].style[c]=m}},this.prop=function(c,m){if(!n(c)){for(var B=u.tags,z=[],oe=0;oe<B.length;oe++)if(n(m))if(c.constructor==={}.constructor)for(var ke in c)B[oe][ke]=c[ke];else z.push(B[oe][c]);else B[oe][c]=m;if(n(m))return z}}}return new a}function gn(e){return e.length==1&&e[0]!=null&&e[0].constructor==={}.constructor}function mt(e,v,a,u){var c=Ie&&(Ie.ZIMONON||hi);if(gn(v)){qe("7");var m=v[0],B;for(var z in m)(B=z.match(/^(.+)gColor$/))&&(m[B[1]+"ackgroundColor"]=m[z],delete m[z]);var oe=n(a)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):a.replace(/\s+/g,"").split(","),ke=[],Se,t;for(Se=0;Se<oe.length;Se++)t=oe[Se].split("=")[0],oe[Se]=t,ke.push(m[t]);for(Se in m)oe.indexOf(Se)<0&&Et&&ht(e,"bad argument "+Se);var r;return(r=Object.prototype.isPrototypeOf.call(e.prototype,u)?new(e.bind.apply(e,[null].concat(ke))):e.apply(null,ke))?(c&&!r.arguments&&(r.arguments=[m]),r):!0}else c&&u&&v&&n(u.arguments)&&(u.arguments=Array.prototype.slice.call(v))}function dt(e){if(qe("7.5"),qe("17.6"),!n(e))return Ie.Pick.choose(e)}var Di=console.table&&Et?console.table.bind(console):function(){},Ri=function(){for(var e=0;e<arguments.length;e++)if(!n(arguments[e]))return arguments[e]},Ie=function(e){e.chop=function(t,r,i,o,l,f){if(qe("7.8"),!n(t)){n(r)&&(r=3),n(i)&&(i=3),n(o)&&(o=!0),n(l)&&(l=0),n(f)&&(f=1),t.getBounds||(t=new e.Bitmap(t));var h=t.getBounds();n(h)&&ht("ZIM chop() - obj must have bounds");var g=h.width/r,_=h.height/i,P=l,C=[];return e.loop(i,function(T){e.loop(r,function(N){var O=new e.Bitmap(t,g+P*2,_+P*2,N*g-P,T*_-P,f);l!=0?(O.setBounds(P,P,g,_),O.regX=P,O.regY=P):O.setBounds(P,P,g,_),C.push(O)})}),o?new e.Tile(C,r,i,0,0,!0).sca(t.scaleX,t.scaleY):C}},e.shuffle=function(t,r){if(qe("8"),!n(t)){Array.isArray(t)||(t=Object.values(arguments));var i=t.length,o,l;if(i==0)return t;if(r){for(var f=e.copy(t);e.arraysEqual(f,t);)e.shuffle(t);return t}else{for(;--i;)o=Math.floor(Math.random()*(i+1)),l=t[i],t[i]=t[o],t[o]=l;return t}}},e.pluck=function(t,r){if(qe("9.26"),n(t)||t.length==0)return null;Array.isArray(t)||(t=Object.values(arguments));var i=Math.floor(Math.random()*t.length),o=t[i];return r&&t.splice(i,1),o},e.rand=function(t,r,i,o){if(qe("9"),n(t)&&n(r))return Math.random();(n(t)||isNaN(t))&&(t=0),(n(r)||isNaN(r))&&(r=0),(t%1!=0||r%1!=0)&&(i=!1),n(i)&&(i=!0),o&&Math.random()>.5&&(t*=-1,r*=-1),i&&(t>r?t++:r>t&&r++);var l;return t==0&&r==0?0:(r==0?l=Math.random()*t:l=Math.min(t,r)+Math.random()*(Math.max(t,r)-Math.min(t,r)),i?Math.floor(l):l)},e.seedRandom=function(t){return qe("9.01"),function(r,i,o,l,f,h,g,_,P){function C(F){var q,V=F.length,I=this,ne=0,R=I.i=I.j=0,Q=I.S=[];for(V||(F=[V++]);l>ne;)Q[ne]=ne++;for(ne=0;l>ne;ne++)Q[ne]=Q[R=A&R+F[ne%V]+(q=Q[ne])],Q[R]=q;(I.g=function(U){for(var ee,ae=0,ie=I.i,ce=I.j,j=I.S;U--;)ee=j[ie=A&ie+1],ae=ae*l+j[A&(j[ie]=j[ce=A&ce+ee])+(j[ce]=ee)];return I.i=ie,I.j=ce,ae})(l)}function T(F,q){var V,I=[],ne=typeof F;if(q&&ne=="object")for(V in F)try{I.push(T(F[V],q-1))}catch(R){+function(){}()}return I.length?I:ne=="string"?F:F+"\0"}function N(F,q){for(var V,I=F+"",ne=0;ne<I.length;)q[A&ne]=A&(V^=19*q[A&ne])+I.charCodeAt(ne++);return S(q)}function O(F){try{return k?S(k.randomBytes(l)):(r.crypto.getRandomValues(F=new Uint8Array(l)),S(F))}catch(q){return[+new Date,r,(F=r.navigator)&&F.plugins,r.screen,S(i)]}}function S(F){return String.fromCharCode.apply(0,F)}var k,x=o.pow(l,f),E=o.pow(2,h),L=2*E,A=l-1,b=o["seed"+P]=function(F,q,V){var I=[];q=q==1?{entropy:!0}:q||{};var ne=N(T(q.entropy?[F,S(i)]:F==null?O():F,3),I),R=new C(I);return N(S(R.S),i),(q.pass||V||function(Q,U,ee){return ee?(o[P]=Q,U):Q})(function(){for(var Q=R.g(f),U=x,ee=0;E>Q;)Q=(Q+ee)*l,U*=l,ee=R.g(1);for(;Q>=L;)Q/=2,U/=2,ee>>>=1;return(Q+ee)/U},ne,"global"in q?q.global:this==o)};if(N(o[P](),i),g&&g.exports){g.exports=b;try{k=Ei("crypto")}catch(F){}}else _&&_.amd&&_(function(){return b})}(this,[],Math,256,6,52,typeof module=="object"&&module,typeof define=="function"&&define,"random"),e.randomO||(e.randomO=Math.random),n(t)?Math.random=e.randomO:Math.seedrandom(t),t},e.odds=function(t){return qe("9.1"),(n(t)||isNaN(t))&&(t=50),Math.random()<=t/100},e.rarity=function(t,r,i,o){if(qe("9.2"),n(t)||t.constructor!={}.constructor)return[];n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!1);var l=[];return e.loop(t,function(f,h){var g=e.colors.indexOf(f);g!=-1&&(f=e.colorsHex[g]);var _;Array.isArray(h)?(+f==+f?f=new Number(f):f=new String(f),f._payload=h[1],f.dynamicPayload=o,Object.defineProperty(f,"payload",{get:function(){return!this.dynamicPayload&&this._lastPayload!=null?this._lastPayload:(this._lastPayload=e.Pick.choose(this._payload),this._lastPayload)},set:function(P){this._lastPayload=null,this._payload=P}}),_=h[0],e.loop(_,function(){l.push(f)})):(_=h,e.loop(_,function(){+f==+f&&(f=+f),l.push(f)}))}),r&&e.shuffle(l),l},e.repeats=function(t,r){if(qe("9.25"),n(t)||!Array.isArray(t))return 0;var i={},o=0,l=0;return e.loop(t,function(f){i[f]!=null?(i[f]++,l++):i[f]=0,i[f]>o&&(o=i[f])}),r?l:o},e.series=function(){qe("13.61");var t,r;if(arguments[0]==null)return null;if(arguments.length==0)return function(){};arguments.length==1&&Array.isArray(arguments[0])?t=arguments[0]:arguments.length==1&&arguments[0].constructor=={}.constructor?(r=arguments[0],n(r.min)&&(r.min=0),n(r.max)&&(r.max=1),n(r.step)&&(r.step=1),t=[],e.loop(Math.floor(Math.abs(r.max-r.min)+r.step),function(x){t.push(x+r.min)},null,null,r.step),r=null):t=Array.prototype.slice.call(arguments);var i=0,o=1,l=1,f=0,h=0,g=!1,_=!1,P=!1,C=!1,T=!1,N,O,S=function(x,E){if(f&&h%f!=0)return h++,O;h++;var L=t.length,A;if((C||T)&&i%L==0&&e.shuffle(t),A=t[(L*10+i)%L],i==0&&(N=A),T&&i%L==0&&L>1)for(;A==O;)e.shuffle(t),A=t[(L*10+i)%L];return g?o>0&&i+o*l>=L?(o=-1,i=L-1-(i+l-(L-1))):o<0&&i+o*l<0?(o=1,i=l-i):i+=o*l:_?o>0&&i+o*l>=L?(o=-1,i=L-1-(i+l-(L-1))+l):o<0&&i+o*l<0?(o=1,i=l-i-l):i+=o*l:P?o>0&&i+o*l>=L?i=L-1:o<0&&i+o*l<0?i=0:i+=o*l:i+=o*l,O=A,e.isPick(A)?A.noPick&&E?A:e.Pick.choose(A):A},k=S.original=e.copy(t);return S.array=t,S.type="series",Object.defineProperty(S,"index",{get:function(){var x=t.length;return(x*10+i)%x},set:function(x){i=x,h=0}}),Object.defineProperty(S,"length",{get:function(){return t.length},set:function(){}}),S.jump=function(x){return i=x,S},S.reverse=function(x){return n(x)&&(x=!0),x?o=-1:o=1,i=t.length-1,S},S.bounce=function(x){n(x)&&(x=!0);var E=t.length;return i=(E*10+i)%E,g=x,S},S.flip=function(x){n(x)&&(x=!0);var E=t.length;return i=(E*10+i)%E,_=x,S},S.step=function(x){return n(x)&&(x=1),l=Math.floor(x),S},S.every=function(x){return n(x)&&(x=1),f=Math.abs(x),h=0,S},S.constrain=function(x){return n(x)&&(x=!0),P=x,S},S.random=function(x){return n(x)&&(x=!0),x||(t=k),C=x==!0,S},S.mix=function(x){return n(x)&&(x=!0),x||(t=k),T=x==!0,S},S.shuffle=function(x){return n(x)&&(x=!0),x?e.shuffle(t):t=k,S},S},e.makeSeries=function(t){if(qe("13.6"),n(t))return function(){};var r=0,i=function(){return t[r++%t.length]};return i.array=t,i},e.loop=function(t,r,i,o,l,f,h,g,_,P){var C="obj, call, reverse, interval, step, start, end, immediate, complete, completeParams",T;if(T=mt(e.loop,arguments,C))return T;if(qe("9.5"),n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(g)&&(g=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var N=o==0&&_&&typeof _=="function",O=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":typeof t=="string"?"string":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(O=="invalid")return;var S,k,x,E;if(O=="number"||O=="string"||O=="array"||O=="nodelist"||O=="htmlcollection"||O=="Dictionary"){if(O=="Dictionary"){var L=e.copy(t.values);t=e.copy(t.objects)}if(S=O=="number"?t:t.length,k=b(S-1),k==0)return;if(i)if(o===0){for(x=f;x>=h;x-=l)if(O=="number"?E=r(x,k,f,h,t):O=="array"||O=="string"?E=r(t[x],x,k,f,h,t):O=="Dictionary"?E=r(t[x],L[x],x,k,f,h,t):E=r(t.item(x),x,k,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(x=F.count,g||x--,l&&(x*=l),x=f-x,O=="number"?E=r(x,k,f,h,t):O=="array"||O=="string"?E=r(t[x],x,k,f,h,t):O=="Dictionary"?E=r(t[x],L[x],x,k,f,h,t):E=r(t.item(x),x,k,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},k,g,null,null,_,P);else if(o===0){for(x=f;x<=h;x+=l)if(O=="number"?E=r(x,k,f,h,t):O=="array"||O=="string"?E=r(t[x],x,k,f,h,t):O=="Dictionary"?E=r(t[x],L[x],x,k,f,h,t):E=r(t.item(x),x,k,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(x=F.count,g||x--,l&&(x*=l),O=="number"?E=r(x,k,f,h,t,F):O=="array"||O=="string"?E=r(t[x],x,k,f,h,t,F):O=="Dictionary"?E=r(t[x],L[x],x,k,f,h,t):E=r(t.item(x),x,k,f,h,t,F),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},k,g,null,null,_,P);return N&&_(P),!0}else if(O=="object"){S=0;var A=[];for(x in t)S++,A.push(x);if(k=b(S-1),k==0)return;if(i)if(o===0){for(x=f;x>=h;x-=l)if(E=r(A[x],t[A[x]],x,k,f,h,t),typeof E<"u")return E}else e.interval(o,function(F){if(x=F.count,g||x--,l&&(x*=l),x=f-x,E=r(A[x],t[A[x]],x,k,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},k,g,null,null,_,P);else if(o===0){for(x=f;x<=h;x+=l)if(E=r(A[x],t[A[x]],x,k,f,h,t),typeof E<"u")return E}else e.interval(o,function(F){if(x=F.count,g||x--,l&&(x*=l),E=r(A[x],t[A[x]],x,k,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},k,g,null,null,_,P);return N&&_(P),!0}function b(F){return n(f)&&(f=i?F:0),n(h)&&(h=i?0:F),i&&h>f||!i&&f>h||(f<0&&h)<0||f>F&&h>F?0:(f=Math.max(0,Math.min(f,F)),h=Math.max(0,Math.min(h,F)),Math.floor((i?f-h:h-f)/l)+1)}};function v(t,r,i,o,l){e.timeCheck||(qe("9.99"),e.timeCheck=!0);var f=n(le.TIME)?n(e.TIME)?"seconds":e.TIME:le.TIME;return f&&f.toLowerCase&&(f=f.toLowerCase()),f!="milliseconds"&&f!="ms"&&(f="seconds"),r&&r.toLowerCase&&(r=r.toLowerCase()),(r=="ms"||r=="milliseconds"||r=="seconds"||r=="s")&&(f=r),n(t)?f.charAt(0):(f=="ms"&&(f="milliseconds"),f=="s"&&(f="seconds"),f=f.charAt(0),l||a(t,f,i,o),f)}function a(t,r,i,o){n(i)&&(i=10),n(o)&&(o=9),!(!e.TIMECHECK&&!le.TIMECHECK)&&(r!="m"&&t>i||r=="m"&&t<o)&&Et&&ht("TIME - warning: time is in "+(r=="m"?"milliseconds":"seconds")+" ("+t+")")}if(e.timeout=function(t,r,i,o){var l="time, call, pauseOnBlur, timeUnit",f;if(f=mt(e.timeout,arguments,l,this))return f;if(qe("9.7"),!n(r)&&typeof r=="function"){var h=e.interval(t,r,1,!1,i,o);return h.type="timeoutObj",h}},e.interval=function(t,r,i,o,l,f,h,g){var _="time, call, total, immediate, pauseOnBlur, timeUnit, complete, completeParams",P;if(P=mt(e.interval,arguments,_,this))return P;if(qe("9.8"),n(r)||typeof r!="function")return;var C=v(t,f);if(n(t)&&(t=C=="s"?1:1e3),n(o)&&(o=!1),!n(i)&&(isNaN(i)||i<=0))return;n(i)&&(i=-1);var T={count:0,total:i,paused:!1,time:t,active:!0,timeUnit:f};l&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(T));function N(){T.startTime=Date.now(),T.interval=e.Pick.choose(T.time),T.id=setTimeout(function(){T.paused||T.active&&(T.count++,r(T),N(),O())},T.interval*(C=="s"?1e3:1))}o&&setTimeout(function(){r(T),O()},10);function O(){i!=-1&&T.count>=(o?T.total-1:T.total)&&(h&&typeof h=="function"&&h(g),T.clear())}var S;return T.type="intervalOjbect",T.pause=function(k,x,E){n(k)&&(k=!0),k?(clearTimeout(S),clearTimeout(T.id),cancelAnimationFrame(T.rid),T.pauseTimeLeft=T.interval-(Date.now()-T.startTime)/(C=="s"?1e3:1)):(T.paused||T.pause(!0),S=setTimeout(function(){T.count++,r(T),N(),O()},x?0:(E?T.interval:T.pauseTimeLeft)*(C=="s"?1e3:1)),T.pauseTimeLeft=null),T.paused=k},T.next=function(){T.count++,r(T),O()},T.clear=function(){T.active=!1,clearTimeout(S),cancelAnimationFrame(T.rid),clearTimeout(T.id);var k=T.count;for(var x in T)delete T[x];T.active=!1,T.count=k,T.pause=function(){},T.clear=function(){}},N(),T},e.async=function(t,r,i,o,l){if(qe("29"),!n(t)){var f=document.createElement("script"),h=v(o);n(o)&&(o=h=="s"?2:2e3);var g;r?(i?g=i:g=r.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],e.asyncList||(e.asyncList={}),e.asyncList[g]||(e.asyncList[g]=[]),e.asyncList[g].push(r),e.async[g]=function(){var _=f,P=!1,C=setTimeout(function(){P=l,typeof r=="function"&&r("asyncError",l?"cancelled":"timeout")},o*(h=="s"?1e3:1));return function(T){clearTimeout(C),e.asyncList[g]&&(r=e.asyncList[g].shift()),typeof r=="function"&&!P&&r(T),_&&_.parentNode.removeChild(_),_=null}}()):(e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=f),t.match(/\?/)||(t+="?"),f.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(f)}},e.couple=function(t){if(qe("29.2"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=r[o];for(var f in l)i[o+"_"+f]=l[f]}return JSON.stringify(i)},e.decouple=function(t){if(qe("29.3"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=o.split("_",2);if(l.length!=2)return t;i[l[0]]||(i[l[0]]={}),i[l[0]][l[1]]=r[o]}return JSON.stringify(i)},e.convertColor=function(t,r,i){if(e.convertColorCheck||(qe("27.5"),e.convertColorCheck=!0),n(r)&&(r="hex"),n(t)||!t.toLowerCase)return;t=dt(t),t=t.toLowerCase(),r=r.toLowerCase();var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if(r=="zim"){var f=e.colorsHex.indexOf(t);return f<0?t:e.colors[e.colorsHex.indexOf(t)]}r=="hsv"&&r=="hsl";var h,g;if(h=t.match(/rgba\((.*)\)/)){g=h[1].split(",");var _=g.pop();if(n(i)&&(i=_),r=="array")return g.push(_),g;if(t="rgb("+g.join(",")+")",r=="rgb")return t;if(r=="hsl")return T(g[0],g[1],g[2])}function P(L){var A=Number(L).toString(16);return A.length<2&&(A="0"+A),A}function C(L,A,b,F,q){return(q-F)*(L-A)/(b-A)+F}function T(L,A,b){L/=255,A/=255,b/=255;let F=Math.max(L,A,b),q=F-Math.min(L,A,b),V=q?F===L?(A-b)/q:F===A?2+(b-L)/q:4+(L-A)/q:0;return[60*V<0?60*V+360:60*V,100*(q?F<=.5?q/(2*F-q):q/(2-(2*F-q)):0),100*(2*F-q)/2]}function N(L){var A=L.split(","),b=P(A[0]),F=P(A[1]),q=P(A[2]),V=n(V)?"":P(Math.round(Number(A[3])*255));return[b,F,q,V]}n(i)&&(i=1);var O,S,k;if(h=t.match(/rgb\((.*)\)/))return r=="rgba"?"rgba("+h[1]+","+i+")":r=="hex"?(O=i!=1?","+i:"",S=N(h[1]+O),"#"+S[0]+S[1]+S[2]+S[3]):r=="hexnumber"?(O=i!=1?","+i:0,S=N(h[1]+O),parseInt(S[0]+""+S[1]+S[2],16)):r=="string"?(t=N(h[1]).join("").toLowerCase(),k=l.indexOf(t),k==-1?"#"+t:o[k]):r=="array"?(O=i!=1?","+i:0,N(h[1]+O)):r=="hsl"?(g=h[1].split(","),T(g[0],g[1],g[2])):t;function x(L){var A;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(L)?(A=L.substring(1).split(""),A.length==3&&(A=[A[0],A[0],A[1],A[1],A[2],A[2]]),A="0x"+A.join(""),r=="rgb"?"rgb("+[A>>16&255,A>>8&255,A&255]+")":r=="array"?[A>>16&255,A>>8&255,A&255,i]:"rgba("+[A>>16&255,A>>8&255,A&255].join(",")+","+i+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(L)?(A=L.substring(1).split(""),A.length==8&&(i=A.slice(-2).join(""),A=A.slice(0,6)),A.length==4&&(i=A[3]+""+A[3],A=[A[0],A[0],A[1],A[1],A[2],A[2]]),i=parseInt(i,16)/255,A="0x"+A.join(""),r=="rgb"?"rgb("+[A>>16&255,A>>8&255,A&255]+")":"rgba("+[A>>16&255,A>>8&255,A&255].join(",")+","+i+")"):r=="rgb"?"rgb(0,0,0)":"rgba(0,0,0,1)"}if(r=="hsl")return e.convertColor(e.convertColor(t,"rgb"),"hsl");if(r=="array"||r=="rgb"||r=="rgba")return t.charAt(0)=="#"?x(t):x(e.convertColor(t));if(r=="hex"){if(t.charAt(0)=="#")if(i!=1)if(O=P(Math.round(i*255)),t.length==4||t.length==5){var E=t.split("");return E[1]=E[1]+""+E[1],E[2]=E[2]+""+E[2],E[3]=E[3]+""+E[3],E[4]=O,E.join("")}else return t.length==9?t.substring(0,o.length-2)+O:t+O;else return t}else if(r=="hexnumber"){if(t.charAt(0)=="#")return parseInt(t.replace(/^#/,""),16)}else t.charAt(0)=="#"&&(t=t.replace("#",""),t.length==3&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)));return r=="string"?(k=l.indexOf(t),k==-1?"#"+t:o[k]):r=="hexnumber"?parseInt(l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0],16):(O=i!=1?P(Math.round(i*255)):"","#"+l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0]+O)},e.colorRange=function(t,r,i){e.colorRangeCheck||(qe("27.6"),e.colorRangeCheck=!0),n(i)&&(i=.5),i=Math.max(0,Math.min(1,i)),n(t)&&(t="white"),n(r)&&(r="black");var o=t,l=r,f=e.convertColor(t,"rgb"),h=e.convertColor(r,"rgb");t=f.substring(4,f.length-1).split(","),r=h.substring(4,h.length-1).split(",");var g,_="#",P;if(i==0)_=o;else if(i==1)_=l;else for(var C=0;C<t.length;C++)g=r[C]-t[C],P=Math.floor(parseInt(t[C],10)+g*i).toString(16),P.length<2&&(P="0"+P),_+=P;return _},e.lighten=function(t,r){return e.lightenCheck||(qe("27.65"),e.lightenCheck=!0),n(r)&&(r=.5),r>=0?e.colorRange(String(t),"#FFFFFF",r):e.colorRange(String(t),"#000000",-r)},e.darken=function(t,r){return n(r)&&(r=.5),e.darkenCheck||(qe("27.66"),e.darkenCheck=!0),r>=0?e.colorRange(String(t),"#000000",r):e.colorRange(String(t),"#ffffff",-r)},e.toColor=function(t,r,i){return e.toColorCheck||(qe("27.67"),e.toColorCheck=!0),n(i)&&(i=.5),e.colorRange(String(t),r,i)},e.toAlpha=function(t,r){return e.toAlphaCheck||(qe("27.68"),e.toAlphaCheck=!0),n(r)&&(r=.5),e.convertColor(String(t),"rgba",r)},e.toBW=function(t){if(t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return ht("ZIM toBW() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);return r*.299+i*.587+o*.114>186?"#000000":"#FFFFFF"},e.invertColor=function(t){if(e.invertColorCheck||(qe("27.86"),e.invertColorCheck=!0),t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return ht("ZIM invertColor() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);r=(255-r).toString(16),i=(255-i).toString(16),o=(255-o).toString(16);function l(f,h){h=h||2;var g=new Array(h).join("0");return(g+f).slice(-h)}return"#"+l(r)+l(i)+l(o)},e.zimEase=function(t,r,i,o,l){qe("27.69");var f=!1;n(l)&&(l=!0);var h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V;if(t){if(Array.isArray(t[1])){f=!0,V=t[1],t=t[0];var I=0,ne=V[0],R=V[1],Q=V[2],U=V[3],ee=1,ae=5*(ne-I),ie=10*(R-I)-4*ae,ce=10*(Q-I)+30*(ne-R),j=5*(U+I)-20*(Q+ne)+30*R,G=ee-I-j-ce-ie-ae}h=0,g=t[0],_=t[1],P=t[2],C=t[3],T=1,N=5*(g-h),O=10*(_-h)-4*N,S=10*(P-h)+30*(g-_),k=5*(C+h)-20*(P+g)+30*_,x=T-h-k-S-O-N}else r?(x=r[0],k=r[1],S=r[2],O=r[3],N=r[4],g=N/5,_=(O+4*N)/10,P=(S+6*N+3*O)/10,C=(k+4*N+3*O+2*S)/5):(x=0,k=0,S=0,O=0,N=1);return i?(F=function(){return e.zimEase(null,[x,k,S,O,N],!0)},q={reverse:F,points:[g,_,P,C],polynomials:[x,k,S,O,N]},q.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return y<.5?(y*=2,E=y*100,L=100,A=(E/=L)*E,b=A*E,(x*b*A+k*A*A+S*b+O*A+N*E)/2):(y=1-(y-.5)*2,E=y*100,L=100,A=(E/=L)*E,b=A*E,1-(x*b*A+k*A*A+S*b+O*A+N*E)/2)}):f?(F=function(){return Et&&ht("zimEase - multi array points cannot be reversed"),e.zimEase(null,[x,k,S,O,N])},q={reverse:F,points:[[g,_,P,C],[ne,R,Q,U]],polynomials:[[x,k,S,O,N],[G,j,ce,ie,ae]]},q.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return y<.5?(y*=2,E=y*100,L=100,A=(E/=L)*E,b=A*E,(x*b*A+k*A*A+S*b+O*A+N*E)/2):(y=(y-.5)*2,E=y*100,L=100,A=(E/=L)*E,b=A*E,.5+(G*b*A+j*A*A+ce*b+ie*A+ae*E)/2)}):(F=function(){return e.zimEase(null,[x,k,S,O,N],null,!0)},q={reverse:F,points:[g,_,P,C],polynomials:[x,k,S,O,N]},o?q.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return E=100-y*100,L=100,A=(E/=L)*E,b=A*E,1-(x*b*A+k*A*A+S*b+O*A+N*E)}:q.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return E=y*100,L=100,A=(E/=L)*E,b=A*E,x*b*A+k*A*A+S*b+O*A+N*E}),q.noPick.reverse=F,q},e.spline=function(t,r,i,o,l){qe("27.695"),n(t)&&(t=[]),n(r)&&(r=1),n(i)&&(i=!1),n(l)&&(l=i);var f;function h(U,ee){if(!Array.isArray(U[0]))for(f=0;f<U.length;f++)U[f]=[U[f].x,U[f].y];if(ee){var ae=U[U.length-1],ie=U[U.length-2],ce=U[0],j=U[1];U.unshift(ae),U.unshift(ie),U.push(ce),U.push(j)}var G=[];for(f=0;f<U.length;f++)G.push(U[f][0],U[f][1]);return G}t=h(t,i);var g=t.length,_=g-4,P=i?t[2]:t[0],C=i?t[3]:t[1],T="M"+[P,C];o&&o.mt(P,C);var N=i?2:0,O=i?g-4:g-2,S=2;for(f=N;f<O;f+=S){var k=f?t[f-2]:t[0],x=f?t[f-1]:t[1],E=t[f+0],L=t[f+1],A=t[f+2],b=t[f+3],F=f!==_?t[f+4]:A,q=f!==_?t[f+5]:b,V=E+(A-k)/6*r,I=L+(b-x)/6*r,ne=A-(F-E)/6*r,R=b-(q-L)/6*r;T+="C"+[V,I,ne,R,A,b],o&&o.bt(V,I,ne,R,A,b)}if(l){var Q=T.split("C");Q.pop(),T=Q.join("C")}return T},e.pointAlongCurve=function(t,r,i,o){if(qe("27.7"),!(!t||!t[0]||!t[1]||!t[2]||!t[3])){n(o)&&(o=!1);var l=new e.Bezier(t[0],t[1],t[2],t[3]),f,h,g,_,P,C;if(o?(f=l.mx(r),h=l.my(r)):(f=l.x(r),h=l.y(r)),i){var T=r-.05,N=r+.05;T<0&&(T=0),N>1&&(N=1),o?(g=l.mx(T),_=l.my(T),P=l.mx(N),C=l.my(N)):(g=l.x(T),_=l.y(T),P=l.x(N),C=l.y(N));var O=e.angle(g,_,P,C);return{x:f,y:h,angle:O}}return{x:f,y:h}}},e.distanceAlongCurve=function(t){qe("27.8");var r=e.dist(t[0],t[3]),i=e.dist(t[0],t[1])+e.dist(t[1],t[2])+e.dist(t[2],t[3]);return(r+i)/2},e.closestPointAlongCurve=function(t,r,i,o,l){qe("27.9");var f=1e7,h,g=0,_=0;return n(i)&&(i=10),e.loop(r,function(P,C){var T=new e.Bezier(P[0],P[1],P[2],P[3]);e.loop(i,function(N,O){var S={x:T.x(N/O),y:T.y(N/O)},k=e.dist(t,S);k<f&&(f=k,h=S,g=C,_=N)})}),l?(g*i+_)/(r.length*i)*100:o?h:g},e.transformPoints=function(t,r,i,o,l){if(qe("27.95"),!(n(t)||!Array.isArray(t))){n(o)&&(o=0),n(l)&&(l=0),t=e.copy(t);var f=o,h=l;r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",-f)),l!=0&&(t=e.transformPoints(t,"y",-h)));for(var g,_=0;_<t.length;_++)if(g=t[_],!!Array.isArray(g)){if(r=="x")g[0]+=i;else if(r=="y")g[1]+=i;else if(r=="scaleX")g[0]=(g[0]-o)*i+o,g[4]=g[4]*i,g[6]=g[6]*i;else if(r=="scaleY")g[1]=(g[1]-l)*i+l,g[5]=g[5]*i,g[7]=g[7]*i;else if(r=="scale")g[0]=(g[0]-o)*i+o,g[4]=g[4]*i,g[6]=g[6]*i,g[1]=(g[1]-l)*i+l,g[5]=g[5]*i,g[7]=g[7]*i;else if(r=="rotation"){var P=i*Math.PI/180,C=g[0],T=g[1];g[0]=C*Math.cos(P)-T*Math.sin(P),g[1]=T*Math.cos(P)+C*Math.sin(P),C=g[4],T=g[5],g[4]=C*Math.cos(P)-T*Math.sin(P),g[5]=T*Math.cos(P)+C*Math.sin(P),C=g[6],T=g[7],g[6]=C*Math.cos(P)-T*Math.sin(P),g[7]=T*Math.cos(P)+C*Math.sin(P)}}return r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",f)),l!=0&&(t=e.transformPoints(t,"y",h))),t}},e.trimPointEnds=function(t){qe("27.97"),t[0][4]=0,t[0][5]=0,t[0][8]="free",t[t.length-1][6]=0,t[t.length-1][7]=0,t[t.length-1][8]="free"},e.reversePoints=function(t){return qe("27.975"),t.reverse(),e.loop(t,function(r){var i=r[6];r[6]=r[4],r[4]=i;var o=r[7];r[7]=r[5],r[5]=o}),t},e.appendPoints=function(t,r,i){return qe("27.98"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(t[t.length-1][6]=r[0][6],t[t.length-1][7]=r[0][7],i&&(t[t.length-1][8]=i),r.shift(),t=t.concat(r)),t)},e.prependPoints=function(t,r,i){return qe("27.985"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(r[r.length-1][6]=t[0][6],r[r.length-1][7]=t[0][7],i&&(t[t.length-1][8]=i),t.shift(),t=r.concat(t)),t)},e.splitPoints=function(t,r,i){if(qe("27.99"),!n(t)&&(n(r)&&(r=Math.floor(t.length/2)),!(r<0||r>t.length-1))){n(i)&&(i=!0);var o=e.copy(t.slice(0,r+1)),l=e.copy(t.slice(r));return i&&(e.trimPointEnds(o),e.trimPointEnds(l)),[o,l]}},e.makeID=function(t,r,i){qe("13.5"),n(t)&&(t="mixed"),n(r)&&(r=5),n(i)&&(i="uppercase");var o,l=[2,3,4,5,6,7,8,9],f="abcdefghjkmnpqrstuvwxyz".split("");t.constructor===Array?o=t:t=="numbers"?o=l:t=="letters"?o=f:o=l.concat(f);for(var h="",g,_,P=0;P<r;P++)g=o[Math.floor(Math.random()*o.length)],_=Math.random(),i=="uppercase"||i=="mixed"&&_>.5?g.toUpperCase&&(g=g.toUpperCase()):g.toLowerCase&&(g=g.toLowerCase()),h+=String(g);return h},e.makeSyllable=function(t,r){qe("13.55");var i="bcdfghjklmnprstvwxz",o="aeiouaeiouaeiouy";n(t)&&(t=3),n(r)&&(r=e.rand()<.3);function l(g){var _=e.rand(g.length-1),P=g.substring(_,_+1);return P}var f="",h=r?o:i;return e.loop(t,function(){f+=l(h),h=h==o?i:o}),f},e.makePrimitive=function(t){qe("13.56");function r(i){return Array.isArray(i)?(e.loop(i,function(o){o=r(o)}),i):i.constructor==={}.constructor?(e.loop(i,function(o,l){i[o]=r(l)}),i):i instanceof String?String(i):i instanceof Number?Number(i):i instanceof Boolean?!!i:i}return r(t)},e.makeMath=function(){qe("13.565");for(var t=Object.getOwnPropertyNames(Math),r=0;r<t.length;r++)le[t[r]]=Math[t[r]]},e.swapProperties=function(t,r,i){if(qe("17.1"),n(r)||n(i)||n(r[t])||n(i[t]))return!1;var o=i[t];return i[t]=r[t],r[t]=o,!0},e.mobile=function(t){return qe("28"),!n(le.MOBILE)&&le.MOBILE!="default"?le.MOBILE:!n(e.MOBILE)&&e.MOBILE!="default"?e.MOBILE:(n(t)&&(t=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":t&&le.orientation!==void 0?/safari/i.test(navigator.userAgent)?"ios":!0:!1)},e.vee=function(t){return qe("28.5"),!n(t)&&(t.type=="Pick"||Array.isArray(t)||t.constructor=={}.constructor&&(!n(t.max)||!n(t.noPick))||typeof t=="function")},e.extend=function(t,r,i,o,l){var f="subclass, superclass, override, prefix, prototype",h;if(h=mt(e.extend,arguments,f))return h;if(n(t)||n(r)){Et&&t!=e.StageGL&&ht("zim.extend() - please supply a class and its superclass");return}n(o)&&(o="super"),n(i)&&(i=[]),Array.isArray(i)||(i=[i]),n(l)&&(l=!0);var g={};for(var _ in t.prototype)Object.defineProperty(g,_,Object.getOwnPropertyDescriptor(t.prototype,_));function P(){this.constructor=t}P.prototype=r.prototype,t.prototype=new P;for(_ in g)Object.defineProperty(t.prototype,_,Object.getOwnPropertyDescriptor(g,_));var C=t.prototype,T=Object.getPrototypeOf&&Object.getPrototypeOf(C)||C.__proto__;if(T){C[(o+="_")+"constructor"]=T.constructor;for(var N,O=0;O<i.length;O++)N=i[O],typeof T[N]=="function"&&(C[o+N]=T[N]);if(l)for(N in T)Object.prototype.hasOwnProperty.call(C,N)&&typeof T[N]=="function"&&(C[o+N]=T[N])}return t},e.copy=function(t,r,i){if(e.copyCheck||(qe("10"),e.copyCheck=!0),n(r)&&(r=!1),n(i)&&(i=!0),t==null||!(t instanceof Array||t.constructor=={}.constructor))return r&&t!=null&&t.clone&&t.type&&(t.type!="Container"&&t.type!="Stage"&&t.type!="StageGL"||i)?t.clone():t;if(t instanceof Array){for(var o=[],l=0;l<t.length;l++)o[l]=e.copy(t[l],r,i);return o}if(t.constructor=={}.constructor){var f={};for(var h in t){var g=e.copy(t[h],r,i);Object.prototype.hasOwnProperty.call(t,h)&&(f[h]=g)}return f}},e.merge=function(){e.mergeCheck||(qe("12"),e.mergeCheck=!0);var t={},r,i;for(r=0;r<arguments.length;r++)for(i in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],i)&&(t[i]=arguments[r][i]);return t},e.sortObject=function(t,r,i){qe("12.1");var o=function(g){return g[r]},l=Object.entries(t).sort(function(g,_){return i?o(g[1])<o(_[1])?1:o(g[1])>o(_[1])?-1:0:o(g[1])>o(_[1])?1:o(g[1])<o(_[1])?-1:0}),f=new Map(l),h={};return f.forEach((g,_)=>{h[_]=g}),h},e.arraysEqual=function(t,r,i){if(qe("11"),n(t)||n(r)||(n(i)&&(i=!0),t.length!=r.length))return!1;for(var o=0;o<t.length;o++)if(t[o]instanceof Array&&r[o]instanceof Array){if(!e.arraysEqual(t[o],r[o],i))return!1}else{if(i&&t[o]!=r[o])return!1;if(!i)return e.arraysEqual(t.sort(),r.sort(),!0)}return!0},e.arrayMinMax=function(t){if(qe("11.2"),!Array.isArray(t))return{min:null,max:null};for(var r=t[0],i=t[0],o=t.length;o--;)r=t[o]<r?t[o]:r,i=t[o]>i?t[o]:i;return r=isNaN(r)?null:r,i=isNaN(i)?null:i,{min:r,max:i}},e.isEmpty=function(t){if(e.zimEmptyCheck||(qe("11.5"),e.zimEmptyCheck=!0),!n(t)){var r=0;for(var i in t){r++;break}return r==0}},e.isJSON=function(t){if(qe("11.6"),typeof t!="string")return!1;try{return JSON.parse(t),!0}catch(r){return!1}},e.isPick=function(t){if(e.zimPickCheck||(qe("11.7"),e.zimPickCheck=!0),!n(t))return Array.isArray(t)||t.constructor=={}.constructor&&(t.min!=null&&t.max!=null||t.noPick)||t.constructor===Function&&(t.array!=null||t()!=null)},e.zut=function(t){if(n(t)||typeof t=="object")return!0},e.decimals=function(t,r,i,o,l,f,h){if(e.zimDecimalCheck||(qe("13"),e.zimDecimalCheck=!0),n(t))return 0;n(r)&&(r=1),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=!0),n(f)&&(f=!1);var g=Math.round(t*Math.pow(10,r))/Math.pow(10,r);if(f){var _=g-Math.floor(g);g=e.decimals(Math.floor(g)+_*60/100,2)}var P=e.sign(g),C,T,N;if(i>0)for(C=String(g).indexOf("."),T=String(g).length,C<0&&(C=T++,g+="."),N=0;N<i-(T-C-1);N++)g+="0";if(o>1){P==-1&&(g=g.substr(1,g.length-1)),C=String(g).indexOf("."),T=String(g).length;var O=C<0?T:C;for(N=0;N<o-O;N++)g="0"+g;P==-1&&(g="-"+g)}return o==0&&(g=g.toString().replace(/^0\./,".")),i+o>0&&!l&&Number(g)==0&&(g=0),f&&(g=String(g).replace(".",":")),e.zut(h)?g:null},e.countDecimals=function(t){return e.zimCountDecimalsCheck||(qe("13.05"),e.zimCountDecimalsCheck=!0),t%1?t.toString().split(".")[1].length:0},e.sign=function(t){return e.zimSignCheck||(qe("13.1"),e.zimSignCheck=!0),t?t<0?-1:1:0},e.constrain=function(t,r,i,o){if(qe("13.2"),!n(t)){if(n(r)&&(r=0),n(i)&&(i=Number.MAX_VALUE),i<r){var l=r;i=r,r=l}return n(o)&&(o=!1),o&&t<0?Math.max(-i,Math.min(t,-r)):Math.max(r,Math.min(t,i))}},e.dist=function(t,r,i,o){if(e.zimDistCheck||(qe("13.3"),e.zimDistCheck=!0),!(n(t)||n(r)))return!n(t.x)&&!n(r.x)?(o=r.y,i=r.x,r=t.y,t=t.x):(n(i)&&(i=0),n(o)&&(o=0)),Math.sqrt(Math.pow(i-t,2)+Math.pow(o-r,2))},e.rectIntersect=function(t,r,i){return e.zimRectIntersectCheck||(qe("13.32"),e.zimRectIntersectCheck=!0),n(i)&&(i=0),!(t.x>=r.x+r.width+i||t.x+t.width+i<=r.x||t.y>=r.y+r.height+i||t.y+t.height+i<=r.y)},e.boundsAroundPoints=function(t){e.zimBoundsAroundPointsCheck||(qe("13.34"),e.zimBoundsAroundPointsCheck=!0);for(var r=1e4,i=1e4,o=-1e4,l=-1e4,f=0;f<t.length;f++){var h=t[f];h.x<r&&(r=h.x),h.x>o&&(o=h.x),h.y<i&&(i=h.y),h.y>l&&(l=h.y)}return{x:r,y:i,width:o-r,height:l-i}},e.angle=function(t,r,i,o){if(e.angleCheck||(qe("13.4"),e.angleCheck=!0),!(n(t)||n(r)))return n(i)&&(i=t,t=0),n(o)&&(o=r,r=0),(Math.atan2(o-r,i-t)*180/Math.PI+360)%360},e.TAU=Math.PI*2,e.DEG=180/Math.PI,e.RAD=Math.PI/180,e.PHI=Math.pow(5,.5)*.5+.5,e.smoothStep=function(t,r,i){qe("13.7");var o=e.constrain((t-r)/(i-r),0,1);return o*o*o*(o*(o*6-15)+10)},e.unicodeToUTF=function(t){if(qe("13.75"),!!t){t!=" "&&(t=t.replace(/^\s+/g,""));var r,i="",o="";return r=t.charCodeAt(0),i=r,o=t.charCodeAt(1),o>=56320&&o<=57343&&(r=(i-55296)*1024+(o-56320)+65536),i=i.toString(16),o=o.toString(16),r=r.toString(16),"\\u"+i+"\\u"+o}},e.capitalizeFirst=function(t){return qe("13.78"),t.charAt(0).toUpperCase()+t.slice(1)},e.Ajax=function(t,r,i,o){qe("13.8");var l=new XMLHttpRequest;this.master=t,this.couple=r,this.lock=i,this.unique=o;var f=this;this.get=function(h,g){var _=n(f.master)?"":"&master="+encodeURI(t),P=n(f.lock)?"":"&lock="+encodeURI(i),C=f.unique?"&unique=true":"";l.open("GET",h+_+P+C,!0),l.onload=function(){l.status==200?g(e.isJSON(l.responseText)?JSON.parse(l.responseText):l.responseText):g(null,"Error: "+l.status)},l.send()},this.post=function(h,g,_,P,C){var T="url, data, command, extra, callback",N;if(N=mt(f.post,arguments,T))return N;if(!n(h)){l.open("POST",h,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onload=function(){var E=l.responseText;e.isJSON(E)&&(f.couple&&(E=e.decouple(E)),E=JSON.parse(E)),C(E)},e.isJSON(g)||(g=JSON.stringify(g)),f.couple&&(g=e.couple(g));var O=n(f.master)?"":"&master="+encodeURIComponent(f.master),S=n(f.lock)?"":"&lock="+encodeURIComponent(f.lock),k=n(_)?"":"&command="+encodeURIComponent(_),x=n(P)?"":"&extra="+encodeURIComponent(P);l.send("data="+encodeURIComponent(g)+O+S+k+x)}},this.put=function(h,g,_){l.open("PUT",h,!0),l.setRequestHeader("Content-type","application/json"),l.onload=function(){_(e.isJSON(l.responseText)?JSON.parse(l.responseText):f.http.responseText)},l.send(JSON.stringify(g))}},e.Noise=function(t){"use strict";qe("13.9"),n(t)&&(t=Math.random()*1e6);var r=t;this.seed=t;var i=this,o={};o.NORM_2D=1/47,o.NORM_3D=1/103,o.NORM_4D=1/30,o.SQUISH_2D=(Math.sqrt(2+1)-1)/2,o.SQUISH_3D=(Math.sqrt(3+1)-1)/3,o.SQUISH_4D=(Math.sqrt(4+1)-1)/4,o.STRETCH_2D=(1/Math.sqrt(2+1)-1)/2,o.STRETCH_3D=(1/Math.sqrt(3+1)-1)/3,o.STRETCH_4D=(1/Math.sqrt(4+1)-1)/4,o.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],o.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],o.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],o.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],o.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],o.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],o.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],o.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],o.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],o.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],o.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],o.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];function l(L){var A=new Uint32Array(1);return A[0]=L[0]*1664525+1013904223,A}function f(L,A,b){this.dx=-A-L*o.SQUISH_2D,this.dy=-b-L*o.SQUISH_2D,this.xsb=A,this.ysb=b}function h(L,A,b,F){this.dx=-A-L*o.SQUISH_3D,this.dy=-b-L*o.SQUISH_3D,this.dz=-F-L*o.SQUISH_3D,this.xsb=A,this.ysb=b,this.zsb=F}function g(L,A,b,F,q){this.dx=-A-L*o.SQUISH_4D,this.dy=-b-L*o.SQUISH_4D,this.dz=-F-L*o.SQUISH_4D,this.dw=-q-L*o.SQUISH_4D,this.xsb=A,this.ysb=b,this.zsb=F,this.wsb=q}var _=[],P,C,T,N,O,S;for(P=0;P<o.p2D.length;P+=4){for(N=o.base2D[o.p2D[P]],O=null,S=null,C=0;C<N.length;C+=3)S=new f(N[C],N[C+1],N[C+2]),O===null?_[P/4]=S:O.next=S,O=S;S.next=new f(o.p2D[P+1],o.p2D[P+2],o.p2D[P+3])}for(this.lookup2D=[],P=0;P<o.lookupPairs2D.length;P+=2)this.lookup2D[o.lookupPairs2D[P]]=_[o.lookupPairs2D[P+1]];var k=[];for(P=0;P<o.p3D.length;P+=9){for(N=o.base3D[o.p3D[P]],O=null,S=null,C=0;C<N.length;C+=4)S=new h(N[C],N[C+1],N[C+2],N[C+3]),O===null?k[P/9]=S:O.next=S,O=S;S.next=new h(o.p3D[P+1],o.p3D[P+2],o.p3D[P+3],o.p3D[P+4]),S.next.next=new h(o.p3D[P+5],o.p3D[P+6],o.p3D[P+7],o.p3D[P+8])}for(this.lookup3D=[],P=0;P<o.lookupPairs3D.length;P+=2)this.lookup3D[o.lookupPairs3D[P]]=k[o.lookupPairs3D[P+1]];var x=[];for(P=0;P<o.p4D.length;P+=16){for(N=o.base4D[o.p4D[P]],O=null,S=null,C=0;C<N.length;C+=5)S=new g(N[C],N[C+1],N[C+2],N[C+3],N[C+4]),O===null?x[P/16]=S:O.next=S,O=S;S.next=new g(o.p4D[P+1],o.p4D[P+2],o.p4D[P+3],o.p4D[P+4],o.p4D[P+5]),S.next.next=new g(o.p4D[P+6],o.p4D[P+7],o.p4D[P+8],o.p4D[P+9],o.p4D[P+10]),S.next.next.next=new g(o.p4D[P+11],o.p4D[P+12],o.p4D[P+13],o.p4D[P+14],o.p4D[P+15])}for(this.lookup4D=[],P=0;P<o.lookupPairs4D.length;P+=2)this.lookup4D[o.lookupPairs4D[P]]=x[o.lookupPairs4D[P+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var E=new Uint8Array(256);for(P=0;P<256;P++)E[P]=P;for(t=new Uint32Array(1),t[0]=r,t=l(l(l(t))),P=255;P>=0;P--)t=l(t),T=new Uint32Array(1),T[0]=(t[0]+31)%(P+1),T[0]<0&&(T[0]+=P+1),this.perm[P]=E[T[0]],this.perm2D[P]=this.perm[P]&14,this.perm3D[P]=this.perm[P]%24*3,this.perm4D[P]=this.perm[P]&252,E[T[0]]=E[P];this.simplex1D=function(L){return i.simplex2D(L,1)},this.simplex2D=function(L,A){var b=(L+A)*o.STRETCH_2D,F=[L+b,A+b],q=F[0],V=F[1],I=[Math.floor(q),Math.floor(V)],ne=I[0],R=I[1],Q=(ne+R)*o.SQUISH_2D,U=[L-(ne+Q),A-(R+Q)],ee=U[0],ae=U[1],ie=[q-ne,V-R],ce=ie[0],j=ie[1],G=ce+j,y=new Uint32Array(4);y[0]=ce-j+1,y[1]=G,y[2]=G+j,y[3]=G+ce;for(var p=y[0]|y[1]<<1|y[2]<<2|y[3]<<4,d=i.lookup2D[p],D=0;typeof d<"u";){var K=[ee+d.dx,ae+d.dy],w=K[0],Y=K[1],Ee=2-w*w-Y*Y;if(Ee>0){var X=[ne+d.xsb,R+d.ysb],Z=X[0],pe=X[1],ve=i.perm2D[i.perm[Z&255]+pe&255],$=o.gradients2D[ve]*w+o.gradients2D[ve+1]*Y;Ee*=Ee,D+=Ee*Ee*$}d=d.next}return D*o.NORM_2D},this.simplex3D=function(L,A,b){var F=(L+A+b)*o.STRETCH_3D,q=[L+F,A+F,b+F],V=q[0],I=q[1],ne=q[2],R=[Math.floor(V),Math.floor(I),Math.floor(ne)],Q=R[0],U=R[1],ee=R[2],ae=(Q+U+ee)*o.SQUISH_3D,ie=[L-(Q+ae),A-(U+ae),b-(ee+ae)],ce=ie[0],j=ie[1],G=ie[2],y=[V-Q,I-U,ne-ee],p=y[0],d=y[1],D=y[2],K=p+d+D,w=new Uint32Array(7);w[0]=d-D+1,w[1]=p-d+1,w[2]=p-D+1,w[3]=K,w[4]=K+D,w[5]=K+d,w[6]=K+p;for(var Y=w[0]|w[1]<<1|w[2]<<2|w[3]<<3|w[4]<<5|w[5]<<7|w[6]<<9,Ee=i.lookup3D[Y],X=0;typeof Ee<"u";){var Z=[ce+Ee.dx,j+Ee.dy,G+Ee.dz],pe=Z[0],ve=Z[1],$=Z[2],ue=2-pe*pe-ve*ve-$*$;if(ue>0){var xe=[Q+Ee.xsb,U+Ee.ysb,ee+Ee.zsb],Ye=xe[0],se=xe[1],be=xe[2],te=i.perm3D[i.perm[i.perm[Ye&255]+se&255]+be&255],_e=o.gradients3D[te]*pe+o.gradients3D[te+1]*ve+o.gradients3D[te+2]*$;ue*=ue,X+=ue*ue*_e}Ee=Ee.next}return X*o.NORM_3D},this.simplex4D=function(L,A,b,F){var q=(L+A+b+F)*o.STRETCH_4D,V=[L+q,A+q,b+q,F+q],I=V[0],ne=V[1],R=V[2],Q=V[3],U=[Math.floor(I),Math.floor(ne),Math.floor(R),Math.floor(Q)],ee=U[0],ae=U[1],ie=U[2],ce=U[3],j=(ee+ae+ie+ce)*o.SQUISH_4D,G=L-(ee+j),y=A-(ae+j),p=b-(ie+j),d=F-(ce+j),D=[I-ee,ne-ae,R-ie,Q-ce],K=D[0],w=D[1],Y=D[2],Ee=D[3],X=K+w+Y+Ee,Z=new Uint32Array(11);Z[0]=Y-Ee+1,Z[1]=w-Y+1,Z[2]=w-Ee+1,Z[3]=K-w+1,Z[4]=K-Y+1,Z[5]=K-Ee+1,Z[6]=X<<6,Z[7]=X+Ee,Z[8]=X+Y,Z[9]=X+w,Z[10]=X+K;for(var pe=Z[0]|Z[1]<<1|Z[2]<<2|Z[3]<<3|Z[4]<<4|Z[5]<<5|Z[6]<<6|Z[7]<<8|Z[8]<<11|Z[9]<<14|Z[10]<<17,ve=i.lookup4D[pe],$=0;typeof ve<"u";){var ue=[G+ve.dx,y+ve.dy,p+ve.dz,d+ve.dw],xe=ue[0],Ye=ue[1],se=ue[2],be=ue[3],te=2-xe*xe-Ye*Ye-se*se-be*be;if(te>0){var _e=[ee+ve.xsb,ae+ve.ysb,ie+ve.zsb,ce+ve.wsb],J=_e[0],ye=_e[1],Re=_e[2],de=_e[3],Me=i.perm4D[i.perm[i.perm[i.perm[J&255]+ye&255]+Re&255]+de&255],Be=o.gradients4D[Me]*xe+o.gradients4D[Me+1]*Ye+o.gradients4D[Me+2]*se+o.gradients4D[Me+3]*be;te*=te,$+=te*te*Be}ve=ve.next}return $*o.NORM_4D}},typeof ze<"u"&&(e.Point=function(t,r,i,o,l,f,h,g,_,P){qe("13.45"),n(t)&&(t=0),n(r)&&(r=0),n(i)&&(i=0),n(o)&&(o=0),n(l)&&(l=0),n(f)&&(f=0),n(h)&&(h=0),n(g)&&(g=0),n(_)&&(_=0),n(P)&&(P=0),this.createjsPoint_constructor(t,r),this.type="Point",this.x=t,this.y=r,this.z=i,this.q=o,this.r=l,this.s=f,this.t=h,this.u=g,this.v=_,this.w=P,this.angle=function(C){return this.createjsPoint_angle(C)*180/Math.PI},this.project=function(C,T){return this.createjsPoint_project(C*Math.PI/180,T)}},e.extend(e.Point,ze.Point,["angle","project"],"createjsPoint")),e.Bezier=function(r,i,o,l){qe("13.47"),this.a=r,this.b=i,this.c=o,this.d=l,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var f=this.x(0),h=this.y(0),g=0,_=1;_<=this.len;_+=1){var P=this.x(_*.01),C=this.y(_*.01),T=f-P,N=h-C;g+=Math.sqrt(T*T+N*N),this.arcLengths[_]=g,f=P,h=C}this.length=g},e.Bezier.prototype={map:function(t){for(var r=t*this.arcLengths[this.len],i=0,o=this.len,l=0;i<o;)l=i+((o-i)/2|0),this.arcLengths[l]<r?i=l+1:o=l;this.arcLengths[l]>r&&l--;var f=this.arcLengths[l];return f===r?l/this.len:(l+(r-f)/(this.arcLengths[l+1]-f))/this.len},mx:function(t){return this.x(this.map(t))},my:function(t){return this.y(this.map(t))},x:function(t){return(1-t)*(1-t)*(1-t)*this.a.x+3*((1-t)*(1-t))*t*this.b.x+3*(1-t)*(t*t)*this.c.x+t*t*t*this.d.x},y:function(t){return(1-t)*(1-t)*(1-t)*this.a.y+3*((1-t)*(1-t))*t*this.b.y+3*(1-t)*(t*t)*this.c.y+t*t*t*this.d.y}},e.Boundary=function(t,r,i,o){qe("13.46"),t.x&&(o=t.height,i=t.width,r=t.y,t=t.x),!(n(t)||n(r)||n(i)||n(o))&&(this.x=t,this.y=r,this.width=i,this.height=o,this.contract=function(l,f,h,g){return n(l)?this:(n(f)&&(f=l),n(h)?h=l*2:h=h+l,n(g)?g=f*2:g=g+f,this.x+=l,this.y+=f,this.width-=h,this.height-=g,this)})},e.GradientColor=function(t,r,i,o,l,f){if(qe("13.465"),this.type="GradientColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=n(r)?0:r,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var h=0;h<this.colors.length;h++)this.ratios.push(h/(this.colors.length-1))}!n(i)&&(n(o)||n(l)||n(f))?(this.angle=i,i=null):n(this.angle)&&n(i)&&n(o)&&n(l)&&n(f)?this.angle=0:(this.x0=n(i)?0:i,this.y0=n(o)?0:o,this.x1=n(l)?0:l,this.y1=n(f)?100:f)},e.RadialColor=function(t,r,i,o,l,f,h,g){if(qe("13.466"),this.type="RadialColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=r,!Array.isArray(this.ratios)){this.ratios=[];for(var _=0;_<this.colors.length;_++)this.ratios.push(_/(this.colors.length-1))}this.x0=i,this.y0=o,this.r0=l,this.x1=f,this.y1=h,this.r1=g},e.BitmapColor=function(t,r,i){qe("13.467"),this.type="BitmapColor",typeof t=="string"&&le.asset&&(t=le.asset(t)),t.type!="Bitmap"&&t.bitmap&&(t=t.bitmap),this.image=t.type=="Bitmap"?t.image:t,this.repetition=r,this.matrix=i},e.Damp=function(t,r){qe("14");var i="startValue, damp",o;if(o=mt(e.Damp,arguments,i,this))return o;this.lastValue=n(t)?0:t,this.damp=n(r)?.1:r},e.Damp.prototype.convert=function(t){return this.lastValue=this.lastValue+(t-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(t){return this.lastValue=t,this},e.Proportion=function(t,r,i,o,l,f,h){var g="baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",_;if(_=mt(e.Proportion,arguments,g,this))return _;qe("15"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=1),n(f)&&(f=!1),n(h)&&(h=!0);var P,C;this.convert=function(T){if(n(T)&&(T=t),!(isNaN(T)||r-t==0))return h&&(T=Math.max(T,t),T=Math.min(T,r)),P=(T-t)/(r-t),l>0?C=i+(o-i)*P:C=o-(o-i)*P,f&&(C=Math.round(C)),C}},e.ProportionDamp=function(t,r,i,o,l,f,h,g){var _="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",P;if(P=mt(e.ProportionDamp,arguments,_,this))return P;qe("16"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=.1),n(f)&&(f=1),n(h)&&(h=!1),n(g)&&(g=!0),this.damp=l;var C=this,T,N,O,S,k,x=0,E=0;T=t,E=i;var L=setInterval(A,20);function A(){isNaN(T)||r-t==0||(g&&(T=Math.max(T,t),T=Math.min(T,r)),N=(T-t)/(r-t),O=o-i,f>0?S=i+O*N:S=o-O*N,x=S,k=x-E,E+=k*C.damp)}this.immediate=function(b){return C.convert(b),A(),E=S,h&&(E=Math.round(E)),C},this.immediateValue=function(b){return x=E=b,C},this.convert=function(b){return T=b,h?Math.round(E):E},this.dispose=function(){return clearInterval(L),!0}},e.Dictionary=function(t){qe("17"),this.length=0,this.unique=t;var r=this.objects=[],i=this.values=[];this.type="Dictionary",this.add=function(o,l){n(o)||(n(l)&&(l=!0),this.unique&&this.remove(o),r.push(o),i.push(l),this.length++)},this.at=function(o){if(!n(o)){var l=r.indexOf(o);return l>-1?i[l]:null}},this.remove=function(o){if(n(o))return!1;var l=r.indexOf(o);return l>-1?(r.splice(l,1),i.splice(l,1),this.length--,!0):!1},this.clear=function(){return r=this.objects=[],i=this.values=[],this.length=null,this},this.dispose=function(){return r=null,i=null,this.length=null,!0}},e.Hierarchy=function(t,r){qe("17.5");var i=this;if(n(t))return;n(r)&&(r=!1);var o;i.processSimple=function(g){var _=0,P={};function C(T,N,O,S){if(n(T)||(g=T),g.constructor=={}.constructor){var k;g.list&&(k=g,g=g.list),S&&k&&e.loop(k,function(x,E){x!="list"&&(S[x]=E)}),e.loop(g,function(x,E){var L={},A=N["id"+_]={obj:x,level:O,open:r,opened:!1,list:L};_++,C(E,L,O+1,A)})}else Array.isArray(g)&&e.loop(g,function(x){N["id"+_]={obj:x},_++})}return C(t,P,0),o=_,P},i.processComplex=function(g){var _=0;function P(C,T){e.loop(C,function(N,O){O.level=T,n(O.open)&&(O.open=r),n(O.opened)&&(O.opened=!1),O.list&&P(O.list,T+1),_++})}return P(g,0),o=_,g},n(t.id0)?i.data=i.processSimple(t):i.data=i.processComplex(t),i.getLinearList=function(g){return n(g)&&(g=i.data),l(g)[0]},i.getLinearIDs=function(g){return n(g)&&(g=i.data),l(g)[1]};function l(g){var _=[],P=[];function C(T,N){e.loop(T,function(O,S){_.push(S.obj),P.push(O),S.open&&C(S.list,N+1)})}return C(g,0),[_,P]}i.getData=function(g){var _;function P(C){e.loop(C,function(T,N){if(T==g)return _=N,_;P(N.list)})}return P(i.data),_},i.getNextSibling=function(g){var _,P;function C(T){e.loop(T,function(N,O){if(!P&&_)return P=N,P;N==g?_=O:C(O.list)})}return C(i.data),P},i.getPrevSibling=function(g){var _=[],P;function C(T,N){e.loop(T,function(O,S){if(O==g)return P=_[N]||_[N-1],P;_[N]=O,C(S.list,N+1)})}return C(i.data,0),P},i.insertBefore=function(g,_,P){return f("insertBefore",g,_,P)},i.insertAfter=function(g,_,P){return f("insertAfter",g,_,P)},i.removeItem=function(g){return f("removeItem",null,g)},i.replaceItem=function(g,_){var P=i.getData(_);return P.obj=g,f("replaceItem")};function f(g,_,P,C){var T=0,N={},O=i.data;function S(k,x,E,L){e.loop(k,function(A,b){if(!(g=="removeItem"&&A==P)){var F,q,V;g=="insertBefore"&&A==P&&(T=h(x,T,E,_,C)),F={},q=b.list,b.list=F,b.opened=!1,b.open=!1,V=x["id"+T]=b,V.obj.type&&V.obj.type=="TabsButton"&&(V.obj=V.obj.text),T++,S(q,F,E+1),g=="insertAfter"&&A==P&&(T=h(x,T,E,_,C))}})}return S(O,N,0),o=T,N}function h(g,_,P,C,T){if(T){var N={};Array.isArray(C)&&(C=C[0]),g["id"+_]={obj:C,level:P,open:!1,opened:!1,list:N},_++,Array.isArray(T)||(T=[T]),e.loop(T,function(O){N["id"+_]={obj:O,level:P+1,open:!1,opened:!1,list:{}},_++})}else Array.isArray(C)||(C=[C]),e.loop(C,function(O){g["id"+_]={obj:O,level:P,open:!1,opened:!1,list:{}},_++});return _}i.getParent=function(g){var _=i.data;function P(C,T){var N=e.loop(C,function(O,S){if(O==g)return o-=1,T;if(S.list&&!e.isEmpty(S.list))return P(S.list,O)});if(N!==!0)return N}return P(_)},Object.defineProperty(i,"length",{get:function(){return o},set:function(){Et&&ht("Hierarchy() - length is read only")}})},e.Pick=function(t){e.pickCheck||(qe("17.6"),e.pickCheck=!0),this.choices=t,this.num=function(i){for(var o=[],l=0;l<i;l++)o.push(e.Pick.choose(this));return this.choices=e.Pick.series(o),this};var r=this;this.loop=function(i,o){for(var l,f=0;f<i;f++)if(l=o(e.Pick.choose(r),f,i),typeof l<"u")return l}},e.Pick.prototype.type="Pick",e.Pick.series=function(){return e.pickCheck||(qe("17.6"),e.pickCheck=!0),e.series.apply(null,arguments)},e.Pick.rand=function(t,r,i,o){return e.pickCheck||(qe("17.6"),e.pickCheck=!0),e.rand(t,r,i,o)},e.Pick.choose=function(t,r,i){if(e.pickCheck||(qe("17.6"),e.pickCheck=!0),r==null&&(r=!0),t==null)return t;if(t.type=="Pick"||r){var o=t.choices||t,l;return Array.isArray(o)?(l=o[Math.floor(Math.random()*o.length)],e.Pick.choose(l)):o.constructor==={}.constructor?n(o.noPick)?n(o.max)?o:(n(o.integer)&&(o.integer=!1),l=e.Pick.rand(o.min,o.max,o.integer,o.negative),l):o.noPick:o instanceof Function?(o.count==null?o.count=0:o.count++,e.Pick.choose(o(i,!0))):t}else return t},e.Pick.getMinMax=function(t){return!n(t.min)&&!n(t.max)?t:Array.isArray(t)?e.arrayMinMax(t):t.type=="series"?e.arrayMinMax(t.array):{min:null,max:null}},e.scrollX=function(t,r){return qe("18"),e.abstractScroll("X","Left",t,r)},e.scrollY=function(t,r){return qe("19"),e.abstractScroll("Y","Top",t,r)},e.abstractScroll=function(t,r,i,o){qe("20");var l=v(o),f=t=="X"?"Y":"X";if(n(i))return document.documentElement&&document.documentElement["scroll"+r]||document.body["scroll"+r];if(n(o))le.scrollTo(e["scroll"+f](),i);else{var h=50,g=o*(l=="s"?1e3:1);g<h&&(g=h);var _=g/h,P=e["scroll"+t](),C=i-P,T=C/_,N=0,O=setInterval(function(){N++,P+=T,le.scrollTo(e["scroll"+f](),P),N>=_&&(le.scrollTo(e["scroll"+f](),i),clearInterval(O))},h)}return i},e.windowWidth=function(){qe("21");var t=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,r=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;if(e.mobile()&&!n(le.orientation)&&!le.parent&&(t>r&&Math.abs(le.orientation)!=90||r>t&&Math.abs(le.orientation)==90)){var i=t;t=r,r=i}return le.zdf&&le.zdf.swapRotation?r:t},e.windowHeight=function(){qe("22");var t=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,r=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;if(e.mobile()&&!n(le.orientation)&&!le.parent&&(t>r&&Math.abs(le.orientation)!=90||r>t&&Math.abs(le.orientation)==90)){var i=t;t=r,r=i}return le.zdf&&le.zdf.swapRotation?t:r},e.browserZoom=function(){if(e.zimBZ)return n(e.zimBZA)?e.decimals((le.devicePixelRatio||1)/e.zimBZ1,2):e.zimBZA;if(qe("22.2"),e.zimBZ=!0,typeof t>"u")if(le.zdf)var t=le.zdf;else return e.zimBZA=1,1;if(t.retina)e.zimBZ1=le.devicePixelRatio||1;else return e.zimBZA=1,1},e.getQueryString=function(t){if(qe("22.5"),n(t)&&(t=location.search.replace("?","")),t=="")return{};for(var r=t.split("&"),i={},o=0;o<r.length;o++){var l=r[o].split("=");typeof i[l[0]]>"u"?i[l[0]]=decodeURIComponent((l[1]+"").replace(/\+/g,"%20")):typeof i[l[0]]=="string"?i[l[0]]=[i[l[0]],decodeURIComponent((l[1]+"").replace(/\+/g,"%20"))]:i[l[0]].push(decodeURIComponent((l[1]+"").replace(/\+/g,"%20")))}return i},e.swapHTML=function(t,r){return qe("17.2"),e.swapProperties("innerHTML",Tn(t),Tn(r))},e.urlEncode=function(t){return qe("23"),t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(t){return qe("24"),decodeURIComponent((t+"").replace(/\+/g,"%20"))},e.setCookie=function(t,r,i){if(qe("25"),!(n(t)||n(r))){var o;if(i){var l=new Date;l.setTime(l.getTime()+i*24*60*60*1e3),o="; expires="+l.toGMTString()}else o="";return document.cookie=t+"="+escape(r)+o+"; path=/",!0}},e.getCookie=function(t){qe("26");for(var r=document.cookie.split(/;\s*/),i=new Array,o,l=0;l<r.length;l++)o=r[l].split("="),i[o[0]]=o[1];if(!(typeof i[t]>"u"))return unescape(i[t])},e.deleteCookie=function(t){return qe("27"),n(e.getCookie(t))?!1:(e.setCookie(t,"",-1),!0)},ze==null)return Et&&fi("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.localToGlobal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var f=l.call(o,r,i),h=o.stage;if(!le.zdf){if(!h)return f;le.zdf={stage:h,canvas:h.canvas}}return f.x/=e.scaX,f.y/=e.scaY,f}},e.globalToLocal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var f=o.stage;if(!le.zdf){if(!f)return l.call(o,r,i);le.zdf={stage:f,canvas:f.canvas}}r*=e.scaX,i*=e.scaY;var h=l.call(o,r,i);return h}},e.localToLocal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null||o==null)){var f=l.localToGlobal(r,i),h=l.stage;if(!le.zdf){if(!h)return o.globalToLocal(f.x,f.y);le.zdf={stage:h,canvas:h.canvas}}if(h||(h=le.zdf.stage),o==h)return f;if(f)return o.globalToLocal(f.x,f.y)}},e.displayBase=function(t){e.zimDBCheck||(qe("50.432"),e.zimDBCheck=!0);var r=t;if(Object.defineProperty(t,"width",{enumerable:!0,get:function(){var g=this.getBounds();return n(g)?null:Math.abs(g.width*this.scaleX)},set:function(g){if(t.scaleDimensions!==!1){var _=this.getBounds();if(n(_)||_.width==0){Et&&ht("DisplayObject() - width needs bounds set with setBounds()");return}var P=g/_.width;this.scaleX=this.scaleY=P}else{var C=t.width!=0?t.height/t.width:0;t.setWidth(g),t.setHeight(g*C),t.drawShape()}}}),Object.defineProperty(t,"height",{enumerable:!0,get:function(){var g=this.getBounds();return n(g)?null:Math.abs(g.height*this.scaleY)},set:function(g){if(t.scaleDimensions!==!1){var _=this.getBounds();if(n(_)||_.height==0){Et&&ht("DisplayObject() - height needs bounds set with setBounds()");return}var P=g/_.height;this.scaleX=this.scaleY=P}else{var C=t.height!=0?t.width/t.height:0;t.setHeight(g),t.setWidth(g*C),t.drawShape()}}}),Object.defineProperty(t,"widthOnly",{enumerable:!0,get:function(){var g=this.getBounds();return n(g)?null:Math.abs(g.width*this.scaleX)},set:function(g){if(t.scaleDimensions!==!1){var _=this.getBounds();if((n(_)||_.width==0)&&Et){ht("DisplayObject() - widthOnly needs bounds set with setBounds()");return}var P=g/_.width;this.scaleX=P}else t.setWidth(g),t.drawShape()}}),Object.defineProperty(t,"heightOnly",{enumerable:!0,get:function(){var g=this.getBounds();return n(g)?null:Math.abs(g.height*this.scaleY)},set:function(g){if(t.scaleDimensions!==!1){var _=this.getBounds();if((n(_)||_.height==0)&&Et){ht("DisplayObject() - heightOnly needs bounds set with setBounds()");return}var P=g/_.height;this.scaleY=P}else t.setHeight(g),t.drawShape()}}),Object.defineProperty(t,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(g){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(g,this.parent.numChildren-1)))}}),Object.defineProperty(t,"depth",{enumerable:!0,get:function(){return this._depth},set:function(g){if(this._depth=g,!n(this.vrChannel)){var _=this.vrParallaxDistance?g*this.vrParallax*this.vrParallaxDistance:0;this.vrChannel=="left"?this.x=this.vrStartX+g+_:this.vrChannel=="right"&&(this.x=this.vrStartX-g+_)}}}),Object.defineProperty(t,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(g){this.compositeOperation=g}}),!r.name){var i;Object.defineProperty(r,"name",{get:function(){return i},set:function(g){i=g,e.zimObjectIDs[g]=r}})}r._draggable,Object.defineProperty(r,"draggable",{get:function(){return this._draggable},set:function(g){g!=this._draggable&&(this._draggable=g,this._draggable?this.drag():this.noDrag())}});var o,l;r.on("mousedown",function(g){g.target.stage&&(o=g.target.stage.frame,o.allowDefault&&(l=!0,o.allowDefault=!1))}),r.on("pressup",function(){o&&l&&(o.allowDefault=!0)});for(var f=["hue","saturation","brightness","contrast"],h=0;h<f.length;h++)-function(){for(var g=f[h],_=0;_<2;_++)-function(){var P=_==0?"":"Batch";Object.defineProperty(r,g+P,{get:function(){return r.effects&&r.effects.multi?r.effects.multi[g]:0},set:function(C){!r.effects||!r.effects.multi?r.effect(new e.MultiEffect(g=="hue"?C:0,g=="saturation"?C:0,g=="brightness"?C:0,g=="contrast"?C:0)):r.effects.multi[g]=C,P==""&&r.updateEffects()}})}()}()},e.gD=function(t){if(e.zimGDCheck||(qe("50.435"),e.zimGDCheck=!0),!!t){if(t.z_bc){var r=t.z_bc;r.width=r.height=1,r.getContext&&r.getContext("2d").clearRect(0,0,1,1),delete t.z_bc}e.KEYFOCUS==t&&(e.KEYFOCUS=null),le.KEYFOCUS==t&&(le.KEYFOCUS=null),t.veeObj&&(t.veeObj=null),t.draggable&&t.noDrag(),t.zimTweens&&t.stopAnimate(),t.zimWire&&t.noWire(),t.zimWired&&t.noWired(),t.zimClickHoldDownEvent&&t.noHold(),t.transformControls&&t.transformControls.dispose(),t.zimClickDownEvent&&(t.zimClickDownEvent=null),t.zimClickUpEvent&&(t.zimClickUpEvent=null),t.physics&&t.removePhysics(),t.name&&e.zimObjectIDs[t.name]==t&&delete e.zimObjectIDs[t.name]}},e.Stage=function(t,r,i){if(qe("50.44"),!n(t)){var o=t.tagName=="CANVAS"?t:Tn(t);n(o)||(this.cjsStage_constructor(t),this.setBounds(0,0,o.width,o.height),this.type="Stage",le.zdf||(le.zimDefaultFrame=le.zdf={stage:this}),i?ze.Touch.enable(this,!0):r&&ze.Touch.enable(this,!1),this.cache=function(l,f,h,g,_,P){if(n(h))if(n(l)){var C=this.getBounds();if(!n(C)){var T=this.borderWidth>0?this.borderWidth/2:0;l=C.x-T,f=C.y-T,h=C.width+T*2,g=C.height+T*2}}else h=l,g=f,l=0,f=0;return this.cjsStage_cache(l,f,h,g,_,P),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(l){var f=l.clone();f.type="pressdown",l.target.dispatchEvent(f)},void 0,!1,void 0,!0),this.loop=function(l,f,h,g,_,P){return e.loop(this,l,f,h,g,_,P)},this.hitTestGrid=function(l,f,h,g,_,P,C,T,N,O,S,k){return e.hitTestGrid(this,l,f,h,g,_,P,C,T,N,O,S,k)},this.disposeAllChildren=function(){for(var l=this.numChildren-1;l>=0;l--){var f=this.getChildAt(l);f.dispose&&f.dispose()}return this},this.frame=le.zdf,ze&&!ze.stageTransformable&&(le.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(l){this.cjsStage_scaleX=l,this.cjsStage_scaleY=l,e.scaX=ze.stageTransformable?1:l,e.scaY=ze.stageTransformable?1:l}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(l){this.cjsStage_scaleX=l,e.scaX=ze.stageTransformable?1:l}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(l){this.cjsStage_scaleY=l,e.scaY=ze.stageTransformable?1:l}}),this.localToGlobal=function(l,f){return e.localToGlobal(l,f,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(l,f){return e.globalToLocal(l,f,this,this.cjsStage_globalToLocal)},this.localToLocal=function(l,f,h){return e.localToLocal(l,f,h,this)}))}},e.extend(e.Stage,ze.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),e.StageGL=function(t,r,i,o){if(qe("50.45"),!n(t)){var l=t.tagName=="CANVAS"?t:Tn(t);n(l)||(this.cjsStageGL_constructor(t,r),this.setBounds(0,0,l.width,l.height),this.type="StageGL",le.zdf||(le.zdf={stage:this}),o?ze.Touch.enable(this,!0):i&&ze.Touch.enable(this,!1),this.cache=function(f,h,g,_,P,C){if(n(g))if(n(f)){var T=this.getBounds();if(!n(T)){var N=this.borderWidth>0?this.borderWidth/2:0;f=T.x-N,h=T.y-N,g=T.width+N*2,_=T.height+N*2}}else g=f,_=h,f=0,h=0;return this.cjsStageGL_cache(f,h,g,_,P,C),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(f){var h=f.clone();h.type="pressdown",f.target.dispatchEvent(h)},void 0,!1,void 0,!0),this.loop=function(f,h,g,_,P,C){return e.loop(this,f,h,g,_,P,C)},this.hitTestGrid=function(f,h,g,_,P,C,T,N,O,S,k,x){return e.hitTestGrid(this,f,h,g,_,P,C,T,N,O,S,k,x)},this.disposeAllChildren=function(){for(var f=this.numChildren-1;f>=0;f--){var h=this.getChildAt(f);h.dispose&&h.dispose()}return this},this.frame=le.zdf,ze&&!ze.stageTransformable&&(le.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(f){this.cjsStage_scaleX=f,this.cjsStage_scaleY=f,e.scaX=ze.stageTransformable?1:f,e.scaY=ze.stageTransformable?1:f}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(f){this.cjsStage_scaleX=f,e.scaX=ze.stageTransformable?1:f}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(f){this.cjsStage_scaleY=f,e.scaY=ze.stageTransformable?1:f}}),this.localToGlobal=function(f,h){return e.localToGlobal(f,h,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(f,h){return e.globalToLocal(f,h,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(f,h,g){return e.localToLocal(f,h,g,this)}))}},e.extend(e.StageGL,ze.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),e.Container=function(t,r,i,o,l,f,h){var g="a, b, c, d, style, group, inherit",_;if(_=mt(e.Container,arguments,g,this))return _;e.containerCheck||(qe("50.5"),qe("50.435"),e.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=f;var P=this,C=l===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=C.a!=null?C.a:null),n(r)&&(r=C.b!=null?C.b:null),n(i)&&(i=C.c!=null?C.c:null),n(o)&&(o=C.d!=null?C.d:null);var T=N(t,r,i,o);function N(S,k,x,E){var L=[];return n(S)?L=[S,k,x,E]:n(k)?S.x?L=[S.x,S.y,S.width,S.height]:(L[0]=0,L[1]=0,L[2]=S,L[3]=S):n(x)?(L[0]=0,L[1]=0,L[2]=S,L[3]=k):(L[0]=S,L[1]=k,L[2]=x,L[3]=E),n(L[3])&&(L[3]=L[2]),L}n(t)||this.setBounds(T[0],T[1],T[2],T[3]),this.cache=function(S,k,x,E,L,A,b,F,q){if(P.type=="AC"&&le.zdf)return le.zdf.ac("cache",arguments,P),P;var V="a,b,c,d,scale,options,margin,rtl,willReadFrequently",I;if(I=mt(P.cache,arguments,V))return I;var ne=P.getBounds();if(n(x))if(n(S)){if(!n(ne)){var R=P.borderWidth>0?P.borderWidth/2:0;S=ne.x-R,k=ne.y-R,x=ne.width+R*2,E=ne.height+R*2}}else x=S,E=k,S=0,k=0;return P.type=="Triangle"&&(S-=P.borderWidth?P.borderWidth:0,x+=P.borderWidth?P.borderWidth*2:0,k-=P.borderWidth?P.borderWidth:0,E+=P.borderWidth?P.borderWidth*2:0),n(b)&&(b=0),P.cjsContainer_cache(S-b,k-b,x+b*2,E+b*2,L,A,F,q),ne&&P.setBounds(ne.x,ne.y,ne.width,ne.height),P.z_bc=P.canvas=P.cacheCanvas,P},this.uncache=function(){return P.cjsContainer_uncache(),P},this.childrenToBitmap=function(){var S=this.cacheCanvas,k=new e.Bitmap(this.cache().cacheCanvas);return S||this.uncache(),this.removeAllChildren(),k.addTo(this),this};var O=le.zdf||1;ze&&!ze.stageTransformable&&O.retina&&(this.localToGlobal=function(S,k){return e.localToGlobal(S,k,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(S,k){return e.globalToLocal(S,k,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(S,k,x){return e.localToLocal(S,k,x,this)}),this.setBounds=function(S,k,x,E){var L=N(S,k,x,E);return P.cjsContainer_setBounds(L[0],L[1],L[2],L[3]),P},this.getBounds=function(S){return S?P.boundsToGlobal(null,null,null,S):P.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var S=this.numChildren-1;S>=0;S--){var k=this.getChildAt(S);k.dispose&&k.dispose()}return this},e.displayBase(P),l!==!1&&e.styleTransforms(this,C),this.clone=function(S){if(this.type=="AC"&&le.zdf)return Et&&ht("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),le.zdf.ac("clone",arguments,this),this;var k=this.getBounds();return n(k)&&(k={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new e.Container(k.x,k.y,k.width,k.height,l,this.group,h)),S)},this.hasProp=function(S){return!n(this[S])||Object.prototype.hasOwnProperty.call(this,S)}},e.Container.prototype.dispose=function(t){return u(this,t),!0},e.Container.prototype.specialColor=function(t,r,i){if(r.type=="GradientColor"){if(!n(r.angle))if(i.width){var o=i.getBounds();if(r.angle+=360*1e5,r.angle%=360,i.type=="Circle"){var l=o.width/2*Math.cos(r.angle*RAD),f=o.width/2*Math.sin(r.angle*RAD);r.x0=-l,r.y0=-f,r.x1=l,r.y1=f}else{var h=r.angle%90,g=o.width*Math.sin(h*RAD),_=g*Math.sin(h*RAD),P=-g*Math.cos(h*RAD),C=o.height*Math.sin(h*RAD),T=o.width+C*Math.cos(h*RAD),N=C*Math.sin(h*RAD),O=o.height*Math.sin(h*RAD),S=-O*Math.cos(h*RAD),k=o.height-O*Math.sin(h*RAD);r.angle>=0&&r.angle<90?(r.x0=o.x+_,r.y0=o.y+P,r.x1=o.x+T,r.y1=o.y+N):r.angle>=90&&r.angle<180?(r.x0=o.x+_,r.y0=o.y+P,r.x1=o.x+S,r.y1=o.y+k):r.angle>=180&&r.angle<270?(r.x0=o.x+T,r.y0=o.y+N,r.x1=o.x+_,r.y1=o.y+P):(r.x0=o.x+S,r.y0=o.y+k,r.x1=o.x+_,r.y1=o.y+P)}}else{t.style=r.colors[0];return}t.linearGradient(r.colors,r.ratios,r.x0,r.y0,r.x1,r.y1)}else if(r.type=="RadialColor"){if(n(r.x0))if(i.width){var o=i.getBounds();r.r0=0,i.type=="Circle"?(r.x0=0,r.y0=0,r.r1=o.width/2):(r.x0=o.x+o.width/2,r.y0=o.y+o.height/2,r.r1=Math.sqrt(Math.pow(o.width/2,2)+Math.pow(o.height/2,2))),r.x1=r.x0,r.y1=r.y0}else{t.style=r.colors[0];return}t.radialGradient(r.colors,r.ratios,r.x0,r.y0,r.r0,r.x1,r.y1,r.r1)}else r.type=="BitmapColor"&&t.bitmap(r.image,r.repetition,r.matrix)};function u(t,r){if(t&&e.gD(t),!r&&t&&t.dispose&&t.dispose!==e.Container.prototype.dispose&&t.dispose(null,null,!0),t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var i=t.numChildren-1;i>=0;i--)u(t.getChildAt(i));t&&t.parent&&t.parent.removeChild(t)}e.extend(e.Container,ze.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),Qn(e.Container.prototype),e.Shape=function(t,r,i,o,l,f,h,g,_){var P="a, b, c, d, graphics, optimize, style, group, inherit",C;if(C=mt(e.Shape,arguments,P,this))return C;qe("50.6"),this.cjsShape_constructor(l),this.type="Shape",this.group=g;var T=h===!1?{}:e.getStyle(this.type,this.group,_),N=this;n(t)&&(t=T.a!=null?T.a:null),n(r)&&(r=T.b!=null?T.b:null),n(i)&&(i=T.c!=null?T.c:null),n(o)&&(o=T.d!=null?T.d:null),n(l)&&(l=T.graphics!=null?T.graphics:null),n(f)&&(f=T.optimize!=null?T.optimize:!1);var O=S(t,r,i,o);function S(L,A,b,F){var q=[];return n(L)?q=[L,A,b,F]:n(A)?L.x?q=[L.x,L.y,L.width,L.height]:(q[0]=0,q[1]=0,q[2]=L,q[3]=L):n(b)?(q[0]=0,q[1]=0,q[2]=L,q[3]=A):(q[0]=L,q[1]=A,q[2]=b,q[3]=F),n(q[3])&&(q[3]=q[2]),q}if(n(t)||this.setBounds(O[0],O[1],O[2],O[3]),!f)for(var k=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],x=0;x<k.length;x++)~function(){var L=x;N[k[L]]=function(){return k[L]=="ct"?N.graphics.curveTo.apply(N.graphics,arguments):N.graphics[k[L]].apply(N.graphics,arguments),N}}();Object.defineProperty(N,"command",{get:function(){return N.graphics.command},set:function(){}}),this.cache=function(L,A,b,F,q,V,I,ne,R){var Q="a,b,c,d,scale,options,margin,rtl,willReadFrequently",U;if(U=mt(N.cache,arguments,Q))return U;var ee=N.getBounds();if(n(b))if(n(L)){if(!n(ee)){var ae=N.borderWidth>0?N.borderWidth/2:0;L=ee.x-ae,A=ee.y-ae,b=ee.width+ae*2,F=ee.height+ae*2}}else b=L,F=A,L=0,A=0;return n(I)&&(I=0),N.cjsShape_cache(L-I,A-I,b+I*2,F+I*2,q,V,ne,R),N.z_bc=N.canvas=N.cacheCanvas,N},this.setBounds=function(L,A,b,F){var q=S(L,A,b,F);return this.cjsShape_setBounds(q[0],q[1],q[2],q[3]),this},this.getBounds=function(L){return L?N.boundsToGlobal(null,null,null,L):N.cjsShape_getBounds()},h!==!1&&e.styleTransforms(this,T),this.clone=function(L){n(L)&&(L=!0);var A=this.getBounds();n(A)&&(A={x:null,y:null,width:null,height:null});var b=N.cloneProps(new e.Shape(A.x,A.y,A.width,A.height,l,h,g,_));return L?b.graphics=N.graphics.clone():b.graphics=N.graphics,b};var E=le.zdf||1;ze&&!ze.stageTransformable&&E.retina&&(this.localToGlobal=function(L,A){return e.localToGlobal(L,A,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(L,A){return e.globalToLocal(L,A,this,this.cjsShape_globalToLocal)},this.localToLocal=function(L,A,b){return e.localToLocal(L,A,b,this)}),this.hasProp=function(L){return!n(this[L])||Object.prototype.hasOwnProperty.call(this,L)},e.displayBase(N),this.dispose=function(){e.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Shape,ze.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),Qn(e.Shape.prototype),e.Bitmap=function(t,r,i,o,l,f,h,g,_){var P="image, width, height, left, top, scale, style, group, inherit",C;if(C=mt(e.Bitmap,arguments,P,this))return C;qe("50.7"),this.group=g;var T=h===!1?{}:e.getStyle("Bitmap",this.group,_);n(f)&&(f=T.scale!=null?T.scale:1),n(r)&&(r=T.width!=null?T.width:t?t.width:100),n(i)&&(i=T.height!=null?T.height:t?t.height:100),n(o)&&(o=T.left!=null?T.left:0),n(l)&&(l=T.top!=null?T.top:0);var N=!1,O=t;if(!n(t)&&t.uncache){N=!0;var S=t.cacheCanvas,k=t;t.cache(o,l,r,i,f),this.z_bc=t=t.cacheCanvas}this.cjsBitmap_constructor(t),k&&!S&&k.uncache();var x=this;this.type="Bitmap",!n(r)&&!n(i)&&this.setBounds(0,0,r,i),this.drawImageData=function(b,F,q,V,I,ne){if(n(b)&&(b=0),n(F)&&(F=0),n(q)&&(q=0),n(V)&&(V=0),n(I)&&(I=r),n(ne)&&(ne=i),!x.proxyCanvas){var R=x.proxyCanvas=document.createElement("canvas");R.setAttribute("width",r),R.setAttribute("height",i),x.proxyContext=R.getContext("2d"),t=O=x.image=R}x.proxyContext&&x.proxyContext.putImageData(x.imageData,b,F,q,V,I,ne)},le.zdf&&(le.zdf.canvas.getContext("2d")?this.imageData=le.zdf.canvas.getContext("2d").createImageData(r,i):this.imageData=document.createElement("canvas").getContext("2d").createImageData(r,i),n(t)&&x.drawImageData(),t&&t.match&&t.match(/data:image/i)&&setTimeout(function(){x.stage&&x.stage.update(),setTimeout(function(){x.stage&&x.stage.update()},50)},50)),t&&t.nodeName&&t.nodeName.toLowerCase()!="video"&&(N?x.sourceRect={x:0,y:0,width:r*f,height:i*f}:x.sourceRect={x:o,y:l,width:r,height:i});function E(b,F,q,V){var I=[];return n(b)?I=[b,F,q,V]:n(F)?b.x?I=[b.x,b.y,b.width,b.height]:(I[0]=0,I[1]=0,I[2]=b,I[3]=b):n(q)?(I[0]=0,I[1]=0,I[2]=b,I[3]=F):(I[0]=b,I[1]=F,I[2]=q,I[3]=V),n(I[3])&&(I[3]=I[2]),I}this.setBounds=function(b,F,q,V){var I=E(b,F,q,V);return x.cjsBitmap_setBounds(I[0],I[1],I[2],I[3]),x},this.getBounds=function(b){return b?x.boundsToGlobal(null,null,null,b):x.cjsBitmap_getBounds()},this.cache=function(b,F,q,V,I,ne,R,Q){var U="a,b,c,d,scale,options,rtl,willReadFrequently",ee;if(ee=mt(x.cache,arguments,U))return ee;var ae;if(n(q))if(n(b)){if(ae=this.getBounds(),!n(ae)){var ie=this.borderWidth>0?this.borderWidth/2:0;b=ae.x-ie,F=ae.y-ie,q=ae.width+ie*2,V=ae.height+ie*2}}else q=b,V=F,b=0,F=0;return ae=x.getBounds(),x.cjsBitmap_cache(b,F,q,V,I,ne,R,Q),x.setBounds(ae.x,ae.y,ae.width,ae.height),x.z_bc=x.canvas=x.cacheCanvas,x},this.clone=function(){var b=this.cloneProps(new e.Bitmap(O,r,i,o,l,f,h,this.group,_));return b.cloned=!0,b.src=x.src,b.file=x.file,b.image=x.image,b.svg=x.svg,b.item=x.item,b};var L=le.zdf||1;ze&&!ze.stageTransformable&&L.retina&&(this.localToGlobal=function(b,F){return e.localToGlobal(b,F,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(b,F){return e.globalToLocal(b,F,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(b,F,q){return e.localToLocal(b,F,q,this)}),this.hasProp=function(b){return!n(this[b])||Object.prototype.hasOwnProperty.call(this,b)};var A;this.getColorAt=function(b,F,q){A||(x.cache(null,null,null,null,null,null,null,!0),A=x.cacheCanvas.getContext("2d"),x.uncache());var V=A.getImageData(b,F,1,1).data;return V[3]/=255,q?V:"rgba("+V[0]+","+V[1]+","+V[2]+","+V[3]+")"},this.keyOut=function(b,F,q){n(b)&&(b="#389b26"),n(F)&&(F=.1),Array.isArray(b)||(b=[b]),Array.isArray(F)||(F=[F]),!n(q)&&!Array.isArray(q)&&(q=[q]);var V,I,ne=[],R=[],Q=[];for(V=0;V<b.length;V++)ne[V]=e.convertColor(b[V],"array"),F[V]!=null?R[V]=F[V]*255:R[V]=F[0]*255,q&&(q[V]!=null?(Q[V]=e.convertColor(q[V],"array"),Q[V][3]*=255):(Q[V]=e.convertColor(q[0],"array"),Q[V][3]*=255));x.cacheCanvas&&x.updateCache(),A||(x.cache(null,null,null,null,null,null,null,!0),A=x.cacheCanvas.getContext("2d"));var U=A.getImageData(o,l,r,i),ee=U.data,ae=ee.length/4;if(q)for(V=0;V<ae;V++){var ie=ee[V*4+0],ce=ee[V*4+1],j=ee[V*4+2];for(I=0;I<b.length;I++)ie>ne[I][0]-R[I]&&ie<ne[I][0]+R[I]&&ce>ne[I][1]-R[I]&&ce<ne[I][1]+R[I]&&j>ne[I][2]-R[I]&&j<ne[I][2]+R[I]&&(ee[V*4+0]=Q[I][0],ee[V*4+1]=Q[I][1],ee[V*4+2]=Q[I][2],ee[V*4+3]=Q[I][3])}else for(V=0;V<ae;V++){var ie=ee[V*4+0],ce=ee[V*4+1],j=ee[V*4+2];for(I=0;I<b.length;I++)ie>ne[I][0]-R[I]&&ie<ne[I][0]+R[I]&&ce>ne[I][1]-R[I]&&ce<ne[I][1]+R[I]&&j>ne[I][2]-R[I]&&j<ne[I][2]+R[I]&&(ee[V*4+3]=0)}return A.putImageData(U,l,o),this},e.displayBase(x),h!==!1&&e.styleTransforms(this,T),this.doDispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&(this.stage&&this.stage.frame?L=this.stage.frame:L=le.zdf,L&&L.assets&&L.assets[this.id]&&delete L.assets[this.id],e.assets[this.id]&&delete e.assets[this.id]),this.parent&&this.parent.removeChild(this)}},e.Bitmap.fromData=function(t,r){var i=100,o=100,l=new Image;l.onload=function(){i=l.naturalWidth,o=l.naturalHeight,n(i)&&(i=l.width),n(o)&&(o=l.height);var f=new e.Bitmap(t,i,o);setTimeout(function(){r(f)},50)},l.src=t},e.extend(e.Bitmap,ze.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),e.Bitmap.prototype.dispose=function(){return this.doDispose()},Qn(e.Bitmap.prototype),e.Sprite=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A){var b="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",F;if(F=mt(e.Sprite,arguments,b,this))return F;qe("50.8"),this.type="Sprite",this.group=L;var q=E===!1?{}:e.getStyle(this.type,this.group,A),V=this,I;if(n(x)&&(x=q.frame!=null?q.frame:le.zdf),t&&typeof t=="string"&&(t=x.asset(t)),n(T)&&!n(t)){n(r)&&(r=q.cols!=null?q.cols:1),n(i)&&(i=q.rows!=null?q.rows:1),n(o)&&(o=q.count!=null?q.count:r*i),n(l)&&(l=q.offsetX!=null?q.offsetX:0),n(f)&&(f=q.offsetY!=null?q.offsetY:0),n(h)&&(h=q.spacingX!=null?q.spacingX:0),n(g)&&(g=q.spacingY!=null?q.spacingY:0),n(_)&&(_=q.width!=null?q.width:t.width),n(P)&&(P=q.height!=null?q.height:t.height),t.bitmap&&(t=t.bitmap);var ne=(_-l+h)/r-h,R=(P-f+g)/i-g,Q=[],U=0;e:for(var ee=0;ee<i;ee++)for(var ae=0;ae<r;ae++){if(++U>o)break e;Q.push([l+ae*(ne+h),f+ee*(R+g),ne,R])}p(t,Q,C)}else if(S)I=S,C=I.animations;else if(T){var x=V.stage?V.stage.frame:le.zdf;typeof T=="string"&&(T=x.asset(T));var ie,ce,j;if(T.frames&&!Array.isArray(T.frames)){ie=[];for(ce in T.frames)j=T.frames[ce].frame,ie.push([j.x,j.y,j.w,j.h]);T.frames=ie}if(T.frames&&!Array.isArray(T.frames[0])){for(ie=[],ce=0;ce<T.frames.length;ce++){var j=T.frames[ce].frame;ie.push([j.x,j.y,j.w,j.h])}T.frames=ie}if(!T.images&&T.meta&&T.meta.image&&(T.images=[T.meta.image]),Q=T.frames,C=T.animations,!n(t))p(t,Q,C);else{var G=T.images?T.images[0]:null;if(!G||!G.split)I=new ze.SpriteSheet(T);else{var y=[];e.loop(T.images,function(Y){var Ee=Y.split("/").pop();x.asset(Ee)&&x.asset(Ee).type!="EmptyAsset"?y.push(x.asset(Ee)):x.asset(Y)&&x.asset(Y).type!="EmptyAsset"||x.asset(Y).type!="EmptyAsset"?y.push(x.asset(Y)):Et&&ht("Sprite() - please preload Sprite in Frame or with loadAssets")}),p(y,Q,C)}}}else return;function p(w,Y,Ee){Array.isArray(w)||(w=[w]),e.loop(w,function(Z,pe){w[pe]=Z.image});var X={images:w,frames:Y,animations:Ee||[]};I=new ze.SpriteSheet(X)}this.animations=C,this.cjsSprite_constructor(I,k),n(k)||this.stop(),n(N)&&(N=e.makeID()),this.id=N,n(O)&&(O=!0),V.globalControl=O;var d=0,D;this.parseFrames=function(w,Y,Ee,X){var Z=[],pe=Number.MAX_VALUE,ve=0;if(n(w))n(Y)&&(Y=0),n(Ee)&&(Ee=V.totalFrames-1),se(Y,Ee);else{if(n(V.animations)||n(V.animations[w]))return[];var $=V.animations[w];ue($)}function ue(Re){Array.isArray(Re)?xe(Re):Re.constructor=={}.constructor?Ye(Re):isNaN(Re)||Z.push({f:Math.floor(Re),s:1})}function xe(Re){se(Re[0],Re[1],Re[3]),Re[2]&&!n(V.animations[Re[2]])&&ue(V.animations[Re[2]])}function Ye(Re){if(!n(Re.frames)){n(Re.speed)&&(Re.speed=1);for(var de=0;de<Re.frames.length;de++)Re.speed<pe&&(pe=Re.speed),Re.speed>ve&&(ve=Re.speed),Z.push({f:Re.frames[de],s:Re.speed});Re.next&&!n(V.animations[Re.next])&&ue(V.animations[Re.next])}}function se(Re,de,Me){n(Me)&&(Me=1);var Be;if(de>Re)for(Be=Re;Be<=de;Be++)he(Be);else for(Be=de;Be<=Re;Be++)he(Re-(Be-de));function he(Ae){Me<pe&&(pe=Me),Me>ve&&(ve=Me),Z.push({f:Ae,s:Me})}}if(X)return Z;pe=e.constrain(e.decimals(pe),.1),ve=e.constrain(e.decimals(ve),.1);for(var be=[],te=pe!=ve,_e,J=0;J<Z.length;J++)if(_e=Z[J],te)for(var ye=0;ye<e.constrain(Math.round(pe<1?_e.s/pe:_e.s),.1);ye++)be.push(_e.f);else be.push(_e.f);return be},this.run=function(w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye,Re,de,Me,Be,he,Ae,Ce,me,Ne,ge,Ue,He){var Oe="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur",fe;if(fe=mt(V.run,arguments,Oe))return fe;var Xe=v(),Ze;n(Ne)&&(Ne=1),n(ge)||(V.id=ge),n(Ue)||(V.globalControl=Ue);var Ke;if(Array.isArray(Y)){var ut,gt;Ze=[],Ke=0;for(var We,it=0;it<Y.length;it++){ut=Y[it],ut.lookup=V.parseFrames(ut.label,ut.startFrame,ut.endFrame),it==0&&(We=ut.lookup[0]),delete ut.startFrame,delete ut.endFrame,ut.obj=e.merge(ut.obj,{normalizedFrame:ut.lookup.length-1}),ut.set=e.merge(ut.set,{normalizedFrames:{noPick:ut.lookup},normalizedFrame:0}),n(ut.wait)&&(ut.wait=Ke*Ne),gt=ut.label,delete ut.label,Ze.push(ut),Ke=0;var ct=n(ut.time)?w:ut.time;me-Ce>0&&(Ke=ct/(me-Ce)/2)}if(Ze.length==0)return this;Ze.length==1?(w=Ze[0].time,Y=gt,Pe()):V.gotoAndStop(We)}else Pe();function Pe(){D=V.parseFrames(Y,Ce,me),d=0,V.gotoAndStop(D[d]),Ce=me=null,Ze={normalizedFrame:D.length-1}}n(w)&&(w=Xe=="s"?1:1e3),V.running&&V.stopAnimate(V.id),V.running=!0,Array.isArray(Ze)||(Ke=0,me-Ce>0&&(Ke=w/Math.abs(me-Ce)/2),D&&D.length>0&&(Ke=w/D.length/2),!n($)&&n(xe)&&(xe=Ke*Ne),!n(J)&&n(ye)&&(ye=Ke*Ne));var Fe=function(){V.running=!1,V.stop(),Ee&&typeof Ee=="function"&&Ee(X||V)};return e.animate({target:V,obj:Ze,time:w,ease:"linear",call:Fe,params:X,wait:Z,waitedCall:pe,waitedParams:ve,loop:$,loopCount:ue,loopWait:xe,loopCall:Ye,loopParams:se,loopWaitCall:be,loopWaitParams:te,rewind:J,rewindWait:ye,rewindCall:Re,rewindParams:de,rewindWaitCall:Me,rewindWaitParams:Be,rewindTime:he,rewindEase:Ae,override:!1,pauseOnBlur:He,id:V.id}),V.runPaused=!1,V},this.runPaused=!0,this.pauseRun=function(w){return n(w)&&(w=!0),V.runPaused=w,V.globalControl?e.pauseAnimate(w,V.id):V.pauseAnimate(w,V.id),V},this.stopRun=function(){return V.runPaused=!0,V.running=!1,V.globalControl?e.stopAnimate(V.id):V.stopAnimate(V.id),V},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(w){w=Math.round(w),this.paused?this.gotoAndStop(w):this.gotoAndPlay(w)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return d},set:function(w){d=Math.round(w),this.gotoAndStop(D[d])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return D},set:function(w){D=w}}),Object.defineProperty(this,"totalFrames",{get:function(){return I.getNumFrames()},set:function(){ht("zim.Sprite - totalFrames is read only")}}),E!==!1&&e.styleTransforms(this,q),this.clone=function(){var w=this.cloneProps(new e.Sprite(t,r,i,o,l,f,h,g,_,P,C,T,null,O,S,k,x,E,this.group,A));return V.frame>=0&&w.run({startFrame:V.frame,endFrame:V.frame}),w},ze&&!ze.stageTransformable&&x.retina&&(this.localToGlobal=function(w,Y){return e.localToGlobal(w,Y,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(w,Y){return e.globalToLocal(w,Y,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(w,Y,Ee){return e.localToLocal(w,Y,Ee,this)}),this.hasProp=function(w){return!n(this[w])||Object.prototype.hasOwnProperty.call(this,w)},e.displayBase(V);function K(w,Y,Ee,X){var Z=[];return n(w)?Z=[w,Y,Ee,X]:n(Y)?w.x?Z=[w.x,w.y,w.width,w.height]:(Z[0]=0,Z[1]=0,Z[2]=w,Z[3]=w):n(Ee)?(Z[0]=0,Z[1]=0,Z[2]=w,Z[3]=Y):(Z[0]=w,Z[1]=Y,Z[2]=Ee,Z[3]=X),n(Z[3])&&(Z[3]=Z[2]),Z}this.setBounds=function(w,Y,Ee,X){var Z=K(w,Y,Ee,X);return V.cjsSprite_setBounds(Z[0],Z[1],Z[2],Z[3]),V},this.getBounds=function(w){return w?V.boundsToGlobal(null,null,null,w):V.cjsSprite_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Sprite,ze.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),Qn(e.Sprite.prototype),e.MovieClip=function(t,r,i,o,l,f,h){var g="mode, startPosition, loop, labels, style, group, inherit",_;if(_=mt(e.MovieClip,arguments,g,this))return _;qe("50.9"),this.type="MovieClip",this.group=f;var P=l===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=P.mode!=null?P.mode:null),n(r)&&(r=P.startPosition!=null?P.startPosition:null),n(i)&&(i=P.loop!=null?P.loop:null),n(o)&&(o=P.labels!=null?P.labels:null),this.cjsMovieClip_constructor(t,r,i,o),l!==!1&&e.styleTransforms(this,P),this.clone=function(){return this.cloneProps(new e.MovieClip(t,r,i,o,l,this.group,h))},this.hasProp=function(N){return!n(this[N])||Object.prototype.hasOwnProperty.call(this,N)};var C=le.zdf||1;ze&&!ze.stageTransformable&&C.retina&&(this.localToGlobal=function(N,O){return e.localToGlobal(N,O,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(N,O){return e.globalToLocal(N,O,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(N,O,S){return e.localToLocal(N,O,S,this)}),e.displayBase(this);function T(N,O,S,k){var x=[];return n(N)?x=[N,O,S,k]:n(O)?N.x?x=[N.x,N.y,N.width,N.height]:(x[0]=0,x[1]=0,x[2]=N,x[3]=N):n(S)?(x[0]=0,x[1]=0,x[2]=N,x[3]=O):(x[0]=N,x[1]=O,x[2]=S,x[3]=k),n(x[3])&&(x[3]=x[2]),x}this.setBounds=function(N,O,S,k){var x=T(N,O,S,k);return that.cjsMovieClip_setBounds(x[0],x[1],x[2],x[3]),that},this.getBounds=function(N){return N?that.boundsToGlobal(null,null,null,N):that.cjsMovieClip_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.MovieClip,ze.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),Qn(e.MovieClip.prototype),e.SVGContainer=function(t,r,i,o,l,f,h,g){var _="svg, splitTypes, geometric, showControls, interactive, style, group, inherit",P;if(P=mt(e.SVGContainer,arguments,_,this))return P;qe("50.95"),this.group=h;var C=f===!1?{}:e.getStyle("SVGContainer",this.group,g);t&&t.type=="Bitmap"&&(t=t.svg);var T=this,N=new e.Point(0,0),O;function S(){function K(Ye,se){return Z(Ye)||X(Ye,se)||Y(Ye,se)||w()}function w(){throw new TypeError("Invalid")}function Y(Ye,se){if(Ye){if(typeof Ye=="string")return Ee(Ye,se);var be=Object.prototype.toString.call(Ye).slice(8,-1);if(be==="Object"&&Ye.constructor&&(be=Ye.constructor.name),be==="Map"||be==="Set")return Array.from(Ye);if(be==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(be))return Ee(Ye,se)}}function Ee(Ye,se){(se==null||se>Ye.length)&&(se=Ye.length);for(var be=0,te=new Array(se);be<se;be++)te[be]=Ye[be];return te}function X(Ye,se){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ye)))){var be=[],te=!0,_e=!1,J=void 0;try{for(var ye=Ye[Symbol.iterator](),Re;!(te=(Re=ye.next()).done)&&(be.push(Re.value),!(se&&be.length===se));te=!0);}catch(de){_e=!0,J=de}finally{try{!te&&ye.return!=null&&ye.return()}finally{if(_e)throw J}}return be}}function Z(Ye){if(Array.isArray(Ye))return Ye}var pe=Math.PI*2,ve=function(se,be,te,_e,J,ye,Re){var de=se.x,Me=se.y;de*=be,Me*=te;var Be=_e*de-J*Me,he=J*de+_e*Me;return{x:Be+ye,y:he+Re}},$=function(se,be){var te=be===1.5707963267948966?.551915024494:be===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(be/4),_e=Math.cos(se),J=Math.sin(se),ye=Math.cos(se+be),Re=Math.sin(se+be);return[{x:_e-J*te,y:J+_e*te},{x:ye+Re*te,y:Re-ye*te},{x:ye,y:Re}]},ue=function(se,be,te,_e){var J=se*_e-be*te<0?-1:1,ye=se*te+be*_e;return ye>1&&(ye=1),ye<-1&&(ye=-1),J*Math.acos(ye)},xe=function(se,be,te,_e,J,ye,Re,de,Me,Be,he,Ae){var Ce=Math.pow(J,2),me=Math.pow(ye,2),Ne=Math.pow(he,2),ge=Math.pow(Ae,2),Ue=Ce*me-Ce*ge-me*Ne;Ue<0&&(Ue=0),Ue/=Ce*ge+me*Ne,Ue=Math.sqrt(Ue)*(Re===de?-1:1);var He=Ue*J/ye*Ae,Oe=Ue*-ye/J*he,fe=Be*He-Me*Oe+(se+te)/2,Xe=Me*He+Be*Oe+(be+_e)/2,Ze=(he-He)/J,Ke=(Ae-Oe)/ye,ut=(-he-He)/J,gt=(-Ae-Oe)/ye,We=ue(1,0,Ze,Ke),it=ue(Ze,Ke,ut,gt);return de===0&&it>0&&(it-=pe),de===1&&it<0&&(it+=pe),[fe,Xe,We,it]};return function(se){var be=se.px,te=se.py,_e=se.cx,J=se.cy,ye=se.rx,Re=se.ry,de=se.xAxisRotation,Me=de===void 0?0:de,Be=se.largeArcFlag,he=Be===void 0?0:Be,Ae=se.sweepFlag,Ce=Ae===void 0?0:Ae,me=[];if(ye===0||Re===0)return[];var Ne=Math.sin(Me*pe/360),ge=Math.cos(Me*pe/360),Ue=ge*(be-_e)/2+Ne*(te-J)/2,He=-Ne*(be-_e)/2+ge*(te-J)/2;if(Ue===0&&He===0)return[];ye=Math.abs(ye),Re=Math.abs(Re);var Oe=Math.pow(Ue,2)/Math.pow(ye,2)+Math.pow(He,2)/Math.pow(Re,2);Oe>1&&(ye*=Math.sqrt(Oe),Re*=Math.sqrt(Oe));var fe=xe(be,te,_e,J,ye,Re,he,Ce,Ne,ge,Ue,He),Xe=K(fe,4),Ze=Xe[0],Ke=Xe[1],ut=Xe[2],gt=Xe[3],We=Math.abs(gt)/(pe/4);Math.abs(1-We)<1e-7&&(We=1);var it=Math.max(Math.ceil(We),1);gt/=it;for(var ct=0;ct<it;ct++)me.push($(ut,gt)),ut+=gt;return me.map(function(Pe){var Fe=ve(Pe[0],ye,Re,ge,Ne,Ze,Ke),we=Fe.x,je=Fe.y,st=ve(Pe[1],ye,Re,ge,Ne,Ze,Ke),Je=st.x,tt=st.y,Te=ve(Pe[2],ye,Re,ge,Ne,Ze,Ke),et=Te.x,Ve=Te.y;return{x1:we,y1:je,x2:Je,y2:tt,x:et,y:Ve}})}}n(r)&&(r=!1),n(i)&&(i=!0);var k,x;function E(K){e.loop(K,function(w){var Y=w.tagName.toLowerCase();if(Y=="path"&&D(w),Y=="circle"&&A("circle",w),Y=="rect"&&A("rect",w),Y=="ellipse"&&A("ellipse",w),Y=="line"&&A("line",w),Y=="polygon"&&A("polygon",w),Y=="polyline"&&A("polyline",w),Y=="g"){var Ee=w.getAttribute("style"),X,Z,pe,ve,$;if(Ee){var ue=L(Ee);X=ue[0],Z=ue[1],pe=ue[2],ve=ue[3],$=ue[4]}y=w.getAttribute("transform"),R=w.getAttribute("fill")?w.getAttribute("fill"):n(X)?ne:X,U=w.getAttribute("stroke")?w.getAttribute("stroke"):n(Z)?Q:Z,ae=w.getAttribute("stroke-width")?w.getAttribute("stroke-width"):n(pe)?ee:pe,ce=w.getAttribute("fill-opacity")?w.getAttribute("fill-opacity"):n(ve)?ie:ve,G=w.getAttribute("stroke-opacity")?w.getAttribute("stroke-opacity"):n($)?j:$}E(w.children),w.tagName.toLowerCase()=="g"&&(R=ne,U=Q,ae=ee,ce=ie,G=j,y=null)})}function L(K){var w=K.split(";"),Y,Ee,X,Z,pe;return e.loop(w,function(ve){ve=ve.replace(/,/g,"");var $=ve.split(":"),ue=$[0].trim().toLowerCase(),xe=$[1].trim().toLowerCase().replace("px","");ue=="fill"&&(Y=xe),ue=="stroke"&&(Ee=xe),ue=="stroke-width"&&(X=xe),ue=="opacity"&&(Z=xe,pe=xe),ue=="fill-opacity"&&(Z=xe),ue=="stroke-opacity"&&(pe=xe)}),[Y,Ee,X,Z,pe]}function A(K,w){var Y,Ee=d(w),X=Ee[0],Z=Ee[1],pe=Ee[2],ve=Ee[5],$=Ee[6];if(K=="circle"){var ue=Number(w.getAttribute("r").trim()),xe=ue*.5523;i?Y=new e.Circle(Number(w.getAttribute("r")),X,Z,pe):Y=new e.Blob(X,Z,pe,4,ue,xe,"mirror",null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(K=="rect")if(i)Y=new e.Rectangle(Number(w.getAttribute("width")),Number(w.getAttribute("height")),X,Z,pe,Number(w.getAttribute("rx")));else{var Ye=Number(w.getAttribute("width")),se=Number(w.getAttribute("height")),be=Number(w.getAttribute("rx")),te=Number(w.getAttribute("ry"));if(be&&te){var _e=be*.5523,J=te*.5523;Y=new e.Blob(X,Z,pe,[[be,0,0,0,-_e,0,0,0,"free"],[Ye-be,0,0,0,0,0,_e,0,"free"],[Ye,te,0,0,0,-J,0,0,"free"],[Ye,se-te,0,0,0,0,0,J,"free"],[Ye-be,se,0,0,_e,0,0,0,"free"],[be,se,0,0,0,0,-_e,0,"free"],[0,se-te,0,0,0,J,0,0,"free"],[0,te,0,0,0,0,0,-J,"free"]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else Y=new e.Blob(X,Z,pe,[[0,0],[Ye,0],[Ye,se],[0,se]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(K=="line")Y=new e.Squiggle(Z,pe,[[Number(w.getAttribute("x1")),Number(w.getAttribute("y1"))],[Number(w.getAttribute("x2")),Number(w.getAttribute("y2"))]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l);else if(K=="polygon"||K=="polyline"){var ye=w.getAttribute("points");ye=ye.replace(/-/g," -"),ye=ye.replace(/\s+/g," ");var Re=[];if(ye.indexOf(",")!=-1)e.loop(ye.split(" "),function(Be){var he=Be.split(",");Re.push([Number(he[0].trim()),Number(he[1].trim())])});else{var de;e.loop(ye.split(" "),function(Be,he){(he+1)%2==0&&Re.push([de,Be.trim()]),de=Be.trim()})}K=="polygon"?Y=new Blob(X,Z,pe,Re):Y=new e.Squiggle(Z,pe,Re,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else K=="ellipse"&&(Y=new e.Blob(X,Z,pe,F(0,0,Number(w.getAttribute("rx")),Number(w.getAttribute("ry"))),null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l));Y.loc(ve,$,T);var Me=w.getAttribute("transform");(Me||y)&&b(Y,Me||y),l&&(Y.type=="Rectangle"||Y.type=="Circle")&&Y.transform({showReg:!1,visible:o})}function b(K,w){var Y=w.split(")");e.loop(Y,function(Ee){if(Ee!=""){var X=Ee.trim().split("("),Z=X[0].trim().toLowerCase(),pe=X[1].trim().toLowerCase().replace("px","").replace("deg","");if(Z=="translate"){var ve=pe.split(",");K.mov(Number(ve[0].trim()),ve[1]?Number(ve[1].trim()):0)}if(Z=="scale"){var $=pe.split(",");K.type=="Blob"||K.type=="Squiggle"?$.length==1?K.transformPoints("scale",Number($[0].trim())):$.length==2&&(K.transformPoints("scaleX",Number($[0].trim())),K.transformPoints("scaleY",Number($[1].trim()))):$.length==1?K.sca(Number($[0].trim())):$.length==2&&K.sca(Number($[0].trim()),Number($[1].trim()))}if(Z=="rotate"){var ue=pe.split(",");ue.length==1?ue.push(0,0):ue.length==2&&ue.push(0),K.rot(Number(ue[0].trim()),Number(ue[1].trim()),Number(ue[2].trim()))}Z=="skewX"&&(K.skewX=pe),Z=="skewY"&&(K.skewY=pe)}})}function F(K,w,Y,Ee){var X=.5522848,Z=Y*X,pe=Ee*X,ve=K+Y,$=w+Ee,ue=[[K-Y,w,0,0,K,$+pe-Ee,K,w-pe,"mirror"],[K,w-Ee,0,0,K-Z,w,ve+Z-Y,w,"mirror"],[ve,w,0,0,K,w-pe,K+Z-Z,$+pe-Ee,"mirror"],[K,$,0,0,ve-Y+Z,w,K-Z,w,"mirror"]];return ue}if(!n(t)){if(t.replace&&(t=t.replace(/style\s?=[^"]*"[^"]*"/ig,"")),n(t.draggable))t.getAttribute||(k=new DOMParser,t=k.parseFromString(t,"image/svg+xml").documentElement),x=this.svg=t;else{k=new DOMParser,t=t.innerHTML?k.parseFromString(t.innerHTML,"text/xml"):t;var q=t.getElementsByTagName("svg");x=this.svg=q?t.getElementsByTagName("svg")[0]:null}var V,I;if(n(x)||(V=x.getAttribute("width"),I=x.getAttribute("height")),V&&(V=Number(V.trim())),I&&(I=Number(I.trim())),this.zimContainer_constructor(V,I),this.type="SVGContainer",n(x))return;var ne=e.black,R=e.black,Q=e.black,U=e.black,ee=2,ae=2,ie=1,ce=1,j=1,G=1,y,p=t.getElementsByTagName("svg");p.length==0&&(p=[t]),E(p)}function d(K){var w,Y,Ee,X,Z,pe=K.getAttribute("style");if(pe){var ve=L(pe);w=ve[0],Y=ve[1],Ee=ve[2],X=ve[3],Z=ve[4]}w=K.getAttribute("fill")?K.getAttribute("fill"):n(w)?R:w,Y=K.getAttribute("stroke")?K.getAttribute("stroke"):n(Y)?U:Y,Ee=K.getAttribute("stroke-width")?K.getAttribute("stroke-width"):n(Ee)?ae:Ee,X=K.getAttribute("fill-opacity")?K.getAttribute("fill-opacity"):n(X)?ce:X,Z=K.getAttribute("stroke-opacity")?K.getAttribute("stroke-opacity"):n(Z)?G:Z;var $=K.getAttribute("x")?K.getAttribute("x"):0;$=K.getAttribute("cx")?K.getAttribute("cx"):$;var ue=K.getAttribute("y")?K.getAttribute("y"):0;return ue=K.getAttribute("cy")?K.getAttribute("cy"):ue,!n(X)&&!n(w)&&(w=e.convertColor(w,"rgba",Number(X))),!n(Z)&&!n(Y)&&(Y=e.convertColor(Y,"rgba",Number(Z))),[w,Y,Number(Ee),Number(X),Number(Z),Number($),Number(ue)]}function D(K,w){n(w)&&(w=!0);var Y=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],Ee=["m","l","h","v","c","s","q","t","a","z"],X=new e.Point(0,0),Z;if(n(K.getAttribute)?Z=K:Z=K.getAttribute("d"),Z=Z.replace(/,/g," "),Z=Z.replace(/([a-zA-Z])/g," $1 "),Z=Z.replace(/-/g," -"),Z=Z.replace(/\s+/g," "),Z=Z.replace(/\.(\d*)\./g,".$1 ."),w)var pe=d(K),ve=pe[0],$=pe[1],ue=pe[2];var xe,Ye,se=[],be=[0,0],te=new e.Point(0,0),_e=new e.Point(0,0,0,0),J=new e.Point(0,0,0,0,0,0),ye=new e.Point(0,0,0,0,0,0,0),Re=Z.split(" "),de=Re.slice(1,Re.length),Me=[],Be=!1,he,Ae,Ce=!1,me,Ne="squiggle",ge=null;e.loop(de,function(He,Oe){if(Oe==0&&(N.x=0,N.y=0,be=[0,0],he="",Ae=""),Y.indexOf(He)==-1){me=="lxo"&&(me="lx",Me.push("l"),Be=!0),me=="lyo"&&(me="ly",Be=!0),me=="Lxo"&&(me="Lx",Me.push("L"),Be=!0),me=="Lyo"&&(me="Ly",Be=!0),Ye=Number(He),Ye=Math.round(Ye*100)/100,me=="X"?(N.x=Ye,me="Y"):me=="Y"?(N.y=Ye,me="Lxo",se.push([N.x,N.y])):me=="x"?(N.x=N.x+Ye,me="y"):me=="y"&&(N.y=N.y+Ye,me="lxo",se.push([N.x,N.y])),me=="H"||me=="h"?(X.x=se[se.length-1][0],X.y=se[se.length-1][1],X.x=X.x+(me=="h"?Ye:Ye-N.x),se.push([X.x,X.y]),me="Lx"):(me=="V"||me=="v")&&(X.x=se[se.length-1][0],X.y=se[se.length-1][1],X.y=X.y+(me=="v"?Ye:Ye-N.y),se.push([X.x,X.y]),me="lx"),me=="Lx"?(te.x=Ye,me="Ly"):me=="Ly"?(te.y=Ye,X.x=te.x,X.y=te.y,se.push([X.x,X.y]),me="Lx"):me=="lx"?(Me.length>0&&(X.x!=0&&X.y!=0?(N.x=X.x,N.y=X.y):(N.x=X.x+N.x,N.y=X.y+N.y)),te.x=N.x+Ye,Be?me="lyo":me="ly"):me=="ly"&&(te.y=N.y+Ye,X.x=te.x,X.y=te.y,se.push([X.x,X.y]),me="lx");var fe;if(me=="qx"||me=="Qx"?(se.length>0?(N.x=se[se.length-1][0],N.y=se[se.length-1][1]):(N.x=0,N.y=0),_e.x=me=="qx"?N.x+Ye:Ye,me=me=="qx"?"qy":"Qy"):me=="qy"||me=="Qy"?(_e.y=me=="qy"?N.y+Ye:Ye,me=me=="qy"?"qz":"Qz",Ce&&(Ce=!1,fe=se[se.length-1],fe[6]=-fe[4],fe[7]=-fe[5],fe[8]="mirror",X.x=_e.x,X.y=_e.y,se[se.length]=[X.x,X.y,0,0,-fe[6],fe[7],0,0,"free"],me=me=="qy"?"qx":"Qx")):me=="qz"||me=="Qz"?(_e.z=me=="qz"?N.x+Ye:Ye,me=me=="qz"?"qq":"Qq"):(me=="qq"||me=="Qq")&&(_e.w=me=="qq"?N.y+Ye:Ye,fe=se[se.length-1],X.x=fe[0],X.y=fe[1],se.length==1?(fe[2]=0,fe[3]=0,fe[4]=0,fe[5]=0,fe[6]=2/3*(_e.x-X.x),fe[7]=2/3*(_e.y-X.y),fe[8]="free"):se[se.length]=[X.x,X.y,0,0,0,0,2/3*(_e.x-X.x),2/3*(_e.y-X.y),"free"],X.x=_e.z,X.y=_e.w,se[se.length]=[X.x,X.y,0,0,2/3*(_e.x-X.x),2/3*(_e.y-X.y),0,0,"free"],me=me=="qq"?"qx":"Qx"),me=="cx"||me=="Cx")se.length>0?(N.x=se[se.length-1][0],N.y=se[se.length-1][1]):(N.x=0,N.y=0),J.x=me=="cx"?N.x+Ye:Ye,me=me=="cx"?"cy":"Cy";else if(me=="cy"||me=="Cy")J.y=me=="cy"?N.y+Ye:Ye,me=me=="cy"?"cz":"Cz";else if(me=="cz"||me=="Cz")J.z=me=="cz"?N.x+Ye:Ye,me=me=="cz"?"cq":"Cq";else if(me=="cq"||me=="Cq")J.q=me=="cq"?N.y+Ye:Ye,me=me=="cq"?"cr":"Cr",Ce&&(he=="s"?Ae="s":Ae="S",fe=se[se.length-1],fe[2]=0,fe[3]=0,n(fe[4])&&(fe[4]=0),n(fe[5])&&(fe[5]=0),fe[6]=-fe[4],fe[7]=-fe[5],fe[8]="mirror",X.x=J.z,X.y=J.q,se[se.length]=[X.x,X.y,0,0,J.x-X.x,J.y-X.y,0,0,"free"],me=me=="cr"?"cx":"Cx");else if(me=="cr"||me=="Cr")J.r=me=="cr"?N.x+Ye:Ye,me=me=="cr"?"cs":"Cs";else if(me=="cs"||me=="Cs")J.s=me=="cs"?N.y+Ye:Ye,fe=se[se.length-1],se.length==1&&(fe[2]=0,fe[3]=0,fe[4]=0,fe[5]=0),fe[6]=J.x-fe[0],fe[7]=J.y-fe[1],fe[8]="free",X.x=J.r,X.y=J.s,se[se.length]=[X.x,X.y,0,0,J.z-X.x,J.q-X.y,0,0,"free"],me=me=="cs"?"cx":"Cx";else if(me=="ax"||me=="Ax")se.length>0?(N.x=se[se.length-1][0],N.y=se[se.length-1][1]):(N.x=0,N.y=0),ye.x=Ye,me=me=="ax"?"ay":"Ay";else if(me=="ay"||me=="Ay")ye.y=Ye,me=me=="ay"?"az":"Az";else if(me=="az"||me=="Az")ye.z=Ye,me=me=="az"?"aq":"Aq";else if(me=="aq"||me=="Aq")ye.q=Ye,me=me=="aq"?"ar":"Ar";else if(me=="ar"||me=="Ar")ye.r=Ye,me=me=="ar"?"as":"As";else if(me=="as"||me=="As")ye.s=me=="as"?N.x+Ye:Ye,me=me=="as"?"at":"At";else if(me=="at"||me=="At"){ye.t=me=="at"?N.y+Ye:Ye,O||(O=S());var Xe=O({px:N.x,py:N.y,cx:ye.s,cy:ye.t,rx:ye.x,ry:ye.y,xAxisRotation:ye.z,largeArcFlag:ye.q,sweepFlag:ye.r});e.loop(Xe,function(Ze,Ke){fe=se[se.length-1],se.length==1&&(fe[2]=0,fe[3]=0,fe[4]=0,fe[5]=0),Ke==0&&se.length==1?(fe[6]=Ze.x1-X.x-N.x,fe[7]=Ze.y1-X.y-N.y):(fe[6]=Ze.x1-X.x,fe[7]=Ze.y1-X.y),fe[8]="free",X.x=Ze.x,X.y=Ze.y,se[se.length]=[X.x,X.y,0,0,Ze.x2-X.x,Ze.y2-X.y,0,0,"free"]}),me=me=="at"?"ax":"Ax"}}else Me.push(He),He!="s"&&(Ce=!1),Me.length>1&&(He=="M"||He=="m")&&(Ue(Me),He=="M"?(N.x=0,N.y=0):(N.x=se[se.length-1][0],N.y=se[se.length-1][1]),se=[],Me=[],Me.push(He)),He=="M"?me="X":He=="m"?me="x":He=="L"?(me="Lx",r&&ge&&ge!="l"&&Ue(Me),ge="l"):He=="l"?(me="lx",r&&ge&&ge!="l"&&Ue(Me),ge="l"):He=="H"?(me="H",r&&ge&&ge!="l"&&Ue(Me),ge="l"):He=="h"?(me="h",r&&ge&&ge!="l"&&Ue(Me),ge="l"):He=="V"?(me="V",r&&ge&&ge!="l"&&Ue(Me),ge="l"):He=="v"?(me="v",r&&ge&&ge!="l"&&Ue(Me),ge="l"):He=="C"?(me="Cx",r&&ge&&ge!="c"&&Ue(Me),ge="c"):He=="c"?(me="cx",r&&ge&&ge!="c"&&Ue(Me),ge="c"):He=="S"?(Ce=!0,me="Cx",r&&ge&&ge!="c"&&Ue(Me),ge="c"):He=="s"?(Ce=!0,me="cx",r&&ge&&ge!="c"&&Ue(Me),ge="c"):He=="Q"?(me="Qx",r&&ge&&ge!="q"&&Ue(Me),ge="q"):He=="q"?(me="qx",r&&ge&&ge!="q"&&Ue(Me),ge="q"):He=="T"?(Ce=!0,me="Qx",r&&ge&&ge!="q"&&Ue(Me),ge="q"):He=="t"?(Ce=!0,me="qx",r&&ge&&ge!="q"&&Ue(Me),ge="q"):He=="A"?(me="Ax",r&&ge&&ge!="a"&&Ue(),ge="a"):He=="a"?(me="ax",r&&ge&&ge!="a"&&Ue(),ge="a"):(He=="z"||He=="Z")&&(Ne="blob")});function Ue(){he=Me[Me.length-1],se.length>=2&&(he=="z"||he=="Z")&&(Ne="blob"),Ne=="squiggle"?xe=new e.Squiggle($,ue,se,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l):xe=new e.Blob(ve,$,ue,se,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l),xe.loc(0,0,T),he=Me[Me.length-1],Ae=Me[Me.length-2],Ee.indexOf(he)>=0?(be[0]=se[se.length-1][0],be[1]=se[se.length-1][1],N.x=se[se.length-1][0],N.y=se[se.length-1][1],se=[],se.push([be[0],be[1]])):(be=[0,0],se=[[0,0]]),Me=[],he!="z"&&he!="Z"&&Me.push(he),X.x=0,X.y=0;var He=K.getAttribute("transform");(He||y)&&b(xe,He||y)}return w&&Ue(),se}T.processPath=function(K){return D(K,!1)},f!==!1&&e.styleTransforms(this,C),this.clone=function(){return T.cloneProps(new e.SVGContainer(t,r,i,o,l,f,this.group,g))}},e.extend(e.SVGContainer,e.Container,"clone","zimContainer",!1),e.CustomShape=function(t,r,i,o){e.zimCustomShapeCheck||(qe("50.97"),e.zimCustomShapeCheck=!0),this.zimContainer_constructor(t,r,i,o,!1);var l=this;this.mouseChildren=!1,l._dashedOffset=5,Object.defineProperty(l,"color",{get:function(){return l._color},set:function(f){n(f)&&(f="black"),l._color=f,f&&f.type?l.specialColor(l.colorCommand,f,l):l.colorCommand.style=f}}),this.setColorRange=function(f,h){return n(h)?(l.startColor=l.color,l.endColor=f):n(f)?(l.startColor=l.color,l.endColor=h):(l.startColor=f,l.endColor=h),l},l._colorRange=0,Object.defineProperty(l,"colorRange",{get:function(){return l._colorRange},set:function(f){l._colorRange=f,!n(l.startColor)&&!n(l.endColor)&&(l.color=e.colorRange(l.startColor,l.endColor,f))}}),Object.defineProperty(l,"borderColor",{get:function(){return l._borderColor},set:function(f){l._borderColor=f,f&&!l.borderWidth&&(l.borderWidth=1),l.borderColorCommand?f&&f.type?l.specialColor(l.borderColorCommand,f,l):l.borderColorCommand.style=f:l.drawShape()}}),Object.defineProperty(l,"borderWidth",{get:function(){return l._borderWidth},set:function(f){f>0||(f=0),l._borderWidth=f,!l.borderWidthCommand||l._borderWidth==0?(l.borderWidthCommand=null,l.drawShape()):(l.borderWidthCommand.width=l._borderWidth,l._dashed&&(l.borderDashedCommand.segments=l._dashed,l.borderDashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"thickness",{get:function(){return l._thickness},set:function(f){f>0||(f=0),l._thickness=f,!l.thicknessCommand||l._thickness==0?l.drawShape():(l.thicknessCommand.width=l._thickness,l._dashed&&(l.dashedCommand.segments=l._dashed,l.dashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"dashed",{get:function(){return l._dashed},set:function(f){l._dashed=f,f&&!Array.isArray(l._dashed)&&(l.dashed=[10,10]);var h;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;h=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;h=l.borderDashedCommand}h?l._dashed?(h.segments=l._dashed,h.offset=l._dashedOffset):(h.segments=null,h.offset=null):l.drawShape()}}),Object.defineProperty(l,"dashedOffset",{get:function(){return l._dashedOffset},set:function(f){isNaN(f)&&(f=5),l._dashedOffset=f;var h;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;h=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;h=l.borderDashedCommand}h?l._dashed?(h.segments=l._dashed,h.offset=l._dashedOffset):(h.segments=null,h.offset=null):l.drawShape()}}),Object.defineProperty(l,"corner",{get:function(){return l._corner},set:function(f){l._corner=f,l.drawShape()}}),this.linearGradient=function(f,h,g,_,P,C){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(f,h,g,_,P,C),this},this.radialGradient=function(f,h,g,_,P,C,T,N){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(f,h,g,_,P,C,T,N),this},this.cloneAll=function(f,h,g,_){var P=this.getBounds();n(P)&&(P={x:null,y:null,width:null,height:null});var C=this.cloneChildren(this.cloneProps(new e.Container(P.x,P.y,P.width,P.height,h,g,_)),f);return C.mouseChildren=!1,C.type=this.type,C}},e.extend(e.CustomShape,e.Container,null,"zimContainer",!1),e.Circle=function(t,r,i,o,l,f,h,g,_,P,C){var T="radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",N;if(N=mt(e.Circle,arguments,T,this))return N;qe("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=P;var O=_===!1?{}:e.getStyle(this.type,this.group,C);n(t)&&(t=O.radius!=null?O.radius:50),n(l)&&(l=O.dashed!=null?O.dashed:!1),n(i)&&(i=O.borderColor!=null?O.borderColor:null),n(o)&&(o=O.borderWidth!=null?O.borderWidth:null),i<0||o<0?i=o=null:i!=null&&o==null&&(o=1),n(r)&&(r=O.color!=null?O.color:o>0?"rgba(0,0,0,0)":e.black),n(f)&&(f=O.percent!=null?O.percent:100),n(h)&&(h=O.percentClose!=null?O.percentClose:!0),n(g)&&(g=O.strokeObj!=null?O.strokeObj:{});var S=k(t,r,i,o,f);this.veeObj={radius:S[0],color:S[1],borderColor:S[2],borderWidth:S[3],percent:S[4]};function k(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),f=e.Pick.choose(f);var x=this;x._radius=t,x._color=r,x._borderColor=i,x._borderWidth=o,x._dashed=l,x._dashed&&!Array.isArray(x._dashed)&&(x._dashed=[10,10]);var E=this.shape=new ze.Shape;this.addChild(E);var L=E.graphics;x.drawShape=function(){L.c(),x.colorCommand=L.f(x._color).command,x._color&&x._color.type&&x.specialColor(x.colorCommand,x._color,x),(n(x._borderWidth)||x._borderWidth>0)&&(!n(x._borderColor)||!n(x._borderWidth))&&(n(x._borderColor)&&(x._borderColor=e.black),x.borderColorCommand=L.s(x._borderColor).command,x._borderColor&&x._borderColor.type&&x.specialColor(x.borderColorCommand,x._borderColor,x),x.borderWidthCommand=L.ss(x._borderWidth,g.caps,g.joints,g.miterLimit,g.ignoreScale).command,x._dashed&&(x.borderDashedCommand=L.sd(Array.isArray(x._dashed)?x._dashed:[10,10],x._dashedOffset).command));var A=x._radius*2;if(typeof f=="number"&&f>=0&&f<100){var b=360*f/100/2;L.arc(0,0,x._radius,(-b-90)*Math.PI/180,(b-90)*Math.PI/180,!1),h&&L.cp(),A=x._radius-Math.cos(b*Math.PI/180)*x._radius}else L.dc(0,0,x._radius);x.setBounds(-x._radius,-x._radius,x._radius*2,A)},x.drawShape(),r.type&&(x.color=r),Object.defineProperty(x,"radius",{get:function(){return x._radius},set:function(A){x._radius=A,x.drawShape()}}),Object.defineProperty(x,"percentage",{get:function(){return f},set:function(A){f=A,x.drawShape()}}),Object.defineProperty(x,"percentClose",{get:function(){return h},set:function(A){h=A,x.drawShape()}}),_!==!1&&e.styleTransforms(this,O),this.clone=function(A){var b=x.cloneProps(new e.Circle(A||!e.isPick(S[0])?x.radius:S[0],A||!e.isPick(S[1])?x.color:S[1],A||!e.isPick(S[2])?x.borderColor:S[2],A||!e.isPick(S[3])?x.borderWidth:S[3],x.dashed,A||!e.isPick(S[4])?f:S[4],h,g,_,this.group,C));return x.linearGradientParams&&b.linearGradient.apply(b,x.linearGradientParams),x.radialGradientParams&&b.radialGradient.apply(b,x.radialGradientParams),b}},e.extend(e.Circle,e.CustomShape,"clone","zimCustomShape",!1),e.Rectangle=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",O;if(O=mt(e.Rectangle,arguments,N,this))return O;qe("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=C;var S=P===!1?C!=null?e.getStyle(null,null,T,this.group):{}:e.getStyle(this.type,this.group,T);n(t)&&(t=S.width!=null?S.width:null),n(r)&&(r=S.height!=null?S.height:n(t)?100:t),n(t)&&(t=r),n(f)&&(f=S.corner!=null?S.corner:0),n(h)&&(h=S.dashed!=null?S.dashed:!1),n(o)&&(o=S.borderColor!=null?S.borderColor:null),n(l)&&(l=S.borderWidth!=null?S.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=S.color!=null?S.color:l>0?"rgba(0,0,0,0)":e.black),n(g)&&(g=S.strokeObj!=null?S.strokeObj:{}),n(_)&&(_=S.scaleDimensions!=null?S.scaleDimensions:!0);var k=x(t,r,i,o,l);this.veeObj={width:k[0],height:k[1],color:k[2],borderColor:k[3],borderWidth:k[4]};function x(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l);var E=this;E._color=i,E._borderColor=o,E._borderWidth=l,E._dashed=h,E._dashed&&!Array.isArray(E._dashed)&&(E._dashed=[10,10]),E._corner=f,E.scaleDimensions=_,E.setWidth=function(b){t=b},E.setHeight=function(b){r=b};var L=this.shape=new ze.Shape;this.addChild(L);var A=L.graphics;E.drawShape=function(){if(A.c(),E.colorCommand=A.f(E._color).command,i&&i.type&&E.specialColor(E.colorCommand,i,E),(n(E._borderWidth)||E._borderWidth>0)&&(!n(E._borderColor)||!n(E._borderWidth))&&(n(E._borderColor)&&(E._borderColor=e.black),E.borderColorCommand=A.s(E._borderColor).command,E._borderColor&&E._borderColor.type&&E.specialColor(E.borderColorCommand,E._borderColor,E),E.borderWidthCommand=A.ss(E._borderWidth,g.caps,g.joints,g.miterLimit,g.ignoreScale).command,E._dashed&&(E.borderDashedCommand=A.sd(Array.isArray(E._dashed)?E._dashed:[10,10],E._dashedOffset).command)),Array.isArray(E._corner)){var b=E._corner;Array.isArray(b)&&b.length==2&&(b=[b,b,b,b]);for(var F=[],q=!1,V=0;V<b.length;V++)Array.isArray(b[V])?(q=!0,F.push(b[V])):F.push([b[V],b[V]]);b=F,q?A.mt(0,b[0][1]).curveTo(0,0,b[0][0],0).lt(t-b[1][0],0).curveTo(t,0,t,b[1][1]).lt(t,r-b[2][1]).curveTo(t,r,t-b[2][0],r).lt(b[3][0],r).curveTo(0,r,0,r-b[3][1]).cp():A.rc(0,0,t,r,E._corner[0],E._corner[1],E._corner[2],E._corner[3])}else E._corner>0?A.rr(0,0,t,r,E._corner):A.r(0,0,t,r);E.setBounds(0,0,t,r),i.type&&(E.color=i)},E.drawShape(),(P!==!1||C!=null)&&e.styleTransforms(this,S),this.clone=function(b,F){var q=n(F)?P:F,V=E.cloneProps(new e.Rectangle(b||!e.isPick(k[0])?t:k[0],b||!e.isPick(k[1])?r:k[1],b||!e.isPick(k[2])?E.color:k[2],b||!e.isPick(k[3])?E.borderColor:k[3],b||!e.isPick(k[4])?E.borderWidth:k[4],f,E._dashed,g,E.scaleDimensions,q,this.group,T));return V}},e.extend(e.Rectangle,e.CustomShape,"clone","zimCustomShape",!1),e.Triangle=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O){var S="a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",k;if(k=mt(e.Triangle,arguments,S,this))return k;qe("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=N;var x=T===!1?{}:e.getStyle(this.type,this.group,O);n(t)&&(t=x.a!=null?x.a:100),n(r)&&(r=x.b!=null?x.b:t),n(i)&&(i=x.c!=null?x.c:t),r==-1&&(r=Math.sqrt(Math.pow(t,2)+Math.pow(i,2))),i==-1&&(i=Math.sqrt(Math.pow(t,2)+Math.pow(r,2))),n(h)&&(h=x.corner!=null?x.corner:0),n(g)&&(g=x.center!=null?x.center:!0),n(_)&&(_=x.adjust!=null?x.adjust:0),n(l)&&(l=x.borderColor!=null?x.borderColor:null),n(f)&&(f=x.borderWidth!=null?x.borderWidth:null),l<0||f<0?l=f=null:l!=null&&f==null&&(f=1),n(o)&&(o=x.color!=null?x.color:f>0?"rgba(0,0,0,0)":e.black),n(_)&&(_=x.adjust!=null?x.adjust:0),n(C)&&(C=x.strokeObj!=null?x.strokeObj:{});var E=L(t,r,i,o,l,f);this.veeObj={a:E[0],b:E[1],c:E[2],color:E[3],borderColor:E[4],borderWidth:E[5]};function L(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),this.a=t,this.b=r,this.c=i,o=e.Pick.choose(o),l=e.Pick.choose(l),f=e.Pick.choose(f);var A=this;A._color=o,A._borderColor=l,A._borderWidth=f,A._dashed=P,A._dashed&&!Array.isArray(A._dashed)&&(A._dashed=[10,10]),A._corner=h;var b=[t,r,i];b.sort(function(Q,U){return U-Q});var F=b[0],q=b[1],V=b[2],I=[b.indexOf(t),b.indexOf(r),b.indexOf(i)];if(F>q+V){ht("zim display - Triangle(): invalid triangle lengths");return}var ne=this.shape=new ze.Shape;this.adjusted=_,this.addChild(ne);var R=ne.graphics;A.drawShape=function(){var Q=[];Array.isArray(A._corner)?Q=A._corner:Q.push(A._corner,A._corner,A._corner);for(var U=0;U<3;U++)(Q[U]<0||typeof Q[U]!="number")&&(Q[U]=0);R.c(),A.colorCommand=R.f(A._color).command,A._color&&A._color.type&&A.specialColor(A.colorCommand,A._color,A),(n(A._borderWidth)||A._borderWidth>0)&&(!n(A._borderColor)||!n(A._borderWidth))&&(n(A._borderColor)&&(A._borderColor=e.black),A.borderColorCommand=R.s(A._borderColor).command,A._borderColor&&A._borderColor.type&&A.specialColor(A.borderColorCommand,A._borderColor,A),A.borderWidthCommand=R.ss(A._borderWidth,C.caps,C.joints,C.miterLimit,C.ignoreScale).command,A._dashed&&(A.borderDashedCommand=R.sd(Array.isArray(A._dashed)?A._dashed:[10,10],A._dashedOffset).command)),A.one={x:0,y:0},A.two={x:t,y:0};var ee=Math.acos((Math.pow(q,2)+Math.pow(V,2)-Math.pow(F,2))/(2*q*V))*180/Math.PI,ae=Math.asin(q*Math.sin(ee*Math.PI/180)/F)*180/Math.PI,ie=180-ee-ae,ce=[ee,ae,ie];A.angles=[ce[I[1]],ce[I[2]],ce[I[0]]];var j=A.angles[1],G=Math.cos(j*Math.PI/180)*r,y=Math.sin(j*Math.PI/180)*r,p=Math.max(t,t-G),d=y;A.setBounds(0,_,p,d),ne.y=d,A.three={x:t-G,y:0-y};var D=t*Q[0]/(Q[0]+Q[1]||1);R.mt(D,0).at(t,0,t-G,0-y,Q[1]).at(t-G,0-y,0,0,Q[2]).at(0,0,t,0,Q[0]).lt(D,0),R.cp(),g&&(A.regX=p/2,A.regY=d/2),_&&(A.shape.y+=_)},A.drawShape(),o.type&&(A.color=o),T!==!1&&e.styleTransforms(this,x),this.clone=function(Q,U){var ee=n(U)?T:U,ae=A.cloneProps(new e.Triangle(Q||!e.isPick(E[0])?t:E[0],Q||!e.isPick(E[1])?r:E[1],Q||!e.isPick(E[2])?i:E[2],Q||!e.isPick(E[3])?A.color:E[3],Q||!e.isPick(E[4])?A.borderColor:E[4],Q||!e.isPick(E[5])?A.borderWidth:E[5],h,g,_,P,C,ee,this.group,O));return A.linearGradientParams&&ae.linearGradient.apply(ae,A.linearGradientParams),A.radialGradientParams&&ae.radialGradient.apply(ae,A.radialGradientParams),ae}},e.extend(e.Triangle,e.CustomShape,"clone","zimCustomShape"),e.Poly=function(t,r,i,o,l,f,h,g,_,P,C){var T="radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",N;if(N=mt(e.Poly,arguments,T,this))return N;qe("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=P;var O=_===!1?{}:e.getStyle(this.type,this.group,C);n(t)&&(t=O.radius!=null?O.radius:50),n(r)&&(r=O.sides!=null?O.sides:5),n(i)&&(i=O.pointSize!=null?O.pointSize:0),n(h)&&(h=O.dashed!=null?O.dashed:!1),n(l)&&(l=O.borderColor!=null?O.borderColor:null),n(f)&&(f=O.borderWidth!=null?O.borderWidth:null),l<0||f<0?l=f=null:l!=null&&f==null&&(f=1),n(o)&&(o=O.color!=null?O.color:f>0?"rgba(0,0,0,0)":e.black),n(g)&&(g=O.strokeObj!=null?O.strokeObj:{});var S=k(t,r,i,o,l,f);this.veeObj={radius:S[0],sides:S[1],pointSize:S[2],color:S[3],borderColor:S[4],borderWidth:S[5]};function k(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l),f=e.Pick.choose(f);var x=this;x._radius=t,x._color=o,x._sides=r,x._pointSize=i,x._borderColor=l,x._borderWidth=f,x._dashed=h,x._dashed&&!Array.isArray(x._dashed)&&(x._dashed=[10,10]);var E=this.shape=new ze.Shape;this.addChild(E),E.rotation=-90;var L=E.graphics;x.drawShape=function(){L.c(),x.colorCommand=L.f(x._color).command,x._color&&x._color.type&&x.specialColor(x.colorCommand,x._color,x),(n(x._borderWidth)||x._borderWidth>0)&&(!n(x._borderColor)||!n(x._borderWidth))&&(n(x._borderColor)&&(x._borderColor=e.black),x.borderColorCommand=L.s(x._borderColor).command,x._borderColor&&x._borderColor.type&&x.specialColor(x.borderColorCommand,x._borderColor,x),x.borderWidthCommand=L.ss(x._borderWidth,g.caps,g.joints,g.miterLimit,g.ignoreScale).command,x._dashed&&(x.borderDashedCommand=L.sd(Array.isArray(x._dashed)?x._dashed:[10,10],x._dashedOffset).command)),L.dp(0,0,x._radius,x._sides,x._pointSize),x.setBounds(-x._radius,-x._radius,x._radius*2,x._radius*2)},x.drawShape(),o.type&&(x.color=o),Object.defineProperty(x,"radius",{get:function(){return x._radius},set:function(A){x._radius=A,x.drawShape()}}),Object.defineProperty(x,"sides",{get:function(){return x._sides},set:function(A){x._sides=A,x.drawShape()}}),Object.defineProperty(x,"pointSize",{get:function(){return x._pointSize},set:function(A){x._pointSize=A,x.drawShape()}}),_!==!1&&e.styleTransforms(this,O),this.clone=function(A){var b=x.cloneProps(new e.Poly(A||!e.isPick(S[0])?x.radius:S[0],A||!e.isPick(S[1])?x.sides:S[1],A||!e.isPick(S[2])?x.pointSize:S[2],A||!e.isPick(S[3])?x.color:S[3],A||!e.isPick(S[4])?x.borderColor:S[4],A||!e.isPick(S[5])?x.borderWidth:S[5],x.dashed,g,_,this.group,C));return x.linearGradientParams&&b.linearGradient.apply(b,x.linearGradientParams),x.radialGradientParams&&b.radialGradient.apply(b,x.radialGradientParams),b}},e.extend(e.Poly,e.CustomShape,"clone","zimCustomShape",!1),e.Line=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S){var k="length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",x;if(x=mt(e.Line,arguments,k,this))return x;qe("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=O;var E=N===!1?{}:e.getStyle(this.type,this.group,S);n(t)&&(t=E.length!=null?E.length:100),n(f)&&(f=E.dashed!=null?E.dashed:!1),n(r)&&(r=E.thickness!=null?E.thickness:3),n(i)&&(i=E.color!=null?E.color:e.black),n(o)&&(o=E.startHead!=null?E.startHead:null),n(l)&&(l=E.endHead!=null?E.endHead:null),n(h)&&(h=E.strokeObj!=null?E.strokeObj:{}),n(g)&&(g=E.lineType!=null?E.lineType:"straight"),g!=="corner"&&g!="curve"&&(g="straight"),n(_)&&(_=E.lineOrientation!=null?E.lineOrientation:"auto"),_!=="vertical"&&_!="horizontal"&&(_="auto"),n(P)&&(P=E.curveH!=null?E.curveH:20),n(C)&&(C=E.curveV!=null?E.curveV:20),n(h)&&(h=E.strokeObj!=null?E.strokeObj:{});var L=A(t,i,r,o,l);this.veeObj={length:L[0],color:L[1],thickness:L[2],startHead:L[3],endHead:L[4]};function A(){return arguments}t=e.Pick.choose(t),i=e.Pick.choose(i),r=e.Pick.choose(r),o=e.Pick.choose(o),l=e.Pick.choose(l),o&&o.clone&&(o=o.clone()),l&&l.clone&&(l=l.clone());var b=this;b._length=t,b._color=i,b._thickness=r,b._dashed=f,b._dashed&&!Array.isArray(b._dashed)&&(b._dashed=[10,10]),b._startX=0,b._startY=0,b._endX=t,b._endY=0,b._startHead=o,b._endHead=l,b._points=T,b._lineOrientation=_,b.angle=0,b.lineType=g,b._startHead&&F("start",b._startHead),b._endHead&&F("end",b._endHead);function F(I,ne){if(ne=="triangle"||ne=="arrow"){var R=b["_"+I+"Head"]=new e.Triangle(r*4,r*4,r*4,i);R.rotation=90}else ne=="circle"&&(b["_"+I+"Head"]=new e.Circle(r*2.2,i));n(b["_"+I+"Head"].startAngle)&&(b["_"+I+"Head"].startAngle=b["_"+I+"Head"].rotation)}o=b._startHead,l=b._endHead,o&&o.type=="Triangle"&&(o.startRegY=o.regY),l&&l.type=="Triangle"&&(l.startRegY=l.regY);var q=this.shape=new ze.Shape;this.addChild(q);var V=q.graphics;b.drawShape=function(I,ne){V.c(),b.colorCommand=V.s(b._color).command,i&&i.type&&b.specialColor(b.colorCommand,i,b),b.thicknessCommand=V.ss(b._thickness,h.caps,h.joints,h.miterLimit,h.ignoreScale).command,b._dashed&&(b.dashedCommand=V.sd(Array.isArray(b._dashed)?b._dashed:[10,10],b._dashedOffset).command);var R,Q;if(b._points){var U=b._points[0];b._startX=U[0],b._startY=U[1];var ee=b._points[b._points.length-1],ae=[ee[ee.length-2],ee[ee.length-1]];b._endX=ae[0],b._endY=ae[1],V.mt(U[0],U[1]);for(var ie=1;ie<b._points.length;ie++){var ce=b._points[ie];ie==1&&(R=[b._startX,b._startY,ce[0],ce[1]]),ce.length==2?V.lt(ce[0],ce[1]):ce.length==4?V.qt(ce[0],ce[1],ce[2],ce[3]):ce.length==6&&V.bt(ce[0],ce[1],ce[2],ce[3],ce[4],ce[5])}if(ce.length>=4)Q=[ce[ce.length-4],ce[ce.length-3],b._endX,b._endY];else{var j=b._points[b._points.length-2];Q=[j[j.lenth-2],j[j.lenth-1],b._endX,b._endY]}}else{var G=b._startX,y=b._startY,p=b._endX,d=b._endY,D;if(b.lineType=="straight"?(o&&o.type=="Triangle"&&(o.regY=0,D=e.dist(G,y,p,d),D!=0&&(G=G+b._startHead.height/2*(p-G)/D),D!=0&&(y=y+b._startHead.height/2*(d-y)/D)),l&&l.type=="Triangle"&&(l.regY=0,D=e.dist(G,y,p,d),D!=0&&(p=p-b._endHead.height/2*(p-G)/D),D!=0&&(d=d-b._endHead.height/2*(d-y)/D))):(I?b._lineOrientation=="horizontal"||b.autoOrientation=="horizontal"?o&&o.type=="Triangle"&&(o.regY=0,p>G?G=Math.min(p,G+b._startHead.height/2):G=Math.max(p,G-b._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=0,d>y?y=Math.min(d,y+b._startHead.height/2):y=Math.max(d,y-b._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=o.startRegY),ne?b._lineOrientation=="horizontal"||b.autoOrientation=="horizontal"?l&&l.type=="Triangle"&&(l.regY=0,p>G?p-=b._endHead.height/2:p+=b._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=0,d>y?d-=b._endHead.height/2:d+=b._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=l.startRegY)),b.lineType=="straight")V.mt(G,y).lt(p,d),R=Q=[G,y,p,d];else if(b.lineType=="corner"){var K=G+(p-G)*.4,w=y+(d-y)*.4;b._lineOrientation=="auto"&&(b.autoOrientation=Math.abs(G-p)>Math.abs(y-d)?"horizontal":"vertical"),b._lineOrientation=="horizontal"||b.autoOrientation=="horizontal"?(R=Q=[G,y,K,y],V.mt(G,y).lt(K,y).lt(K,d).lt(p,d)):(R=Q=[G,y,G,w],V.mt(G,y).lt(G,w).lt(p,w).lt(p,d))}else{var Y=G>p?-1:1,Ee=y>d?-1:1,X=G,Z=y,pe=Math.abs(G-p),ve=Math.abs(y-d),$=Math.min(P,pe*.5),ue=Math.min(C,ve*.5);b._lineOrientation=="auto"&&(b.autoOrientation=Math.abs(G-p)>Math.abs(y-d)?"horizontal":"vertical");var xe,Ye,se,be;b._lineOrientation=="horizontal"||b.autoOrientation=="horizontal"?(xe=ve-ue*2,Ye=(pe-$*2)/2,V.mt(X,Z),Ye>0&&(X=X+Ye*Y,V.lt(X,Z)),be=Z,Z=Z+ue*Ee,X=X+$*Y,V.qt(X,be,X,Z),R=Q=[G,y,X,y],xe>0&&(Z=Z+xe*Ee,V.lt(X,Z)),Z=Z+ue*Ee,se=X,X=X+$*Y,V.qt(se,Z,X,Z),Ye>0&&(X=X+Ye*Y,V.lt(X,Z))):(xe=pe-$*2,Ye=(ve-ue*2)/2,V.mt(X,Z),Ye>0&&(Z=Z+Ye*Ee,V.lt(X,Z)),se=X,X=X+$*Y,Z=Z+ue*Ee,V.qt(se,Z,X,Z),R=Q=[G,y,G,Z],xe>0&&(X=X+xe*Y,V.lt(X,Z)),X=X+$*Y,be=Z,Z=Z+ue*Ee,V.qt(X,be,X,Z),Ye>0&&(Z=Z+Ye*Ee,V.lt(X,Z)))}}if(b.setBounds(Math.min(b._startX,b._endX),Math.min(b._startY,b._endY),Math.abs(b._startX-b._endX),Math.abs(b._startY-b._endY)),b._length=Math.sqrt(Math.pow(b._startX-b._endX,2)+Math.pow(b._startY-b._endY,2)),b.angle=Math.atan2(b._endY-b._startY,b._endX-b._startX)*180/Math.PI,b._startHead&&b._startHead.loc){b._startHead.loc(b._startX,b._startY,b);var te=Math.atan2(R[3]-R[1],R[2]-R[0])*180/Math.PI;b._startHead.rotation=te-180+b._startHead.startAngle}if(b._endHead&&b._endHead.loc){b._endHead.loc(b._endX,b._endY,b);var _e=Math.atan2(Q[3]-Q[1],Q[2]-Q[0])*180/Math.PI;b._endHead.rotation=_e+b._endHead.startAngle}},b.drawShape(),i.type&&(b.color=i),this.setPoints=function(I,ne,R,Q,U,ee){return Array.isArray(I)&&n(ne)?(b.points=I,b):(I&&!n(I.x)?(b._startX=n(I.x)?b._startX:I.x,b._startY=n(I.y)?b._startY:I.y,ne&&(b._endX=n(ne.x)?b._endX:ne.x,b._endY=n(ne.y)?b._endY:ne.y)):(b._startX=n(I)?b._startX:I,b._startY=n(ne)?b._startY:ne,b._endX=n(R)?b._endX:R,b._endY=n(Q)?b._endY:Q),b.drawShape(U,ee),b)},this.from=function(I,ne,R){n(R)&&(R=!0);var Q,U;if(I&&I.parent&&b.parent&&R){var ee=I.parent.localToLocal(I.x,I.y,b.parent);Q=ee.x,U=ee.y}return I&&!n(I.x)?(b._startX=n(Q)?n(I.x)?b._startX:I.x:Q,b._startY=n(U)?n(I.y)?b._startY:I.y:U):(b._startX=n(I)?b._startX:I,b._startY=n(ne)?b._startY:ne),b.drawShape(),b},this.to=function(I,ne,R){n(R)&&(R=!0);var Q,U;if(I&&I.parent&&b.parent&&R){var ee=I.parent.localToLocal(I.x,I.y,b.parent);Q=ee.x,U=ee.y}return I&&!n(I.x)?(b._endX=n(Q)?n(I.x)?b._endX:I.x:Q,b._endY=n(U)?n(I.y)?b._endY:I.y:U):(b._endX=n(I)?b._endX:I,b._endY=n(ne)?b._endY:ne),b.drawShape(),b},Object.defineProperty(b,"length",{get:function(){return b._length},set:function(I){var ne=b.length!=0?I/b.length:0;if(!isNaN(ne)){var R=b.scaleX,Q=b.scaleY;b.scaleX*=ne,b.scaleY*=ne;var U=b.localToGlobal(b._startX,b._startY),ee=b.localToGlobal(b._endX,b._endY);b.scaleX=R,b.scaleY=Q;var ae=b.globalToLocal(U.x,U.y),ie=b.globalToLocal(ee.x,ee.y);b.setPoints(ae,ie)}}}),Object.defineProperty(b,"startPoint",{get:function(){return new e.Point(b._startX,b._startY)},set:function(I){b._startX=n(I.x)?b._startX:I.x,b._startY=n(I.y)?b._startY:I.y,b.drawShape()}}),Object.defineProperty(b,"endPoint",{get:function(){return new e.Point(b._endX,b._endY)},set:function(I){b._endX=n(I.x)?b._endX:I.x,b._endY=n(I.y)?b._endY:I.y,b.drawShape()}}),Object.defineProperty(b,"startHead",{get:function(){return b._startHead},set:function(I){b._startHead=I,b.drawShape()}}),Object.defineProperty(b,"endHead",{get:function(){return b._endHead},set:function(I){b._endHead=I,b.drawShape()}}),Object.defineProperty(b,"startX",{get:function(){return b._startX},set:function(I){b._startX=I||0,b.drawShape()}}),Object.defineProperty(b,"startY",{get:function(){return b._startY},set:function(I){b._startY=I||0,b.drawShape()}}),Object.defineProperty(b,"endX",{get:function(){return b._endX},set:function(I){b._endX=I||0,b.drawShape()}}),Object.defineProperty(b,"endY",{get:function(){return b._endY},set:function(I){b._endY=I||0,b.drawShape()}}),Object.defineProperty(b,"points",{get:function(){return b._points},set:function(I){I&&(b._points=I,b.drawShape())}}),Object.defineProperty(b,"lineOrientation",{get:function(){return b._lineOrientation},set:function(I){I&&(b._lineOrientation=I,b.drawShape())}}),N!==!1&&e.styleTransforms(this,E),this.clone=function(I){var ne=I||!e.isPick(L[3])?b._startHead:L[3];ne&&ne.clone&&(ne=ne.clone(),ne.rotation=b._startHead.startAngle);var R=I||!e.isPick(L[4])?b._endHead:L[4];R&&R.clone&&(R=R.clone(),R.rotation=b._endHead.startAngle);var Q=b.cloneProps(new e.Line(I||!e.isPick(L[0])?b.length:L[0],I||!e.isPick(L[2])?b.thickness:L[2],I||!e.isPick(L[1])?b.color:L[1],ne,R,b.dashed,h,g,b._lineOrientation,P,C,e.copy(T),N,this.group,S));return b.points?Q.setPoints(b.points):Q.setPoints(b._startX,b._startY,b._endX,b._endY),b.linearGradientParams&&Q.linearGradient.apply(Q,b.linearGradientParams),b.radialGradientParams&&Q.radialGradient.apply(Q,b.radialGradientParams),Q}},e.extend(e.Line,e.CustomShape,"clone","zimCustomShape",!1),e.Squiggle=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne){var R="color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",Q;if(Q=mt(e.Squiggle,arguments,R,this))return Q;qe("53.2"),this.group=I;var U=V===!1?{}:e.getStyle("Squiggle",this.group,ne);if(n(r)&&(r=U.thickness!=null?U.thickness:6),n(o)&&(o=U.length!=null?U.length:300),n(i)&&(i=U.points!=null?U.points:5),typeof i=="string"){var ee=new e.SVGContainer;i=ee.processPath(i)}var ae=typeof i!="number",ie=typeof i=="number"?i:i.length;if(ie==0)return;n(l)&&(l=U.controlLength!=null?U.controlLength:o/ie),this.zimCustomShape_constructor(o,l,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,n(N)&&(N=U.dashed!=null?U.dashed:!1),n(t)&&(t=U.color!=null?U.color:e.blue),t.style&&(this.colorCommand=t,t=e.black),n(f)&&(f=U.controlType!=null?U.controlType:null);var ce=f;n(f)&&(f="mirror"),n(h)&&(h=U.lockControlType!=null?U.lockControlType:!1),n(F)&&(F=U.interactive!=null?U.interactive:!0),n(g)&&(g=U.showControls!=null?U.showControls:F);var j=g;n(_)&&(_=U.lockControls!=null?U.lockControls:!F),n(P)&&(P=U.handleSize!=null?U.handleSize:e.mobile()?20:10),n(C)&&(C=U.allowToggle!=null?U.allowToggle:F),n(T)&&(T=U.move!=null?U.move:F),n(S)&&(S=U.circleColor!=null?U.circleColor:e.light),n(k)&&(k=U.circleBorderColor!=null?U.circleBorderColor:e.dark),n(x)&&(x=U.stickColor!=null?U.stickColor:e.darker),n(E)&&(E=U.stickThickness!=null?U.stickThickness:1),n(L)&&(L=U.selectColor!=null?U.selectColor:e.white),n(A)&&(A=U.selectPoints!=null?U.selectPoints:F),this.circleColor=S,this.circleBorderColor=k,this.stickColor=x,this.stickThickness=E,n(O)&&(O=U.onTop!=null?U.onTop:!0),n(b)&&(b=U.editPoints!=null?U.editPoints:F),n(q)&&(q=U.strokeObj!=null?U.strokeObj:{});var G=y(t);this.veeObj={color:G[0]};function y(){return arguments}t=e.Pick.choose(t);var p=this,d;this.types=["mirror","straight","free","none"],this.interactive=F,this.num=ie,this.onTop=O,this.move=T,this.editPoints=b,this.allowToggle=C,this.lockControlType=h,this.selectPoints=A,this.lockControls=_;var D,K,w;p._color=t,p._thickness=r,p._dashed=N,p._dashed&&!Array.isArray(p._dashed)&&(p._dashed=[10,10]);var Y,Ee,X,Z,pe=p.move,ve=2,$,ue;ce&&typeof i!="number"&&e.loop(i,function(de){de[8]=ce,ce=="none"&&(de[4]=de[5]=de[6]=de[7]=0)}),xe();function xe(){ue&&ue.removeAllEventListeners(),p.num=ie=typeof i=="number"?i:i.length,ie=Math.max(2,ie),l=o/ie,Y=p.shape=new e.Shape({style:!1}).addTo(p);var de=p.sticks=new e.Shape({style:!1}).addTo(p);P<=0&&de.removeFrom();var Me=Y.graphics;Me.c();var Be=de.graphics;Be.c();var he=P/10*8,Ae=P;p.selectPoints?(p.selectedBalls=new e.SelectionSet,p.selectedRect1s=new e.SelectionSet,p.selectedRect2s=new e.SelectionSet,p.selectionManager=new e.SelectionManager([p.selectedBalls,p.selectedRect1s,p.selectedRect2s],"ctrl",!1)):p.selectionManager=new e.SelectionManager(null,"ctrl");var Ce=e.mobile();ue=p.controls=new e.Container({style:!1}).addTo(p),p.interactive&&ue.drag({onTop:!Ce}),D=[],w=[],K=[];var me,Ne,ge,Ue,He,Oe,fe,Xe,Ze;for(me=0;me<ie;me++){if(Ue=new e.Container({style:!1}).addTo(ue),Ue.num=me,typeof i=="number"){var Ke=e.Pick.choose(l);ge=new e.Container(Ke,r,null,null,!1).addTo(p).loc({x:me*o/(ie-1)-Ke/2,y:me%2*Ke}),fe=new e.Circle(he,p.selectPoints&&p.selectedBalls.isSelected(me)?L:p.circleColor,p.circleBorderColor,2,null,null,null,null,!1).centerReg(ge).loc({x:Ke/2,y:0}),He=new e.Rectangle(Ae,Ae,p.selectPoints&&p.selectedRect1s.isSelected(me)?L:Fe(f),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg(ge).loc({x:0,y:0}),Oe=new e.Rectangle(Ae,Ae,p.selectPoints&&p.selectedRect2s.isSelected(me)?L:Fe(f),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg(ge).loc({x:Ke,y:0});var ut=ge.localToLocal(fe.x,fe.y,ue);fe.x=ut.x,fe.y=ut.y,fe.addTo(Ue,null,!1);var gt=ge.localToLocal(He.x,He.y,ue);He.x=f=="none"?0:gt.x-fe.x,He.y=f=="none"?0:gt.y-fe.y,He.addTo(Ue,null,!1);var We=ge.localToLocal(Oe.x,Oe.y,ue);Oe.x=f=="none"?0:We.x-fe.x,Oe.y=f=="none"?0:We.y-fe.y,Oe.addTo(Ue,null,!1),Ue.x=fe.x,Ue.y=fe.y,fe.x=0,fe.y=0,f=="none"&&fe.addTo(Ue,null,!1)}else Ze=i[me],Xe=Ze[8]?Ze[8]:f,Ue.loc({x:Ze[0],y:Ze[1]}),fe=new e.Circle(he,p.circleColor,p.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ue).loc({x:Ze[2],y:Ze[3]}),He=new e.Rectangle(Ae,Ae,Fe(Xe),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ue,0).loc({x:Ze[4],y:Ze[5]}),Oe=new e.Rectangle(Ae,Ae,Fe(Xe),P==0?null:e.dark,P==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ue,0).loc({x:Ze[6],y:Ze[7]});fe.mySet=Ue,fe.rect1=He,fe.rect2=Oe,fe.index=me,Ce?fe.on("mousedown",ct):fe.on("dblclick",Pe),He.ball=fe,He.other=Oe,Oe.ball=fe,Oe.other=He,P==0&&(fe.expand(10),He.expand(10),Oe.expand(10)),Ce&&(fe.expand(),He.expand(),Oe.expand()),Ne=[Ue,fe,He,Oe,Ze?Ze[8]:f],D.push(Ne),K.push(fe),w.push(Ue)}var it=!1;function ct(Te){it?(Te.preventDefault(),Pe(Te)):(it=!0,setTimeout(function(){it=!1},300))}function Pe(Te){if(!p.lockControlType){var et=Te.target,Ve=D[et.index][4]?D[et.index][4]:f;Math.abs(et.rect1.x)<=2&&Math.abs(et.rect1.y)<=2&&Math.abs(et.rect2.x)<=2&&Math.abs(et.rect2.y)<=2&&(Ve="none"),Ve=="none"&&et.parent.addChildAt(et,0),Ve=p.types[(p.types.indexOf(Ve)+(p.shiftKey?-1:1)+p.types.length)%p.types.length],Ve=="none"&&(et.rect1.x=et.rect1.y=et.rect2.x=et.rect2.y=0,et.parent.addChild(et),Te.stopImmediatePropagation()),D[et.index][4]=Ve,et.rect1.color=Fe(Ve),et.rect2.color=Fe(Ve),p.drawShape(),t.type&&(p.color=t);var Le=new ze.Event("change");Le.controlType="bezierSwitch",p.dispatchEvent(Le),et.stage.update()}}function Fe(Te){var et={straight:"#e472c4",free:"#ebcb35",none:"#50c4b7"};return et[Te]?et[Te]:"#993399"}var we=e.mobile();p.drawShape=function(){Me.c();var Te=we?10:6,et,Ve,Le,Qe,$e,nt,pt,De,at,yt,rt,Tt,xt,Ct,lt;if(r<Te)for(Me.s("rgba(0,0,0,.01)").ss(Te),Qe=D[0][0],at=Qe.localToLocal(D[0][1].x,D[0][1].y,Y),Me.mt(at.x,at.y),et=0;et<D.length;et++)Ve=et,Le=(et+1)%D.length,Qe=D[Ve][0],$e=D[Ve][1],nt=D[Ve][2],pt=D[Ve][3],De=D[Le][0],yt=D[Le][1],rt=D[Le][2],xt=Qe.localToLocal(pt.x,pt.y,Y),Ct=De.localToLocal(rt.x,rt.y,Y),lt=De.localToLocal(yt.x,yt.y,Y),et!=D.length-1&&Me.bt(xt.x,xt.y,Ct.x,Ct.y,lt.x,lt.y);for(p.colorCommand||(p.colorCommand=Me.s(p._color).command,t&&t.type&&p.specialColor(p.colorCommand,t,p)),p.thicknessCommand||(p.thicknessCommand=Me.ss(p._thickness,q.caps,q.joints,q.miterLimit,q.ignoreScale).command),p._dashed&&(p.dashedCommand||(p.dashedCommand=Me.sd(Array.isArray(p._dashed)?p._dashed:[10,10],p._dashedOffset).command)),Qe=D[0][0],at=Qe.localToLocal(D[0][1].x,D[0][1].y,Y),Me.mt(at.x,at.y),Be.c().s(p.stickColor).ss(p.stickThickness),et=0;et<D.length;et++)Ve=et,Le=(et+1)%D.length,Qe=D[Ve][0],$e=D[Ve][1],nt=D[Ve][2],pt=D[Ve][3],De=D[Le][0],yt=D[Le][1],rt=D[Le][2],xt=Qe.localToLocal(pt.x,pt.y,Y),Ct=De.localToLocal(rt.x,rt.y,Y),lt=De.localToLocal(yt.x,yt.y,Y),et!=D.length-1&&Me.bt(xt.x,xt.y,Ct.x,Ct.y,lt.x,lt.y),at=Qe.localToLocal($e.x,$e.y,Y),Tt=Qe.localToLocal(nt.x,nt.y,Y),et==0&&(nt.visible=0),et!=0&&Be.mt(at.x,at.y).lt(Tt.x,Tt.y),et!=D.length-1&&Be.mt(at.x,at.y).lt(xt.x,xt.y),et==D.length-1&&(pt.visible=0);p._dashed&&Me.append(p.dashedCommand),Me.append(p.thicknessCommand),Me.append(p.colorCommand)},p.drawShape(),t.type&&(p.color=t);var je;ue.on("mousedown",function(Te){if(d=Te.target.stage,!p.lockControls){if(p.selectPoints&&(p.keyFocus=!0),je={x:Te.target.x,y:Te.target.y},Te.target.rect1)fe=Te.target,fe.startX=fe.x,fe.startY=fe.y,fe.rect1.startX=fe.rect1.x,fe.rect1.startY=fe.rect1.y,fe.rect2.startX=fe.rect2.x,fe.rect2.startY=fe.rect2.y;else{var et=Te.target;et.startX=et.x,et.startY=et.y,fe=et.ball;var Ve=fe.index,Le=f;if(n(D[Ve][4])||(Le=D[Ve][4]),Le=="straight"){var Qe=et.other,$e=Qe.x-fe.x,nt=Qe.y-fe.y;Qe.stickLength=Math.sqrt(Math.pow($e,2)+Math.pow(nt,2))}}if(p.selectPoints){var pt=p.selectionManager.currentSet;if(pt&&pt.selections&&pt.selections.length>0)for(me=0;me<pt.selections.length;me++){var De=p.pointObjects[pt.selections[me]];De[1].startX=De[1].x,De[1].startY=De[1].y,De[2].startX=De[2].x,De[2].startY=De[2].y,De[3].startX=De[3].x,De[3].startY=De[3].y}}}}),p.selectPoints&&ue.tap(function(Te){if(Te.target.rect1){var et=Te.target;p.selectedBalls.toggle(et.parent.num)}else{var Ve=Te.target;Ve.color="white",et=Ve.ball,et.rect1==Ve?p.selectedRect1s.toggle(et.parent.num):p.selectedRect2s.toggle(et.parent.num)}for(me=0;me<p.pointObjects.length;me++){var Le=p.pointObjects[me];Le[1].color=p.selectedBalls.isSelected(me)?L:p.circleColor,Le[2].color=p.selectedRect1s.isSelected(me)?L:Fe(Le[4]),Le[3].color=p.selectedRect2s.isSelected(me)?L:Fe(Le[4])}d.update()}),ue.on("pressmove",function(Te){if(!p.lockControls)if(p.selectPoints){var et=Ye();if(et.indexOf(Te.target)==-1)$(Te.target),p.drawShape();else if(et.length>0){for(var Ve=Te.target.x-Te.target.startX,Le=Te.target.y-Te.target.startY,Qe=0;Qe<et.length;Qe++){var $e=et[Qe];$e.x=$e.startX+Ve,$e.y=$e.startY+Le,$($e)}p.drawShape()}}else $(Te.target),p.drawShape()}),ue.on("pressup",function(Te){if(!p.lockControls){var et=Te.target.x!=je.x||Te.target.y!=je.y,Ve=new ze.Event("change");Te.target.rect1?(Ve.controlType="bezierPoint",st(Te.target)):Ve.controlType="bezierHandle",et&&p.dispatchEvent(Ve)}});function st(Te){if(p.selectPoints){var et=Ye();if(et&&et.indexOf(Te)==-1)se(Te);else if(et&&et.length>0)for(var Ve=0;Ve<et.length;Ve++)se(et[Ve]);else se(Te)}else se(Te)}p.changeControl=function(Te,et,Ve,Le,Qe,$e,nt,pt,De){var at="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",yt;if(yt=mt(p.changeControl,arguments,at))return yt;if(n(Te)){for(me=0;me<D.length;me++)p.changeControl(me,et,Ve,Le,Qe,$e,nt,pt);return}var rt=D[Te];rt[4]=et,et=="none"?(n(nt)||(rt[2].x=nt),n(pt)||(rt[2].y=pt),rt[2].x=rt[1].x,rt[2].y=rt[1].y,rt[3].x=rt[1].x,rt[3].y=rt[1].y,rt[1].parent.addChild(rt[1])):(n(Ve)||(rt[2].x=Ve),n(Le)||(rt[2].y=Le),n(Qe)||(rt[3].x=Qe),n($e)||(rt[3].y=$e),n(nt)||(rt[1].x=nt),n(pt)||(rt[1].y=pt),rt[1].parent.addChildAt(rt[1],0)),De&&(p.update(),d&&d.update())},p.transformPoints=function(Te,et,Ve,Le,Qe){return n(Qe)&&(Qe=!0),p.points=e.transformPoints(p.points,Te,et,Ve,Le),Qe&&p.approximateBounds(),p},p.traverse=function(Te,et,Ve,Le,Qe){var $e=e.copy(p.segmentRatios);$e.unshift(0),n(Ve)&&(Ve=et+1);var nt=$e[et]*100,pt=$e[Ve]*100,De;!Qe&&nt>pt?De=100-nt+pt:!Qe&&nt<pt?De=pt-nt:Qe&&nt>pt?De=-(nt-pt):Qe&&nt<pt&&(De=-(100-pt+nt));var at=new ze.Event("traversed");return at.obj=Te,Te.animate({ease:"linear",props:{path:p,startPercent:nt,percent:De},time:Le,call:function(){p.dispatchEvent(at)}}),p},p.reversePoints=function(){return i=e.copy(p.points),p.points=e.reversePoints(e.copy(p.points)),p.update(),p},p.appendPoints=function(Te,et){var Ve=e.copy(p.points);return p.points=e.appendPoints(Ve,Te,et),p.update(),p},p.prependPoints=function(Te,et){var Ve=e.copy(p.points);return p.points=e.rependPoints(Ve,i,et),p.update(),p},p.splitPoints=function(Te){var et=e.copy(p.points);if(!(Te<1||Te>et.length-1)){var Ve=e.splitPoints(et,Te),Le=Ve[0],Qe=Ve[1],$e=p.clone();return p.points=Le,p.update(),$e.points=Qe,p.parent&&$e.addTo(p.parent),$e}},p.makeBlob=function(Te,et){n(Te)&&(Te="mirror"),n(et)&&(et=5);var Ve=e.copy(p.points);e.loop(Ve,function(Qe,$e,nt){Qe[8]||(Qe[8]="mirror"),$e==0&&(Te=="free"&&(Qe[4]=Qe[5]=0),Qe[8]=Te),$e==nt-1&&(Te=="free"&&(Qe[6]=Qe[7]=0),Qe[8]=Te)}),Math.abs(Ve[0][0]-Ve[Ve.length-1][0])<et&&Math.abs(Ve[0][1]-Ve[Ve.length-1][1])<et&&(Ve[0][4]=Ve[Ve.length-1][4],Ve[0][5]=Ve[Ve.length-1][5],Ve.pop());var Le=new e.Blob({points:Ve,borderColor:p.color,borderWidth:p.thickness,showControls:p.controlsVisible,interactive:p.interactive,onTop:p.onTop,dashed:p.dashed,stickColor:p.stickColor,stickThickness:p.stickThickness});return Le},p.update=function(Te){return Te?p.points=p.pointsAdjusted:p.drawShape(),p.zimAnimateChanged=!0,p},p.interactive&&(T&&Y.drag({onTop:!1}),Ee=Y.on("mousedown",function(Te){d=Te.target.stage,je={x:Y.x,y:Y.y},p.selectPoints&&(p.keyFocus=!0),Je()}),X=Y.on("pressmove",function(){ue.x=Y.x,ue.y=Y.y,de.x=Y.x,de.y=Y.y}),Z=Y.on("pressup",function(){var Te=Y.x!=je.x||Y.y!=je.y,et=Y.localToLocal(p.regX,p.regY,p.parent);if(p.x=et.x,p.y=et.y,ue.x=ue.y=de.x=de.y=Y.x=Y.y=0,Te){var Ve=new ze.Event("change");Ve.controlType="move",p.dispatchEvent(Ve)}d&&d.update()}),p.move||te(!0));function Je(){if(p.onTop){var Te=p.parent.numChildren-1;p.parent.getChildAt(Te).type=="Keyboard"&&Te--,p.parent.setChildIndex(p,Te)}}p.toggleEvent=p.on("mousedown",function(){p.allowToggle&&(j||(p.showControls(),p.dispatchEvent("controlsshow")))}),p.added(function(){d=p.stage,p.toggleStageEvent&&d.off("stagemousedown",p.toggleStageEvent),p.toggleStageEvent=d.on("stagemousedown",function(Te){!p.allowToggle||!p.stage||j&&!p.hitTestPoint(Te.stageX/e.scaX,Te.stageY/e.scaY,!1)&&(p.hideControls(),p.dispatchEvent("controlshide"))})}),p.clickEvent=p.on("click",function(){p.ctrlKey&&setTimeout(function(){p.clone(!0).addTo(p.stage).mov(0,100),p.allowToggle&&(p.hideControls(),p.dispatchEvent("controlshide"));var Te=new ze.Event("change");Te.controlType="move",p.dispatchEvent(Te),p.stage.update()},50)}),p.hideControls=function(){return p.toggled=!1,ue.visible=!1,de.visible=!1,j=!1,p.stage&&p.stage.update(),!p.allowToggle&&p.move&&te(),p},g||p.hideControls(),p.showControls=function(){return p.toggled=!0,ue.visible=!0,de.visible=!0,j=!0,ue.x=Y.x,ue.y=Y.y,de.x=Y.x,de.y=Y.y,p.addChildAt(Y,0),p.move&&!p.allowToggle&&be(),p.stage&&p.stage.update(),p},p.toggle=function(Te){return Te===!0?p.showControls():Te===!1||j?p.hideControls():p.showControls(),p},p.recordData=function(Te){n(Te)&&(Te=!1);var et={type:"Squiggle",index:p.parent?p.parent.getChildIndex(p):-1,x:p.x,y:p.y,points:p.getPoints(),color:p.color,thickness:p.thickness,move:p.move,allowToggle:p.allowToggle,controlsVisible:j};return Te?JSON.stringify(et):et},p.setData=function(Te,et){if(!n(Te)){if(et)try{Te=JSON.parse(Te)}catch($e){return}var Ve=Te.index;n(Ve)&&(Ve=-1),delete Te.index;var Le=Te.points;n(Le)||p.setPoints(Le),delete Te.points,p.num=Le.length;for(var Qe in Te)p[Qe]=Te[Qe];return p.parent&&p.parent.setChildIndex(p,Ve),p.update(),p}},p.getPoints=function(Te){n(Te)&&(Te=!1);var et=p.points;if(Te){if(!p.pane){var Ve=p.pane=new e.Pane({container:p.stage,width:Math.min(500,p.stage.width-20),height:Math.min(500,p.stage.height-20),draggable:!0}),Le=p.textArea=new e.TextArea(Math.min(400,p.stage.width-70),Math.min(400,p.stage.height-70));Le.centerReg(Ve)}p.textArea.text=JSON.stringify(et),p.pane.show()}return et},p.recordPoints=p.getPoints,p.setPoints=function(Te){for(var et,Ve,Le=0;Le<Te.length;Le++)et=D[Le],Ve=Te[Le],!n(et)&&(et[0].x=Ve[0],et[0].y=Ve[1],et[1].x=Ve[2],et[1].y=Ve[3],et[2].x=Ve[4],et[2].y=Ve[5],et[3].x=Ve[6],et[3].y=Ve[7],et[4]=Ve[8]);return p.update(),p},V!==!1&&e.styleTransforms(p,U),p.clone=function(Te,et){var Ve=[],Le=!1;e.loop(p.pointControls,function($e){$e.scaleX+$e.scaleY+$e.regX+$e.regY+$e.rotation!=2&&(Le=!0),Ve.push([$e.scaleX,$e.scaleY,$e.regX,$e.regY,$e.rotation])});var Qe=p.cloneProps(new e.Squiggle(et?p.colorCommand:Te||!e.isPick(G[0])?p.color:G[0],p.thickness,p.getPoints(),o,l,f,h,ue.visible,_,P,p.allowToggle,p.move,N,O,p.circleColor,p.circleBorderColor,p.stickColor,p.stickThickness,L,A,p.editPoints,F,q,V,p.group,ne));return Le&&(e.loop(Qe.pointControls,function($e,nt){$e.scaleX=Ve[nt][0],$e.scaleY=Ve[nt][1],$e.regX=Ve[nt][2],$e.regY=Ve[nt][3],$e.rotation=Ve[nt][4]}),Qe.update()),p.linearGradientParams&&Qe.linearGradient.apply(Qe,p.linearGradientParams),p.radialGradientParams&&Qe.radialGradient.apply(Qe,p.radialGradientParams),Qe},p.shape.on("mousedown",function(Te){d=Te.target.stage,p.editPoints&&(p.controlsVisible?(p.pressX=Te.stageX/e.scaX,p.pressY=Te.stageY/e.scaX):(p.pressX=null,p.pressY=null))}),p.addPointFactor=10,p.addMinDistance=15,p.shape.on("pressup",function(Te){if(p.editPoints&&p.pressX&&Math.abs(p.pressX-Te.stageX/e.scaX)<ve&&Math.abs(p.pressY-Te.stageY/e.scaY)<ve){p.selectPoints&&(p.lastPoints=e.copy(p.points));var et=p.points,Ve=p.globalToLocal(Te.stageX/e.scaX,Te.stageY/e.scaY),Le=e.closestPointAlongCurve(Ve,p.segmentPoints);if(p.editPoints=="anywhere")et.splice(Le+1,0,[Ve.x,Ve.y,0,0,0,0,0,0]),p.points=et,p.changeControl({index:Le+1,type:"mirror",update:!0});else{var Qe=p.pointsAdjusted,$e=p.getSegmentPoint(Qe[Le],Qe[(Le+1)%Qe.length]),nt=e.distanceAlongCurve($e),pt=Math.round(nt/p.addPointFactor),De=p.interpolate(pt,Le,!1,et),at=1e4,yt;if(e.loop(De,function(Ct,lt){var Dt=e.dist(Ct,Ve);Dt<at&&(at=Dt,yt=lt)}),at<p.addMinDistance){var rt=p.segmentRatios,Tt=rt[Le],xt=Le>0?rt[Le-1]:0;p.addPoint(100*(xt+(Tt-xt)*(yt/(pt+1))))}}p.lastSelectedIndex=Le+1,p.lastSelected=p.controls.getChildAt(p.lastSelectedIndex),p.stage.update()}}),p.controls.on("click",function(Te){p.lastSelected=Te.target.parent,p.lastSelectedIndex=p.controls.getChildIndex(Te.target.parent),p.editPoints&&p.selectionManager.shiftKey&&tt(Te)});function tt(Te){if(Te.target.type=="Circle"){var et=p.lastSelectedIndex=p.controls.getChildIndex(Te.target.parent);if(p.controls.numChildren<=2)return;var Ve=p.points;p.selectPoints&&(p.lastPoints=e.copy(Ve)),Ve.splice(et,1),p.points=Ve,p.stage.update(),p.lastSelected=p.lastSelectedIndex=null}}p.controls.hold(tt),j||p.hideControls(),p.dispatchEvent("update")}function Ye(){var de=[],Me=p.selectionManager.currentSet;if(Me&&Me.selections&&Me.selections.length>0)for(var Be=0;Be<Me.selections.length;Be++){var he=p.pointObjects[Me.selections[Be]];if(Me==p.selectedBalls)de.push(he[1]);else if(Me==p.selectedRect1s)de.push(he[2]);else if(Me==p.selectedRect2s)de.push(he[3]);else continue}return de}function se(de){if(de.type=="Circle"){var Me=de,Be=Me.mySet,he=Me.rect1,Ae=Me.rect2;he.x-=Me.x,he.y-=Me.y,Ae.x-=Me.x,Ae.y-=Me.y,Be.x+=Me.x,Be.y+=Me.y,Me.x=0,Me.y=0}}p.selectionManager.on("keydown",function(de){if(p.selectPoints&&p.keyFocus&&de.keyCode>=37&&de.keyCode<=40){var Me=Ye();if(Me.length>0){for(var Be=0;Be<Me.length;Be++){var he=Me[Be];de.keyCode==37?he.x-=p.selectionManager.shiftKey?10:1:de.keyCode==39?he.x+=p.selectionManager.shiftKey?10:1:de.keyCode==38?he.y-=p.selectionManager.shiftKey?10:1:de.keyCode==40&&(he.y+=p.selectionManager.shiftKey?10:1),$(he)}p.drawShape(),p.dispatchEvent("update"),p.stage&&p.stage.update()}}}),p.selectionManager.on("keyup",function(de){if(p.selectPoints&&p.keyFocus&&de.keyCode>=37&&de.keyCode<=40){var Me=Ye();if(Me.length>0)for(var Be=0;Be<Me.length;Be++)se(Me[Be])}}),p.selectionManager.on("undo",function(){if(p.selectPoints&&p.keyFocus&&p.lastPoints){var de=e.copy(p.lastPoints);p.lastPoints=e.copy(p.points),p.points=de,p.stage&&p.stage.update()}}),$=function(de){if(!p.lockControls){var Me;if(de.rect1){Me=de;var Be=Me.x-Me.startX,he=Me.y-Me.startY;Me.rect1.x=Me.rect1.startX+Be,Me.rect1.y=Me.rect1.startY+he,Me.rect2.x=Me.rect2.startX+Be,Me.rect2.y=Me.rect2.startY+he}else{var Ae=de,Ce=Ae.other;Me=Ae.ball;var me=Me.index,Ne=f;if(n(D[me][4])||(Ne=D[me][4]),Ne=="straight"||Ne=="mirror"){var ge=Ae.x-Me.x,Ue=Ae.y-Me.y;if(Ne=="mirror")Ce.x=Me.x-ge,Ce.y=Me.y-Ue;else{var He=Math.atan2(Ue,ge),Oe=-Ce.stickLength*Math.cos(He+Math.PI),fe=-Ce.stickLength*Math.sin(He+Math.PI);Ce.x=Me.x-Oe,Ce.y=Me.y-fe}}}}},Object.defineProperty(p,"move",{get:function(){return T},set:function(de){T!=de&&(T=de,de?be():te())}}),Object.defineProperty(p,"interactive",{get:function(){return F},set:function(de){F=de,j=F,p.allowToggle=F,p.editPoints=F,p.lockControls=!F,p.selectPoints=F,p.move=F;var Me=p.points;p.points=Me}}),Object.defineProperty(p,"allowToggle",{get:function(){return C},set:function(de){C!=de&&(C=de,C?p.move&&be():!j&&p.move&&te())}});function be(){p.move!="always"&&(pe||(pe=!0,Y.drag({onTop:!1}),Ee=Y.on("mousedown",Ee),X=Y.on("pressmove",X),Z=Y.on("pressup",Z)))}function te(de){p.move!="always"&&(!de&&!pe||(pe=!1,Y.noDrag(),Y.off("mousedown",Ee),Y.off("pressmove",X),Y.off("pressup",Z)))}var _e=_;Object.defineProperty(p,"lockControls",{get:function(){return _e},set:function(de){_e=de,de?(p.controls.mouseChildren=!1,p.controls.mouseEnabled=!1):(p.controls.mouseChildren=!0,p.controls.mouseEnabled=!0)}}),p.lockControls=_e,Object.defineProperty(p,"controlsVisible",{get:function(){return j},set:function(de){j=de,de?p.showControls():p.hideControls()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==p},set:function(){e.KEYFOCUS=p}}),e.KEYFOCUS||J();function J(){if(p.selectPoints){p.keyFocus=!0;var de=document.activeElement;de&&de.blur()}}Object.defineProperty(p,"points",{get:function(){for(var de=[],Me,Be,he=0;he<D.length;he++)Be=D[he],Me=[e.decimals(Be[0].x),e.decimals(Be[0].y),e.decimals(Be[1].x),e.decimals(Be[1].y),e.decimals(Be[2].x),e.decimals(Be[2].y),e.decimals(Be[3].x),e.decimals(Be[3].y)],Be[4]&&Be[4]!=="mirror"&&Me.push(Be[4]),de.push(Me);return de},set:function(de){var Me=p.x,Be=p.y,he=p.visible,Ae=[],Ce=!1;e.loop(p.pointControls,function(me){me.scaleX+me.scaleY+me.regX+me.regY+me.rotation!=2&&(Ce=!0),Ae.push([me.scaleX,me.scaleY,me.regX,me.regY,me.rotation])}),p.dispose(!0),i=de,xe(),p.lockControls=_e,p.x=Me,p.y=Be,p.visible=he,Ce&&(e.loop(p.pointControls,function(me,Ne){me.scaleX=Ae[Ne][0],me.scaleY=Ae[Ne][1],me.regX=Ae[Ne][2],me.regY=Ae[Ne][3],me.rotation=Ae[Ne][4]}),p.update())}}),Object.defineProperty(p,"pointsAdjusted",{get:function(){var de=[],Me,Be,he,Ae=p.pointObjects;return e.loop(Ae.length,function(Ce){if(he=Ae[Ce],Be=D[Ce],he[0].rotation==0&&he[0].scaleX==0&&he[0].scaleY==0)Me=[e.decimals(Be[0].x),e.decimals(Be[0].y),e.decimals(Be[1].x),e.decimals(Be[1].y),e.decimals(Be[2].x),e.decimals(Be[2].y),e.decimals(Be[3].x),e.decimals(Be[3].y)];else{var me=he[0].localToLocal(he[2].x,he[2].y,he[0].parent),Ne=he[0].localToLocal(he[3].x,he[3].y,he[0].parent);Me=[e.decimals(Be[0].x),e.decimals(Be[0].y),e.decimals(Be[1].x),e.decimals(Be[1].y),e.decimals(me.x-Be[0].x),e.decimals(me.y-Be[0].y),e.decimals(Ne.x-Be[0].x),e.decimals(Ne.y-Be[0].y)]}Be[4]&&Be[4]!=="mirror"&&Me.push(Be[4]),de.push(Me)}),de},set:function(){Et&&ht("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(p,"pointObjects",{get:function(){return D},set:function(){Et&&ht("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(p,"pointControls",{get:function(){return w},set:function(){Et&&ht("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(p,"pointCircles",{get:function(){return K},set:function(){Et&&ht("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(p,"segmentPoints",{get:function(){var de=[],Me=p.pointsAdjusted;return e.loop(Me.length-1,function(Be){var he=p.getSegmentPoint(Me[Be],Me[Be+1]);de.push(he)}),de},set:function(){Et&&ht("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(p,"segmentRatios",{get:function(){var de=[],Me=0;e.loop(p.segmentPoints,function(Ae){var Ce=e.distanceAlongCurve(Ae);de.push(Ce),Me+=Ce});var Be=[],he=0;return e.loop(de,function(Ae){var Ce=Ae/Me;he+=Ce,Be.push(he)}),Be},set:function(){Et&&ht("Squiggle() - segmentRatios is read only")}}),p.approximateBounds=function(de,Me,Be){n(de)&&(de=80),n(Be)&&(Be=0),de/=p.num;var he=p.interpolate(de,null,!0,null,!0),Ae=e.boundsAroundPoints(he);if(p.setBounds(Ae.x-Be,Ae.y-Be,Ae.width+Be*2,Ae.height+Be*2),Me){if(!p.parent)return Et&&ht("approximateBounds() - add to stage to first to see points"),p;p.hitPathPoints?p.hitPathPoints.removeAllChildren():p.hitPathPoints=new e.Container().addTo(),p.hitPathPoints.top();for(var Ce=0;Ce<he.length;Ce++){var me=he[Ce];me=p.localToGlobal(me.x,me.y),new e.Circle(3).loc(me.x,me.y,p.hitPathPoints)}}return p},p.getPointAngle=function(de){var Me=p.pointObjects[de][0],Be=p.pointObjects[de][2],he=p.pointObjects[de][3],Ae,Ce;return Me==p.stage?(Ae=new e.Point(Be.x,Be.y),Ce=new e.Point(he.x,he.y)):(Ae=Me.localToGlobal(Be.x,Be.y),Ce=Me.localToGlobal(he.x,he.y)),e.angle(Ae.x,Ae.y,Ce.x,Ce.y)},p.getSegmentPoint=function(de,Me){if(!(n(de)||n(Me))){(de[2]!=0||de[3]!=0)&&(de[4]-=de[2],de[5]-=de[3],de[6]-=de[2],de[7]-=de[3],de[0]+=de[2],de[1]+=de[3],de[2]=0,de[3]=0),(Me[2]!=0||Me[3]!=0)&&(Me[4]-=Me[2],Me[5]-=Me[3],Me[6]-=Me[2],Me[7]-=Me[3],Me[0]+=Me[2],Me[1]+=Me[3],Me[2]=0,Me[3]=0);var Be={x:de[0],y:de[1]},he={x:de[0]+de[6],y:de[1]+de[7]},Ae={x:Me[0]+Me[4],y:Me[1]+Me[5]},Ce={x:Me[0],y:Me[1]};return(ue.x!=0||ue.y!=0)&&(Be.x+=ue.x,he.x+=ue.x,Ae.x+=ue.x,Ce.x+=ue.x,Be.y+=ue.y,he.y+=ue.y,Ae.y+=ue.y,Ce.y+=ue.y),[Be,he,Ae,Ce]}},p.getAdjacentSegmentData=function(de){n(de)&&(de=0);var Me=p.pointsAdjusted;return p.num==2?[[p.getSegmentPoint(Me[0],Me[1])],[0]]:de==0?[[p.getSegmentPoint(Me[0],Me[1]),p.getSegmentPoint(Me[1],Me[2])],[0,1]]:de>=p.num-2?[[p.getSegmentPoint(Me[p.num-3],Me[p.num-2]),p.getSegmentPoint(Me[p.num-2],Me[p.num-1])],[p.num-3,p.num-2]]:[[p.getSegmentPoint(Me[de-1],Me[de]),p.getSegmentPoint(Me[de],Me[de+1]),p.getSegmentPoint(Me[de+1],Me[de+2])],[de-1,de,de+1]]},p.getCurvePoint=function(de,Me,Be,he,Ae){(n(de)||isNaN(de))&&(de=0),n(Me)&&(Me=p.segmentRatios),n(Be)&&(Be=p.segmentPoints),n(he)&&(he=!1),n(Ae)&&(Ae=!1);var Ce=Me,me=Be,Ne=e.loop(Ce,function(Xe,Ze){if(Xe>=de)return Ze}),ge=Ne>0?Ce[Ne-1]:0,Ue=Ne>0?Ce[Ne]-Ce[Ne-1]:Ce[Ne];if(Ue){var He=(de-ge)/Ue,Oe=e.pointAlongCurve(me[Ne],He,he,!0),fe=p.localToGlobal(Oe.x,Oe.y);return fe.angle=Oe.angle,fe.z=Ne,n(fe)?void 0:fe}};function ye(de,Me,Be){return{x:de.x+(Me.x-de.x)*Be,y:de.y+(Me.y-de.y)*Be}}function Re(de,Me,Be,he,Ae,Ce,me,Ne){var ge=de.length-1,Ue=0,He=0;he==100&&p.type=="Squiggle"&&(he=99.99),he=(he+1e5)%100,e.loop(Be,function(Fe,we){if(he/100<Fe)return ge=we,He=Fe,!0;Ue=Fe});var Oe=p.segmentPoints[ge],fe=He>0?(he/100-Ue)/(He-Ue):0,Xe=e.pointAlongCurve(Oe,fe,null,Ne),Ze=[Xe.x,Xe.y,0,0];if(!Ce){if(me){p.interpolatedPoints.push({x:Xe.x,y:Xe.y,r:he/100});return}if(Ae!="none"){var Ke=ye(Oe[0],Oe[1],fe),ut=ye(Oe[1],Oe[2],fe),gt=ye(Oe[2],Oe[3],fe),We=ye(Ke,ut,fe),it=ye(ut,gt,fe);Ze[4]=We.x-Xe.x,Ze[5]=We.y-Xe.y,Ze[6]=it.x-Xe.x,Ze[7]=it.y-Xe.y;var ct=p.localToLocal(Ke.x,Ke.y,Me[ge]);de[ge][6]=ct.x,de[ge][7]=ct.y;var Pe=p.localToLocal(gt.x,gt.y,Me[(ge+1)%de.length]);de[(ge+1)%de.length][4]=Pe.x,de[(ge+1)%de.length][5]=Pe.y}Ae&&(Ze[8]=Ae),de.splice(ge+1,0,Ze)}}this.addPoint=function(de,Me){n(de)&&(de=100);var Be=p.points,he=p.segmentRatios,Ae=p.pointControls;return Me=Me||ce,Re(Be,Ae,he,de,Me),p.points=Be,p.num=Be.length,p},this.removePoint=function(de){if(!(n(de)||de<0)){var Me=e.copy(p.points);return Me.splice(de,1),p.points=Me,p.stage&&p.stage.update(),p}},this.addPoints=function(de,Me,Be,he,Ae,Ce,me){n(Ce)&&(Ce=e.copy(p.points));var Ne=e.copy(p.segmentRatios),ge=0;if(Ae&&(p.interpolatedPoints=[]),he)var Ue=Ne.length*de;return e.loop(Ne,function(He,Oe){Ae&&Re(Ce,p.pointControls,p.segmentRatios,ge*100,Me,!n(Be)&&Oe!=Be,Ae,me);var fe=he?Math.round(Ue*(He-ge)):de,Xe=1/(fe+1);e.loop(fe,function(Ze){var Ke=ge+(He-ge)*Xe*(Ze+1);Re(Ce,p.pointControls,p.segmentRatios,Ke*100,Me,!n(Be)&&Oe!=Be,Ae,me),!Ae&&de>0&&(p.points=Ce)}),ge=He}),Ae&&p.type=="Squiggle"&&Re(Ce,p.pointControls,p.segmentRatios,100,Me,!1,Ae,me),p.stage&&p.stage.update(),p.num=Ce.length,p},this.interpolate=function(de,Me,Be,he,Ae){return n(de)&&(de=1),p.addPoints(de,"none",Me,Be,!0,he,Ae),p.interpolatedPoints},ae&&p.approximateBounds(),this.dispose=function(de,Me,Be){if(p.shape){if(e.gD(p),d&&p.toggleStageEvent&&d.off("stagemousedown",p.toggleStageEvent),p.controls.noDrag(),p.controls.removeAllEventListeners(),p.selectPoints&&p.selectionManager&&p.selectionManager.dispose(),p.selectedBalls=null,p.selectedRect1s=null,p.selectedRect2s=null,p.selectionManager=null,p.off("mousedown",p.toggleEvent),p.off("click",p.clickEvent),de){p.shape.dispose(),p.shape=null;for(var he=0;he<p.points.length;he++)p.pointObjects[he][0].removeAllEventListeners(),p.pointObjects[he][1].removeAllEventListeners(),p.pointObjects[he][2].removeAllEventListeners(),p.pointObjects[he][3].removeAllEventListeners();p.controls.removeFrom(p),p.sticks.dispose(),D=null,K=null}else p.removeAllEventListeners(),D=null,K=null,Be||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Squiggle,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Blob=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R){var Q="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",U;if(U=mt(e.Blob,arguments,Q,this))return U;qe("53.5"),this.group=ne;var ee=I===!1?{}:e.getStyle("Blob",this.group,R);n(l)&&(l=ee.radius!=null?ee.radius:100),this.zimCustomShape_constructor(-l,-l,l*2,l*2,!1),this.type="Blob",this.mouseChildren=!0,n(O)&&(O=ee.dashed!=null?ee.dashed:!1),n(r)&&(r=ee.borderColor!=null?ee.borderColor:null),n(i)&&(i=ee.borderWidth!=null?ee.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=ee.color!=null?ee.color:i>0?"rgba(0,0,0,0)":e.green),t.style&&(this.colorCommand=t,t=e.black),r&&r.style&&(this.borderColorCommand=r,r=e.black),n(o)&&(o=ee.points!=null?ee.points:4);var ae=typeof o!="number",ie=typeof o=="number"?o:o.length,ce=f;n(f)&&(f=ee.controlLength!=null?ee.controlLength:l*4/ie),n(h)&&(h=ee.controlType!=null?ee.controlType:null);var j=h;n(h)&&(h="straight"),n(g)&&(g=ee.lockControlType!=null?ee.lockControlType:!1),n(q)&&(q=ee.interactive!=null?ee.interactive:!0),n(_)&&(_=ee.showControls!=null?ee.showControls:q);var G=_;n(P)&&(P=ee.lockControls!=null?ee.lockControls:!q),n(C)&&(C=ee.handleSize!=null?ee.handleSize:e.mobile()?20:10),n(T)&&(T=ee.allowToggle!=null?ee.allowToggle:q),n(N)&&(N=ee.move!=null?ee.move:q),n(k)&&(k=ee.circleColor!=null?ee.circleColor:e.light),n(x)&&(x=ee.circleBorderColor!=null?ee.circleBorderColor:e.dark),n(E)&&(E=ee.stickColor!=null?ee.stickColor:e.darker),n(L)&&(L=ee.stickThickness!=null?ee.stickThickness:1),n(A)&&(A=ee.selectColor!=null?ee.selectColor:e.white),n(b)&&(b=ee.selectPoints!=null?ee.selectPoints:q),this.circleColor=k,this.circleBorderColor=x,this.stickColor=E,this.stickThickness=L,n(S)&&(S=ee.onTop!=null?ee.onTop:!0),n(F)&&(F=ee.editPoints!=null?ee.editPoints:q),n(V)&&(V=ee.strokeObj!=null?ee.strokeObj:{});var y=p(t,r);this.veeObj={color:y[0],borderColor:y[1]};function p(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r);var d=this;this.interactive=q,this.num=ie,this.editPoints=F,this.selectPoints=b,this.lockControls=P,this.onTop=S,this.move=N,this.allowToggle=T,this.lockControlType=g,this.types=["mirror","straight","free","none"];var D,K,w;d._color=t,d._borderColor=r,d._borderWidth=i,d._dashed=O,d._dashed&&!Array.isArray(d._dashed)&&(d._dashed=[10,10]);var Y,Ee,X,Z,pe,ve=d.move,$=2,ue,xe;o=Ye(o);function Ye(he){(he=="circle"||he=="rectangle"||he=="triangle")&&(he=="circle"&&(he=new e.Circle(l)),he=="rectangle"&&(he=new e.Rectangle(l*2,l*2).centerReg({add:!1})),he=="triangle"&&(he=new e.Triangle(l*2,l*2,l*2)));var Ae;if(he.type=="Circle"||he.type=="Rectangle"||he.type=="Triangle"||he.type=="Flare"){var Ce=he.getBounds();if(he.type=="Circle")Ae=4,ce=f=l*2*.5523;else if(he.type=="Rectangle")he.centerReg({add:!1}),Ae=[[Ce.x-Ce.width/2,Ce.y-Ce.height/2],[Ce.x+Ce.width/2,Ce.y-Ce.height/2],[Ce.x+Ce.width/2,Ce.y+Ce.height/2],[Ce.x-Ce.width/2,Ce.y+Ce.height/2]],d.setBounds(Ce.x-Ce.width/2,Ce.y-Ce.height/2,Ce.width,Ce.height),d.regX=he.regX-Ce.width/2,d.regY=he.regY-Ce.height/2;else if(he.type=="Triangle")Ae=[[he.three.x-he.width/2,he.three.y+he.height/2+he.adjusted],[he.two.x-he.width/2,he.two.y+he.height/2+he.adjusted],[he.one.x-he.width/2,he.one.y+he.height/2+he.adjusted]],d.setBounds(Ce.x-Ce.width/2,Ce.y-Ce.height/2,Ce.width,Ce.height);else if(he.type=="Flare"){var me=Ce.width/2+Ce.x,Ne=Ce.height/2+Ce.y;Ae=[];var ge=e.copy(he.points),Ue={x:null,y:null};e.loop(ge,(He,Oe)=>{var fe=Math.round(He.x),Xe=Math.round(He.y);fe==Ue.x&&Xe==Ue.y||(Ue={x:fe,y:Xe},Ae.push([fe-me,He.y-Ne]))}),d.setBounds(-he.width/2,-he.height/2,he.width,he.height)}return Ae}else return he}if(typeof o=="string"){var se=new e.SVGContainer;o=se.processPath(o),o[0][0]==o[o.length-1][0]&&o[0][1]==o[o.length-1][1]&&(o[0][4]=o[o.length-1][4],o[0][5]=o[o.length-1][5],o.pop())}j&&typeof o!="number"&&e.loop(o,function(he){he[8]=j,j=="none"&&(he[4]=he[5]=he[6]=he[7]=0)}),be();function be(){if(xe&&xe.removeAllEventListeners(),d.selectPoints?(d.selectedBalls=new e.SelectionSet,d.selectedRect1s=new e.SelectionSet,d.selectedRect2s=new e.SelectionSet,d.selectionManager=new e.SelectionManager([d.selectedBalls,d.selectedRect1s,d.selectedRect2s],"ctrl",!1)):d.selectionManager=new e.SelectionManager(null,"ctrl"),ie=typeof o=="number"?o:o.length,ie<=0)return;n(ce)&&(f=l*4/ie),Y=d.shape=new e.Shape({style:!1}).addTo(d);var he=d.sticks=new e.Shape({style:!1}).addTo(d);C<=0&&he.removeFrom();var Ae=Y.graphics;Ae.c();var Ce=he.graphics;Ce.c();var me=C/10*8,Ne=C,ge=e.mobile();xe=d.controls=new e.Container({style:!1}).addTo(d),d.interactive&&xe.drag({onTop:!ge}),D=[],w=[],K=[];var Ue,He,Oe,fe,Xe,Ze,Ke,ut,gt;for(Ue=0;Ue<ie;Ue++){if(fe=new e.Container({style:!1}).addTo(xe),fe.num=Ue,typeof o=="number"){var We=e.Pick.choose(f);Oe=new e.Container(We,l,null,null,!1).reg(We/2,l).addTo(d),Oe.rotation=Ue/ie*360,Ke=new e.Circle(me,d.selectPoints&&d.selectedBalls.isSelected(Ue)?A:d.circleColor,d.circleBorderColor,2,null,null,null,null,!1).centerReg(Oe).loc({x:We/2,y:0}),Xe=new e.Rectangle(Ne,Ne,d.selectPoints&&d.selectedRect1s.isSelected(Ue)?A:st(h),C==0?null:e.dark,C==0?null:2,null,null,null,null,!1).centerReg(Oe).loc({x:0,y:0}),Ze=new e.Rectangle(Ne,Ne,d.selectPoints&&d.selectedRect2s.isSelected(Ue)?A:st(h),C==0?null:e.dark,C==0?null:2,null,null,null,null,!1).centerReg(Oe).loc({x:We,y:0});var it=Oe.localToLocal(Ke.x,Ke.y,xe);Ke.x=it.x,Ke.y=it.y,Ke.addTo(fe,null,!1);var ct=Oe.localToLocal(Xe.x,Xe.y,xe);Xe.x=h=="none"?0:ct.x-Ke.x,Xe.y=h=="none"?0:ct.y-Ke.y,Xe.addTo(fe,null,!1);var Pe=Oe.localToLocal(Ze.x,Ze.y,xe);Ze.x=h=="none"?0:Pe.x-Ke.x,Ze.y=h=="none"?0:Pe.y-Ke.y,Ze.addTo(fe,null,!1),fe.x=Ke.x,fe.y=Ke.y,Ke.x=0,Ke.y=0,h=="none"&&Ke.addTo(fe,null,!1)}else gt=o[Ue],ut=gt[8]?gt[8]:h,fe.loc({x:gt[0],y:gt[1]}),Ke=new e.Circle(me,d.circleColor,d.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(fe).loc({x:gt[2],y:gt[3]}),Xe=new e.Rectangle(Ne,Ne,st(ut),C==0?null:e.dark,C==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(fe,0).loc({x:gt[4],y:gt[5]}),Ze=new e.Rectangle(Ne,Ne,st(ut),C==0?null:e.dark,C==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(fe,0).loc({x:gt[6],y:gt[7]});Ke.mySet=fe,Ke.rect1=Xe,Ke.rect2=Ze,Ke.index=Ue,C==0&&(Ke.expand(10),Xe.expand(10),Ze.expand(10)),ge?Ke.on("mousedown",we):Ke.on("dblclick",je),Xe.ball=Ke,Xe.other=Ze,Ze.ball=Ke,Ze.other=Xe,ge&&(Ke.expand(),Xe.expand(),Ze.expand()),He=[fe,Ke,Xe,Ze,gt?gt[8]:h],D.push(He),K.push(Ke),w.push(fe)}var Fe=!1;function we(Ve){Fe?(Ve.preventDefault(),je(Ve)):(Fe=!0,setTimeout(function(){Fe=!1},300))}function je(Ve){if(!d.lockControlType){var Le=Ve.target,Qe=D[Le.index][4]?D[Le.index][4]:h;Math.abs(Le.rect1.x)<=2&&Math.abs(Le.rect1.y)<=2&&Math.abs(Le.rect2.x)<=2&&Math.abs(Le.rect2.y)<=2&&(Qe="none"),Qe=="none"&&Le.parent.addChildAt(Le,0),Qe=d.types[(d.types.indexOf(Qe)+(d.shiftKey?-1:1)+d.types.length)%d.types.length],Qe=="none"&&(Le.rect1.x=Le.rect1.y=Le.rect2.x=Le.rect2.y=0,Le.parent.addChild(Le),Ve.stopImmediatePropagation()),D[Le.index][4]=Qe,Le.rect1.color=st(Qe),Le.rect2.color=st(Qe),d.drawShape();var $e=new ze.Event("change");$e.controlType="bezierSwitch",d.dispatchEvent($e),Le.stage.update()}}function st(Ve){var Le={mirror:"#993399",free:"#ebcb35",none:"#50c4b7"};return Le[Ve]?Le[Ve]:"#e472c4"}d.drawShape=function(){var Ve,Le,Qe,$e,nt,pt,De,at,yt,rt,Tt,xt,Ct;Ae.c(),d.colorCommand||(d.colorCommand=Ae.f(d._color).command,t&&t.type&&d.specialColor(d.colorCommand,t,d)),(n(d._borderWidth)||d._borderWidth>0)&&(!n(d._borderColor)||!n(d._borderWidth))&&(n(d._borderColor)&&(d._borderColor=e.black),d.borderColorCommand||(d.borderColorCommand=Ae.s(d._borderColor).command,d._borderColor&&d._borderColor.type&&d.specialColor(d.borderColorCommand,d._borderColor,d)),d.borderWidthCommand||(d.borderWidthCommand=Ae.ss(d._borderWidth,V.caps,V.joints,V.miterLimit,V.ignoreScale).command),d._dashed&&(d.borderDashedCommand||(d.borderDashedCommand=Ae.sd(Array.isArray(d._dashed)?d._dashed:[10,10],d._dashedOffset).command))),Qe=D[0][0],De=Qe.localToLocal(D[0][1].x,D[0][1].y,Y),Ae.mt(De.x,De.y),Ce.c().s(d.stickColor).ss(d.stickThickness);for(var lt=0;lt<D.length;lt++)Ve=lt,Le=(lt+1)%D.length,Qe=D[Ve][0],Ke=D[Ve][1],$e=D[Ve][2],nt=D[Ve][3],pt=D[Le][0],at=D[Le][1],yt=D[Le][2],Tt=Qe.localToLocal(nt.x,nt.y,Y),xt=pt.localToLocal(yt.x,yt.y,Y),Ct=pt.localToLocal(at.x,at.y,Y),Ae.bt(Tt.x,Tt.y,xt.x,xt.y,Ct.x,Ct.y),De=Qe.localToLocal(Ke.x,Ke.y,Y),rt=Qe.localToLocal($e.x,$e.y,Y),Ce.mt(De.x,De.y).lt(rt.x,rt.y),Ce.mt(De.x,De.y).lt(Tt.x,Tt.y);Ae.cp(),Ae.append(d.colorCommand),d._dashed&&Ae.append(d.borderDashedCommand),d.borderWidthCommand&&Ae.append(d.borderWidthCommand),d.borderColorCommand&&Ae.append(d.borderColorCommand)},d.drawShape(),t.type&&(d.color=t);var Je;xe.on("mousedown",function(Ve){if(!d.lockControls){d.selectPoints&&(d.keyFocus=!0),Je={x:Ve.target.x,y:Ve.target.y};var Le;if(Ve.target.rect1)Le=Ve.target,Le.startX=Le.x,Le.startY=Le.y,Le.rect1.startX=Le.rect1.x,Le.rect1.startY=Le.rect1.y,Le.rect2.startX=Le.rect2.x,Le.rect2.startY=Le.rect2.y;else{var Qe=Ve.target;Qe.startX=Qe.x,Qe.startY=Qe.y,Le=Qe.ball;var $e=Le.index,nt=h;if(n(D[$e][4])||(nt=D[$e][4]),nt=="straight"){var pt=Qe.other,De=pt.x-Le.x,at=pt.y-Le.y;pt.stickLength=Math.sqrt(Math.pow(De,2)+Math.pow(at,2))}}if(d.selectPoints){var yt=d.selectionManager.currentSet;if(yt&&yt.selections&&yt.selections.length>0)for(var rt=0;rt<yt.selections.length;rt++){var Tt=d.pointObjects[yt.selections[rt]];Tt[1].startX=Tt[1].x,Tt[1].startY=Tt[1].y,Tt[2].startX=Tt[2].x,Tt[2].startY=Tt[2].y,Tt[3].startX=Tt[3].x,Tt[3].startY=Tt[3].y}}}}),d.selectPoints&&xe.tap(function(Ve){var Le;if(Ve.target.rect1)Le=Ve.target,d.selectedBalls.toggle(Le.parent.num);else{var Qe=Ve.target;Qe.color="white",Le=Qe.ball,Le.rect1==Qe?d.selectedRect1s.toggle(Le.parent.num):d.selectedRect2s.toggle(Le.parent.num)}for(var $e=0;$e<d.pointObjects.length;$e++){var nt=d.pointObjects[$e];nt[1].color=d.selectedBalls.isSelected($e)?A:d.circleColor,nt[2].color=d.selectedRect1s.isSelected($e)?A:st(nt[4]),nt[3].color=d.selectedRect2s.isSelected($e)?A:st(nt[4])}Ve.target.stage.update()}),xe.on("pressmove",function(Ve){if(!d.lockControls)if(d.selectPoints){var Le=te();if(Le.indexOf(Ve.target)==-1)ue(Ve.target),d.drawShape();else if(Le.length>0){for(var Qe=Ve.target.x-Ve.target.startX,$e=Ve.target.y-Ve.target.startY,nt=0;nt<Le.length;nt++){var pt=Le[nt];pt.x=pt.startX+Qe,pt.y=pt.startY+$e,ue(pt)}d.drawShape()}}else ue(Ve.target),d.drawShape()}),xe.on("pressup",function(Ve){if(!d.lockControls){var Le=Ve.target.x!=Je.x||Ve.target.y!=Je.y,Qe=new ze.Event("change");Ve.target.rect1?(Qe.controlType="bezierPoint",tt(Ve.target)):Qe.controlType="bezierHandle",Le&&d.dispatchEvent(Qe)}});function tt(Ve){if(d.selectPoints){var Le=te();if(Le&&Le.indexOf(Ve)==-1)_e(Ve);else if(Le&&Le.length>0)for(var Qe=0;Qe<Le.length;Qe++)_e(Le[Qe]);else _e(Ve)}else _e(Ve)}d.changeControl=function(Ve,Le,Qe,$e,nt,pt,De,at,yt){var rt="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",Tt;if(Tt=mt(d.changeControl,arguments,rt))return Tt;if(n(Ve)){for(var xt=0;xt<D.length;xt++)d.changeControl(xt,Le,Qe,$e,nt,pt,De,at);return d}var Ct=D[Ve];return Ct[4]=Le,Le=="none"?(n(De)||(Ct[1].x=De),n(at)||(Ct[1].y=at),Ct[2].x=Ct[1].x,Ct[2].y=Ct[1].y,Ct[3].x=Ct[1].x,Ct[3].y=Ct[1].y,Ct[1].parent.addChild(Ct[1])):(n(De)||(Ct[1].x=De),n(at)||(Ct[1].y=at),n(Qe)||(Ct[2].x=Qe),n($e)||(Ct[2].y=$e),n(nt)||(Ct[3].x=nt),n(pt)||(Ct[3].y=pt),Ct[1].parent.addChildAt(Ct[1],0)),Ct[2].color=st(Le),Ct[3].color=st(Le),yt&&(d.update(),d.stage&&d.stage.update()),d},d.transformPoints=function(Ve,Le,Qe,$e,nt){return n(nt)&&(nt=!0),d.points=e.transformPoints(d.points,Ve,Le,Qe,$e),nt&&d.approximateBounds(),d},d.traverse=function(Ve,Le,Qe,$e,nt){var pt=e.copy(d.segmentRatios);pt.unshift(0),n(Qe)&&(Qe=Le+1);var De=pt[Le]*100,at=pt[Qe]*100,yt;!nt&&De>at?yt=100-De+at:!nt&&De<at?yt=at-De:nt&&De>at?yt=-(De-at):nt&&De<at&&(yt=-(100-at+De));var rt=new ze.Event("traversed");return rt.obj=Ve,Ve.animate({ease:"linear",props:{path:d,startPercent:De,percent:yt},time:$e,call:function(){d.dispatchEvent(rt)}}),d},d.reversePoints=function(Ve){return n(Ve)&&(Ve=!0),o=e.copy(d.points),o.reverse(),Ve&&o.unshift(o.pop()),e.loop(o,function(Le){var Qe=Le[6];Le[6]=Le[4],Le[4]=Qe;var $e=Le[7];Le[7]=Le[5],Le[5]=$e}),d.points=o,d.update(),d},d.splitPoints=function(Ve){var Le=e.copy(d.points);if(!(Ve<1||Ve>Le.length-1)){var Qe=e.copy(Le.slice(0,Ve+1)),$e=e.copy(Le.slice(Ve));e.trimPointEnds(Qe),e.trimPointEnds($e);var nt=d.clone();return d.points=Qe,d.update(),nt.points=$e,d.parent&&nt.addTo(d.parent),nt}},d.makeSquiggle=function(Ve){var Le=e.copy(d.points);n(Ve)&&(Ve=0),Ve=(Ve+Le.length*1e3)%Le.length;var Qe=e.copy(Le.slice(Ve)),$e=e.copy(Le.slice(0,Ve+1));Le=Qe.concat($e),e.trimPointEnds(Le);var nt=new e.Squiggle({points:Le,color:d.borderColor,thickness:d.borderWidth,showControls:d.controlsVisible,interactive:d.interactive,onTop:d.onTop,dashed:d.dashed,stickColor:d.stickColor,stickThickness:d.stickThickness});return nt},d.update=function(Ve){return Ve?d.points=d.pointsAdjusted:d.drawShape(),d.zimAnimateChanged=!0,d},d.move&&d.interactive&&Y.drag({onTop:!1}),Ee=Y.on("mousedown",function(Ve){pe=Ve.target.stage,Je={x:Y.x,y:Y.y},d.selectPoints&&(d.keyFocus=!0),Te()}),X=Y.on("pressmove",function(){xe.x=Y.x,xe.y=Y.y,he.x=Y.x,he.y=Y.y}),Z=Y.on("pressup",function(){var Ve=Y.x!=Je.x||Y.y!=Je.y,Le=Y.localToLocal(d.regX,d.regY,d.parent);if(d.x=Le.x,d.y=Le.y,xe.x=xe.y=he.x=he.y=Y.x=Y.y=0,Ve){var Qe=new ze.Event("change");Qe.controlType="move",d.dispatchEvent(Qe)}pe.update()}),N||ye(!0);function Te(){if(d.onTop){var Ve=d.parent.numChildren-1;d.parent.getChildAt(Ve).type=="Keyboard"&&Ve--,d.parent.setChildIndex(d,Ve)}}d.toggleEvent=d.on("mousedown",function(){d.allowToggle&&(G||(d.showControls(),d.dispatchEvent("controlsshow")))}),d.added(function(){pe=d.stage,d.toggleStageEvent&&d.stage.off("stagemousedown",d.toggleStageEvent),d.toggleStageEvent=d.stage.on("stagemousedown",function(Ve){!d.allowToggle||!d.stage||G&&!d.hitTestPoint(Ve.stageX/e.scaX,Ve.stageY/e.scaY,!1)&&(d.hideControls(),d.dispatchEvent("controlshide"))})}),d.clickEvent=d.on("click",function(){d.ctrlKey&&setTimeout(function(){d.clone(!0).addTo(d.stage).mov(100),d.allowToggle&&(d.hideControls(),d.dispatchEvent("controlshide"));var Ve=new ze.Event("change");Ve.controlType="move",d.dispatchEvent(Ve),d.stage.update()},50)}),d.hideControls=function(){return d.toggled=!1,xe.visible=!1,he.visible=!1,G=!1,d.stage&&d.stage.update(),!d.allowToggle&&d.move&&ye(),d},G||d.hideControls(),d.showControls=function(){return d.toggled=!0,xe.visible=!0,he.visible=!0,G=!0,xe.x=Y.x,xe.y=Y.y,he.x=Y.x,he.y=Y.y,d.addChildAt(Y,0),d.move&&!d.allowToggle&&J(),d.stage&&d.stage.update(),d},d.toggle=function(Ve){return Ve===!0?d.showControls():Ve===!1||G?d.hideControls():d.showControls(),d},d.recordData=function(Ve){n(Ve)&&(Ve=!1);var Le={type:"Blob",index:d.parent?d.parent.getChildIndex(d):-1,x:d.x,y:d.y,points:d.getPoints(),color:d.color,borderColor:d.borderColor,borderWidth:d.borderWidth,move:d.move,allowToggle:d.allowToggle,controlsVisible:G};return Ve?JSON.stringify(Le):Le},d.setData=function(Ve,Le){if(!n(Ve)){if(Le)try{Ve=JSON.parse(Ve)}catch(pt){return}var Qe=Ve.index;n(Qe)&&(Qe=-1),delete Ve.index;var $e=Ve.points;n($e)||d.setPoints($e),delete Ve.points,this.num=$e.length;for(var nt in Ve)d[nt]=Ve[nt];return d.parent&&d.parent.setChildIndex(d,Qe),d}},d.getPoints=function(Ve){n(Ve)&&(Ve=!1);var Le=d.points;if(Ve){if(!Qe){var Qe=d.pane=new e.Pane({displayClose:!1,container:d.stage,width:Math.min(500,d.stage.width-20),height:Math.min(500,d.stage.height-20),draggable:!0}),$e=d.textArea=new e.TextArea(Math.min(400,d.stage.width-70),Math.min(400,d.stage.height-70));$e.centerReg(Qe)}Qe.show(),$e.text=JSON.stringify(Le)}return Le},d.recordPoints=d.getPoints,d.setPoints=function(Ve){for(var Le,Qe,$e=0;$e<Ve.length;$e++)Le=D[$e],Qe=Ve[$e],!n(Le)&&(Le[0].x=Qe[0],Le[0].y=Qe[1],Le[1].x=Qe[2],Le[1].y=Qe[3],Le[2].x=Qe[4],Le[2].y=Qe[5],Le[3].x=Qe[6],Le[3].y=Qe[7],Le[4]=Qe[8],Le[2].color=st(Le[4]),Le[3].color=st(Le[4]));return d.update(),d},I!==!1&&e.styleTransforms(d,ee),d.clone=function(Ve,Le){var Qe=[],$e=!1;e.loop(d.pointControls,function(pt){pt.scaleX+pt.scaleY+pt.regX+pt.regY+pt.rotation!=2&&($e=!0),Qe.push([pt.scaleX,pt.scaleY,pt.regX,pt.regY,pt.rotation])});var nt=d.cloneProps(new e.Blob(Le?d.colorCommand:Ve||!e.isPick(y[0])?d.color:y[0],Le?d.borderColorCommand:Ve||!e.isPick(y[1])?d.borderColor:y[1],d.borderWidth,d.getPoints(),l,f,h,g,xe.visible,P,C,d.allowToggle,d.move,O,S,d.circleColor,d.circleBorderColor,d.stickColor,d.stickThickness,A,b,d.editPoints,q,V,I,d.group,R));return $e&&(e.loop(nt.pointControls,function(pt,De){pt.scaleX=Qe[De][0],pt.scaleY=Qe[De][1],pt.regX=Qe[De][2],pt.regY=Qe[De][3],pt.rotation=Qe[De][4]}),nt.update()),d.linearGradientParams&&nt.linearGradient.apply(nt,d.linearGradientParams),d.radialGradientParams&&nt.radialGradient.apply(nt,d.radialGradientParams),nt},d.shapeMousedownEvent=d.shape.on("mousedown",function(Ve){pe=Ve.target.stage,d.editPoints&&(d.controlsVisible?(d.pressX=Ve.stageX/e.scaX,d.pressY=Ve.stageY/e.scaY):(d.pressX=null,d.pressY=null))}),d.addPointFactor=10,d.addMinDistance=15,d.shapePressupEvent=d.shape.on("pressup",function(Ve){if(d.editPoints&&d.pressX&&Math.abs(d.pressX-Ve.stageX/e.scaX)<$&&Math.abs(d.pressY-Ve.stageY/e.scaY)<$){d.selectPoints&&(d.lastPoints=e.copy(d.points));var Le=d.points,Qe=d.globalToLocal(Ve.stageX/e.scaX,Ve.stageY/e.scaY),$e=e.closestPointAlongCurve(Qe,d.segmentPoints);if(d.editPoints=="anywhere")Le.splice($e+1,0,[Qe.x,Qe.y,0,0,0,0,0,0]),d.points=Le,d.changeControl({index:$e+1,type:"mirror",update:!0});else{var nt=d.pointsAdjusted,pt=d.getSegmentPoint(nt[$e],nt[($e+1)%nt.length]),De=e.distanceAlongCurve(pt),at=Math.round(De/d.addPointFactor),yt=d.interpolate(at,$e,!1,Le),rt=1e4,Tt;if(e.loop(yt,function(Dt,Mt){if(Mt!=0){var St=e.dist(Dt,Qe);St<rt&&(rt=St,Tt=Mt)}}),rt<d.addMinDistance){var xt=d.segmentRatios,Ct=xt[$e],lt=$e>0?xt[$e-1]:0;d.addPoint(100*(lt+(Ct-lt)*(Tt/(at+1))))}}d.lastSelectedIndex=$e+1,d.lastSelected=d.controls.getChildAt(d.lastSelectedIndex),d.stage.update()}}),d.controlsClickEvent=d.controls.on("click",function(Ve){d.lastSelected=Ve.target.parent,d.lastSelectedIndex=d.controls.getChildIndex(Ve.target.parent),d.editPoints&&d.selectionManager.shiftKey&&et(Ve)});function et(Ve){if(Ve.target.type=="Circle"){var Le=d.lastSelectedIndex=d.controls.getChildIndex(Ve.target.parent);if(d.controls.numChildren<=2)return;var Qe=d.points;d.selectPoints&&(d.lastPoints=e.copy(Qe)),Qe.splice(Le,1),d.points=Qe,d.stage.update(),d.lastSelected=d.lastSelectedIndex=null}}d.controls.hold(et),G||d.hideControls(),d.dispatchEvent("update")}function te(){var he=[],Ae=d.selectionManager.currentSet;if(Ae&&Ae.selections&&Ae.selections.length>0)for(var Ce=0;Ce<Ae.selections.length;Ce++){var me=d.pointObjects[Ae.selections[Ce]];if(Ae==d.selectedBalls)he.push(me[1]);else if(Ae==d.selectedRect1s)he.push(me[2]);else if(Ae==d.selectedRect2s)he.push(me[3]);else continue}return he}function _e(he){if(d.selectPoints&&he.type=="Circle"){var Ae=he,Ce=Ae.mySet,me=Ae.rect1,Ne=Ae.rect2;me.x-=Ae.x,me.y-=Ae.y,Ne.x-=Ae.x,Ne.y-=Ae.y,Ce.x+=Ae.x,Ce.y+=Ae.y,Ae.x=0,Ae.y=0}}d.selectionManager.on("keydown",function(he){if(d.selectPoints&&d.keyFocus&&he.keyCode>=37&&he.keyCode<=40){var Ae=te();if(Ae.length>0){for(var Ce=0;Ce<Ae.length;Ce++){var me=Ae[Ce];he.keyCode==37?me.x-=d.selectionManager.shiftKey?10:1:he.keyCode==39?me.x+=d.selectionManager.shiftKey?10:1:he.keyCode==38?me.y-=d.selectionManager.shiftKey?10:1:he.keyCode==40&&(me.y+=d.selectionManager.shiftKey?10:1),ue(me)}d.drawShape(),d.dispatchEvent("update"),d.stage&&d.stage.update()}}}),d.selectionManager.on("keyup",function(he){if(d.selectPoints&&d.keyFocus&&he.keyCode>=37&&he.keyCode<=40){var Ae=te();if(Ae.length>0)for(var Ce=0;Ce<Ae.length;Ce++)_e(Ae[Ce])}}),d.selectionManager.on("undo",function(){if(d.selectPoints&&d.keyFocus&&d.lastPoints){var he=e.copy(d.lastPoints);d.lastPoints=e.copy(d.points),d.points=he,d.stage&&d.stage.update()}}),ue=function(he){if(!d.lockControls){var Ae;if(he.rect1){Ae=he;var Ce=Ae.x-Ae.startX,me=Ae.y-Ae.startY;Ae.rect1.x=Ae.rect1.startX+Ce,Ae.rect1.y=Ae.rect1.startY+me,Ae.rect2.x=Ae.rect2.startX+Ce,Ae.rect2.y=Ae.rect2.startY+me}else{var Ne=he,ge=Ne.other;Ae=Ne.ball;var Ue=Ae.index,He=h;if(n(D[Ue][4])||(He=D[Ue][4]),He=="straight"||He=="mirror"){var Oe=Ne.x-Ae.x,fe=Ne.y-Ae.y;if(He=="mirror")ge.x=Ae.x-Oe,ge.y=Ae.y-fe;else{var Xe=Math.atan2(fe,Oe),Ze=-ge.stickLength*Math.cos(Xe+Math.PI),Ke=-ge.stickLength*Math.sin(Xe+Math.PI);ge.x=Ae.x-Ze,ge.y=Ae.y-Ke}}}}},Object.defineProperty(d,"move",{get:function(){return N},set:function(he){N!=he&&(N=he,he?J():ye())}}),Object.defineProperty(d,"interactive",{get:function(){return q},set:function(he){q=he,G=q,d.allowToggle=q,d.editPoints=q,d.lockControls=!q,d.selectPoints=q,d.move=q;var Ae=d.points;d.points=Ae}}),Object.defineProperty(d,"allowToggle",{get:function(){return T},set:function(he){T!=he&&(T=he,T?d.move&&J():!G&&d.move&&ye())}});function J(){d.move!="always"&&(ve||(ve=!0,Y.drag({onTop:!1}),Ee=Y.on("mousedown",Ee),X=Y.on("pressmove",X),Z=Y.on("pressup",Z)))}function ye(he){d.move!="always"&&(!he&&!ve||(ve=!1,Y.noDrag(),Y.off("mousedown",Ee),Y.off("pressmove",X),Y.off("pressup",Z)))}Object.defineProperty(d,"controlsVisible",{get:function(){return G},set:function(he){G=he,he?d.showControls():d.hideControls()}});var Re=P;Object.defineProperty(d,"lockControls",{get:function(){return Re},set:function(he){Re=he,he?(d.controls.mouseChildren=!1,d.controls.mouseEnabled=!1):(d.controls.mouseChildren=!0,d.controls.mouseEnabled=!0)}}),d.lockControls=Re,le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==d},set:function(){e.KEYFOCUS=d}}),d.selectPoints&&!e.KEYFOCUS&&de();function de(){d.keyFocus=!0;var he=document.activeElement;he&&he.blur()}Object.defineProperty(d,"points",{get:function(){for(var he=[],Ae,Ce,me=0;me<D.length;me++)Ce=D[me],Ae=[e.decimals(Ce[0].x),e.decimals(Ce[0].y),e.decimals(Ce[1].x),e.decimals(Ce[1].y),e.decimals(Ce[2].x),e.decimals(Ce[2].y),e.decimals(Ce[3].x),e.decimals(Ce[3].y)],Ce[4]&&Ce[4]!=="straight"&&Ae.push(Ce[4]),he.push(Ae);return he},set:function(he){var Ae=d.x,Ce=d.y,me=d.visible,Ne=[],ge=!1;e.loop(d.pointControls,function(Ue){Ue.scaleX+Ue.scaleY+Ue.regX+Ue.regY+Ue.rotation!=2&&(ge=!0),Ne.push([Ue.scaleX,Ue.scaleY,Ue.regX,Ue.regY,Ue.rotation])}),d.dispose(!0),o=Ye(he),d.shape&&(d.shape.graphics.clear(),d.sticks.graphics.clear(),d.controls.noDrag(),d.removeAllChildren(),delete d.shape,delete d.sticks,delete d.controls),d.visible=!1,be(),d.lockControls=Re,d.x=Ae,d.y=Ce,d.visible=me,ge&&(e.loop(d.pointControls,function(Ue,He){Ue.scaleX=Ne[He][0],Ue.scaleY=Ne[He][1],Ue.regX=Ne[He][2],Ue.regY=Ne[He][3],Ue.rotation=Ne[He][4]}),d.update())}}),Object.defineProperty(d,"pointsAdjusted",{get:function(){var he=[],Ae,Ce,me,Ne=d.pointObjects;return e.loop(Ne.length,function(ge){if(me=Ne[ge],Ce=D[ge],me[0].rotation==0&&me[0].scaleX==0&&me[0].scaleY==0)Ae=[e.decimals(Ce[0].x),e.decimals(Ce[0].y),e.decimals(Ce[1].x),e.decimals(Ce[1].y),e.decimals(Ce[2].x),e.decimals(Ce[2].y),e.decimals(Ce[3].x),e.decimals(Ce[3].y)];else{var Ue=me[0].localToLocal(me[2].x,me[2].y,me[0].parent),He=me[0].localToLocal(me[3].x,me[3].y,me[0].parent);Ae=[e.decimals(Ce[0].x),e.decimals(Ce[0].y),e.decimals(Ce[1].x),e.decimals(Ce[1].y),e.decimals(Ue.x-Ce[0].x),e.decimals(Ue.y-Ce[0].y),e.decimals(He.x-Ce[0].x),e.decimals(He.y-Ce[0].y)]}Ce[4]&&Ce[4]!=="mirror"&&Ae.push(Ce[4]),he.push(Ae)}),he},set:function(){Et&&ht("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(d,"pointObjects",{get:function(){return D},set:function(){Et&&ht("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(d,"pointControls",{get:function(){return w},set:function(){Et&&ht("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(d,"pointCircles",{get:function(){return K},set:function(){Et&&ht("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(d,"segmentPoints",{get:function(){var he=d.pointsAdjusted,Ae=[];return e.loop(he.length,function(Ce,me){var Ne=d.getSegmentPoint(he[Ce],he[Ce<me-1?Ce+1:0]);Ae.push(Ne)}),Ae},set:function(){Et&&ht("Blob() - segmentPoints is read only")}}),Object.defineProperty(d,"segmentRatios",{get:function(){var he=[],Ae=0;e.loop(d.segmentPoints,function(Ne){var ge=e.distanceAlongCurve(Ne);he.push(ge),Ae+=ge});var Ce=[],me=0;return e.loop(he,function(Ne){var ge=Ne/Ae;me+=ge,Ce.push(me)}),Ce},set:function(){Et&&ht("Blob() - segmentRatios is read only")}}),d.approximateBounds=function(he,Ae){n(he)&&(he=80),he/=d.num;var Ce=d.interpolate(he,null,!0,null,!0),me=e.boundsAroundPoints(Ce);if(d.setBounds(me.x,me.y,me.width,me.height),Ae){if(!d.parent)return Et&&ht("approximateBounds() - add to stage to first to see points"),d;d.hitPathPoints?d.hitPathPoints.removeAllChildren():d.hitPathPoints=new e.Container().addTo(),d.hitPathPoints.top();for(var Ne=0;Ne<Ce.length;Ne++){var ge=Ce[Ne];ge=d.localToGlobal(ge.x,ge.y),new e.Circle(3).loc(ge.x,ge.y,d.hitPathPoints)}}return d},d.getPointAngle=function(he){var Ae=d.pointObjects[he][0],Ce=d.pointObjects[he][2],me=d.pointObjects[he][3],Ne,ge;return Ae==d.stage?(Ne=new e.Point(Ce.x,Ce.y),ge=new e.Point(me.x,me.y)):(Ne=Ae.localToGlobal(Ce.x,Ce.y),ge=Ae.localToGlobal(me.x,me.y)),e.angle(Ne.x,Ne.y,ge.x,ge.y)},d.getSegmentPoint=function(he,Ae){if(!(n(he)||n(Ae))){(he[2]!=0||he[3]!=0)&&(he[4]-=he[2],he[5]-=he[3],he[6]-=he[2],he[7]-=he[3],he[0]+=he[2],he[1]+=he[3],he[2]=0,he[3]=0),(Ae[2]!=0||Ae[3]!=0)&&(Ae[4]-=Ae[2],Ae[5]-=Ae[3],Ae[6]-=Ae[2],Ae[7]-=Ae[3],Ae[0]+=Ae[2],Ae[1]+=Ae[3],Ae[2]=0,Ae[3]=0);var Ce={x:he[0],y:he[1]},me={x:he[0]+he[6],y:he[1]+he[7]},Ne={x:Ae[0]+Ae[4],y:Ae[1]+Ae[5]},ge={x:Ae[0],y:Ae[1]};return(xe.x!=0||xe.y!=0)&&(Ce.x+=xe.x,me.x+=xe.x,Ne.x+=xe.x,ge.x+=xe.x,Ce.y+=xe.y,me.y+=xe.y,Ne.y+=xe.y,ge.y+=xe.y),[Ce,me,Ne,ge]}},d.getAdjacentSegmentData=function(he){n(he)&&(he=0);var Ae=d.pointsAdjusted;if(d.num==2)return[[d.getSegmentPoint(Ae[0],Ae[1]),d.getSegmentPoint(Ae[1],Ae[0])],[0,1]];if(he==0)return[[d.getSegmentPoint(Ae[d.num-1],Ae[0]),d.getSegmentPoint(Ae[0],Ae[1]),d.getSegmentPoint(Ae[1],Ae[2])],[d.num-1,0,1]];if(he>=d.num-1)return[[d.getSegmentPoint(Ae[d.num-2],Ae[d.num-1]),d.getSegmentPoint(Ae[d.num-1],Ae[0]),d.getSegmentPoint(Ae[0],Ae[1])],[d.num-2,d.num-1,0]];var Ce=he+2>=d.num?0:he+2;return[[d.getSegmentPoint(Ae[he-1],Ae[he]),d.getSegmentPoint(Ae[he],Ae[he+1]),d.getSegmentPoint(Ae[he+1],Ae[Ce])],[he-1,he,he+1]]},d.getCurvePoint=function(he,Ae,Ce,me){n(Ae)&&(Ae=d.segmentRatios),n(Ce)&&(Ce=d.segmentPoints),n(me)&&(me=!1);var Ne=Ae,ge=Ce,Ue=e.loop(Ne,function(Ke,ut){if(Ke>=he)return ut}),He=Ue>0?Ne[Ue-1]:0,Oe=Ue>0?Ne[Ue]-Ne[Ue-1]:Ne[Ue],fe=(he-He)/Oe,Xe=e.pointAlongCurve(ge[Ue],fe,me,!0);if(!n(Xe)){var Ze=d.localToGlobal(Xe.x,Xe.y);return Ze.angle=Xe.angle,Ze.z=Ue,n(Ze)?void 0:Ze}};function Me(he,Ae,Ce){return{x:he.x+(Ae.x-he.x)*Ce,y:he.y+(Ae.y-he.y)*Ce}}function Be(he,Ae,Ce,me,Ne,ge,Ue,He){var Oe=he.length-1,fe=0,Xe=0;me==100&&d.type=="Squiggle"&&(me=99.99),me=(me+1e5)%100,e.loop(Ce,function(st,Je){if(me/100<st)return Oe=Je,Xe=st,!0;fe=st});var Ze=d.segmentPoints[Oe],Ke=Xe>0?(me/100-fe)/(Xe-fe):0,ut=e.pointAlongCurve(Ze,Ke,null,He),gt=[ut.x,ut.y,0,0];if(!ge){if(Ue){d.interpolatedPoints.push({x:ut.x,y:ut.y,r:me/100});return}if(Ne!="none"){var We=Me(Ze[0],Ze[1],Ke),it=Me(Ze[1],Ze[2],Ke),ct=Me(Ze[2],Ze[3],Ke),Pe=Me(We,it,Ke),Fe=Me(it,ct,Ke);gt[4]=Pe.x-ut.x,gt[5]=Pe.y-ut.y,gt[6]=Fe.x-ut.x,gt[7]=Fe.y-ut.y;var we=d.localToLocal(We.x,We.y,Ae[Oe]);he[Oe][6]=we.x,he[Oe][7]=we.y;var je=d.localToLocal(ct.x,ct.y,Ae[(Oe+1)%he.length]);he[(Oe+1)%he.length][4]=je.x,he[(Oe+1)%he.length][5]=je.y}Ne&&(gt[8]=Ne),he.splice(Oe+1,0,gt)}}this.addPoint=function(he,Ae){n(he)&&(he=100);var Ce=d.points,me=d.segmentRatios,Ne=d.pointControls;return Ae=Ae||j,Be(Ce,Ne,me,he,Ae),d.points=Ce,d.num=Ce.length,d},this.removePoint=function(he){if(!(n(he)||he<0)){var Ae=e.copy(d.points);return Ae.splice(he,1),d.points=Ae,d.stage&&d.stage.update(),d}},this.addPoints=function(he,Ae,Ce,me,Ne,ge,Ue){n(ge)&&(ge=e.copy(d.points));var He=e.copy(d.segmentRatios),Oe=0;if(Ne&&(d.interpolatedPoints=[]),me)var fe=He.length*he;return e.loop(He,function(Xe,Ze){Ne&&Be(ge,d.pointControls,d.segmentRatios,Oe*100,Ae,!n(Ce)&&Ze!=Ce,Ne,Ue);var Ke=me?Math.round(fe*(Xe-Oe)):he,ut=1/(Ke+1);e.loop(Ke,function(gt){var We=Oe+(Xe-Oe)*ut*(gt+1);Be(ge,d.pointControls,d.segmentRatios,We*100,Ae,!n(Ce)&&Ze!=Ce,Ne,Ue),!Ne&&he>0&&(d.points=ge)}),Oe=Xe}),Ne&&d.type=="Squiggle"&&Be(ge,d.pointControls,d.segmentRatios,100,Ae,null,Ne,Ue),d.stage&&d.stage.update(),d.num=ge.length,d},this.interpolate=function(he,Ae,Ce,me,Ne){return n(he)&&(he=1),d.addPoints(he,"none",Ae,Ce,!0,me,Ne),d.interpolatedPoints},ae&&d.approximateBounds(),this.dispose=function(he,Ae,Ce){if(d.shape){if(e.gD(d),pe&&d.toggleStageEvent&&pe.off("stagemousedown",d.toggleStageEvent),d.controls.noDrag(),d.controls.removeAllEventListeners(),d.selectPoints&&d.selectionManager&&d.selectionManager.dispose(),d.selectedBalls=null,d.selectedRect1s=null,d.selectedRect2s=null,d.selectionManager=null,d.off("mousedown",d.toggleEvent),d.off("click",d.clickEvent),he){d.shape.dispose(),d.shape=null;for(var me=0;me<d.points.length;me++)d.pointObjects[me][0].removeAllEventListeners(),d.pointObjects[me][1].removeAllEventListeners(),d.pointObjects[me][2].removeAllEventListeners(),d.pointObjects[me][3].removeAllEventListeners();d.controls.removeFrom(d),d.sticks.dispose(),D=null,K=null}else d.removeAllEventListeners(),D=null,K=null,Ce||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Blob,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),Si=e.Blob,e.Flare=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce){var j="color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",G;if(G=mt(e.Flare,arguments,j,this))return G;qe("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=ie;var y=ae===!1?{}:e.getStyle(this.type,this.group,ce),p=this;n(r)&&(r=y.borderColor!=null?y.borderColor:null),n(i)&&(i=y.borderWidth!=null?y.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=y.color!=null?y.color:i>0?"rgba(0,0,0,0)":e.black),(n(i)||i>0)&&(!n(r)||!n(i))&&n(r)&&(r=e.black),n(o)&&(o=y.crossAngle!=null?y.crossAngle:0);var d=o;o-=90,n(l)&&(l=y.thickness!=null?y.thickness:null),n(f)&&(f=y.thicknessA!=null?y.thicknessA:null),n(h)&&(h=y.thicknessB!=null?y.thicknessB:null),n(l)?n(h)&&!n(f)?h=f:n(f)&&!n(h)?f=h:h=f=10:n(h)&&!n(f)?h=l-f:n(f)&&!n(h)?f=l-h:h=f=l/2,p.thickness=f+h,n(k)&&(k=y.cross!=null?y.cross:!0),n(x)&&(x=y.crossColors!=null?y.crossColors:null),!n(x)&&!Array.isArray(x)&&(x=[x]),n(E)&&(E=y.close!=null?y.close:!1),n(_)&&(_=y.startX!=null?y.startX:0),n(P)&&(P=y.startY!=null?y.startY:0),n(C)&&(C=y.lengths!=null?y.lengths:[200]),Array.isArray(C)||(C=[C]),n(T)&&(T=y.angles!=null?y.angles:[0]),Array.isArray(T)||(T=[T]),n(N)&&(N=y.anglesA!=null?y.anglesA:[10]),Array.isArray(N)||(N=[N]),n(O)&&(O=y.anglesB!=null?y.anglesB:e.copy(N)),Array.isArray(O)||(O=[O]),n(S)&&(S=y.anglesEnd!=null?y.anglesEnd:[0]),Array.isArray(S)||(S=[S]),n(A)&&(A=y.strokeObj!=null?y.strokeObj:{miterLimit:2}),n(q)&&(q=y.spineBorderColor!=null?y.spineBorderColor:null),n(F)&&(F=y.spineBorderWidth!=null?y.spineBorderWidth:null),q<0||F<0?q=F=null:q!=null&&F==null&&(F=1),n(b)&&(b=y.spineColor!=null?y.spineColor:F>0?"rgba(0,0,0,0)":e.black),n(V)&&(V=y.spineDashed!=null?y.spineDashed:null),n(I)&&(I=y.spineStrokeObj!=null?y.spineStrokeObj:{miterLimit:2}),(n(F)||F>0)&&(!n(q)||!n(F))&&n(q)&&(q=r||e.black),n(Q)&&(Q=y.closeBorderColor!=null?y.closeBorderColor:null),n(R)&&(R=y.closeBorderWidth!=null?y.closeBorderWidth:null),Q<0||R<0?Q=R=null:Q!=null&&R==null&&(R=1),n(ne)&&(ne=y.closeColor!=null?y.closeColor:R>0?"rgba(0,0,0,0)":null),n(U)&&(U=y.closeDashed!=null?y.closeDashed:null),n(ee)&&(ee=y.closeStrokeObj!=null?y.closeStrokeObj:{miterLimit:2}),(n(R)||R>0)&&(!n(Q)||!n(R))&&n(Q)&&(Q=r||e.black),this.thicknessA=f,this.thicknessB=h,this.cross=k,this.close=E,this.lengths=C,this.angles=T,this.anglesA=N,this.anglesB=O,this.anglesEnd=S,this.crossColors=x,D(C,T,N,O,S,k,x,E),t.type&&(p.color=t);function D(X,Z,pe,ve,$,ue,xe,Ye){p.removeAllChildren();var se=p.shape=new e.Shape().addTo(p);if(p.colorCommand=se.c().f(t).command,t&&t.type&&p.specialColor(p.colorCommand,t,p),(n(i)||i>0)&&(!n(r)||!n(i))&&(n(r)&&(r=e.black),p.borderColorCommand=se.s(r).command,r&&r.type&&p.specialColor(p.borderColorCommand,r,p),p.borderWidthCommand=se.ss(i,A.caps,A.joints,A.miterLimit,A.ignoreScale).command,L&&(p.borderDashedCommand=se.sd([10,10],5).command)),se.mt(0,0),F>0){var be=p.spineShape=new e.Shape().addTo(p);p.spineColorCommand=be.c().f(b).command,b&&b.type&&p.specialColor(p.spineColorCommand,b,p),(n(F)||F>0)&&(!n(q)||!n(F))&&(n(q)&&(q=e.black),p.spineBorderColorCommand=be.s(q).command,q&&q.type&&p.specialColor(p.spineBorderColorCommand,q,p),p.spineBorderWidthCommand=be.ss(F,I.caps,I.joints,I.miterLimit,I.ignoreScale).command,V&&(p.spineBorderDashedCommand=be.sd([10,10],5).command))}if(!n(ne)){var te=p.closeShape=new e.Shape().addTo(p);p.closeColorCommand=te.c().f(ne).command,ne&&ne.type&&p.specialColor(p.closeColorCommand,ne,p),(n(R)||R>0)&&(!n(Q)||!n(R))&&(n(Q)&&(Q=e.black),p.closeBorderColorCommand=te.s(Q).command,Q&&Q.type&&p.specialColor(p.closeBorderColorCommand,Q,p),p.closeBorderWidthCommand=te.ss(R,ee.caps,ee.joints,ee.miterLimit,ee.ignoreScale).command,U&&(p.closeBorderDashedCommand=te.sd([10,10],5).command)),se.mt(0,0)}var _e=_,J=P,ye=o,Re=ye-180,de=f,Me=h,Be=Math.max(X.length,Z.length,pe.length,ve.length,$.length),he,Ae,Ce=Re,me=[],Ne=[],ge=[];p.points=[];var Ue=p.pinPoints=[];e.loop(Be,function(fe){var Xe=He(fe),Ze=Math.cos(Xe.a*e.RAD),Ke=Math.sin(Xe.a*e.RAD),ut=new e.Point(_e+Xe.A.x*Ze-Xe.A.y*Ke,J+Xe.A.x*Ke+Xe.A.y*Ze),gt=new e.Point(_e+Xe.B.x*Ze-Xe.B.y*Ke,J+Xe.B.x*Ke+Xe.B.y*Ze),We=new e.Point(_e+Xe.C.x*Ze-Xe.C.y*Ke,J+Xe.C.x*Ke+Xe.C.y*Ze),it=new e.Point(_e+Xe.D.x*Ze-Xe.D.y*Ke,J+Xe.D.x*Ke+Xe.D.y*Ze);me.push(ut,gt),Ne.unshift(We,it),ge.push([ut,gt,We,it]);var ct=new e.Point(_e+Xe.F.x*Ze-Xe.F.y*Ke,J+Xe.F.x*Ke+Xe.F.y*Ze),Pe=new e.Point(_e+Xe.E.x*Ze-Xe.E.y*Ke,J+Xe.E.x*Ke+Xe.E.y*Ze);fe==0&&p.pinPoints.push(ct),p.pinPoints.push(Pe),_e=Pe.x,J=Pe.y,de=Xe.tA,Me=Xe.tB}),p.points=me.concat(Ne),ue?(p.crossCommands=[],e.loop(ge,function(fe,Xe){se.mt(fe[0].x,fe[0].y),!n(xe)&&!n(xe[Xe])&&(se.f(xe[Xe]),p.crossCommands[Xe]=se.f(xe[Xe]).command,xe[Xe]&&xe[Xe].type&&p.specialColor(p.crossCommands[Xe],xe[Xe],p),se.mt(fe[0].x,fe[0].y)),se.lt(fe[1].x,fe[1].y).lt(fe[2].x,fe[2].y).lt(fe[3].x,fe[3].y).cp()}),Ye&&se.mt(ge[ge.length-1][1].x,ge[ge.length-1][1].y).lt(ge[ge.length-1][2].x,ge[ge.length-1][2].y).lt(ge[0][3].x,ge[0][3].y).lt(ge[0][0].x,ge[0][0].y).cp()):(e.loop(me,function(fe,Xe){Xe==0?se.mt(fe.x,fe.y):se.lt(fe.x,fe.y)}),Ye&&(se.lt(me[0].x,me[0].y),se.cp()),e.loop(Ne,function(fe,Xe){Xe==0&&Ye?se.mt(fe.x,fe.y):se.lt(fe.x,fe.y)}),Ye&&se.lt(Ne[0].x,Ne[0].y),se.cp()),be&&(e.loop(Ue,function(fe,Xe){Xe==0?be.mt(fe.x,fe.y):be.lt(fe.x,fe.y)}),Ye&&be.lt(Ue[0].x,Ue[0].y).cp()),n(ne)||(e.loop(Ne,function(fe,Xe){Xe==0?te.mt(fe.x,fe.y):te.lt(fe.x,fe.y)}),Ye&&te.lt(Ne[0].x,Ne[0].y).cp());function He(fe){var Xe=Z[fe],Ze=X[fe],Ke=pe[fe],ut=ve[fe],gt=$[fe];if(xe)var We=xe[fe];n(Xe)&&(Xe=Ce,p.angles[fe]=Xe),n(Ze)&&(Ze=200,p.lengths[fe]=Ze),n(Ke)&&(Ke=0,p.anglesA[fe]=Ke),n(ut)&&(ut=0,p.anglesB[fe]=ut),n(gt)&&(gt=0,p.anglesEnd[fe]=gt),xe&&n(We)&&(We=t,p.crossColors[fe]=We),gt=gt+90;var it=180-gt,ct=Math.cos((Ce-Xe)*e.RAD),Pe=Math.sin((Ce-Xe)*e.RAD),Fe=new e.Point(0,0),we=new e.Point(Ze,0);if(n(he))var je=new e.Point(Math.cos(ye*e.RAD)*de,Math.sin(ye*e.RAD)*de);else je=new e.Point(he.x*ct-he.y*Pe,he.x*Pe+he.y*ct);var st=Oe(Ze,je.x,je.y,Ke,it),Je=new e.Point(Ze-st.x,-st.y),tt;n(Ae)?tt=new e.Point(Math.cos(Re*e.RAD)*de,Math.sin(Re*e.RAD)*Me):tt=new e.Point(Ae.x*ct-Ae.y*Pe,Ae.x*Pe+Ae.y*ct);var Te=Oe(Ze,tt.x,tt.y,ut,gt),et=new e.Point(Ze-Te.x,Te.y);return he=new e.Point(Je.x-Ze,Je.y),Ae=new e.Point(et.x-Ze,et.y),Ce=Xe,{a:Xe,A:je,B:Je,C:et,D:tt,E:we,F:Fe,tA:st.t,tB:Te.t}}function Oe(fe,Xe,Ze,Ke,ut){var gt=ut-90,We=90-gt,it=180-Ke-We,ct=Math.tan(gt*e.RAD)*Ze,Pe=fe-Xe-ct,Fe=Pe/Math.sin(it*e.RAD)*Math.sin(Ke*e.RAD),we=Math.sqrt(Math.pow(Ze,2)+Math.pow(ct,2)),je=Fe+we,st=je*Math.sin(gt*e.RAD),Je=je*Math.cos(gt*e.RAD);return{x:st,y:Je,t:je}}}this.add=function(X,Z,pe,ve,$,ue,xe,Ye){var se="lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close",be;return(be=mt(p.add,arguments,se))?be:(n(ue)||(p.cross=ue),n(Ye)||(p.close=Ye),n(X)||(Array.isArray(X)||(X=[X]),n(p.lengths)?p.lengths=X:p.lengths=p.lengths.concat(X)),n(Z)||(Array.isArray(Z)||(Z=[Z]),n(p.angles)?p.angles=Z:p.angles=p.angles.concat(Z)),n(pe)||(Array.isArray(pe)||(pe=[pe]),n(p.anglesA)?p.anglesA=pe:p.anglesA=p.anglesA.concat(pe)),n(ve)||(Array.isArray(ve)||(ve=[ve]),n(p.anglesB)?p.anglesB=ve:p.anglesB=p.anglesB.concat(ve)),n($)||(Array.isArray($)||($=[$]),n(p.anglesEnd)?p.anglesEnd=$:p.anglesEnd=p.anglesEnd.concat($)),n(xe)||(n(p.crossColors)?Et&&ht("Flare() - must set crossColor for original object parameters"):(Array.isArray(xe)||(xe=[xe]),n(p.crossColors)?p.crossColors=xe:p.crossColors=p.crossColors.concat(xe))),p.remake(),p)},this.remake=function(){return f=this.thicknessA,h=this.thicknessB,D(p.lengths,p.angles,p.anglesA,p.anglesB,p.anglesEnd,p.cross,p.crossColors,p.close),p},Object.defineProperty(p,"color",{get:function(){return t},set:function(X){n(X)&&(X=e.black),t=X,X&&X.type?p.specialColor(p.colorCommand,X,p):p.colorCommand.style=X}});var K,w;this.setColorRange=function(X,Z){return n(Z)?(K=p.color,w=X):n(X)?(K=p.color,w=Z):(K=X,w=Z),p};var Y=0;Object.defineProperty(p,"colorRange",{get:function(){return Y},set:function(X){Y=X,!n(K)&&!n(w)&&(p.color=e.colorRange(K,w,X))}}),Object.defineProperty(p,"borderColor",{get:function(){return r},set:function(X){r=X,p.borderColorCommand?X&&X.type?p.specialColor(p.borderColorCommand,X,p):p.borderColorCommand.style=X:D()}}),Object.defineProperty(p,"borderWidth",{get:function(){return i},set:function(X){X>0||(X=0),i=X,!p.borderWidthCommand||i==0?D():(p.borderWidthCommand.width=i,L&&(p.borderDashedCommand.segments=[20,10],p.borderDashedCommand.offset=5))}}),Object.defineProperty(p,"spineColor",{get:function(){return b},set:function(X){n(X)&&(X=e.black),b=X,p.spineColorCommand?X&&X.type?p.specialColor(p.spineColorCommand,X,p):p.spineColorCommand.style=X:D()}}),Object.defineProperty(p,"spineBorderColor",{get:function(){return q},set:function(X){q=X,p.spineBorderColorCommand?X&&X.type?p.specialColor(p.spineBorderColorCommand,X,p):p.spineBorderColorCommand.style=X:D()}}),Object.defineProperty(p,"spineBorderWidth",{get:function(){return F},set:function(X){X>0||(X=0),F=X,!p.spineBorderWidthCommand||F==0?D():(p.spineBorderWidthCommand.width=F,V&&(p.spineBorderDashedCommand.segments=[20,10],p.spineBorderDashedCommand.offset=5))}}),Object.defineProperty(p,"closeColor",{get:function(){return ne},set:function(X){n(X)&&(X=e.black),ne=X,p.closeColorCommand?X&&X.type?p.specialColor(p.closeColorCommand,X,p):p.closeColorCommand.style=X:D()}}),Object.defineProperty(p,"closeBorderColor",{get:function(){return Q},set:function(X){Q=X,p.closeBorderColorCommand?X&&X.type?p.specialColor(p.closeBorderColorCommand,X,p):p.closeBorderColorCommand.style=X:D()}}),Object.defineProperty(p,"closeBorderWidth",{get:function(){return R},set:function(X){X>0||(X=0),R=X,!p.closeBorderWidthCommand||R==0?D():(p.closeBorderWidthCommand.width=R,U&&(p.closeBorderDashedCommand.segments=[20,10],p.closeBorderDashedCommand.offset=5))}}),Object.defineProperty(p,"pin",{get:function(){return g},set:function(X){X>0||(X=0),X>p.pinPoints.length-1&&(g=0),g=X;var Z=p.pinPoints[g];Z&&(p.regX=Z.x,p.regY=Z.y)}});var Ee=e.boundsAroundPoints(p.points);this.setBounds(Ee.x,Ee.y,Ee.width,Ee.height),n(g)||(p.pin=g),this.mouseChildren=!1,ae!==!1&&e.styleTransforms(this,y),this.clone=function(){return p.cloneProps(new e.Flare(t,r,i,d,e.copy(l),e.copy(f),e.copy(h),g,_,P,e.copy(C),e.copy(T),e.copy(N),e.copy(O),e.copy(S),k,e.copy(x),E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,this.group,ce))}},e.extend(e.Flare,e.Container,["clone"],"zimContainer",!1),e.MultiFlare=function(t,r,i,o,l,f,h){var g="flares, pins, angles, endToEnd, style, group, inherit",_;if(_=mt(e.MultiFlare,arguments,g,this))return _;qe("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=f;var P=l===!1?{}:e.getStyle(this.type,this.group,h),C=this;n(t)&&(t=P.flares!=null?P.flares:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=P.pins!=null?P.pins:null),n(i)&&(i=P.angles!=null?P.angles:null),n(o)&&(o=P.endToEnd!=null?P.endToEnd:!1),C.flares=t,C.pins=r,C.angles=i,C.endToEnd=o,C.mouseChildren=!1,C.add=function(T,N){return n(T)||(n(N)&&(N=!0),Array.isArray(T)||(T=[T]),e.loop(T,function(O){N?C.flares.push(O.clone()):C.flares.push(O)}),C.remake(),C.stage&&C.stage.update()),C},C.remove=function(T){return n(T)||(Array.isArray(T)||(T=[T]),e.loop(T,function(N){var O=C.flares.indexOf(N);O>=0&&C.flares.splice(O,1)}),C.remake(),C.stage&&C.stage.update()),C},C.remake=function(){C.removeAllChildren(),e.loop(C.flares,function(T,N){if(r&&!n(r[N])&&(T.pin=r[N]),i&&!n(i[N])&&(T.rotation=i[N]),T.addTo(C),C.flares.push(T),o&&N>0){var O=t[N-1],S=O.pinPoints[O.pinPoints.length-1],k=O.localToLocal(S.x,S.y,C),x=T.pinPoints[0],E=T.localToLocal(x.x,x.y,C);T.mov(k.x-E.x,k.y-E.y)}})},C.remake(),l!==!1&&e.styleTransforms(this,P),this.clone=function(){return C.cloneProps(new e.MultiFlare(e.copy(t,!0),e.copy(r),e.copy(i),o,l,this.group,h))}},e.extend(e.MultiFlare,e.Container,["clone"],"zimContainer",!1),e.FlareBox=function(t,r,i,o,l,f,h,g,_,P,C){var T="width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",N;if(N=mt(e.FlareBox,arguments,T,this))return N;qe("53.8"),this.group=P;var O=_===!1?{}:e.getStyle("FlareBox",this.group,C);n(t)&&(t=O.width!=null?O.width:220),n(r)&&(r=O.height!=null?O.height:80),this.zimContainer_constructor(t,r),this.type="FlareBox";var S=this;if(this.mouseChildren=!1,n(o)&&(o=O.borderColor!=null?O.borderColor:null),n(l)&&(l=O.borderWidth!=null?O.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=O.color!=null?O.color:l>0?"rgba(0,0,0,0)":e.black),(n(l)||l>0)&&(!n(o)||!n(l))&&n(o)&&(o=e.black),n(f)&&(f=O.flares!=null?O.flares:null),n(h)&&(h=O.corners!=null?O.corners:null),n(g)&&(g=O.pins!=null?O.pins:null),S.backing=new e.Rectangle(t,r,i,o,l).addTo(this),!n(f)){if(f.type!="MultiFlare"){if(!Array.isArray(f)){if(f.type!="Flare")return;f=[f]}f=new e.MultiFlare(f,g)}f.addTo(S),S.multiFlare=f,S.flares=S.multiFlare.flares,f.loop(function(k,x){g&&!n(g[x])?k.pin=g[x]:n(k.pin)&&(k.pin=0),h&&!n(h[x])?k.corner=h[x]:n(k.corner)&&(k.corner=0),k.corner==1?k.loc(t,0):k.corner==2?k.loc(t,r):k.corner==3?k.loc(0,r):k.loc(0,0),k.rot((k.corner-k.pin)*90)}),_!==!1&&e.styleTransforms(this,O),this.clone=function(){return S.cloneProps(new e.FlareBox(t,r,i,o,l,e.copy(f,!0),e.copy(h),e.copy(g),_,this.group,C))}}},e.extend(e.FlareBox,e.Container,["clone"],"zimContainer",!1),e.Label=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G){var y="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",p;if(p=mt(e.Label,arguments,y,this))return p;qe("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=j;var d=ce===!1?{}:e.getStyle(this.type,this.group,G);n(t)&&(t=d.text!=null?d.text:"LABEL"),n(r)&&(r=d.size!=null?d.size:36),n(i)&&(i=d.font!=null?d.font:"arial"),n(o)&&(o=d.color!=null?d.color:e.black),n(P)&&(P=d.bold!=null?d.bold:!1),n(C)&&(C=d.italic!=null?d.italic:!1);var D=K(t,r,i,o,P,C);this.veeObj={text:D[0],size:D[1],font:D[2],color:D[3],bold:D[4],italic:D[5]};function K(){return arguments}t=e.Pick.choose(t);var w=!1;t===""&&(t=" ",w=!0),r=e.Pick.choose(r),i=e.Pick.choose(i),i=i.replace("+"," ");var Y=["ttf","otf","woff2","woff","fnt"],Ee=i.split(".");Ee.length>0&&Y.indexOf(Ee[1])!=-1&&(i=Ee[0]),o=e.Pick.choose(o),P=e.Pick.choose(P),C=e.Pick.choose(C),n(l)&&(l=d.rollColor!=null?d.rollColor:null),(n(f)||f=="ignore")&&(f=d.shadowColor!=null&&f!="ignore"?d.shadowColor:-1),(n(h)||h=="ignore")&&(h=d.shadowBlur!=null&&h!="ignore"?d.shadowBlur:14),n(g)&&(g=d.align!=null?d.align:"left"),n(_)&&(_=d.valign!=null?d.valign:"top"),(!n(k)||!n(d.outlineColor))&&n(x)&&(x=d.outlineWidth!=null?d.outlineWidth:Math.round(r*.2)),(!n(x)||!n(d.outlineWidth))&&n(k)&&(k=d.outlineColor!=null?d.outlineColor:e.black),n(x)&&(x=d.outlineWidth!=null?d.outlineWidth:0),(n(E)||E=="ignore")&&(E=d.backgroundColor!=null&&E!="ignore"?d.backgroundColor:null),n(L)&&(L=d.backgroundBorderColor!=null&&L!="ignore"?d.backgroundBorderColor:null),n(A)&&(A=d.backgroundBorderWidth!=null&&A!="ignore"?d.backgroundBorderWidth:null),(n(q)||q=="ignore")&&(q=d.padding!=null&&q!="ignore"?d.padding:10),n(V)&&(V=d.paddingH!=null?d.paddingH:q),n(I)&&(I=d.paddingV!=null?d.paddingV:q),n(ne)&&(ne=d.shiftH!=null?d.shiftH:0),n(R)&&(R=d.shiftV!=null?d.shiftV:0),n(T)&&(T=d.variant!=null?d.variant:!1),n(N)&&(N=d.lineWidth!=null?d.lineWidth:null),n(O)&&(O=d.lineHeight!=null?d.lineHeight:null),(n(S)||S=="ignore")&&(S=d.backing!=null&&S!="ignore"?d.backing.clone():null),n(Q)&&(Q=d.rollPersist!=null?d.rollPersist:!1),d.labelWidth!=null&&(N=d.labelWidth),n(U)||(N=U),g=="middle"&&(g="center"),n(ee)&&(ee=d.labelHeight!=null?d.labelHeight:null),n(ae)&&(ae=d.maxSize!=null?d.maxSize:null),r=ae?Math.min(r,ae):r,n(ie)&&(ie=d.splitWords!=null?d.splitWords:!1);var X=le.zdf&&le.zdf.retina,Z=this;this.mouseChildren=!1,this.paddingV=I,this.paddingH=V,le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?g=="start"?g="right":g=="end"&&(g="left"):g=="start"?g="left":g=="end"&&(g="right");var pe=[];pe[0]=C?"italic":"normal",pe[1]=T?"small-caps":"normal",pe[2]=P?"bold":"normal",pe[3]=r+"px",pe[4]=i;var ve=pe.join(" ");t=String(t);var $,ue=!1,xe=N,Ye=ee;if(n(S)&&n(E)){var se=new ze.Shape;Z.hitArea=se}else xe&&(xe=xe-V*2),Ye&&(Ye=Ye-I*2);function be(fe){var Xe=new ze.Text(fe,ve,o);return Xe.lineWidth=xe,Xe.lineHeight=O,Xe}$=be(t);function te(fe,Xe,Ze){var Ke=Math.ceil(xe/Xe*Ze.length),ut=Ze.substr(0,Ke),gt=be(ut),We=gt.getMeasuredWidth();if(We>xe)for(;We>xe;)Ke--,ut=Ze.substr(0,Ke),gt=be(ut),We=gt.getMeasuredWidth();else if(We<xe){for(;We<xe;)Ke++,ut=Ze.substr(0,Ke),gt=be(ut),We=gt.getMeasuredWidth();Ke--,ut=Ze.substr(0,Ke)}var it=Ze.substr(Ke,Ze.length);return{endIndex:Ke,start:ut,end:it}}if(ie&&xe>r*1.2)for(var _e=$.getMetrics(),J=0;_e.width>xe&&J<1e3;)J++,e.loop(_e.lines,function(fe,Xe){fe=fe.replace(/^[\s\t]+/,"");var Ze=be(fe),Ke=Ze.getMeasuredWidth();if(Ke>xe){var ut=te(Ze,Ke,fe);return _e.lines[Xe]=ut.start,_e.lines.length>Xe+1?(ut.end.trim(),_e.lines[Xe+1]=ut.end+" "+_e.lines[Xe+1]):_e.lines.push(ut.end),$=be(_e.lines.join(" ")),_e=$.getMetrics(),!1}});if(this.label=$,$.textAlign=g,$.textBaseline="alphabetic",x>0){var ye=this.outlineLabel=$.clone();ye.color=k,ye.outline=x}f!=-1&&h>0&&($.shadow=new ze.Shadow(f,3,3,h)),this.addChild($);function Re(){Z.removeChild(Z.background),Z.background=new e.Rectangle(Z.getBounds().width+V*2,Z.getBounds().height+I*2,E,L,A,b,F,null,null,!1),e.center(Z.background,Z,0),Z.setBounds(Z.background.x,Z.background.y,Z.background.width,Z.background.height)}function de(){var fe=$.getBounds(),Xe=fe.y,Ze=fe.height;if(xe&&!Ye){var Ke=fe.x,ut=xe;g=="right"?Ke=fe.x-xe+fe.width:g=="center"&&(Ke=-xe/2),$.setBounds(Ke,Xe,ut,Ze),fe=$.getBounds()}var gt;_=="baseline"?gt=fe.y:_=="top"?($.y=r-r/6,gt=0):_=="center"||_=="middle"?(gt=-fe.height/2,$.y=r*.3):gt=-fe.height,Z.setBounds(fe.x,gt,d.width?d.width-q*2:fe.width,d.height?d.height-q*2:fe.height),Z.hitArea&&Z.hitArea.graphics.c().f("black").r(Z.getBounds().x,Z.getBounds().y,Z.getBounds().width,Z.getBounds().height),(_=="center"||_=="middle")&&(e.pos($,null,0),e.mov($,0,1)),ee||(S?ue&&he():n(E)||Re()),_!="baseline"&&!X&&($.y+=r/32),Ae()}if(de(),!n(S)){if(S.type=="Pattern"){if(Z.backing=new e.Container(Z.width+V*2,Z.height+I*2,null,null,!1).centerReg(null,null,!1),f!=-1&&h>0){var Me=new e.Rectangle(Z.width+V*2-2,Z.height+I-2,"#666",null,null,b,null,null,null,!1).center(Z.backing);Me.shadow=new ze.Shadow(f,3,3,h)}var Be=new e.Rectangle(Z.width+V*2,Z.height+I*2,E,null,null,b,null,null,null,!1).addTo(Z.backing);S.centerReg(Be),S.setMask(Be),Z.backing.pattern=S}else Z.backing=S;Z.backing.center(Z,0),S=Z.backing,he(),ue=!0}function he(){var fe=S.boundsToGlobal(),Xe=Z.boundsToGlobal(fe,!0);Z.setBounds(Xe.x,Xe.y,Xe.width,Xe.height)}function Ae(){e.pos($,g=="left"||g=="right"?S||Z.background?V:0:null,_=="top"||_=="baseline"||_=="bottom"?S||Z.background?I:0:null,g=="right",_=="bottom"),$.x+=ne,$.y+=R}Ae();function Ce(){ye&&(ye.x=$.x,ye.y=$.y,Z.addChildAt(ye,Z.background||Z.backing?1:0))}Ce(),Object.defineProperty(Z,"text",{get:function(){var fe=$.text==" "&&w?"":$.text;return fe},set:function(fe){w=!1,fe===""&&(fe=" ",w=!0),$.text=String(fe),$.setBounds(null),Z.setBounds(null),de(),ye&&(ye.text=String(fe)),!n(N)&&!n(ee)&&(Oe(),ye&&Ce())}}),Object.defineProperty(Z,"size",{get:function(){return r},set:function(fe){r=ae?Math.min(fe,ae):fe,pe[3]=r+"px",this.label.font=pe.join(" "),ye&&(ye.font=pe.join(" ")),$.setBounds(null),Z.setBounds(null),de(),Ce()}}),Object.defineProperty(Z,"bold",{get:function(){return!!this.label.font.match("bold")},set:function(fe){P=fe,pe[2]=fe?"bold":"normal",this.label.font=pe.join(" "),ye&&(ye.font=pe.join(" "))}}),Object.defineProperty(Z,"italic",{get:function(){return!!this.label.font.match("italic")},set:function(fe){C=fe,pe[0]=fe?"italic":"normal",this.label.font=pe.join(" "),ye&&(ye.font=pe.join(" "))}}),Object.defineProperty(Z,"variant",{get:function(){return!!this.label.font.match("small-caps")},set:function(fe){T=fe,pe[1]=fe?"small-caps":"normal",this.label.font=pe.join(" "),ye&&(ye.font=pe.join(" "))}}),Object.defineProperty(Z,"font",{get:function(){return pe[4]},set:function(fe){n(fe)||(i=fe,pe[4]=fe,this.label.font=pe.join(" "),ye&&(ye.font=pe.join(" ")))}}),Object.defineProperty(Z,"align",{get:function(){return g},set:function(fe){n(fe)||(g=fe,this.label.textAlign=g,ye&&(ye.textAlign=g),de(),Ce())}}),Object.defineProperty(Z,"valign",{get:function(){return _},set:function(fe){n(fe)||(_=fe,de(),Ce())}}),Object.defineProperty(Z,"color",{get:function(){return o},set:function(fe){l==o&&(l=fe),o=fe,$.color=o,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),Object.defineProperty(Z,"colorOnly",{get:function(){return o},set:function(fe){o=fe,$.color=o,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}});var me,Ne;this.setColorRange=function(fe,Xe){return n(Xe)?(me=Z.color,Ne=fe):n(fe)?(me=Z.color,Ne=Xe):(me=fe,Ne=Xe),Z};var ge=0;Object.defineProperty(Z,"colorRange",{get:function(){return ge},set:function(fe){ge=fe,!n(me)&&!n(Ne)&&(Z.color=e.colorRange(me,Ne,fe))}}),Object.defineProperty(Z,"backgroundColor",{get:function(){return E},set:function(fe){E=fe,Z.background?Z.background.color=fe:Z.backing?Z.backing.color=fe:Re(),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),Object.defineProperty(Z,"outlineColor",{get:function(){return k},set:function(fe){k=fe,ye&&(ye.color=k),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),Object.defineProperty(Z,"rollColor",{get:function(){return l},set:function(fe){!Z.mouseoverEvent&&fe&&Ue(),fe==null&&Z.mouseoverEvent&&He(),l=fe}}),this._enabled=!0,Object.defineProperty(Z,"enabled",{get:function(){return Z._enabled},set:function(fe){c(Z,fe),$.color=o,Z.mouseChildren=!1,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),this.showRollColor=function(fe){return n(fe)&&(fe=!0),fe?$.color=l:$.color=o,Z.stage&&Z.stage.update(),Z};function Ue(){Z.mouseoverEvent=Z.on("mouseover",function(){Z.showRollColor&&Z.showRollColor()}),Z.mouseoutEvent=Z.on("mouseout",function(){Z.rollPersist||Z.showRollColor(!1)}),Z.pressupEvent=Z.on("pressup",function(){Z.rollPersist&&Z.showRollColor(!1)})}function He(){Z.off("mouseover",Z.mouseoverEvent),Z.off("mouseout",Z.mouseoutEvent),Z.off("pressup",Z.pressupEvent)}l&&Ue(),Object.defineProperty(Z,"labelWidth",{get:function(){return N},set:function(fe){fe>0&&(N=fe,xe=N,(!n(S)||!n(E))&&xe&&(xe=xe-V*2),Z.label.lineWidth=xe,ye&&(ye.lineWidth=xe),$.setBounds(null),Z.setBounds(null),de(),ee&&Oe(),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Z.stage&&Z.stage.update())}}),Object.defineProperty(Z,"labelHeight",{get:function(){return ee},set:function(fe){fe>0&&(ee=fe,Ye=ee,(!n(S)||!n(E))&&Ye&&(Ye=Ye-I*2),N&&Oe(),Z.setBounds(null),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Z.stage&&Z.stage.update())}}),!n(N)&&!n(ee)&&Oe();function Oe(){Z.size=ae||200;for(var fe=0;O<Ye/2&&(Z.height>Ye||Z.width>xe)&&(fe++,Z.size=Z.size/2,!(fe>50)););for(fe=0;Z.height<=Ye&&Z.width<=xe&&(fe++,Z.size=Math.ceil(Z.size+1),!(fe>50)););Z.size=Z.size-1,Ce(),$.setBounds(null);var Xe=$.getBounds(),Ze=Xe.y,Ke=Xe.height;Ye&&(_=="bottom"?Ze=Ze-Ye+Ke:(_=="center"||_=="middle")&&(Ze=(Ze+Ze-Ye+Ke)/2),Ke=Ye),$.setBounds(Xe.x,Ze,Xe.width,Ke),Z.setBounds(null),Xe=Z.getBounds(),Z.setBounds(Xe.x,Xe.y,Xe.width,Xe.height),S?ue&&he():n(E)||Re()}ce!==!1&&e.styleTransforms(this,d),this.clone=function(fe){return Z.cloneProps(new e.Label(fe||!e.isPick(D[0])?Z.text:D[0],fe||!e.isPick(D[1])?r:D[1],fe||!e.isPick(D[2])?i:D[2],fe||!e.isPick(D[3])?o:D[3],l,f,h,g,_,fe||!e.isPick(D[4])?P:D[4],fe||!e.isPick(D[5])?C:D[5],T,N,O,n(S)?null:S.clone(fe),k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,this.group,G))}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.LabelOnPath=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",O;if(O=mt(e.LabelOnPath,arguments,N,this))return O;qe("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=C;var S=P===!1?{}:e.getStyle(this.type,this.group,T);n(t)&&(t=S.label!=null?S.label:new e.Label("Label on Path")),n(r)&&(r=S.path!=null?S.path:new e.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),n(i)&&(i=S.percentAngle!=null?S.percentAngle:100),n(o)&&(o=S.percents!=null?S.percents:null),n(l)&&(l=S.showPath!=null?S.showPath:!0),n(f)&&(f=S.allowToggle!=null?S.allowToggle:!0),n(h)&&(h=S.interactive!=null?S.interactive:!0),n(g)&&(g=S.onTop!=null?S.onTop:!1),n(_)&&(_=S.rtl!=null?S.rtl:le.DIR=="rtl"||e.DIR=="rtl"),_&&r.reversePoints();var k=t.color;r.addTo(this);var x=this;this.path=r,this.allowToggle=f,r.interactive=h,typeof t=="string"&&(t=new e.Label(t));var E=r.alpha;l||r.alp(0),r.onTop=g;var L=this.letters=new e.Container().addTo(this);if(!o){o=[];for(var A=0;A<t.text.length;A++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*A))}this.percents=o;function b(){var q;for(q=L.numChildren-1;q>=0;q--)L.getChildAt(q).dispose();for(x.numLetters=t.text.length,q=0;q<x.numLetters;q++){var V=t.clone();V.text=t.text[q],V.centerReg(L).reg(null,V.height),V.text!=""&&V.text!=" "&&V.expand(0),x.allowToggle&&V.cur("pointer"),V.on("mousedown",function(){x.allowToggle&&x.toggle()})}x.resize()}this.resize=function(){for(var q=r.segmentRatios,V=r.segmentPoints,I=0;I<this.numLetters;I++){var ne=r.getCurvePoint(o[I]/100,q,V,!0);if(ne){var R=this.globalToLocal(ne.x,ne.y);R&&(L.getChildAt(I).loc(R).rot((ne.angle>180?ne.angle-360:ne.angle)*i/100),_&&(L.getChildAt(I).rotation+=180))}}return this},b(),this.showPath=function(q){return this.toggle(!0),r.toggle(q),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(x,"text",{get:function(){return t.text},set:function(q){t.text=q,o=[];for(var V=0;V<t.text.length;V++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*V));b()}}),Object.defineProperty(this,"color",{get:function(){return k},set:function(q){k=q;for(var V=0;V<x.letters.numChildren;V++)x.letters.getChildAt(V).color=k;x.stage&&x.stage.update()}}),Object.defineProperty(x,"interactive",{get:function(){return h},set:function(q){h=q,r.interactive=q,this.ticker&&e.Ticker.remove(this.ticker),h&&(this.ticker=e.Ticker.add(function(){x.resize()}))}}),this.interactive&&(this.ticker=e.Ticker.add(function(){x.resize()}));var F=x.toggled=l;this.toggle=function(q){if(this.allowToggle)return n(q)?F=!F:q?F=!0:F=!1,F?(r.alp(E),this.interactive&&(r.showControls(),L.mouseEnabled=!1,L.mouseChildren=!1,L.cur("default"),this.controlHideEvent&&r.off("controlshide",this.controlHideEvent),this.controlHideEvent=r.on("controlshide",function(){L.mouseEnabled=!0,L.mouseChildren=!0,L.cur("pointer"),E=r.alpha,r.alp(0),F=!1,x.toggled=F,x.stage&&x.stage.update()},null,!0))):(E=r.alpha,r.alp(0),L.mouseEnabled=!0,L.mouseChildren=!0,L.cur("pointer")),x.toggled=F,x.stage&&x.stage.update(),x},x.toggle(!0),P!==!1&&e.styleTransforms(this,S),this.clone=function(){return x.cloneProps(new e.LabelOnPath(x.label.clone(),x.path.clone(),i,e.copy(o),l,f,h,g,_,P,this.group,T))},this.dispose=function(q,V,I){return this.ticker&&e.Ticker.remove(this.ticker),I||this.zimContainer_dispose(!0),!0}},e.extend(e.LabelOnPath,e.Container,["clone","dispose"],"zimContainer",!1),e.LabelOnArc=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E){var L="label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",A;if(A=mt(e.LabelOnArc,arguments,L,this))return A;qe("54.55"),this.group=x;var b=k===!1?{}:e.getStyle("LabelOnArc",this.group,E);n(r)&&(r=b.size!=null?b.size:30),n(t)&&(t=b.label!=null?b.label:new e.Label("Label on Arc",r)),n(i)&&(i=b.font!=null?b.font:"verdana"),n(o)&&(o=b.color!=null?b.color:e.white),n(l)&&(l=b.radius!=null?b.radius:100),n(f)&&(f=b.flip!=null?b.flip:!1),n(h)&&(h=b.spacing!=null?b.spacing:0),n(g)&&(g=b.letterSpacing!=null?b.letterSpacing:5),n(_)&&(_=b.angles!=null?b.angles:null);var F=!n(_),q=e.copy(_);n(P)&&(P=b.showCircle!=null?b.showCircle:!1),n(C)&&(C=b.arcColor!=null?b.arcColor:null),n(T)&&(T=b.arcBorderColor!=null?b.arcBorderColor:null),n(N)&&(N=b.arcBorderWidth!=null?b.arcBorderWidth:null),n(O)&&(O=b.radiusSpread!=null?b.radiusSpread:!1),n(S)&&(S=b.rtl!=null?b.rtl:le.DIR=="rtl"||e.DIR=="rtl");var V=this.outerRadius=l+h+t.height;this.innerRadius=l+h,this.zimContainer_constructor(-V,-V,V*2,V*2,!1),this.type="LabelOnArc";var I=this;t.type!="Label"&&(t=new e.Label(t,r,i,o)),t.text;var ne,R,Q,U,ee,ae;function ie(){if(I.disposeAllChildren(),f){var G=t.text.split("").reverse().join("");t.text=G}ne=I.letters=new e.Container(I.width,I.height).centerReg(I),I.numLetters=t.text.length,I.letterHeight=t.height,R=I.labels=[];var y;for(y=0;y<I.numLetters;y++){var p=t.clone();R.push(p),p.text=t.text[y],p.letterHolder=new e.Container(p.width,p.height),p.centerReg(p.letterHolder).rot(f?180:0)}if(S&&R.reverse(),U=I.circle=new e.Circle(l),P&&U.addTo(I),Q=I.arc=new e.Shape().addTo(I),ce(),_){for(ee=0,y=0;y<_.length;y++)ee+=_[y];ee+=_[_.length-1]/2}j()}ie();function ce(){ee=0,ae=[0];for(var G=0;G<I.numLetters;G++){var y=R[G],p=Math.atan((y.width+g)/2/(l+h))*180/Math.PI*2;ae.push(p),ee+=p,y.letterHolder.centerReg(ne).reg(null,l+h+y.height+(f?y.height*.13:0))}I.circle.radius=l,(C||T||N)&&(N>0&&n(T)?T=e.black:n(N)&&!n(T)&&(N=2),Q.graphics.c().f(null).s(T).ss(N).arc(0,0,l,(I.startAngle-90)*Math.PI/180,(I.startAngle-90+ee)*Math.PI/180))}function j(){var G;if(!F)for(_=[],G=0;G<ae.length-1;G++)_[G]=Math.round((ae[G]+ae[G+1])/2*100)/100;I.angles=_,I.startAngle=-ee/2;var y=I.startAngle;for(G=0;G<ne.numChildren;G++){var p=ne.getChildAt(G);y=p.rotation=y+_[G]}}Object.defineProperty(this,"radius",{get:function(){return l},set:function(G){l=G,ce(),!F&&!O&&j()}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(G){o=G;for(var y=0;y<I.labels.length;y++)I.labels[y].color=o;I.stage&&I.stage.update()}}),Object.defineProperty(I,"text",{get:function(){return t.text},set:function(G){t.text=G,q?_=e.copy(q):_=null,ie()}}),k!==!1&&e.styleTransforms(this,b),this.clone=function(){return I.cloneProps(new e.LabelOnArc(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,this.group,E))}},e.extend(e.LabelOnArc,e.Container,"clone","zimContainer",!1),e.LabelLetters=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S){var k="label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",x;if(x=mt(e.LabelLetters,arguments,k,this))return x;qe("54.57"),this.group=O;var E=N===!1?{}:e.getStyle("LabelLetters",this.group,S);n(t)&&(t=E.label!=null?E.label:new e.Label("Label Letters")),n(r)&&(r=E.align!=null?E.align:"center"),n(i)&&(i=E.valign!=null?E.valign:"center"),n(o)&&(o=E.letterSpacing!=null?E.letterSpacing:5),n(l)&&(l=E.letterSpacings!=null?E.letterSpacings:null),n(g)&&(g=E.lineHeight!=null?E.lineHeight:null),n(f)&&(f=E.lineSpacing!=null?E.lineSpacing:5),n(h)&&(h=E.lineSpacings!=null?E.lineSpacings:null),n(T)&&(T=E.rtl!=null?E.rtl:!1),n(_)&&(_=E.lineAlign!=null?E.lineAlign:T?"right":"left"),n(P)&&(P=E.lineValign!=null?E.lineValign:"bottom"),n(C)&&(C=E.cache!=null?E.cache:!1),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var L=this,A=L.letterData=[],b,F;t.type!="Label"?(F=q(t),A=F.data,t=new e.Label(F.text)):(F=q(t.text),A=F.data,t.text=F.text),L.text=F.original,L._color=t.color,le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?_=="start"?_="right":_=="end"&&(_="left"):_=="start"?_="left":_=="end"&&(_="right");function q(ye){var Re=[];function de(Ne){return Ne.split("").reverse().join("")}if(T){Ye=-1,ye=ye.replace(/[\u0591-\u07FF]+/ig,de),ye=ye.replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/ig,"$1-!!-$2"),ye=ye.replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/ig,"$1-!!-$2"),ye=ye.replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/ig,"$1-!!- -!!-$2"),ye=ye.replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/ig,"$1-!!- -!!-$2");var Me=ye.split(/-!!-/g);e.loop(Me,function(Ne,ge){Ne.match(/[\u0591-\u07FF]/i)&&(Me[ge]=Ne.split(" ").reverse().join(" "))}),ye=Me.join("")}ye=ye.replace(/\n|\r/g,"<br>"),ye=ye.replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>"),ye=ye.replace(/<\/strong>/gi,"</b>"),ye=ye.replace(/<em>|<em \/>|<em\/>/gi,"<i>"),ye=ye.replace(/<\/em>/gi,"</i>"),ye=ye.replace(/\\n|\\r/g,"<br>"),ye=ye.replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>"),ye=ye.replace(/<b/gi,"<b"),ye=ye.replace(/<i/gi,"<i"),ye=ye.replace(/<u/gi,"<u"),ye=ye.replace(/<br/gi,"<br"),ye=ye.replace(/<a/gi,"<a"),ye=ye.replace(/<font/gi,"<font");var Be=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g],he=["b","a","i","u","font"],Ae;e.loop(he,function(Ne,ge){Ae=ye.replace(Be[ge*2],"");var Ue;Ne=="font"?Ue=Ae.split("<font "):Ne=="a"?Ue=Ae.split("<a "):Ue=Ae.split("<"+Ne+">"),me(Ue,Ne,0),Ae=ye.replace(Be[ge*2+1],""),Ue=Ae.split("</"+Ne+">"),me(Ue,Ne,1)}),Ae=ye.replace(/<br>/gi,"@^#"),Ae=Ae.replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"");var Ce=Ae.split("@^#");b=Ce.join("\n"),Ae=Ce.join(""),me(Ce,"br",0);function me(Ne,ge,Ue){if(Ne.length>1)if((ge=="font"||ge=="a")&&Ue==0){var He=Ne[0].length;e.loop(Ne,function(fe,Xe){if(Xe!=0){var Ze=Re[He];Ze||(Re[He]=[]),Ze=Re[He];var Ke=fe.split(">");Ze[Ue]?Ze[Ue].push(ge+" "+Ke[0]):Ze[Ue]=[ge+" "+Ke[0]],He+=Ke[1].length}})}else{Ne.pop();var Oe=0;e.loop(Ne,function(fe){Oe+=fe.length;var Xe=Re[Oe];Xe||(Re[Oe]=[]),Xe=Re[Oe],Xe[Ue]?Xe[Ue].push(ge):Xe[Ue]=[ge]})}}return{text:Ae,data:Re,original:b}}L.numLetters=t.text.length;var V=!n(l);l&&!Array.isArray(l)&&(l=null);var I;if(l)for(I=0;I<L.numLetters;I++)n(l[I])&&(l[I]=o);else for(l=[],I=0;I<L.numLetters;I++)l.push(o);if(L.letterSpacings=l,h&&!Array.isArray(h)&&(h=null),h)for(I=0;I<L.numLetters-1;I++)n(h[I])&&(h[I]=f);else for(h=[],I=0;I<L.numLetters-1;I++)h.push(f);L.lineSpacings=h,L.labels=[],L.lines=[[]];var ne=[],R=[],Q=[0],U=0,ee=0,ae=0,ie=0,ce=0,j=A,G=!1,y=!1,p=!1,d=!1,D=!1,K=!1,w=!1,Y=!1,Ee=!1,X=!1,Z=!1,pe=!1;for(L.rolls=[[]],I=0;I<L.numLetters;I++){d=!1,j[I]&&(j[I][1]&&(j[I][1].indexOf("b")>=0&&(G=!1),j[I][1].indexOf("i")>=0&&(y=!1),j[I][1].indexOf("u")>=0&&(p=!1),e.loop(j[I][1],function(ye){if(ye.match(/^font/i)){D=!1,Z=!1,pe&&L.rolls.push([]),pe=!1,K=!1,Y=!1,w=!1;return}if(ye.match(/^a/i)){Ee=!1,X=!1;return}})),j[I][0]&&(j[I][0].indexOf("b")>=0&&(G=!0),j[I][0].indexOf("i")>=0&&(y=!0),j[I][0].indexOf("u")>=0&&(p=!0),d=0,e.loop(j[I][0],function(ye){ye=="br"&&d++}),e.loop(j[I][0],function(ye){var Re,de;if(ye.match(/^font/i)){Re=ye.match(/ color\s?=\s?(\S*)/i),Re&&(D=Re[1],de=e.colors.indexOf(D),de>=0&&(D=e.colorsHex[de]),D=D.replace(/'/g,"")),Re=ye.match(/size\s?=\s?(\S*)/i),Re&&(K=Re[1]),Re=ye.match(/backgroundColor\s?=\s?(\S*)/i),Re&&(Z=Re[1],de=e.colors.indexOf(Z),de>=0&&(Z=e.colorsHex[de]),Z=Z.replace(/'/g,"")),Re=ye.match(/rollBackgroundColor\s?=\s?(\S*)/i),Re&&(pe=Re[1],de=e.colors.indexOf(pe),de>=0&&(pe=e.colorsHex[de]),pe=pe.replace(/'/g,"")),Re=ye.match(/group\s?=\s?(\S*)/i),Re&&(w=Re[1]),Re=ye.match(/family\s?=\s?(.*)/i),Re&&(Y=Re[1],Y=Y.split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]);return}if(ye.match(/^a/i)){Re=ye.match(/href\s?=\s?(\S*)/i),Re&&(Ee=Re[1]),Re=ye.match(/target\s?=\s?(\S*)/i),Re&&(X=Re[1]);return}})));var ve;w?ve=new e.Label({text:t.text[I],group:w}):(ve=t.clone(),ve.text=t.text[I]),L.labels.push(ve),G&&(ve.bold=!0),y&&(ve.italic=!0),D&&(ve.color=D),Z&&(ve.backgroundColor=Z);var $=V||n(ve.backgroundColor)?l[I]:-.5;pe&&(ve.rollIndex=L.rolls.length-1,ve.zrbc=pe,ve.zobc=ve.backgroundColor,L.rolls[ve.rollIndex].push(ve),ve.expand(0),ve.on("mouseover",ue),ve.on("mouseout",xe)),Ee&&(ve.expand($,0),ve.zurl=Ee,ve.ztar=X,ve.cur(),ve.on("click",function(ye){var Re=ye.currentTarget;xe(ye),Re.ztar||(Re.ztar="_self"),or(Re.zurl,Re.ztar)})),Y&&(ve.font=Y),K&&(ve.size=K),d&&(U+=(n(g)?ae:g)+h[ie],Q.push(U),R.push(n(g)?ae:g),ne.push(ee),ce=Math.max(ce,ee)),d&&(d>1&&e.loop(d-1,function(){L.lines.push([]),U+=(n(g)?ae:g)+h[ie],Q.push(U),R.push(n(g)?ae:g),ne.push(0),ie++}),ae=0,ee=0,L.lines.push([]),ie++),ee+=ve.width+$,ae=Math.max(ae,ve.height),I==L.numLetters-1&&(ne.push(ee),R.push(ae),ce=Math.max(ce,ee)),L.lines[ie].push(ve),p&&(ve.underline=new e.Line(ve.width+$+1,1,ve.color).center(ve,this).mov(0,ve.height/2))}function ue(ye){var Re=ye.currentTarget,de=L.rolls[Re.rollIndex];e.loop(de,function(Me){Me.backgroundColor=Re.zrbc}),Re.stage&&Re.stage.update()}function xe(ye){var Re=ye.currentTarget,de=L.rolls[Re.rollIndex];e.loop(de,function(Me){Me.backgroundColor=Re.zobc}),Re.stage&&Re.stage.update()}for(var Ye=0,se=0;se<L.lines.length;se++){var be=L.lines[se];ee=ne[se],ae=R[se],U=Q[se];var te,_e;for(_=="left"?te=0:_=="right"?te=ce-ee:te=(ce-ee)/2,_e=U,I=0;I<be.length;I++){Ye++,C&&ve.cache(),ve=be[I],ve.regX=r=="left"?0:r=="right"?ve.width:ve.width/2,ve.regY=i=="top"?0:i=="bottom"?ve.height:ve.height/2;var J=_e+(i=="top"?0:i=="bottom"?ve.height:ve.height/2);P=="center"||P=="middle"?J+=(R[se]-ve.height)/2:P=="bottom"&&(J+=R[se]-ve.height),$=V||n(ve.backgroundColor)?l[Ye-1]:-.5,r=="left"?(ve.loc(te,J,this),te=ve.x+ve.width+$):r=="right"?(ve.loc(te+ve.width,J,this),te=ve.x+$):(ve.loc(te+ve.width/2,J,this),te=ve.x+ve.width/2+$)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(ye){this._color=ye;for(var Re=0;Re<L.numChildren;Re++)L.getChildAt(Re).color=this._color;L.stage&&L.stage.update()}}),this.dispose=function(){e.gD(this),e.loop(L.labels,function(ye){ye.removeFrom(),ye.dispose()}),L.removeFrom()},N!==!1&&e.styleTransforms(this,E),this.clone=function(){return L.cloneProps(new e.LabelLetters(t,r,i,o,l,f,h,g,_,P,C,T,N,this.group,S))}},e.extend(e.LabelLetters,e.Container,"clone","zimContainer",!1),e.Emoji=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x){var E="code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingH, paddingV, shiftH, shiftV, style, group, inherit",L;if(L=mt(e.Emoji,arguments,E,this))return L;qe("54.58"),this.group=k;var A=S===!1?{}:e.getStyle("Emoji",this.group,x);n(t)&&(t=A.code!=null?A.code:"\u{1F642}"),n(r)&&(r=A.size!=null?A.size:30),n(i)&&(i=A.monochrome!=null?A.monochrome:!1),n(o)&&(o=A.italic!=null?A.italic:!1),(n(l)||l=="ignore")&&(l=A.backgroundColor!=null&&l!="ignore"?A.backgroundColor:null),n(f)&&(f=A.backgroundBorderColor!=null&&f!="ignore"?A.backgroundBorderColor:null),n(h)&&(h=A.backgroundBorderWidth!=null&&h!="ignore"?A.backgroundBorderWidth:null),(n(P)||P=="ignore")&&(P=A.padding!=null&&P!="ignore"?A.padding:10),n(C)&&(C=A.paddingH!=null?A.paddingH:P),n(T)&&(T=A.paddingV!=null?A.paddingV:P),n(N)&&(N=A.shiftH!=null?A.shiftH:0),n(O)&&(O=A.shiftV!=null?A.shiftV:0);var b=F(t,r);this.veeObj={code:b[0],size:b[1]};function F(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),t.substring(0,2)=="U+"&&(t=e.unicodeToUTF(t)),this.zimLabel_constructor(t,r,null,null,null,null,null,null,null,null,o,null,null,null,_,null,null,l,null,null,g,null,P,C,T,N,O),this.type="Emoji",this.code=t,this.size=r;var q=this,V=this.getBounds(),I=5,ne=3;this.bounds=this.setBounds(V.x+ne,V.y-I+1,V.width-ne*2,V.height+I),i&&(this.saturation=-100);var R=i;Object.defineProperty(q,"monochrome",{get:function(){return R},set:function(Q){Q!=R&&(R=Q,Q&&(this.saturation=Q?-100:0))}}),this.cache=function(Q,U,ee,ae){return n(Q)?(U=this.getBounds(),this.zimLabel_cache(U.x-20,U.y-20,U.width+40,U.height+40)):this.zimLabel_cache(Q,U,ee,ae),q.z_bc=q.canvas=q.cacheCanvas,this},S!==!1&&e.styleTransforms(this,A),this.clone=function(Q){return q.cloneProps(new e.Emoji(Q||!e.isPick(b[0])?t:b[0],Q||!e.isPick(b[1])?q.size:b[1],i,o,l,f,h,g,_,P,C,T,N,O,S,q.group,x))}},e.extend(e.Emoji,e.Label,["clone","cache"],"zimLabel",!1),e.Button=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye,Re,de,Me,Be,he,Ae,Ce,me,Ne,ge,Ue){var He="width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentH, indentV, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",Oe;if(Oe=mt(e.Button,arguments,He,this))return Oe;qe("55"),this.group=ge;var fe=Ne===!1?{}:e.getStyle("Button",ge,Ue);n(t)&&(t=fe.width!=null?fe.width:200),n(r)&&(r=fe.height!=null?fe.height:60),n(le.M)&&(le.M=e.mobile());var Xe=h,Ze=g,Ke=_;n(h)&&(h=fe.color!=null?fe.color:e.white),n(g)&&(g=fe.rollColor!=null?fe.rollColor:e.white),n(ie)&&(ie=fe.autoPadding!=null?fe.autoPadding:20),n(ce)&&(ce=fe.autoPaddingH!=null?fe.autoPaddingH:ie),n(j)&&(j=fe.autoPaddingV!=null?fe.autoPaddingV:ie),n(ne)&&(ne=fe.align!=null?fe.align:"center"),n(R)&&(R=fe.valign!=null?fe.valign:"center"),n(i)&&(n(x)?i=fe.label!=null?fe.label:"PRESS":i=""),typeof i=="string"||typeof i=="number"?i=new e.Label({text:i,size:fe.size!=null?fe.size:36,font:fe.font!=null?fe.font:"arial",color:fe.color!=null&&Xe==null?fe.color:h,rollColor:fe.rollColor&&Ze==null!=null?fe.rollColor:g,align:ne,valign:R,rollPersist:fe.rollPersist!=null?fe.rollPersist:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftV:fe.shiftV!=null?fe.shiftV:0,shiftH:fe.shiftH!=null?fe.shiftH:0,style:!1,group:this.group}):(n(Xe)||(i.color=Xe),h=i.color,(n(i.rollColor)||!n(Ze))&&(i.rollColor=g),g=i.rollColor),n(_)&&(_=fe.downColor!=null?fe.downColor:g),t=="auto"&&(t=i.width+ce*2),r=="auto"&&(r=i.height+j*2),this.zimContainer_constructor(t,r,null,null,!1),this.type="Button",n(o)&&(o=fe.backgroundColor!=null?fe.backgroundColor:e.purple),n(l)&&(l=fe.rollBackgroundColor!=null?fe.rollBackgroundColor:o.lighten(.2)),n(f)&&(f=fe.downBackgroundColor!=null?fe.downBackgroundColor:l);var ut=gt(o,l,f,h,g,_);this.veeObj={backgroundColor:ut[0],rollBackgroundColor:ut[1],downBackgroundColor:ut[2],color:ut[3],rollColor:ut[4],downColor:ut[5]};function gt(){return arguments}o=dt(o),l=dt(l),f=dt(f),h=dt(h),g=dt(g),_=dt(_);var We=P,it=C;n(P)&&(P=fe.borderColor!=null?fe.borderColor:null),n(C)&&(C=fe.borderWidth!=null?fe.borderWidth:null),P<0||C<0?P=C=null:P!=null&&C==null&&(C=1),n(T)&&(T=fe.rollBorderColor!=null?fe.rollBorderColor:P),n(N)&&(N=fe.downBorderColor!=null?fe.downBorderColor:T),n(A)&&(A=fe.corner!=null?fe.corner:10),n(F)&&(F=fe.shadowColor!=null?fe.shadowColor:"rgba(0,0,0,.3)"),n(q)&&(q=fe.shadowBlur!=null?fe.shadowBlur:14),n(ae)&&(ae=fe.hitPadding!=null?fe.hitPadding:0),n(Q)&&(Q=fe.indent!=null?fe.indent:10),n(U)&&(U=fe.indentH!=null?fe.indentH:Q),n(ee)&&(ee=fe.indentV!=null?fe.indentV:Q),n(V)&&(V=fe.gradient!=null?fe.gradient:0),n(I)&&(I=fe.gloss!=null?fe.gloss:0);var ct=(!n(y)||!n(Ee)||!n(X)||!n(Z)||!n(pe)||!n(ve)||!n($))&&n(xe)&&n(Re)&&n(de);ct&&n(ue)&&(ue=le.M?"mousedown":"click"),n(G)&&(G=fe.rollPersist!=null?fe.rollPersist:!1),this.rollPersist=G,n(b)&&(b=fe.dashed!=null?fe.dashed:!1),!n(y)&&y.type=="Label"&&Et&&ht("Button() - do not pass Label to toggle parameter - just pass a String"),n(p)&&(p=fe.toggleBackgroundColor!=null?fe.toggleBackgroundColor:o),n(d)&&(d=fe.rollToggleBackgroundColor!=null?fe.rollToggleBackgroundColor:l),n(D)&&(D=fe.downToggleBackgroundColor!=null?fe.downToggleBackgroundColor:d),n(K)&&(K=fe.toggleColor!=null?fe.toggleColor:i.color),n(w)&&(w=fe.rollToggleColor!=null?fe.rollToggleColor:i.rollColor),n(Y)&&(Y=fe.downToggleColor!=null?fe.downToggleColor:i.rollToggleColor),n(se)&&(se=fe.waitBackgroundColor!=null?fe.waitBackgroundColor:o),n(be)&&(be=fe.rollWaitBackgroundColor!=null?fe.rollWaitBackgroundColor:l),n(te)&&(te=fe.downWaitBackgroundColor!=null?fe.downWaitBackgroundColor:l),n(_e)&&(_e=fe.waitColor!=null?fe.waitColor:i.color),n(J)&&(J=fe.rollWaitColor!=null?fe.rollWaitColor:i.rollColor),n(ye)&&(ye=fe.downWaitColor!=null?fe.downWaitColor:J);var Pe=this;this.mouseChildren=!1,this.cur("pointer"),Pe.focus=!1,Pe.rolled=!1;var Fe=v(Ye);n(O)&&(O=fe.backing!=null?fe.backing.clone():null),n(O)?Pe.backing=new e.Rectangle(t,r,o,null,null,A,b,null,null,!1).centerReg(null,null,!1):Pe.backing=O,Pe.rollBacking=n(S)?fe.rollBacking!=null?fe.rollBacking.clone():null:S,Pe.downBacking=n(k)?fe.downBacking!=null?fe.downBacking.clone():null:k,Pe.waitBacking=n(Re)?fe.waitBacking!=null?fe.waitBacking.clone():null:Re,Pe.rollWaitBacking=n(de)?fe.rollWaitBacking!=null?fe.rollWaitBacking.clone():null:de,Pe.downWaitBacking=n(Me)?fe.downWaitBacking!=null?fe.downWaitBacking.clone():null:Me,Pe.toggleBacking=n(Ee)?fe.toggleBacking!=null?fe.toggleBacking.clone():null:Ee,Pe.rollToggleBacking=n(X)?fe.rollToggleBacking!=null?fe.rollToggleBacking.clone():null:X,Pe.downToggleBacking=n(Z)?fe.downToggleBacking!=null?fe.downToggleBacking.clone():null:Z;var we=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],je,st,Je;for(Je=0;Je<we.length;Je++)je=we[Je],st=Pe[je],st&&(st.type=="Pattern"?st=tt(je,st):F!=-1&&q>0&&(st.shadow=new ze.Shadow(F,3,3,q)),st.x=t/2,st.y=r/2);Pe.addChild(Pe.backing),C&&(Pe.border=new e.Rectangle(t,r,"rgba(0,0,0,0)",P,C,A,b,null,null,!1),Pe.addChild(Pe.border));function tt(wt,Bt){if(Pe[wt]=new e.Container(t,r,null,null,!1).centerReg(null,null,!1),F!=-1&&q>0){var Ht=new e.Rectangle(t-2,r-2,"#666",null,null,A,null,null,null,!1).center(Pe[wt]);Ht.shadow=new ze.Shadow(F,3,3,q)}var Jt=Pe[wt].mask=new e.Rectangle(t,r,wt.indexOf("roll")>=0?l:o,null,null,A,null,null,null,!1).addTo(Pe[wt]);return Bt.centerReg(Jt),Bt.setMask(Jt.shape),Pe[wt].pattern=Bt,Pe[wt]}Pe.icon=n(x)?fe.icon!=null?fe.icon.clone():null:x,Pe.rollIcon=n(E)?fe.rollIcon!=null?fe.rollIcon.clone():null:E,Pe.downIcon=n(L)?fe.downIcon!=null?fe.downIcon.clone():null:L,Pe.waitIcon=n(Be)?fe.waitIcon!=null?fe.waitIcon.clone():null:Be,Pe.rollWaitIcon=n(he)?fe.rollWaitIcon!=null?fe.rollWaitIcon.clone():null:he,Pe.downWaitIcon=n(Ae)?fe.downWaitIcon!=null?fe.downWaitIcon.clone():null:Ae,Pe.toggleIcon=n(pe)?fe.toggleIcon!=null?fe.toggleIcon.clone():null:pe,Pe.rollToggleIcon=n(ve)?fe.rollToggleIcon!=null?fe.rollToggleIcon.clone():null:ve,Pe.downToggleIcon=n($)?fe.downToggleIcon!=null?fe.downToggleIcon.clone():null:$;var Te=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(Je=0;Je<Te.length;Je++){var et=Te[Je],Ve=Pe[et];Ve&&(Ve.x=t/2,Ve.y=r/2)}if(Pe.icon&&Pe.addChild(Pe.icon),Array.isArray(A)||(A=[A,A,A,A]),V>0){var Le=new ze.Shape;Le.graphics.lf(["rgba(255,255,255,"+V+")","rgba(0,0,0,"+V+")"],[0,1],0,0,0,r-C),Le.graphics.rc(C/2,C/2,t-C,r-C,A[0],A[1],A[2],A[3]),this.addChild(Le)}if(I>0){var Qe=new ze.Shape;Qe.graphics.f("rgba(255,255,255,"+I+")"),Qe.graphics.rc(C/2,C/2,t-C,(r-C)/2,A[0],A[1],0,0),Qe.graphics.f("rgba(0,0,0,"+I+")"),Qe.graphics.rc(C/2,r/2,t-C,(r-C)/2,0,0,A[2],A[3]),this.addChild(Qe)}var $e,nt;ae>0&&pt();function pt(){nt=new ze.Shape,nt.graphics.f("#000").r(-ae,-ae,t+ae*2,r+ae*2),Pe.hitArea=$e=nt}this.addChild(i),i.center(this),i.y+=1,this.label=i,e.pos(i,ne=="left"||ne=="right"?U:null,R=="top"||R=="bottom"?ee:null,ne=="right",R=="bottom");var De=i.color;if(this.toggled=!1,ct){var at=i.text,yt=i.color,rt=i.rollColor;this.on(ue,function(){Pe.toggled=!Pe.toggled,Tt()})}function Tt(){Pe.toggled?(n(y)||(Pe.label.text=y===!0?at:y),n(K)||(Pe.label.colorOnly=De=K),n(w)||(Pe.label.rollColor=w),Pe.rolled?(Pe.rollToggleBacking?Ot("rollToggleBacking"):Pe.toggleBacking&&Ot("toggleBacking"),Pe.rollToggleIcon?Ot("rollToggleIcon"):Pe.toggleIcon&&Ot("toggleIcon"),n(O)&&n(Pe.rollToggleBacking)&&(Pe.backing.color=d)):(Pe.toggleBacking&&Ot("toggleBacking"),Pe.toggleIcon&&Ot("toggleIcon"),n(O)&&(Pe.backing.color=p))):(Pe.label.colorOnly=De=yt,Pe.label.rollColor=rt,Pe.rolled&&Pe.label.showRollColor(!0),Pe.label.text=at,xt()),Pe.stage&&Pe.stage.update()}function xt(){Pe.pressed?(n(O)&&Pe.backing&&!Pe.downBacking&&(Pe.backing.color=f),Pe.downBacking?Ot("downBacking"):Pe.rollBacking?Ot("rollBacking"):Pe.backing&&Ot("backing"),Pe.downIcon?Ot("downIcon"):Pe.rollIcon?Ot("rollIcon"):Pe.icon?Ot("icon"):Ot("icon",null)):Pe.rolled?(n(O)&&Pe.backing&&!Pe.rollBacking&&(Pe.backing.color=l),Pe.rollBacking?Ot("rollBacking"):Pe.backing&&Ot("backing"),Pe.rollIcon?Ot("rollIcon"):Pe.icon?Ot("icon"):Ot("icon",null)):(n(O)&&Pe.backing&&(Pe.backing.color=o),Pe.backing&&Ot("backing"),Pe.icon,Ot("icon"))}this.toggle=function(wt){return ct?(n(wt)?Pe.toggled=!Pe.toggled:Pe.toggled=wt,Tt(),Pe):(Et&&ht("Button() - can't toggle with wait parameters provided"),Pe)};var Ct=!1;Pe.waiting=!1;var lt=!1,Dt,Mt,St=Pe.label.color,Ft=Pe.label.rollColor,Yt,$t,sn=this.on("mousedown",function(){Ct=!0,nn()});function nn(){(!n(xe)||!n(Re)||!n(de))&&!Pe.waiting&&(lt=!0,n(me)&&(me=!0),Ce&&($t=Pe.stage.on("stagemousedown",function(wt){Pe.hitTestPoint(wt.stageX/e.scaX,wt.stageY/e.scaY)||Pe.clearWait()},null,!0)),setTimeout(function(){Pe.waiting=!0},50),Mt=i.text,n(_e)||(Pe.label.colorOnly=De=_e),n(J)||(Pe.label.rollColor=J),Yt=Pe.enabled,!me&&Pe.enabled&&(Pe.enabled=!1),n(xe)||(Pe.label.text=xe),Pe.rolled?(n(O)&&!Pe.rollWaitBacking&&(Pe.backing.color=be),Pe.rollWaitBacking?Ot("rollWaitBacking"):Pe.waitBacking&&Ot("waitBacking"),Pe.rollWaitIcon?Ot("rollWaitIcon"):Pe.waitIcon&&Ot("waitIcon")):(n(O)&&!Pe.waitBacking&&(Pe.backing.color=se),Pe.waitBacking&&Ot("waitBacking"),Pe.waitIcon&&Ot("waitIcon")),n(Ye)&&(Ye=Fe=="s"?5:5e3),Dt&&Dt.clear(),Dt=e.timeout(Ye,function(){Pe.enabled||(Pe.enabled=Yt),Pe.clearWait(),Pe.dispatchEvent("waited")}),Pe.stage&&Pe.stage.update())}this.wait=nn,this.clearWait=function(){return Dt&&($t&&Pe.stage.off("stagemousedown",$t),Dt.clear(),Pe.label.text=Mt,xt(),Pe.label.colorOnly=De=St,Pe.label.rollColor=Ft,setTimeout(function(){Pe.waiting=!1},55),lt=!1,Pe.stage&&Pe.stage.update()),Pe},this.removeWait=function(){return Pe.clearWait(),xe=null,Pe.waitBacking=null,Pe.rollWaitBacking=null,Pe.off("mousedown",sn),Pe};function Ot(wt,Bt){var Ht;if(wt.indexOf("con")>=0){for(Ht=0;Ht<Te.length;Ht++){var Jt=Te[Ht],cn=Pe[Jt];Pe.removeChild(cn)}Pe[wt]&&Pe.addChildAt(Pe[wt],1)}else{if(!Pe[wt]&&!Bt)return;for(Ht=0;Ht<we.length;Ht++){var jt=we[Ht],an=Pe[jt];Pe.removeChild(an)}Pe[wt]&&Pe.addChildAt(Pe[wt],0)}}var Zt=!1;this.on("mouseover",function(wt){Pe.stage&&Pe.stage.frame.leftMouseDown&&!bt||ot()});function ot(){Pe.rolled=!0,Zt=!0,lt?(Pe.pressed&&Pe.downWaitBacking?Ot("downWaitBacking"):Pe.pressed&&Pe.downBacking?Ot("downBacking"):Pe.rollWaitBacking?Ot("rollWaitBacking"):Pe.waitBacking?Ot("waitBacking"):Pe.rollBacking?Ot("rollBacking"):Ot("backing"),Pe.pressed&&Pe.downWaitIcon?Ot("downWaitIcon"):Pe.rollWaitIcon?Ot("rollWaitIcon"):Pe.waitIcon?Ot("waitIcon"):Pe.rollIcon?Ot("rollIcon"):Ot("icon",!0)):ct&&Pe.toggled?(Pe.pressed&&Pe.downToggleBacking?Ot("downToggleBacking"):Pe.pressed&&Pe.downBacking?Ot("downBacking"):Pe.rollToggleBacking?Ot("rollToggleBacking"):Pe.toggleBacking?Ot("toggleBacking"):Pe.rollBacking?Ot("rollBacking"):Ot("backing"),Pe.pressed&&Pe.downToggleIcon?Ot("downToggleIcon"):Pe.rollToggleIcon?Ot("rollToggleIcon"):Pe.toggleIcon?Ot("toggleIcon"):Pe.rollIcon?Ot("rollIcon"):Ot("icon",!0)):(Pe.pressed&&Pe.downBacking?Ot("downBacking"):Pe.rollBacking?Ot("rollBacking"):Ot("backing"),Pe.pressed&&Pe.downIcon?Ot("downIcon"):Pe.rollIcon?Ot("rollIcon"):Ot("icon",!0)),Pe.pressed?n(O)&&Pe.backing?Pe.backing.color=f:O&&!n(O.mask)&&Pe.backing&&(Pe.backing.mask.color=f):n(O)&&Pe.backing?Pe.backing.color=l:O&&!n(O.mask)&&Pe.backing&&(Pe.backing.mask.color=l),Pe.border&&(Pe.border.borderColor=Pe.pressed?N:T),Pe.pressed?Pe.label.colorOnly=_:Pe.label.showRollColor?Pe.label.showRollColor():Pe.label.colorOnly=De,Pe.stage&&Pe.stage.update()}var bt=!1;this.on("mousedown",function(){Pe.pressed=bt=!0,ot(),Pe.rolled}),this.on("pressup",function(){Pe.pressed=bt=Ct=!1,Zt?ot():Pe.rollPersist&&Ut(),le.M&&Rt()}),this.on("pressmove",function(){var wt=Pe.stage?Pe.stage.frame:le.zdf,Bt=Pe.hitTestPoint(wt.mouseX,wt.mouseY);bt&&!Bt?(Rt(),bt=!1):!bt&&Bt&&(ot(),bt=!0)}),this.on("mouseout",Rt);function Rt(){Zt=!1,Pe.rollPersist&&Ct||Ut()}function Ut(){Pe.rolled=!1,lt||Pe.waiting?(n(O)&&Pe.backing&&n(Pe.waitBacking)&&(Pe.backing.color=n(se)?o:se),Pe.waitBacking?Ot("waitBacking"):Pe.backing&&Ot("backing"),Pe.waitIcon?Ot("waitIcon"):Pe.icon?Ot("icon"):Ot("icon",null)):Pe.toggled&&ct?(n(O)&&Pe.backing&&n(Pe.toggleBacking)&&(Pe.backing.color=p),Pe.toggleBacking?Ot("toggleBacking"):Pe.backing&&Ot("backing"),Pe.toggleIcon?Ot("toggleIcon"):Pe.icon?Ot("icon"):Ot("icon",null)):(n(O)&&Pe.backing?Pe.backing.color=o:O&&!n(O.mask)&&Pe.backing&&(Pe.backing.mask.color=o),Pe.backing&&Ot("backing"),Pe.icon?Ot("icon"):Ot("icon",null)),Pe.border&&(Pe.border.borderColor=P),Pe.label.colorOnly=De,Pe.label.showRollColor&&Pe.label.showRollColor(!1),Pe.stage&&Pe.stage.update()}Pe.removeRoll=Ut,Pe.rollBacking&&Pe.rollBacking.removeFrom(),Object.defineProperty(Pe,"text",{get:function(){var wt=i.text==" "?"":i.text;return wt},set:function(wt){i.text=wt,at&&(at=wt),i.center(this),i.y+=1,e.pos(i,ne=="left"||ne=="right"?U:null,R=="top"||R=="bottom"?ee:null,ne=="right",R=="bottom")}}),Object.defineProperty(Pe,"color",{get:function(){return h},set:function(wt){h=wt,yt&&(yt=h),Pe.label&&!n(Pe.label.color)&&(Pe.label.color=De=h),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Pe.stage&&Pe.stage.update()}}),Object.defineProperty(Pe,"rollColor",{get:function(){return g},set:function(wt){g=wt,rt&&(rt=g),Pe.label&&(Pe.label.rollColor=g)}}),Object.defineProperty(Pe,"downColor",{get:function(){return _},set:function(wt){_=wt,originalDownColor&&(originalDownColor=_),Pe.label&&(Pe.label.downColor=_)}}),Object.defineProperty(Pe,"backgroundColor",{get:function(){return o},set:function(wt){o=wt,Pe.backing.color?Pe.backing.color=o:Pe.backing.mask&&(Pe.backing.mask.color=o),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Pe.stage&&Pe.stage.update()}}),Object.defineProperty(Pe,"rollBackgroundColor",{get:function(){return l},set:function(wt){l=wt,Pe.rollBacking&&Pe.rollBacking.color?Pe.rollBacking.color=l:Pe.rollBacking&&Pe.rollBacking.mask&&(Pe.rollBacking.mask.color=l)}}),Object.defineProperty(Pe,"toggleBackgroundColor",{get:function(){return p},set:function(wt){p=wt,Pe.toggleBacking&&Pe.toggleBacking.color?Pe.toggleBacking.color=p:Pe.toggleBacking&&Pe.toggleBacking.mask&&(Pe.toggleBacking.mask.color=p)}}),Object.defineProperty(Pe,"rollToggleBackgroundColor",{get:function(){return d},set:function(wt){d=wt,Pe.rollToggleBacking&&Pe.rollToggleBacking.color?Pe.rollToggleBacking.color=d:Pe.rollToggleBacking&&Pe.rollToggleBacking.mask&&(Pe.rollToggleBacking.mask.color=d)}}),Object.defineProperty(Pe,"downBackgroundColor",{get:function(){return f},set:function(wt){f=wt,Pe.downBacking&&Pe.downBacking.color?Pe.downBacking.color=f:Pe.downBacking&&Pe.downBacking.mask&&(Pe.downBacking.mask.color=f)}}),Object.defineProperty(Pe,"borderColor",{get:function(){return P},set:function(wt){P=wt,Pe.rolled||(Pe.backing&&Pe.backing.borderColor&&(Pe.backing.borderColor=wt),Pe.border&&(Pe.border.borderColor=wt))}}),Object.defineProperty(Pe,"rollBorderColor",{get:function(){return T},set:function(wt){T=wt,Pe.rolled&&(Pe.backing&&Pe.backing.borderColor&&(Pe.backing.borderColor=wt),Pe.border&&(Pe.border.borderColor=wt))}}),Object.defineProperty(Pe,"hitPadding",{get:function(){return ae},set:function(wt){ae=wt,ae==0?$e&&(this.hitArea=null):pt()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(Pe,"enabled",{get:function(){return Pe._enabled},set:function(wt){Pe._enabled&&(Pe.startMouseChildren=Pe.mouseChildren),wt?(c(Pe,wt),Pe.mouseChildren=Pe.startMouseChildren):(Ut(),c(Pe,wt));var Bt=i.color;i.color=De=Bt,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Pe.stage&&Pe.stage.update()}}),this.setBacking=function(wt,Bt){Gt(wt,Bt)},this.setIcon=function(wt,Bt){Gt(wt,Bt)};function Gt(wt,Bt){return n(wt)||(Pe.contains(Pe[wt])&&(Pe.removeChild(Pe[wt]),Bt&&Pe.addChildAt(Bt,wt.indexOf("con")>=0?Pe.numChildren-1:0),Pe.stage&&Pe.stage.update()),Bt?(n(O)&&wt=="backing"&&(O=Bt),Bt.type=="Pattern"&&(Bt=tt(wt,Bt)),Pe[wt]=Bt,Pe[wt].x=t/2,Pe[wt].y=r/2):Pe[wt]=null,xt()),Pe}Ne!==!1&&e.styleTransforms(this,fe),this.clone=function(wt){var Bt=new e.Button(t,r,i.clone(),wt||!e.isPick(ut[0])?o:ut[0],wt||!e.isPick(ut[1])?l:ut[1],wt||!e.isPick(ut[2])?f:ut[2],wt||!e.isPick(ut[3])?h:ut[3],wt||!e.isPick(ut[4])?g:ut[4],wt||!e.isPick(ut[5])?_:ut[5],We,it,T,N,n(O)?null:Pe.backing.clone(),n(S)?null:Pe.rollBacking.clone(),n(k)?null:Pe.downBacking.clone(),n(x)?null:x.clone(),n(E)?null:E.clone(),n(L)?null:L.clone(),A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,n(Ee)?null:Ee.clone(),n(X)?null:X.clone(),n(Z)?null:Z.clone(),n(pe)?null:pe.clone(),n(ve)?null:ve.clone(),n($)?null:$.clone(),ue,xe,Ye,se,be,te,_e,J,ye,n(Re)?null:Re.clone(),n(de)?null:de.clone(),n(Me)?null:Me.clone(),n(Be)?null:Be.clone(),n(he)?null:he.clone(),n(Ae)?null:Ae.clone(),Ce,me,Ne,this.group,Ue);return Pe.cloneProps(Bt)},this.doDispose=function(wt,Bt,Ht){return Pe.icon&&Pe.icon.dispose(),Pe.rollIcon&&Pe.rollIcon.dispose(),Pe.downIcon&&Pe.downIcon.dispose(),Pe.waitIcon&&Pe.waitIcon.dispose(),Pe.rollWaitIcon&&Pe.rollWaitIcon.dispose(),Pe.downWaitIcon&&Pe.downWaitIcon.dispose(),Pe.toggleIcon&&Pe.toggleIcon.dispose(),Pe.rollToggleIcon&&Pe.rollToggleIcon.dispose(),Pe.downToggleIcon&&Pe.downToggleIcon.dispose(),Pe.icon=Pe.rollIcon=Pe.downIcon=Pe.waitIcon=Pe.rollWaitIcon=Pe.downWaitIcon=Pe.toggleIcon=Pe.rollToggleIcon=Pe.downToggleIcon=null,Ht||this.zimContainer_dispose(!0),!0}},e.extend(e.Button,e.Container,["clone","dispose"],"zimContainer",!1),e.Button.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.CheckBox=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k){var x="size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",E;if(E=mt(e.CheckBox,arguments,x,this))return E;qe("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=S;var L=O===!1?{}:e.getStyle(this.type,this.group,k);n(t)&&(t=L.size!=null?L.size:60),n(r)&&(r=L.label!=null?L.label:null),n(i)&&(i=L.startChecked!=null?L.startChecked:!1),n(o)&&(o=L.color!=null?L.color:e.darker),n(l)&&(l=L.backgroundColor!=null?L.backgroundColor:e.white.toAlpha(.8)),n(f)&&(f=L.borderColor!=null?L.borderColor:e.darker),n(h)&&(h=L.borderWidth!=null?L.borderWidth:t/10),f<0||h<0?f=h=null:f!=null&&h==null&&(h=t/10),n(g)&&(g=L.corner!=null?L.corner:0),n(_)&&(_=L.margin!=null?L.margin:t/5),P!="box"&&P!="square"&&P!="x"&&(P=L.indicatorType!=null?L.indicatorType:"check"),n(C)&&(C=L.indicatorColor!=null?L.indicatorColor:h>0?f:e.black),this.setBounds(-_,-_,t+_*2,t+_*2),n(T)&&(T=L.tap!=null?L.tap:!1),n(N)&&(N=L.rtl!=null?L.rtl:le.DIR=="rtl");var A=this;this.cur("pointer");var b=F(r,i);this.veeObj={label:b[0],startChecked:b[1]};function F(){return arguments}r=e.Pick.choose(r),i=e.Pick.choose(i);var q=i;(typeof r=="string"||typeof r=="number")&&(r=new e.Label({text:r,size:t*5/6,color:o,valign:"center",align:N?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:O,group:this.group}));var V=this.box=new e.Rectangle(t,t,l,null,null,g),I=this.box2=new e.Rectangle(t*5/7,t*5/7,"rgba(0,0,0,0)",f,h,g);I.x=t/7,I.y=t/7,this.addChild(V,I);var ne=t;r&&(r.center(A),this.label=r,N?(r.x=-_,this.setBounds(-r.width-_*2,-_,t+_*3+r.getBounds().width,Math.max(t+_*2,r.getBounds().height)),ne=t+r.width+_,this.regX=t):(r.x=A.getBounds().width,this.setBounds(-_,-_,t+_*4+r.getBounds().width,Math.max(t+_*2,r.getBounds().height)),ne=r.x+r.width));var R=new e.Shape({style:!1}),Q=R.graphics;Q.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,ne+_*2,this.getBounds().height),this.hitArea=R;var U=new e.Shape({style:!1}),ee=U.graphics;P=="check"?ee.f(C).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):P=="box"||P=="square"?ee.f(C).dr(-35,-35,70,70):ee.f(C).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var ae=95;U.setBounds(-ae/2,-ae/2,ae,ae);var ie=t/(ae+66);U.scaleX=U.scaleY=ie,U.alpha=.9,U.x=t/2,U.y=t/2,q&&this.addChild(U),T?this.tap(ce):this.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",ce),Object.defineProperty(A,"checked",{get:function(){return q},set:function(j){A.setChecked(j)}}),this.toggle=function(j){n(j)&&(j=!q),A.setChecked(j)},Object.defineProperty(A,"toggled",{get:function(){return q},set:function(j){A.setChecked(j)}}),Object.defineProperty(A,"text",{get:function(){return r?r.text:null},set:function(j){r&&(r.text=j,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&A.stage&&A.stage.update())}}),Object.defineProperty(U,"indicatorColor",{get:function(){return C},set:function(j){q&&A.removeChild(U),U=new ze.Shape,ee=U.graphics,C=j,ee.f(C).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),U.scaleX=U.scaleY=ie,U.alpha=.9,U.x=t/2,U.y=t/2,q&&A.addChild(U),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&A.stage&&A.stage.update()}}),Object.defineProperty(A,"indicator",{get:function(){return U},set:function(){ht("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(A,"enabled",{get:function(){return A._enabled},set:function(j){c(A,j)}});function ce(){q=!q,A.setChecked(q),A.dispatchEvent("change")}this.setChecked=function(j){return n(j)&&(j=!0),q=j,q?A.addChild(U):A.removeChild(U),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&A.stage&&A.stage.update(),A},O!==!1&&e.styleTransforms(this,L),this.clone=function(j){return A.cloneProps(new e.CheckBox(t,j||!e.isPick(b[0])?r?r.clone():null:b[0],j||!e.isPick(b[1])?i:b[1],o,l,f,h,g,_,P,C,T,N,O,this.group,k))}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k){var x="size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, rtl, style, group, inherit",E;if(E=mt(e.RadioButtons,arguments,x,this))return E;qe("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=S;var L=O===!1?{}:e.getStyle(this.type,this.group,k);n(t)&&(t=L.size!=null?L.size:60),t=Math.max(5,t),n(r)&&(r=L.buttons!=null?L.buttons:["A","B","C"]),n(i)&&(i=L.vertical!=null?L.vertical:!0),n(o)&&(o=L.color!=null?L.color:e.darker),n(l)&&(l=L.backgroundColor!=null?L.backgroundColor:"rgba(255,255,255,.8)"),n(f)&&(f=L.borderColor!=null?L.borderColor:e.darker),n(h)&&(h=L.borderWidth!=null?L.borderWidth:t/9),f<0||h<0?f=h=null:f!=null&&h==null&&(h=t/10),n(g)&&(g=i?L.spacing!=null?L.spacing:t*.2:L.spacing!=null?L.spacing:t),n(_)&&(_=L.margin!=null?L.margin:t/5),n(P)&&(P=L.always!=null?L.always:!1),n(C)&&(C=L.indicatorColor!=null?L.indicatorColor:h>0?f:e.black),n(N)&&(N=L.rtl!=null?L.rtl:le.DIR=="rtl");var A=this;this.cur("pointer"),this.labels=[],this.indicators=[];var b=0,F;if(typeof r=="string"){var q=r;r=[];for(var V=0;V<q.length;V++)r.push({label:q[V]})}var I=new e.Container({style:!1});this.addChild(I);function ne(ae){var ie=I.getChildIndex(ae.target);P&&A.selectedIndex==ie||(A.setSelected(ie),A.dispatchEvent("change"))}U();for(var R,Q=0;Q<I.numChildren;Q++)R=I.getChildAt(Q),R.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",ne);function U(){var ae,ie=!1,ce;for(ce=r.length-1;ce>=0;ce--)ae=r[ce],ae.selected&&ae.selected===!0&&(ie?ae.selected="false":(ie=!0,A.id=ae.id));I.removeAllChildren(),A.buttons=[];var j,G=0;for(ce=0;ce<r.length;ce++){if(ae=r[ce],typeof ae=="string"||typeof ae=="number"){var y={selected:!1,label:new e.Label({text:ae,size:t*5/6,color:L.color!=null?L.color:o,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:O,group:A.group})};ae=y}(ae.label&&typeof ae.label=="string"||typeof ae.label=="number")&&(ae.label=new e.Label({text:ae.label,size:L.size!=null?L.size:t*5/6,color:L.color!=null?L.color:o,valign:"center",style:O})),A.labels.push(ae.label),ae.index=ce,r[ce]=ae,j=ee(ae.selected,ae.label),j.type="RadioButton",j.obj=ae,ae.selected&&(F=j.obj),I.addChild(j),i?(j.y=G,G+=j.getBounds().height+g):(j.x=G,G+=j.getBounds().width+g)}}function ee(ae,ie){var ce=new e.Container({style:!1});A.buttons.push(ce),ce.mouseChildren=!1,ce.setBounds(-_,-_,t+_*2,t+_*2);var j=new e.Shape({style:!1}),G=j.graphics;G.f(l).dc(t/2,t/2,t/1.85),G.s(f).ss(h).dc(t/2,t/2,t/2-t/2/5),ce.addChild(j);var y=ce.check=new e.Circle(t/5.2,C,null,null,null,null,null,null,!1);A.indicators.push(y),y.mouseEnabled=!1,y.alpha=.95,y.regX=y.regY=-t/2;var p=t;ie&&(b==0&&(b=ie.width),ce.addChild(ie),ie.y=t/2,ce.text=ie.text,N?(ie.x=-ie.width-_,ce.setBounds(-ie.width-_,-_,t+_*2+ie.getBounds().width,Math.max(t+_*2,ie.getBounds().height)),p=ie.width+_+t):(ie.x=ce.getBounds().width,ce.setBounds(-_,-_,t+_*2+ie.getBounds().width,Math.max(t+_*2,ie.getBounds().height)),p=ie.x+ie.width)),ae&&(ce.addChild(y),A.label=ie,A.label&&(A.text=ie.text));var d=new e.Shape({style:!1});return G=d.graphics,G.f("rgba(0,0,0,.01)").r(ce.getBounds().x,ce.getBounds().y,p+_*2,ce.getBounds().height),ce.hitArea=d,ce}this.getBounds()||this.setBounds(0,0,t,t),N?(this.setBounds(-_*2-b,-_,this.getBounds().width+_*2,this.getBounds().height),this.regX=i?t+_:this.getBounds().width-b-_*3):this.setBounds(-_,-_,this.getBounds().width+_*2,this.getBounds().height),this.setSelected=function(ae){if(n(ae)&&(ae=-1),!(ae!=-1&&!I.getChildAt(ae))){for(var ie,ce=0;ce<I.numChildren;ce++)ie=I.getChildAt(ce),ie.removeChild(ie.check);if(ae>=0){ie=I.getChildAt(ae);var j=-2;F&&(j=F.index),F=ie.obj}return ae==-1||j==F.index?(F=null,A.id=null,A.label=null,A.text=""):(ie.addChild(ie.check),A.id=F.id,A.label=F.label,A.label&&(A.text=A.label.text)),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&A.stage&&A.stage.update(),A}},Object.defineProperty(A,"selected",{get:function(){return F},set:function(){ht("ZIM RadioButton - selected is read only")}}),Object.defineProperty(A,"selectedIndex",{get:function(){return F?F.index:-1},set:function(ae){var ie=ae;A.selectedIndex!=ae&&A.setSelected(ie)}}),this._enabled=!0,Object.defineProperty(A,"enabled",{get:function(){return A._enabled},set:function(ae){c(A,ae)}}),n(T)&&(T=L.selectedIndex!=null?L.selectedIndex:0),A.selectedIndex=T,O!==!1&&e.styleTransforms(this,L),this.clone=function(){for(var ae=e.copy(r),ie=0;ie<ae.length;ie++)ae[ie].label=ae[ie].label.clone();return A.cloneProps(new e.RadioButtons(t,ae,i,o,l,f,h,g,_,P,C,T,N,O,this.group,k))}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Toggle=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F){var q="width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",V;if(V=mt(e.Toggle,arguments,q,this))return V;qe("57.5"),this.group=b;var I=A===!1?{}:e.getStyle("Toggle",this.group,F);n(t)&&(t=I.width!=null?I.width:80),n(r)&&(r=I.height!=null?I.height:50),this.zimContainer_constructor(t,r,null,null,!1),this.type="Toggle",n(l)&&(l=I.backgroundColor!=null?I.backgroundColor:e.purple),n(f)&&(f=I.margin!=null?I.margin:10),n(h)&&(h=I.indicatorType!=null?I.indicatorType:"circle"),n(g)&&(g=I.indicatorColor!=null?I.indicatorColor:e.white),n(P)&&(P=I.toggleBackgroundColor!=null?I.toggleBackgroundColor:l.lighten(.3)),n(C)&&(C=I.color!=null?I.color:e.darker),n(T)&&(T=I.borderColor!=null?I.borderColor:null),n(N)&&(N=I.borderWidth!=null?I.borderWidth:null),T<0||N<0?T=N=null:T!=null&&N==null&&(N=1),n(O)&&(O=I.corner!=null?I.corner:h!="circle"?0:25),n(S)&&(S=I.indicatorCorner!=null?I.indicatorCorner:0),n(k)&&(k=I.shadowColor!=null?I.shadowColor:"rgba(0,0,0,.3)"),n(x)&&(x=I.shadowBlur!=null?I.shadowBlur:14),n(o)&&(o=I.startToggled!=null?I.startToggled:!1);var ne=v(E);n(E)&&(E=I.time!=null?I.time:ne=="s"?.1:100),n(i)&&(i=I.label!=null?I.label:null),n(L)&&(L=I.labelLeft!=null?I.labelLeft:null);var R=this;R.cur("pointer"),(typeof i=="string"||typeof i=="number")&&(i=this.label=new e.Label({text:i,size:I.size||r*5/6,color:C,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),(typeof L=="string"||typeof L=="number")&&(L=this.labelLeft=new e.Label({text:L,size:I.size||r*5/6,color:C,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new e.Rectangle(t,r,l,T,N,O).addTo(this),h=="rectangle"||h=="square"?this.indicator=new e.Rectangle(r*.65,r*.65,g,null,null,S).center(this.background).pos(r*.2,null,o):this.indicator=new e.Circle(r*.35,g).center(this.background).pos(r*.175,null,o);var Q=o;R.background.color=Q?P:l,k!=-1&&x>0&&(this.background.shadow=new ze.Shadow(k,3,3,x)),i&&(this.addChild(i),i.x=t+2+f+N,i.y=r/2,this.label=i,this.setBounds(-f,-f,t+f*3+N+i.getBounds().width,Math.max(r+f*2,i.getBounds().height))),L&&(this.addChild(L),L.x=0,R.background.x+=L.width+3+f+N,R.label.x+=L.width+3+f+N,L.y=r/2,this.labelLeft=L,this.setBounds(-f,-f,R.getBounds().width+L.width+3+f+N,R.getBounds().height)),this.expand(e.mobile()?20:10),this.tap(function(ae){if(L){var ie=R.localToGlobal(L.width+3+f+N+t/2,0);if(ae.stageX/e.scaX<ie.x-t/2&&!Q||ae.stageX/e.scaX>=ie.x+t/2&&Q)return}Q=!Q,ee(),R.dispatchEvent("change")},e.mobile()?20:10);var U=new e.Swipe(this,20,ne=="s"?.2:200);U.on("swipe",function(ae){if(ae.swipeX!=0){{if(ae.swipeX==1&&Q)return;if(ae.swipeX==-1&&!Q)return}Q=!Q,ee(),R.dispatchEvent("change")}});function ee(ae){var ie=R.indicator.x,ce=E;if(ae===!0&&(ce=0),h=="rectangle"||h=="square"?(R.indicator.pos(r*.2,null,Q),E>0&&R.indicator.animate({props:{x:ie},from:!0,time:ce})):(R.indicator.pos(r*.175,null,Q),E>0&&R.indicator.animate({props:{x:ie},from:!0,time:ce})),R.background.color=Q?P:l,R.text=Q?R.label?R.label.text:"on":R.labelLeft?R.labelLeft.text:"off",R.zimAccessibility){var j="Toggle set to "+(Q?R.label?R.label.text+".":"on.":R.labelLeft?R.labelLeft.text+".":"off.");setTimeout(function(){R.zimAccessibility.talk(j)},50)}}Object.defineProperty(R,"textLeft",{get:function(){return L?L.text:null},set:function(ae){L&&(L.text=ae,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&R.stage&&R.stage.update())}}),R.toggle=function(ae,ie){var ce=Q;return n(ae)&&(ae=!0),Q=ae,ce!=Q&&ee(ie),R},R.text=Q?R.label?R.label.text:"on":R.labelLeft?R.labelLeft.text:"off",Object.defineProperty(R,"toggled",{get:function(){return Q},set:function(ae){R.toggle(ae)}}),this._enabled=!0,Object.defineProperty(R,"enabled",{get:function(){return R._enabled},set:function(ae){c(R,ae)}}),A!==!1&&e.styleTransforms(this,I),this.clone=function(){return R.cloneProps(new e.Toggle(t,r,i?i.clone():"",o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L?L.clone():"",A,this.group,F))}},e.extend(e.Toggle,e.Container,"clone","zimContainer",!1),e.Tip=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z){var pe="text, tipAlign, tipValign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",ve;if(ve=mt(e.Tip,arguments,pe,this))return ve;qe("57.6"),this.group=X;var $=Ee===!1?{}:e.getStyle("Tip",this.group,Z);n(t)&&(t=$.text!=null?$.text:"Here's a tip!"),n(o)&&(o=$.margin!=null?$.margin:40),n(l)&&(l=$.marginH!=null?$.marginH:o),n(f)&&(f=$.marginV!=null?$.marginV:o),n(r)&&(r=$.tipAlign!=null?$.tipAlign:"right"),n(i)&&(i=$.tipValign!=null?$.tipValign:"bottom"),n(h)&&(h=$.outside!=null?$.outside:!1),n(I)&&(I=$.backgroundColor!=null?$.backgroundColor:e.blue),n(O)&&(O=$.color!=null?$.color:e.white),n(Q)&&(Q=$.corner!=null?$.corner:25),n(U)&&(U=$.backgroundDashed!=null?$.backgroundDashed:null),n(ee)&&(ee=$.padding!=null?$.padding:10),n(ae)&&(ae=$.paddingH!=null?$.paddingH:ee),n(ie)&&(ie=$.paddingV!=null?$.paddingV:ee),(n(k)||k=="ignore")&&(k=$.shadowColor!=null&&k!="ignore"?$.shadowColor:"rgba(0,0,0,.3)"),(n(x)||x=="ignore")&&(x=$.shadowBlur!=null&&x!="ignore"?$.shadowBlur:1),n(_)&&(_=$.delay!=null?$.delay:0);var ue=v(P);n(P)&&(P=$.time!=null?$.time:ue=="s"?2:2e3),n(C)&&(C=$.mouseClose!=null?$.mouseClose:!0),this.zimLabel_constructor(t,T,N,O,S,null,null,E,L,D,K,w,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,Y,Ee,X,e.copy($)),this.type="Tip",h&&(l=-l,f=-f);var xe=this;xe.tipAlign=r,xe.tipValign=i,this.background.sha(k,3,5,x),this.show=function(Ye,se){var be=v(se);if(n(Ye)&&(Ye=_),n(se)&&(se=P),n(g))if(le.zdf)g=le.zdf.stage;else return xe;else if(g.getBounds){if(n(g.stage))return ht("zim display - Waiter(): The container must have a stage property"),xe}else return ht("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),xe;Ye>0?xe.showID=e.timeout(Ye,te):te();function te(){var _e;g.boundsToGlobal?_e=g.boundsToGlobal():_e=g.getBounds();var J=new e.Container(_e.x,_e.y,_e.width,_e.height);J.zimTemp=!0,J.loc(0,0,g.stage),xe.pos(l,f,xe.tipAlign,xe.tipValign,J),h&&(xe.tipAlign=="right"?xe.x+=xe.width:xe.tipAlign=="left"&&(xe.x-=xe.width),xe.tipValign=="bottom"?xe.y+=xe.height:xe.tipValign=="top"&&(xe.y-=xe.height)),xe.addTo(J.stage),J.zimTemp&&J.removeFrom&&(J.removeFrom(),J=null),J=xe.stage,xe.timeoutID&&xe.timeoutID.clear(),xe.timeoutID=e.timeout(se,function(){xe.hide(),J.stage.update()}),C&&(xe.upID&&J.stage.off("stagemouseup",xe.upID),xe.upID=J.stage.on("stagemouseup",function(){xe.hide(),J.stage&&J.stage.update()})),J.stage&&J.stage.update()}return xe},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&g.stage&&g.stage.off("stagemouseup",this.upID),xe},this.clear=function(){xe.showID&&xe.showID.clear(),xe.hide()},this.dispose=function(Ye,se,be){xe.upID&&xe.stage&&xe.stage.off("stagemouseup",xe.upID),be||this.zimLabel_dispose(!0)},Ee!==!1&&e.styleTransforms(this,$),this.clone=function(){return xe.cloneProps(new e.Tip(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,Y,Ee,this.group,Z))}},e.extend(e.Tip,e.Label,["dispose","clone"],"zimLabel",!1),e.Pane=function(K,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee){var ae="content, backgroundColor, color, width, height, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, autoPadding, autoPaddingH, autoPaddingV, style, group, inherit";if(K&&!K.header&&!K.message&&!K.display&&!K.buttons){var ie;if(ie=mt(e.Pane,arguments,ae,this))return ie}qe("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var ce="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(n(E))if(le.zdf)E=le.zdf.stage;else{ht(ce);return}else if(E.getBounds){if(n(E.getStage)){ht("zim display - Pane(): The container must have a stage property");return}}else{ht(ce);return}this.group=U;var j=Q===!1?{}:e.getStyle(this.type,this.group,ee);n(o)&&(o=j.width!=null?j.width:"auto"),n(l)&&(l=j.height!=null?j.height:"auto"),n(K)&&(K=j.content!=null?j.content:" "),(typeof K=="string"||typeof K=="number")&&(K=new e.Label({text:K,size:j.size!=null?j.size:40,align:j.align!=null?j.align:"center",valign:j.valign!=null?j.valign:"center",color:j.color!=null?j.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse());var G=this.content=K;n(r)&&(r=j.backgroundColor!=null?j.backgroundColor:e.white),n(f)&&(f=j.draggable!=null?j.draggable:!1),n(h)&&(h=j.resets!=null?j.resets:!0),n(g)&&(g=j.modal!=null?j.modal:!0),n(_)&&(_=j.corner!=null?j.corner:20),n(L)&&(L=j.titleBar!=null?j.titleBar:null),n(A)&&(A=j.titleBarColor!=null?j.titleBarColor:null),n(b)&&(b=j.titleBarBackgroundColor!=null?j.titleBarBackgroundColor:null),n(F)&&(F=j.titleBarHeight!=null?j.titleBarHeight:null),n(P)&&(P=j.backdropColor!=null?j.backdropColor:"rgba(0,0,0,.2)"),n(C)&&(C=j.shadowColor!=null?j.shadowColor:"rgba(0,0,0,.3)"),n(T)&&(T=j.shadowBlur!=null?j.shadowBlur:20),n(N)&&(N=j.center!=null?j.center:!0),n(O)&&(O=j.displayClose!=null?j.displayClose:!0),f&&(O=!1),n(S)&&(S=j.backdropClose!=null?j.backdropClose:!0),n(x)&&(x=j.fadeTime!=null?j.fadeTime:0),n(q)&&(q=j.close!=null?j.close:!1),n(V)&&(V=j.closeColor!=null?j.closeColor:e.grey),n(I)&&(I=j.autoPadding!=null?j.autoPadding:70),n(ne)&&(ne=j.autoPaddingH!=null?j.autoPaddingH:I),n(R)&&(R=j.autoPaddingV!=null?j.autoPaddingV:I);var y=this.backdrop=new e.Shape({style:!1}),p=y.graphics;p.f(P),p.drawRect(-5e3,-5e3,1e4,1e4);var d=this;if(this.add=function(te,_e,J,ye){var Re="obj, index, center, replace",de;return(de=mt(d.add,arguments,Re,d))?de:(n(J)&&(J=!0),n(ye)&&(ye=!0),typeof te=="string"&&(te=new oi(te,null,null,i).noMouse()),ye&&d.contentContainer.removeAllChildren(),J?te.center(d.contentContainer,_e):te.addTo(d.contentContainer,_e),d)},G){var D=e.makeContent(G,o,e.dark),w=["header","message","text","display","buttons","config"];w.forEach(function(_e){D[_e]&&(d[_e]=D[_e])}),d.label=d.message,o=="auto"&&(o=D.width+ne*2),l=="auto"&&(l=D.height+R*2)}var K=d.contentContainer=new e.Container(o,l);D&&d.add(D,null,!0),this.setBounds(-o/2,-l/2,o,l);var w=["header","message","text","display","buttons","config"];K&&w.forEach(function(te){K[te]&&(d[te]=K[te])}),d.label=d.message,d.container=E,y.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",S?Ee:function(te){te.stopImmediatePropagation()});var Y=new e.Dictionary(!0);function Ee(te){d.dispatchEvent("closing"),setTimeout(function(){xe(),d.dispatchEvent("close")},10),te.stopImmediatePropagation()}y.on("mousedown",function(te){te.stopImmediatePropagation()}),this.addChild(y),g||y.noMouse();var X;if(n(k))X=this.backing=new e.Rectangle({width:o,height:l,color:r,corner:_,style:!1});else{if(k.type=="Pattern"){var Z=k;X=new e.Rectangle(o,l,r,null,null,_,null,null,null,!1),Z.centerReg(X),Z.setMask(X.shape)}else X=k;d.display=d.backing=X}if(O&&(X.cur("pointer"),X.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",Ee)),C!=-1&&T>0&&(X.shadow=new ze.Shadow(C,8,8,T)),X.on("click",function(te){te.stopImmediatePropagation()}),this.resetX,this.resetY,f){X.cur("pointer");var pe,ve;X.on("mousedown",function(te){isNaN(d.resetX)&&(d.resetX=d.x),isNaN(d.resetY)&&(d.resetY=d.y),pe=te.stageX/e.scaX-d.x,ve=te.stageY/e.scaY-d.y,X.cur("pointer")}),X.on("pressmove",function(te){var _e=be(te.stageX/e.scaX-pe,te.stageY/e.scaY-ve);d.x=_e.x,d.y=_e.y;for(var J,ye=0;ye<d.numChildren;ye++)J=d.getChildAt(ye),(J.type=="TextArea"||J.type=="Loader"||J.type=="Tag")&&J.resize();d.stage.update()}),this.on("pressup",function(){X.cur("pointer"),d.stage&&d.stage.update()})}if(X.centerReg(this),K&&K.center(this),!n(L)){typeof L=="string"&&(L=new e.Label(L,null,null,A));var $=d.titleBarLabel=L;n(F)&&(F=$.height*1.5),n(A)&&(A=e.black),n(b)&&(b="rgba(0,0,0,.2)"),d.titleBar=L=new e.Container(o,F,null,null,!1).centerReg(d).mov(0,-l/2+F/2),L.mouseEnabled=!1,L.mouseChildren=!1,d.titleBar.backing=new e.Rectangle(o,F,b,null,null,[_*.95,_*.95,0,0],null,null,null,!1).addTo(L),$.center(L).pos({x:Math.max(_/2,10),reg:!0})}q&&(q=d.close=new e.Shape(-40,-40,80,80,null,!1),q.graphics.f(V).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),L?q.addTo(d).scaleTo(L,null,50).mov(o/2-Math.max(_/2,10)-q.width/2,-l/2+F/2).expand(40):q.addTo(d).sca(.3).mov(o/2-q.width-3,-l/2+q.height).expand(40),q.cur("pointer"),q.expand(),q.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",Ee)),Object.defineProperty(d,"text",{get:function(){if(d.message){var te=d.message.text==" "?"":d.message.text;return te}else if(d.content.text){var te=d.content.text==" "?"":d.content.text;return te}},set:function(te){d.message?d.message.text=te:d.content.text&&(d.content.text=te)}}),this._enabled=!0,Object.defineProperty(d,"enabled",{get:function(){return d._enabled},set:function(te){c(d,te)}}),this.hide=function(te,_e){return n(te)||(d.closeParams=te),xe(),_e&&(d.dispatchEvent("close"),d.dispatchEvent("change")),d},this.on("removed",ue);function ue(){d.toggled=!1;var te,_e;for(_e=0;_e<d.numChildren;_e++)if(te=d.getChildAt(_e),te.type=="TextArea"||te.type=="Loader"||te.type=="Tag"){var J={obj:te,depth:d.getChildIndex(te)};Y.add(te,J)}for(_e=d.numChildren-1;_e>=0;_e--)te=d.getChildAt(_e),(te.type=="TextArea"||te.type=="Loader"||te.type=="Tag")&&d.removeChild(te);if(!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&d.container.stage.update(),h&&(isNaN(d.resetX)||(d.x=d.resetX),isNaN(d.resetY)||(d.y=d.resetY)),d.zimAccessibility){var ye=d.zimAccessibility;ye.resize(d),Ye?Ye.focus():d.zimTabTag.nextSibling.focus(),setTimeout(function(){ye.talk("Pane has been closed.")},50)}}function xe(){x>0?d.animate({obj:{alpha:0},time:x,call:function(){te(),d.dispatchEvent("fadedout")}}):te();function te(){d.container.removeChild(d),d.closeCall&&d.closeCall(d.closeParams),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&d.container.stage.update(),h&&(isNaN(d.resetX)||(d.x=d.resetX),isNaN(d.resetY)||(d.y=d.resetY))}}var Ye;this.show=function(te,_e){return n(te)||(d.closeCall=te),n(_e)||(d.closeParams=_e),N&&isNaN(d.resetX)&&(d.x=d.container.getBounds().width/2,d.y=d.container.getBounds().height/2),d.container.addChild(d),x>0?(d.alpha=0,d.animate({props:{alpha:1},time:x,call:function(){d.dispatchEvent("fadedin")}})):setTimeout(function(){d.container.stage&&d.container.stage.update()},10),d},this.on("added",se);function se(){for(var te=0;te<Y.length;te++)d.addChildAt(Y.values[te].obj,Y.values[te].depth);if(d.zimAccessibility){var _e=d.zimAccessibility;setTimeout(function(){_e.activatedObject&&(Ye=_e.activatedObject.zimTabTag)},50),_e.resize(d),_e.tabIndex=d.zimTabIndex}d.toggled=!0}function be(te,_e){return te=Math.max(o/2,Math.min(d.container.getBounds().width-o/2,te)),_e=Math.max(l/2,Math.min(d.container.getBounds().height-l/2,_e)),{x:te,y:_e}}this.toggle=function(te){return te===!0?d.show():te===!1||d.container.contains(d)?d.hide():d.show(),d},Q!==!1&&e.styleTransforms(this,j),this.clone=function(){var te=d.contentContainer.x,_e=d.contentContainer.y,J=d.cloneProps(new e.Pane(e.copy(K),r,i,o,l,f,h,g,_,P,C,T,N,O,S,n(k)?null:k.clone(),x,d.container,L,A,b,F,q,V,I,ne,R,Q,this.group,ee));return J.contentContainer.x=te,J.contentContainer.y=_e,J}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Panel=function(t,r,d,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R){var Q="width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",U;if(U=mt(e.Panel,arguments,Q,this))return U;qe("57.7"),this.group=ne;var ee=I===!1?{}:e.getStyle("Panel",this.group,R);n(t)&&(t=ee.width!=null?ee.width:250),n(r)&&(r=ee.height!=null?ee.height:300),this.zimContainer_constructor(t,r,null,null,!1),this.type="Panel",n(d)&&(d=ee.content!=null?ee.content:null);var ae=this.content=d;n(o)&&(o=ee.titleBar!=null?ee.titleBar:"PANEL"),n(l)&&(l=ee.titleBarColor!=null?ee.titleBarColor:e.white),n(f)&&(f=ee.titleBarBackgroundColor!=null?ee.titleBarBackgroundColor:e.grey),n(h)&&(h=ee.titleBarHeight!=null?ee.titleBarHeight:30),n(g)&&(g=ee.backgroundColor!=null?ee.backgroundColor:e.lighter),n(_)&&(_=ee.borderColor!=null?ee.borderColor:e.pewter),n(P)&&(P=ee.borderWidth!=null?ee.borderWidth:null),_<0||P<0?_=P=null:_!=null&&P==null&&(P=1),n(C)&&(C=ee.corner!=null?ee.corner:5),n(A)&&(A=ee.align!=null?ee.align:"left"),n(b)&&(b=ee.shadowColor!=null?ee.shadowColor:"rgba(0,0,0,.3)"),n(F)&&(F=ee.shadowBlur!=null?ee.shadowBlur:14),n(q)&&(q=ee.draggable!=null?ee.draggable:!1),n(V)&&(V=ee.boundary!=null?ee.boundary:null),n(T)&&(T=ee.close!=null?ee.close:!1),n(N)&&(N=ee.closeColor!=null?ee.closeColor:n(l)?e.grey:l),n(O)&&(O=ee.next!=null?ee.next:e.vee(o)),n(S)&&(S=ee.nextColor!=null?ee.nextColor:n(l)?e.grey:l),Array.isArray(C)||(C=[C,C,C,C]),n(x)&&(x=ee.collapse!=null?ee.collapse:!1),n(E)&&(E=ee.collapseColor!=null?ee.collapseColor:n(l)?e.grey:l),n(L)&&(L=ee.collapsed!=null?ee.collapsed:!1);var ie=this,ce=this.background=new e.Rectangle(t,r,g,_,P,C).addTo(this);b!=-1&&F>0&&(this.background.shadow=new ze.Shadow(b,3,3,F));var j=o,G=e.Pick.choose(j),y=e.Pick.choose(l),p=e.Pick.choose(f),d=ie.contentContainer=new e.Container(t,r-h).addTo(ie).mov(0,h);typeof G=="string"&&(G=new e.Label({text:G,color:y,size:ee.size!=null?ee.size:20,bold:ee.bold!=null?ee.bold:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var D=ie.titleBarLabel=G;n(p)&&(p="rgba(0,0,0,.2)"),ie.titleBar=o=new e.Container(t,h,null,null,!1).loc(0,0,ie);var K=ie.titleBar.backing=new e.Rectangle(t+P,h,p,null,null,[C[0]*.95,C[1]*.95,0,0],!0,null,null,!1).center(o);if(o&&X(),ie.label=G,ie.text=G.text,T){var w=ie.closeIcon=new e.Shape(-40,-40,80,80,null,!1);w.graphics.f(N).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),o?(w.centerReg(o).scaleTo(o,null,50),w.pos(Math.max(C[1]/2,15),null,!0)):w.addTo(ie).sca(.3).mov(t/2-w.width-3,-r/2+T.height),w.expand(40),w.cur("pointer"),w.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var $=ie.stage;ie.removeFrom(),ie.dispatchEvent("close"),$.update()})}if(this.add=function($,ue,xe,Ye){var se="obj, index, center, replace",be;return(be=mt(ie.add,arguments,se,ie))?be:(Ye&&ie.contentContainer.removeAllChildren(),xe?$.center(ie.contentContainer,ue):$.addTo(ie.contentContainer,ue),ie)},ae){var Y=e.makeContent(ae,t),Ee=["header","message","text","display","buttons","config"];Ee.forEach(function($){Y[$]&&(ie[$]=Y[$])}),ie.label=ie.message,ie.add(Y,null,!0)}this.nextPanel=function($,ue){var xe=n($)||n(j.array)?e.Pick.choose(j):j.array[$],Ye=n($)||n(l.array)?e.Pick.choose(l):l.array[$],se=n($)||n(f.array)?e.Pick.choose(f):f.array[$],be=n($)||n(g.array)?e.Pick.choose(g):g.array[$],te=n($)||n(_.array)?e.Pick.choose(_):_.array[$];typeof xe=="string"&&(xe=new e.Label({text:xe,color:Ye,size:ee.size!=null?ee.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),ie.label=xe,ie.text=xe.text,D.removeFrom(),D=ie.titleBarLabel=xe,X(),K.color=se,ie.background.color=be,ie.background.borderColor=te,ue&&ie.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&ie.stage&&ie.stage.update()};function X(){A=="right"?D.center(o).pos(Math.max(C[0]/2,10),null,!0):A=="center"||A=="middle"?D.center(o):D.center(o).loc(Math.max(C[0]/2,10)),D.mov(0,2)}if(q&&(o.cur("pointer"),o.on("mousedown",function(){ie.drag({rect:V,currentTarget:!0})}),o.on("pressup",function(){ie.noDrag(!1)})),O>0){var Z=ie.nextIcon=new e.Shape(-20,-20,40,40,null,!1);Z.graphics.f(l).p("AiJieIETCeIkTCfg"),Z.centerReg(o).scaleTo(o,null,70).alp(.8).hov(1).expand(),Z.pos(Math.max(C[1]/2,15),null,!0),w&&Z.mov(-w.width-8),Z.cur("pointer"),Z.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ie.nextPanel(),ie.dispatchEvent("change")})}if(n(k)||(k=ie.extraButton=new e.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(o,null,70).centerReg(o).expand(),k.pos(Math.max(C[1]/2,15),null,!0),w&&k.mov(-w.width-8),Z&&k.mov(-Z.width-8)),x){ve=L,ie.collapse=function($){if(n($)&&($=!0),$==ve)return ie;$?(pe.rot(180),ce.visible=!1,d.visible=!1,ve=!0,ie.dispatchEvent("collapse")):(pe.rot(0),ce.visible=!0,d.visible=!0,ve=!1,ie.dispatchEvent("expand")),ie.stage&&ie.stage.update()},ie.collapseEvent=ie.titleBar.on("dblclick",function(){ie.collapsed=!ie.collapsed}),n(E)&&(E=e.grey);var pe=ie.collapseIcon=new e.Triangle(90,90,90,e.faint,E,16);pe.centerReg(ie).scaleTo(o,null,41).pos({x:t-Math.max(C[1]/2,15)-pe.width/2-4,y:h/2,reg:!0}).expand(40),k&&pe.mov(-k.width-8),w&&pe.mov(-w.width-8),Z&&pe.mov(-Z.width-8),pe.cur("pointer"),pe.expand();var ve=!1;pe.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ve?ie.collapse(!1):ie.collapse(!0)})}ie.overlay=new e.Rectangle(t,r,null,null,null,C).alp(.3),Object.defineProperty(ie,"panelHeight",{get:function(){return ie.background.height},set:function($){ce.removeFrom(),ce=this.background=new e.Rectangle(t,$,g,_,P,C).addTo(this).bot(),b!=-1&&F>0&&(this.background.shadow=new ze.Shadow(b,3,3,F)),ie.setBounds(t,$),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&ie.stage&&ie.stage.update()}}),Object.defineProperty(ie,"collapsed",{get:function(){return ve},set:function($){ie.collapse&&ie.collapse($)}}),this._enabled=!0,Object.defineProperty(ie,"enabled",{get:function(){return ie._enabled},set:function($){c(ie,$),$?ie.overlay.removeFrom():ie.overlay.addTo(ie),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&ie.stage&&ie.stage.update()}}),L&&(L=!1,ie.collapsed=!0),I!==!1&&e.styleTransforms(this,ee),this.clone=function(){return ie.cloneProps(new e.Toggle(t,r,o?o.clone():"",l,f,h,g,_,P,C,T,N,O,S,k,x,E,ie.collapsed,A,b,F,q,V,I,this.group,R))},this.doDispose=function($,ue,xe){return x&&this.titleBar.off("dblclick",this.collapseEvent),xe||this.zimContainer_dispose(!0),!0}},e.extend(e.Panel,e.Container,["clone","dispose"],"zimContainer",!1),e.Panel.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Window=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe){var Ye="width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideFactor, slideSnap, slideSnapDamp, interactive, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, resizeBoundary, resizeVisible, continuous, style, group, inherit",se;if(se=mt(e.Window,arguments,Ye,this))return se;qe("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=ue;var be=$===!1?{}:e.getStyle(this.type,this.group,xe);n(t)&&(t=be.width!=null?be.width:300),n(r)&&(r=be.height!=null?be.height:200),n(o)&&(o=be.backgroundColor!=null?be.backgroundColor:e.dark);var te=l,_e=f;n(l)&&(l=be.borderColor!=null?be.borderColor:e.silver),n(f)&&(f=be.borderWidth!=null?be.borderWidth:1),n(h)&&(h=be.padding!=null?be.padding:0),n(g)&&(g=be.corner!=null?be.corner:0),n(_)&&(_=be.swipe!=null?be.swipe:!0),n(P)&&(P=be.scrollBarActive!=null?be.scrollBarActive:!0),n(C)&&(C=be.scrollBarDrag!=null?be.scrollBarDrag:!1),n(T)&&(T=be.scrollBarColor!=null?be.scrollBarColor:l),n(N)&&(N=be.scrollBarAlpha!=null?be.scrollBarAlpha:.3),n(O)&&(O=be.scrollBarFade!=null?be.scrollBarFade:!0),n(S)&&(S=be.scrollBarH!=null?be.scrollBarH:!0),n(k)&&(k=be.scrollBarV!=null?be.scrollBarV:!0),C&&(O=be.scrollBarFade!=null?be.scrollBarFade:!1),n(x)&&(x=be.slide!=null?be.slide:!0),n(E)&&(E=be.slideFactor!=null?be.slideFactor:.9),n(L)&&(L=be.slideSnap!=null?be.slideSnap:"vertical"),n(b)&&(b=be.interactive!=null?be.interactive:!0),n(F)&&(F=be.shadowColor!=null?be.shadowColor:"rgba(0,0,0,.3)"),n(q)&&(q=be.shadowBlur!=null?be.shadowBlur:20),n(I)&&(I=be.paddingV!=null?be.paddingV:h),n(V)&&(V=be.paddingH!=null?be.paddingH:h),n(ne)&&(ne=be.scrollWheel!=null?be.scrollWheel:!0),n(R)&&(R=be.damp!=null?be.damp:null),n(Q)&&(Q=be.titleBar!=null?be.titleBar:null),n(U)&&(U=be.titleBarColor!=null?be.titleBarColor:null),n(ee)&&(ee=be.titleBarBackgroundColor!=null?be.titleBarBackgroundColor:null),n(ae)&&(ae=be.titleBarHeight!=null?be.titleBarHeight:null),n(ie)&&(ie=be.draggable!=null?be.draggable:null),n(ce)&&(ce=be.boundary!=null?be.boundary:null),n(j)&&(j=be.onTop!=null?be.onTop:null),n(G)&&(G=be.close!=null?be.close:null),n(y)&&(y=be.closeColor!=null?be.closeColor:null),n(p)&&(p=be.cancelCurrentDrag!=null?be.cancelCurrentDrag:!1),n(d)&&(d=be.fullSize!=null?be.fullSize:null),n(D)&&(D=be.fullSizeColor!=null?be.fullSizeColor:null),n(K)&&(K=be.resizeHandle!=null?be.resizeHandle:null),n(w)&&(w=be.collapse!=null?be.collapse:!1),n(Y)&&(Y=be.collapseColor!=null?be.collapseColor:null),n(Ee)&&(Ee=be.collapsed!=null?be.collapsed:!1),n(X)&&(X=be.optimize!=null?be.optimize:!0),n(Z)&&(Z=be.resizeBoundary!=null?be.resizeBoundary:null),n(pe)&&(pe=be.resizeVisible!=null?be.resizeVisible:!1),n(ve)&&(ve=be.continuous!=null?be.continuous:!1),ve!="horizontal"&&ve!="vertical"&&(ve=!1),this.continuous=ve,Q===!1&&(Q=null),n(Q)||(n(ae)&&(ae=30),r=r-ae);var J=this;J.optimize=X,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var ye=this.backing=new e.Shape({style:!1});this.addChild(ye);var Re=new ze.Shape;Re.type="WindowBacking";var de=Re.graphics;if(this.addChild(Re),i)var Me=J.content=i;i=this.contentContainer=new e.Container({style:!1}),this.addChild(i),i.mask=Re;var Be;if(!b)var he=new ze.Shape;if(f>0){var Ae=new ze.Shape;this.addChild(Ae)}var Ce=Q?0:g,me=0;function Ne(){J.setBounds(0,0,t,r),ye.graphics.c().f(o).rc(0,0,t,r,Ce,Ce,g,g),F!=-1&&q>0&&(ye.shadow=new ze.Shadow(F,4,4,q)),f>0&&(g?Ae.graphics.c().s(l).ss(f,"square","miter").rc(0,0,t,r,Ce,Ce,g,g):Ae.graphics.c().s(l).ss(f,"square","miter").dr(0,0,t,r)),n(st)||(st.widthOnly=J.width+f,je.widthOnly=J.width+f-1,J.setBounds(0,-ae,J.width,r+ae)),Je&&(Q?(Je.pos({x:t-Math.max(g/2,10)-Je.width/2,y:ae/2,reg:!0}),je.widthOnly=Je.x-15,me=J.width-je.width):Je.pos(Math.max(g/2,10)/2,Je.height/2,!0,!1,J)),$e&&($e.pos({x:t-Math.max(g/2,10)-$e.width/2,y:ae/2,reg:!0}),Je&&$e.mov(-Je.width-10),Q&&(je.widthOnly=$e.x-15),me=J.width-je.width),De&&(De.pos({x:t-Math.max(g/2,10)-De.width/2,y:ae/2,reg:!0}),Je&&De.mov(-Je.width-10),$e&&De.mov(-$e.width-10),Q&&(je.widthOnly=De.x-15),me=J.width-je.width)}Ne();var ge=this.scrollBar={};if(ge.color=T,ge.size=6,ge.minSize=ge.size*2,ge.spacing=3.5+f/2,ge.margin=0,ge.corner=ge.size/2,ge.showTime=.5,ge.fadeTime=3,P){var Ue=ge.horizontal=new e.Shape({style:!1}),He=Ue.graphics;Ue.alpha=N,this.addChild(Ue),C&&Ue.drag({localBoundary:!0});var Oe=ge.vertical=new e.Shape({style:!1}),fe=Oe.graphics;Oe.alpha=N,this.addChild(Oe),C&&Oe.drag({localBoundary:!0})}var Xe,Ze,Ke,ut,gt,We,it,ct,Pe,Fe=!1;if(this.update=function(){P&&(He.clear(),fe.clear()),gt=P?ge.size+ge.spacing*2:0,We=i.getBounds()?i.getBounds().width:0,it=i.getBounds()?i.getBounds().height:0,Ke=S&&We>t-V&&(P||_===!0||_=="auto"||_=="horizontal"),ut=k&&it>r-I&&(P||_===!0||_=="auto"||_=="vertical"),J.scrollXMax=We+V*2-t+(ut?gt+ge.margin:0),J.scrollYMax=it+I*2-r+(Ke?gt+ge.margin:0),de.clear();var kt=f/2,ft=f/2,It=t-(ut&&P?ge.size+ge.spacing*2:0)-(ut?0:f),qt=r-(Ke&&P?ge.size+ge.spacing*2:0)-(Ke?0:f),Xt=g*(.1+g/100);de.f("rgba(0,0,0,0)").rc(kt,ft,It,qt,Ke&&P&&!Q?Xt:Ce,ut&&P&&!Q?Xt:Ce,ut&&P?Xt:Math.max(Xt,g-f/2),Ke&&P?Xt:Math.max(Xt,g-f/2)),Re.setBounds(J.getBounds().x,J.getBounds().y,J.getBounds().width,J.getBounds().height),e.expand(Re,0),b||(he.graphics.c().f("red").dr(kt,ft,It,qt),i.hitArea=he);var rn=Math.max(g,Math.min(ge.corner,ge.spacing)),Qt=rn+f/2,Pt=rn+(ut?gt:0)+f/2,Wt=rn+f/2,xn=rn+(Ke?gt:0)+f/2,zt,ln;Ke&&P&&(zt=Math.max(ge.minSize,(t-Qt-Pt)*(t-Qt-Pt)/(We+V+ge.margin)),He.f(ge.color).rr(0,0,zt,ge.size,ge.corner),Ue.x=Qt,Ue.y=r-ge.size-ge.spacing,Xe=new e.Proportion(-J.scrollXMax,0,Qt,t-zt-Pt,-1),C&&(Ue.setBounds(0,0,zt,ge.size),ln=new ze.Rectangle(Qt,Ue.y,t-zt-Qt-Pt,0),Ue.dragBoundary(ln),Ue.proportion=new e.Proportion(ln.x,ln.x+ln.width,0,-J.scrollXMax),Ue.off("pressmove",ct),ct=Ue.on("pressmove",function(){J.dispatchEvent("scrolling"),he&&(he.x=-i.x,he.y=-i.y),i.x=Ue.proportion.convert(Ue.x),St()}))),ut&&P&&(zt=Math.max(ge.minSize,(r-Wt-xn)*(r-Wt-xn)/(it+I+ge.margin)),fe.f(ge.color).rr(0,0,ge.size,zt,ge.corner),Oe.x=t-ge.size-ge.spacing,Oe.y=Wt,Ze=new e.Proportion(-J.scrollYMax,0,Wt,r-zt-xn,-1),C&&(Oe.setBounds(0,0,ge.size,zt),ln=new ze.Rectangle(Oe.x,Wt,0,r-zt-Wt-xn),Oe.dragBoundary(ln),Oe.proportion=new e.Proportion(ln.y,ln.y+ln.height,0,-J.scrollYMax),Oe.off("pressmove",Pe),Pe=Oe.on("pressmove",function(){R&&(Fe=!0),J.dispatchEvent("scrolling"),he&&(he.x=-i.x,he.y=-i.y),R?jt=Oe.proportion.convert(Oe.y):i.y=Oe.proportion.convert(Oe.y),St()}))),Ft(),clearTimeout(J.d2Timeout),J.d2Timeout=setTimeout(function(){Ue&&Ue.proportion&&(i.x=Ue.proportion.convert(Ue.x)),Oe&&Oe.proportion&&(i.y=Oe.proportion.convert(Oe.y))},50),clearTimeout(J.dTimeout),J.dTimeout=setTimeout(function(){lt()},300),lt(),St()},this.resize=function(kt,ft){n(kt)&&(kt=t),n(ft)&&(ft=r);var It=Math.max(20,g*2);Q&&(It=Math.max(me,It)),kt<It&&(kt=It),ft<20&&(ft=20),t=kt,r=ft,Ne();for(var qt=0;qt<i.numChildren;qt++){var Xt=i.getChildAt(qt);Xt.type=="Wrapper"&&Tt(Xt)}return K&&rt(),J.update(),jt=i.y,R&&en.immediate(jt),J.dispatchEvent("resize"),J},!n(Q)){n(ie)&&(ie=!0),typeof Q=="string"&&(Q=new e.Label({text:Q,color:U,size:be.size!=null?be.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var we=J.titleBarLabel=Q;we.noMouse(),n(ee)&&(ee="rgba(0,0,0,.2)"),J.titleBar=Q=new e.Container(t,ae,null,null,!1).centerReg(J).mov(0,-r/2-ae/2);var je=new e.Rectangle(Q.width-1,Q.height,red).alp(0).addTo(Q);we.setMask(je,!0);var st=J.titleBar.backing=new e.Rectangle(t+f,ae,ee,null,null,[g*.95,g*.95,0,0],!0,null,!1,!1).center(Q);we.center(Q).pos({x:Math.max(g/2,Math.max(10,h)),reg:!0}),J.regX=0,J.regY=-ae,J.setBounds(0,-ae,t,r+ae),ie?(Q.cur("pointer"),Q.on("mousedown",function(){J.drag({rect:ce,currentTarget:!0,onTop:j})}),Q.on("pressup",function(){J.noDrag(!1)})):Q.on("mousedown",function(){})}if(G){n(y)&&(y=e.grey);var Je=J.closeIcon=new e.Shape(-40,-40,80,80,null,!1);Je.graphics.f(y).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),Q?Je.centerReg(J).scaleTo(Q,null,50).pos({x:t-Math.max(g/2,10)-Je.width/2,y:ae/2,reg:!0}).expand(40):Je.sca(.3).pos(Math.max(g/2,10)/2,Je.height/2,!0,!1,J).expand(40),Je.cur("pointer"),Je.expand(),Je.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var kt=J.stage;J.removeFrom(),J.dispatchEvent("close"),kt&&kt.update()})}var tt,Te,et,Ve,Le,Qe;if(!n(Q)){if(d){J.fullSize=function(kt){if(n(kt)&&(kt=!0),kt==Te||!J.parent)return J;kt?(et=J.width,Ve=J.height,Le=J.x,Qe=J.y,J.resize(J.parent.width,J.parent.height),J.x=0,J.y=0,Te=!0,nt.alpha=1,$e.getChildAt(0).alpha=.01,J.dispatchEvent("fullsize")):(J.resize(et,Ve-Q.height),J.x=Le,J.y=Qe,Te=!1,nt.alpha=0,$e.getChildAt(0).alpha=1,J.dispatchEvent("originalsize")),J.stage&&J.stage.update()},n(D)&&(D=e.grey);var $e=J.fullSizeIcon=new e.Rectangle(80,80,e.faint,D,16),nt=new e.Shape().s(D).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo($e).mov(40,40).alp(0);$e.centerReg(J).scaleTo(Q,null,42).pos({x:t-Math.max(g/2,10)-$e.width/2,y:ae/2,reg:!0}).expand(40),Je&&$e.mov(-Je.width-10),$e.cur("pointer"),$e.expand(),Te=!1,et=t,Ve=r,Le=J.x,Qe=J.y,$e.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Te?J.fullSize(!1):J.fullSize(!0)})}var pt=e.copy(J.getBounds(),!0);if(w){tt=Ee,J.collapse=function(kt){if(n(kt)&&(kt=!0),kt==tt)return J;kt?(De.rot(180),J.backing.visible=!1,J.contentContainer.visible=!1,Re.visible=!1,Ue&&(Ue.visible=!1),Ue&&(Oe.visible=!1),Ae&&(Ae.visible=!1),tt=!0,st.sha(F,5,5,q),K&&(J.resizeHandle.visible=!1),J.setBounds(pt.x,pt.y,pt.width,Q.height),J.dispatchEvent("collapse")):(De.rot(0),J.backing.visible=!0,J.contentContainer.visible=!0,Re.visible=!0,Ue&&(Ue.visible=!0),Ue&&(Oe.visible=!0),Ae&&(Ae.visible=!0),tt=!1,st.sha(null),K&&(J.resizeHandle.visible=!0),J.setBounds(pt.x,pt.y,pt.width,pt.height),J.dispatchEvent("expand")),J.stage&&J.stage.update()},n(Y)&&(Y=e.grey);var De=J.collapseIcon=new e.Triangle(90,90,90,e.faint,Y,16);De.centerReg(J).scaleTo(Q,null,42).pos({x:t-Math.max(g/2,10)-De.width/2,y:ae/2,reg:!0}).expand(40),Je&&De.mov(-Je.width-10),$e&&De.mov(-$e.width-10),De.cur("pointer"),De.expand(),tt=!1,et=t,Ve=r,Le=J.x,Qe=J.y,De.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){tt?J.collapse(!1):J.collapse(!0)})}}if(K){var at=new ai().loc(0,0,J).mov(J.width,J.height-(J.titleBar?J.titleBar.height:0)),yt=J.resizeHandle=new e.Rectangle(25,25,e.grey,e.white).alp(pe?.5:.01).centerReg().rot(45).loc(0,0,at).drag({boundary:Z,localBoundary:!0});yt.on("mouseover",function(){yt.alp(.5),yt.stage&&yt.stage.update()}),yt.on("mousedown",function(){yt.pressing=!0}),yt.on("mouseout",function(){yt.pressing||(pe||yt.alp(.01),yt.stage&&yt.stage.update())}),yt.on("pressmove",function(){J.resize(Math.max(50,at.x+yt.x),Math.max(50,at.y+yt.y))}),yt.on("pressup",function(){yt.pressing=!1,pe||yt.alp(.01),rt(),yt.stage&&yt.stage.update()}),J.titleBar&&J.titleBar.on("pressup",rt)}function rt(kt){J.resizeHandle.loc(0,0,at).top().mov(-at.x+J.width,-at.y+J.height-(J.titleBar?J.titleBar.height:0))}function Tt(kt){kt.align=="right"?(kt.x=V,kt.resize(J.width-(ut?ge.size+ge.spacing*2:V)-V*2)):(kt.align=="center"||kt.align=="middle",kt.resize(J.width-(ut?ge.size+ge.spacing*2:0)-V*2)),kt.alpha=kt.wrapperLastAlpha}if(Ne(),this.add=function(kt,ft,It,qt){var Xt="obj, index, center, replace",rn;if(rn=mt(J.add,arguments,Xt,J))return rn;var Qt=kt;if(!Qt.getBounds()){ht("Window.add() - please add content with bounds set");return}return yn(Qt),n(ft)&&(ft=i.numChildren),qt&&(ft=0,J.removeAll()),It?(Qt.center(J).addTo(i,ft).mov(0,ae?ae/2:0),i.height>J.height-(ae||0)&&Qt.loc(null,0),i.width>J.width&&Qt.loc(0)):Qt.addTo(i,ft),Qt.type=="Wrapper"&&(Oe.alpha=0,S=!1,Qt.wrapperLastAlpha=Qt.alpha,Qt.alpha=0,this.added(function(){Tt(Qt),J.resize(),Ue.alpha=1,Oe.alpha=1})),Qt.x==0&&(Qt.x=V),Qt.y==0&&(Qt.y=I),J.update(),J},Me){var xt=e.makeContent(Me,t),Ct=["header","message","text","display","buttons","config"];Ct.forEach(function(kt){xt[kt]&&(J[kt]=xt[kt])}),J.label=J.message,J.add(xt,0,!0)}this.remove=function(kt){return i.removeChild(kt),J.update(),J},this.removeAll=function(){return i.removeAllChildren(),J.update(),J};function lt(kt){ve||(n(Be)&&(Be=J.stage||le.zdf.stage),n(kt)&&(kt=!0),kt?e.dragBoundary(i,new ze.Rectangle(0,0,Ke?-J.scrollXMax:0,ut?-J.scrollYMax:0)):e.dragBoundary(i,new ze.Rectangle(-1e3,-1e3,Be.width+2e3,Be.height+2e3)))}var Dt=!1;_&&i.on("mousedown",function(){Dt||e.Ticker.add(Mt,i.stage),Dt=!0,Ke&&P&&O&&e.animate(Ue,{alpha:N},ge.showTime),ut&&P&&O&&e.animate(Oe,{alpha:N},ge.showTime)});function Mt(){jt=i.y,R&&en.immediate(jt),P?Ft():J.dispatchEvent("scrolling")}function St(){J.optimize&&(Be=J.stage,i.loop(function(kt){!kt.hitTestBounds||!kt.stage||(kt.hitTestBounds(J,300)?(kt.visible=!0,kt.loop&&kt.loop(function(ft){ft.hitTestBounds&&(ft.hitTestBounds(J,300)?ft.visible=!0:ft.visible=!1)})):kt.visible=!1)}))}function Ft(){St(),J.dispatchEvent("scrolling"),he&&(he.x=-i.x,he.y=-i.y),Ke&&P&&(Ue.x=Xe.convert(i.x)),ut&&P&&(Oe.y=Ze.convert(i.y))}this.on("added",function(){Yt(50)},null,!0);function Yt(kt){n(kt)&&(kt=100),yn(J),_&&setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,axis:ve,localBoundary:!0,slide:x,slideFactor:E,slideSnap:S&&(_===!0||_=="auto"||_=="horizontal")||k&&(_===!0||_=="auto"||_=="vertical")?L:!1}),i.removeAllEventListeners("slidestart"),i.on("slidestart",function(){J.dispatchEvent("slidestart")}),i.removeAllEventListeners("slidestop"),!P&&X&&(J.zDE&&i.off(J.zDE),J.zDE=i.on("mousedown",()=>{J.zTI&&e.Ticker.remove(St)}),J.zME&&i.off(J.zME),J.zME=i.on("pressmove",St),J.zSTA&&i.off(J.zSTA),J.zSTA=i.on("slidestart",function(){J.zTI=e.Ticker.add(St)}),J.zSTO&&i.off(J.zSTO),J.zSTO=i.on("slidestop",function(ft){J.zTI&&e.Ticker.remove(J.zTI)})),i.on("slidestop",function(ft){x&&sn(ft),J.dispatchEvent("slidestop")}),i.getBounds()&&i.getBounds().width>0&&lt())},kt)}this.cancelCurrentDrag=function(){J.contentContainer&&J.contentContainer.noDrag(!1),setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:x,slideFactor:E,slideSnap:S&&(_===!0||_=="auto"||_=="horizontal")||k&&(_===!0||_=="auto"||_=="vertical")?L:!1}),i.getBounds()&&i.getBounds().width>0&&lt())},300)};var $t;this.added(function(kt){Be=kt,$t=Be.on("stagemousemove",function(ft){J.windowMouseX=ft.stageX/e.scaX,J.windowMouseY=ft.stageY/e.scaY})}),x?i.on("slidestop",sn):i.on("mousedown",function(){i.stage.on("stagemouseup",sn,null,!0)}),p&&(J.blurEvent=function(){J.cancelCurrentDrag(),sn()},document.WW.addEventListener("blur",J.blurEvent));function sn(){e.Ticker.remove(Mt),Dt=!1,Ke&&O&&P&&e.animate(Ue,{alpha:0},ge.fadeTime),ut&&O&&P&&e.animate(Oe,{alpha:0},ge.fadeTime)}var nn=!1,Ot,Zt=0,ot=0,bt=0,Rt=0,Ut=300,Gt=2;function wt(){Ot=Date.now(),e.Ticker.add(Ht,i.stage)}function Bt(){nn||(J.dispatchEvent("hoverout"),nn=!0),e.Ticker.remove(Ht)}function Ht(){if(!i.stage){nn||(J.dispatchEvent("hoverout"),nn=!0),e.Ticker.remove(Ht);return}Math.abs(Zt-J.windowMouseX)>Gt||Math.abs(ot-J.windowMouseY)>Gt?(nn||(J.dispatchEvent("hoverout"),nn=!0),Ot=Date.now(),Zt=J.windowMouseX,ot=J.windowMouseY):Date.now()-Ot>Ut&&((Math.abs(bt-J.windowMouseX)>Gt||Math.abs(Rt-J.windowMouseY)>Gt)&&(J.contentMouse=i.globalToLocal(J.windowMouseX,J.windowMouseY),J.dispatchEvent("hoverover"),bt=J.windowMouseX,Rt=J.windowMouseY,nn=!1),Ot=Date.now())}if(b){var Jt,cn;i.on("mousedown",function(kt){Be=kt.target.stage,Jt=kt.stageX/e.scaX,cn=Date.now()}),i.on("click",function(kt){Date.now()-cn<600&&Math.abs(kt.stageX/e.scaX-Jt)<5&&(J.contentMouse=i.globalToLocal(kt.stageX/e.scaX,kt.stageY/e.scaY),J.dispatchEvent("select"))}),i.on("mouseover",wt),i.on("mouseout",Bt)}var jt=J.scrollY;J.scrollWindow=function(ft){if(ut&&J.stage&&J.hitTestPoint(J.windowMouseX,J.windowMouseY)&&J.contains(J.stage.getObjectUnderPoint(J.windowMouseX*e.scaX,J.windowMouseY*e.scaY))){n(ft)&&(ft=event);var It=ft.detail?ft.detail*-19:ft.wheelDelta;n(It)&&(It=ft.deltaY*-19),jt+=It,jt=Math.max(-J.scrollYMax,Math.min(0,jt)),R||(J.scrollY=jt,i.stage.update()),Fe=!1}X&&St()},ne&&(le.addEventListener("mousewheel",J.scrollWindow),le.addEventListener("wheel",J.scrollWindow),le.addEventListener("DOMMouseScroll",J.scrollWindow));var an=!1,en;function yn(kt){R&&!an&&kt.stage&&(an=!0,en=new e.Damp(J.scrollY,R),J.dampTicker=e.Ticker.add(function(){if(!Dt){if(J.scrollY!=null&&jt!=null&&J.scrollY!=jt&&Math.round(J.scrollY)==Math.round(jt)){Fe=!1;return}n(jt)||(i.y=en.convert(jt)),Fe||Ft()}},kt.stage))}this._enabled=!0,Object.defineProperty(J,"enabled",{get:function(){return J._enabled},set:function(kt){kt?Yt():(clearTimeout(J.dTimeout),e.noDrag(i)),c(J,kt)}}),this._scrollEnabled=!0,Object.defineProperty(J,"scrollEnabled",{get:function(){return J._scrollEnabled},set:function(kt){kt?(Yt(),C&&(ct&&(Ue.mouseEnabled=!0),Pe&&(Oe.mouseEnabled=!0)),le.addEventListener("mousewheel",J.scrollWindow),le.addEventListener("wheel",J.scrollWindow),le.addEventListener("DOMMouseScroll",J.scrollWindow)):(clearTimeout(J.dTimeout),e.noDrag(i),C&&(ct&&(Ue.mouseEnabled=!1),Pe&&(Oe.mouseEnabled=!1)),le.removeEventListener("mousewheel",J.scrollWindow),le.removeEventListener("wheel",J.scrollWindow),le.removeEventListener("DOMMouseScroll",J.scrollWindow)),J._scrollEnabled=kt}}),Object.defineProperty(J,"scrollX",{get:function(){return i.x},set:function(kt){i.x=kt,clearTimeout(J.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Ft()}}),Object.defineProperty(J,"scrollY",{get:function(){return i.y},set:function(kt){i.y=kt,i.y=jt=kt,R&&en.immediate(jt),clearTimeout(J.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Ft()}}),Object.defineProperty(J,"backgroundColor",{get:function(){return o},set:function(kt){o=kt,Ne()}}),Object.defineProperty(J,"borderColor",{get:function(){return l},set:function(kt){l=kt,Ne()}}),Object.defineProperty(J,"borderWidth",{get:function(){return f},set:function(kt){f=kt,Ne()}}),Object.defineProperty(J,"fullSized",{get:function(){return Te},set:function(kt){J.fullSize&&J.fullSize(kt)}}),Object.defineProperty(J,"collapsed",{get:function(){return tt},set:function(kt){J.collapse&&J.collapse(kt)}}),Ee&&(tt=!1,J.collapsed=!0),J.titleBar&&(J.collapseEvent=J.titleBar.on("dblclick",function(){J.collapsed=!J.collapsed})),$!==!1&&e.styleTransforms(this,be),this.clone=function(kt){n(kt)&&(kt=!0);var ft=J.cloneProps(new e.Window(t,r,null,o,te,_e,h,g,_,P,C,ge.color,N,O,S,k,x,E,L,A,b,F,q,V,I,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe));return kt&&(J.contentContainer.cloneChildren(ft.contentContainer),ft.update()),ft},this.doDispose=function(kt,ft,It){return ne&&(le.removeEventListener("mousewheel",J.scrollWindow),le.removeEventListener("wheel",J.scrollWindow),le.removeEventListener("DOMMouseScroll",J.scrollWindow)),i&&(J.zDE&&i.off(J.zDE),J.zME&&i.off(J.zME),J.zSTA&&i.off(J.zSTA),J.zSTO&&i.off(J.zSTO),J.zTI&&e.Ticker.remove(J.zTI)),J.titleBar&&J.titleBar.removeAllEventListeners(),$t&&Be&&Be.off("stagemousemove",$t),J.resizeHandle&&J.resizeHandle.removeAllEventListeners(),J.blurEvent&&le.removeEventListener("blur",J.blurEvent),typeof Ht<"u"&&e.Ticker.remove(Ht),n(Mt)||e.Ticker.remove(Mt),It||this.zimContainer_dispose(!0),i=J.contentContainer=null,!0}},e.extend(e.Window,e.Container,["clone","dispose"],"zimContainer",!1),e.Window.prototype.dispose=function(t){return this.doDispose(null,null,t)},Ii=e.Window,e.Page=function(t,r,i,o,l,f,h,g,_,P,C){var T="width, height, color, color2, angle, pattern, scalePattern, cache, style, group, inherit",N;if(N=mt(e.Page,arguments,T,this))return N;qe("58.3"),this.group=P;var O=_===!1?{}:e.getStyle("Page",this.group,C);n(t)&&(t=O.width!=null?O.width:le.zdf.width),n(r)&&(r=O.height!=null?O.height:le.zdf.height),this.zimContainer_constructor(0,0,t,r,!1),this.type="Page";var S=this;n(l)&&(l=O.angle!=null?O.angle:90),n(i)&&(i=O.color!=null?O.color:e.light),n(o)&&(o=O.color2!=null?O.color2:null),n(f)&&(f=O.pattern!=null?O.pattern:null),n(h)&&(h=O.scalePattern!=null?O.scalePattern:"fill"),n(g)&&(g=O.cache!=null?O.cache:!1),n(o)||(i=new e.GradientColor([i,o],[0,1],l),o=null);var k=this.backing=new e.Rectangle({width:t,height:r,color:i,scaleDimensions:!1,style:!1}).addTo(this);n(g)&&(!n(o)||!n(f))&&(g=!0),g&&k.cache(),n(f)||(this.pattern=f.addTo(this),h&&f.scaleTo(this,100,100,h).center(this),g&&f.cache()),Object.defineProperty(S,"color",{get:function(){return i},set:function(x){n(x)&&(x=e.black),i=x,S.backing.color=x}}),_!==!1&&e.styleTransforms(this,O),this.clone=function(x){n(x)&&(x=!1),i.type&&(o=null);var E=S.cloneProps(new e.Page(t,r,i,o,vertical,f,h,g,_,P,C));return x&&S.cloneChildren(E),E}},e.extend(e.Page,e.Container,["clone"],"zimContainer",!1),e.Central=function(t,r,i,o,l){qe("58.4"),this.group=o;var f=i===!1?{}:e.getStyle("Central",this.group,l);n(t)&&(t=f.width!=null?f.width:1024),n(r)&&(r=f.height!=null?f.height:768),this.zimContainer_constructor(-t/2,-r/2,t,r);var h=this,g=zimDefaultFrame;h.resizeEvent=g.on("resize",function(){h.scale=g.height/r,h.parent&&h.centerReg(h.parent)}),h.added(function(){h.parent&&h.centerReg(h.parent)}),h.dispose=function(_,P,C){return g.off("resize",h.resizeEvent),h.zimContainer_dispose(_,P,C)},i!==!1&&e.styleTransforms(this,f)},e.extend(e.Central,e.Container,["dispose"],"zimContainer",!1),e.Layer=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee){var ae="width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, onTop, style, group, inherit",ie;if(ie=mt(e.Layer,arguments,ae,this))return ie;qe("58.5"),this.group=U;var ce=Q===!1?{}:e.getStyle("Layer",this.group,ee);n(t)&&(t=ce.width!=null?ce.width:500),n(r)&&(r=ce.height!=null?ce.height:500),this.zimContainer_constructor(0,0,t,r,!1),this.type="Layer";var j=this;j.distX=40,j.distY=0,n(i)&&(i=ce.titleBar!=null?ce.titleBar:"LAYER");var G=i,y=i,p=!0;n(l)&&(l=ce.backgroundColor!=null?ce.backgroundColor:e.lighter),n(f)&&(f=ce.rollBackgroundColor!=null?ce.rollBackgroundColor:e.white),n(h)&&(h=ce.selectedBackgroundColor!=null?ce.selectedBackgroundColor:e.granite),n(_)&&(_=ce.color!=null?ce.color:e.granite),n(P)&&(P=ce.rollColor!=null?ce.rollColor:e.granite),n(C)&&(C=ce.selectedColor!=null?ce.selectedColor:e.moon),n(N)&&(N=ce.borderWidth!=null?ce.borderWidth:1),n(O)&&(O=ce.borderColor!=null?ce.borderColor:l),(O<0||N<0)&&(O=N=null),n(S)&&(S=ce.dashed!=null?ce.dashed:!0),n(k)&&(k=ce.titleBar!=null?ce.titleBar:null),n(x)&&(x=ce.titleBarWidth!=null?ce.titleBarWidth:100);var d=x;if(n(E)&&(E=ce.titleBarHeight!=null?ce.titleBarHeight:40),n(L)&&(L=ce.titleBarX!=null?ce.titleBarX:null),n(A)&&(A=ce.titleBarY!=null?ce.titleBarY:null),n(b)&&(b=ce.titleBarDraggable!=null?ce.titleBarDraggable:!0),n(F)&&(F=ce.close!=null?ce.close:!0),n(q)&&(q=ce.closeColor!=null?ce.closeColor:h),n(V)&&(V=ce.closeBackgroundColor!=null?ce.closeBackgroundColor:h),n(I)&&(I=ce.closeIndicatorColor!=null?ce.closeIndicatorColor:C),n(ne)&&(ne=ce.anchor!=null?ce.anchor:!0),n(R)&&(R=ce.onTop!=null?ce.onTop:!0),b||(ne=!1),j.anchor=ne,F&&(x+=30),k=e.merge({borderColor:h},k,{onTop:R,events:!0,visible:!1,ghostColor:O,ghostWidth:N,ghostDashed:S,ghostHidden:!0}),n(o)&&(o=ce.titleBarContainer!=null?ce.titleBarContainer:null),n(o))if(le.zdf)o=le.zdf.stage;else{ht("zim Layer(): Please pass in a reference to a container with bounds set.");return}j.active=!1,j.turnOff=function(){j.active=!1,F&&(j.checkBox.visible=!1),j.transformControls.remove(),j.mouseChildren=!0,j.button.backgroundColor=l,j.button.rollBackgroundColor=f,j.button.color=_,j.button.rollColor=_,j.transformControls.allowToggleOff(),j.resizeChildren&&j.resizeChildren()},j.turnOn=function(){j.active=!0,F&&(j.checkBox.visible=!0,j.checkBox.checked=!0),j.button.backgroundColor=h,j.button.rollBackgroundColor=h,j.button.color=C,j.button.rollColor=C,j.mouseChildren=!1,j.transformControls.add(),j.transformControls.allowToggleOn()};var D;j.titleBarPos=function(Y,Ee){if(j.titleBar)return j.titleBar.pos?(j.titleBar.pos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),D.update()):(j.distX=Y,j.distY=Ee),p=!1,j};var K=j.visible;j.visible=!1;var w=v();this.added(function(Y){D=Y,j.transform(k),N>=0&&j.transformControls.hideGhost(),setTimeout(function(){function Ee(){return j.localToLocal(0,0,o)}j.visible=K,N>=0&&setTimeout(function(){j.transformControls.showGhost(),j.stage&&j.stage.update()},200),D=Y;var X=j.titleBar=new e.Container(x,E).reg(0,E).loc(j,null,o).mov(j.distX,j.distY);b&&X.drag({all:!0,boundary:new e.Boundary(0,E,o.width-x,o.height-E),localBoundary:!0}),(j.distX!=40||j.distY!=0)&&X.pos(j.distX,j.distY),F&&(j.checkBox=new e.CheckBox({borderColor:q,backgroundColor:V,indicatorColor:I,size:20,startChecked:!0}).center(X).pos(0,null,!0).change(function(){j.turnOff(),j.dispatchEvent("transformhide")}),j.checkBox.visible=!1),X.mouseChildren=!0,X.layer=j,j.resetTitleBar=function(){j.distX=40,j.distY=0,p=!0,j.move(!0),j.stage&&j.stage.update()},(typeof y=="string"||typeof y=="number")&&(y=new e.Label({text:y,color:_,rollColor:P,size:ce.size!=null?ce.size:18,group:this.group})),j.label=y,j.label.center(X),j.button=new e.Button({shadowBlur:-1,width:d,height:E-1,label:j.label,color:_,rollColor:P,backgroundColor:l,rollBackgroundColor:f,corner:ce.corner!=null?ce.corner:0,inherit:e.copy(ce)}).addTo(X),j.button.on("mousedown",function(){o.loop(function(se){se&&se!=X&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()}),j.active||(j.turnOn(),j.dispatchEvent("transformshow")),X.top()}),j.button.on("pressmove",function(){Z()}),j.button.on("pressup",function(){Z(!0);var se=j.localToLocal(0,0,o);j.distX=X.x-se.x,j.distY=X.y-se.y,X.top(),!ve()&&b&&(se=j.localToGlobal(0,0),j.button.hitTestPoint(se.x,se.y)&&j.resetTitleBar())});function Z(se){if(p&&b){var be=o.localToLocal(X.x-j.distX,X.y-j.distY,j.parent),te=j.localToLocal(j.regX,j.regY,j.parent),_e=j.localToLocal(0,0,j.parent);j.x=be.x+(te.x-_e.x),j.y=be.y+(te.y-_e.y),j.transformControls.resize(se),pe(j),j.stage&&j.stage.update()}}function pe(se){se.loop(function(be){be.type=="Layer"&&(j.titleBarDraggable&&be.move(),be.transformControls.ghost&&be.transformControls.resize(),pe(be))})}j.button.on("dblclick",function(){b&&j.resetTitleBar()}),j.turnOff(),j.on("transformed",function(se){(se.transformType=="move"||se.transformType=="size"||se.transformType=="stretch"||se.transformType=="rotate")&&(b&&j.move(),pe(j))});function ve(){if(X.x==0||X.y==X.height||X.x==o.width-X.width||X.y==o.height)return!0}j.move=function(se){!se&&!p&&j.anchor&&ve()||(X.loc(Ee()).mov(j.distX,j.distY),X.x<0&&(p=!1,X.x=0),X.y<X.height&&(p=!1,X.y=X.height),X.x>o.width-X.width&&(p=!1,X.x=o.width-X.width),X.y>o.height&&(p=!1,X.y=o.height),j.anchor||(p=!0))},j.on("transformhide",function(){j.turnOff(),o.loop(function(se){se&&se!=X&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()})}),j.resizeChildren=function(se){j.transformControls.resize(se),j.loop(function(be){be.transformControls&&(be.transformControls.visible&&be.transformControls.hide(),be.type=="Layer"?be.resizeChildren():be.transformControls.resize())})},j.resize=function(se){return j.move(),j.resizeChildren(se),j},j.toggled=!1;function $(){j.toggled?(o.loop(function(se){se&&se!=X&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()}),j.turnOn(),j.dispatchEvent("transformshow")):(X.top(),j.turnOff(),o.loop(function(se){se&&se!=X&&se.layer&&se.layer.turnOff&&se.layer.active&&se.layer.turnOff()}),j.dispatchEvent("transformhide")),j.stage&&j.stage.update()}if(j.toggle=function(se){return n(se)?j.toggled=!j.toggled:j.toggled=se,$(),j},Object.defineProperty(j,"titleBarDraggable",{get:function(){return b},set:function(se){b=se,b?X.drag({all:!0,boundary:e.Boundary(0,40,o.width-x,o.height-E),localBoundary:!0}):X.noDrag(!1)}}),j.stageUpEvent=D.on("stagemouseup",function(){j.transformControls.visible&&X.top()}),!n(L)||!n(A)){p=!1;var ue=n(L)?X.x:L,xe=n(A)?X.y-E:A;j.titleBarStartX=L,j.titleBarStartY=A,j.titleBarPos(ue,xe);var Ye=j.parent.localToLocal(j.x,j.y,o);j.distX=X.x-Ye.x,j.distY=X.y-Ye.y}},50)},w=="s"?.05:50),Q!==!1&&e.styleTransforms(this,ce),this.clone=function(){return j.cloneProps(new e.Layer(t,r,G,o,l,f,h,g,_,P,C,T,N,O,S,k,d,E,L,A,b,F,q,V,I,ne,R,Q,this.group,ee))},this.dispose=function(Y,Ee,X){return j.stageUpEvent&&D.off("stagemouseup",j.stageUpEvent),o&&o.loop(function(Z){Z.layer=null}),j.transformControls.dispose(),j.transformControls=null,X||this.zimContainer_dispose(!0),j.titleBar.layer=null,j.titleBar.dispose(),j.checkBox=j.button=null,i=j.titleBar=k=null,!0}},e.extend(e.Layer,e.Container,["clone","dispose"],"zimContainer",!1),e.Waiter=function(t,r,i,o,l,f,h,g,_,P,C){var T="container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",N;if(N=mt(e.Waiter,arguments,T,this))return N;qe("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=P;var O=_===!1?{}:e.getStyle(this.type,this.group,C),S=v(r);n(r)&&(r=O.speed!=null?O.speed:S=="s"?.6:600),n(i)&&(i=O.foregroundColor!=null?O.foregroundColor:e.white),n(o)&&(o=O.backgroundColor!=null?O.backgroundColor:"orange"),n(l)&&(l=O.corner!=null?O.corner:16),n(f)&&(f=O.shadowColor!=null?O.shadowColor:"rgba(0,0,0,.3)"),n(h)&&(h=O.shadowBlur!=null?O.shadowBlur:14),n(g)&&(g=O.fadeTime!=null?O.fadeTime:0);var k=40,x=3,E=k*.6/2,L=(k-E*2)/2,A=x*(E*2+L)+L;this.setBounds(-A/2,-k/2,A,k);var b=this,F,q=this.display=new e.Shape({style:!1});this.addChild(q),q.setBounds(0,0,A,k),q.regX=A/2,q.regY=k/2;var V=q.graphics;V.f(o);var I=l;Array.isArray(I)||(I=[l,l,l,l]),V.rc(0,0,A,k,I[0],I[1],I[2],I[3]),f!=-1&&h>0&&(q.shadow=new ze.Shadow(f,3,3,h)),q.on("click",function(ae){ae.stopImmediatePropagation()});var ne=new e.Container({style:!1});this.addChild(ne);for(var R,Q=0;Q<x;Q++)R=new ze.Shape,R.graphics.f(i).dc(0,0,E),R.x=(Q-(x-1)/2)*(E*2+L),ne.addChild(R),R.cache(-E,-E,E*2,E*2),R.alpha=0;this.hide=function(){g>0?b.animate({obj:{alpha:0},time:g,call:ae}):ae();function ae(){if(b.parent&&b.parent.removeChild(b),F=b.stage,F&&F.update(),b.zimAccessibility){var ie=b.zimAccessibility;ie.resize(b),U?U.focus():b.zimTabTag.nextSibling.focus(),setTimeout(function(){ie.talk("Waiter has finished.")},50)}}return b.toggled=!1,b};var U,ee=[];this.show=function(){var ae="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(n(t))if(le.zdf)t=le.zdf.stage;else{ht(ae);return}else if(t.getBounds){if(n(t.stage)){ht("zim display - Waiter(): The container must have a stage property");return}}else{ht(ae);return}for(var ie,ce=0,j=r*(S=="s"?1e3:1),G=0;G<ne.numChildren;G++)ne&&ee.push(setTimeout(function(){ie=ne.getChildAt(ce),ze.Tween.get(ie,{loop:!0}).to({alpha:1},j/x/2).wait(j/x).to({alpha:0},j/x).wait(j-j/x-j/x/2),ce++},G*j/x));if(b.ticker=ze.Ticker.on("tick",function(){t.stage.update()}),b.x=t.getBounds().width/2,b.y=t.getBounds().height/2,t.addChild(b),g>0&&(b.alpha=0,b.animate({alpha:1},g)),b.zimAccessibility){var y=b.zimAccessibility;setTimeout(function(){y.activatedObject&&(U=y.activatedObject.zimTabTag)},50),y.resize(b),y.talk(b.zimTabTag.getAttribute("aria-label"))}return b.toggled=!0,b},b.toggle=function(ae){return ae===!0?b.show():ae===!1||b.parent?b.hide():b.show(),b},_!==!1&&e.styleTransforms(this,O),this.clone=function(){return b.cloneProps(new e.Waiter(t,r,i,o,l,f,h,g,_,this.group,C))},this.dispose=function(ae,ie,ce){b.ticker&&ze.Ticker.off("tick",b.ticker),ze.Tween.removeTweens(b),b.removeFrom();for(var j=0;j<ne.numChildren;j++){var G=ne.getChildAt(j);clearInterval(ee[j]),ze.Tween.removeTweens(G)}return ce||this.zimContainer_dispose(!0),!0}},e.extend(e.Waiter,e.Container,["clone","dispose"],"zimContainer",!1),e.ProgressBar=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F){var q="barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, width, style, group, inherit",V;if(V=mt(e.ProgressBar,arguments,q,this))return V;qe("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=b;var I=A===!1?{}:e.getStyle(this.type,this.group,F);n(r)&&(r=I.foregroundColor!=null?I.foregroundColor:e.green),n(i)&&(i=I.backgroundColor!=null?I.backgroundColor:e.charcoal),n(o)&&(o=I.borderColor!=null?I.borderColor:i),n(l)&&(l=I.borderWidth!=null?I.borderWidth:null),n(_)&&(_=I.labelPosition!=null?I.labelPosition:"bottom"),n(t)&&(t=I.barType!=null?I.barType:"circle"),n(f)&&(f=I.padding!=null?I.padding:t=="circle"?2:-.5),n(C)&&(C=I.corner!=null?I.corner:15),n(T)&&(T=I.shadowColor!=null?I.shadowColor:"rgba(0,0,0,.3)"),n(N)&&(N=I.shadowBlur!=null?I.shadowBlur:14),n(O)&&(O=I.backing!=null?I.backing.clone():null),n(k)&&(k=I.fastClose!=null?I.fastClose:!0),o<0||l<0?o=l=null:o!=null&&l==null&&(t=="circle"?l=10:l=2);var ne=v(S);n(S)&&(S=I.delay!=null?I.delay:ne=="s"?.1:100),n(E)&&(E=I.autoHide!=null?I.autoHide:!0),n(h)&&(h=I.label!=null?I.label:null),n(g)&&(g=I.color!=null?I.color:r),n(L)&&(L=I.width!=null?I.width:t=="circle"?40:200),(typeof h=="string"||typeof h=="number")&&(h=new e.Label({text:h,color:g,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!n(P)&&n(h)&&(h=new e.Label("")),this.label=h;var R=30,Q=this,U=0;Q.visible=!1,setTimeout(function(){Q.visible=!0,Q.stage&&Q.stage.update()},S);var ee;if(t=="circle")L=L/2,O=this.backing=new e.Circle(L,"rgba(0,0,0,0)",i,l,null,null,null,null,!1).addTo(Q),ee=this.bar=new e.Shape({style:!1}).addTo(Q).loc(O.x,O.y).rot(-90);else{if(T!=-1&&N>0){var ae=new e.Rectangle(L-2,R-2,i,null,null,C,null,null,null,!1).addTo(this);ae.shadow=new ze.Shadow(T,3,3,N)}O=G(O);var ie=C;Array.isArray(ie)||(ie=[C,C,C,C]);var ce=(f+l/2)*1.2;ee=this.bar=new e.Rectangle(L-(f+l/2)*1.8,R-(f+l/2)*1.8,r,null,null,[ie[0]-ce,ie[1]-ce,ie[2]-ce,ie[3]-ce],null,null,null,!1).center(this);var j=this.mask=new e.Rectangle(L-(f+l/2)*1.8,R-(f+l/2)*1.8,null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1);ee.setMask(j)}function G(D){var K;if(Q.backing?(K=Q.getChildIndex(Q.backing),Q.removeChild(Q.backing)):K=Q.numChildren,Q.border&&Q.removeChild(Q.border),!n(D)&&D.type=="Pattern"){var w=D;D=Q.backing=new e.Rectangle(L,R,i,null,null,C,null,null,null,!1).addTo(Q,K),D.pattern=w,w.center(D),w.setMask(D.shape),l&&(Q.border=new e.Rectangle(L,R,"rgba(0,0,0,0)",o,l,C,null,null,null,!1).addTo(Q,K+1))}else D=Q.backing=n(D)?new e.Rectangle(L,R,i,o,l,C,null,null,null,!1).addTo(Q,K):O.addTo(Q,K);return D}Q.setBacking=function(D){G(D),Q.stage&&Q.stage.update()},O.on("click",function(D){D.stopImmediatePropagation()}),n(h)||(h.scaleX=h.scaleY=.8,h.startText=h.text,n(P)||(h.text=h.startText+"  0%"),h.center(Q),_=="above"?h.y-=60:h.y+=60,h.alpha=.8),this.hide=function(){var D=Q.stage;if(Q.parent&&Q.parent.removeChild(Q),Q.backing.type=="Pattern"&&Q.backing.pauseInterval&&Q.backing.pauseInterval(),D&&D.update(),Q.zimAccessibility){var K=Q.zimAccessibility;K.resize(Q),y?y.focus():Q.zimTabTag.nextSibling.focus(),setTimeout(function(){K.talk("Progress Bar has finished.")},50)}return Q.toggled=!1,Q};var y;this.show=function(){var D="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(n(x))if(le.zdf)x=le.zdf.stage;else{ht(D);return}else if(x.getBounds){if(n(x.stage)){ht("zim display - Waiter(): The container must have a stage property");return}}else{ht(D);return}if(Q.timeOut&&clearTimeout(Q.timeOut),p(0),Q.zimActiveLoader&&Q.zimActiveLoader.on("progress",function(w){U=w.progress*100,p(U)}),Q.center(x),Q.backing.type=="Pattern"&&Q.backing.pauseInterval&&Q.backing.pauseInterval(!1),Q.zimAccessibility){var K=Q.zimAccessibility;setTimeout(function(){K.activatedObject&&(y=K.activatedObject.zimTabTag)},50),K.resize(Q),K.talk(Q.zimTabTag.getAttribute("aria-label"))}return Q.toggled=!0,Q},Q.toggle=function(D){return D===!0?Q.show():D===!1||Q.parent?Q.hide():Q.show(),Q},Q.run=function(D,K){n(K)||(E=K),n(D)&&(D=ne=="s"?3:3e3),a(D,ne);var w=D*(ne=="s"?1e3:1);Q.runInterval&&clearInterval(Q.runInterval),Q.percent=0;var Y=Date.now();return Q.runInterval=setInterval(function(){Q.percent=(Date.now()-Y)/w*100,Q.percent>=100&&(Q.percent=100,clearInterval(Q.runInterval))},30),Q},Q.dispatched=!1;function p(D){t=="circle"?ee.graphics.c().mt(0,0).s(r).ss(l-f*2+.5).a(0,0,L,0,360*D/100*Math.PI/180):(j.sca(D/100,1),ee.setMask(j)),n(P)||(h.text=h.startText+" "+Math.min(Math.round(D),100)+"%"),E&&k&&Math.round(D)>=100&&(Q.timeOut=setTimeout(function(){Q.hide()},200)),!Q.dispatched&&Math.round(D)>=100&&(Q.dispatchEvent("complete"),Q.dispatched=!0,setTimeout(function(){Q&&(Q.dispatched=!1)},100)),Q.stage&&Q.stage.update()}Object.defineProperty(Q,"percent",{get:function(){return U},set:function(D){U=D,p(D)}});var d=Q.getBounds();Q.setBounds(d.x-5,d.y-5,d.width+10,d.height+10),A!==!1&&e.styleTransforms(this,I),this.clone=function(){return Q.cloneProps(new e.ProgressBar(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,this.group,F))},this.dispose=function(D,K,w){return Q.backing.type=="Pattern"&&Q.backing.clearInterval&&Q.backing.clearInterval(),Q.runInterval&&clearInterval(Q.runInterval),w||this.zimContainer_dispose(!0),!0}},e.extend(e.ProgressBar,e.Container,["clone","dispose"],"zimContainer",!1),e.Indicator=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b){var F="width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, backgroundAlpha, style, group, inherit",q;if(q=mt(e.Indicator,arguments,F,this))return q;qe("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=A;var V=L===!1?{}:e.getStyle(this.type,this.group,b);n(t)&&(t=V.width!=null?V.width:300),n(r)&&(r=V.height!=null?V.height:50),n(i)&&(i=V.num!=null?V.num:6),n(P)&&(P=V.indicatorType!=null?V.indicatorType:"dot"),n(o)&&(o=V.foregroundColor!=null?V.foregroundColor:P=="star"?e.yellow:P=="heart"?e.red:e.orange),n(l)&&(l=V.backgroundColor!=null?V.backgroundColor:e.granite),l<0&&(l=V.backgroundColor!=null?V.backgroundColor:"rgba(0,0,0,.01)"),n(f)&&(f=V.borderColor!=null?V.borderColor:null),n(h)&&(h=V.borderWidth!=null?V.borderWidth:null),f<0||h<0?f=h=null:f!=null&&h==null&&(h=1),n(g)&&(g=V.backdropColor!=null?V.backdropColor:-1),n(_)&&(_=V.corner!=null?V.corner:0),n(C)&&(C=V.fill!=null?V.fill:!1),n(T)&&(T=V.scale!=null?V.scale:1),n(N)&&(N=V.lightScale!=null?V.lightScale:1),n(O)&&(O=V.interactive!=null?V.interactive:!1),n(S)&&(S=V.shadowColor!=null?V.shadowColor:"rgba(0,0,0,.3)"),n(k)&&(k=V.shadowBlur!=null?V.shadowBlur:5),n(E)&&(E=V.backgroundAlpha!=null?V.backgroundAlpha:.2);var I=(Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",ne=this;this.lights=[];var R;if(g!=-1){var Q=ne.backdrop=new e.Rectangle(t,r,g,f,h,_,null,null,null,!1);this.addChild(Q)}var U=this.lightsContainer=new e.Container({style:!1});this.addChild(U);var ee,ae=r*.5,ie=t/(i+1),ce=new ze.Shape,j=!1;P=="square"||P=="box"||P.type=="Emoji"?ce.graphics.f("black").dr(-ie/2/N+ae/2,-r/2+ae/2,ie/N,r):ce.graphics.f("black").dr(-ie/2/N,-r/2,ie/N,r);for(var G=0;G<i;G++)P=="square"||P=="box"?(ee=new e.Rectangle(ae,ae,l,f,h,null,null,null,null,!1),ee.regX=ee.width/2,ee.regY=ee.height/2):P=="star"?ee=new e.Poly(ae*.6,5,.5,l,f,h,null,null,!1):P=="heart"?ee=new e.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:l,interactive:!1}).transformPoints("scale",.15):P.type=="Emoji"?(j=!0,ee=P.clone().reg("center","center"),ee.myCache=!1):ee=new e.Circle(ae/2,l,f,h,null,null,null,null,!1),this.lights.push(ee),ee.znum=G,ee.scaleX=ee.scaleY=N,ee.hitArea=ce,ee.x=ie+ie*G,ee.y=r/2,U.addChild(ee);U.setBounds(0,0,t,r),U.regX=U.x=t/2,U.regY=U.y=r/2,this.addChild(U),S!=-1&&k>0&&(U.shadow=new ze.Shadow(S,2,2,k)),O&&(U.cur("pointer"),ne.lightsEvent=U.on(I,function(p){if(R==p.target.znum){if(R>0)return;if(R==0){R=-1,y(R),ne.dispatchEvent("change");return}}R=p.target.znum,y(R),ne.dispatchEvent("change")})),U.scaleX=U.scaleY=T;function y(p){p>=i&&(p=-1);for(var d,D=0;D<i;D++){C&&D<p?d=o:d=l,D==p&&(d=o);var K=U.getChildAt(D);j&&(K.alpha=d==o?1:E),K.color=d}ne.zimAccessibility&&ne.zimAccessibility.changeTitle(ne),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&ne.stage&&ne.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return R},set:function(p){R=Math.floor(p),R=e.constrain(R,-1,i-1),y(R)}}),Object.defineProperty(this,"num",{get:function(){return i},set:function(){Et&&ht("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(ne,"enabled",{get:function(){return ne._enabled},set:function(p){c(ne,p)}}),n(x)&&(x=V.selectedIndex!=null?V.selectedIndex:0),ne.selectedIndex=x,L!==!1&&e.styleTransforms(this,V),this.dispose=function(p,d,D){D||(ne.lightsEvent&&U.off(I,ne.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return ne.cloneProps(new e.Indicator(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,this.group,b))}},e.extend(e.Indicator,e.Container,["clone","dispose"],"zimContainer",!1),e.TextInput=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w){var Y="width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingH, paddingV, shiftH, shiftV, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, readOnly, inputType, rtl, uppercase, placeholderInstant, keyboardShift, style, group, inherit",Ee;if(Ee=mt(e.TextInput,arguments,Y,this))return Ee;qe("54.2"),this.group=K;var X=D===!1?{}:e.getStyle("TextInput",this.group,w);n(l)&&(l=X.size!=null?X.size:36),(n(b)||b=="ignore")&&(b=X.padding!=null&&b!="ignore"?X.padding:5),n(F)&&(F=X.paddingH!=null?X.paddingH:b),n(q)&&(q=X.paddingV!=null?X.paddingV:b),n(t)&&(t=X.width!=null?X.width:300),n(r)&&(r=X.height!=null?X.height:l+q*2),n(i)&&(i=X.placeholder!=null?X.placeholder:null),n(o)&&(o=X.text!=null?X.text:""),n(f)&&(f=X.font!=null?X.font:"arial"),n(h)&&(h=X.color!=null?X.color:e.dark),n(g)&&(g=X.backgroundColor!=null?X.backgroundColor:e.lighter),n(_)&&(_=X.borderColor!=null?X.borderColor:null),n(P)&&(P=X.borderWidth!=null?X.borderWidth:null);var Z=pe(t,r,i,o,h,g,_);this.veeObj={width:Z[0],height:Z[1],placeholder:Z[2],text:Z[3],color:Z[4],backgroundColor:Z[5],borderColor:Z[6]};function pe(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),h=e.Pick.choose(h),g=e.Pick.choose(g),_=e.Pick.choose(_),n(N)&&(N=X.selectionColor!=null?X.selectionColor:h),n(O)&&(O=X.selectionAlpha!=null?X.selectionAlpha:.2),n(S)&&(S=X.cursorColor!=null?X.cursorColor:h),n(k)&&(k=X.cursorSpeed!=null?X.cursorSpeed:.5),n(x)&&(x=X.shadowColor!=null?X.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=X.shadowBlur!=null?X.shadowBlur:20),n(L)&&(L=X.align!=null?X.align:"left"),n(A)&&(A=X.corner!=null?X.corner:0),n(V)&&(V=X.shiftH!=null?X.shiftH:0),n(T)&&(T=X.password!=null?X.password:!1),n(I)&&(I=X.shiftV!=null?X.shiftV:T?l*.25:0),n(C)&&(C=X.maxLength!=null?X.maxLength:L=="center"?Math.floor(t/l)*1.8:null),n(ne)&&(ne=X.scrollBarActive!=null?X.scrollBarActive:!1),n(R)&&(R=X.scrollBarDrag!=null?X.scrollBarDrag:!1),n(Q)&&(Q=X.scrollBarColor!=null?X.scrollBarColor:_),n(U)&&(U=X.scrollBarAlpha!=null?X.scrollBarAlpha:.3),n(ee)&&(ee=X.scrollBarFade!=null?X.scrollBarFade:!0),n(ae)&&(ae=X.scrollBarH!=null?X.scrollBarH:!0),n(ie)&&(ie=X.scrollBarV!=null?X.scrollBarV:!0),n(ce)&&(ce=X.readOnly!=null?X.readOnly:!1),n(j)&&(j=X.inputType!=null?X.inputType:"text"),R&&(ee=X.scrollBarFade!=null?X.scrollBarFade:!1),n(G)&&(G=X.rtl!=null?X.rtl:le.DIR=="rtl"||e.DIR=="rtl"?"rtl":null),n(y)&&(y=X.uppercase!=null?X.uppercase:null),n(d)&&(d=X.keyboardShift!=null?X.keyboardShift:null),y&&(o&&(o=o.toUpperCase()),i&&(i=i.toUpperCase())),n(p)&&(p=X.placeholderInstant!=null?X.placeholderInstant:!0);function ve(){return le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?L=="start"?L="right":L=="end"&&(L="left"):L=="start"?L="left":L=="end"&&(L="right"),L}L=ve(L),this.zimWindow_constructor(t,r,null,g,_,P,b,A,!1,ne,R,Q,U,ee,ae,ie,!1,null,null,!1,!0,x,E,F,q,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,D,K,e.copy(X)),this.type="TextInput";var $=this;this.placeholderLabel=new e.Label({text:i||"",size:l,color:h,font:f,shiftH:V,shiftV:I,valign:"top"}).alp(.5),o==""&&this.add(this.placeholderLabel);var ue=new e.Rectangle({width:t-b*2,height:r-b*2,color:e.clear,style:!1}).center(this);this.cur("text");var xe=this.label=new e.TextInput.LabelInput(o,l,C,T,N,O,S,k,f,h,null,null,null,L,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,V,I,null,null,null,null,j,G,y,p,D,K,w);this.add(xe),xe.setMask(ue),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,L=="right"?(xe.x=t-F,this.placeholderLabel.x=t-this.placeholderLabel.width-F):L=="center"&&(xe.x=t/2,this.placeholderLabel.x=(t-this.placeholderLabel.width)/2),xe.ogx=xe.x,$.placeholderLabel.x=xe.x,$.placeholderLabel.align=L;var Ye=new e.Rectangle({width:b,height:r,color:e.clear,style:!1}).addTo(this).expand(0);Ye.on("mousedown",function(ye){xe.onMousedown(ye),ye.stopImmediatePropagation()}),Ye.on("pressmove",function(ye){xe.onPressmove(ye),ye.stopImmediatePropagation()}),Ye.on("dblclick",function(ye){xe.onDblclick(ye),ye.stopImmediatePropagation()});var se=new e.Rectangle({width:b,height:r,color:e.clear,style:!1}).pos(0,0,e.RIGHT,e.TOP,this).expand(0);se.on("mousedown",function(ye){xe.onMousedown(ye),ye.stopImmediatePropagation()}),se.on("pressmove",function(ye){xe.onPressmove(ye),ye.stopImmediatePropagation()}),se.on("dblclick",function(ye){xe.onDblclick(ye),ye.stopImmediatePropagation()});var be=xe.text;this.on("mousedown",function(ye){xe.onMousedown(ye),be=xe.text}),this.on("pressmove",function(ye){xe.onPressmove(ye),ye.stopImmediatePropagation()}),this.on("dblclick",function(ye){xe.onDblclick(ye),ye.stopImmediatePropagation()}),this.added(function(ye){ye.on("stagemousedown",function(Re){$.hitTestPoint(Re.stageX,Re.stageY)||(xe.focus=!1,xe.text!=be&&$.dispatchEvent("change"),be=xe.text)})});var te=$.stage?stage.y:0;this.label.on("focus",function(){if(le.M&&d){$.re&&$.stage.frame.off("resize",$.re),$.re=$.stage.frame.on("resize",function(){$.stage&&ye>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-ye),$.stage.update())});var ye=$.label.localToGlobal(0,0).y;$.stage&&ye>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-ye),$.stage.update())}p&&$.placeholderLabel.parent&&($.placeholderLabel.removeFrom(),$.stage&&$.stage.update()),$.dispatchEvent("focus")}),this.label.on("blur",function(){le.M&&d&&$.stage&&($.re&&$.stage.frame.off("resize",$.re),$.stage.y=te,$.stage.update()),p&&xe.text==""&&!$.placeholderLabel.parent&&($.add($.placeholderLabel),$.stage&&$.stage.update()),$.dispatchEvent("blur")});function _e(){xe.text!=""&&$.placeholderLabel.parent&&($.placeholderLabel.removeFrom(),$.stage&&$.stage.update()),xe.text==""&&!$.placeholderLabel.parent&&($.add($.placeholderLabel),$.stage&&$.stage.update())}this.label.on("input",function(){_e(),$.dispatchEvent("input")}),this.label.on("keydown",function(ye){this.label.deleteKey=ye.detail==46,$.dispatchEvent("keydown")}),this.label.on("blinker",function(){var ye=$.localToGlobal(0,0).x,Re=ye+t-F-xe.blinker.width,de=xe.blinker,Me=de.localToGlobal(0,0).x,Be=xe.localToGlobal(0,0).x-1,he=xe.x+xe.blinker.x,Ae=e.constrain(he,F,t-F-xe.blinker.width);if(he!=Ae&&(xe.x-=he-Ae),L=="left")xe.width<$.width?xe.x=xe.ogx:Re<Me||xe.oldWidth==xe.width?xe.x-=he-Ae:xe.oldWidth>xe.width&&this.label.deleteKey!=!0&&(xe.x+=Math.abs(de.oldX-Me)+xe.blinker.width+F);else if(L=="right")xe.width<$.width?xe.x=xe.ogx:Re<Me||xe.oldWidth==xe.width?xe.x-=he-Ae:xe.oldWidth>xe.width&&this.label.deleteKey==!0&&Me<Be-$.width&&(xe.x-=Math.abs(de.oldX-Me)+xe.blinker.width+F);else if(L=="center"){if(xe.width<$.width)xe.x=xe.ogx;else if(Re<Me)xe.x-=he-Ae;else if(xe.oldWidth==xe.width)xe.x-=he-Ae;else if(xe.oldWidth>xe.width&&Re>Me){var Ce=ye+$.width*.5;this.label.deleteKey!=!0?xe.x+=xe.blinker.width+F:xe.x-=xe.blinker.width+F}}xe.oldWidth=xe.width,de.oldX=Me,$.stage&&$.stage.update()}),Object.defineProperty($,"text",{get:function(){return xe.hiddenInput.value},set:function(ye){be=ye,xe.setText(ye),_e(),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&$.stage&&$.stage.update()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==$},set:function(){e.KEYFOCUS=$}}),e.KEYFOCUS||J(),this.on("mousedown",function(){J()});function J(){$.keyFocus=!0}Object.defineProperty($,"readOnly",{get:function(){return ce},set:function(ye){ce=ye,$.htmlTag.setAttribute("readonly",ce)}}),ce&&($.readOnly=!0),Object.defineProperty($,"focus",{get:function(){return xe.focus},set:function(ye){xe.focus=ye}}),Object.defineProperty($,"color",{get:function(){return xe.color},set:function(ye){xe.color=latestColor=ye,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"size",{get:function(){return xe.size},set:function(ye){xe.size=ye,xe.hiddenInput.style.fontSize=ye+"px",!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"align",{get:function(){return xe.align},set:function(ye){xe.align=L=ve(ye),L=="right"?xe.x=t-xe.width:L=="center"?xe.x=t/2:xe.x=0,$.placeholderLabel.x=xe.x,$.placeholderLabel.align=L,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"font",{get:function(){return xe.font},set:function(ye){xe.font=ye,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"selectionAlpha",{get:function(){return xe.selectionAlpha},set:function(ye){xe.selectionAlpha=ye,xe.selection.alpha!=0&&(xe.selection.alpha=ye),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&$.stage&&$.stage.update()}}),D!==!1&&e.styleTransforms(this,X),this.clone=function(ye){return $.cloneProps(new e.TextInput(ye||!e.isPick(Z[0])?t:Z[0],ye||!e.isPick(Z[1])?r:Z[1],ye||!e.isPick(Z[2])?i:Z[2],ye||!e.isPick(Z[3])?o:Z[3],l,f,ye||!e.isPick(Z[4])?h:Z[4],ye||!e.isPick(Z[5])?g:Z[5],ye||!e.isPick(Z[6])?_:Z[6],P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,this.group,w))}},e.extend(e.TextInput,e.Window,"clone","zimWindow",!1),e.TextInput.LabelInput=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee){this.zimLabel_constructor(t,r,_,P,null,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,null,G,y,null,p,w,Y,Ee),this.type="LabelInput",n(P)&&(P=e.dark),n(l)&&(l=P),n(f)&&(f=.2),this.selectionAlpha=f,n(h)&&(h=P),n(g)&&(g=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.setAttribute("id",e.makeID()),this.hiddenInput.value=t,d=="text"&&o&&(d="password"),this.hiddenInput.type=d,d=="number"&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric"),i>0&&(this.hiddenInput.maxLength=i),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(Z=this.stage.frame),Z.zil&&le.removeEventListener("keydown",Z.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(Z=this.stage.frame),Z.zil&&le.addEventListener("keydown",Z.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=d,this.dispatchEvent("blur")},this.onInput=function(){K&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var pe=this.hiddenInput.value;d=="number"&&(pe=pe.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=pe),this.text=this.hiddenInput.type=="password"?pe.replace(/./g,"*"):pe,this.measureText(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var X=this;this.onKeydown=function(pe){this.deleteKey=pe.code=="Backspace"||pe.code=="Delete",this.blinker.replayTween(),setTimeout(function(){let ve=new CustomEvent("keydown",{detail:pe.keyCode});X.positionBlinkerAndSelection.call(X),X.dispatchEvent(ve)},10)},this.onMousedown=function(pe){var ve=this.text.length,$=this.eventPositionGlobalToLocal(pe);this.focus||(this.hiddenInput.focus(),(d=="number"||d=="email")&&(this.hiddenInput.type="text"));var ue=this.mapPointToIndex($);D?this.hiddenInput.setSelectionRange(ve-ue,ve-ue):this.hiddenInput.setSelectionRange(ue,ue),this.positionBlinkerAndSelection()},this.onPressmove=function(pe){var ve=this.text.length;this.focus||this.hiddenInput.focus();var $=this.eventPositionGlobalToLocal(pe),ue;D?ue=ve-this.mapPointToIndex($):ue=this.mapPointToIndex($),this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=ue?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,ue,D?"backward":"forward"):this.hiddenInput.setSelectionRange(ue,this.hiddenInput.selectionEnd,D?"forward":"backward"):this.hiddenInput.selectionDirection===(D?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,ue,D?"backward":"forward"):this.hiddenInput.setSelectionRange(ue,this.hiddenInput.selectionEnd,D?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var pe=this.text.length;if(this.focus){var ve=this.backing||this.background?this.paddingH:0,$=this.backing||this.background?this.paddingV:0;if(this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd){var ue,xe;D?(ue=this.textWidthArray[pe-this.hiddenInput.selectionStart],xe=this.textWidthArray[pe-this.hiddenInput.selectionEnd],this.selection.widthOnly=xe-ue,this.selection.pos(xe+ve-1+ie,$+ce)):(ue=this.textWidthArray[this.hiddenInput.selectionStart],xe=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=xe-ue,this.selection.pos(ue+ve-1+ie,$+ce)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)}else this.selection.alp(0);this.blinker.heightOnly=this.textHeight;var Ye=this.hiddenInput.selectionDirection==="backward"?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd;Ye||(Ye=0),D&&(Ye=pe-Ye),this.blinker.pos(this.textWidthArray[Ye]+ve-1+(O=="right"&&this.text==""?this.width:O=="center"&&this.text==""?this.width/2:0)+ie,$+ce),this.dispatchEvent("blinker")}this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(pe){var ve=this.globalToLocal(pe.stageX/e.scaX,pe.stageY/e.scaY);return O=="right"?ve.x-=this.label.x-this.width:O=="center"?ve.x-=(this.label.x-this.width)/2:ve.x-=this.label.x,ve.y-=this.label.y,ve},this.mapPointToIndex=function(pe){for(var ve=this.textWidthArray.length-1,$=0;$<this.textWidthArray.length-1;$++){var ue=(this.textWidthArray[$]+this.textWidthArray[$+1])/2;if(pe.x<=ue){ve=$;break}}return ve},this.measureText=function(){var pe=this.label.clone(),ve=this.text;D&&(ve=ve.split("").reverse().join(""));for(var $=0;$<ve.length&&$<this.previousMeasuredText.length&&ve[$]===this.previousMeasuredText[$];)$++;for(this.textWidthArray=this.textWidthArray.slice(0,$+1),$++;$<=ve.length;$++)pe.text=ve.slice(0,$),this.textWidthArray.push(pe.getMeasuredWidth());this.previousMeasuredText=ve,this.textHeight=pe.getMeasuredLineHeight()},this.setText=function(pe){K&&(pe=pe.toUpperCase()),this.hiddenInput.value=pe,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===X.hiddenInput},set:function(pe){pe===!0?X.hiddenInput.focus():X.hiddenInput.blur()}});var Z;this.added(function(pe){Z=pe.frame,X.hiddenInput.addEventListener("focus",X.onFocus.bind(X)),X.hiddenInput.addEventListener("blur",X.onBlur.bind(X))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cur("text"),this.blinker=new e.Rectangle({width:2,height:1,color:h,style:!1}).animate({obj:{alpha:0},wait:g,time:.1,rewind:!0,rewindWait:g,loop:!0,loopWait:g}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new e.Rectangle({width:1,height:1,color:l,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},e.extend(e.TextInput.LabelInput,e.Label,null,"zimLabel",!1),e.List=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye,Re,de,Me,Be,he,Ae,Ce,me,Ne,ge,Ue,He,Oe,fe,Xe,Ze,Ke,ut,gt,We,it,ct){var Pe="width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, spacing, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, downColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideFactor, slideSnap, slideSnapDamp, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, pulldownToggle, optimize, keyEnabled, resizeHandle, resizeBoundary, resizeVisible, continuous, style, group, inherit",Fe;if(Fe=mt(e.List,arguments,Pe,this))return Fe;qe("60.5"),this.group=it;var we=We===!1?{}:e.getStyle("List",this.group,ct);n(t)&&(t=we.width!=null?we.width:300);var je=r;n(r)&&(r=we.height!=null?we.height:n(Ae)?200:200+Ae.height),n(i)&&(i=i=we.list!=null?we.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),i.length==0&&(i=["%-&"]),this.originalList=i,n(o)&&(o=we.viewNum!=null?we.viewNum:5),n(l)&&(l=we.vertical!=null?we.vertical:!0),n(f)&&(f=we.currentSelected!=null?we.currentSelected:!0);var st=!n(h)||!n(_);n(Ce)&&(Ce=we.checkBox!=null?we.checkBox:!1),n(h)&&(h=we.align!=null?we.align:Ce?"left":"center"),n(g)&&(g=we.valign!=null?we.valign:"center"),n(_)&&(_=we.labelAlign!=null?we.labelAlign:h),n(P)&&(P=we.labelValign!=null?we.labelValign:g),n(O)&&(O=we.indent!=null?we.indent:Ce?0:10),n(C)&&(C=we.labelIndent!=null?we.labelIndent:O),n(T)&&(T=we.labelIndentH!=null?we.labelIndentH:C),n(N)&&(N=we.labelIndentV!=null?we.labelIndentV:C),n(S)&&(S=we.spacing!=null?we.spacing:2),n(b)&&(b=we.backdropColor!=null?we.backdropColor:e.dark),n(k)&&(k=we.backgroundColor!=null?we.backgroundColor:e.tin),n(x)&&(x=we.rollBackgroundColor!=null?we.rollBackgroundColor:e.grey),n(E)&&(E=we.downBackgroundColor!=null?we.downBackgroundColor:x),n(L)&&(L=we.selectedBackgroundColor!=null?we.selectedBackgroundColor:e.charcoal),n(A)&&(A=we.selectedRollBackgroundColor!=null?we.selectedRollBackgroundColor:e.grey),n(F)&&(F=we.color!=null?we.color:e.white),n(q)&&(q=we.rollColor!=null?we.rollColor:F),n(V)&&(V=we.downColor!=null?we.downColor:q),n(I)&&(I=we.selectedColor!=null?we.selectedColor:F),n(ne)&&(ne=we.selectedRollColor!=null?we.selectedRollColor:q),n(b)&&(b=we.backdropColor!=null?we.backdropColor:b);var Je=R,tt=Q;n(R)&&(R=we.borderColor!=null?we.borderColor:e.silver),n(Q)&&(Q=we.borderWidth!=null?we.borderWidth:1),n(U)&&(U=we.padding!=null?we.padding:S),n(ee)&&(ee=we.corner!=null?we.corner:0),n(ae)&&(ae=we.swipe!=null?we.swipe:!0),n(ie)&&(ie=we.scrollBarActive!=null?we.scrollBarActive:!0),n(ce)&&(ce=we.scrollBarDrag!=null?we.scrollBarDrag:!0),n(j)&&(j=we.scrollBarColor!=null?we.scrollBarColor:R),n(G)&&(G=we.scrollBarAlpha!=null?we.scrollBarAlpha:.3),n(y)&&(y=we.scrollBarFade!=null?we.scrollBarFade:!0),n(p)&&(p=we.scrollBarH!=null?we.scrollBarH:!l),n(d)&&(d=we.scrollBarV!=null?we.scrollBarV:l),ce&&(y=we.scrollBarFade!=null?we.scrollBarFade:!1),n(D)&&(D=we.scrollBarOverlay!=null?we.scrollBarOverlay:!0),n(K)&&(K=we.slide!=null?we.slide:!0),n(w)&&(w=we.slideFactor!=null?we.slideFactor:.95),n(Y)&&(Y=we.slideSnap!=null?we.slideSnap:l?"vertical":"horizontal"),n(X)&&(X=we.shadowColor!=null?we.shadowColor:"rgba(0,0,0,.3)"),n(Z)&&(Z=we.shadowBlur!=null?we.shadowBlur:20),n(ve)&&(ve=we.paddingV!=null?we.paddingV:U),n(pe)&&(pe=we.paddingH!=null?we.paddingH:U),n($)&&($=we.scrollWheel!=null?we.scrollWheel:!0),n(xe)&&(xe=we.titleBar!=null?we.titleBar:null),n(Ye)&&(Ye=we.titleBarColor!=null?we.titleBarColor:null),n(se)&&(se=we.titleBarBackgroundColor!=null?we.titleBarBackgroundColor:null),n(be)&&(be=we.titleBarHeight!=null?we.titleBarHeight:35),n(te)&&(te=we.draggable!=null?we.draggable:null),n(_e)&&(_e=we.boundary!=null?we.boundary:null),n(J)&&(J=we.onTop!=null?we.onTop:null),n(ye)&&(ye=we.close!=null?we.close:null),n(Re)&&(Re=we.closeColor!=null?we.closeColor:null),n(de)&&(de=we.collapse!=null?we.collapse:null),n(Me)&&(Me=we.collapseColor!=null?we.collapseColor:null),n(he)&&(he=we.excludeCustomTap!=null?we.excludeCustomTap:!1),n(Ce)&&(Ce=we.checkBox!=null?we.checkBox:!1),n(me)&&(me=we.pulldown!=null?we.pulldown:!1),n(Oe)&&(Oe=we.pulldownToggle!=null?we.pulldownToggle:!1),n(He)&&(He=we.noScale!=null?we.noScale:!1),n(Ne)&&(Ne=we.clone!=null?we.clone:!1),n(fe)&&(fe=we.optimize!=null?we.optimize:!0),n(Xe)&&(Xe=we.keyEnabled!=null?we.keyEnabled:null),n(Ze)&&(Ze=we.resizeHandle!=null?we.resizeHandle:null),n(Ke)&&(Ke=we.resizeBoundary!=null?we.resizeBoundary:null),n(ut)&&(ut=we.resizeVisible!=null?we.resizeVisible:!1),n(gt)&&(gt=we.continuous!=null?we.continuous:!1),xe===!1&&(xe=null),this.vertical=l;var Te=this,et=r;le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?h=="start"?h="right":h=="end"&&(h="left"):h=="start"?h="left":h=="end"&&(h="right");var Ve;gt?(Te.continuous=!0,Ve=e.copy(i),e.loop(i.length,function(ot){i[ot].clone?Ve.push(i[ot].clone()):Ve.push(i[ot])})):Ve=i,Ce&&e.loop(Ve,function(ot,bt){Ve[bt]!="%-&"&&(Ve[bt]=e.List.checkItem(ot,null,t,"left",10,10,S,F,q,I,ne,k,x,L,A))});var Le=v(),Qe;if(Ve.constructor=={}.constructor){var $e=n(Ve.shade)?n(we.shade)?.2:we.shade:Ve.shade,nt=n(Ve.dim)?n(we.dim)?.1:we.dim:Ve.dim,pt=n(Ve.shift)?n(we.shift)?15:we.shift:Ve.shift,De=n(Ve.bloom)?n(we.bloom)?!1:we.bloom:Ve.bloom,at=n(Ve.whither)?n(we.whither)?!1:we.whither:Ve.whither,yt=n(Ve.open)?n(we.open)?!1:we.open:Ve.open,rt=n(Ve.expander)?n(we.expander)?"plus":we.expander:Ve.expander;rt=rt.toLowerCase(),rt=="arrows"&&(rt="arrow"),rt!="none"&&rt!="arrow"&&(rt="plus"),De===!0&&(De=Le=="s"?.01:10),at===!0&&(at=Le=="s"?.01:10),a(De),a(at),pt===!0&&(pt=15),$e===!0&&($e=.2),nt===!0&&(nt=.1);var Tt=n(Ve.subStyles)?n(we.subStyles)?{}:we.subStyles:Ve.subStyles;n(Ve.menu)||(Ve=Ve.menu),Qe=Te.tree=new e.Hierarchy(Ve),Ve=Qe.getLinearList(),st||(h=_="left")}me&&(o=n(Qe)?Ve.length:Qe.length,n(je)&&(r=o*t/620*100+(o+1)*S+(n(xe)?0:be)),Q=0,L=k,b=e.clear,ae=!1);var xt=0,Ct=0;e.loop(Ve,function(ot){ot.type=="ListItem"&&(ot.width=t-S*2),He&&(ot.width&&(xt+=ot.width),ot.height&&(Ct+=ot.height))}),xt&&(xt+=S*(Ve.length-1)),Ct&&(Ct+=S*(Ve.length-1)),this.align=h,this.valign=g,this.indent=O,n(Ae)||(r=r-Ae.height,Ae.list=Te,Te.organizer=Ae,Ae.setButtons(),be+=Ae.height),gt&&(ie=!1),this.zimWindow_constructor(t,r,null,b,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,K,w,Y,Ee,!0,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye,Re,ge,!1,null,Ze,de,Me,Be,fe,Ke,ut,gt?l?"vertical":"horizontal":null,We,it,e.copy(we)),this.type="List",n(xe)||(this.titleBarLabel.pos(null,be-30,null,!0),n(be)&&(be=30),r=r-be),n(Ae)||Ae.addTo(Te).loc(0,-Ae.height),xt&&He?(Te.itemWidth=l?t-(ie?D?0:6:0):xt/Ve.length,Te.itemHeight=l?Ct/Ve.length:r-(ie?D?0:6:0)):(Te.itemWidth=l?t-(ie?D?0:6:0):t/o,Te.itemHeight=l?r/o:r-(ie?D?0:6:0));var lt,Dt=e.copy(we);delete Dt.borderWidth,delete Dt.borderColor;function Mt(ot){lt=Te.tabs=new e.Tabs({width:l?Te.itemWidth:Te.itemWidth*Ve.length,height:l?Te.itemHeight*Ve.length:Te.itemHeight,tabs:ot,spacing:S,vertical:l,backgroundColor:k,rollBackgroundColor:x,downBackgroundColor:E,selectedBackgroundColor:L,selectedRollBackgroundColor:A,color:F,rollColor:q,downColor:V,selectedColor:I,selectedRollColor:ne,backdropColor:b,currentEnabled:!0,currentSelected:f,align:h,valign:g,labelAlign:_,labelValign:P,labelIndent:C,labelIndentH:T,labelIndentV:N,indent:O,useTap:!0,excludeCustomTap:he,keyWrap:!1,keyEnabled:Xe,style:We,group:it,inherit:Dt}).siz(l?t-pe*2:null,l?null:r-ve*2).mov(l?0:pe,l?ve:0),Te.add(lt),e.loop(lt.labels,function(bt){bt&&(bt.backgroundColor=e.clear)})}Mt(e.copy(Ve,Ne)),gt&&Te.on("scrolling",function(){var ot=Te.tabs.localToLocal(0,0,Te);l&&(ot.y>=-Te.tabs.buttons[0].height&&(Te.tabs.y-=Te.tabs.height/2+S/2),ot.y-Te.tabs.buttons[Te.tabs.buttons.length-1].height<=r-Te.tabs.height&&(Te.tabs.y+=Te.tabs.height/2+S/2))});function St(ot,bt,Rt){ot.listZID=bt,ot.label&&($e&&new e.Rectangle(pt*(Rt.level+1),ot.height).alp($e).pos(0,0,Te.align=="right",!1,ot),nt&&new e.Rectangle(ot.width,ot.height).alp((Rt.level+1)*nt).addTo(ot).bot().ord(1),pt&&Te.align!="center"&&(ot.label.x+=(Te.align=="right"?-1:1)*pt*(Rt.level+1)));var Ut=Qe.getData(bt);Ut.obj=ot,Ut.list&&!e.isEmpty(Ut.list)&&(ot.expander=new e.Label({size:rt=="arrow"?22:36,text:Ut.open?rt=="arrow"?"\u25B2":"-":rt=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(F,"rgba",.6)}).center(ot).alp(rt=="none"?0:.7).pos(15,null,Te.align!="right").mov(0,Ut.open?-3:0))}function Ft(){if(!(!Te.selected||!Te.selected.expander)){var ot=Qe.getData(Te.selected.listZID),bt;if(ot.open){Te.selected.expander&&(Te.selected.expander.text=rt=="arrow"?"\u25BC":"+",Te.selected.expander.mov(0,3)),ot.open=!1;var Rt=Qe.getNextSibling(Te.selected.listZID),Ut;n(Rt)?Ut=Te.items.length-1:Ut=e.loop(Te.items,function(Jt,cn){if(Jt.listZID==Rt)return cn-1}),at?(bt=0,Te.enabled=!1,e.interval(at,function(Jt){Te.removeAt(1,Te.selectedIndex+Ut-Te.selectedIndex-bt),bt++,Jt.total==Jt.count+1&&(Te.enabled=!0,Te.dispatchEvent("collapsed"))},Ut-Te.selectedIndex,!0)):(Te.removeAt(Ut-Te.selectedIndex,Te.selectedIndex+1),Te.dispatchEvent("collapsed"))}else{ot.open=!0,Te.selected.expander&&(Te.selected.expander.text=rt=="arrow"?"\u25B2":"-",Te.selected.expander.mov(0,-3));var Gt=Qe.getLinearList(ot.list),wt=Qe.getLinearIDs(ot.list),Bt;if(ot.opened)Array.isArray(Gt)&&(De?(bt=0,Te.enabled=!1,e.interval(De,function(Jt){Te.addAt(Gt[bt],Te.selectedIndex+1+bt),Bt=new ze.Event("bloom"),Bt.item=Gt[bt],Te.dispatchEvent(Bt),Jt.total==Jt.count+1&&(Te.enabled=!0,Bt=new ze.Event("expanded"),Bt.items=Gt,Te.dispatchEvent(Bt)),bt++},Gt.length,!0)):(Te.addAt(Gt,Te.selectedIndex+1),Bt=new ze.Event("expanded"),Bt.items=Gt,Te.dispatchEvent(Bt)));else{ot.opened=!0;var Ht=Tt[ot.level];n(Ht)&&(Ht={}),Array.isArray(Gt)&&(De?(bt=0,Te.enabled=!1,e.interval(De,function(Jt){Te.addAt(Gt[bt],Te.selectedIndex+1+bt,{backgroundColor:Ht.backgroundColor,color:Ht.color,rollBackgroundColor:Ht.rollBackgroundColor,rollColor:Ht.rollColor,selectedBackgroundColor:Ht.selectedBackgroundColor,selectedColor:Ht.selectedColor,selectedRollBackgroundColor:Ht.selectedRollBackgroundColor,selectedRollColor:Ht.selectedRollColor});var cn=wt[bt],jt=Te.items[Te.selectedIndex+1+bt];Ht.borderColor&&(jt.borderColor=Ht.borderColor),St(jt,cn,ot),jt.label&&(jt.label.backgroundColor=e.clear),Bt=new ze.Event("bloom"),Bt.item=jt,Te.dispatchEvent(Bt),Jt.total==Jt.count+1&&(Te.enabled=!0,Bt=new ze.Event("expanded"),Bt.items=Gt,Te.dispatchEvent(Bt)),bt++,Te.stage&&Te.stage.update()},Gt.length,!0)):(Te.addAt(Gt,Te.selectedIndex+1,{backgroundColor:Ht.backgroundColor,color:Ht.color,rollBackgroundColor:Ht.rollBackgroundColor,rollColor:Ht.rollColor,selectedBackgroundColor:Ht.selectedBackgroundColor,selectedColor:Ht.selectedColor,selectedRollBackgroundColor:Ht.selectedRollBackgroundColor,selectedRollColor:Ht.selectedRollColor}),e.loop(wt,function(Jt,cn){var jt=Te.items[Te.selectedIndex+1+cn];St(jt,Jt,ot),jt.label&&(jt.label.backgroundColor=e.clear)}),Bt=new ze.Event("expanded"),Bt.items=Gt,Te.dispatchEvent(Bt)))}}}}Te.expandList=function(ot){return Te.selectedIndex=ot,Te.selected&&Ft(),Te.selected};var Yt;if(Qe){Oe&&Te.added(function(ot){Yt=ot,Te.stageToggleEvent=Yt.on("stagemousedown",function(){var bt=Yt.getObjectUnderPoint(Yt.frame.mouseX,Yt.frame.mouseY);if(!(bt&&Te.contains(bt))&&!(!Te.enabled||!Te.selected)){var Rt=Qe.getData(Te.selected.listZID);Rt.open&&Ft()}})});var $t=Qe.getLinearIDs();e.loop($t,function(ot,bt){Te.tabs.buttons[bt].listZID=ot}),e.loop(Te.tabs.buttons,function(ot){var bt=Qe.getData(ot.listZID);e.isEmpty(bt.list)||(ot.expander=new e.Label({size:rt=="arrow"?22:36,text:rt=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(F,"rgba",.6)}).center(ot).alp(rt=="none"?0:.7).pos(15,null,Te.align!="right"))});var sn=yt;Te.toggle=function(ot){if(n(ot))ot=!sn;else if(ot==sn)return;Te.selectedIndex=0,sn=ot,Ft()},Object.defineProperty(Te,"toggled",{get:function(){return sn},set:function(ot){sn!=ot&&Te.toggle()}}),Te.tap(Ft)}var nn;lt.tap(function(ot){ot.target.selectedIndex!=Te.selectedIndex&&(Te.selectedIndex=lt.selectedIndex,Te.dispatchEvent("change"),Oe&&(Te.selectedIndex=0),ot.preventDefault())}),lt.on("keychange",function(ot){if(ot.target.selectedIndex!=Te.selectedIndex){Te.selectedIndex=lt.selectedIndex;var bt;setTimeout(function(){l?(bt=Te.selected.y+Te.scrollY,(bt<0||bt>Te.height-Te.selected.height)&&Te.animateTo(Te.selectedIndex,Le=="ms"?100:.1)):(bt=Te.selected.x+Te.scrollX,(bt<0||bt>Te.width-Te.selected.width)&&Te.animateTo(Te.selectedIndex,Le=="ms"?100:.1))},100),Te.dispatchEvent("change")}}),this.getItemIndex=function(ot){return Te.items.indexOf(ot)},this.animateTo=function(ot,bt){n(ot)&&(ot=0),n(bt)&&(bt=.05);var Rt=v(bt);Te.selectedIndex=ot;var Ut=Ot(ot),Gt;return l?(Gt=Math.abs(Te.scrollY-Ut)/Te.itemHeight,Te.animate({scrollY:Ut},Gt*bt/(Rt=="s"?1:1e3))):(Gt=Math.abs(Te.scrollX-Ut)/Te.itemWidth,Te.animate({scrollX:Ut},Gt*bt/(Rt=="s"?1:1e3))),Te},this.addAt=function(ot,bt,Rt,Ut){if(n(ot))return Te;if(Te.tabs.loop(function(wt){wt.visible=!0}),ot.type=="ListItem"?ot.width=t-S*2:Array.isArray(ot)&&e.loop(ot,function(wt){wt.type=="ListItem"&&(wt.width=t-S*2)}),Ut)if(Array.isArray(ot)){var Gt=[];e.loop(ot,function(wt){wt.clone?Gt.push(ot.clone()):Gt.push(e.copy(ot,Ut))}),Te.tabs.addAt(Gt,bt,Rt)}else ot.clone?Te.tabs.addAt(ot.clone(),bt,Rt):Te.tabs.addAt(e.copy(ot,Ut),bt,Rt);else Ce&&(Array.isArray(ot)||(ot=[ot]),e.loop(ot,function(wt,Bt){typeof wt=="string"&&(ot[Bt]=e.List.checkItem(wt,null,t,"left",10,10,S,F,q,I,ne,k,x,L,A))})),Te.tabs.addAt(ot,bt,Rt);return Te.update(),Te},this.removeAt=function(ot,bt){gt&&Te.tabs.removeAt(ot,bt+i.length),Te.tabs.removeAt(ot,bt),Te.tabs.loop(function(Ut){Ut.visible=!0}),nn=Te.tabs.selectedIndex;var Rt=lt.getBounds();return lt.setBounds(0,0,Rt.width,Rt.height),Rt.height<r&&(Te.scrollY=0),Te.update(),Te},Ve[0]=="%-&"&&Ve.length==1&&Te.removeAt(1,0),this.clear=function(){return Te.tabs.removeAt(Te.length,0),Te.contentContainer.x=0,Te.contentContainer.y=0,Te.update(),Te},this.setCheck=function(ot,bt){n(ot)&&(ot=0),n(bt)&&(bt=!0),Te.items[ot].checkBox.checked=bt,Te.items[ot].content.zimOut()},this.getCheck=function(ot){return n(ot)&&(ot=0),Te.items[ot].checkBox.checked},this.setChecks=function(ot){return e.loop(Te.items,function(bt){bt.checkBox.checked=ot,bt.content.zimOut()}),Te},Object.defineProperty(Te,"items",{get:function(){return Te.tabs.buttons},set:function(){Et&&ht("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Te,"list",{get:function(){return Te.tabs.buttons},set:function(){Et&&ht("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Te,"length",{get:function(){return Te.tabs.buttons.length},set:function(){Et&&ht("List() - length is read only")}}),Object.defineProperty(Te,"selectedIndex",{get:function(){return gt?(nn+i.length)%i.length:nn},set:function(ot){lt.selectedIndex=ot,Te.label=lt.label,Te.selected=lt.selected,nn=ot,!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Te.stage&&Te.stage.update()}}),f&&(Te.selectedIndex=0),Object.defineProperty(Te,"selectedIndexPlusPosition",{get:function(){return gt?(nn+i.length)%i.length:nn},set:function(ot){Te.selectedIndex=ot,nn=ot,l?Te.scrollY=Ot(ot)-2:Te.scrollX=Ot(ot),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Te.stage&&Te.stage.update()}});function Ot(ot){if(l){var bt=-(Te.itemHeight+S)*ot+r/2-Te.itemHeight/2;return(Te.itemHeight+S)*Te.length<r&&(bt=0),bt>0&&(bt=0),(Te.itemHeight+S)*Te.length>r&&bt<-Te.tabs.height+r-ve*2&&(bt=-Te.tabs.height+r-ve*2),bt}else{var Rt=-(Te.itemWidth+S)*ot+t/2-Te.itemWidth/2;return(Te.itemWidth+S)*Te.length<t&&(Rt=0),Rt>0&&(Rt=0),(Te.itemWidth+S)*Te.length>t&&Rt<-Te.tabs.width+t-pe*2&&(Rt=-Te.tabs.width+t-pe*2),Rt}}Object.defineProperty(Te,"text",{get:function(){return Te.label?Te.label.text:null},set:function(ot){Te.label&&(Te.label.text=ot)}}),Object.defineProperty(Te,"bloom",{get:function(){return De},set:function(ot){De=ot}}),Object.defineProperty(Te,"currentValue",{get:function(){return Te.label?Te.label.text:null},set:function(ot){var bt=e.loop(Te.list,function(Rt,Ut){var Gt;Rt.label&&(Gt=Rt.label.text),Rt.type=="Label"&&(Gt=Rt.text);var wt=new RegExp(ot,"i");if(Gt&&Gt.match(wt))return Ut});bt!==!0&&(Te.selectedIndexPlusPosition=bt)}}),Object.defineProperty(Te,"itemDown",{get:function(){return Te.tabs.buttonDown},set:function(){}}),Object.defineProperty(Te,"itemsText",{get:function(){for(var ot=[],bt=0;bt<Te.tabs.buttons.length;bt++){var Rt=Te.tabs.buttons[bt].label;Rt&&!n(Rt.text)?ot.push(Rt.text):ot.push(null)}return ot},set:function(){Et&&ht("List() - itemsText is read only")}}),f&&(Te.selectedIndex=0),Object.defineProperty(Te,"checkBoxes",{get:function(){for(var ot=[],bt=0;bt<Te.tabs.buttons.length;bt++){var Rt=Te.tabs.buttons[bt].checkBox;ot.push(Rt)}return ot},set:function(){Et&&ht("List() - checkBoxes is read only")}}),Object.defineProperty(Te,"accordionIndex",{get:function(){var ot=Te.selected.listZID;return ot?Number(ot.split("id")[1]):null},set:function(){Et&&ht("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},this.openAtLevel=function(ot){if(!n(ot)){var bt=[];e.loop(ot,function(Ut){bt.push(Ut)});var Rt=Te.bloom;Te.bloom=!1,e.interval(.01,function(Ut){var Gt=Te.items[Ut.count];Gt?bt.indexOf(Te.tree.getData(Gt.listZID).level)!=-1&&Te.expandList(Ut.count):(Ut.clear(),Te.bloom=Rt)},null,!0,!1,"s")}};var Zt;this.openAtNum=function(ot){if(!n(ot)){if(!Zt){let Jt=function(cn,jt){for(bt in cn)Zt[bt]=jt,Jt(cn[bt].list,bt)};var bt;Zt={},Jt(Te.tree.data);var Rt={};for(var Ut in Zt){Rt[Ut]||(Rt[Ut]=[]);for(var Gt=Zt[Ut];Gt;)Rt[Ut].unshift(Gt),Gt=Zt[Gt];Rt[Ut].push(Ut)}}var wt="id"+ot,Bt=Rt[wt],Ht=Te.bloom;Te.bloom=!1,Fi(.01,function(Jt){var cn=Te.items[Jt.count];cn?Bt.indexOf(cn.listZID)!=-1&&Te.expandList(Jt.count):(Jt.clear(),Te.bloom=Ht)},null,!0,!1,"s")}},yt&&Ft&&Te.openAtLevel(1e4),n(Ue)&&(Ue=we.selectedIndex!=null?we.selectedIndex:0),Te.selectedIndex=Ue,We!==!1&&e.styleTransforms(this,we),this.clone=function(){return Te.cloneProps(new e.List(t,et,e.copy(Te.originalList,!0),o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,Je,tt,U,e.copy(ee),ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye,Re,de,Me,Be,he,Ae,Ce,me,Ne,ge,Ue,He,Oe,fe,Xe,Ze,Ke,ut,gt,We,this.group,ct))},this.dispose=function(ot,bt,Rt){return Rt||(Te.stageToggleEvent&&Yt.off("stagemousedown",Te.stageToggleEvent),Te.organizer&&Te.organizer.dispose(),this.zimWindow_dispose()),!0}},e.extend(e.List,e.Window,["clone","dispose"],"zimWindow",!1),e.List.makeBase=function(t,r,i,o){n(o)&&(o=e.dark),t.backing=new e.Rectangle(t.width,t.height,o).center(t),r.type=="Label"?t.label=r:t.label=new e.Label(r,null,null,e.white),t.text=t.label.text,t.label.center(t).loc(i)},e.List.slider=function(t,r,i,o,l,f,h,g,_,P,C,T,N){var O="label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor",S;if(S=mt(e.List.slider,arguments,O))return S;var k=new e.Container(620,100);return k.type="ListItem",k.listItem="Slider",n(_)&&(_=20),n(P)&&(P=30),n(C)&&(C=1),n(T)&&(T=0),e.List.makeBase(k,t,_,N),k.slider=new e.Slider({inside:!0,barWidth:40,barLength:150,barColor:e.blue,min:r,max:i,step:f}).sca(1.5).center(k).mov(20).change(function(){k.stepper.currentValue=T+Math.round(k.slider.currentValue*C*1e3)/1e3,h&&g&&(h[g]=k.slider.currentValue),l&&typeof l=="function"&&l(k.slider.currentValue,k.parent),k.slider.stage&&k.slider.stage.update()}),n(o)||(k.slider.currentValue=o),k.stepper=new e.Stepper({corner:0,arrows:!1,stepperType:"number",min:T+r*C,max:T+i*C,step:f}).center(k).pos(P,null,!0).change(function(){}),n(o)||(k.stepper.currentValue=T+o*C),k},e.List.checkBox=function(t,r,i,o,l,f,h,g){var _="label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor",P;if(P=mt(e.List.checkBox,arguments,_))return P;var C=new e.Container(620,100);return C.type="ListItem",C.listItem="CheckBox",n(f)&&(f=20),n(h)&&(h=30),e.List.makeBase(C,t,f,g),C.checkBox=new e.CheckBox({startChecked:r,label:""}).sca(1.2).center(C).pos(256+h,null,!0).change(function(){o&&l&&(o[l]=C.checkBox.checked),i&&typeof i=="function"&&i(C.checkBox.checked,C.parent),C.checkBox.stage&&C.checkBox.stage.update()}),C},e.List.colorPicker=function(t,r,i,o,l,f,h,g,_){var P="label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor",C;if(C=mt(e.List.colorPicker,arguments,P))return C;var T=new e.Container(620,100);return T.type="ListItem",T.listItem="ColorPicker",n(h)&&(h=20),n(g)&&(g=30),e.List.makeBase(T,t,h,_),n(r)&&(r=e.pink),T.colorPicker=i||new e.ColorPicker({alphaPicker:!1,selectedColor:r}),T.swatch=new e.Rectangle(132,66,r,e.lighter,5).center(T).pos(270,null,!0).cur(),T.swatch.on("mousedown",function(){T.colorPicker.selectedColor=T.swatch.color,T.colorPicker.show()}),T.colorLabel=new e.Label(T.swatch.color.toUpperCase(),40,null,e.light).center(T).pos(g,null,!0),T.colorPicker.on("close",function(){var N=T.colorPicker.stage;T.colorPicker.hide(),N&&N.update()}),T.colorPicker.on("change",function(){var N=T.colorPicker.stage;T.swatch.color=T.colorPicker.selectedColor,T.colorLabel.text=T.swatch.color.toUpperCase(),T.colorPicker.hide(),l&&f&&(l[f]=T.colorPicker.selectedColor),o&&typeof o=="function"&&o(T.colorPicker.selectedColor,T.parent),N&&N.update()}),T},e.List.checkItem=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x){var E="label, size, width, align, paddingH, paddingV, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit",L;if(L=mt(e.List.checkItem,arguments,E))return L;var A=e.getStyle("CheckBox",k,x);n(r)&&(r=A.size!=null?A.size:20);var b=e.getStyle("List",k,x);n(i)&&(i=300),n(l)&&(l=10),n(f)&&(f=10),n(o)&&(o=b.align!=null?b.align:"center"),n(h)&&(h=b.spacing!=null?b.spacing:2),n(T)&&(T=b.backgroundColor!=null?b.backgroundColor:e.tin),n(N)&&(N=b.rollBackgroundColor!=null?b.rollBackgroundColor:e.grey),n(O)&&(O=b.selectedBackgroundColor!=null?b.selectedBackgroundColor:e.charcoal),n(S)&&(S=b.selectedRollBackgroundColor!=null?b.selectedRollBackgroundColor:e.grey),n(g)&&(g=b.color!=null?b.color:e.white),n(_)&&(_=b.rollColor!=null?b.rollColor:g),n(P)&&(P=b.selectedColor!=null?b.selectedColor:g),n(C)&&(C=b.selectedRollColor!=null?b.selectedRollColor:_);var F=new e.Container;return F.type="CheckItem",F.checkBox=new e.CheckBox({size:r,label:t,color:g,tap:!0}),F.backing=new e.Rectangle(i-h*2,F.checkBox.height+f*2,T).addTo(F),F.checkBox.center(F),o!="center"&&o!="middle"&&F.checkBox.pos(l,null,o=="right"),F.backing.tap(function(){F.checkBox.toggle(),F.zimOut()}),F.checkBox.change(function(){F.zimOut()}),F.zimOver=function(){F.backing.color=F.checkBox.checked?S:N,F.checkBox.label.color=F.checkBox.checked?C:_,F.stage&&F.stage.update()},F.zimOut=function(){F.backing.color=F.checkBox.checked?O:T,F.checkBox.label.color=F.checkBox.checked?P:g,F.stage&&F.stage.update()},F.backing.on("mouseover",F.zimOver),F.checkBox.on("mouseover",F.zimOver),F.backing.on("mouseout",F.zimOut),F.checkBox.on("mouseout",F.zimOut),F},e.Stepper=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D){var K="list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, currentValue, arrowColor, arrowScale, style, group, inherit",w;if(w=mt(e.Stepper,arguments,K,this))return w;qe("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=d;var Y=p===!1?{}:e.getStyle(this.type,this.group,D);n(t)&&(t=Y.list!=null?Y.list:[]),n(r)&&(r=Y.width!=null?Y.width:100),n(i)&&(i=Y.backgroundColor!=null?Y.backgroundColor:e.white),n(o)&&(o=Y.borderColor!=null?Y.borderColor:null),n(l)&&(l=Y.borderWidth!=null?Y.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(h)&&(h=Y.color!=null?Y.color:e.grey),n(f)&&(f=Y.label!=null?Y.label:""),(typeof f=="string"||typeof f=="number")&&(f=new e.Label({text:f,size:Y.size!=null?Y.size*2:40,color:h,align:Y.align!=null?Y.align:"center",valign:Y.valign!=null?Y.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),n(g)&&(g=Y.vertical!=null?Y.vertical:!1),n(_)&&(_=Y.arrows!=null?Y.arrows:!0),n(P)&&(P=Y.corner!=null?Y.corner:16),n(C)&&(C=Y.shadowColor!=null?Y.shadowColor:"rgba(0,0,0,.3)"),n(T)&&(T=Y.shadowBlur!=null?Y.shadowBlur:14),n(N)&&(N=Y.continuous!=null?Y.continuous:!1),n(O)&&(O=Y.display!=null?Y.display:!0),n(S)&&(S=Y.press!=null?Y.press:!0),n(k)&&(k=Y.hold!=null?Y.hold:!0);var Ee=v(x);n(x)&&(x=Y.holdDelay!=null?Y.holdDelay:Ee=="s"?.4:400),n(E)&&(E=Y.holdSpeed!=null?Y.holdSpeed:Ee=="s"?.2:200),a(E,Ee),n(L)&&(L=Y.draggable!=null?Y.draggable:!0),(n(A)||A<=0)&&(A=Y.dragSensitivity!=null?Y.dragSensitivity:.1),n(b)&&(b=Y.dragRange!=null?Y.dragRange:200),n(F)&&(F=Y.stepperType!=null?Y.stepperType:t.length>0?"list":"number"),n(q)&&(q=Y.min!=null?Y.min:0),n(V)&&(V=Y.max!=null?Y.max:10),n(I)&&(I=Y.step!=null?Y.step:1),n(ne)&&(ne=Y.step2!=null?Y.step2:I),n(R)&&ne!=I&&F=="number"&&(R=Y.arrows2!=null?Y.arrows2:!0),n(Q)&&(Q=Y.arrows2Scale!=null?Y.arrows2Scale:.5),n(U)&&(U=Y.keyEnabled!=null?Y.keyEnabled:!0),n(ee)&&(ee=Y.keyArrows!=null?Y.keyArrows:!0),n(ae)&&(ae=Y.rightForward!=null?Y.rightForward:!0),n(ie)&&(ie=Y.downForward!=null?Y.downForward:F!="number"),n(G)&&(G=Y.arrowColor!=null?Y.arrowColor:i),n(y)&&(y=Y.arrowScale!=null?Y.arrowScale:1);var X=this,Z,pe=60,ve=pe/4;i=dt(i);var $=I,ue,xe=1,Ye;if(F=="number"){if(q=Number(q),V=Number(V),isNaN(q)&&(q=0),isNaN(V)&&(V=100),V<q){xe=-1;var se=V;V=q,q=se,ue=V}else ue=q;this.min=q,this.max=V,0>q&&0<V&&(ue=0),I=Math.abs(I),Ye=Math.max(_e(I),_e(ne))}else if(F=="letter"){t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),typeof q!="string"&&(q="A"),typeof V!="string"&&(V="Z"),q=q.substr(0,1).toUpperCase(),V=V.substr(0,1).toUpperCase();var be=t.indexOf(q);be<0&&(q="A",be=0);var te=t.indexOf(V);te<0&&(V="Z",te=t.length),te<be&&(t.reverse(),be=t.length-1-be,te=t.length-1-te),t=t.splice(be,te-be+1)}else F="list";function _e(Je){var tt=String(Je).split(".")[1];return tt?tt=tt.length:tt=0,tt}var J,ye=0,Re=0;L&&this.on("mousedown",function(Je){X.zimAccessibility&&X.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,ye=Je.rawX/e.scaX,Re=Je.rawY/e.scaY,J=this.stage.on("stagemousemove",function(tt){ye=tt.rawX/e.scaX,Re=tt.rawY/e.scaY}))},null,!0),this.label=f,f.mouseChildren=!1,f.mouseEnabled=!1;var de,Me,Be,he,Ae,Ce,me,Ne,ge,Ue,He,Oe,fe;if(_&&(Be=this.containerPrev=new e.Container({style:!1}),this.addChild(Be),he=this.arrowPrev=new e.Triangle(pe,pe*.8,pe*.8,G,null,null,null,null,null,null,null,!1).sca(y),C!=-1&&T>0&&(Be.shadow=new ze.Shadow(C,3,3,T)),Be.addChild(he),Be.expand(),Be.cur("pointer"),Be.on("mousedown",function(Je){if(!(X.zimAccessibility&&X.zimAccessibility.aria)){$=I;var tt=g?ie?1:-1:ae?-1:1;gt(tt),Ke(tt,null,null,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&Be.on("pressup",ut),g?(Be.rotation=180,Be.x=r/2,O?Be.y=Be.height+ve+pe+Be.height/2+ve:Be.y=Be.height*2):(Be.rotation=-90,Be.x=Be.height/2,Be.y=pe/2)),O){var Xe=this.textBox=new e.Rectangle(r,pe,i,o,l,P,null,null,null,!1);Xe.cur("pointer"),this.addChild(Xe),C!=-1&&T>0&&(Xe.shadow=new ze.Shadow(C,3,3,T)),_&&(g?_&&(Xe.y=he.height+ve):_&&(Xe.x=he.height+ve)),this.addChild(f),t.length>0&&(Z=0,f.text=t[Z]),f.center(X);var Ze;Xe.on("mousedown",function(Je){X.zimAccessibility&&X.zimAccessibility.aria||(Ze=X.currentValue,S&&gt(1),Ke(1,!0,null,Je.stageX/e.scaX,Je.stageY/e.scaY))}),Xe.on("pressup",function(){X.zimAccessibility&&X.zimAccessibility.aria})}else t.length>0&&(Z=0);_&&(Ae=this.containerNext=new e.Container({style:!1}),this.addChild(Ae),Ce=this.arrowNext=new e.Triangle(pe,pe*.8,pe*.8,G,null,null,null,null,null,null,null,!1).sca(y),C!=-1&&T>0&&(Ae.shadow=new ze.Shadow(C,3,3,T)),Ae.addChild(Ce),Ae.expand(),Ae.cur("pointer"),Ae.on("mousedown",function(Je){if(!(X.zimAccessibility&&X.zimAccessibility.aria)){$=I;var tt=g?ie?-1:1:ae?1:-1;gt(tt),Ke(tt,null,null,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&Ae.on("pressup",ut),g?(Ae.rotation=0,Ae.x=r/2,Ae.y=Ae.getBounds().height/2):(Ae.rotation=90,O?Ae.x=Xe.x+Xe.getBounds().width+Ae.getBounds().height/2+ve:Ae.x=Be.x+Be.getBounds().width,Ae.y=pe/2));function Ke(Je,tt,Te,et,Ve){if(k){He=et,Oe=Ve,He==0&&(He=1),Oe==0&&(Oe=1),L||(A=1);var Le=E*(Ee=="s"?1e3:1),Qe=x*(Ee=="s"?1e3:1),$e=Le;fe=new e.Proportion(0,b,Le,Le*A),de=setTimeout(function(){function nt(){Me=setTimeout(function(){var pt=Je;if(L){var De=Math.abs(ye-He),at=Math.abs(Re-Oe);g?(!tt&&!Te&&(De=0),Te&&(at=0)):(!tt&&!Te&&(at=0),Te&&(De=0)),(De>=10||at>=10)&&(De>at?($=g?ne:I,pt=ye-He>0?1:-1,ae||pt*-1,$e=fe.convert(Math.abs(He-ye))):($=g?I:ne,pt=Re-Oe>0?1:-1,(F=="number"||!ie)&&(pt*=-1),$e=fe.convert(Math.abs(Oe-Re))))}gt(pt),nt()},$e)}nt()},Qe)}}k&&O&&Xe.on("pressup",ut);function ut(){X.zimAccessibility&&X.zimAccessibility.aria||(clearTimeout(de),clearTimeout(Me))}R&&(me=this.prev2=new e.Container({style:!1}),Ne=this.arrowPrev2=new e.Triangle(pe,pe*.8,pe*.8,"rgba(0,0,0,.2)",G,2,null,null,null,null,null,!1),me.addChild(Ne),me.expand(),me.cur("pointer"),me.sca(Q),me.alpha=.5,me.on("mousedown",function(Je){if(!(X.zimAccessibility&&X.zimAccessibility.aria)){$=ne;var tt=g?ae?-1:1:ie?1:-1;gt(tt),Ke(tt,null,!0,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&me.on("pressup",ut),ge=this.next2=new e.Container({style:!1}),Ue=this.arrowNext2=new e.Triangle(pe,pe*.8,pe*.8,"rgba(0,0,0,.2)",G,2,null,null,null,null,null,!1),ge.addChild(Ue),ge.expand(),ge.cur("pointer"),ge.sca(Q),ge.alpha=.5,ge.on("mousedown",function(Je){if(!(X.zimAccessibility&&X.zimAccessibility.aria)){$=ne;var tt=g?ae?1:-1:ie?-1:1;gt(tt),Ke(tt,null,!0,Je.stageX/e.scaX,Je.stageY/e.scaY)}}),k&&ge.on("pressup",ut),g?(me.y=this.height/2,me.x=-me.width/2-ve*Math.max(.2,Math.min(1,Q)),me.rotation=270,ge.y=this.height/2,ge.x=this.width+ge.width/2+ve*Math.max(.2,Math.min(1,Q)),ge.rotation=90):(ge.x=this.width/2,ge.y=-ge.height/2-ve*Math.max(.2,Math.min(1,Q)),ge.rotation=0,me.x=this.width/2,me.y=this.height+me.height/2+ve*Math.max(.2,Math.min(1,Q)),me.rotation=180),this.addChild(me,ge)),Object.defineProperty(this,"stepperArray",{get:function(){if(F=="number"){t=[];for(var Je=X.min;Je<=X.max;Je+=Math.min(I,ne))t.push(Number(e.decimals(Je,Ye,null,!1)));t.push(V)}return t},set:function(Je){t=Je;var tt=X.selectedIndex;X.selectedIndex=tt}}),Object.defineProperty(this,"min",{get:function(){return q},set:function(Je){if(F=="number"){X.currentValue<Je&&(X.currentValue=Je),q=Je;var tt=X.selectedIndex;X.selectedIndex=tt}else q=Je}}),Object.defineProperty(this,"max",{get:function(){return V},set:function(Je){if(F=="number"){X.currentValue>Je&&(X.currentValue=Je),V=Je;var tt=X.selectedIndex;X.selectedIndex=tt}else V=Je}}),ct(F=="number"?ue:t[Z],F=="number"?ue:Z);function gt(Je){var tt;if(F=="number"){ue=Number(ue);var Te=ue;ue+=Number($*Je*xe),ue=e.decimals(ue,Ye),N?ue>X.max?ue=X.min:ue<X.min&&(ue=X.max):(ue>X.max?(ue=I==1?X.max:Te,O&&Xe.cur("default")):O&&Xe.cur("pointer"),ue<X.min&&(ue=I==1?X.min:Te))}else{if(tt=Z+Je,N)tt>t.length-1&&(tt=0),tt<0&&(tt=t.length-1);else{if(tt>t.length-1){O&&Xe.cur("default");return}else O&&Xe.cur("pointer");if(tt<0)return}Z=tt}ct(F=="number"?ue:t[Z],F=="number"?ue:Z),X.currentValue!=Ze&&X.dispatchEvent("change"),Ze=X.currentValue}Object.defineProperty(this,"selectedIndex",{get:function(){return F=="number"?X.stepperArray.indexOf(X.currentValue):Z},set:function(Je){n(Je)||(F=="number"?(Z=Math.min(X.stepperArray.length-1,Math.max(0,Je)),ue=X.stepperArray[Z],ct(ue,ue)):(Je=Math.min(t.length-1,Math.max(0,Je)),Z=Je,ct(t[Z],Z)))}}),Object.defineProperty(this,"currentValue",{get:function(){return F=="number"?Number(ue):t[Z]},set:function(Je){if(!n(Je))if(F=="number"){if(Je=Number(Je),X.max>X.min){if(Je>X.max||Je<X.min)return}else if(Je<X.max||Je>X.min)return;var tt=X.stepperArray.indexOf(Je);if(tt<0)return;Z=tt,ue=Number(X.stepperArray[Z]),ct(ue,ue)}else{if(t.indexOf(Je)>-1)Je=t.indexOf(Je);else return;if(Je==X.selectedIndex)return;Z=Je,ct(t[Z],Z)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return X.currentValue},set:function(Je){String(Je)!=String(X.currentValue)&&(X.currentValue=Je,X.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return N},set:function(Je){N=Je,F=="number"?ct(ue,ue):ct(t[X.selectedIndex],X.selectedIndex)}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(Je){c(X,Je),Je?(F=="number"?ct(ue,ue):ct(t[X.selectedIndex],X.selectedIndex),le.addEventListener("keydown",X.keyDownEvent)):(Pe(),Fe(),le.removeEventListener("keydown",X.keyDownEvent),O&&(f.mouseChildren=!1),O&&(f.mouseEnabled=!1)),Ae&&!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Ae.stage?Ae.stage.update():f&&!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&f.stage&&f.stage.update()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==X},set:function(){e.KEYFOCUS=X}}),e.KEYFOCUS||We(),this.on("mousedown",function(){We()});function We(){X.keyFocus=!0;var Je=document.activeElement;Je&&Je.blur()}function it(){Be.alpha=1,he.color=G,Be.cur("pointer"),Ae.alpha=1,Ce.color=G,Ae.cur("pointer"),N||(F=="number"?(Z==X.min&&(xe>0?Pe():Fe()),Z==X.max&&(xe>0?Fe():Pe())):(Z==0&&(g?Fe():Pe()),Z==t.length-1&&(g?Pe():Fe())))}function ct(Je,tt){Z=tt,O&&(F=="number"&&Je!=0&&Ye>0&&(Je=e.decimals(Je,Ye,!0)),f.text=Je,f.center(X)),_&&it(),Ae&&!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Ae.stage?Ae.stage.update():f&&!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&f.stage&&f.stage.update(),X.zimAccessibility&&X.zimAccessibility.changeTitle(X,null,!0)}function Pe(){_&&(Be.alpha=.8,he.color=e.fog,Be.cur("default"))}function Fe(){_&&(Ae.alpha=.8,Ce.color=e.fog,Ae.cur("default"))}var we,je=!0,st="";this.on("mousedown",function(){je=!0,st="",!(X.zimAccessibility&&X.zimAccessibility.aria)&&(X.focus=!0,we=!1)}),this.keyDownEvent=function(Je){if(X.stage&&(X.zimAccessibility&&X.focus||!X.zimAccessibility&&X.keyFocus)){Je||(Je=event);var tt=Je.keyCode;if(ee&&tt>=37&&tt<=40){var Te=ie?40:38,et=ae?39:37,Ve=ie?38:40,Le=ae?37:39;tt==Te||tt==et?(g&&tt==Te||!g&&tt==et?$=I:$=ne,gt(1)):(tt==Ve||tt==Le)&&(g&&tt==Ve||!g&&tt==Le?$=I:$=ne,gt(-1))}if(U)if(F=="number"){var Qe=null,$e=null;if(tt==8){var nt=String(st).split("");nt.pop(),Qe=nt.pop(),st=nt.join("")}if(!Je.shiftKey&&tt>=48&&tt<=57?Qe=tt-48:tt>=96&&tt<=105?Qe=tt-96:tt==190?(st=String(st)+".",$e=!0):tt==173||tt==189?(X.currentValue=X.currentValue*-1,X.currentValue!=Ze&&X.dispatchEvent("change"),Ze=X.currentValue,we=!we):tt==46&&(je=!0,st=""),n(Qe)&&n($e)){je=!0,st="";return}if(n(Qe)||(je?(je=!1,st=Qe):st=Qe=+(st+""+Qe),Qe<q||Qe>V))return;X.currentValue=Qe,X.currentValue!=Ze&&X.dispatchEvent("change"),Ze=X.currentValue}else je=!0,st="",X.currentValue=String.fromCharCode(Je.keyCode),X.currentValue!=Ze&&X.dispatchEvent("change"),Ze=X.currentValue}},le.addEventListener("keydown",this.keyDownEvent),this.next=function(){gt(1)},this.prev=function(){gt(-1)},n(ce)&&(ce=Y.selectedIndex!=null?Y.selectedIndex:0),X.selectedIndex=ce,n(j)&&(j=Y.currentValue!=null?Y.currentValue:null),n(j)||(X.currentValue=j),p!==!1&&e.styleTransforms(this,Y),this.clone=function(){return X.cloneProps(new e.Stepper(t,r,i,o,l,f.clone(),h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,this.group,D))},this.dispose=function(Je,tt,Te){return le.removeEventListener("keydown",X.keyDownEvent),X.removeAllEventListeners(),X.stage&&X.stage.off(J),Te||this.zimContainer_dispose(!0),Be=this.containerPrev=he=this.arrowPrev=null,Ae=this.containerNext=Ce=this.arrowNext=null,Xe=this.textBox=f=this.label=null,!0}},e["zut"]=function(t){if(!n(t)&&t["key"])e.async("https://zimjs.com/gamdata.php?id="+t["key"]+"&player="+t["player"]+"&score="+t["score"]+"&reverse="+t["info"]["reverse"]+"&total="+t["info"]["total"]+"&allowZero="+t["info"]["allowZero"],t["info"]["type"]);else return!0},e.extend(e.Stepper,e.Container,["clone","dispose"],"zimContainer",!1),e.Slider=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p){var d="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, labelColor, style, group, inherit",D;if(D=mt(e.Slider,arguments,d,this))return D;qe("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=y;var K=G===!1?{}:e.getStyle(this.type,this.group,p);if(n(t)&&(t=K.min!=null?K.min:0),n(r)&&(r=K.max!=null?K.max:10),r-t==0){ht("ZIM Slider range must not be 0");return}n(A)&&(A=K.sound!=null?K.sound:!1),n(i)&&(i=K.step!=null?K.step:0),n(o)&&(o=K.button!=null?K.button:A?"aztec":null),o&&o.type=="Button"&&(o=o.clone()),n(l)&&(l=K.barLength!=null?K.barLength:300),n(f)&&(f=K.barWidth!=null?K.barWidth:3),n(h)&&(h=K.barColor!=null?K.barColor:A?e.lighter:e.granite),n(g)&&(g=K.vertical!=null?K.vertical:!!A),n(_)&&(_=K.useTicks!=null?K.useTicks:!!A),n(C)&&(C=K.tickStep!=null?K.tickStep:i||(_||A?(r-t)/40:0)),n(T)&&(T=K.semiTicks!=null?K.semiTicks:C?3:0),n(P)&&(P=K.tickColor!=null?K.tickColor:A?e.tin:h),n(N)&&(N=K.tickScale!=null?K.tickScale:A?1.25:1),n(O)&&(O=K.semiTickScale!=null?K.semiTickScale:1),n(S)&&(S=K.accentSize!=null?K.accentSize:A?10:0),n(k)&&(k=K.accentOffset!=null?K.accentOffset:A?-(S+f)/2:0),n(x)&&(x=K.accentColor!=null?K.accentColor:e.pink),n(E)&&(E=K.accentBackgroundColor!=null?K.accentBackgroundColor:A?e.blue:e.clear),n(L)&&(L=K.accentDifference!=null?K.accentDifference:-.5),n(b)&&(b=K.inside!=null?K.inside:!1),n(F)&&(F=K.keyArrows!=null?K.keyArrows:!0),n(V)&&(V=K.keyArrowsH!=null?K.keyArrowsH:!0),n(I)&&(I=K.keyArrowsV!=null?K.keyArrowsV:!0),n(q)&&(q=K.keyArrowsStep!=null?K.keyArrowsStep:(r-t)/100),n(ne)&&(ne=K.damp!=null?K.damp:!1),n(R)&&(R=K.currentValue!=null?K.currentValue:!1),n(Q)&&(Q=K.expand!=null?K.expand:e.mobile()?10:null),n(U)&&(U=K.expandVertical!=null?K.expandVertical:Q),n(ee)&&(ee=K.expandBar!=null?K.expandBar:null),n(ae)&&(ae=K.expandBarVertical!=null?K.expandBarVertical:Q),n(ie)&&(ie=K.useLabels!=null?K.useLabels:!1),n(ce)&&(ce=K.labelMargin!=null?K.labelMargin:20),n(j)&&(j=K.labelColor!=null?K.labelColor:e.dark);var w,Y=this,Ee=X(t,r,i,R);this.veeObj={min:Ee[0],max:Ee[1],step:Ee[2],currentValue:Ee[3]};function X(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var Z=i;R=e.Pick.choose(R);var pe;S&&(Y.accentBacking=new e.Rectangle(l-.25,S+L,E).addTo(this).rot(g?90:0).mov(g?-k-f/2+L/2:.25,g?0:k+f/2-L/2),pe=Y.accent=new e.Rectangle(l,S,x).sca(0,1).rot(g?-90:0).mov(g?-k-S-f/2:0,g?l:k+f/2).addTo(this));function ve(){pe.sca((Y.currentValue-Y.min)/Math.abs(Y.max-Y.min),1)}var $=!(!n(K.backing)&&K.backing.type!="Pattern");function ue($e,nt,pt){var De=new e.Shape(nt,pt);return De.f($e).s(K.borderColor!=null?K.borderColor:e.tin).ss(K.borderWidth!=null?K.borderWidth:3).mt(2,0).lt(nt+2,pt*.2).lt(nt+2,pt*.8).lt(2,pt).cp().centerReg({add:!1}),De}if(n(o)||typeof o=="string"){var xe=30,Ye=40;g&&(xe=50,Ye=40);var se;if(o=="pill"||o=="aztec"||o=="circle"||o=="grip"){if(o=="pill")se={width:g?40:18,height:g?18:40,borderColor:e.tin,borderWidth:3,corner:8};else if(o=="aztec"){xe=K.width!=null?K.width:Math.max(xe,Ye)*.9,Ye=K.height!=null?K.height:Math.min(xe,Ye)*.6;var be=ue(K.backgroundColor!=null?K.backgroundColor:e.lighter,xe,Ye).rot(g?0:-90),te=ue(K.rollBackgroundColor!=null?K.rollBackgroundColor:e.white,xe,Ye).rot(g?0:-90);se={width:xe,height:Ye,backing:be,rollBacking:te},K.borderWidth=0,K.borderColor=0}else o=="circle"&&(xe=K.width!=null?K.width:30,Ye=K.height!=null?K.height:30,se={width:xe,height:xe,corner:K.corner!=null?K.corner:xe/2});Y.buttonType=o}var _e=K.borderColor!=null?K.borderColor:se?se.borderColor:$?e.granite:null;if(o=new e.Button({width:K.width!=null?K.width:se?se.width:xe,height:K.height!=null?K.height:se?se.height:Ye,label:"",backgroundColor:K.backgroundColor!=null?K.backgroundColor:e.white,rollBackgroundColor:K.rollBackgroundColor!=null?K.rollBackgroundColor:n(K.backgroundColor)||K.backgroundColor==e.white?e.moon:K.backgroundColor.lighten(.2),borderColor:_e,rollBorderColor:K.rollBorderColor!=null?K.rollBorderColor:_e,borderWidth:K.borderWidth!=null?K.borderWidth:se?se.borderWidth:$?1:null,corner:K.corner!=null?K.corner:se?se.corner:0,backing:K.backing!=null?K.backing.clone():se?se.backing:null,rollBacking:K.rollBacking!=null?K.rollBacking.clone():se?se.rollBacking:null,shadowColor:K.shadowColor!=null?K.shadowColor:null,shadowBlur:K.shadowBlur!=null?K.shadowBlur:null,hitPadding:30,style:!1}),Y.buttonType=="circle")o.scaleY=Ye/xe,g||o.rot(-90);else if(Y.buttonType=="grip"){var J=[1,1,1],ye=.4;e.loop(J,function($e,nt,pt){g?new e.Line(o.width*.62,$e,o.borderColor?o.borderColor:e.grey).pos(0,o.height*ye/2+(nt+1)*(o.height*(1-ye))/(pt+1),e.CENTER,e.TOP,o):new e.Line(o.height*.62,$e,o.borderColor?o.borderColor:e.grey).rot(90).pos(o.width*ye/2+(nt+1)*(o.width*(1-ye))/(pt+1),0,e.LEFT,e.CENTER,o)})}}o.rollPersist=!0,(!n(Q)||!n(U))&&o.expand(Q,U);var Re,de;g?(Re=o.width,b?(de=l,this.setBounds(0,0,Re,de)):(de=l+o.height,this.setBounds(-o.width/2,-o.height/2,Re,de))):(de=Math.max(o.height,f),b?(Re=l,this.setBounds(0,0,Re,de)):(Re=l+o.width,this.setBounds(-o.width/2,-o.height/2,Re,de)));var Me=t,Be=0;this.button=o,this.cur("pointer");var he,Ae,Ce,me,Ne;if(_){me=this.ticks=new e.Shape({style:!1}),this.addChild(me),Ne=me.graphics,Ne.ss(1).s(P);var ge=Math.round((r-t)/(C||i)),Ue=(r-t)/ge;C?(Ue!=C&&Et&&ht("Slider() - non-divisible step ("+C+") adjusted to "+Ue),C=Ue):(Ue!=i&&Et&&ht("Slider() - non-divisible step ("+i+") adjusted to "+Ue),i=Ue);var He;b?He=(l-(g?o.height:o.width))/Math.abs(ge):He=l/Math.abs(ge)}var Oe,fe,Xe,Ze,Ke,ut,gt;if(g){if(Oe=b?o.height/2:0,he=this.bar=new e.Rectangle(f,l,h,null,null,null,null,null,null,!1),ee?he.expand(ee,ae):he.expand(20,0),he.centerReg(this),o.centerReg(this),Ce=he.getBounds(),Ae=new ze.Rectangle(he.x,Ce.y+Oe,0,Ce.height-Oe*2),_){for(ie&&(fe=Y.labels=new e.Container().addTo(Y)),Xe=0;Xe<=Math.abs(ge);Xe++)Ze=Xe%(T+1)==0,Ke=Ze?25*N:15*O,ut=Oe+He*Xe,Ne.mt(0,ut).lt(Ke,ut),ie&&(T&&Ze||!T)&&(gt=Math.max(e.countDecimals(Z),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(r-(r-t)/Math.abs(ge)*Xe,gt+1),size:K.size?K.size:10,color:j,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(Ke+ce+2,ut-1,fe));me.x=he.x+15}}else if(Oe=b?o.width/2:0,he=this.bar=new e.Rectangle(l,f,h,null,null,null,null,null,null,!1),ee?he.expand(ee,ae):he.expand(0,20),he.centerReg(this),o.centerReg(this),Ce=he.getBounds(),Ae=new ze.Rectangle(Ce.x+Oe,he.y,Ce.width-Oe*2,0),_){for(ie&&(fe=Y.labels=new e.Container().addTo(Y)),Xe=0;Xe<=Math.abs(ge);Xe++)Ze=Xe%(T+1)==0,Ke=Oe+He*Xe,ut=-(Ze?25*N:15*O),Ne.mt(Ke,0).lt(Ke,ut),ie&&(T&&Ze||!T)&&(gt=Math.max(e.countDecimals(Z),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(t+(r-t)/Math.abs(ge)*Xe,gt+1),size:K.size?K.size:10,color:j,align:"center",valign:"center"}).centerReg({add:!1}).loc(Ke,ut-ce,fe));me.y=he.y-10}o.x=Ae.x,o.y=Ae.y;function We($e){return i==0?$e:Math.round($e/i)*i}var it,ct;o.on("mousedown",function($e){w=$e.target.stage,Y.focus=!0;var nt=Y.globalToLocal($e.stageX/e.scaX,$e.stageY/e.scaY);it=nt.x-o.x,ct=nt.y-o.y,w&&(w.mouseMoveOutside=!0)}),o.on("pressmove",function($e){Pe($e)});function Pe($e){var nt=Y.globalToLocal($e.stageX/e.scaX,$e.stageY/e.scaY),pt=je(nt.x-it,nt.y-ct,Ae);g?(o.x=pt.x,Me=We((pt.y-Ae.y)/Ae.height*(t-r)),o.y=Ae.y+Me*Ae.height/(t-r),Me+=r,o.y!=Be&&Y.dispatchEvent("change"),Be=o.y):(Me=We((pt.x-Ae.x)/Ae.width*(r-t)),o.x=Ae.x+Me*Ae.width/(r-t),Me+=t,o.y=pt.y,o.x!=Be&&Y.dispatchEvent("change"),Be=o.x),pe&&ve(),we(),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Y.stage&&Y.stage.update()}function Fe($e){return $e>0?1:-1}function we(){Y.zimAccessibility&&Y.zimAccessibility.changeTitle(Y,null,!0)}function je($e,nt,pt){return $e=Math.max(pt.x,Math.min(pt.x+pt.width,$e)),nt=Math.max(pt.y,Math.min(pt.y+pt.height,nt)),{x:$e,y:nt}}he.on("mousedown",function($e){w=$e.target.stage,it=0,ct=0,!(Y.zimAccessibility&&Y.zimAccessibility.aria)&&Pe($e)});var st,Je;ne&&(st=t,Je=new e.Damp(st,ne),Y.ticker=e.Ticker.add(function(){st=Je.convert(Me)})),Object.defineProperty(this,"currentValue",{get:function(){return ne?st:Me},set:function($e){n($e)||(t<r?($e<t&&($e=t),$e>r&&($e=r)):($e>t&&($e=t),$e<r&&($e=r)),Me=$e=We($e),Je&&Je.immediate(Me),g?(o.y=($e-r)/(t-r)*Ae.height+Oe,Be=o.y):(o.x=($e-t)/(r-t)*Ae.width+Oe,Be=o.x),pe&&ve(),we(),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Y.stage&&Y.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return ne?st:Me},set:function($e){$e!=Y.currentValue&&(Y.currentValue=$e,Y.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(){Et&&ht("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){Et&&ht("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){Et&&ht("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return V},set:function($e){V=$e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return I},set:function($e){I=$e}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==Y},set:function(){e.KEYFOCUS=Y}}),F&&!e.KEYFOCUS&&tt(),this.on("mousedown",function(){F&&tt()});function tt(){Y.keyFocus=!0;var $e=document.activeElement;$e&&$e.blur()}var Te=!1,et=!1,Ve=!1,Le=!1;this.keyDownEvent=function($e){Y.stage&&(Y.zimAccessibility&&Y.focus||!Y.zimAccessibility&&Y.keyFocus)&&($e.keyCode==37&&V?Te=!0:$e.keyCode==40&&I?et=!0:$e.keyCode==39&&V?Ve=!0:$e.keyCode==38&&I&&(Le=!0),Y.keyInterval==null&&(Te||et||Ve||Le)&&(Qe(),Y.keyTimeout=setTimeout(function(){Y.keyInterval==null&&(Te||et||Ve||Le)&&(Y.keyInterval=setInterval(Qe,40))},140)))};function Qe(){(Te||et)&&(i>0?Y.currentValueEvent-=i*Fe(r-t):Y.currentValueEvent-=q*Fe(r-t)),(Ve||Le)&&(i>0?Y.currentValueEvent+=i*Fe(r-t):Y.currentValueEvent+=q*Fe(r-t))}le.addEventListener("keydown",this.keyDownEvent),Y.keyUpEvent=function($e){$e.keyCode==37?Te=!1:$e.keyCode==40?et=!1:$e.keyCode==39?Ve=!1:$e.keyCode==38&&(Le=!1),Y.keyInterval!=null&&!Te&&!et&&!Ve&&!Le&&(clearInterval(Y.keyInterval),Y.keyInterval=null)},le.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function($e){c(Y,$e),$e?(le.addEventListener("keydown",Y.keyDownEvent),le.addEventListener("keyup",Y.keyUpEvent)):(le.removeEventListener("keydown",Y.keyDownEvent),le.removeEventListener("keyup",Y.keyUpEvent))}}),n(R)||(Y.currentValue=R),e.setSwipe(this,!1),G!==!1&&e.styleTransforms(this,K),this.clone=function($e){return Y.cloneProps(new e.Slider($e||!e.isPick(Ee[0])?Y.min:Ee[0],$e||!e.isPick(Ee[1])?Y.max:Ee[1],$e||!e.isPick(Ee[2])?Y.step:Ee[2],o.clone(),l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,$e||!e.isPick(Ee[3])?Y.currentValue:Ee[3],Q,U,ee,ae,ie,ce,j,G,this.group,p))},this.dispose=function($e,nt,pt){return le.removeEventListener("keydown",Y.keyDownEvent),le.removeEventListener("keyup",Y.keyUpEvent),pt||this.zimContainer_dispose(!0),!0}},e.extend(e.Slider,e.Container,["clone","dispose"],"zimContainer",!1),e.Selector=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A){var b="tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingH, paddingV, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, liveIndex, style, group, inherit",F;if(F=mt(e.Selector,arguments,b,this))return F;qe("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=L;var q=E===!1?{}:e.getStyle(this.type,this.group,A),V=v();n(t)&&(t=q.tile!=null?q.tile:new e.Tile(new e.Circle(20,e.red),4,4,10,10)),n(r)&&(r=q.borderColor!=null?q.borderColor:e.white),n(i)&&(i=q.borderWidth!=null?q.borderWidth:2),n(o)&&(o=q.backgroundColor!=null?q.backgroundColor:"rgba(0,0,0,.1)"),n(l)&&(l=q.corner!=null?q.corner:10),n(f)&&(f=q.dashed!=null?q.dashed:!1),n(h)&&(h=q.padding!=null?q.padding:t.spacingH/2),n(g)&&(g=q.paddingV!=null?q.paddingV:t.spacingV/2),n(_)&&(_=q.speed!=null?q.speed:2),n(P)&&(P=q.diagonal!=null?q.diagonal:!1),n(C)&&(C=q.dim!=null?q.dim:!1),n(T)&&(T=q.multi!=null?q.multi:!1),T&&(_=0),n(N)&&(N=q.keyArrows!=null?q.keyArrows:!0),n(O)&&(O=q.behind!=null?q.behind:!1),n(S)&&(S=q.resizeScale!=null?q.resizeScale:!1),n(k)&&(k=q.selectedIndex!=null?q.selectedIndex:null),n(x)&&(x=q.liveIndex!=null?q.liveIndex:!1),this.liveIndex=x;var I=[],ne=[];e.loop(t.items.length,function(){I.push(dt(r)),ne.push(dt(o))});var R=this;if(!(n(k)&&T)){var Q=k,U=n(k)||k<0?0:k,ee=t.getChildAt(U);R.currentItem=t.getChildAt(U),k=Q,n(k)&&(k=q.selectedIndex!=null?q.selectedIndex:0)}var ae,ie,ce;ae=ee||t.getChildAt(0),ae&&(ie=ae.width+h*2,ce=ae.height+g*2),R.tile=t.addTo(R).cur();var j;if(T){var G=this.selectors=[];e.loop(10,function(){j=new e.Rectangle(ie,ce,e.faint,e.faint,i,l,f,{ignoreScale:!S}).centerReg(R,O?0:1),j.visible=!1,G.push(j),j.mouseEnabled=!1}),this.selector=j}else j=this.selector=new e.Rectangle(ie,ce,e.faint,e.faint,i,l,f,{ignoreScale:!S}).centerReg(R),j.loc(t.width/2,ae.y+g,R,O?0:1),j.visible=!1;k<0||n(ee)||(j.loc(ae.x+h,ae.y+g,R,O?0:1),j.color=ne[k],j.borderColor=I[k],j.visible=!0),t.mov(h,g),this.setBounds(t.width+h*2,t.height+g*2);var y={};this.tileDown=t.on("mousedown",function(D){var K=j;if(!(T&&(K=G.shift(),n(K)))){K.visible=!0;for(var w=D.target,Y=0;w.parent!=t&&Y<10;)w=w.parent,Y++;if(w.parent==t&&p(w,null,K),T){var Ee="id"+Math.abs(D.pointerID+1);y[Ee]={index:k,item:ee,selector:K}}}}),T&&(this.tileMove=t.on("pressmove",function(D){var K="id"+Math.abs(D.pointerID+1),w=y[K];if(!n(w)){var Y=t.itemUnderPoint(D.stageX/e.scaX,D.stageY/e.scaY);if(w.item!=Y){if(R.upItem=w.item,R.upIndex=w.index,R.downItem=w.item=Y,R.downIndex=w.index=Y?Y.tileNum:null,R.dispatchEvent("change"),n(Y))w.selector.visible=!1;else{var Ee=t.localToLocal(Y.x,Y.y,R);w.selector.loc(Ee.x,Ee.y).siz(Y.width+h*2,Y.height+g*2),w.selector.color=ne[w.index],w.selector.borderColor=I[w.index],w.selector.visible=!0}R.stage.update()}}}),this.tileUp=t.on("pressup",function(D){var K="id"+Math.abs(D.pointerID+1),w=y[K];n(w)||(R.downIndex=R.downItem=null,R.upIndex=w.index,R.upItem=w.item,G.push(w.selector),w.selector.visible=!1,R.dispatchEvent("change"),R.stage&&!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&R.stage.update(),delete y[K])})),R.noAnimate=!1;function p(D,K,w,Y){n(w)&&(w=j),ee=D,k=D.tileNum,w.color=ne[k],w.borderColor=I[k],T&&(R.upItem=R.upIndex=null,R.downItem=ee,R.downIndex=k),R.animating=!0;var Ee=t.localToLocal(D.x,D.y,R),X=Math.abs(Ee.x-j.x),Z=Math.abs(Ee.y-j.y),pe=R.noAnimate||K?0:_;if(R.noAnimate=!1,pe==0)w.loc(Ee.x,Ee.y).siz(D.width+h*2,D.height+g*2),R.animating=!1,R.dispatchEvent("change");else{if(P||(X+Z)*pe<=0?w.animate({x:Ee.x,y:Ee.y},(Z+X)*pe):(w.stopAnimate(),X>=Z?w.animate([{props:{x:Ee.x},time:Math.max(V=="s"?.1:100,X*pe/(V=="s"?1e3:1))},{props:{y:Ee.y},time:Math.max(V=="s"?.1:100,Z*pe/(V=="s"?1e3:1))}]):w.animate([{props:{y:Ee.y},time:Math.max(V=="s"?.1:100,Z*pe/(V=="s"?1e3:1))},{props:{x:Ee.x},time:Math.max(V=="s"?.1:100,X*pe/(V=="s"?1e3:1))}])),w.animate({props:{widthOnly:D.width+h*2,heightOnly:D.height+g*2},time:Math.max(V=="s"?.2:200,(Z+X)*pe/(V=="s"?1e3:1)),events:R.liveIndex,call:function(){R.animating=!1,Y?R.dispatchEvent("changeset"):R.dispatchEvent("change")}}),R.liveIndex){var ve=null;w.on("animation",function(){var ue=w.parent.localToGlobal(w.x,w.y),xe=t.itemUnderPoint(ue.x,ue.y);xe.tileNum!=ve&&(k=xe.tileNum,Y?R.dispatchEvent("changeset"):R.dispatchEvent("change"),ve=xe.tileNum)})}if(C){if(C===!0)var $=.7;else $=e.constrain(C,0,1);t.animate({props:{alpha:$},rewind:!0,time:(Z+X)*_*.7/(V=="s"?1e3:1)})}}t.stage&&t.stage.update()}N&&R.added(function(){R.keyEvent=R.stage.frame.on("keydown",function(D){if(R.stage&&R.enabled&&!R.animating&&(R.zimAccessibility&&R.focus||!R.zimAccessibility&&R.keyFocus)){var K=e.loop(t.items2D,function(X,Z){var pe=e.loop(X,function(ve,$){if(ve==ee)return[$,Z]});if(Array.isArray(pe))return pe});K===!0&&(K=[0,0]);var w=t.items2D[K[1]].length,Y=t.items2D.length,Ee;D.keyCode=="39"?(Ee=(K[0]+1)%w,p(t.items2D[K[1]][Ee],Ee<K[0])):D.keyCode=="37"?(Ee=(K[0]-1+w)%w,p(t.items2D[K[1]][Ee],Ee>K[0])):D.keyCode=="38"?(Ee=(K[1]-1+Y)%Y,p(t.items2D[Ee][K[0]],Ee>K[1])):D.keyCode=="40"&&(Ee=(K[1]+1)%Y,p(t.items2D[Ee][K[0]],Ee<K[1]))}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return k},set:function(D){n(D)&&(R.currentItem=null),R.currentItem=t.items[Math.round(D)]}}),Object.defineProperty(this,"text",{get:function(){return ee.text},set:function(){Et&&ht("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return ee},set:function(D){if(n(D)){ee=null,k=null,j.visible=!1,R.selectedCol=null,R.selectedRow=null;return}j.visible=!0,R.lastItem=ee,R.lastIndex=k,R.lastCol=R.selectedCol,R.lastRow=R.selectedRow,R.selectedCol=D.tileCol,R.selectedRow=D.tileRow,k=D.tileNum,ee=D,p(ee,null,null,!0)}}),this._enabled=!0,Object.defineProperty(R,"enabled",{get:function(){return R._enabled},set:function(D){D?R.mouse():R.noMouse(),R._enabled=D}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==R},set:function(){e.KEYFOCUS=R}}),e.KEYFOCUS||d(),this.on("mousedown",function(){d()});function d(){R.keyFocus=!0;var D=document.activeElement;D&&D.blur()}E!==!1&&e.styleTransforms(this,q),this.clone=function(D){if(D)for(var K=[],w=0;w<R.tile.items.length;w++)K.push(R.tile.items[w].clone(!0));return R.cloneProps(new e.Selector(D?e.series(K):t.clone?t.clone():t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,this.style,this.group))},this.dispose=function(D,K,w){R.keyEvent&&R.stage&&R.stage.frame.off("keydown",R.keyEvent),t.off(R.tileDown),t.dispose(),T&&(t.off(R.tileMove),t.off(R.tileUp)),w||this.zimContainer_dispose(!0)}},e.extend(e.Selector,e.Container,["clone","dispose"],"zimContainer",!1),e.Dial=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y){var Ee="min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",X;if(X=mt(e.Dial,arguments,Ee,this))return X;qe("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=w;var Z=K===!1?{}:e.getStyle(this.type,this.group,Y);if(n(t)&&(t=Z.min!=null?Z.min:0),n(r)&&(r=Z.max!=null?Z.max:10),r-t==0){ht("ZIM Dial range must not be 0");return}n(I)&&(I=Z.sound!=null?Z.sound:!1),n(i)&&(i=Z.step!=null?Z.step:I?0:1),n(o)&&(o=Z.width!=null?Z.width:100),n(l)&&(l=Z.backgroundColor!=null?Z.backgroundColor:e.granite),n(f)&&(f=Z.indicatorColor!=null?Z.indicatorColor:I?e.white:e.licorice),n(h)&&(h=Z.indicatorScale!=null?Z.indicatorScale:1),n(g)&&(g=Z.indicatorType!=null?Z.indicatorType:I?"aztec":"arrow"),n(_)&&(_=Z.useTicks!=null?Z.useTicks:i!=0),n(P)&&(P=Z.innerTicks!=null?Z.innerTicks:!1),n(T)&&(T=Z.tickStep!=null?Z.tickStep:i||(_?.25:0)),n(N)&&(N=Z.semiTicks!=null?Z.semiTicks:I?3:0),n(C)&&(C=Z.tickColor!=null?Z.tickColor:I?e.tin:l),n(O)&&(O=Z.tickScale!=null?Z.tickScale:I?1.25:1),n(S)&&(S=Z.semiTickScale!=null?Z.semiTickScale:1.25),n(k)&&(k=Z.innerCircle!=null?Z.innerCircle:!0),n(E)&&(E=Z.innerColor!=null?Z.innerColor:I?e.pink:"rgba(0,0,0,.2)"),n(L)&&(L=Z.inner2Color!=null?Z.inner2Color:I?e.light:"rgba(0,0,0,.1)"),n(x)&&(x=Z.innerScale!=null?Z.innerScale:I?.4:.5),n(A)&&(A=Z.accentSize!=null?Z.accentSize:I?o/2*.15:0),n(b)&&(b=Z.accentOffset!=null?Z.accentOffset:o/2*.45),n(V)&&(V=Z.accentDifference!=null?Z.accentDifference:-.25),n(F)&&(F=Z.accentColor!=null?Z.accentColor:e.pink),n(q)&&(q=Z.accentBackgroundColor!=null?Z.accentBackgroundColor:I?e.blue:e.clear),n(R)&&(R=Z.gap!=null?Z.gap:I?.25:0),n(ne)&&(ne=Z.linear!=null?Z.linear:I),R&&(ne=!0,ce=!1),n(Q)&&(Q=Z.limit!=null?Z.limit:!0),n(U)&&(U=Z.keyArrows!=null?Z.keyArrows:!0),n(ee)&&(ee=Z.keyArrowsStep!=null?Z.keyArrowsStep:(r-t)/100),n(ae)&&(ae=Z.keyArrowsH!=null?Z.keyArrowsH:!0),n(ie)&&(ie=Z.keyArrowsV!=null?Z.keyArrowsV:!0),n(ce)&&(ce=Z.continuous!=null?Z.continuous:!1),ce&&(Q=Z.limit!=null?Z.limit:!1),n(y)&&(y=Z.damp!=null?Z.damp:!1),n(p)&&(p=Z.currentValue!=null?Z.currentValue:!1),n(d)&&(d=Z.useLabels!=null?Z.useLabels:!1),n(D)&&(D=Z.labelMargin!=null?Z.labelMargin:10),Q==!1&&(y=null);var pe=this;this.cur("pointer");var ve=$(t,r,i,p);this.veeObj={min:ve[0],max:ve[1],step:ve[2],currentValue:ve[3]};function $(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var ue=i;p=e.Pick.choose(p);var xe=o/2,Ye=o,se=t,be=0,te;if(A){var _e=o/2+b+A/2,J=360*R/2;pe.accentBacking=new e.Shape(-xe,-xe,xe*2,xe*2).addTo(this).s(q).ss(A+V).a(0,0,_e,(J-90)*e.RAD,(360-J-90)*e.RAD),te=pe.accent=new e.Shape(-xe,-xe,xe*2,xe*2).addTo(this)}function ye(){te.c().s(F).ss(A),ne?te.a(0,0,_e,(J-90)*e.RAD,(He.rotation-J*2)*e.RAD):te.a(0,0,_e,(J-90)*e.RAD,(He.rotation-90)*e.RAD)}var Re=this.backing=new e.Circle(xe,l,null,null,null,null,null,null,!1);if(A?Re.center(this):this.addChild(Re),k){var de=this.inner=new e.Circle(xe*x,E,null,null,null,null,null,null,!1);this.addChild(de);var Me=this.inner2=new e.Circle(xe*(x-.1),L,null,null,null,null,null,null,!1);this.addChild(Me)}I&&(pe.rotation=180);var Be=Math.abs(r-t)/(T||i)+(R?1:0),he=i?Math.abs(r-t)/i:0;if(_){var Ae=this.ticks=new e.Container({style:!1});if(this.addChild(Ae),d)var Ce=pe.labels=new e.Container(o*2,Ye*2).centerReg(pe);for(var me=0;me<Be;me++){var Ne=me%(N+1)==0,ge=new e.Rectangle(1,xe*(Ne?.2*O:.1*S),C,null,null,null,null,null,null,!1);if(ge.regY=xe+(P?x-.05:ge.height+xe*.1),ge.regX=.5,ge.rotation=(360-360*R)/(Be-(R?1:0))*me+360*R/2,Ae.addChild(ge),d&&(N&&Ne||!N)){var Ue=Math.max(e.countDecimals(ue),e.countDecimals(t),e.countDecimals(r));new e.Label({text:e.decimals(t+(r-t)/Math.abs(he)*me,Ue+1),size:Z.size?Z.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-D-1,ge).addTo(Ce)}}pe.expand(ge.height)}this.setBounds(-xe,-xe,o,o);var He,Oe;if(g=="dot"||g=="circle")He=this.indicator=new e.Container({style:!1}),Oe=this.indicatorShape=new e.Circle(xe*.19,f,null,null,null,null,null,null,!1),He.addChild(Oe),e.sca(He,h),He.regY=xe-He.getBounds().width*h/2-xe*.07;else if(g=="line"||g=="rectangle")He=this.indicator=new e.Container({style:!1}),Oe=this.indicatorShape=new e.Rectangle(xe*.1,xe*.3,f,null,null,null,null,null,null,null,null,!1),He.addChild(Oe),e.sca(He,h),He.regY=xe-He.getBounds().width*h/2-xe*.07,He.regX=xe*.05;else if(g=="aztec"){He=this.indicator=new e.Container({style:!1});var fe=xe*.05,Xe=xe*.1,Ze=xe*.42;Oe=this.indicatorShape=new e.Shape(-Xe,0,Xe*2,Ze).f(f).mt(-fe,0).lt(fe,0).lt(Xe,Ze).lt(-Xe,Ze).cp(),He.addChild(Oe),e.sca(He,h),He.regY=xe-He.getBounds().width*h/2-xe*.04}else He=this.indicator=new e.Container({style:!1}),Oe=this.indicatorShape=new e.Triangle(xe*.4,xe*.4,xe*.4,f,null,null,null,null,null,null,null,!1),He.addChild(Oe),e.sca(He,h),He.regY=xe-He.getBounds().height*h*(P?.85:.75),P&&(Oe.rotation=180);He.regY/=h,this.addChild(He);function Ke(rt){return i==0?rt:Math.round(rt/i)*i}var ut,gt,We,it,ct=0;if(ce)var Pe=0,Fe=0,we=0,je=!1,st=!1,Je=!0;if(ne)this.on("mousedown",function(rt){if(!(pe.zimAccessibility&&pe.zimAccessibility.aria)){var Tt=ut=He.rotation,xt=pe.parent.globalToLocal(rt.stageX/e.scaX,rt.stageY/e.scaY);We=pe.on("pressmove",function(Ct){var lt=pe.parent.globalToLocal(Ct.rawX/e.scaX,Ct.rawY/e.scaY);He.rotation=Tt=ut+(xt.y-lt.y)*100/(this.width||1),Q&&(Tt>360-360*R/2||Tt<0+360*R/2)&&(Tt=e.constrain(Tt,360*R/2,360-360*R/2),xt=pe.parent.globalToLocal(Ct.rawX/e.scaX,Ct.rawY/e.scaY),ut=Tt),Ve(Tt)}),it=this.on("pressup",function(){pe.off("pressmove",We),pe.off("pressup",it)})}});else{var tt=!0;this.on("mousedown",function(rt){if(!(pe.zimAccessibility&&pe.zimAccessibility.aria)){ut=He.rotation;var Tt=pe.parent.globalToLocal(rt.stageX/e.scaX,rt.stageY/e.scaY),xt=Tt.x-pe.x,Ct=pe.y-Tt.y;gt=Math.atan2(xt,Ct)*180/Math.PI;var lt=new Date().getTime();We=pe.on("pressmove",function(Dt){if(je){var Mt=pe.parent.globalToLocal(Dt.rawX/e.scaX,Dt.rawY/e.scaY),St=Mt.x-pe.x,Ft=pe.y-Mt.y;gt=Math.atan2(St,Ft)*180/Math.PI,ut=He.rotation}Mt=pe.parent.globalToLocal(Dt.rawX/e.scaX,Dt.rawY/e.scaY),St=Mt.x-pe.x,Ft=pe.y-Mt.y;var Yt=Math.atan2(St,Ft)*180/Math.PI,$t=ut+Yt-gt;$t=($t+360*1e4)%360,Q&&tt&&($t-ct>180&&pe.currentValue!=r?$t=0:$t-ct<-180&&($t=359)),tt=!0,Ve($t),ct=$t}),it=this.on("pressup",function(Dt){pe.currentValue!=pe.min&&pe.currentValue!=pe.max&&(tt=!1);var Mt=new Date().getTime()-lt;if(Mt<200){Tt=pe.parent.globalToLocal(Dt.rawX/e.scaX,Dt.rawY/e.scaY),xt=Tt.x-pe.x,Ct=pe.y-Tt.y;var St=Math.atan2(xt,Ct)*180/Math.PI-pe.rotation;Ve(St)}ut=He.rotation,pe.off("pressmove",We),pe.off("pressup",it)})}})}function Te(rt){return rt>0?1:-1}function et(){pe.zimAccessibility&&pe.zimAccessibility.changeTitle(pe,null,!0)}function Ve(rt){if(ce){st&&(Pe=rt,st=!1),rt>Pe+180?we-=360:rt<Pe-180&&(we+=360),Fe=we+rt,Je=!1;var Tt=pe.currentValue;return pe.currentValue=Ke(Fe*(r-t)/360),Tt!=pe.currentValue&&pe.dispatchEvent("change"),Pe=rt,Je=!0,te&&ye(),!0}var xt;rt<0&&(rt+=360),rt=rt%360,i!=0?(rt=Math.min(rt,360),xt=Ke((rt-360*R/2)/(360-360*R)*(r-t)),He.rotation=360*R/2+xt*(360-360*R)/(r-t)):(He.rotation=rt,xt=(rt-360*R/2)/(360-360*R)*(r-t)),xt!=be&&(be=xt,se=xt+t,te&&ye(),pe.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&pe.stage&&pe.stage.update()),et()}var Le,Qe;y&&(Le=t,Qe=new e.Damp(Le,y),pe.ticker=e.Ticker.add(function(){Le=Qe.convert(se)})),Object.defineProperty(this,"currentValue",{get:function(){return y?Le:se},set:function(rt){n(rt)||(ce?(je=!1,!n(j)&&!n(G)?j<G?(rt<j&&(rt=j,je=!0),rt>G&&(rt=G,je=!0)):(rt>j&&(rt=j,je=!0),rt<G&&(rt=G,je=!0)):n(j)?n(G)||rt>G&&(rt=G,je=!0):rt<j&&(rt=j,je=!0),Je&&(st=!0,we=Math.floor(rt/(r-t))*360)):t<r?(rt<t&&(rt=Q?t:r),rt>r&&(rt=Q?r:t)):(rt>t&&(rt=Q?t:r),rt<r&&(rt=Q?r:t)),se=rt,rt=Ke(rt),y&&y.immediate(se),He.rotation=R*360/2+(rt-t)*(360-R*360)/(r-t),He.rotation=(He.rotation+360*1e4)%360,be=rt-t,ct=He.rotation,te&&ye(),et(),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&pe.stage&&pe.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return y?Le:se},set:function(rt){rt!=pe.currentValue&&(pe.currentValue=rt,pe.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(rt){ce?t=rt:Et&&ht("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(rt){ce?r=rt:Et&&ht("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return ce},set:function(){Et&&ht("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return j},set:function(rt){j=rt,pe.currentValue<j&&(pe.currentValue=j)}}),Object.defineProperty(this,"continuousMax",{get:function(){return G},set:function(rt){G=rt,pe.currentValue>G&&(pe.currentValue=G)}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){Et&&ht("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return ae},set:function(rt){ae=rt}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return ie},set:function(rt){ie=rt}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==pe},set:function(){e.KEYFOCUS=pe}}),U&&!e.KEYFOCUS&&$e(),this.on("mousedown",function(){U&&$e()});function $e(){pe.keyFocus=!0;var rt=document.activeElement;rt&&rt.blur()}var nt=!1,pt=!1,De=!1,at=!1;this.keyDownEvent=function(rt){pe.stage&&(pe.zimAccessibility&&pe.focus||!pe.zimAccessibility&&pe.keyFocus)&&(rt.keyCode==37&&ae?nt=!0:rt.keyCode==40&&ie?pt=!0:rt.keyCode==39&&ae?De=!0:rt.keyCode==38&&ie&&(at=!0),pe.keyInterval==null&&(nt||pt||De||at)&&(yt(),pe.keyTimeout=setTimeout(function(){pe.keyInterval==null&&(nt||pt||De||at)&&(pe.keyInterval=setInterval(yt,40))},140)))};function yt(){(nt||pt)&&(i>0?pe.currentValueEvent-=i*Te(r-t):pe.currentValueEvent-=ee*Te(r-t)),(De||at)&&(i>0?pe.currentValueEvent+=i*Te(r-t):pe.currentValueEvent+=ee*Te(r-t))}le.addEventListener("keydown",this.keyDownEvent),pe.keyUpEvent=function(rt){rt.keyCode==37?nt=!1:rt.keyCode==40?pt=!1:rt.keyCode==39?De=!1:rt.keyCode==38&&(at=!1),pe.keyInterval!=null&&!nt&&!pt&&!De&&!at&&(clearInterval(pe.keyInterval),pe.keyInterval=null)},le.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(pe,"enabled",{get:function(){return pe._enabled},set:function(rt){rt?(le.addEventListener("keydown",pe.keyDownEvent),le.addEventListener("keyup",pe.keyUpEvent)):(le.removeEventListener("keydown",pe.keyDownEvent),le.removeEventListener("keyup",pe.keyUpEvent)),pe._enabled=rt}}),n(p)&&(p=Z.currentValue!=null?Z.currentValue:t),pe.currentValue=p,K!==!1&&e.styleTransforms(this,Z),this.clone=function(rt){return pe.cloneProps(new e.Dial(rt||!e.isPick(ve[0])?pe.min:ve[0],rt||!e.isPick(ve[1])?pe.max:ve[1],rt||!e.isPick(ve[2])?pe.step:ve[2],o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,rt||!e.isPick(ve[3])?pe.currentValue:ve[3],d,D,K,this.group,Y))},this.dispose=function(rt,Tt,xt){return le.removeEventListener("keydown",pe.keyDownEvent),le.removeEventListener("keyup",pe.keyUpEvent),xt||this.zimContainer_dispose(!0),!0}},e.extend(e.Dial,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue){var xe="width, height, tabs, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",Ye;if(Ye=mt(e.Tabs,arguments,xe,this))return Ye;qe("65");var se=ve===!1?{}:e.getStyle("Tabs",$,ue);n(O)&&(O=se.vertical!=null?se.vertical:!1),n(t)&&(t=se.width!=null?se.width:null);var be=!n(t);if(n(t)&&(t=O?60:240),n(r)&&(r=se.height!=null?se.height:O?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=$,(n(i)||i.length<=0)&&(i=se.tabs!=null?se.tabs:[1,2,3,4]),n(o)&&(o=se.backgroundColor!=null?se.backgroundColor:e.tin),n(l)&&(l=se.rollBackgroundColor!=null?se.rollBackgroundColor:e.grey),n(f)&&(f=se.downBackgroundColor!=null?se.downBackgroundColor:l),n(h)&&(h=se.selectedBackgroundColor!=null?se.selectedBackgroundColor:e.dark),n(g)&&(g=se.selectedRollBackgroundColor!=null?se.selectedRollBackgroundColor:l),n(_)&&(_=se.color!=null?se.color:e.white),n(P)&&(P=se.rollColor!=null?se.rollColor:_),n(C)&&(C=se.downColor!=null?se.downColor:P),n(T)&&(T=se.selectedColor!=null?se.selectedColor:_),n(N)&&(N=se.selectedRollColor!=null?se.selectedRollColor:P),n(q)&&(q=se.backing!=null?se.backing.clone():null),n(V)&&(V=se.rollBacking!=null?se.rollBacking.clone():null),n(j)&&(j=se.align!=null?se.align:"center"),n(G)&&(G=se.valign!=null?se.valign:"center"),n(y)&&(y=se.labelAlign!=null?se.labelAlign:j),n(p)&&(p=se.labelValign!=null?se.labelValign:G),n(w)&&(w=se.indent!=null?se.indent:10),n(d)&&(d=se.labelIndent!=null?se.labelIndent:w),n(D)&&(D=se.labelIndentH!=null?se.labelIndentH:d),n(K)&&(K=se.labelIndentV!=null?se.labelIndentV:d),n(k)&&(k=se.currentEnabled!=null?se.currentEnabled:!1),n(x)&&(x=se.currentSelected!=null?se.currentSelected:!0),x||(k=!0),n(S)&&(S=se.spacing!=null?se.spacing:1),n(E)&&(E=se.corner!=null?se.corner:0),n(b)&&(b=se.gradient!=null?se.gradient:null),n(F)&&(F=se.gloss!=null?se.gloss:null),n(L)&&(L=se.base!=null?se.base:E==0&&!Array.isArray(E)?"none":O?"left":"bottom"),n(A)&&(A=se.keyEnabled!=null?se.keyEnabled:!0),n(Y)&&(Y=se.useTap!=null?se.useTap:!1),n(Ee)&&(Ee=se.excludeCustomTap!=null?se.excludeCustomTap:!1),n(ce)&&(ce=se.backdropColor!=null?se.backdropColor:null),n(Z)&&(Z=se.styleLabels!=null?se.styleLabels:!1),n(pe)&&(pe=se.keyWrap!=null?se.keyWrap:!0),L!="none"&&E!=0&&!Array.isArray(E))switch(L){case"bottom":E=[E,E,0,0];break;case"left":E=[0,E,E,0];break;case"top":E=[0,0,E,E];break;case"right":E=[E,0,0,E];break}else Array.isArray(E)||(E=[E,E,E,E]);var te=this;this.keyEnabled=A;var _e=0,J=[],ye=[],Re,de,Me=i.length,Be=(t-S*(Me-1))/Me,he=(r-S*(Me-1)-2)/Me;if(!n(ce)){var Ae=this.backdrop=new e.Rectangle(t,r,ce,null,null,null,null,null,null,!1);this.addChild(Ae)}var Ce=!1,me;function Ne(Fe){for(var we=0;we<Fe.length;we++){var je=Fe[we];if(je.constructor==={}.constructor){me&&me!="TabObject"&&(Ce=!0),me="TabObject",je.type="TabObject";continue}typeof je=="string"||typeof je=="number"||je.type=="Label"?(Fe[we]={type:"TabObject",label:String(je!=null)||je.type=="Label"?je:"1"},me&&me!="TabObject"&&(Ce=!0),me="TabObject"):(me&&me=="TabObject"&&(Ce=!0),me="Other")}}Ne(i);for(var ge=0,Ue,He=0,Oe=0;Oe<i.length;Oe++)de=i[Oe],O?be&&(de.width=de.width?de.width:t):(n(de.width)&&He++,ge+=n(de.width)?Be:de.width);if(!O){if(ge>t-S*(Me-1))for(Oe=0;Oe<i.length;Oe++)de=i[Oe],de.width=(t-S*(Me-1))/ge*(n(de.width)?Be:de.width);else if(Math.round(ge)<Math.round(t-S*(Me-1))&&He>0)for(Ue=(Me*Be-(ge-He*Be))/He,Oe=0;Oe<i.length;Oe++)de=i[Oe],de.width=n(de.width)?Ue:de.width}function fe(Fe,we){for(Oe=0;Oe<Fe.length;Oe++)de=Fe[Oe],de!=""&&de.type=="TabObject"&&(n(de.label)&&(de.label=" "),(typeof de.label=="string"||typeof de.label=="number")&&(de.label=new e.Label({text:de.label,size:se.size!=null?se.size:O?he/2:r/2,font:se.font!=null?se.font:null,style:Z,valign:p,inherit:we})))}fe(i,Z?se:null);var Xe=0;for(Oe=0;Oe<i.length;Oe++)de=i[Oe],!de.width&&O&&de.label.width>Xe&&(Xe=de.label.width);var Ze=0;function Ke(Fe,we){var je=[],st=[];for(Oe=0;Oe<Fe.length;Oe++){if(de=Fe[Oe],de.type=="TabObject"){var Je={color:n(de.color)?e.Pick.choose(_):de.color,rollColor:n(de.rollColor)?e.Pick.choose(P):de.rollColor,downColor:n(de.downColor)?e.Pick.choose(C):de.downColor,selectedColor:n(de.selectedColor)?e.Pick.choose(T):de.selectedColor,selectedRollColor:n(de.selectedRollColor)?e.Pick.choose(N):de.selectedRollColor,backgroundColor:n(de.backgroundColor)?e.Pick.choose(o):de.backgroundColor,rollBackgroundColor:n(de.rollBackgroundColor)?e.Pick.choose(l):de.rollBackgroundColor,downBackgroundColor:n(de.downBackgroundColor)?e.Pick.choose(f):de.downBackgroundColor,selectedBackgroundColor:n(de.selectedBackgroundColor)?e.Pick.choose(h):de.selectedBackgroundColor,selectedRollBackgroundColor:n(de.selectedRollBackgroundColor)?e.Pick.choose(g):de.selectedRollBackgroundColor,wait:n(de.wait)?e.Pick.choose(I):de.wait};if(we)for(var tt in we)n(we[tt])||(Je[tt]=we[tt]);Re=new e.Button({width:O?n(de.width)?be?t:Xe+he/2+E[0]/2:de.width:n(de.width)?Be:de.width,height:O?he:r,label:de.label,borderColor:se.borderColor!=null?se.borderColor:null,borderWidth:se.borderWidth!=null?se.borderWidth:null,backgroundColor:Je.backgroundColor,rollBackgroundColor:Je.rollBackgroundColor,downBackgroundColor:Je.downBackgroundColor,downColor:Je.downColor,corner:E,shadowColor:-1,gradient:b,gloss:F,backing:q?q.clone():null,rollBacking:V?V.clone():null,wait:Je.wait,waitTime:n(de.waitTime)?ne:de.waitTime,waitBackgroundColor:n(de.waitBackgroundColor)?R:de.waitBackgroundColor,rollWaitBackgroundColor:n(de.rollWaitBackgroundColor)?Q:de.rollWaitBackgroundColor,waitColor:n(de.waitColor)?U:de.waitColor,rollWaitColor:n(de.rollWaitBackgroundColor)?ee:de.rollWaitColor,waitModal:n(de.waitModal)?ae:de.waitModal,waitEnabled:n(de.waitEnabled)?ie:de.waitEnabled,align:y,valign:p,indentH:D,indentV:K,inherit:e.copy(se)}),Re.tabInfo=Je,Re.color=Re.tabInfo.color,Re.rollColor=Re.tabInfo.rollColor,Re.type="TabsButton",Re.content=de,Re.listIndentReady=!0}else{if(de.listIndentReady)Re=de;else{Re=new e.Container,Re.type=de.type,Re.content=de;for(var Te=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],et=0;et<Te.length;et++)de[Te[et]]&&(Re[Te[et]]=de[Te[et]])}de.checkBox&&(Re.checkBox=de.checkBox),n(Re.tabInfo)&&(Re.tabInfo={}),Ee&&(Re.excludeTap=!0),Re.tabInfo.color=n(de.color)?_:de.color,Re.tabInfo.backgroundColor=n(de.backgroundColor)?o:de.backgroundColor,de.listIndentReady||(new e.Rectangle(Math.max(de.width,O?be?t:Xe+he/2+E[0]/2:de.width),Math.max(de.height,O?he:r),e.clear).addTo(Re).expand(0).cur(),de.center(Re).cur(),j=="center"||j=="middle"||de.pos(0,null,j=="right"),G=="center"||G=="middle"||de.pos(null,0,null,G=="bottom"),Re.listIndentReady=!0)}Re.width>Ze&&(Ze=Re.width),Y?Re.tap(function(Ve){We(Ve.currentTarget.znum),te.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}):Re.zimTabEvent=Re.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Ve){We(Ve.currentTarget.znum),te.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}),Re.on("mousedown",function(Ve){te.buttonDown=Ve.currentTarget}),Re.on("pressup",function(Ve){te.buttonDown=null;var Le=Ve.currentTarget.znum;Y||e.ACTIONEVENT=="click"?setTimeout(function(){it(Le)},50):it(Le)}),st.push(de.label),je.push(Re),Re.index=Oe}return[je,st]}var ut=Ke(i);ye=ut[0],J=ut[1];function gt(){var Fe=0,we=0,je;for(Oe=0;Oe<ye.length;Oe++)je=ye[Oe],je.znum=Oe,je.selectedIndex=Oe,je.selectedIndex==_e&&x&&(je.backgroundColor=h,je.rollBackgroundColor=g,je.color=T),J[Oe]&&(J[Oe].znum=Oe),te.addChild(je),(!O||be)&&(je.x=(t-je.width)/2,je.y=(r-je.height)/2),O?(je.y=we,we=je.y+je.height+S,j=="left"?je.x=(je.type=="TabsButton"||je.type=="ListItem"?0:w)+(je.regX-(je.getBounds()?je.getBounds().x:0))*je.scaleX:j=="right"&&(je.x=(be?t:Ze)-je.width-(je.type=="TabsButton"||je.type=="ListItem"?0:w))):(je.x=Fe,Fe=je.x+je.width+S,G=="top"?je.y=(je.type=="TabsButton"&&!Ce?0:w)+(je.regY-(je.getBounds()?je.getBounds().y:0))*je.scaleY:G=="bottom"&&(je.y=r-je.height-(je.type=="TabsButton"&&!Ce?0:w))),Oe==_e&&!k?je.enabled=!1:je.enabled=!0;n(ce)||te.removeChild(Ae),te._bounds=null;var st=te.getBounds(),Je=0,tt=0;if(!st&&ze.EaselJS.version[0]!=0?te.setBounds():st&&(Je=O&&st.width!=0&&be?t:st.width,tt=O&&st.height!=0?st.height:r,te.setBounds(Je,tt)),n(ce)||(Ae.widthOnly=Je,Ae.heightOnly=tt,te.addChildAt(Ae,0)),O&&!be)for(Oe=0;Oe<=ye.length;Oe++)(j=="center"||j=="middle")&&(je.x=(Je-je.width)/2)}gt();function We(Fe,we){if(Fe!=_e){var je=ye[_e];if(je&&x&&(je.tabInfo&&n(je.tabInfo.wait)&&(je.tabInfo.backgroundColor&&(je.backgroundColor=je.tabInfo.backgroundColor),je.tabInfo.rollBackgroundColor&&(je.rollBackgroundColor=je.tabInfo.rollBackgroundColor),je.tabInfo.color&&je.label&&(je.color=je.tabInfo.color),je.tabInfo.rollColor&&je.label&&(je.rollColor=je.tabInfo.rollColor)),k||(je.enabled=!0)),_e=Fe,je=ye[_e],je){var st=je.tabInfo;st&&n(je.tabInfo.wait)&&x&&(st.selectedBackgroundColor&&(je.backgroundColor=!n(st.downBackgroundColor)&&!we?st.downBackgroundColor:st.selectedBackgroundColor),st.selectedRollBackgroundColor&&(je.rollBackgroundColor=st.selectedRollBackgroundColor),st.selectedColor&&je.label&&(je.color=!n(st.downColor)&&!we?st.downColor:st.selectedColor),st.selectedRollColor&&je.label&&(je.rollColor=st.selectedRollColor)),we&&!k&&(je.enabled=!1)}}}function it(Fe){var we=ye[Fe];if(we&&x){var je=we.tabInfo;je&&n(je.wait)&&(je.selectedBackgroundColor&&(we.backgroundColor=te.selected==we?je.selectedBackgroundColor:je.backgroundColor),je.selectedColor&&we.label&&(we.color=te.selected==we?je.selectedColor:je.color)),k||(we.enabled=!1)}}this.addAt=function(Fe,we,je){n(we)&&(we=ye.length),we=e.constrain(we,0,ye.length),Array.isArray(Fe)||(Fe=[Fe]),Ne(Fe),fe(Fe,je);var st=Ke(Fe,je),Je=st[0],tt=st[1];we<=_e&&(_e+=Je.length);var Te=[we,0].concat(Je);return Array.prototype.splice.apply(ye,Te),Te=[we,0].concat(tt),Array.prototype.splice.apply(J,Te),gt(),te},this.removeAt=function(Fe,we){if(ye.length==0)return te;for(n(Fe)&&(Fe=1),n(we)&&(we=ye.length-Fe),we=e.constrain(we,0,ye.length-Fe),_e>=we&&_e<=we+Fe&&(_e=-1),_e>we+Fe&&(_e-=Fe),Oe=we;Oe<we+Fe;Oe++)ye[Oe].tabInfo&&(ye[Oe].tabInfo.backgroundColor&&(ye[Oe].backgroundColor=ye[Oe].tabInfo.backgroundColor),ye[Oe].tabInfo.color&&ye[Oe].label&&(ye[Oe].color=ye[Oe].tabInfo.color)),Y?ye[Oe].noTap():ye[Oe].off((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",ye[Oe].zimTabEvent),ye[Oe].removeFrom();return ye.splice(we,Fe),J.splice(we,Fe),gt(),te},te.keyEvent=function(Fe){if(!(!te.keyEnabled||!te.keyFocus||te.zimAccessibility)&&Fe.keyCode==9){var we=_e;Fe.shiftKey?We(--we<0?pe?i.length-1:0:we):We(++we>i.length-1?pe?0:i.length-1:we),te.dispatchEvent("change"),te.dispatchEvent("keychange"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update(),Fe.preventDefault()}},le.addEventListener("keydown",te.keyEvent),Object.defineProperty(this,"selected",{get:function(){return ye[_e]},set:function(){Et&&ht("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return _e},set:function(Fe){We(Fe,!0),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return _e},set:function(Fe){We(Math.min(Math.max(Fe,0),i.length-1)),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.color:_},set:function(Fe){if(_=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.color=Fe),(we!=_e||!x)&&(te.buttons[we].color=_);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.rollColor:P},set:function(Fe){if(P=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.rollColor=Fe),te.buttons[we].rollColor=P,we!=_e&&te.buttons[we].rolled&&(te.buttons[we].color=P);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedColor:T},set:function(Fe){if(T=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.selectedColor=Fe),we==_e&&x&&(te.buttons[we].color=T);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedRollColor:N},set:function(Fe){if(N=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.selectedRollColor=Fe),we==_e&&x&&te.buttons[we].rolled&&(te.buttons[we].color=N);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.backgroundColor:o},set:function(Fe){if(o=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.backgroundColor=Fe),(we!=_e||!x)&&(te.buttons[we].backgroundColor=o);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.rollBackgroundColor:l},set:function(Fe){if(l=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.rollBackgroundColor=Fe),te.buttons[we].rollBackgroundColor=l,we!=_e&&te.buttons[we].rolled&&(te.buttons[we].backgroundColor=l);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedBackgroundColor:h},set:function(Fe){if(h=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.selectedBackgroundColor=Fe),we==_e&&x&&(te.buttons[we].backgroundColor=h);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedRollBackgroundColor:g},set:function(Fe){if(g=Fe,te.buttons[0].tabInfo){for(var we=0;we<te.buttons.length;we++)te.buttons[we].tabInfo&&(te.buttons[we].tabInfo.selectedRollBackgroundColor=Fe),we==_e&&x&&te.buttons[we].rolled&&(te.buttons[we].backgroundColor=g);!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return J[_e]},set:function(){Et&&ht("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return J[_e]!=null?J[_e].text:void 0},set:function(){Et&&ht("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return ye},set:function(){Et&&ht("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return J},set:function(){Et&&ht("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(te,"enabled",{get:function(){return te._enabled},set:function(Fe){c(te,Fe)}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==te},set:function(){e.KEYFOCUS=te}}),A&&e.KEYFOCUS&&ct(),this.on("mousedown",function(){A&&ct()});function ct(){te.keyFocus=!0;var Fe=document.activeElement;Fe&&Fe.blur()}var Pe=te.getBounds();n(Pe)||Pe.width==0?te.setBounds(0,0,t,r):te.width=t,n(X)&&(X=se.selectedIndex!=null?se.selectedIndex:0),te.selectedIndex=X,ve!==!1&&e.styleTransforms(this,se),this.clone=function(){for(var Fe=e.copy(i,!0),we=0;we<Fe.length;we++)Fe[we].label=Fe[we].label.clone();return te.cloneProps(new e.Tabs(t,r,Fe,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,this.group,ue))},this.doDispose=function(Fe,we,je){te.keyEvent&&le.removeEventListener("keydown",te.keyEvent),e.loop(te.buttons,function(st){st.dispose()}),te.keyEvent=null,je||this.zimContainer_dispose(!0),x=de=i=J=Re=ye=ut=null}},e.extend(e.Tabs,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Pad=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G){var y="width, cols, rows, keys, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, spacing, currentEnabled, currentSelected, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",p;if(p=mt(e.Pad,arguments,y,this))return p;qe("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=j;var d=ce===!1?{}:e.getStyle(this.type,this.group,G);n(t)&&(t=d.width!=null?d.width:150),n(r)&&(r=d.cols!=null?d.cols:3),n(i)&&(i=d.rows!=null?d.rows:r);var D;if(n(o))if(d.keys!=null)o=d.keys;else for(o=[],D=1;D<=i*r;D++)o.push(D);n(k)&&(k=d.currentEnabled!=null?d.currentEnabled:!0),n(S)&&(S=d.spacing!=null?d.spacing:1);var K=this,w;this.cols=r,this.rows=i;var Y=t/r-S,Ee=[],X=0,Z;for(this.labels=[],this.buttons=[],D=0;D<i;D++){for(var pe=[],ve=0;ve<r;ve++)pe.push(o[X]!=null?o[X]:""),X++;var $=d.corner!=null?d.corner:E;$&&!Array.isArray($)&&($=[$,$,$,$]),Z=Ee[D]=new e.Tabs({width:t,height:Y,tabs:pe,backgroundColor:d.backgroundColor!=null?d.backgroundColor:l,rollBackgroundColor:d.rollBackgroundColor!=null?d.rollBackgroundColor:f,downBackgroundColor:d.downBackgroundColor!=null?d.downBackgroundColor:h,selectedBackgroundColor:d.selectedBackgroundColor!=null?d.selectedBackgroundColor:g,color:d.color!=null?d.color:P,rollColor:d.rollColor!=null?d.rollColor:C,downColor:d.downColor!=null?d.downColor:T,selectedColor:d.selectedColor!=null?d.selectedColor:N,spacing:d.spacing!=null?d.spacing:S,currentEnabled:d.currentEnabled!=null?d.currentEnabled:k,currentSelected:d.currentSelected!=null?d.currentSelected:x,corner:$,backing:d.backing!=null?d.backing.clone():F,rollBacking:d.rollBacking!=null?d.rollBacking.clone():q,base:null,keyEnabled:!1,gradient:d.gradient!=null?d.gradient:A,gloss:d.gloss!=null?d.gloss:b,wait:d.wait!=null?d.wait:V,waitTime:d.waitTime!=null?d.waitTime:I,waitBackgroundColor:d.waitBackgroundColor!=null?d.waitBackgroundColor:ne,rollWaitBackgroundColor:d.rollWaitBackgroundColor!=null?d.rollWaitBackgroundColor:R,waitColor:d.waitColor!=null?d.waitColor:Q,rollWaitColor:d.rollWaitColor!=null?d.rollWaitColor:U,waitModal:d.waitModal!=null?d.waitModal:ee,waitEnabled:d.waitEnabled!=null?d.waitEnabled:ae,group:j,style:!1}),this.labels=this.labels.concat(Z.labels),this.buttons=this.buttons.concat(Z.buttons),this.addChild(Z),Z.selectedIndex=-1,Z.y=(Y+S)*D,Z.znum=D,Z.on("change",ue)}this.tabs=Ee;function ue(xe){var Ye=xe.target;K.selected=Ye.selected,K.text=Ye.text,K.label=Ye.label;for(var se=Ye.selectedIndex,be=0;be<Ee.length;be++)Ye!=Ee[be]&&(Ee[be].selectedIndex=-1);w=Ye.znum*r+se,K.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&K.stage&&K.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return w},set:function(xe){w=xe;for(var Ye=0;Ye<Ee.length;Ye++)Ee[Ye].selectedIndex=-1;var se=Math.floor(w/r);se>=0&&se<K.tabs.length&&(K.tabs[se].selectedIndex=w%r)}}),this._enabled=!0,Object.defineProperty(K,"enabled",{get:function(){return K._enabled},set:function(xe){c(K,xe)}}),n(ie)&&(ie=d.selectedIndex!=null?d.selectedIndex:0),K.selectedIndex=ie,ce!==!1&&e.styleTransforms(this,d),this.clone=function(){return K.cloneProps(new e.Pad(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,this.group,G))},this.dispose=function(xe,Ye,se){e.loop(Ee,function(be){be.dispose()}),this.labels=this.buttons=this.tabs=null,Z=Ee=K.rowTabs=null,se||this.zimContainer_dispose(!0)}},e.extend(e.Pad,e.Container,["clone","dispose"],"zimContainer",!1),e.NumPad=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q){var V="advanced, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, numberCorner, close, closeColor, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",I;if(I=mt(e.NumPad,arguments,V,this))return I;qe("57.7"),this.group=F;var ne=b===!1?{}:e.getStyle("NumPad",this.group,q);n(t)&&(t=ne.advanced!=null?ne.advanced:!1);var R=400,Q=t?620:530;n(r)&&(r=ne.titleBar!=null?ne.titleBar:"NUMPAD"),n(i)&&(i=ne.titleBarColor!=null?ne.titleBarColor:e.white),n(o)&&(o=ne.titleBarBackgroundColor!=null?ne.titleBarBackgroundColor:e.grey),n(l)&&(l=ne.titleBarHeight!=null?ne.titleBarHeight:40),n(f)&&(f=ne.backgroundColor!=null?ne.backgroundColor:e.darker),n(h)&&(h=ne.borderColor!=null?ne.borderColor:e.pewter),n(g)&&(g=ne.borderWidth!=null?ne.borderWidth:null),h<0||g<0?h=g=null:h!=null&&g==null&&(g=1),n(_)&&(_=ne.corner!=null?ne.corner:15),n(P)&&(P=ne.numberCorner!=null?ne.numberCorner:30),n(k)&&(k=ne.align!=null?ne.align:"left"),n(x)&&(x=ne.shadowColor!=null?ne.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=ne.shadowBlur!=null?ne.shadowBlur:14),n(L)&&(L=ne.draggable!=null?ne.draggable:!0),n(A)&&(A=ne.boundary!=null?ne.boundary:null),n(C)&&(C=ne.close!=null?ne.close:!0),n(T)&&(T=ne.closeColor!=null?ne.closeColor:n(i)?e.grey:i),Array.isArray(_)||(_=[_,_,_,_]),n(N)&&(N=ne.collapse!=null?ne.collapse:!0),n(O)&&(O=ne.collapseColor!=null?ne.collapseColor:n(i)?e.grey:i),n(S)&&(S=ne.collapsed!=null?ne.collapsed:!1),this.zimPanel_constructor(R,Q,null,r,i,o,l,f,h,g,_,C,T,null,null,null,N,O,S,k,x,E,L,A,b,F,q),this.type="NumPad";var U=this;function ee(ie,ce){return n(ce)&&(ce=mist),{label:ie,backgroundColor:ce,rollBackgroundColor:white,color:darker,rollColor:darker}}var ae=[ee("C",e.red.darken(.1)),ee(new e.Label({text:"\u2423",size:90,shiftV:-24}),e.yellow.darken(.1)),ee(new e.Label({text:"/",size:48,bold:!0,shiftV:3})),ee(new e.Label({text:"*",size:65,shiftV:18})),1,2,3,ee(new e.Label({text:"-",size:60,shiftV:-3})),4,5,6,ee(new e.Label({text:"+",size:55,shiftV:3})),7,8,9,ee(new e.Label({text:"\u232B",size:M=="ios"?60:35}),e.red.darken(.1)),ee(new e.Label({text:",",size:70,shiftV:-3})),ee(new oi({text:".",size:70,shiftV:-3})),0,ee(new e.Label({text:"\u23CE",size:M=="ios"?40:50,shiftV:5}),e.green.darken(.1))];t&&(ae.splice(2,0,ee("%",yellow.darken(.1))),ae.splice(4,0,ee(new e.Label({text:"^",size:47,shiftV:10}),yellow.darken(.1))),ae.splice(4,0,ee(")",yellow.darken(.1))),ae.splice(4,0,ee("(",yellow.darken(.1)))),U.pad=new e.Pad({width:380,cols:4,rows:t?6:5,keys:ae,spacing:6,currentSelected:!1,backgroundColor:e.grey,rollBackgroundColor:e.tin,selectedBackgroundColor:e.grey,downBackgroundColor:e.green,corner:P}),U.pad.on("mousedown",function(){U.pad.text=="C"?U.key="clear":U.pad.text=="\u2423"?U.key="space":U.pad.text=="\u232B"?U.key="backspace":U.pad.text=="\u23CE"?U.key="enter":U.key=U.pad.text,U.dispatchEvent("pressed")}),U.add(U.pad,null,!0),b!==!1&&e.styleTransforms(this,ne),this.clone=function(){return U.cloneProps(new e.NumPad(t,r?r.clone():"",i,o,l,f,h,g,_,P,C,T,N,O,U.collapsed,k,x,E,L,A,b,this.group,q))}},e.extend(e.NumPad,e.Panel,["clone"],"zimPanel",!1),e.DPad=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x){var E="axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",L;if(L=mt(e.DPad,arguments,E,this))return L;qe("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=k;var A=S===!1?{}:e.getStyle(this.type,this.group,x);n(t)&&(t=A.axis!=null?A.axis:"all"),n(r)&&(r=A.width!=null?A.width:100),n(i)&&(i=A.backgroundColor!=null?A.backgroundColor:e.granite),n(l)&&(l=A.borderColor!=null?A.borderColor:null),n(o)&&(o=A.borderWidth!=null?A.borderWidth:null),l<0||o<0?l=o=null:l!=null&&o==null&&(o=1),n(f)&&(f=A.indicatorColor!=null?A.indicatorColor:e.moon),n(h)&&(h=A.indicatorPressColor!=null?A.indicatorPressColor:e.lighter),n(g)&&(g=A.indicatorScale!=null?A.indicatorScale:1),n(_)&&(_=A.indicatorRadius!=null?A.indicatorRadius:null),n(P)&&(P=A.innerCircle!=null?A.innerCircle:!0),n(C)&&(C=A.innerScale!=null?A.innerScale:.5),n(T)&&(T=A.activeRadius!=null?A.activeRadius:r),n(N)&&(N=A.clamp!=null?A.clamp:!0),n(O)&&(O=A.logo!=null?A.logo:!1);var b=this;this.axis=t,this.outer=new e.Circle(r/2,i,l,o).addTo(this);var F=this.inner=new e.Circle(r*C/2,"rgba(0,0,0,.2)").center(this);O&&(this.logo=new e.Label({text:"D",bold:!0}).center(F).mov(1,2).alp(.3));var q=new e.Container().addTo(this),V=(r-o)*.2*g,I=8;t=="vertical"?I=2:t=="horizontal"?(I=2,q.rotation=90):t=="both"&&(I=4),e.loop(I,function(ie,ce){new e.Triangle(V,V,V,f).addTo(q).reg(null,n(_)?(r-o)*.475:_).rot(ie*360/ce)});var ne=0,R=0,Q;b.dirX=0,b.dirY=0;var U,ee=!0;this.on("mousedown",function(ie){U=ie,q.loop(function(ce){ce.color=h}),ee?b.ticker=e.Ticker.add(function(){ae()}):e.Ticker.add(b.ticker)}),this.on("pressmove",function(ie){U=ie}),this.on("pressup",function(){e.Ticker.remove(b.ticker),b.dirX=b.dirY=0,q.loop(function(ie){ie.color=f}),b.stage&&b.stage.update()});function ae(){var ie=U;ne=ie.stageX/e.scaX,R=ie.stageY/e.scaY,Q=b.globalToLocal(ne,R),ie=new ze.Event("change"),ie.dirX=((Q.x+T)/(T*2)-.5)*2,ie.dirY=((Q.y+T)/(T*2)-.5)*2,N&&(ie.dirX=e.constrain(ie.dirX,-1,1),ie.dirY=e.constrain(ie.dirY,-1,1)),b.dirX=ie.dirX,b.dirY=ie.dirY,b.dispatchEvent(ie)}this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(ie){c(b,ie)}}),S!==!1&&e.styleTransforms(this,A),this.clone=function(){return b.cloneProps(new e.DPad(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,this.group,x))},this.dispose=function(ie,ce,j){return this.ticker&&e.Ticker.remove(this.ticker),j||this.zimContainer_dispose(!0),!0}},e.extend(e.DPad,e.Container,["clone","dispose"],"zimContainer",!1),e.Radial=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d){var D="labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",K;if(K=mt(e.Radial,arguments,D,this))return K;qe("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=p;var w=y===!1?{}:e.getStyle(this.type,this.group,d);n(t)&&(t=w.labels!=null?w.labels:["A","B","C","D","E"]),n(r)&&(r=w.size!=null?w.size:30),n(i)&&(i=w.font!=null?w.font:"verdana"),n(h)&&(h=w.startAngle!=null?w.startAngle:null),n(g)&&(g=w.totalAngle!=null?w.totalAngle:360),n(_)&&(_=w.angles!=null?w.angles:null),n(P)&&(P=w.flip!=null?w.flip:!0),n(C)&&(C=w.shiftRadial!=null?w.shiftRadial:0),n(T)&&(T=w.icons!=null?w.icons:null),n(N)&&(N=w.rollIcons!=null?w.rollIcons:null),n(O)&&(O=w.rotateIcons!=null?w.rotateIcons:!1),n(S)&&(S=w.iconsShiftRadial!=null?w.iconsShiftRadial:0),n(o)&&(o=w.height!=null?w.height:60),n(l)&&(l=w.coreRadius!=null?w.coreRadius:100),n(f)&&(f=w.coreColor!=null?w.coreColor:e.dark),n(A)&&(A=w.backdropColor!=null?w.backdropColor:e.clear),n(k)&&(k=w.backgroundColor!=null?w.backgroundColor:e.granite),n(x)&&(x=w.rollBackgroundColor!=null?w.rollBackgroundColor:e.tin),n(E)&&(E=w.selectedBackgroundColor!=null?w.selectedBackgroundColor:e.charcoal),n(L)&&(L=w.selectedRollBackgroundColor!=null?w.selectedRollBackgroundColor:E),n(b)&&(b=w.color!=null?w.color:e.white),n(F)&&(F=w.rollColor!=null?w.rollColor:b),n(q)&&(q=w.selectedColor!=null?w.selectedColor:b),n(V)&&(V=w.selectedRollColor!=null?w.selectedRollColor:F),n(I)&&(I=w.borderColor!=null?w.borderColor:e.dark),n(ne)&&(ne=w.borderWidth!=null?w.borderWidth:2),n(U)&&(U=w.gapAsAngle!=null?w.gapAsAngle:!1),n(Q)&&(Q=w.gap!=null?w.gap:U?3:6),n(R)&&(R=w.gradient!=null?w.gradient:null),R===!0&&(R=.1),n(ee)&&(ee=w.spacing!=null?w.spacing:6),n(ae)&&(ae=w.spacingInner!=null?w.spacingInner:ee),n(ie)&&(ie=w.spacingOuter!=null?w.spacingOuter:ee),n(ce)&&(ce=w.currentEnabled!=null?w.currentEnabled:!1),n(j)&&(j=w.currentSelected!=null?w.currentSelected:!0);var Y=this,Ee=this.innerRadius=l+ae,X=this.outerRadius=Ee+o;this.setBounds(-X,-X,X*2,X*2);var Z=this.backdrop=new e.Circle(X+ie,A).center(this);if(l>0&&(this.core=new e.Circle(l,f).center(this)),_&&_.length<t.length-1)return Et&&ht("Radial() - not enough angles provided"),this;if(t&&t.length>0||T&&T.length>0){var pe;if(t&&t.length>0&&(pe=t.length),T&&T.length>0&&(pe>0?pe=Math.min(T.length,pe):pe=T.length),N&&N.length<pe)for(var ve=0;ve<pe-N.length;ve++)N.push(new e.Circle(1,e.clear));var $=Z.width,ue=this.buttons=new e.Container(-$/2,-$/2,$,$).centerReg(this),xe=Q;U||(Q=Q/X*180/Math.PI,xe=xe/Ee*180/Math.PI);for(var Ye=(g-Q*pe+(g==360?0:Q))/pe,se=h||0,be=0;be<pe;be++){_&&(Ye=_[be]);var te=new e.Shape(-$/2,-$/2,$,$).centerReg(ue);te.num=be,te.zimSelected=!1,te.angle=Ye;var _e=te.graphics;te.backgroundColor=e.Pick.choose(k),te.rollBackgroundColor=e.Pick.choose(x),te.selectedBackgroundColor=e.Pick.choose(E),te.selectedRollBackgroundColor=e.Pick.choose(L),te.color=e.Pick.choose(b),te.rollColor=e.Pick.choose(F),te.selectedColor=e.Pick.choose(q),te.selectedRollColor=e.Pick.choose(V),te.colorCommand=_e.f(te.backgroundColor).command,(n(ne)||ne>0)&&(!n(I)||!n(ne))&&(n(I)&&(I=e.black),te.borderColorCommand=_e.s(I).command,te.borderWidthCommand=_e.ss(ne).command);var J=(se-90-Ye/2)*Math.PI/180,ye=(se-90+Ye/2)*Math.PI/180,Re=(se-90+(Ye+Q-xe)/2)*Math.PI/180,de=(se-90-(Ye+Q-xe)/2)*Math.PI/180;if(_e.arc(0,0,X,J,ye,!1),_e.arc(0,0,Ee,Re,de,!0).cp(),R&&(_e.s().ss().rf(["rgba(0,0,0,"+R+")","rgba(255,255,255,"+R+")"],[0,1],0,0,Ee,0,0,X),_e.arc(0,0,X,J,ye,!1),_e.arc(0,0,Ee,Re,de,!0).cp()),te.cur("pointer"),te.zimOverEvent=te.on("mouseover",function(Ne){var ge=Ne.target;ge.colorCommand.style=ge==Y.selected&&j?ge.selectedRollBackgroundColor:ge.rollBackgroundColor,ge.label&&(ge.label.color=ge==Y.selected&&j?ge.selectedRollColor:ge.rollColor),N&&(ge.holder.removeAllChildren(),N[ge.num].loc(1,0,ge.holder)),Y.stage&&Y.stage.update()}),te.zimOutEvent=te.on("mouseout",function(Ne){var ge=Ne.target;ge.colorCommand.style=ge==Y.selected&&j?ge.selectedBackgroundColor:ge.backgroundColor,ge.label&&(ge.label.color=ge==Y.selected&&j?ge.selectedColor:ge.color),N&&(ge.holder.removeAllChildren(),T&&T[ge.num].loc(1,0,ge.holder)),Y.stage&&Y.stage.update()}),te.zimDownEvent=te.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Ne){var ge=Ne.target,Ue=ge!==Y.selected;Y.lastSelected=Y.selected,me=ge.num,j?Ue?(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),Y.selected=ge,Y.label=ge.label,Y.label&&(Y.text=Y.label.text),Y.icon=ge.icon,ge.colorCommand.style=ge.selectedRollBackgroundColor,ge.label&&(ge.label.color=ge.selectedRollColor)):ce||(me=-1,Y.selected=null,Y.label=null,Y.text=null,Y.icon=null,ge.colorCommand.style=ge.rollBackgroundColor,ge.label&&(ge.label.color=ge.rollColor)):(Y.selected=ge,Y.label=ge.label,Y.label&&(Y.text=Y.label.text),Y.icon=ge.icon),Y.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Y.stage&&Y.stage.update()}),T&&T.length>0){var Me=Ee+o/2+S,Be=te.holder=new e.Container(3,Me).addTo(this).reg(1,Me).rot(se);Be.mouseChildren=!1,Be.mouseEnabled=!1,te.icon=T[be],T[be].loc(1,0,Be),O||(T[be].rotation=-se)}if(t&&t.length>0){var he;if(t[be].type!="LabelOnArc"){var Ae=t[be].type=="Label"?t[be]:new e.Label({text:t[be],size:r,font:i,color:b,style:y,inherit:d});he=new e.LabelOnArc({label:Ae,color:b,size:r,spacing:-5,flip:P&&se>90&&se<270,radius:Ee+(o-Ae.height)/2+2+C,style:y,inherit:d})}else he=t[be];t[be]=he,te.label=he,he.center(this).rot(se),he.mouseChildren=!1,he.mouseEnabled=!1}if(be!=t.length-1){var Ce=_?_[be+1]:Ye;se+=(Ye+Ce)/2+Q}}n(h)||(Y.rotation+=Y.buttons.getChildAt(0).angle/2)}var me=null;Object.defineProperty(this,"selectedIndex",{get:function(){return me},set:function(Ne){var ge;Y.buttons&&(ge=Y.buttons.getChildAt(Ne)),ge!==Y.selected&&(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),Y.selected=ge,ge&&(j&&(ge.colorCommand.style=ge.selectedRollBackgroundColor),ge.label&&(j&&(ge.label.color=ge.selectedColor),Y.text=ge.label.text))),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&Y.stage&&Y.stage.update()}}),n(G)&&(G=w.selectedIndex!=null?w.selectedIndex:0),Y.selectedIndex=G,y!==!1&&e.styleTransforms(this,w),this.clone=function(){return Y.cloneProps(new e.Radial(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,this.group,d))}},e.extend(e.Radial,e.Container,"clone","zimContainer",!1),e.RadialMenu=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d){var D="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",K=D.split(", "),w=!1;if(t&&t.constructor==={}.constructor){for(var Y in t)if(K.indexOf(Y)>=0){w=!0;break}}if(t&&w){var Ee;if(Ee=mt(e.RadialMenu,arguments,D,this))return Ee}qe("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=p;var X=y===!1?{}:e.getStyle(this.type,this.group,d);n(t)&&(t=X.menu!=null?X.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),n(r)&&(r=X.size!=null?X.size:30),n(i)&&(i=X.font!=null?X.font:"verdana"),n(_)&&(_=X.startAngle!=null?X.startAngle:null),n(P)&&(P=X.totalAngle!=null?X.totalAngle:360),n(C)&&(C=X.flip!=null?X.flip:!0),n(N)&&(N=X.rotateIcons!=null?X.rotateIcons:!1),n(T)&&(T=X.shiftRadial!=null?X.shiftRadial:0),n(O)&&(O=X.iconsShiftRadial!=null?X.iconsShiftRadial:0),n(o)&&(o=X.height!=null?X.height:60),n(l)&&(l=X.coreRadius!=null?X.coreRadius:100),n(f)&&(f=X.coreColor!=null?X.coreColor:e.dark),n(h)&&(h=X.title!=null?X.title:"MENU"),n(g)&&(g=X.titleIcon!=null?X.titleIcon:null),n(L)&&(L=X.backdropColor!=null?X.backdropColor:e.clear),n(S)&&(S=X.backgroundColor!=null?X.backgroundColor:e.granite),n(k)&&(k=X.rollBackgroundColor!=null?X.rollBackgroundColor:e.tin),n(x)&&(x=X.selectedBackgroundColor!=null?X.selectedBackgroundColor:e.charcoal),n(E)&&(E=X.selectedRollBackgroundColor!=null?X.selectedRollBackgroundColor:x),n(A)&&(A=X.color!=null?X.color:e.white),n(b)&&(b=X.rollColor!=null?X.rollColor:A),n(F)&&(F=X.selectedColor!=null?X.selectedColor:A),n(q)&&(q=X.selectedRollColor!=null?X.selectedRollColor:b),n(V)&&(V=X.borderColor!=null?X.borderColor:e.dark),n(I)&&(I=X.borderWidth!=null?X.borderWidth:2),n(Q)&&(Q=X.gapAsAngle!=null?X.gapAsAngle:!1),n(R)&&(R=X.gap!=null?X.gap:Q?3:6),n(U)&&(U=X.spacing!=null?X.spacing:6),n(ne)&&(ne=X.gradient!=null?X.gradient:null),ne===!0&&(ne=.1),n(ee)&&(ee=X.spacingInner!=null?X.spacingInner:U),n(ae)&&(ae=X.spacingOuter!=null?X.spacingOuter:U),n(ie)&&(ie=X.currentEnabled!=null?X.currentEnabled:!1),n(ce)&&(ce=X.currentSelected!=null?X.currentSelected:!0),n(j)&&(j=X.open!=null?X.open:!1),n(G)&&(G=X.under!=null?X.under:!0);var Z=this,pe=(Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",ve=null,$=this.core=new e.Circle({radius:l,color:f,style:y,inherit:d}).addTo(this);g&&(this.titleIcon=g.center($)),h&&(this.title=new e.Label({text:h,size:r,font:i,color:A,style:y,inherit:d}).center($)),$.cur("pointer"),$.on(pe,function(){Z.leafNode=!1,se.length==0?be():(e.loop(se,function(_e){_e.selectedIndex=-1,_e.removeFrom(),se=[]}),Z.outerLevel=0,Z.selected=Z.outerMenu=Z.selectedMenu=Z.text=null),(ie||Z.selected!=ve)&&Z.dispatchEvent("change"),ve=Z.selected,Z.stage&&Z.stage.update()}),this.closeRings=function(_e){n(_e)&&(_e=Z.outerLevel);var J=Z.outerLevel-_e;e.loop(se,function(ye,Re){Re>J-1&&(ye.removeFrom(),ye.selectedIndex=-1,se.pop())},!0),Z.outerLevel=J,Z.outerMenu=se[se.length-1],Z.outerMenu&&(Z.outerMenu.selectedIndex=-1),Z.selected=Z.selectedMenu=Z.text=null,se[se.length-2]?(Z.selectedMenu=se[se.length-2],Z.selectedIndex=Z.selectedMenu.selectedIndex):Z.selectedIndex=-1,Z.selected!=ve&&Z.dispatchEvent("change"),ve=Z.selected,Z.stage&&Z.stage.update()};var ue={},xe,Ye;Z.outerLevel=0,t.constructor=={}.constructor&&(t={core:t},xe=Z.tree=new e.Hierarchy(t),Ye=xe.getLinearIDs()),Z.lastRadial=null;var se=this.radials=[];j&&be();function be(_e){var J,ye;_e?J=_e.ringLevel:(J=0,ye=l),e.loop(se,function(Me,Be){Be>J-1&&(Me.removeFrom(),Me.selectedIndex=-1,se.pop())},!0);var Re;if(_e&&(Re=_e.selected),Re){var de=Re.id;ye=_e.outerRadius,te(de,J+1,ye)}else _e||te("id0",J+1,ye);Z.selected=Re,Z.selected?(Z.selectedMenu=se[Z.selected.menu.ringLevel-1],Z.selectedIndex=Z.selected.num,Z.selected.label?Z.text=Z.selected.label.text:Z.text=null):ie&&_e?(Z.selectedIndex=_e.selectedIndex,Z.label=_e.label,Z.text=_e.text,Z.icon=_e.icon,Z.selectedMenu=_e):(Z.text=null,Z.selectedIndex=-1,Z.selectedMenu=null),Z.stage&&Z.stage.update()}function te(_e,J,ye){J&&(Z.outerLevel=J);var Re;if(!ue[_e]){var de=xe.getData(_e),Me=de.list;if(Me&&!e.isEmpty(Me)){var Be={labels:xe.getLinearList(Me),coreRadius:ye,size:r,font:i,startAngle:_,totalAngle:P,flip:C,rotateIcons:N,shiftRadial:T,iconsShiftRadial:O,height:o,coreColor:e.clear,backdropColor:L,backgroundColor:S,rollBackgroundColor:k,selectedBackgroundColor:x,selectedRollBackgroundColor:E,color:A,rollColor:b,selectedColor:F,selectedRollColor:q,borderColor:V,borderWidth:I,gapAsAngle:Q,gap:R,gradient:ne,spacingInner:ee,spacingOuter:ae,currentSelected:ce,currentEnabled:ie,style:y,inherit:d};de.styles&&(Be=e.merge(Be,de.styles)),Re=ue[_e]=new e.Radial(Be),Ye=xe.getLinearIDs(Me),Re.buttons.loop(function(he,Ae){he.menu=Re,he.id=Ye[Ae]}),Re.ringLevel=Z.outerLevel,Re.selectedIndex=-1,Re.on("change",function(he){Z.leafNode=!1,be(he.target),(ie||Z.selected!=ve)&&Z.dispatchEvent("change"),ve=Z.selected})}}ue[_e]?(se.push(ue[_e]),ue[_e].center(Z),G&&ue[_e].bot()):(Z.leafNode=!0,Z.outerLevel-=1),Z.outerMenu=Re}y!==!1&&e.styleTransforms(this,X),this.clone=function(){return Z.cloneProps(new e.RadialMenu(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,this.group,d))}},e.extend(e.RadialMenu,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U){var ee="width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, style, group, inherit",ae;if(ae=mt(e.ColorPicker,arguments,ee,this))return ae;qe("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=Q;var ie=R===!1?{}:e.getStyle(this.type,this.group,U),ce;n(t)&&(t=ie.width!=null?ie.width:500),n(r)&&(r=ie.colors!=null?ie.colors:"spectrum"),r=="legacy"&&(ce=!0),n(i)&&(i=ie.cols!=null?ie.cols:10),n(o)&&(o=ie.spacing!=null?ie.spacing:2);var j=!ce&&r.length>0&&r.length<=i;r=="spectrum"&&(i=10,o=2,j=!1),n(f)&&(f=ie.alphaPicker!=null?ie.alphaPicker:!j),n(I)&&(I=ie.tolerancePicker!=null?ie.tolerancePicker:!1),I&&(f=!1),n(l)&&(l=ie.greyPicker!=null?ie.greyPicker:!j),n(_)&&(_=ie.shadowColor!=null?ie.shadowColor:"rgba(0,0,0,.3)"),n(P)&&(P=ie.shadowBlur!=null?ie.shadowBlur:14),n(C)&&(C=ie.buttonBar!=null?ie.buttonBar:!j),n(g)&&(C||r=="spectrum"?g=ie.draggable!=null?ie.draggable:!0:g=ie.draggable!=null?ie.draggable:!1),n(T)&&(T=ie.circles!=null?ie.circles:!1),n(N)&&(N=ie.indicator!=null?ie.indicator:!1,C||(N=ie.indicator!=null?ie.indicator:!0)),n(O)&&(O=ie.backgroundColor!=null?ie.backgroundColor:e.black),n(h)&&(h=ie.startBackgroundColor!=null?ie.startBackgroundColor:null),n(S)&&(S=ie.keyArrows!=null?ie.keyArrows:!0),n(L)&&(L=ie.dropperTarget!=null?ie.dropperTarget:!1),n(A)&&(A=ie.spectrumCollapse!=null?ie.spectrumCollapse:!0),n(b)&&(b=ie.spectrumMode!=null?ie.spectrumMode:!0),n(F)&&(F=ie.spectrumClose!=null?ie.spectrumClose:!0),n(q)&&(q=ie.spectrumOk!=null?ie.spectrumOk:!0),n(V)&&(V=ie.spectrumTitle!=null?ie.spectrumTitle:null),n(ne)&&(ne=ie.collapsed!=null?ie.collapsed:!1);var G=this;if(n(k))if(le.zdf)k=le.zdf.stage;else return;else if(k.getBounds){if(n(k.getStage))return}else return;G.container=k;var y="#e472c4",p="#50c4b7",d=1,D=1,K=new e.Shape;this.addChild(K),K.x+=o,K.y+=o,ce=!1;var w,Y,Ee=[],X,Z,pe,ve,$,ue=r=="spectrum";if(n(r)||r=="legacy"||r=="spectrum"){ce=!0;var xe=6,Ye=xe*xe*xe;xe=Math.ceil(Math.pow(Ye,1/2)),Y=(t-o)/18-o,$=Math.floor(Math.pow(xe*xe,1/3)),w=[];for(var se=0;se<6;se++)for(var be=0;be<6;be++)for(var te=0;te<6;te++)w.push("#"+Me(se*3)+Me(be*3)+Me(te*3));for(r=[],se=0;se<w.length;se++)X=Math.floor(se/6),Z=se%6,X>=6*3?$=1:$=0,pe=X-$*6*3,ve=Z+$*6,r[ve*18+pe]=w[se];i=18,Ee=[p,y]}else Y=(t-o)/i-o;var _e=Math.ceil(r.length/i),J=1,ye=String(r[r.length-1]);if(!n(h)){var Re=h.match(/rgba\((.*)\)/);Re&&(X=Re[1].split(","),J=X.pop(),h="rgb("+X.join(",")+")"),ye=String(h)}var de;ce&&(de=p);function Me(Pt){return Pt=Math.floor(Pt).toString(16),Pt+""+Pt}$=0;var Be=K.graphics,he,Ae,Ce=ie.borderColor!=null?ie.borderColor:null,me=ie.borderWidth!=null?ie.borderWidth:null;!n(Ce)&&n(me)&&(me=1),me&&n(Ce)&&(Ce=e.dark),me&&Be.s(Ce).ss(me);var Ne=r.length;for(ue&&(Ne=56),se=0;se<Ne;se++)X=se%i,Z=Math.floor(se/i),he=X*(Y+o),Ae=Z*(Y+o),T?Be.f(r[se]).dc(he+Y/2,Ae+Y/2,Y/2):Be.f(r[se]).r(he,Ae,Y,Y);var ge=Ae+Y+o;G.colors=r;var Ue=ge;if(l){for(se=0;se<16;se++)Ee.push("#"+Me(se)+Me(se)+Me(se));for(se=0;se<Ee.length;se++)X=Math.floor(se/i),Z=se%i,he=Z*(Y+o),Ae=X*(Y+o)+ge,T?Be.f(Ee[se]).dc(he+Y/2,Ae+Y/2,Y/2):Be.f(Ee[se]).r(he,Ae,Y,Y);ge=Ae+Y+o;var He=i,Oe=Math.ceil(Ee.length/i)}G.greys=Ee,N&&!ue&&(N=this.indicator=T?new e.Circle(Y/2*.5,null,null,null,null,null,null,null,!1):new e.Rectangle(Y*.5,Y*.5,null,null,null,null,null,null,null,!1),N.alpha=.5,N.centerReg(),this.addChild(N),N.mouseEnabled=!1,fe(r.indexOf(ye)));function fe(Pt){if(n(Pt)||Pt<0){N.visible=!1;return}else N.visible=!0;ye=="#000"||ye=="#000000"||ye=="black"?(N.color="#222",N.alpha=1):(N.color="black",N.alpha=.5),N.x=K.x+Pt%i*(Y+o)+Y/2,N.y=K.x+Math.floor(Pt/i)*(Y+o)+Y/2}var Xe=10,Ze=ge;if(f||I){var Ke=new e.Container({style:!1});Ke.setBounds(0,0,600,70),this.addChild(Ke),Ke.x=0,Ke.y=ge;var ut=this.alphaBacking=new e.Rectangle(600-Xe*2,50,e.licorice,null,null,0,null,null,null,!1);Ke.addChild(ut),e.centerReg(ut,Ke);var gt=this.alphaBut=new e.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),We=this.alphaSlider=new e.Slider({min:0,max:1,step:I?0:.05,button:gt,barLength:I?500*.55:600*.55,barWidth:2,barColor:e.silver,vertical:!1,useTicks:!1,inside:!1,style:!1});We.currentValue=n(J)?1:J,I&&(We.currentValue=.1),Ke.addChild(We),We.x=40,We.y=Ke.height/2;var it=this.alphaText=new e.Label({text:I?"Tolerance: 0.1":"Alpha: "+e.decimals(J),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});Ke.addChild(it),it.x=We.x+We.bar.width+40,it.y=Ke.height/2-it.height/2,Ke.scaleX=Ke.scaleY=t/600,We.on("change",function(){it.text=I?"Tolerance: "+Qt(We.currentValue):"Alpha: "+Qt(We.currentValue),f&&Je&&(Je.alpha=D=We.currentValue),G.dispatchEvent("change"),G.stage&&G.stage.update()}),ge+=Ke.height-Xe,I&&(G.toleranceBacking=G.alphaBacking,G.toleranceBut=G.alphaBut,G.toleranceSlider=G.alphaSlider,G.alphaBacking=G.alphaBut=G.alphaSlider=null)}if(C){var ct=new e.Container({style:!1});ct.setBounds(0,0,600,100),this.addChild(ct),ct.x=0,ct.y=ge+Xe;var Pe=this.swatchText=new e.TextInput({align:"left",selectionAlpha:.5,text:ye.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(Pe.on("input",function(){(Pe.text.length==4||Pe.text.length==7)&&(Je.color=Pe.text,ye=Je.color,G.dispatchEvent("change"))}),ct.addChild(Pe),e.centerReg(Pe),Pe.x=200/2-10,Pe.y=50-2,g){var Fe=this.grip=new e.Shape({style:!1});Fe.cur("pointer"),ct.addChild(Fe),Fe.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),Fe.x=70,Fe.y=65,Pe.y=50-10,Fe.mouseEnabled=!1}var we=this.closeBut=new e.Button({width:90,height:90,label:"X",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});ct.addChild(we),we.x=600-we.width-Xe,we.y=0,we.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){G.hide(),G.dispatchEvent("close")});var je=this.okBut=new e.Button({width:150,height:90,label:"OK",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});ct.addChild(je),je.x=we.x-je.width-Xe,je.y=0,je.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){bt(),G.dispatchEvent("ok")});var st=this.swatchBacking=new e.Shape({style:!1});ct.addChild(st),Be=st.graphics,Be.f(e.black).r(.5,.5,50,89).f(e.granite).r(50,.5,50,89).f(e.white).r(100,.5,49.5,89),st.x=je.x-150-Xe,st.y=0;var Je=this.swatch=new e.Rectangle(150,90,ye,null,null,null,null,null,null,!1);ct.addChild(Je),Je.x=st.x,Je.y=0,Je.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){G.dispatchEvent("swatch")}),Je.cur("pointer"),Je.alpha=D=J,ct.scaleX=ct.scaleY=t/600,ge+=ct.height}else K.cur("pointer");!f&&!C&&(ge-=Xe-o);var tt=ge+Xe;this.setBounds(0,0,t,tt);var Te=this.background=new e.Rectangle(t,tt,O,null,null,null,null,null,null,!1);this.addChildAt(Te,0),_!=-1&&P>0&&(Te.shadow=new ze.Shadow(_,8,8,P));var ft=le.zdf,et,Ve=!1;if(this.dropperTarget=L,ue){r="spectrum";var Le=30,Qe=20,$e=Ze-Le+1,nt=$e-Qe+1,pt=G.bar=new e.Rectangle(G.width,Le+1,e.black).addTo(G);V&&(G.title=new e.Label(V,18,null,e.light).pos(12,1,LEFT,CENTER,G.bar).noMouse()),g&&pt.cur();var De=new e.Container(G.width,$e).loc(0,Le,G),at=new e.Rectangle(G.width,nt,new e.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,3/6,4/6,5/6,6/6],0,0,500,0)).addTo(De).mov(0,Qe-1);new e.Rectangle(G.width,nt/2,new e.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,nt/2)).loc(at,null,De),new e.Rectangle(G.width,nt/2+.5,new e.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,nt/2+.5)).loc(at,null,De).mov(0,nt/2),new e.Rectangle(G.width,20,new e.GradientColor(["black","white"],[.1,.9],0,0,G.width,0)).addTo(De);var yt=G.gradient=new e.Bitmap(De).loc(De,null,G).cur("none"),rt=G.pixels=new e.Pixel(De,.5).loc(De,null,G).vis(!1).cur("none");De.dispose();var Tt;!C&&F&&(Tt=G.closeIcon=new e.Shape(-40,-40,80,80,null,!1),Tt.graphics.f(e.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),Tt.sca(.25).expand(10,10,10,1).pos(7,0,e.RIGHT,e.CENTER,pt).cur().addTo(G),Tt.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){G.hide(),G.dispatchEvent("close")}));var xt=G.collapseIcon=new e.Triangle(20,20,20,e.faint,e.light,2).expand(10,10,10,1).pos(40+(Tt?30:0),0,e.RIGHT,e.CENTER,pt).cur().addTo(G);xt.on("mousedown",function(){G.collapse(xt.rotation==0)});var Ct=new e.Rectangle(20,20,e.white).reg("center");new e.Tile(new e.Rectangle(10,10,e.series(e.silver,e.white,e.white,e.silver)),2,2,0,0).addTo(Ct),Ct.mouseChildren=!1;var lt=G.modeIcon=new e.Button({width:20,height:20,shadowColor:-1,label:"",backing:Ct,toggleEvent:"mousedown",toggleBacking:new e.Rectangle(20,20,new e.GradientColor([e.white,e.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(Tt?30:0),5,e.RIGHT,e.TOP,G).expand(10,10,10,1);lt.on("mousedown",function(){rt.vis(lt.toggled),G.spectrumToggled=!lt.toggled,ft.stage.update()}),b||(lt.removeFrom(),xt.mov(28)),A||xt.removeFrom(),q||G.okBut&&G.okBut.removeFrom(),!F&&we&&we.removeFrom();var Dt=new e.Rectangle(G.width,G.height-$e-Le,e.faint).pos(0,0,e.LEFT,e.BOTTOM,G).noMouse(),Mt=this.dropper=new e.Circle(10,e.clear,e.white,8);new e.Circle(5,e.clear,e.black,2).center(Mt),new e.Circle(7,e.clear,e.white,2).center(Mt),Mt.noMouse()}this.updateDropperTarget=function(){Mt.vis(!1),Ot(),Mt.vis(!0).top()},this.spectrumToggled=ue,this.toggleSpectrum=function(Pt){Pt!=G.spectrumToggled&&(n(Pt)&&(Pt=!G.spectrumToggled),G.spectrumToggled=Pt,lt.toggle(!Pt),rt.vis(!Pt),G.updateDropperTarget())};var St=!1;function Ft(){ft.stage.mouseInBounds?Mt.alp(1):Mt.alp(0),Mt.loc(ft.mouseX,ft.mouseY,ft.stage),St=G.spectrumToggled?yt.hitTestReg(Mt):rt.hitTestReg(Mt);var Pt;G.dropperTarget?Pt=Mt.x>=et.x&&Mt.x<=et.x+et.width&&Mt.y>=et.y&&Mt.y<=et.y+et.height:Pt=!1;var Wt;if(G.dropperTarget?Wt=(St||Pt)&&!Dt.hitTestReg(Mt)&&!pt.hitTestReg(Mt):Wt=St,!Ve&&Wt)Yt(Pt);else if(Ve&&!Wt){$t(),ft.stage.update();return}if(Wt){var xn;if(St)xn=G.spectrumToggled?yt:rt;else if(G.dropperTarget)xn=et;else return;var zt=xn.globalToLocal(ft.mouseX,ft.mouseY),ln=xn.getColorAt(zt.x,zt.y,!0),Fn="rgba("+ln[0]+","+ln[1]+","+ln[2]+","+ln[3]+")";ln[3]<.05&&(Fn=ft.color),Mt.borderColor=Fn,ft.stage.update()}}function Yt(Pt){Ve=!0,Pt&&Ot(),Mt.vis(!0).top()}function $t(){Ve=!1,et.dispose(),Mt.vis(!1)}this.collapsed=!1,this.collapse=function(Pt){n(Pt)&&(Pt=!0),Pt!=G.collapsed&&(G.collapsed=Pt,Pt?(lt.enabled=!1,xt.rot(180),G.background.vis(!1),yt.vis(!1),Dt.vis(!1),K.visible=!1,rt&&rt.vis(!1),Ke&&Ke.vis(!1),C&&ct.vis(!1),Ve=!1,nn(),Zt(),G.dispatchEvent("collapsed")):(lt.enabled=!0,xt.rot(0),G.background.vis(!0),yt.vis(!0),Dt.vis(!0),K.visible=!0,G.spectrumToggled||rt.vis(!0),Ke&&Ke.vis(!0),C&&ct.vis(!0),Ve=!0,sn(),Ot(),pt.hitTestReg(Mt)&&Zt(),G.dispatchEvent("expanded")),ft.stage.update())},ue&&A&&(G.collapseEvent=pt.on("dblclick",function(){G.collapsed?G.collapse(!1):G.collapse(!0)})),ue&&ne&&A&&(G.vis(!1),setTimeout(function(){G.collapse(!0),G.vis(!0),G.stage&&G.stage.update()},50));function sn(){nn(),G.dropperDown=ft.stage.on("stagemousedown",Ft),G.dropperMove=ft.stage.on("stagemousemove",Ft),G.dropperUp=ft.stage.on("stagemouseup",function(){Ft(),Je&&ue&&St&&Je.color!=Mt.borderColor&&ot()})}function nn(){G.dropperDown&&ft.stage.off("stagemousedown",G.dropperDown),G.dropperMove&&ft.stage.off("stagemousemove",G.dropperMove),G.dropperUp&&ft.stage.off("stagemouseup",G.dropperUp)}function Ot(){et&&et.dispose&&et.dispose();var Pt=new e.Rectangle(ft.width,ft.height,ft.color).addTo(ft.stage,0),Wt;G.dropperTarget&&G.dropperTarget.getBounds&&G.dropperTarget.type&&!G.dropperTarget.type.includes("Stage")?Wt=G.dropperTarget.boundsToGlobal():Wt=ft.stage.getBounds(),et=new e.Bitmap(ft.stage,Wt.width,Wt.height,Wt.x,Wt.y).loc(Wt).cur("none"),Pt.dispose(),et.on("mousedown",ot)}function Zt(){et&&et.dispose&&et.dispose(),Mt.vis(!1)}function ot(){Mt.vis(!1),G.currentValue=e.convertColor(Mt.borderColor,"hex"),G.dispatchEvent("change"),Ve&&(L?(Ot(),Mt.vis(!0).top(),setTimeout(function(){G.updateDropperTarget(),ft.stage.update()},50)):(Mt.vis(!0).top(),ft.stage.update()))}function bt(){if(ce&&l){p=y,y=de;var Pt=[p,y];for(se=0;se<2;se++){var Wt=K.graphics;X=Math.floor(se/i),Z=se%i,he=Z*(Y+o),Ae=X*(Y+o)+Ue,Ee[se]=Pt[se],Wt.f(Te.color).r(he-1,Ae-1,Y+2,Y+2).f(Pt[se]).r(he,Ae,Y,Y)}}de=ye,d=D,G.dispatchEvent("change"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&G.stage&&G.stage.update()}if(g){var Rt,Ut;Te.on("mousedown",Gt),Te.on("pressmove",wt),Te.on("pressup",Bt),ue&&(pt.on("mousedown",Gt),pt.on("pressmove",wt),pt.on("pressup",Bt))}function Gt(Pt){Rt=Pt.stageX/e.scaX-G.x,Ut=Pt.stageY/e.scaY-G.y}function wt(Pt){G.x=Pt.stageX/e.scaX-Rt,G.y=Pt.stageY/e.scaY-Ut,G.stage&&G.stage.update()}function Bt(){G.stage&&G.stage.update()}var Ht=i*(Y+o),Jt=_e*(Y+o);if(l)var cn=He*(Y+o),jt=Oe*(Y+o);K.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Pt){var Wt=e.hitTestGrid(K,Ht,Jt,i,_e,Pt.stageX,Pt.stageY,0,0,o,o);n(Wt)||(ye=r[Wt],C&&(Je.color=ye,Pe.text=String(r[Wt]).toUpperCase()),bt()),l&&(Wt=null,Wt=e.hitTestGrid(K,cn,jt,He,Oe,Pt.stageX,Pt.stageY,0,Jt,o,o),n(Wt)||(ye=Ee[Wt],C&&(Je.color=ye,Pe.text=Ee[Wt].toUpperCase()),bt())),N&&fe(r.indexOf(ye)),C?G.stage&&G.stage.update():N&&G.stage&&G.stage.update(),en()}),Object.defineProperty(this,"selectedColor",{get:function(){return ye},set:function(Pt){Pt=Pt.toLowerCase(),de=ye=Pt,C&&(Je.color=ye,Pe.text=ye,G.stage&&G.stage.update()),N&&!ue&&fe(r.indexOf(ye)),en()}}),Object.defineProperty(this,"currentValue",{get:function(){return ye},set:function(Pt){G.selectedColor=Pt}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return ye},set:function(Pt){Pt!=G.selectedColor&&(G.selectedColor=Pt,G.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ue?null:r.indexOf(ye)},set:function(Pt){ue||(de=ye=r[Pt],C&&(Je.color=ye,Pe.text=ye,G.stage&&G.stage.update()),N&&fe(r.indexOf(ye)),en())}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return f?Qt(We.currentValue):1},set:function(Pt){f&&(d=We.currentValue=Pt,Je&&(Je.alpha=d),it&&(it.text="Alpha: "+Qt(We.currentValue)),G.stage&&G.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return I?Qt(We.currentValue):1},set:function(Pt){I&&(We.currentValue=Pt,G.stage&&G.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return ue?"spectrum":l?r.concat(Ee):r},set:function(){Et&&ht("ColorPicker() colors is read only - make a new ColorPicker to change")}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==G},set:function(){Lt?e.KEYFOCUS=G:le.KEYFOCUS=G}}),S&&e.KEYFOCUS&&an(),this.on("mousedown",function(){S&&an()});function an(){G.keyFocus=!0;var Pt=document.activeElement;Pt&&Pt.blur()}function en(){G.zimAccessibility&&G.zimAccessibility.changeTitle(G,null,!0)}this.keyDownEvent=function(Pt){if(G.stage&&!ue&&(G.zimAccessibility&&G.focus||!G.zimAccessibility&&G.keyFocus)){var Wt=G.selectedIndex;Pt.keyCode==37||Pt.keyCode==40?(Wt--,yn(Wt)):(Pt.keyCode==38||Pt.keyCode==39)&&(Wt++,yn(Wt))}};function yn(Pt){Pt<0&&(Pt=G.colors.length-1),Pt>G.colors.length-1&&(Pt=0),G.selectedIndex=Pt,G.dispatchEvent("change"),G.stage&&G.stage.update()}le.addEventListener("keydown",this.keyDownEvent);var kt,ft;this.hide=function(){return kt=G.stage,G.removeFrom(),kt&&kt.update(),G},this.on("removed",It);function It(){if(ue&&(Ve=!1,nn(),Zt()),G.toggled=!1,G.zimAccessibility){var Pt=G.zimAccessibility;Pt.resize(G),qt?qt.focus():G.zimTabTag.nextSibling.focus(),setTimeout(function(){Pt.talk("ColorPicker has been closed.")},50)}kt&&kt.update()}var qt,Xt=!1;this.show=function(){return G.center(G.container),G};function rn(){if(G.stage&&(kt=G.stage,ft=kt.frame),G.zimAccessibility){var Pt=G.zimAccessibility;setTimeout(function(){Pt.activatedObject&&(qt=Pt.activatedObject.zimTabTag)},50),Pt.resize(G),Pt.tabIndex=G.zimTabIndex}G.toggled=!0,setTimeout(function(){ue&&(Ve=!0,Ot(),sn(),Yt(),Ft()),G.stage&&G.stage.update()},20)}this.on("added",rn),this.toggle=function(Pt){return Pt===!0?G.show():Pt===!1||G.container.contains(G)?G.hide():G.show(),G};function Qt(Pt){return Math.round(Pt*Math.pow(10,2))/Math.pow(10,2)}n(x)&&(x=ie.selectedIndex!=null?ie.selectedIndex:0),G.selectedIndex=x,n(E)&&(E=ie.selectedColor!=null?ie.selectedColor:null),E!=null?G.selectedColor=E:ue&&(G.selectedColor="#888888"),R!==!1&&e.styleTransforms(this,ie),this.clone=function(){return G.cloneProps(new e.ColorPicker(t,ce?null:r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,this.group,U))},this.dispose=function(Pt,Wt,xn){return le.removeEventListener("keydown",G.keyDownEvent),ue&&(nn(),G.gradient.cur("default"),G.pixels.cur("default"),L&&L.cur("default"),et.cur("default"),Ve=!1,Zt()),We&&We.dispose(),Mt&&Mt.dispose(),G.dropperDown&&ft.stage.off("stagemousedown",G.dropperDown),G.dropperMove&&ft.stage.off("stagemousemove",G.dropperMove),G.dropperUp&&ft.stage.off("stagemouseup",G.dropperUp),xn||this.zimContainer_dispose(!0),!0}},e.extend(e.ColorPicker,e.Container,["clone","dispose"],"zimContainer",!1),e.EmojiPicker=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L){var A="width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",b;if(b=mt(e.EmojiPicker,arguments,A,this))return b;qe("67.05"),this.group=E;var F=x===!1?{}:e.getStyle("EmojiPicker",this.group,L);n(t)&&(t=F.width!=null?F.width:400),n(r)&&(r=F.height!=null?F.height:600),n(o)&&(o=F.monochrome!=null?F.monochrome:!1),n(l)&&(l=F.backgroundColor!=null?F.backgroundColor:e.lighter),n(f)&&(f=F.titleBar!=null?F.titleBar:"Emojis"),n(h)&&(h=F.titleBarColor!=null?F.titleBarColor:null),n(g)&&(g=F.titleBarBackgroundColor!=null?F.titleBarBackgroundColor:e.silver.toAlpha(.8)),n(_)&&(_=F.titleBarHeight!=null?F.titleBarHeight:40),n(P)&&(P=F.cache!=null?F.cache:!!e.mobile()),n(C)&&(C=F.size!=null?F.size:30),n(S)&&(S=F.colSize!=null?F.colSize:C+15),n(k)&&(k=F.rowSize!=null?F.rowSize:C+14),n(T)&&(T=F.collapse!=null?F.collapse:!1),n(N)&&(N=F.collapseColor!=null?F.collapseColor:n(h)?e.grey:h),n(O)&&(O=F.collapsed!=null?F.collapsed:!1),this.zimWindow_constructor(t,r,null,l,null,F.borderWidth!=null?F.borderWidth:2,F.padding!=null?F.padding:10,F.corner!=null?F.corner:10,null,F.scrollBarActive!=null?F.scrollBarActive:!0,F.scrollBarDrag!=null?F.scrollBarDrag:!0,null,null,null,!1,null,null,null,null,null,!0,null,null,null,null,null,null,f,h,g,_,F.draggable!=null?F.draggable:!0,null,null,F.close!=null?F.close:!0,null,null,F.fullSize!=null?F.fullSize:!1,null,F.resizeHandle!=null?F.resizeHandle:!1,T,N,O,null,null,x,E,e.copy(F)),this.type="EmojiPicker";var q=this;this.emojiData=n(i)?["\u{1F4A5}","\u{1F335}","\u{1F382}","\u{1F370}","\u{1F429}","\u{1F525}","\u{1F32B}","\u{1F30A}","\u{1F34F}","\u{1F34E}","\u{1F34B}","\u{1F34C}","\u{1F347}","\u{1F351}","\u{1F345}","\u{1F346}","\u{1F9C0}","\u{1F355}","\u{1F36C}","\u{1F36D}","\u{1F369}","\u{1F37A}","\u{1F37B}","\u{1F378}","\u{1F37E}","\u2615\uFE0F","\u{1F4A9}","\u{1F47B}","\u{1F916}","\u{1F4A4}","\u{1F440}","\u{1F483}","\u{1F483}\u{1F3FB}","\u{1F483}\u{1F3FC}","\u{1F483}\u{1F3FD}","\u{1F483}\u{1F3FE}","\u{1F483}\u{1F3FF}","\u{1F454}","\u{1F457}","\u{1F459}","\u{1F458}","\u{1F460}","\u{1F452}","\u{1F3A9}","\u{1F431}","\u{1F43B}","\u{1F436}","\u{1F43C}","\u{1F42F}","\u{1F981}","\u{1F42E}","\u{1F437}","\u{1F419}","\u{1F435}","\u{1F412}","\u{1F414}","\u{1F426}","\u{1F434}","\u{1F984}","\u{1F41D}","\u{1F422}","\u{1F420}","\u{1F410}","\u{1F54A}","\u{1F415}","\u{1F408}","\u{1F409}","\u{1F432}","\u{1F384}","\u{1F340}","\u{1F33B}","\u{1F339}","\u{1F490}","\u{1F344}","\u2600\uFE0F","\u{1F327}","\u26BD\uFE0F","\u{1F3C0}","\u{1F3C8}","\u26BE\uFE0F","\u{1F3BE}","\u{1F3D2}","\u26F7","\u{1F3C4}","\u{1F3CA}","\u{1F6B4}","\u{1F3AD}","\u{1F3A8}","\u{1F3B7}","\u{1F3BA}","\u{1F3B8}","\u{1F3BB}","\u{1F3B0}","\u{1F3B3}","\u{1F697}","\u{1F695}","\u{1F68C}","\u{1F68E}","\u{1F691}","\u{1F692}","\u{1F69C}","\u{1F682}","\u2708\uFE0F","\u26F5\uFE0F","\u{1F6F0}","\u{1F301}","\u{1F30B}","\u{1F3DE}","\u{1F305}","\u{1F386}","\u{1F308}","\u{1F3E0}","\u{1F3E5}","\u{1F3EB}","\u231A\uFE0F","\u{1F4F1}","\u{1F5A5}","\u{1F4BE}","\u{1F4FC}","\u{1F3A5}","\u260E\uFE0F","\u{1F4FA}","\u{1F4FB}","\u{1F4E1}","\u{1F56F}","\u{1F4B0}","\u{1F48E}","\u{1F6AC}","\u26B0","\u{1F52E}","\u{1F488}","\u{1F6BD}","\u{1F511}","\u{1F6CF}","\u{1F389}","\u{1F38A}","\u2764\uFE0F","\u{1F921}","\u{1F600}","\u{1F62C}","\u{1F601}","\u{1F602}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F607}","\u{1F609}","\u{1F60A}","\u{1F642}","\u{1F643}","\u263A\uFE0F","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F911}","\u{1F913}","\u{1F60E}","\u{1F917}","\u{1F60F}","\u{1F636}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F644}","\u{1F914}","\u{1F633}","\u{1F61F}","\u{1F620}","\u{1F614}","\u{1F615}","\u{1F641}","\u2639\uFE0F","\u{1F623}","\u{1F62B}","\u{1F629}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F62F}","\u{1F626}","\u{1F622}","\u{1F62A}","\u{1F613}","\u{1F62D}","\u{1F635}","\u{1F632}","\u{1F910}","\u{1F637}","\u{1F912}","\u{1F915}","\u{1F634}","\u{1F480}","\u2620\uFE0F","\u{1F47D}","\u{1F63A}","\u{1F638}","\u{1F639}","\u{1F63B}","\u{1F63C}","\u{1F63D}","\u{1F640}","\u{1F63F}","\u{1F63E}","\u{1F444}","\u{1F48B}","\u{1F445}","\u{1F5E3}","\u{1F464}","\u{1F465}","\u{1F456}","\u{1F463}","\u{1F461}","\u{1F462}","\u{1F45E}","\u{1F45F}","\u{1F393}","\u{1F451}","\u{1F45C}","\u{1F45B}","\u{1F4BC}","\u{1F453}","\u{1F576}","\u{1F48D}","\u{1F302}","\u2744\uFE0F","\u{1F32A}","\u26A1\uFE0F","\u{1F951}","\u{1F98B}","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F427}","\u{1F577}","\u{1F982}","\u{1F980}","\u{1F40D}","\u{1F41B}","\u{1F40C}","\u{1F41E}","\u{1F41C}","\u{1F41F}","\u{1F421}","\u{1F42C}","\u{1F433}","\u{1F40B}","\u{1F40A}","\u{1F406}","\u{1F332}","\u{1F333}","\u{1F334}","\u{1F331}","\u{1F33F}","\u{1F343}","\u{1F342}","\u{1F341}","\u{1F33A}","\u{1F33C}","\u{1F338}","\u{1F330}","\u{1F383}","\u{1F41A}","\u{1F578}","\u{1F30E}","\u{1F30D}","\u{1F30F}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F31A}","\u{1F31D}","\u{1F31B}","\u{1F31C}","\u{1F31E}","\u{1F319}","\u2B50\uFE0F","\u{1F31F}","\u{1F4AB}","\u2728","\u2604\uFE0F","\u{1F354}","\u{1F373}","\u{1F35F}","\u{1F32D}","\u{1F35D}","\u{1F32E}","\u{1F32F}","\u{1F363}","\u{1F368}","\u{1F366}","\u{1F377}","\u{1F379}","\u{1F3C6}","\u{1F3AA}","\u{1F3B9}","\u{1F680}","\u26F2\uFE0F","\u{1F3A2}","\u26F0","\u{1F3D4}","\u{1F5FB}","\u{1F4AF}","\u{1F3B5}","\u{1F3B6}","\u{1F4AC}","\u{1F4AD}","\u{1F5EF}","\u{1F0CF}","\u{1F3F3}\uFE0F\u200D\u{1F308}","\u{1F953}","\u{1F943}","\u{1F3A4}","\u{1F6A8}","\u{1F3CD}","\u{1F3D5}","\u26FA\uFE0F","\u{1F3DC}","\u{1F3D6}","\u{1F3DD}","\u{1F307}","\u{1F306}","\u{1F3D9}","\u{1F303}","\u{1F3D8}","\u{1F3E1}","\u{1F3E2}","\u{1F528}","\u2699","\u{1F52B}","\u{1F4A3}","\u{1F52A}","\u{1F48A}","\u{1F573}","\u{1F489}","\u{1F6C1}","\u26F1","\u{1F381}","\u{1F388}","\u{1F380}","\u{1F4C5}","\u{1F5F3}","\u{1F4DA}","\u270F\uFE0F","\u26AA\uFE0F","\u26AB\uFE0F","\u2B1B\uFE0F","\u2B1C\uFE0F","\u{1F5BC}","\u{1F3DA}","\u{1F3ED}","\u{1F532}","\u{1F533}","\u{1F3B1}","\u{1F53A}","\u{1F53B}","\u{1F4A6}","\u26F3\uFE0F","\u{1F3DF}","\u{1F4A1}","\u{1F52D}","\u{1F52C}","\u{1F570}","\u{1F42A}","\u{1F42B}","\u{1F418}","\u{1F438}","\u{1F430}","\u{1F42D}","\u{1F6AA}","\u{1F6CD}","\u{1F441}","\u{1F353}","\u{1F352}","\u{1F336}","\u{1F33D}","\u{1F360}","\u{1F36F}","\u{1F35E}","\u{1F36B}","\u{1F37F}","\u{1F36A}","\u{1F34A}","\u{1F3F9}","\u{1F46F}","\u{1F46F}\u200D\u2642\uFE0F","\u{1F5D1}"]:i;var V=[];e.loop(this.emojiData,function(I){var ne=new e.Emoji(I,C,o);V.push(ne)}),this.wrapper=new e.Wrapper({items:V,width:t,alignInner:e.CENTER,valignInner:e.CENTER,wrapperType:"column",colSize:S,rowSize:k}).cur(),this.backdrop=new e.Rectangle(this.wrapper.width,this.wrapper.height,e.faint),e.timeout(.2,function(){q.scrollBar&&q.scrollBar.vertical&&q.scrollBar.vertical.getBounds()&&q.scrollBar.vertical.expand(),q.backdrop.heightOnly=q.wrapper.height,P&&q.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(I){q.currentEmoji=I.target,q.dispatchEvent("change")}),x!==!1&&e.styleTransforms(this,F),this.clone=function(){return q.cloneProps(new e.EmojiPicker(t,r,x,this.group,L))},this.dispose=function(){return!0}},e.extend(e.EmojiPicker,e.Window,["clone","dispose"],"zimWindow",!1),e.TextEditor=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G){var y="width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",p;if(p=mt(e.TextEditor,arguments,y,this))return p;qe("67.1"),this.group=j;var d=ce===!1?{}:e.getStyle("TextEditor",this.group,G);if(n(t)&&(t=d.width!=null?d.width:400),n(i)&&(i=d.backgroundColor!=null?d.backgroundColor:e.lighter),n(N)&&(N=d.titleBar!=null?d.titleBar:"Text Editor"),n(Q)&&(Q=d.draggable!=null?d.draggable:!0),n(k)&&(k=d.titleBarHeight!=null?d.titleBarHeight:30),n(o)&&(o=d.fieldColor!=null?d.fieldColor:i.darken(.05)),n(C)&&(C=d.live!=null?d.live:!0),n(x)&&(x=d.wrap!=null?d.wrap:!0),n(L)&&(L=d.scroll!=null?d.scroll:!0),n(V)&&(V=d.margin!=null?d.margin:10),n(E)&&(E=d.limit!=null?d.limit:null),n(N)&&(N=d.titleBar!=null?d.titleBar:null),n(h)&&(h=d.sizeList!=null?d.sizeList:null),n(_)&&(_=d.colorList!=null?d.colorList:null),n(g)&&(g=d.optionList!=null?d.optionList:null),n(P)&&(P=d.fontList!=null?d.fontList:null),n(o)&&(o=d.fieldColor!=null?d.fieldColor:null),n(l)&&(l=d.fieldHeight!=null?d.fieldHeight:null),n(f)&&(f=d.textSize!=null?d.textSize:null),n(ae)&&(ae=d.fontListHeight!=null?d.fontListHeight:100),n(ie)&&(ie=d.fontListViewNum!=null?d.fontListViewNum:3),typeof ee>"u")if(le.zdf)var ee=le.zdf;else{Et&&ht("zim.TextEditor - please provide a reference to zim Frame");return}this.zimPanel_constructor(t,300,null,N,O,S,k,i,F,q,I,!0,null,null,null,null,null,null,null,null,ne,R,Q,U,ce,j,G);var D=this;n(T)&&(T=new e.Button({width:50,height:50,label:"",icon:new e.Shape().sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:e.white,corner:10,backgroundColor:e.green.darken(.2),borderColor:e.white,borderWidth:2,rollBackgroundColor:e.green,shadowBlur:3}).pos(V,k+V*2,e.RIGHT,e.TOP,D)),D.button=T,T.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",K),n(l)&&(l=d.fieldHeight!=null?d.fieldHeight:T.height+V*2);function K(){C||(Y.text=w.text),D.hide(),D.dispatchEvent("set")}var w=D.textArea=new e.TextArea({color:r,backgroundColor:o,width:t-T.width-V*3,height:n(l)?T.height+V*2:l,expand:10,password:b,placeholder:A,frame:ee}).loc(V,k+V+(l&&l<T.height+V*2?(T.height-l)/2+V:0),null,null,!1);x||(w.tag.style.whiteSpace="nowrap"),E&&w.tag.setAttribute("maxLength",E),L&&(w.tag.style.overflowY="auto");var Y=new e.Label;D.on("pressmove",function(){w.resize()}),D.on("close",function(){D.inputEvent&&w.off("input",D.inputEvent),w.removeFrom()}),D.panelHeight=k+V+Math.max(l,T.height+V*2)+V;var Ee=e.mobile(),X=Ee?35:30;if(h||g||_){new e.Rectangle(t,X+V,"rgba(0,0,0,.05)").loc(0,D.panelHeight,D);var Z=[];if(_){var pe=Array.isArray(_),ve=D.colorPicker=new e.ColorPicker({colors:pe?_:null,cols:pe?Math.min(_.length,12):null,alphaPicker:!1,greyPicker:!pe,container:ee.stage});ve.on("close",be),ve.on("change",function(){Y.color=r.color=ve.selectedColor,D.dispatchEvent("update"),be()}),D.closeColorPicker=function(){be()},r=D.swatch=new e.Rectangle(X,X,Y.color,e.dark,1).cur(),r.on("mousedown",function(){D.dispatchEvent("color"),w.tag.style.display="none",ve.selectedColor=r.color,ve.show(),D.stage&&D.stage.update()}),Z.push(r)}if(g){g===!0&&(g=["bold","italic","align"]),n(le.STYLE)&&(le.STYLE={}),n(le.STYLE.group)&&(le.STYLE.group={}),le.STYLE.group.zimEditor={width:X,height:X,corner:0,borderColor:e.tin,shadowBlur:-1,backgroundColor:e.light,rollBackgroundColor:e.light,toggleBackgroundColor:e.green,toggleColor:e.grey};var $,ue,xe;e.loop(g,function(Re){if(Re.toLowerCase()=="bold")$=D.bold=new e.Button({label:new e.Label({text:"B",color:e.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"}),$.on("click",function(){Y.bold=$.toggled,D.dispatchEvent("update"),D.stage&&D.stage.update()}),Z.push($),Y.bold&&$.toggle();else if(Re.toLowerCase()=="italic")ue=D.italic=new e.Button({label:new e.Label({text:"I",color:e.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"}),ue.on("click",function(){Y.italic=ue.toggled,D.dispatchEvent("update"),D.stage&&D.stage.update()}),Z.push(ue),Y.italic&&ue.toggle();else if(Re.toLowerCase()=="align"){var de=new e.Tile(new e.Rectangle(X-10,X-10,e.grey).centerReg(),3,1,10,10),Me=Ee?["\u21DA","\u21D4","\u21DB"]:["\u21D0","\u21D4","\u21D2"];e.loop(3,function(he){var Ae=de.getChildAt(he);new e.Label(Me[he],X*2/3,null,e.white).center(Ae).expand(10)});var Be=0;Y.align=="right"?Be=2:(Y.align=="center"||Y.align=="middle")&&(Be=1),xe=D.align=new e.Selector({tile:de,corner:0,borderWidth:1,borderColor:e.grey,backgroundColor:e.clear,selectedIndex:Be}),xe.on("change",function(){xe.selectedIndex==0?Y.align="left":xe.selectedIndex==1&&(Y.align="center"),xe.selectedIndex==2&&(Y.align="right"),D.dispatchEvent("update"),D.stage&&D.stage.update()}),Z.push(xe)}}),delete le.STYLE.group.zimEditor}if(h){var Ye=D.sizePicker=new e.Stepper({list:h===!0?null:h,stepperType:h===!0?null:"list",min:h===!0?5:null,max:h===!0?500:null,width:150,shadowBlur:-1,borderColor:e.dark,borderWidth:2,corner:0,backgroundColor:e.green,downForward:!1}).siz(null,X);Ye.arrowPrev.expand(0),Ye.textBox.color=e.lighter,Ye.on("change",function(){Y.size=Ye.currentValue,D.dispatchEvent("update"),D.stage&&D.stage.update()}),Ye.currentValue=Y.size,Z.push(Ye)}var se=new e.Tile(Z,Z.length,1,10,10,!0).loc(V,D.panelHeight+V/2,D);D.panelHeight=D.panelHeight+V+se.height+V}function be(){w.tag.style.display="block",ve.hide(),D.stage&&D.stage.update()}var te;if(P){Array.isArray(P)?te=P:(te=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],Ee||(te=te.concat(["Comic Sans MS","Impact"])),te.sort());var _e=D.fonts=new e.List({width:t-V*2,height:ae,viewNum:ie,backgroundColor:e.moon,color:e.grey,rollColor:e.dark,rollBackgroundColor:e.green.lighten(.5),selectedBackgroundColor:e.mist,selectedRollBackgroundColor:e.green.lighten(.6),selectedColor:e.dark,backdropColor:e.light,scrollBarColor:e.dark,shadowBlur:-1,list:te}).center(D).loc(null,D.panelHeight);_e.on("change",function(){Y.font=_e.currentValue,D.dispatchEvent("update"),D.stage&&D.stage.update()}),D.panelHeight=D.panelHeight+V+_e.height+V}D.show=function(Re,de,Me,Be){if(D.parent)return Re==D.label||(D.label=Re),D;Y=Re,w.addTo(D);var he;if(Y&&Y.stage)he=Y.stage;else if(Be)he=Be.stage;else if(le.zdf)he=le.zdf.stage;else return D;return!n(de)||!n(Me)?D.loc(de,Me):Y&&Y.y>he.height/2?D.loc(he.width/2-t/2,Y.y-D.panelHeight-he.height*.05,he):Y&&Y.y<=he.height/2?D.loc(he.width/2-t/2,Y.y+Y.height+he.height*.05,he):D.center(he),D.y<20&&(D.y=20),D.y+D.height>D.stage.height&&(D.y=D.stage.height-D.height-20),J(),D.stage.update(),D};function J(){Y&&(w.text=Y.text),r&&(r.color=Y.color),$&&$.toggle(Y.bold==!0),ue&&ue.toggle(Y.italic==!0),xe&&(xe.noAnimate=!0,Y.align=="center"?xe.selectedIndex=1:Y.align=="right"?xe.selectedIndex=2:xe.selectedIndex=0),Ye&&(Ye.currentValue=Y.size),_e&&(_e.currentValue=Y.font),D.inputEvent&&w.off("input",D.inputEvent),D.inputEvent=w.on("input",function(){C&&Y&&(Y.text=w.text),D.dispatchEvent("input"),D.dispatchEvent("update"),D.stage&&D.stage.update()})}D.hide=function(){if(_&&ve.hide(),w&&w.removeFrom(),!n(D.stage)){var Re=D.stage;return D.removeFrom(),Re.update(),D}},le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==D},set:function(){e.KEYFOCUS=D}}),e.KEYFOCUS||ye(),this.on("mousedown",function(){ye()});function ye(){D.keyFocus=!0}Object.defineProperty(D,"label",{get:function(){return Y},set:function(Re){Y=Re,J()}}),ce!==!1&&e.styleTransforms(this,d),this.clone=function(){return D.cloneProps(new e.TextEditor(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,this.group,G))},this.dispose=function(Re,de,Me){return D.inputEvent&&w.off("input",D.inputEvent),ve&&ve.dispose(),r&&r.dispose(),_e&&_e.dispose(),T&&T.dispose(),w&&w.dispose(),xe&&xe.dispose(),$&&$.dispose(),ue&&ue.dispose(),Ye&&Ye.dispose(),Me||this.zimPanel_dispose(),D.stage&&D.stage.update(),D.textArea=D.color=D.colorPicker=D.font=D.button=D.selector=D.bold=D.italic=D.size=null,!0}},e.extend(e.TextEditor,e.Panel,["clone","dispose"],"zimPanel",!1),e.Keyboard=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce){var j="labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, placeShiftH, placeShiftV, special, rtl, hardKeyboard, layout, numPadScale, numPadDraggable, numPadOnly, numPadAdvanced, style, group, inherit",G;if(G=mt(e.Keyboard,arguments,j,this))return G;qe("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=ie;var y=ae===!1?{}:e.getStyle(this.type,this.group,ce);n(t)&&(t=y.labels!=null?y.labels:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=y.backgroundColor!=null?y.backgroundColor:e.dark),n(i)&&(i=y.color!=null?y.color:e.white),n(o)&&(o=y.shiftBackgroundColor!=null?y.shiftBackgroundColor:"orange"),n(l)&&(l=y.shiftHoldBackgroundColor!=null?y.shiftHoldBackgroundColor:"red"),n(f)&&(f=y.placeBackgroundColor!=null?y.placeBackgroundColor:e.blue),n(h)&&(h=y.placeColor!=null?y.placeColor:i),n(g)&&(g=y.cursorColor!=null?y.cursorColor:e.blue),n(_)&&(_=y.shadeAlpha!=null?y.shadeAlpha:.2),n(P)&&(P=y.borderColor!=null?y.borderColor:"rgba(0,0,0,.1)"),n(C)&&(C=y.borderWidth!=null?y.borderWidth:null),P<0||C<0?P=C=null:P!=null&&C==null&&(C=1),n(T)&&(T=y.margin!=null?y.margin:5),n(N)&&(N=y.corner!=null?y.corner:30),n(O)&&(O=y.draggable!=null?y.draggable:!1),n(S)&&(S=y.placeClose!=null?y.placeClose:!0),n(k)&&(k=y.shadowColor!=null?y.shadowColor:"rgba(0,0,0,.2)"),n(x)&&(x=y.shadowBlur!=null?y.shadowBlur:14),n(L)&&(L=y.data!=null?y.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]]]),L[3]||(L[3]={e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]});var p=this;n(A)&&(A=y.place!=null?y.place:!0),n(b)&&(b=y.placeShiftH!=null?y.placeShiftH:0),n(F)&&(F=y.placeShiftV!=null?y.placeShiftV:0),n(V)&&(V=y.rtl!=null?y.rtl:!1),n(I)&&(I=y.hardKeyboard!=null?y.hardKeyboard:!0),n(R)&&(R=y.numPadScale!=null?y.numPadScale:.8),n(U)&&(U=y.numPadOnly!=null?y.numPadOnly:!1),n(Q)&&(Q=y.numPadDraggable!=null?y.numPadDraggable:!0),n(ee)&&(ee=y.numPadAdvanced!=null?y.numPadAdvanced:!1),n(ne)&&(ne=y.layout!=null?y.layout:"qwerty"),ne=ne.toLowerCase(),ne!="qwerty"&&(ne=="arabic"?L=[[["\u0636","\u0635","\u062B","\u0642","\u0641","\u063A","\u0639","\u0647","\u062E","\u062D","\u062C"],["\u0634","\u0633","\u064A","\u0628","\u0644","\u0627","\u062A","\u0646","\u0645","\u0643","\u0637"],["\u0630","\u0621","\u0624","\u0631","\u0649","\u0629","\u0648","\u0632","\u0638","\u062F","back"],["?123","\u0640"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{\u0627:["\u0623","\u0625","\u0622","\u0621"],\u0649:["\u0626"],\u0621:["\u0626","\u0624"],\u0648:["\u0624"],\u0640:["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],"*":["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],n:["\xF1","\u0144"]}]:ne=="hebrew"?L=[[["\u05E7","\u05E8","\u05D0","\u05D8","\u05D5","\u05DF","\u05DD","\u05E4","backspace"],["\u05E9","\u05D3","\u05D2","\u05DB","\u05E2","\u05D9","\u05D7","\u05DC","\u05DA","\u05E3"],["\u05D6","\u05E1","\u05D1","\u05E0","\u05D4","\u05DE","\u05E6","\u05EA","\u05E5"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:ne=="azerty"?L=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","\xB4","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:ne=="turkish"&&(L=[[["q","w","e","r","t","y","u","\u0131","o","p","\u011F","\xFC"],["a","s","d","f","g","h","j","k","l","\u015F","i"],["shift","z","x","c","v","b","n","m","\xF6","\xE7","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]},{\u0131:"I",i:"\u0130"},{I:"\u0131",\u0130:"i"}])),p.data=L;var d="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(n(E))if(le.zdf)E=le.zdf.stage;else{ht(d);return}else if(E.getBounds){if(n(E.stage)){ht("zim display - Keyboard(): The container must have a stage property");return}}else{ht(d);return}k!=-1&&x>0&&(p.shadow=new ze.Shadow(k,3,3,x));var D=le.zdf?le.zdf.stage:null;p.labels=t;var K,w=10;e.loop(L[0],function(Le){Le.length>w&&(w=Le.length)});var Y=w,Ee=["/","",",",".","numpad","away"];n(q)||Ee.splice(1,0,q);var X=e.copy(L[0]);X[3]=X[3].concat(Ee);var Z=e.copy(L[1]);Z[3]=Z[3].concat(Ee);var pe=e.copy(L[2]);pe[3]=pe[3].concat(Ee);var ve=[],$=(1e3-(Y-1)*5)/Y,ue={def:"default",shift:"shift",number1:"number1",number2:"number2"},xe=ue.def,Ye,se,be,te=!1,_e,J,ye=0,Re,de=[],Me,Be,he,Ae,Ce,me,Ne,ge;Ze(),fe(xe),O&&Ke(),this.on("mousedown",Ue);function Ue(Le){D=p.stage,se&&p.removeChild(se),Re&&de.indexOf(Le.target)<0&&Pe(),n(Le.target.na)||(O&&Le.target===Ne?(p.tickerMouseEvent=D.on("stagemousemove",function(Qe){p.mouseYAmount=Qe.stageY}),e.Ticker.add(gt),p.on("pressup",We),ge=Le.stageY-p.localToGlobal(0,0).y):!n(q)&&Le.target.na===q?p.dispatchEvent("special"):Le.target.na==="shift"?Oe():Le.target.toggle==="?123"?(p.removeChild(Ye),fe(ue.number1)):Le.target.toggle==="ABC"?(p.removeChild(Ye),xe=ue.def,fe(),te&&Oe(!0)):Le.target.toggle==="1/2"?(p.removeChild(Ye),fe(ue.number2)):Le.target.toggle==="2/2"?(p.removeChild(Ye),fe(ue.number1)):Le.target.na==="numpad"?ut(Le.target):Le.target.na==="away"?(p.hideKeyboard(),p.dispatchEvent("close")):L[3]&&L[3][Le.target.na]?Xe(Le.target.na):Le.target.na==="return"?Fe("\n"):Le.target.na==="backspace"||Le.target.na==="back"?st():Le.target.na===""?Fe(" "):Fe(Le.target.na),D.update())}p.addChar=function(Le){!n(Le)&&Le.match(/^.$/)&&Fe(Le)},p.removeChar=function(){st(!0)},p.clearText=function(){J.text="",st(!0),je(),p.selectedIndex=0},p.setText=function(Le){J.text=Le,je(),p.selectedIndex=Le.length};var He;function Oe(Le){var Qe=!1,$e,nt;if(xe===ue.def){for(_e.color=Le?l:o,$e=0;$e<ve.length-6-(n(q)?0:1);$e++)nt=ve[$e],nt.label.text.length>0&&(nt.na.length===1?(L[4]&&L[4][nt.label.text]?nt.label.text=L[4][nt.label.text]:nt.label.text=nt.label.text.toUpperCase(),nt.label.centerReg(nt).mov(0,6)):nt.label.centerReg(nt));Le||(Qe=!0,setTimeout(pt,500),He=p.on("pressup",De)),xe=ue.shift}else{for(_e.color=r,te=!1,$e=0;$e<ve.length-6;$e++)nt=ve[$e],nt.label.text.length>0&&(nt.na.length===1?(L[5]&&L[5][nt.label.text]?nt.label.text=L[5][nt.label.text]:nt.label.text=nt.label.text.toLowerCase(),nt.label.centerReg(nt).mov(0,3)):nt.label.centerReg(nt));xe=ue.def}Ye.updateCache(),p.stage&&p.stage.update();function pt(){Qe&&(te=!0,_e.color=l,Ye.updateCache(),p.stage&&p.stage.update())}function De(){p.off("pressup",He),Qe=!1}}function fe(Le){var Qe,$e,nt,pt=0,De=0,at,yt,rt=!1,Tt,xt,Ct=!1;n(Le)&&(Le=ue.def),Le===ue.def?Qe=X:Le===ue.number1?Qe=Z:Le===ue.number2&&(Qe=pe),p.keys=Ye=new e.Container(1e3,430,null,null,!1).addTo(p).vis(!U);for(var lt=0;lt<Qe.length;lt++){(lt<=1||Le==ue.def&&lt==2&&Qe[2][0]!="shift")&&(pt=($/2+2.5)*(Y-Qe[lt].length));for(var Dt=0;Dt<Qe[lt].length;Dt++){if(rt=!1,Tt=null,Ct=!1,Qe[lt][Dt]=="backspace"?(yt=!0,Tt=Be,Ct=!0):Qe[lt][Dt]=="back"?(yt=!1,Tt=Be,Ct=!0):Qe[lt][Dt]=="shift"?(yt=!0,Tt=Me):(lt==3||Le!=ue.def&&lt==2)&&Dt==0?(yt=!0,Ct=!0):Qe[lt][Dt]==""?(yt=!1,rt=!0):Qe[lt][Dt]=="numpad"?(Tt=Ae,yt=!1,Ct=!0):Qe[lt][Dt]=="away"?(Tt=he,yt=!0,Ct=!0):yt=!1,yt?at=$*1.5+2.5:rt?(at=($+5)*((n(q)?3:2)+Y-10+1-L[0][3].length)-5,L[0][3].indexOf("backspace")!=-1&&(at-=$/2)):at=$,nt=new e.Rectangle(at,$,r,P,C,N,null,null,null,!1).cur().addTo(Ye),Ct&&nt.addChild(new e.Rectangle(at,$,"black",null,null,N,null,null,null,!1).alp(_)),Tt?nt.label=$e=new e.Label({text:"",backgroundColor:"ignore",font:y.font!=null?y.font:null,style:!1}):nt.label=$e=new e.Label({lineWidth:10,lineHeight:25,font:y.font!=null?y.font:null,text:Qe[lt][Dt],color:i,align:"center",style:!1}),Tt){var Mt=Tt.clone(),St;Qe[lt][Dt]=="numpad"?(St=60,me=nt):St=70,Mt.scaleTo(nt,St,St),Mt.centerReg(nt)}xt?(xt=!1,pt+=67.33):($e.centerReg(nt).mov(0,isNaN($e.text)?3:7),nt.x=pt,nt.y=De,nt.na=Qe[lt][Dt],lt==2&&Dt==0&&Le==ue.number1&&(nt.toggle="1/2"),lt==2&&Dt==0&&Le==ue.number2&&(nt.toggle="2/2"),lt==3&&Dt==0&&Le==ue.def&&(nt.toggle="?123"),lt==3&&Dt==0&&Le!=ue.def&&(nt.toggle="ABC"),nt.toggle&&$e.mov(0,3),ve.push(nt),nt.na=="shift"&&(_e=nt),pt=nt.x+nt.width+5)}De+=$+5,pt=0}Ye.cache(C?-C:0,C?-C:0,C?Ye.width+C*2:Ye.width,C?Ye.height+C*2:Ye.height)}function Xe(Le){var Qe=L[3][Le],$e=!1,nt=!1,pt;pt=e.timeout(500,yt,null,"ms");var De=p.on("pressup",at);function at(){$e=!0,p.off("pressup",De),nt||Fe(Le)}function yt(){var rt,Tt,xt,Ct=0,lt;if(pt.clear(),!$e){nt=!0,se=new e.Container(1e3,$,null,null,!1).addTo(p,0),se.y=-$-5;for(var Dt=0;Dt<Qe.length;Dt++)xe===ue.shift?lt=Qe[Dt].toUpperCase():lt=Qe[Dt],rt=new e.Label({lineWidth:10,lineHeight:25,text:lt,font:y.font!=null?y.font:null,color:i,align:"center",style:!1}),Tt=new e.Rectangle($,$,r,P,C,N,null,null,null,!1).addTo(se),xt=new e.Rectangle($,$,"white",null,null,N,null,null,null,!1).alp(.2),Tt.addChild(xt),rt.center(Tt),Tt.na=Qe[Dt],Tt.x=Ct,Ct+=$+5;p.stage&&p.stage.update()}}}function Ze(){Me=new e.Shape({style:!1}),Me.graphics.f(i).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),Me.setBounds(-51/2,-72/2,51,72),Be=new e.Container({style:!1});var Le=new e.Shape({style:!1});Le.graphics.f(i).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),Le.setTransform(82.6,32),Le.addTo(Be);var Qe=new e.Shape({style:!1});Qe.graphics.f(i).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),Qe.setTransform(62.2,32),Qe.addTo(Be),Be.setBounds(0,0,125,64),he=new e.Container({style:!1}),he.setBounds(0,0,147,86);for(var $e=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],nt,pt=0;pt<$e.length;pt++)nt=new e.Shape({style:!1}),nt.graphics.f(i).s().p($e[pt].p),nt.setTransform($e[pt].transform[0],$e[pt].transform[1]),nt.addTo(he);Ae=new e.Container({style:!1}),Ae.setBounds(0,0,62,86),Ce=new e.Container({style:!1}),Ce.setBounds(0,0,62,86);for(var De=[{p:"Ai+heIF9AAIi/C9g",transform:[33,76,1,1,180]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]}],pt=0;pt<De.length;pt++){var at=new e.Shape({style:!1});at.graphics.f(i).s().p(De[pt].p),at.setTransform(De[pt].transform[0],De[pt].transform[1],De[pt].transform[2],De[pt].transform[3],De[pt].transform[4]),at.addTo(Ae);var yt=new e.Shape({style:!1});yt.graphics.f(i).s().p(De[pt].p),yt.setTransform(De[pt].transform[0],De[pt].transform[1]),yt.addTo(Ce)}at.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10),yt.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10)}function Ke(){Ne=new e.Rectangle($*1.5+2.5+2.5,$,r,P,C,N,null,null,null,!1).addTo(p,0).cur();for(var Le,Qe=0;Qe<4;Qe++)Le=new e.Rectangle(Ne.width*.4,4,i,null,null,null,null,null,null,!1).centerReg(Ne).alp(.2),Le.y-=-22+Qe*15;Ne.x=8.5*$+40,Ne.y=-$-5,Ne.na="drag"}function ut(Le){p.numPad||(p.numPad=new e.NumPad({advanced:ee,draggable:Q}).sca(R),Q||U?p.numPad.center({add:!1}):p.numPad.pos({x:0,y:8,horizontal:"center",vertical:"bottom",add:!1}),p.numPad.on("pressed",function(){p.numPad.key=="enter"?p.dispatchEvent("enter"):p.numPad.key=="backspace"?p.removeChar():p.numPad.key=="clear"?p.clearText():p.numPad.key=="space"?Fe(" "):Fe(p.numPad.key)}),p.numPad.on("close",function(){me.removeChildAt(2),Ae.clone().scaleTo(me,60,60).centerReg(me,2),Ye.updateCache(),(!p.keys.parent||!p.keys.visible)&&be&&(be.visible=!1,p.toggled=!1,Pe())})),me.removeChildAt(2),p.numPad.parent||Le===!1?(p.numPad.removeFrom(),Ae.clone().scaleTo(me,60,60).centerReg(me,2)):(!p.numPad.parent||Le===!0)&&(p.numPad.addTo(),Ce.clone().scaleTo(me,60,60).centerReg(me,2)),Ye.updateCache(),p.stage&&p.stage.update()}function gt(){p.mouseYAmount&&(p.y=p.parent.globalToLocal(0,p.mouseYAmount-ge).y)}function We(){D.off("pressmousemove",p.tickerMouseEvent),e.Ticker.remove(gt)}p.setBounds(1e3,400-(Y-10)*26);function it(){if(!(!J||!be)){for(var Le=J.label.x+J.label.getBounds().x,Qe=0;Qe<ye;Qe++)Le+=J.widthArray[Qe]?J.widthArray[Qe]:0;be.heightOnly=J.getBounds().height*(J.backing&&n(J.padding)?.9:1)-(J.paddingV&&J.background?J.paddingV*2:0),be.center(J),be.x=Le}}function ct(){if(Re||!J)return p;var Le=S?["<",">","x"]:["<",">"],Qe,$e,nt;de=[],nt=J.localToLocal(0,0,p),Re=p.place=new e.Container({style:!1}).addTo(p).cur();for(var pt=0;pt<Le.length;pt++)Qe=new e.Rectangle($,$,f,P,C,N,null,null,null,!1),Le[pt]=="x"&&new e.Rectangle($,$,"black",null,null,N,null,null,null,!1).alp(_).addTo(Qe),$e=new e.Label({lineWidth:10,text:Le[pt],backing:Qe,font:y.font!=null?y.font:null,color:h,align:"center",valign:"center",style:!1}),$e.pos(0,0,e.LEFT,e.TOP,Re).cache(),$e.x=$e.x+pt*($+5),de.push($e);nt=J.localToLocal(0,0,p),Re.x=nt.x+b,Re.y=nt.y+J.height+15+F,Re.on("click",De);function De(at){de.indexOf(at.target)==0?ye>0&&ye--:de.indexOf(at.target)==1?ye<J.text.length&&ye++:Pe(),it()}p.stage&&p.stage.update()}function Pe(){if(!Re)return p;Re.dispose(),Re=null}function Fe(Le){if(J){var Qe,$e;if(Le==="del")J&&(J.text=[J.text.slice(0,ye-1),J.text.slice(ye)].join("")),ye--,je();else{xe===ue.shift&&(Le=Le.toUpperCase());var nt=J.text;Qe=J.clone().removeFrom(),Qe.text=Le,$e=Qe.label.getMeasuredWidth(),J.widthArray?J.widthArray.splice(ye,0,$e):J.widthArray=[J.breedte],ye<J.text.length?J.text=[J.text.slice(0,ye),Le,J.text.slice(ye)].join(""):J.text+=Le,J&&J.label.getBounds().width<K?(ye++,it()):J.text=nt}xe===ue.shift&&!te&&(p.removeChild(Ye),fe(),xe=ue.def),it();var pt=new ze.Event("keydown");pt.letter=Le,p.dispatchEvent(pt),p.stage&&p.stage.update()}}function we(Le){if(p.stage){var Qe,$e=0,nt=!1;J=Le.target,J.widthArrayCheck||je(),K=J.label.lineWidth?J.label.lineWidth:1e4,Qe=J.globalToLocal(Le.stageX/e.scaX,Le.stageY/e.scaY),Qe.x-=J.label.x,Qe.y-=J.label.y;for(var pt=0;pt<J.widthArray.length;pt++)if($e+=J.widthArray[pt],Qe.x<$e-J.widthArray[pt]/2+J.label.getBounds().x){ye=pt,nt=!0;break}nt||(ye=J.text.length),it(),A&&!Re&&J.text.length>0&&ct(),Re&&J&&(J.text.length>0?(Qe=J.localToLocal(0,0,p),Re.x=Qe.x+b,Re.y=Qe.y+J.height+15+F):Pe())}}function je(){if(J){var Le=new e.Label("");J.widthArray=[];for(var Qe=0;Qe<J.text.length;Qe++)Le=J.clone().removeFrom(),Le.text=J.text[Qe],J.widthArray.push(Le.label.getMeasuredWidth());Le.text=J.text,J.widthArrayCheck=!0,it()}}function st(Le){var Qe=!0,$e;function nt(){(!J||J.text.length<1||p.currentIndex==0)&&(Qe=!1),Qe&&(pt(),$e&&($e=e.timeout(200,nt,null,"ms"))),J&&J.text.length<1&&De()}function pt(){J&&J.text.length>0?(p.selectedIndex>0&&Fe("del"),Le?De():p.on("pressup",De)):Fe("del")}function De(){Qe=!1,$e&&$e.clear(),p.off("pressup",De)}pt(),$e=e.timeout(300,nt,null,"ms"),p.stage&&p.stage.update()}function Je(){for(var Le=0;Le<t.length;Le++)t[Le].clickEvent=t[Le].on("click",we)}Je();function tt(){if(t.length>1)for(var Le=0;Le<t.length;Le++)t[Le].off("click",t[Le].clickEvent)}function Te(){if(!be&&(J=t[0],K=J&&J.label.lineWidth?J.label.lineWidth:1e4,J)){be=new e.Rectangle(3,J.height-(J.paddingV&&J.background?J.paddingV*2:0),g,null,null,null,null,null,null,!1).center(J),be.x=0,be.visible=!1,be.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var Le=0;Le<t.length;Le++)t[Le].widthArray=[0];je()}}Te();function et(){e.stopAnimate("knipperTekst"),J&&J.removeChild(be),be=null,J=null}Object.defineProperty(this,"selectedLabel",{get:function(){return J},set:function(Le){var Qe={target:Le};we(Qe),p.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ye},set:function(Le){ye=Le,it()}}),this.show=function(Le,Qe){if(p.addTo(E),!n(Le)){var $e={target:t[Le]};we($e)}return be&&(be.visible=!0),p.toggled=!0,U?ut():(!U||Qe)&&(p.keys.vis(!0),Ve.vis(!0)),p.numPad&&p.numPad.parent&&p.numPad.top(),p},this.hide=function(){return p.removeFrom(E),ut(!1),be&&(be.visible=!1),D.update(),p.toggled=!1,p},this.showNumPad=function(){ut(!0),p.toggled=!0,be&&(be.visible=!0)},this.hideNumPad=function(){ut(!1),(!p.keys.parent||!p.keys.visible)&&be&&(be.visible=!1,p.toggled=!1,Pe())},this.showKeyboard=function(){p.show(null,!0)},this.hideKeyboard=function(){!p.numPad||!p.numPad.parent?p.hide():(p.keys.vis(!1),Ve.vis(!1))},this.toggle=function(Le){return Le===!0?p.show():Le===!1||p.parent?p.hide():p.show(),p},this.showPlace=function(){return ct(),p},this.hidePlace=function(){return Pe(),p},this.addLabels=function(Le){Array.isArray(Le)||(Le=[Le]);for(var Qe=Le.length-1;Qe>=0;Qe--){var $e=t.indexOf(Le[Qe]);$e>=0||Le[Qe].type!="Label"?Le.splice(Qe,1):Le[Qe].widthArray=[0]}return tt(),t=t.concat(Le),Je(),Te(),be&&(be.visible=!0),p},this.removeLabels=function(Le){Array.isArray(Le)||(Le=[Le]),tt();for(var Qe=0;Qe<Le.length;Qe++){var $e=t.indexOf(Le[Qe]);$e>=0&&t.splice($e,1)}return Je(),t.length==0?J&&et():J&&t.indexOf(J)==-1&&(et(),Te()),p};var Ve=new e.Rectangle(this.width,this.height,e.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();Ve.on("mousedown",function(){}),Ve.on("click",function(){}),U&&Ve.vis(!1),this.resize=function(){if(p.scaleTo(D,100-T*2/D.width*100,50-T*2/D.height*100),p.y=D.height-p.height-T,p.x=D.width/2-p.width/2,J&&Re){var Le=J.localToLocal(0,0,p);Re.x=Le.x,Re.y=Le.y+J.height+15}return p.stage&&p.stage.update(),p},this.resize(),p.selectedLabel&&(p.selectedIndex=p.selectedLabel.text.length),I&&(this.keydownEvent=function(Le){if(p.stage){var Qe=p;n(Qe)||(Le.keyCode==35&&(Qe.selectedIndex=Qe.selectedLabel.text.length),Le.keyCode==36&&(Qe.selectedIndex=0),Le.keyCode==37&&(Qe.selectedIndex=Qe.selectedIndex-1),Le.keyCode==39&&(Qe.selectedIndex=Qe.selectedIndex+1),Le.keyCode==46&&Qe.selectedIndex<Qe.selectedLabel.text.length&&(Qe.selectedIndex=Qe.selectedIndex+1,Qe.removeChar()),Le.keyCode==8&&(Le.preventDefault(),Qe.removeChar()),Qe.addChar(Le.key),p.stage&&p.stage.update())}},le.addEventListener("keydown",this.keydownEvent)),ae!==!1&&e.styleTransforms(this,y),this.clone=function(){var Le=new e.Keyboard(t,r,i,o,l,f,g,_,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,this.group,ce);return p.cloneProps(Le)},this.dispose=function(Le,Qe,$e){Ve.removeAllEventListeners(),Ve=null,p.keydownEvent&&le.removeEventListener("keydown",p.keydownEvent);for(var nt=0;nt<p.labels.length;nt++)p.labels[nt].removeAllEventListeners();return p.numPad&&p.numPad.dispose(),be&&be.dispose(),p.labels=J=null,D&&D.off("pressmousemove",p.tickerMouseEvent),$e||p.zimContainer_dispose(!0),!0}},e.extend(e.Keyboard,e.Container,["clone","dispose"],"zimContainer",!1),e.Organizer=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R){var Q="width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",U;if(U=mt(e.Organizer,arguments,Q,this))return U;qe("67.3"),this.group=ne;var ee=I===!1?{}:e.getStyle("Organizer",this.group,R);if(n(t)&&(t=ee.width!=null?ee.width:r&&r.vertical?r.width:300),n(i)&&(i=ee.useAdd!=null?ee.useAdd:!0),n(o)&&(o=ee.useRemove!=null?ee.useRemove:!0),n(l)&&(l=ee.usePosition!=null?ee.usePosition:!0),n(f)&&(f=ee.autoAdd!=null?ee.autoAdd:i),n(h)&&(h=ee.autoRemove!=null?ee.autoRemove:o),n(g)&&(g=ee.autoPosition!=null?ee.autoPosition:l),n(_)&&(_=ee.addForward!=null?ee.addForward:!0),n(P)&&(P=ee.removeForward!=null?ee.removeForward:!0),n(C)&&(C=ee.backgroundColor!=null?ee.backgroundColor:e.tin),n(T)&&(T=ee.rollBackgroundColor!=null?ee.rollBackgroundColor:e.grey),n(N)&&(N=ee.selectedBackgroundColor!=null?ee.selectedBackgroundColor:e.dark),n(S)&&(S=ee.color!=null?ee.color:e.white),n(k)&&(k=ee.rollColor!=null?ee.rollColor:S),n(x)&&(x=ee.selectedColor!=null?ee.selectedColor:S),n(E)&&(E=ee.selectedRollColor!=null?ee.selectedRollColor:S),n(L)&&(L=ee.spacing!=null?ee.spacing:1),n(A)&&(A=ee.corner!=null?ee.corner:0),n(F)&&(F=ee.gradient!=null?ee.gradient:.2),n(q)&&(q=ee.gloss!=null?ee.gloss:null),n(V)&&(V=ee.backdropColor!=null?ee.backdropColor:null),Array.isArray(A)||(A=[A,A,A,A]),!(!i&&!l&&!o)){var ae=(i?1:0)+(l?4:0)+(o?1:0),ie=(t+L)/ae,ce={width:ie,height:ie,label:"",shadowColor:-1,gradient:F,corner:A,backgroundColor:C,rollBackgroundColor:T},j=[],G=new e.Shape;if(G.graphics.f(S).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),i&&j.push(new e.Button({icon:G.sca(.55).rot(-45).reg(1),inherit:ce})),l){var y=new e.Shape;y.graphics.f(S).p("AiJieIETCeIkTCfg"),j.push(new e.Button({icon:y.sca(.6).rot(r&&!r.vertical?180:-90).reg(-2),inherit:ce})),j.push(new e.Button({icon:y.clone().sca(.6).rot(r&&!r.vertical?0:90).reg(-2),inherit:ce}));var p=new e.Shape;p.graphics.f(S).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),j.push(new e.Button({icon:p.sca(.62).rot(r&&!r.vertical?0:90).reg(0),inherit:ce})),j.push(new e.Button({icon:p.clone().sca(.62).rot(r&&!r.vertical?180:-90).reg(0),inherit:ce}))}o&&j.push(new e.Button({icon:G.clone().rot(0).sca(.55),inherit:ce})),j.length==0&&(j=[""]),this.zimTabs_constructor(t,ie,j,C,T,null,N,O,S,k,null,x,E,!1,L,!0,!1,A,null,!0,F,q,null,null,null,null,null,null,null,null,null,null,V);var d=this;d.list=r,d.type="Organizer",d.setButtons=function(){if(l){var w=i?1:0;j[w+0]&&(j[w+0].icon.rotation=d.list&&!d.list.vertical?180:-90),j[w+1]&&(j[w+1].icon.rotation=d.list&&!d.list.vertical?0:90),j[w+2]&&(j[w+2].icon.rotation=d.list&&!d.list.vertical?0:90),j[w+3]&&(j[w+3].icon.rotation=d.list&&!d.list.vertical?180:-90)}};var D=!1,K=r;d.change(function(w){(!D&&d.list||d.list&&d.list!=K)&&(d.list!=K&&K&&K.noChange(),d.list.change(function(){d.orgItem=d.list.selected,d.orgIndex=d.list.selectedIndex}),D=!0,K=d.list);var Y=w.target.selectedIndex;i||Y++,!l&&(!i||Y>0)&&(Y=5);var Ee=n(d.list.selectedIndex)||d.list.selectedIndex<0;Ee&&(d.currentValue=null),d.lastIndex=d.list.selectedIndex;var X;switch(Y){case 0:f&&(X=Math.max(0,d.list.selectedIndex),d.add(X)),d.orgType="add";break;case 1:if(Ee)break;g&&(X=d.list.selectedIndex,d.up(X)),d.orgType="up";break;case 2:if(Ee)break;g&&(X=d.list.selectedIndex,d.down(X)),d.orgType="down";break;case 3:if(Ee)break;g&&(X=d.list.selectedIndex,d.toTop(X)),d.orgType="top";break;case 4:if(Ee)break;g&&(X=d.list.selectedIndex,d.toBottom(X)),d.orgType="bottom";break;case 5:if(Ee)break;h&&(X=d.list.selectedIndex,d.remove(X)),d.orgType="remove";break}}),this.add=function(w,Y,Ee){return n(w)&&(w=d.lastIndex),n(Y)&&(Y=""),_?w=Math.min(d.list.length,Math.max(0,d.list.selectedIndex)+1):w=Math.max(0,d.list.selectedIndex),d.list.addAt(Y,w,Ee),d.list.selectedIndexPlusPosition=w,d.orgItem=d.list.selected,d.orgIndex=d.list.selectedIndex,d},this.up=function(w){n(w)&&(w=d.lastIndex);var Y=d.list.items[w];return n(Y)||(d.list.removeAt(1,w),d.list.addAt(Y,w-1),d.list.selectedIndexPlusPosition=Math.max(0,w-1),d.orgItem=d.list.selected,d.orgIndex=d.list.selectedIndex),d},this.down=function(w){n(w)&&(w=d.lastIndex);var Y=d.list.items[w];return n(Y)||(d.list.removeAt(1,w),d.list.addAt(Y,w+1),d.list.selectedIndexPlusPosition=Math.min(d.list.length-1,w+1),d.orgItem=d.list.selected,d.orgIndex=d.list.selectedIndex),d},this.toTop=function(w){n(w)&&(w=d.lastIndex);var Y=d.list.items[w];return n(Y)||(d.list.removeAt(1,w),d.list.addAt(Y,0),d.list.first(),d.orgItem=d.list.selected,d.orgIndex=d.list.selectedIndex),d},this.toBottom=function(w){n(w)&&(w=d.lastIndex);var Y=d.list.items[w];if(!n(Y))return d.list.removeAt(1,w),d.list.addAt(Y,d.list.length),d.list.last(),d.orgItem=d.list.selected,d.orgIndex=d.list.selectedIndex,d},this.remove=function(w){if(n(w))if(d.list.selectedIndex>=0)w=d.list.selectedIndex;else return d;var Y=w==d.list.selectedIndex;return d.removedItem=d.list.items[w],d.list.removeAt(1,w),Y?P||(w=Math.max(0,w-1)):w=d.list.selectedIndex,d.list.selectedIndexPlusPosition=Math.min(d.list.length-1,w),d.orgItem=d.list.selected,d.orgIndex=d.list.selectedIndex,d},I!==!1&&e.styleTransforms(this,ee),this.clone=function(){return d.cloneProps(new e.Organizer(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,d.group,R))},this.dispose=function(w,Y,Ee){return j=null,Ee||d.zimTabs_dispose(!0),!0}}},e.extend(e.Organizer,e.Tabs,["clone","dispose"],"zimTabs",!1),e.Connectors=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p){var d="width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, dropArray, continuous, startIndex, duplicateLine, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, steps, style, group, inherit",D;if(D=mt(e.Connectors,arguments,d,this))return D;qe("67.39"),this.group=y;var K=G===!1?{}:e.getStyle("Connectors",this.group,p);n(t)&&(t=K.width!=null?K.width:null),n(r)&&(r=K.height!=null?K.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",n(i)&&(i=K.points!=null?K.points:[[0,0],[100,0],[100,100],[0,100]]),n(o)&&(o=K.node!=null?K.node:new e.Circle(10,e.grey,e.grey)),o.removeFrom(),o.color==e.clear&&!o.hitArea&&o.expand(0),n(l)&&(l=K.line!=null?K.line:new e.Line({length:10,thickness:3,color:e.tin,strokeObj:{caps:"round"}})),n(_)&&(_=K.num!=null?K.num:10),n(f)&&(f=K.linear!=null?K.linear:!1),n(h)&&(h=K.linearWrap!=null?K.linearWrap:!0),n(V)&&(V=K.nodeRollColor!=null?K.nodeRollColor:o.color.match("rgb")?o.color:o.color.lighten(.2)),n(I)&&(I=K.nodeRollBorderColor!=null?K.nodeRollBorderColor:o.borderColor),n(ne)&&(ne=K.nodeSelectedColor!=null?K.nodeSelectedColor:e.white),n(R)&&(R=K.nodeSelectedBorderColor!=null?K.nodeSelectedBorderColor:o.borderColor),n(Q)&&(Q=K.baseColor!=null?K.baseColor:o.color),n(U)&&(U=K.baseBorderColor!=null?K.baseBorderColor:o.borderColor),n(ee)&&(ee=K.baseRollover!=null?K.baseRollover:!1),n(A)&&(A=K.min!=null?K.min:o.radius?o.radius*2:Math.min(o.width,o.height)),n(b)&&(b=K.max!=null?K.max:null),n(q)&&(q=K.expand!=null?K.expand:e.mobile()?10:0),n(T)&&(T=K.dropType!=null?K.dropType:"any"),n(N)&&(N=K.dropArray!=null?K.dropArray:null),n(O)&&(O=K.continuous!=null?K.continuous:!1),n(S)&&(S=K.startIndex!=null?K.startIndex:null),n(k)&&(k=K.duplicateLine!=null?K.duplicateLine:!0),n(x)&&(x=K.deleteNode!=null?K.deleteNode:!0),n(E)&&(E=K.dblclick!=null?K.dblclick:!0),n(L)&&(L=K.fullMove!=null?K.fullMove:!0),n(ce)&&(ce=K.dblclickTime!=null?K.dblclickTime:.5);var w=v(ce);if(ce*=w=="s"?1e3:1,n(P)&&(P=K.snapH!=null?K.snapH:null),n(C)&&(C=K.snapV!=null?K.snapV:null),n(ae)&&(ae=K.rootLock!=null?K.rootLock:!1),n(ie)&&(ie=K.grandChildren!=null?K.grandChildren:!0),n(j)&&(j=K.steps!=null?K.steps:null),f&&i.length<=1){Et&&ht("Connector() - linear needs more than one point");return}var Y=this,Ee=0;Y.node=o,Y.line=l;var X=[],Z=o.color,pe=o.borderColor,ve=Y.lines=new e.Container(t,r).addTo(Y),$=Y.nodes=new e.Container(t,r).addTo(Y);if(i.type=="Blob"||i.type=="Squiggle"){var ue=[];e.loop(i.points,function(We){ue.push([We[0],We[1]])}),i=ue}Y.points=i,this.addNode=function(We,it,ct){if(!f)return xe(We,it,ct)};function xe(We,it,ct,Pe){if(We.addChild){T="on",ae=!0,ie=!1,ct=We,ct.connectorMoveEvent||(Y.bases||(Y.bases=[]),Y.bases.push(ct),ct.connectorMoveEvent=ct.on("pressmove",function(){ct.positionConnectors(ct,!0,!0)}),ct.connectorUpEvent=ct.on("pressup",function(){ct.positionConnectors(ct,!0,!0)}),ee&&(ct.connectorOverEvent=ct.on("mouseover",function(){Ne(ct)}),ct.connectorOutEvent=ct.on("mouseout",function(){ge(ct)})),ct.positionConnectors=function(st,Je,tt){e.loop(st.connectors,function(Te){var et=st.parent.localToLocal(st.x-st.baseStart.x+Te.nodeStart.x,st.y-st.baseStart.y+Te.nodeStart.y,Te.parent);Te.x=et.x,Te.y=et.y,Ke(Te,Je,tt)}),st.stage&&st.stage.update()},ct.setConnectorColors=function(st,Je,tt,Te){return n(st)||(ct.connectorColor=st),n(Je)||(ct.connectorBorderColor=Je),n(tt)||(ct.connectorRollColor=tt),n(Te)||(ct.connectorRollBorderColor=Te),e.loop(ct.connectors,function(et){n(st)||(et.color=st),n(Je)||(et.borderColor=Je)}),ct},ct.setConnectorColors(Q,U,V,I));var Fe=ct.getBounds();l.endHead,Array.isArray(it)||(it=[it,it]);var we=[];return it.length==2&&(it=[it[0],it[1],it[0],it[1]]),(l.lineOrientation==e.HORIZONTAL||l.lineOrientation=="auto")&&e.loop([it[0],it[1]],function(st,Je){if(st==-1||st==-2){var tt=ct.localToLocal(Je==0?Fe.x:Fe.x+Fe.width,Fe.y,Y);we.push([tt.x,tt.y,e.HORIZONTAL])}if(st==-1||st==-3){var Te=ct.localToLocal(Je==0?Fe.x:Fe.x+Fe.width,Fe.y+Fe.height,Y);we.push([Te.x,Te.y,e.HORIZONTAL])}st>0&&e.loop(st,function(et,Ve){var Le=ct.localToLocal(Je==0?Fe.x:Fe.x+Fe.width,Fe.y+Fe.height*(et+1)/(Ve+1),Y);we.push([Le.x,Le.y,e.HORIZONTAL])})}),(l.lineOrientation==e.VERTICAL||l.lineOrientation=="auto")&&e.loop([it[2],it[3]],function(st,Je){if(st==-1||st==-2){var tt=ct.localToLocal(Fe.x,Je==0?Fe.y:Fe.y+Fe.height,Y);we.push([tt.x,tt.y,e.VERTICAL])}if(st==-1||st==-3){var Te=ct.localToLocal(Fe.x+Fe.width,Je==0?Fe.y:Fe.y+Fe.height,Y);we.push([Te.x,Te.y,e.VERTICAL])}st>0&&e.loop(st,function(et,Ve){var Le=ct.localToLocal(Fe.x+Fe.width*(et+1)/(Ve+1),Je==0?Fe.y:Fe.y+Fe.height,Y);we.push([Le.x,Le.y,e.VERTICAL])})}),ct.connectors=[],ct.baseStart=new e.Point(ct.x,ct.y),e.loop(we,function(st){var Je=xe(st[0],st[1],ct,st[2]);Ue(ct,Je)}),setTimeout(function(){ct.positionConnectors(ct,!0,!0)},50),Y}var je=o.clone().loc(We,it,$).drag({boundary:F}).expand(q);return je.orientation=Pe,je.nodeColor=je.color,je.on("mouseover",be),je.on("mouseout",te),je.on("mousedown",Me),je.on("pressmove",Be),je.on("pressup",he),x&&je.hold(se),je.nodeNum=Ee++,je.creations=[],je}function Ye(){e.loop(i,function(We,it){var ct=xe(We[0],We[1]);ct.dropIndex=it,N&&(ct.dropArray=N[it])}),f&&$.loop(function(We,it,ct){it==0?(h?We.before=$.getChildAt(ct-1):We.before=null,We.after=$.getChildAt(it+1)):it==ct-1?(h?We.after=$.getChildAt(0):We.after=null,We.before=$.getChildAt(it-1)):(We.before=$.getChildAt(it-1),We.after=$.getChildAt(it+1)),g&&it>0&&We.noMouse()})}Ye(),Y.setAvailableIndexes=function(We){return Array.isArray(We)||(We=[We]),Y.nodes.loop(function(it,ct){We.indexOf(ct)==-1?it.noMouse():it.mouse()}),Y},n(S)||Y.setAvailableIndexes(S),Y.keyEvent=function(We){x&&We.keyCode==46&&(e.loop(_e,function(it){it&&it.parent&&ut(it)}),Y.stage&&Y.stage.update())},le.addEventListener("keydown",Y.keyEvent);function se(We){var it=We.target.stage,ct=We.target;Y.bases||ae&&!ct.creator.creator||(ct.adding?ut(ct.creator):ut(ct),Y.stage&&Y.stage.update())}function be(We){var it=We.target;it.selected||(it.color=it.base?it.base.connectorRollColor:V,it.borderColor=it.base?it.base.connectorRollBorderColor:I,Y.stage&&Y.stage.update())}function te(We){var it=We.target;it.selected||(it.color=it.base?it.base.connectorColor:it.nodeColor,it.borderColor=it.base?it.base.connectorBorderColor:pe,Y.stage&&Y.stage.update())}var _e=[],J,ye=0,Re,de;function Me(We,it,ct,Pe){var Fe=We.target;if(!n(Fe)&&(ct&&(Fe.selected=!0,_e=[],Y.selectNode(Fe,!Pe)),de=Fe.nodeNum,!f&&(!ae||Fe.creator)&&E&&!it&&(ye==0&&(Re=setTimeout(function(){if(ye=0,_e){var Je=Y.stage?Y.stage.frame:le.zdf,tt=$.loop(function(Te){if(Te.hitTestPoint(Je.mouseX,Je.mouseY)&&Te.selected)return!1});tt&&Ze()}},ce)),ye++),Fe.startX=Fe.x,Fe.startY=Fe.y,!f&&_e.length>0&&e.loop(_e,function(Je){Je.startX=Je.x,Je.startY=Je.y}),!(Fe.creations.length>=_||Fe.selected||Fe.creator&&!ie))){Fe.adding=!0;var we=xe(Fe.x,Fe.y).bot();we.creations=Fe.creations,we.creatorLine=Fe.creatorLine,we.creator=Fe.creator,we.orientation=Fe.orientation,we.startX=Fe.startX,we.startY=Fe.startY,we.dropIndex=Fe.dropIndex,we.dropArray=Fe.dropArray,we.lineArray=Fe.lineArray,we.color=we.nodeColor=Fe.nodeColor;var je=we.nodeNum;if(we.nodeNum=Fe.nodeNum,Fe.nodeNum=je,Fe.base&&(we.base=Fe.base,we.baseStart=Fe.baseStart,we.nodeStart=Fe.nodeStart,we.connectors=Fe.connectors,Fe.base=Fe.baseStart=Fe.nodeStart=Fe.connectors=null,we.base.connectors&&we.base.connectors.splice(we.base.connectors.indexOf(Fe),1,we),we.color=we.base.connectorColor,we.borderColor=we.base.connectorBorderColor),we.before=Fe.before,we.after=Fe.after,we.before&&(we.before.after=we),we.after&&(we.after.before=we),we.creator){var st=we.creator.creations.indexOf(Fe);st!=-1&&we.creator.creations.splice(st,1,we)}e.loop(we.creations,function(Je){Je.creator=we}),Fe.creator=we,Fe.creatorLine=l.clone().setPoints(Fe.x,Fe.y,Fe.x,Fe.y).addTo(ve).alp(0),Fe.creatorLine.lineOrientation=Fe.orientation,Fe.creatorLine.node=Fe,Fe.creatorLine.creatorNode=we,Fe.creations=[],Fe.veeObj&&!n(Fe.veeObj.color)?Fe.color=e.Pick.choose(Fe.veeObj.color):Fe.color=we.color,Fe.nodeColor=Fe.color,we.creations.push(Fe),Y.latestNode=Fe}}function Be(We,it,ct,Pe){var Fe=We.target;Fe.creatorLine&&Fe.creatorLine.alp(1),!f&&_e.length>0&&_e.indexOf(Fe)==-1&&Ze(),Ke(Fe,!1,!0),Y.bases&&e.loop(Y.bases,function(we){Fe.creator&&Fe.creator.base==we||(!we.connectorsOn&&Fe.hitTestBounds(we)&&Ne(we),we.connectorsOn&&!Fe.hitTestBounds(we)&&ge(we))}),Y.stage&&Y.stage.update()}function he(We,it,ct,Pe){var Fe=We.target;Y.bases&&e.loop(Y.bases,function(nt){nt!=Fe.base&&nt.connectorsOn&&ge(nt)});var we=!1;if(!f&&ye>1&&!it){clearTimeout(Re);var je=Fe.adding?Fe.creator:Fe;if(Fe.adding&&ut(je.creations[je.creations.length-1],!0),!je.selected){var st=Y.stage?Y.stage.frame:le.zdf;fe(je,!st.ctrlKey)}ye=0,we=!0}if(!f&&!Y.base&&(P&&(Fe.x=Math.round(Fe.x/P)*P),C&&(Fe.y=Math.round(Fe.y/C)*C)),A&&e.dist(Fe.x,Fe.y,Fe.startX,Fe.startY)<A||b&&e.dist(Fe.x,Fe.y,Fe.startX,Fe.startY)>b){Fe.adding?ut(Fe,!0):(Fe.loc(Fe.startX,Fe.startY),we||Ke(Fe)),Y.stage&&Y.stage.update(),Y.lastNode=null,Y.targetNode=null,Y.dispatchEvent("noconnection");return}var Je=!1,tt=!1;if(f){var Te=Fe.creator;if(Y.connectionStart=Te,Y.connectionEnd=Fe,Te.before&&Fe.hitTestCircle(Te.before)&&!g)Fe.loc(Te.before).removeFrom(),Te.before.after=null,Te.before.before||Te.before.noMouse(),Te.before=null,Te.after||Te.noMouse(),tt=!0,Je=Xe();else if(Te.after&&Fe.hitTestCircle(Te.after))Fe.loc(Te.after).removeFrom(),Te.after.before=null,Te.after.after||Te.after.noMouse(),g&&Te.after.mouse(),Te.after=null,Te.before||Te.noMouse(),g&&Te.noMouse(),tt=!0,Je=Xe();else if(!Te||Fe.creations.length>0)Fe.loc(Fe.startX,Fe.startY).bot();else{ut(Fe,!0),Y.stage&&Y.stage.update(),Y.lastNode=null,Y.targetNode=null,Y.dispatchEvent("noconnection");return}}else if(T=="off"){var et=$.loop(function(nt){if(Fe!=nt&&Fe.hitTestCircles(nt)){Fe.adding?ut(Fe,!0):(Fe.loc(Fe.startX,Fe.startY),Ke(Fe)),ae&&Oe(Fe),!L&&Fe.creator&&_>0&&Fe.creator.creations.length>=_&&Fe.creator.noMouse(),Y.targetNode=nt,O&&Y.nodes.loop(function(pt){pt!=Y.latestNode&&pt.noMouse()}),O&&Y.nodes.loop(function(pt){pt!=Y.latestNode&&pt.noMouse()}),Ae(),Y.dispatchEvent("connection"),Y.stage&&Y.stage.update();return}});if(!et){me(Fe);return}}else if(T=="on"||T=="single"){var Ve=0,Le,Qe=$.loop(function(nt){if(Fe!=nt&&Fe.hitTestCircles(nt)){if(Le=nt,Y.bases&&(Fe.orientation!=nt.orientation||Fe.creator&&Fe.creator.base&&Fe.creator.base==nt.base)||Fe.dropArray&&Fe.dropArray.indexOf(nt.dropIndex)==-1||!k&&Fe.lineArray&&Fe.lineArray.indexOf(nt.dropIndex)!=-1)return;if(T=="on")return!1;Ve++,Ve+=nt.creations.length}});if(Qe&&!(T=="single"&&Ve==1)){me(Fe);return}else{if(Fe.loc(Le),Fe.creator&&Fe.orientation==e.VERTICAL&&Math.round(Fe.y)==Math.round(Fe.creator.startY)||Fe.creator&&Fe.orientation==e.HORIZONTAL&&Math.round(Fe.x)==Math.round(Fe.creator.startX))return;Y.targetNode=Le;var $e=Fe.dropIndex;Fe.dropIndex=Le.dropIndex,Fe.dropArray=e.copy(Le.dropArray),Le.lineArray?Le.lineArray.push($e):Le.lineArray=[$e],Fe.lineArray=e.copy(Le.lineArray),Fe.creator&&(Fe.creator.lineArray||(Fe.creator.lineArray=[]),Fe.creator.lineArray.push(Fe.dropIndex)),Le.base&&Le.base.connectors&&Ue(Le.base,Fe),tt=!0}}else Fe.selected||(tt=!0);!L&&Fe.creator&&_>0&&Fe.creator.creations.length>=_&&Fe.creator.noMouse(),Fe.adding=!1,Ke(Fe,!0,!0),e.loop(_e,function(nt){if(_e.indexOf(nt.creator)==-1){var pt=e.loop(nt.creations,function(De){if(_e.indexOf(De)>=0)return!1});Ae(nt.nodeNum,null,e.decimals(nt.x,2),e.decimals(nt.y,2),pt||pt===void 0?1:0)}nt.startX=nt.x,nt.startY=nt.y}),Fe.startX=Fe.x,Fe.startY=Fe.y,ae&&Oe(Fe),tt?(O&&Y.nodes.loop(function(nt){nt!=Y.latestNode&&nt.noMouse()}),Ae(),Y.dispatchEvent("connection"),e.arraysEqual(Fe.dropArray,Fe.lineArray,!1)&&Y.dispatchEvent("blocked")):Y.dispatchEvent("noconnection"),Je&&Y.dispatchEvent("complete"),Y.stage&&Y.stage.update()}function Ae(We,it,ct,Pe,Fe){it?X.push([We,null,null,1]):n(ct)?X.push([de,e.decimals(Y.latestNode.x,2),e.decimals(Y.latestNode.y,2)]):X.push([We,null,null,null,ct,Pe,Fe])}Y.makeConnection=function(We,it,ct,Pe,Fe){var we=Y.stage?Y.stage.frame:le.zdf;return Pe?(we.ctrlKey=Fe==1,Me({target:We},!0,!0,Fe),We.loc(it,ct),Be({target:We},!0,!0,Fe),he({target:We},!0,!0,Fe)):(Me({target:We},!0,!1,null),Y.latestNode.loc(it,ct),Be({target:Y.latestNode},!0,!1,null),he({target:Y.latestNode},!0,!1,null)),we.ctrlKey=!1,Y.latestNode};function Ce(We){var it=Y.nodes.loop(function(ct){if(ct.nodeNum==We)return ct});if(it.type)return it}Y.setSteps=function(We){return e.loop(We,function(it){var ct=Ce(it[0]);ct&&(it[3]?ct&&ut(ct):n(it[4])?Y.makeConnection(ct,it[1],it[2]):(Y.makeConnection(ct,it[4],it[5],!0,it[6]),Ze()))}),Y},Y.applySteps=Y.setSteps,Y.getSteps=function(We){return We&&(Y.stage||(Y.stage=zdf.stage),Y.pane||(Y.pane=new e.Pane({displayClose:!1,container:Y.stage,width:Math.min(500,Y.stage.width-20),height:Math.min(500,Y.stage.height-20),draggable:!0}),Y.textArea=new e.TextArea(Math.min(400,Y.stage.width-70),Math.min(400,Y.stage.height-70)).centerReg(Y.pane)),Y.pane.show(),Y.textArea.text=JSON.stringify(X)),X},Object.defineProperty(this,"steps",{get:function(){return X},set:function(We){Y.setSteps(We)}});function me(We){We.adding||!ie?ut(We,!0):(We.loc(We.startX,We.startY),Ke(We)),ae&&Oe(We),We.base&&We.base.connectors&&He(We.base,We),Y.lastNode=null,Y.targetNode=null,Y.dispatchEvent("noconnection"),Y.stage&&Y.stage.update()}function Ne(We){e.loop(We.connectors,function(it){it.color=We.connectorRollColor,it.borderColor=We.connectorRollBorderColor}),We.connectorsOn=!0,We.stage&&We.stage.update()}function ge(We){e.loop(We.connectors,function(it){it.color=We.connectorColor,it.borderColor=We.connectorBorderColor}),We.connectorsOn=!1,We.stage&&We.stage.update()}function Ue(We,it){We.connectors.push(it),it.nodeStart=it.parent.localToLocal(it.x,it.y,We.parent),it.nodeStart.x-=We.x-We.baseStart.x,it.nodeStart.y-=We.y-We.baseStart.y,it.base=We}function He(We,it){We.connectors.splice(We.connectors.indexOf(it),1),it.nodeStart=null,it.base=null}function Oe(We){if(We.creator){if(We.creator.creator){Oe(We.creator);return}We.creator&&We.creator.creations.length>=_?We.creator.noMouse():We.creator.mouse()}}function fe(We,it){it&&e.loop(We.creations,function(ct){fe(ct,it)}),We.selected=!0,We.color=We.base?We.base.connectorColor:ne,We.borderColor=We.base?We.base.connectorBorderColor:R,_e.push(We),We.top(),J||(J=Y.stage.on("stagemousedown",function(){var ct=Y.stage?Y.stage.frame:le.zdf,Pe=$.loop(function(Fe){if(Fe.hitTestPoint(ct.mouseX,ct.mouseY))return!1});Pe&&Ze()}))}this.selectNode=function(We,it){fe(We,it)};function Xe(){var We=$.loop(function(it){if(it.before||it.after)return!1});if(We)return $.loop(function(it){it.noMouse()}),!0}function Ze(){e.loop(_e,function(We){We.selected=!1,We.color=We.base?We.base.connectorColor:We.nodeColor,We.borderColor=We.base?We.base.connectorBorderColor:pe}),_e=[],Y.stage.off("stagemousedown",J),J=null,Y.stage&&Y.stage.update()}function Ke(We,it,ct){var Pe=_e.length>0?_e:[We];e.loop(Pe,function(Fe){Fe!=We&&Fe.loc(Fe.startX+We.x-We.startX,Fe.startY+We.y-We.startY),Fe.creator&&Fe.creatorLine.setPoints(Fe.x,Fe.y,Fe.creator.x,Fe.creator.y,it,ct),e.loop(Fe.creations,function(we){we.creatorLine.setPoints(we.x,we.y,we.creator.x,we.creator.y,it,ct)})})}function ut(We,it){if(e.loop(We.creations,function(Pe){ut(Pe)},!0),We.creatorLine){We.creatorLine.removeFrom();var ct=We.creator.creations.indexOf(We);ct!=-1&&We.creator.creations.splice(ct,1),!We.creator.mouseEnabled&&!(ae&&!We.creator.creator)&&We.creator.mouse()}return We.removeFrom(),We.removeAllEventListeners(),it?Ee--:Ae(We.nodeNum,1),We=null,Y}this.removeNode=function(We){ut(We)},this.removeConnectors=function(){e.loop($,function(We){ut(We)},!0),Ye(),Y.stage&&Y.stage.update()},this.removeBase=function(We){e.loop(We.connectors,function(it){ut(it)}),gt(We)},this.addBase=function(We,it){xe(We,it)};function gt(We){We.off("pressmove",We.connectorMoveEvent),We.off("pressup",We.connectorUpEvent),We.connectorOverEvent&&We.off("mouseover",We.connectorOverEvent),We.connectorOutEvent&&We.off("mouseout",We.connectorOutEvent),We.connectors=null,We.baseStart=null,We.positionConnectors=We.setConnectorColors=null,We.connectorColor=We.connectorBorderColor=We.connectorRollColor=We.connectorRollBorderColor=null,Y.bases.splice(Y.bases.indexOf(We),1),Y.stage&&Y.stage.update()}j&&Y.added(function(){Y.setSteps(j),Y.stage.update()}),Object.defineProperty(this,"selectedList",{get:function(){return _e},set:function(){Et&&ht("Selectors() - selectedList is read only")}}),this.dispose=function(We,it,ct){return Y.nodes.loop(function(Pe){Pe.removeFrom(),Pe.removeAllEventListeners(),Pe=null},!0),Y.lines.loop(function(Pe){Pe.removeFrom(),Pe=null},!0),le.removeEventListener("keydown",Y.keyEvent),Y.keyEvent=null,Y.bases&&e.loop(Y.bases,function(Pe){gt(Pe)}),ct||(Y.zimContainer_dispose(!0),Y.stage&&Y.stage.update()),!0},G!==!1&&e.styleTransforms(this,K),this.clone=function(){return Y.cloneProps(new e.Connectors(t,r,i,o,l,f,h,g,_,P,C,T,e.copy(N),O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,Y.group,p))}},e.extend(e.Connectors,e.Container,["clone","dispose"],"zimContainer",!1),e.Marquee=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x){var E="width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",L;if(L=mt(e.Marquee,arguments,E,this))return L;qe("67.4"),this.group=k;var A=S===!1?{}:e.getStyle("Marquee",this.group,x),b=this;n(t)&&(t=A.width!=null?A.width:300),n(r)&&(r=A.height!=null?A.height:100);var F=v(o);n(o)&&(o=A.time!=null?A.time:F=="s"?5:5e3),n(l)&&(l=A.transition!=null?A.transition:"slide"),n(C)&&(C=A.borderColor!=null?A.borderColor:e.dark),n(T)&&(T=A.borderWidth!=null?A.borderWidth:1),C<0||T<0?C=T=null:C!=null&&T==null&&(T=1),n(g)&&(g=A.marginLeft!=null?A.marginLeft:25),n(_)&&(_=A.marginRight!=null?A.marginRight:25),n(f)&&(f=A.speed!=null?A.speed:F=="s"?.5:500),a(f,F),n(h)&&(h=A.direction!=null?A.direction:"right"),n(N)&&(N=A.refresh!=null?A.refresh:F=="s"?30*60:30*60*1e3),n(O)&&(O=A.mix!=null?A.mix:!0),this.zimContainer_constructor(t+g+_,r,null,null,!1),this.type="Marquee",this.speed=f;var q=new e.Rectangle(t-1,r-1,e.clear).addTo(b).mov(g+.5,.5),V=this.content=new e.Container(t,r).loc(g,0,b).setMask(q),I=this.pages=new e.Pages(null,l,f,null,V).addTo(V),ne=!1;this.add=function(w,Y,Ee,X,Z){n(Z)&&(Z=!0),w.scaleTo(V,100,100),Y&&w.cur().on("click",function(){or(Y,Ee)}),I.addPage(w),Z&&I.center(),w.marqueeViews=0,w.marquee=b,ne||R(),X||G(),K&&K.top()},this.remove=function(w){if(b.selected==w){if(b.pages.pages.length==1)return;var Y=b.selectedIndex+1;Y==b.pages.pages.length&&(Y=0),b.pages.go(Y,null,null,0),setTimeout(function(){b.pages.removePage(w),w.dispose&&w.dispose(),G()},20)}else b.pages.removePage(w),w.dispose&&w.dispose(),G()};function R(){ne=!0,b.selectedIndex=0,b.selected=I.pages[b.selectedIndex].page,b.lastSelected=null,b.selected.marqueeOn&&b.selected.marqueeOn(),b.interval=e.interval(o,function(){b.go()})}if(!n(i)&&!Array.isArray(i)&&(i=[i]),i&&i.length>0&&(O&&e.shuffle(i),e.loop(i,function(w){b.add(w,null,null,!0)})),N>0)var Q=e.timeout(N*(F=="s"?1e3:1),function(){location.reload()},null,"ms");b.go=function(w){if(b.selected.marqueeViews+=1,b.selected.marqueeOff&&b.selected.marqueeOff(),w)b.selected=w,e.loop(I.pages,function(Ee,X){if(Ee.page==w){b.selectedIndex=X;return}}),b.interval.interval=b.selected.marqueeTime?b.selected.marqueeTime:o,b.interval.pause(ce.toggled,null,!0);else{var Y=b.selectedIndex+1;b.selectedIndex=Y%I.pages.length,b.selected=I.pages[b.selectedIndex].page,b.interval.time=b.selected.marqueeTime?b.selected.marqueeTime:o}b.dispatchEvent("page"),b.selected.marqueeOn&&b.selected.marqueeOn(),I.go(b.selected,h,l,f)},I.on("pagetransitioned",function(){b.dispatchEvent("pagetransitioned"),b.indicator&&(b.indicator.selectedIndex=b.selectedIndex)});var U=!1,ee=b.left=new e.Container(g-4,r-4),ae=new e.Shape().sca(.6);ae.graphics.f(e.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var ie=new e.Shape().sca(.6).reg(-2,0);ie.graphics.f(e.light).mt(0,0).p("AiJieIETCeIkTCfg");var ce=b.button=new e.Button({label:"",icon:ae,toggleIcon:ie,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(ee,100).pos(0,0,!1,!0,ee);ce.on("click",function(){b.interval&&b.interval.pause(ce.toggled),U=ce.toggled,b.stage.update()});var j;function G(){if(!(n(g)||g==0)){var w=4*g/25;ee.pos(g-ee.width-w,w/2,!1,!0,b),b.indicator&&(b.indicator.dispose(),b.indicator.removeFrom()),j||(j=new e.Proportion(8,16,ee.width+w,ee.width/2+w,-1)),b.indicator=new e.Indicator({width:(I.pages.length<=2?I.pages.length:I.pages.length-1)*(ee.width-3),height:j.convert(I.pages.length),num:I.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:P}),b.indicator.fit(0,0,r-ce.height,ce.width),b.indicator.rot(h=="down"?-90:90).center(ee).pos(null,ee.width-w/2,null,!0),b.indicator.selectedIndex=b.selectedIndex,b.indicator.on("change",function(){b.go(I.pages[b.indicator.selectedIndex].page)})}}if(G(),!n(_)&&_>0&&le.zdf&&le.zdf){var y=4*_/25,p=b.right=new e.Container(45,270),d=b.icon=le.zdf.makeIcon(e.grey,e.lighter,e.silver).sca(.5).pos(0,0,!0,!0,p).mov(0,0).cur();d.on("mouseover",function(){D.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),d.stage.update()}),d.on("mouseout",function(){D.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),d.stage.update()}),d.on("mousedown",function(){or("https://zimjs.com/marquee","_blank")});var D=b.label=new e.Label({text:"MARQUEE",color:e.dark,backgroundColor:e.lighter,shiftV:1,paddingV:5}).rot(-90).pos(0,13,!0,!1,p).reg(-10).sca(0,1).mov(0);p.fit(0,0,_-y,r-y),p.pos(_-p.width-y,y/2,!0,!0,b)}if(b.stage&&b.stage.update(),this.pause=function(w,Y){n(w)&&(w=!0),w!=U&&(U=w,b.interval.pause(w,Y),b.button.toggle(w))},Object.defineProperty(this,"paused",{get:function(){return U},set:function(){Et&&ht("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return o},set:function(w){o=w,b.interval.time=o}}),this.load=function(w,Y){var Ee=[];O&&e.shuffle(w),e.loop(w,function(Z){Array.isArray(Z)?Ee.push(Z[0]):Ee.push(Z)});var X=b.stage?b.stage.frame:le.zdf;return b.marqueeLoader=X.loadAssets(Ee,Y),b.loadEvent=b.marqueeLoader.on("assetload",function(Z){var pe=w[Z.asset.id],ve,$;Array.isArray(pe)?(ve=pe[0],$=pe[1]):(ve=pe,$="_self"),b.add(Z.asset,ve,$),G()}),b},!n(C)){var K=new e.Rectangle(t-1,r-1,e.clear,C,T).loc(q,null,b);K.mouseEnabled=!1}S!==!1&&e.styleTransforms(this,A),this.clone=function(){return b.cloneProps(new e.Marquee(t,r,i,o,l,f,h,P,C,T,N,O,S,this.group,x))},this.dispose=function(w,Y,Ee){return Q&&Q.clear(),b.interval&&b.interval.clear(),b.loadEvent&&b.marqueeLoader.off("assetload",b.loadEvent),I.dispose(),I=null,Ee||this.zimContainer_dispose(!0),!0}},e.extend(e.Marquee,e.Container,["clone","dispose"],"zimContainer"),e.Carousel=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b){var F="items, viewNum, time, spacing, backgroundColor, backing, padding, paddingH, paddingV, arrowLeft, arrowRight, arrowGap, valign, ease, swipe, remember, selectedIndex, continuous, style, group, inherit",q;if(q=mt(e.Carousel,arguments,F,this))return q;qe("67.45"),this.group=A;var V=L===!1?{}:e.getStyle("Carousel",this.group,b),I=this;this.zimContainer_constructor(),n(t)&&(t=V.items!=null?V.items:[new Sn({color:red}),new Sn({color:orange}),new Sn({color:yellow}),new Sn({color:green}),new Sn({color:blue}),new Sn({color:purple}),new Sn({color:pink})]),n(l)&&(l=V.backgroundColor!=null?V.backgroundColor:e.clear),n(f)&&(f=V.backing!=null?V.backing:null),n(N)&&(N=V.valign!=null?V.valign:"center"),n(r)&&(r=V.viewNum!=null?V.viewNum:3),n(o)&&(o=V.spacing!=null?V.spacing:20),n(h)&&(h=V.padding!=null?V.padding:0),n(g)&&(g=V.paddingH!=null?V.paddingH:h),n(_)&&(_=V.paddingV!=null?V.paddingV:h),n(P)&&(P=V.arrowLeft!=null?V.arrowLeft:new e.Arrow().rot(180)),n(C)&&(C=V.arrowRight!=null?V.arrowRight:new e.Arrow),n(T)&&(T=V.arrowGap!=null?V.arrowGap:20);var ne=v(i);n(i)&&(i=V.time!=null?V.time:ne=="s"?.2:200),n(O)&&(O=V.ease!=null?V.ease:"quadInOut"),n(S)&&(S=V.swipe!=null?V.swipe:!0),n(k)&&(k=V.remember!=null?V.remember:"zimCarousel"),n(x)&&(x=V.selectedIndex!=null?V.selectedIndex:0),n(E)&&(E=V.continuous!=null?V.continuous:!0),k&&localStorage&&!n(localStorage[k])&&(localStorage[k]=="NaN"&&(localStorage[k]=0),x=Number(localStorage[k])),I.items=t,I.viewNum=r,I.spacing=o,I.arrowLeft=P,I.arrowRight=C,I.arrowLeft.oW=P.width,I.arrowRight.oW=C.width,f&&(I.backing=f);var R={};e.loop(t,function(d,D){typeof d=="string"&&(d=t[D]=new e.Pic(d)),d.reg(CENTER,CENTER);var K=R["width"+d.width];K?R["width"+d.width]+=1:R["width"+d.width]=1});var Q=0,U=0;e.loop(R,function(d,D){D>Q&&(Q=D,U=Number(d.substring(5)))});var ee=0;e.loop(t,function(d){d.width=U,d.height>ee&&(ee=d.height)});var ae;E?(I.continuous=!0,ae=e.copy(t),e.loop(t.length,function(d){ae.push(t[d].duplicate())})):ae=t,I.itemWidth=U,I.itemHeight=ee;var ie=P.width+T+g,ce;function j(){var d=r*(U+o)-o,D=ee;ce=d+g*2+T*2+P.width+C.width,I.setBounds(0,0,ce,D+_*2),I.tile=new e.Tile({obj:ae,cols:ae.length,spacingH:o,rows:1,unique:!0,align:"center",valign:N}).center(I).loc(ie),I.background=new Sn(d+g*2,D+_*2,l).center(I,0),I.tile.setMask(I.background)}function G(){P.pos(0,0,"left","center",I),C.pos(0,0,"right","center",I),P.on("mousedown",function(){I.cycleInterval&&(I.cycleClear(),I.dispatchEvent("cyclecleared")),I.goLeft()}),C.on("mousedown",function(){I.cycleInterval&&(I.cycleClear(),I.dispatchEvent("cyclecleared")),I.goRight()}),p()}function y(){if(I.swipe){var d=I.swipeObj=new e.Swipe(I.tile);d.on("swipe",function(D){D.swipeX!=0&&I.cycleInterval&&(I.cycleClear(),I.dispatchEvent("cyclecleared")),D.swipeX==1?I.goLeft():D.swipeX==-1&&I.goRight()})}}function p(){localStorage&&k&&(localStorage[k]=I.selectedIndex),P.activate(!0),C.activate(!0),!E&&(I.tile.x+I.tile.width<=ce-C.oW-g-T&&C.activate(!1),I.tile.x>=ie&&P.activate(!1))}I.goLeft=function(d){return n(d)&&(d=i),E&&I.tile.x>=-U&&(I.tile.x-=I.tile.width/2+o/2),I.tile.x<ie&&(I.disableArrows(),x--,I.tile.animate({props:{x:I.tile.x+U+o},time:d,ease:O,call:function(){p(),I.enableArrows(),I.dispatchEvent("transitioned")}})),I},I.goRight=function(d){return n(d)&&(d=i),E&&I.tile.x-U<=ce-I.tile.width&&(I.tile.x+=I.tile.width/2+o/2),I.tile.x+I.tile.width>ce-C.oW-g-T&&(I.disableArrows(),x++,I.tile.animate({props:{x:I.tile.x-U-o},time:d,ease:O,call:function(){p(),I.enableArrows(),I.dispatchEvent("transitioned")}})),I},I.cycleClear=function(){return I.cycleInterval.clear(),I.cycleInterval=null,I},I.cycle=function(d,D,K,w,Y,Ee){var X="cycleTime, transitionTime, repeat, repeatNum, recycle, rtl",Z;if(Z=mt(I.cycle,arguments,X))return Z;n(d)&&(d=V.cycleTime!=null?V.cycleTime:ne=="s"?5:5e3),n(D)&&(D=V.transitionTime!=null?V.transitionTime:ne=="s"?1:1e3),n(K)&&(K=!0),n(w)&&(w=0),n(Y)&&(Y=d*2),n(Ee)&&(Ee=le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl");let pe=Ee?-1:1;return I.cycleInterval&&I.cycleInterval.clear(),Y&&Y!=-1&&(I.recycleEvent&&I.off("cyclecleared",I.recycleEvent),I.recycleWait&&I.recycleWait.clear(),I.recycleEvent=I.on("cyclecleared",function(){I.recycleWait&&I.recycleWait.clear(),I.recycleWait=si(Y,function(){I.cycle(d,D,K,w,Y,Ee)})})),E?(I.repeatTotal=0,I.cycleInterval=e.interval(d*2,function(ve){if(I.selectedIndex==0)if(!K&&Ee)I.cycleInterval.clear();else{if(Ee&&ve.count!=1&&(I.repeatTotal+=1),Ee&&w!=0&&I.repeatTotal>=w){I.cycleInterval.clear(),I.dispatchEvent("repeatdone");return}pe==1?I.goRight(D):I.goLeft(D)}else if(I.selectedIndex==t.length-r){if(!Ee&&ve.count!=1&&(I.repeatTotal+=1),!Ee&&w!=0&&I.repeatTotal>=w){I.cycleInterval.clear(),I.dispatchEvent("repeatdone");return}I.repeatTotal>=1&&I.dispatchEvent("repeated"),!Ee&&!K?I.cycleInterval.clear():pe==1?I.goRight(D):I.goLeft(D)}else pe==1?I.goRight(D):I.goLeft(D)})):(I.repeatTotal=.5,I.cycleInterval=e.interval(d*2,function(ve){if(I.selectedIndex==0){if(ve.count!=1&&(I.repeatTotal+=.5),w!=0&&I.repeatTotal>w){I.cycleInterval.clear(),I.dispatchEvent("bouncedone");return}I.repeatTotal>=1&&I.dispatchEvent("bounced"),pe=1,I.goRight(D)}else if(I.selectedIndex==t.length-r){if(ve.count!=1&&(I.repeatTotal+=.5),w!=0&&I.repeatTotal>w){I.cycleInterval.clear(),I.dispatchEvent("bouncedone");return}I.repeatTotal>=1&&I.dispatchEvent("bounced"),pe=-1,I.goLeft(D)}else Gr(),pe==1?I.goRight(D):I.goLeft(D)})),I},I.enableArrows=function(){return I.swipeObj&&(I.swipeObj.active=!0),P.mouse(),C.mouse(),I},I.disableArrows=function(){return I.swipeObj&&(I.swipeObj.active=!1),P.noMouse(),C.noMouse(),I},Object.defineProperty(I,"selectedIndex",{get:function(){return(x+t.length)%t.length},set:function(d){x=e.constrain(d,0,t.length-r),I.tile.x=ie-x*(U+o),p()}}),Object.defineProperty(I,"swipe",{get:function(){return S},set:function(d){S=d,S&&!I.swipeObj&&y(),I.swipeObj.active=S}}),j(),G(),y(),f&&f.center(I,1),x&&(I.selectedIndex=x),this.dispose=function(d,D,K){return I.swipeObj&&I.swipeObj.dispose(),I.recycleEvent&&I.off("cyclecleared",I.recycleEvent),I.cycleWait&&I.cycleWait.clear(),I.cycleInterval&&I.cycleInterval.clear(),I.swipeObj=I.recycleEvent=I.cycleWait=null,K||this.zimContainer_dispose(),!0},L!==!1&&e.styleTransforms(this,V),this.clone=function(){for(var d=[],D=0;D<t.length;D++){var K=t[D];K.duplicate?d.push(K.duplicate()):K.clone?d.push(K.clone()):d.push(e.copy(t[D]))}return I.cloneProps(new e.Carousel(d,r,i,o,l,f,h,g,_,P.duplicate(),C.duplicate(),T,N,O,S,k,x,E,L,this.group))}},e.extend(e.Carousel,e.Container,["clone","dispose"],"zimContainer",!1),e.Loader=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G){var y="width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",p;if(p=mt(e.Loader,arguments,y,this))return p;qe("67.5"),this.group=j;var d=ce===!1?{}:e.getStyle("Loader",this.group,G);if(n(t)&&(t=d.width!=null?d.width:250),n(r)&&(r=d.height!=null?d.height:70),n(o)&&(o=d.type!=null?d.type:"image"),o=o.toLowerCase(),n(l)&&(l=d.backgroundColor!=null?d.backgroundColor:"rgba(0,0,0,.05)"),n(f)&&(f=d.rollBackgroundColor!=null?d.rollBackgroundColor:"rgba(0,0,0,.1)"),n(h)&&(h=d.color!=null?d.color:"rgba(0,0,0,.5)"),n(g)&&(g=d.rollColor!=null?d.rollColor:h),n(_)&&(_=d.borderColor!=null?d.borderColor:"rgba(0,0,0,.3)"),n(C)&&(C=d.borderWidth!=null?d.borderWidth:1),n(E)&&(E=d.dashed!=null?d.dashed:!0),n(T)&&(T=d.corner!=null?d.corner:0),n(ae)&&(ae=d.multiple!=null?d.multiple:!0),n(i)&&(i=d.label!=null?d.label:new e.Label({text:"UPLOAD PIC",color:h,rollColor:g,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),typeof ee>"u")if(le.zdf)var ee=le.zdf;else{Et&&ht("zim.Loader - please provide a reference to zim Frame");return}this.zimButton_constructor(t,r,i,l,f,null,h,g,null,_,C,P,null,L,A,null,F,q,null,T,E,N,O,k,x,null,null,null,null,null,S,null,null,null,b,V,null,null,null,null,null,null,I,ne,null,R,Q,null,U,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var D=this,K=ee.stage;i=D.label;var w=D.tag=document.createElement("input");ee.tag?ee.tag.appendChild(w):document.body.appendChild(w),w.setAttribute("type","file"),w.setAttribute("aria-hidden",!0),ae&&w.setAttribute("multiple","multiple"),ie&&w.setAttribute("accept",ie),w.hidden=!0,w.zimDisplay=w.style.display||"inline-block",w.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){w.click()}),w.addEventListener("change",Z);var Y=new ze.DOMElement(w);K.addChild(Y),Y.alpha=0;var Ee=ee.retina&&le.devicePixelRatio||1;this.resize=function($,ue){if(!D.stage){w.setAttribute("aria-hidden",!0),w.hidden=!0,w.style.display="none";return}w.setAttribute("aria-hidden",!1),w.hidden=!1,w.style.display=w.zimDisplay,n($)&&($=!0),D.time1&&clearTimeout(D.time1),ue||(D.time1=setTimeout(function(){D.resize(null,!0)},40));var xe=D.getConcatenatedMatrix().decompose(),Ye=D.localToGlobal(0,0);if(ee.retina){var se=e.browserZoom();ee.tag?(Y.x=Ye.x/Ee/se,Y.y=Ye.y/Ee/se):(Y.x=ee.x/K.scaleX+Ye.x/Ee/se,Y.y=ee.y/K.scaleY+Ye.y/Ee/se),e.sca(Y,xe.scaleX/Ee/K.scaleX/se,xe.scaleY/Ee/K.scaleY/se)}else Y.x=ee.x+Ye.x*ee.scale,Y.y=ee.y+Ye.y*ee.scale,e.sca(Y,ee.scale*xe.scaleX,ee.scale*xe.scaleY);return K.update(),D},this.resize(),D.on("added",function(){w.style.display="block",w.hidden=!1,w.style.display="block",D.resize()}),D.added(X);function X(){D.resize(),D.time2=setTimeout(function(){w.style.display="block",w.hidden=!1,w.style.display="block"},50),D.on("added",X,null,!0)}D.on("removed",function(){D.time1&&clearTimeout(D.time1),D.time2&&clearTimeout(D.time2),w&&(w.style.display="none",w.hidden=!0,w.style.display="none")});function Z($){var ue;if($.dataTransfer&&$.dataTransfer.files&&$.dataTransfer.files.length>0?ue=$.dataTransfer.files:ue=$.target.files,o=="text"||o=="json"){var xe=[],Ye;if(o.toLowerCase()=="json")var se=[],be}else if(o=="other")var te=[],_e;else var J=[],ye;for(var Re=0;Re<ue.length;Re++)(function(de){var Me=new FileReader;Me.onload=function(Be){if(o=="text"||o=="json"){var he=Be.target.result;if(xe.push(he),o=="json"){var Ae=JSON.parse(he);se.push(Ae)}if(xe.length==1&&(Ye=he,o=="json"&&(be=Ae)),xe.length==ue.length){var Ce=new ze.Event("loaded");Ce.texts=xe,Ce.text=Ye,Ce.lastText=he,Ce.total=xe.length,o=="json"&&(Ce.jsons=se,Ce.json=be,Ce.lastJSON=Ae),D.dispatchEvent(Ce),w.value=""}}else if(o=="other"){var me=Be.target.result;if(te.push(me),te.length==1&&(_e=me),te.length==ue.length){var Ce=new ze.Event("loaded");Ce.others=te,Ce.other=_e,Ce.lastOther=me,Ce.total=te.length,D.dispatchEvent(Ce),w.value=""}}else{var Ne=new Image;Ne.onload=function(){var ge=new e.Bitmap(Ne);if(J.push(ge),J.length==1&&(ye=ge),J.length==ue.length){var Ue=new ze.Event("loaded");Ue.bitmaps=J,Ue.bitmap=ye,Ue.lastBitmap=ge,Ue.total=J.length,D.dispatchEvent(Ue),w.value=""}},Ne.src=Be.target.result}},o=="text"||o=="json"?Me.readAsText(de):Me.readAsDataURL(de)})(ue[Re])}var pe=new XMLHttpRequest;if(pe.upload){var ve=function($){w.removeEventListener("change",Z),Z($),setInterval(function(){w.addEventListener("change",Z)},100)};w.addEventListener("drop",ve)}this.save=function($,ue,xe,Ye,se,be,te,_e,J,ye,Re){var de="content, filename, x, y, width, height, cached, cachedBounds, type, data, quality",Me;if(Me=mt(D.save,arguments,de))return Me;if(n($)&&($=ee.stage),n(J)&&(J="png"),n(ue))ue="saved_"+String(e.makeID("numbers",5))+"."+J;else{var Be=ue.split(".");if(Be.length==1)ue+="."+J;else{var he=["png","jpg","jpeg"],Ae=he.indexOf(Be[Be.length-1].toLowerCase());Ae==-1?ue+="."+J:J=he[Ae]}}if(n(xe)&&(xe=0),n(Ye)&&(Ye=0),n(se)&&(se=$.getBounds&&$.getBounds()?$.getBounds().width:ee.width),n(be)&&(be=$.getBounds&&$.getBounds()?$.getBounds().height:ee.height),$.cache(xe,Ye,se,be),ye){var Ce=$.cacheCanvas.toDataURL("image/"+J,Re);return te?_e&&$.cache(_e.x,_e.y,_e.width,_e.height):$.uncache(),Ce}var me=/Edge\/(\d)+/.test(navigator.userAgent);if(me){var Ne=le.open();Ne.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+$.cacheCanvas.toDataURL("image/"+J)+"></body></html>"),Ne.document.close()}else{J=="jpg"&&(J="jpeg");var ge=document.createElement("a");ge.setAttribute("download",ue),ge.setAttribute("href",$.cacheCanvas.toDataURL("image/"+J,Re)),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)}return te?_e&&$.cache(_e.x,_e.y,_e.width,_e.height):$.uncache(),D},ce!==!1&&e.styleTransforms(this,d),this.clone=function(){var $=new e.Loader(t,r,n(i)?null:i.clone(),l,f,h,g,_,C,T,N,O,S,k,x,n(L)?null:L.clone(),n(A)?null:A.clone(),b,n(F)?null:F.clone(),n(q)?null:q.clone(),V,n(I)?null:I.clone(),n(ne)?null:ne.clone(),n(R)?null:R.clone(),n(Q)?null:Q.clone(),U,ee,ce,this.group);return D.cloneProps($)},Object.defineProperty(this,"frame",{get:function(){return ee},set:function($){$!=ee&&(ee.off("update",D.updateEvent),ee.off("resize",D.resizeEvent),ee=$,D.resizeEvent=ee.on("resize",D.resize),D.updateEvent=ee.on("update",D.resize),D.resize())}}),this.resizeEvent=ee.on("resize",D.resize),this.updateEvent=ee.on("update",D.resize),this.dispose=function($,ue,xe){var Ye;return D.stage&&(Ye=D.stage),ee.off("update",D.updateEvent),ee.off("resize",D.resizeEvent),Z&&w.removeEventListener("change",Z),ve&&w.removeEventListener("drop",ve),w&&w.parentNode&&w.parentNode.removeChild(w),w=null,xe||(this.zimButton_dispose(),Ye&&Ye.update()),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R){var Q="width, height, placeholder, text, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, keyboardShift, style, group, inherit",U;if(U=mt(e.TextArea,arguments,Q,this))return U;qe("67.6"),this.group=ne;var ee=I===!1?{}:e.getStyle("TextArea",this.group,R);if(n(t)&&(t=ee.width!=null?ee.width:250),n(r)&&(r=ee.height!=null?ee.height:70),n(i)&&(i=ee.placeholder!=null?ee.placeholder:null),n(o)&&(o=ee.text!=null?ee.text:null),n(l)&&(l=ee.size!=null?ee.size:20),n(f)&&(f=ee.padding!=null?ee.padding:5),n(h)&&(h=ee.color!=null?ee.color:e.granite),n(g)&&(g=ee.backgroundColor!=null?ee.backgroundColor:"rgba(256,256,256,.1)"),n(_)&&(_=ee.borderColor!=null?ee.borderColor:"rgba(0,0,0,.1)"),n(P)&&(P=ee.borderWidth!=null?ee.borderWidth:null),_<0||P<0?_=P=null:_!=null&&P==null&&(P=1),n(C)&&(C=ee.corner!=null?ee.corner:0),!n(N)&&n(T)&&(T=ee.shadowColor!=null?ee.shadowColor:"rgba(0,0,0,.3)"),!n(T)&&n(N)&&(N=ee.shadowBlur!=null?ee.shadowBlur:10),n(E)&&(E=ee.password!=null?ee.password:!1),n(L)&&(L=ee.inputType!=null?ee.inputType:!1),n(A)&&(A=ee.wrap!=null?ee.wrap:!0),n(b)&&(b=ee.maxLength!=null?ee.maxLength:null),n(x)&&(x=ee.spellCheck!=null?ee.spellCheck:!0),n(k)&&(k=ee.readOnly!=null?ee.readOnly:!1),n(V)&&(V=ee.keyboardShift!=null?ee.keyboardShift:!1),this.maxLength=b,n(q)&&(q=ee.expand!=null?ee.expand:20),q===!0&&(q=20),typeof F>"u")if(le.zdf)var F=le.zdf;else{Et&&ht("zim.TextArea - please provide a reference to zim Frame");return}this.zimContainer_constructor(t,r,null,null,!1),this.type="TextArea";var ae=this,ie=F.stage,ce=this.background=new e.Rectangle(t,r,g,_,P,C,O,null,null,!1).expand(q);T!=-1&&N>0&&(ce.shadow=new ze.Shadow(T,3,3,N)),ae.addChild(ce);var j=ae.tag=L||E?document.createElement("input"):document.createElement("textarea");F.tag?F.tag.appendChild(j):document.body.appendChild(j),n(S)||(j.setAttribute("id",S),j.setAttribute("name",S)),E?j.setAttribute("type","password"):L&&j.setAttribute("type",L),j.readOnly=k,j.spellcheck=x,i&&j.setAttribute("placeholder",i),o&&(j.value=o),j.zimDisplay=j.style.display||"inline-block",j.style.cssText="background-color:rgba(0,0,0,.01); color:"+h+"; resize:none; z-index:3; width:"+(t-f*2)+"px; height:"+(r-f*2)+"px; overflow:hidden; outline:none;font-size:"+l+"px; font-family:"+(ee.font!=null?ee.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",ae.taInput=function(){!n(ae.maxLength)&&ae.text.length>ae.maxLength&&(ae.text=ae.text.substring(0,ae.maxLength)),ae.dispatchEvent("input")};var G=ae.y;ae.taFocus=function(){if(le.M&&V){ae.re&&ae.stage.frame.off("resize",ae.re),ae.re=ae.stage.frame.on("resize",function(){ae.stage&&D>ae.stage.height/4&&(ae.stage.y=ae.stage.scaleY*(ae.stage.height/4-D),ae.stage.update())});var D=ae.localToGlobal(0,0).y;ae.stage&&D>ae.stage.height/4&&(ae.stage.y=ae.stage.scaleY*(ae.stage.height/4-D),ae.stage.update())}ae.stage&&(F=ae.stage.frame),F.zil&&le.removeEventListener("keydown",F.zil[0]),ae.dispatchEvent("focus")},ae.taBlur=function(){le.M&&V&&ae.stage&&(ae.re&&ae.stage.frame.off("resize",ae.re),ae.stage.y=G,ae.stage.update()),ae.stage&&(F=ae.stage.frame),F.zil&&le.addEventListener("keydown",F.zil[0]),ae.dispatchEvent("blur")},j.addEventListener("change",ae.taChange),j.addEventListener("input",ae.taInput),j.addEventListener("focus",ae.taFocus),j.addEventListener("blur",ae.taBlur);var y=new ze.DOMElement(j);y.alpha=0,this.on("mousedown",function(){setTimeout(function(){j.focus()},100)}),this.setFocus=function(D){return n(D)&&(D=!0),D?j.focus():j.blur(),ae};var p=F.retina&&le.devicePixelRatio||1;this.resize=function(D,K){n(D)&&(D=!0),ae.time1&&clearTimeout(ae.time1),K||(ae.time1=setTimeout(function(){ae.resize(null,!0)},40));var w=ae.getConcatenatedMatrix().decompose(),Y=ae.localToGlobal(f,f);if(F.retina){var Ee=e.browserZoom();F.tag?(y.x=Y.x/p/Ee,y.y=Y.y/p/Ee):(y.x=F.x/ie.scaleX+Y.x/p/Ee,y.y=F.y/ie.scaleY+Y.y/p/Ee),e.sca(y,w.scaleX/p/ie.scaleX/Ee,w.scaleY/p/ie.scaleY/Ee)}else F.tag?(y.x=Y.x*F.scale,y.y=Y.y*F.scale):(y.x=F.x+Y.x*F.scale,y.y=F.y+Y.y*F.scale),e.sca(y,F.scale*w.scaleX,F.scale*w.scaleY);return y.alpha=ae.alpha,ae.parent&&(y.alpha*=ae.parent.alpha),D&&ae.stage&&ie.update(),ae},this.resize(),ae.added(d);function d(){ie.addChild(y),ae.time2=setTimeout(function(){j.style.display=j.zimDisplay},50),ae.resize(),ae.on("added",d,null,!0),ae.FOEvent=ie.on("stagemousedown",function(){ae.focus=!1})}ae.on("removed",function(){ae.time1&&clearTimeout(ae.time1),ae.time2&&clearTimeout(ae.time2),ie.removeChild(y),ae.FOEvent&&ie.off("stagemousedown",ae.FOEvent),j&&(j.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return j.value},set:function(D){j.value=D}}),Object.defineProperty(this,"text",{get:function(){return j.value},set:function(D){j.value=D}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==j},set:function(D){ae.setFocus(D)}}),Object.defineProperty(this,"readOnly",{get:function(){return j.readOnly},set:function(D){j.readOnly=D}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ae},set:function(){e.KEYFOCUS=ae}}),e.KEYFOCUS||(ae.keyFocus=!0),ae.taMousedown=function(){ae.keyFocus=!0},j.addEventListener("mousedown",ae.taMousedown),A||(j.style.whiteSpace="pre"),I!==!1&&e.styleTransforms(this,ee),this.clone=function(){var D=new e.TextArea(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,this.group,R);return ae.cloneProps(D)},Object.defineProperty(this,"frame",{get:function(){return F},set:function(D){D!=F&&(F.off("update",ae.updateEvent),F.off("resize",ae.resizeEvent),F=D,ae.resizeEvent=F.on("resize",ae.resize),ae.updateEvent=F.on("update",ae.resize),p=F.retina&&le.devicePixelRatio||1,ie=F.stage,ae.resize())}}),this.resizeEvent=F.on("resize",ae.resize),this.updateEvent=F.on("update",ae.resize),this.dispose=function(D,K,w){var Y;return ae.stage&&(Y=ae.stage),F.off("update",ae.updateEvent),F.off("resize",ae.resizeEvent),Y&&ae.FOEvent&&Y.off("stagemousedown",ae.FOEvent),j&&j.parentNode&&j.parentNode.removeChild(j),j.removeEventListener("change",ae.taChange),j.removeEventListener("input",ae.taInput),j.removeEventListener("focus",ae.taFocus),j.removeEventListener("blur",ae.taBlur),j.removeEventListener("mousedown",ae.taMousedown),j=null,w||(this.zimContainer_dispose(!0),Y&&Y.update()),ae.background=null,!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.Tag=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="width, height, id, frame, backgroundColor, padding, paddingH, paddingV, expand, style, group, inherit",O;if(O=mt(e.Tag,arguments,N,this))return O;qe("67.7"),this.group=C;var S=P===!1?{}:e.getStyle("Tag",this.group,T);if(n(t)&&(t=S.width!=null?S.width:250),n(r)&&(r=S.height!=null?S.height:70),n(i)&&(i=S.id!=null?S.id:"zimTag_"+e.rand(1e4)),typeof o>"u")if(le.zdf)var o=le.zdf;else{Et&&ht("zim.Tag - please provide a reference to zim Frame");return}n(l)&&(l=S.backgroundColor!=null?S.backgroundColor:"rgba(0,0,0,0)"),n(f)&&(f=S.padding!=null?S.padding:10),n(h)&&(h=S.paddingH!=null?S.paddingH:f),n(g)&&(g=S.paddingV!=null?S.paddingV:f),n(_)&&(_=S.expand!=null?S.expand:20),_===!0&&(_=20),this.zimContainer_constructor(t,r,null,null,!1),this.type="Tag",this.tagID=i,this.id=i;var k=this,x=o.stage;k.background=new e.Rectangle(t+h,r+g,l).center(this).expand(_||0);var E=k.tag=document.createElement("div");o.tag?o.tag.appendChild(E):document.body.appendChild(E),E.setAttribute("id",i),E.setAttribute("name",i),E.zimDisplay=E.style.display||"inline-block",E.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var L=new ze.DOMElement(E);L.alpha=0;var A=o.retina&&le.devicePixelRatio||1;this.resize=function(F,q){n(F)&&(F=!0),k.time1&&clearTimeout(k.time1),q||(k.time1=setTimeout(function(){k.resize(null,!0)},40));var V=k.getConcatenatedMatrix().decompose(),I=k.localToGlobal(0,0);if(o.retina){var ne=e.browserZoom();o.tag?(L.x=I.x/A/ne,L.y=I.y/A/ne):(L.x=o.x/x.scaleX+I.x/A/ne,L.y=o.y/x.scaleY+I.y/A/ne),e.sca(L,V.scaleX/A/x.scaleX/ne,V.scaleY/A/x.scaleY/ne)}else L.x=o.x+I.x*o.scale,L.y=o.y+I.y*o.scale,e.sca(L,o.scale*V.scaleX,o.scale*V.scaleY);return L.alpha=k.alpha,k.parent&&(L.alpha*=k.parent.alpha),F&&k.stage&&x.update(),k},this.resize(),k.added(b);function b(){x.addChild(L),k.time2=setTimeout(function(){E.style.display=E.zimDisplay},50),k.resize(),k.on("added",b,null,!0)}k.on("removed",function(){k.time1&&clearTimeout(k.time1),k.time2&&clearTimeout(k.time2),x.removeChild(L),E&&(E.style.display="none")}),this.add=function(F){return E.innerHTML+=F,k},Object.defineProperty(this,"innerHTML",{get:function(){return E.innerHTML},set:function(F){E.innerHTML=F}}),Object.defineProperty(this,"style",{get:function(){return E.style},set:function(F){E.style=F}}),P!==!1&&e.styleTransforms(this,S),this.clone=function(){var F=new e.Tag(t,r,i,o,l,f,h,g,_,P,this.group,T);return k.cloneProps(F)},Object.defineProperty(this,"frame",{get:function(){return o},set:function(F){F!=o&&(o.off("update",k.updateEvent),o.off("resize",k.resizeEvent),o=F,k.resizeEvent=o.on("resize",k.resize),k.updateEvent=o.on("update",k.resize),k.resize())}}),this.resizeEvent=o.on("resize",k.resize),this.updateEvent=o.on("update",k.resize),this.dispose=function(F,q,V){var I;return k.stage&&(I=k.stage),o.off("update",k.updateEvent),o.off("resize",k.resizeEvent),E&&E.parentNode&&E.parentNode.removeChild(E),E=null,V||(this.zimContainer_dispose(!0),I&&I.update()),!0}},e.extend(e.Tag,e.Container,["clone","dispose"],"zimContainer",!1);function c(t,r){r?(t.mouseChildren=!0,t.mouseEnabled=!0,t._enabled=!0):(t.mouseChildren=!1,t.mouseEnabled=!1,t._enabled=!1)}if(e.addTo=function(t,r,i,o){var l="obj, container, index, localToLocal",f;if(f=mt(e.addTo,arguments,l))return f;if(qe("47.5"),n(t)){ht("zim methods - addTo(): please provide object");return}if(n(r))if(le.zdf)r=le.zdf.stage;else{ht("zim methods - addTo(): please provide container");return}if(n(o)&&(o=!0),t.parent||(o=!1),o)var h=t.parent.localToLocal(t.x,t.y,r);return n(i)||isNaN(i)?r.addChild(t):r.addChildAt(t,i),o&&(t.x=h.x,t.y=h.y),t},e.removeFrom=function(t,r){if(qe("47.6"),n(t)){ht("zim methods - removeFrom(): please provide object");return}return t.removePhysics&&t.removePhysics(),n(r)?t.parent&&t.parent.removeChild(t):r.removeChild(t),t},e.added=function(t,r,i,o){if(qe("47.7"),!(n(t)||n(r)||typeof r!="function")){var l=v(i);if(n(i)&&(i=l=="s"?.1:100),t.stage){r(t.stage,t);return}var f=i*(l=="s"?1e3:1),h;o&&(a(o),h=o*(l=="s"?1e3:1));var g=Date.now(),_=0,P=setInterval(function(){if(_>5){clearInterval(P);return}_++,t.stage&&(r(t.stage,t),clearInterval(P),clearInterval(C))},10),C=setInterval(function(){h>0&&g-Date.now()>h&&clearInterval(C),t.stage&&(r(t.stage,t),clearInterval(C))},f);return C}},e.centerReg=function(t,r,i,o){var l="obj, container, index, add",f;if(f=mt(e.centerReg,arguments,l))return f;if(t.type=="AC"&&le.zdf)return le.zdf.ac("centerReg",arguments),t.addTo(r,i);if(qe("48"),n(t)||!t.getBounds||!t.getBounds())return ht("zim methods - centerReg(): please provide object with bounds set"),t;n(o)&&(o=!0),n(r)&&t.parent&&o&&(r=t.parent,n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t)),!n(r)&&r==t.parent&&(n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t));var h=t.getBounds();return t.regX=h.x+h.width/2,t.regY=h.y+h.height/2,o?e.center(t,r,i):t},e.center=function(t,r,i,o){var l="obj, container, index, add",f;if(f=mt(e.center,arguments,l))return f;if(t.type=="AC"&&le.zdf)return le.zdf.ac("center",arguments),t.addTo(r,i);if(e.centerCheck||(qe("48.1"),e.centerCheck=!0),n(t)||!t.getBounds)return ht("zim.center(): please provide object with bounds"),t;if(n(r)&&(t.parent?r=t.parent:le.zdf&&(r=le.zdf.stage)),n(r)||!r.getBounds)return ht("zim.center(): please provide container with bounds"),t;var h=t.getBounds(),g=r.getBounds();n(o)&&(o=!0);var _=!1;if(n(g)&&(r.setBounds(0,0),g=r.getBounds(),_=!0),o&&r.addChild&&(n(i)||typeof i=="number"&&isNaN(i)?(!t.parent||t.parent!=r)&&r.addChild(t):r.addChildAt(t,i)),n(h))return t.x=g.x+g.width/2,t.y=g.y+g.height/2,t;var P=!1,C=!1;r.scaleX==0&&(P=!0,r.scaleX=1e-5),r.scaleY==0&&(C=!0,r.scaleY=1e-5);var T=t.localToLocal(t.regX,t.regY,r),N=e.boundsToGlobal(t),O=e.boundsToGlobal(r,N,!0);if(P&&(r.scaleX=0),C&&(r.scaleY=0),t.x=g.x+g.width/2-O.width/2+(T.x-O.x),t.y=g.y+g.height/2-O.height/2+(T.y-O.y),!o&&r.getStage&&r.stage&&t.parent){var S=r.localToLocal(t.x,t.y,t.parent);t.x=S.x,t.y=S.y}return _&&r.setBounds(null),t},e.place=function(t,r){if(qe("49"),n(t))return;n(r)&&(r="obj"),e.lastPlace=t;function i(){ht(r+".x = "+Math.round(t.x)+"; "+r+".y = "+Math.round(t.y)+";"),ht(r+".loc("+Math.round(t.x)+", "+Math.round(t.y)+");")}e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),t.on("mousedown",function(){e.lastPlace=t});var o=le.zdf;return o&&o.on("keydown",function(l){if(t==e.lastPlace){var f=l.keyCode;if(f>=37&&f<=40){var h=l.shiftKey?10:1;t.mov(f==37?-1*h:f==39?1*h:0,f==38?-1*h:f==40?1*h:0),i(),t.stage&&t.stage.update()}}}),ht("place "+r+" - to get new position",t),t.on("click",i),t},e.placeReg=function(t,r){if(qe("49.5"),n(t))return;var i=t.stage;if(n(i))return ht("zim.placeReg() - add object to stage before calling placeReg()"),t;n(r)&&(r="obj");function o(){var h=t.globalToLocal(f.x,f.y);ht(r+".regX = "+Math.round(h.x)+"; "+r+".regY = "+Math.round(h.y)+";"),ht(r+".reg("+Math.round(h.x)+", "+Math.round(h.y)+");")}var l=t.parent.localToGlobal(t.x,t.y),f=new e.Shape(-25,-25,50,50,null,!1).addTo(i).pos({x:l.x,y:l.y,reg:!0});return f.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),f.compositeOperation="difference",f.expand(0),e.drag({obj:f}),ht("place cursor to get new registration point location"),i.on("stagemouseup",o),t},e.pos=function(t,r,i,o,l,f,h,g,_,P,C){var T="obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY",N;if(N=mt(e.pos,arguments,T))return N;if(t.type=="AC"&&le.zdf)return le.zdf.ac("pos",arguments),t.addTo(f,h);qe("41.5"),le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?o=="start"?o="right":o=="end"&&(o="left"):o=="start"?o="left":o=="end"&&(o="right");var O=!1;o=="right"&&(O=!0);var S=!1;l=="bottom"&&(S=!0);var k=e.POSREG;if(le.POSREG!=null&&(k=le.POSREG),n(_)&&(_=k),n(t))return;n(_)&&n(P)&&(P=!1),n(_)&&n(C)&&(C=!1),!n(_)&&n(P)&&(P=_),!n(_)&&n(C)&&(C=_),n(g)&&(g=!0),!n(f)&&!f.addChild&&(f=null),!t.getBounds&&!t.getBounds()&&(P=C=!1),t.zimPos={x:r,y:i,h:o,v:l,i:h},n(f)&&(t.parent?f=t.parent:le.zdf&&(f=le.zdf.stage)),!t.parent&&n(r)&&(r=0),!t.parent&&n(i)&&(i=0);var x=!1;t.getBounds()||(t.setBounds(0,0),x=!0);var E=!1;f&&!f.getBounds()&&(f.setBounds(0,0),E=!0);function L(){n(h)||typeof h=="number"&&isNaN(h)?f.contains(t)||f.addChild(t):f.addChildAt(t,h)}if(!n(f)&&f.addChild&&g){var A=f.getBounds().clone();L();var b=f.getBounds();(A.width!=b.width||A.height!=b.height||A.x!=b.x||A.y!=b.y)&&(t.removeFrom(),f.setBounds(A.x,A.y,A.width,A.height),E=!0,L())}if(!P&&!C&&(o=="center"||o=="middle")&&(l=="center"||l=="middle"))return t.center({container:f}),t.mov(r,i),x&&t.setBounds(null),E&&f.setBounds(null),t;if(o=="center"||o=="middle"){if(P)t.x=f.width/2;else{var F=t.y;t.center(),t.y=F}t.mov(r),r=null,o=null}else o===!0&&(O=!0);if(l=="center"||l=="middle"){if(C)t.y=f.height/2;else{var q=t.x;t.center(),t.x=q}t.mov(0,i),i=null,l=null}else l===!0&&(S=!0);function V(){var ee=t.getBounds(),ae=ee.x,ie=ee.y,ce=ee.width,j=ee.height,G=t._props.matrix;G=t.getMatrix(G),(ae||ie)&&G.appendTransform(0,0,1,1,0,0,0,-ae,-ie);var y=ce*G.a,p=ce*G.b,d=j*G.c,D=j*G.d,K=G.tx,w=G.ty,Y=K,Ee=K,X=w,Z=w;return(ae=y+K)<Y?Y=ae:ae>Ee&&(Ee=ae),(ae=y+d+K)<Y?Y=ae:ae>Ee&&(Ee=ae),(ae=d+K)<Y?Y=ae:ae>Ee&&(Ee=ae),(ie=p+w)<X?X=ie:ie>Z&&(Z=ie),(ie=p+D+w)<X?X=ie:ie>Z&&(Z=ie),(ie=D+w)<X?X=ie:ie>Z&&(Z=ie),{x:Y,y:X,width:Ee-Y,height:Z-X}}if(t.parent&&t.parent.getBounds){if(f=t.parent,n(r)&&O==!0&&(r=0),n(i)&&S==!0&&(i=0),n(r)||(t.x=r),n(i)||(t.y=i),n(r)&&n(i)&&!O&&!S)return x&&t.setBounds(null),E&&f.setBounds(null),t;var I=0,ne=0;if(t.getBounds()){var R=V();if(!n(r)){var Q;O?Q=new e.Point(R.x+R.width,R.y+R.height):Q=new e.Point(R.x,R.y),I=Q.x-r}n(i)||(S?Q=new e.Point(R.x+R.width,R.y+R.height):Q=new e.Point(R.x,R.y),ne=Q.y-i);var U=f.getBounds();n(r)||(O?P?t.x=U.width+U.x-r:t.x=U.width+U.x-r-I:(P?t.x=r:t.x=r-I,t.x+=U.x)),n(i)||(S?C?t.y=U.height+U.y-i:t.y=U.height+U.y-i-ne:(C?t.y=i:t.y=i-ne,t.y+=U.y))}}return x&&t.setBounds(null),E&&f.setBounds(null),g||t.removeFrom(),t},e.loc=function(t,r,i,o,l,f,h,g){var _="obj, target, y, container, index, add, localToLocal, x",P;if(P=mt(e.loc,arguments,_))return P;if(t.type=="AC"&&le.zdf)return le.zdf.ac("loc",arguments),t.addTo(o,l);if(qe("41.55"),!n(t)){if(typeof r=="number"&&(g=r,r=null),n(r)||(Array.isArray(r)?(g=r[0],i=r[1]):(n(r.x)||(g=r.x),n(r.y)||(i=r.y))),n(g)&&n(r)&&(g=t.x),n(i)&&n(r)&&(i=t.y),n(f)&&(f=!0),n(o)&&(t.parent?o=t.parent:le.zdf&&(o=le.zdf.stage)),f&&o&&(!t.parent||o!=t.parent?n(l)||isNaN(l)?o.addChild(t):o.addChildAt(t,l):n(l)||o.addChildAt(t,l)),n(h)&&(h=!0),r&&r.parent&&t.parent&&h){var C=r.parent.localToLocal(g,i,t.parent);g=C.x,i=C.y}return t.x=g,t.y=i,t}},e.mov=function(t,r,i){var o="obj, x, y",l;if(l=mt(e.mov,arguments,o))return l;if(t.type=="AC"&&le.zdf)return le.zdf.ac("mov",arguments),t;if(qe("41.6"),!n(t))return n(r)||(t.x+=r),n(i)||(t.y+=i),t},e.sca=function(t,r,i){return t.type=="AC"&&le.zdf?(le.zdf.ac("sca",arguments),t):(qe("41.97"),n(t)||n(t.scaleX)||(n(r)&&(r=t.scaleX),n(i)&&(i=r),t.scaleX=r,t.scaleY=i),t)},e.alp=function(t,r){if(qe("41.7"),!n(t))return n(r)||(t.alpha=t.hovOriginal=r,t.tag&&t.tag.style&&(t.type!="Loader"&&(t.tag.style.opacity=r),r==0?t.tag.style.display=t.tag.zimDisplay="none":t.tag.style.display=t.tag.zimDisplay="inline-block")),t},e.vis=function(t,r){if(qe("41.71"),!n(t))return t.visible=r,t.tag&&t.tag.style&&(r?t.tag.style.display=t.tag.zimDisplay="inline-block":t.tag.style.display=t.tag.zimDisplay="none"),t},e.ble=function(t,r){if(qe("41.72"),!n(t))return n(r)&&(r="difference"),t.compositeOperation=r,(t.type=="Blob"||t.type=="Squiggle")&&t.update(),t},e.dye=function(t,r){if(qe("41.73"),!n(t))return t.hasOwnProperty("backgroundColor")?t.backgroundColor=r:t.hasOwnProperty("color")&&(t.color=r),t},e.hov=function(t,r,i){if(qe("41.75"),!n(t))return n(r)&&(r=1),n(i)&&(i=typeof r=="number"?"alpha":"color"),t.hovMouseover&&(t.off("mouseover",t.hovMouseover),t.off("mouseout",t.hovMouseout)),r==-1?(t.cur("default"),n(t.hovOld)||(t[t.hovType]=t.hovOld),t.hovOld=null,t.stage&&t.stage.update(),t):(t.cur(),t.hovOld=t[i],t.hovNew=r,t.hovType=i,t.hovMouseover=t.on("mouseover",function(){t[i]=t.hovNew,t.stage&&t.stage.update()}),t.hovMouseout=t.on("mouseout",function(){t[i]=t.hovOld,t.stage&&t.stage.update()}),t)},e.rot=function(t,r,i,o){if(qe("41.8"),!n(t)){if(t.type=="AC"&&le.zdf)return le.zdf.ac("rot",arguments),t;if(!n(r))if(t.parent&&(!n(i)||!n(o))){n(i)&&(i=t.x),n(o)&&(o=t.y);var l=t.parent.localToLocal(i,o,t),f=new e.Point(t.x,t.y);t.reg(l.x,l.y),t.rotation=r,t.x=i,t.y=o;var h=t.parent.localToLocal(f.x,f.y,t);t.reg(h.x,h.y),t.x=f.x,t.y=f.y}else t.rotation=r;return t}},e.siz=function(t,r,i,o){if(qe("41.85"),!n(t))return t.type=="AC"&&le.zdf?(le.zdf.ac("siz",arguments),t):(n(o)&&(o=!1),!n(r)&&!n(i)?(t.widthOnly=r,t.heightOnly=i):n(r)?n(i)||(o?t.heightOnly=i:t.height=i):o?t.widthOnly=r:t.width=r,t)},e.ske=function(t,r,i){if(qe("41.9"),!n(t))return t.type=="AC"&&le.zdf?(le.zdf.ac("ske",arguments),t):(n(r)||(t.skewX=r),n(i)||(t.skewY=i),t)},e.reg=function(t,r,i,o){if(qe("41.95"),!n(t)){if(t.type=="AC"&&le.zdf)return le.zdf.ac("reg",arguments),t;var l=t.regX,f=t.regY,h=r,g=le.DIR||e.DIR||"ltr",_;if(r=="default"&&(r=null),typeof r=="string"&&(_=t.getBounds(),_?(r=="start"&&(r=g=="ltr"?"left":"right"),r=="end"&&(r=g=="ltr"?"right":"left"),r=="left"?r=_.x:r=="right"?r=_.x+_.width:(r=="center"||r=="middle")&&(r=_.x+_.width/2)):r=null),typeof i=="string"?(_||(_=t.getBounds()),_?i=="top"?i=_.y:i=="bottom"?i=_.y+_.height:(i=="center"||i=="middle")&&(i=_.y+_.height/2):i=null):n(i)&&(h=="center"||h=="middle")&&(_||(_=t.getBounds()),_?i=_.y+_.height/2:i=null),i=="default"&&(i=null),n(r)||(t.regX=r),n(i)||(t.regY=i),o&&t.parent){var P=t.localToLocal(l,f,t.parent);t.x-=P.x-t.x,t.y-=P.y-t.y}return t}},e.top=function(t){return qe("41.62"),n(t)||!t.parent||t.parent.setChildIndex(t,t.parent.numChildren-1),t},e.bot=function(t){return qe("41.63"),n(t)||!t.parent||t.parent.setChildIndex(t,0),t},e.ord=function(t,r){if(qe("41.64"),!(n(t)||!t.parent))return n(r)&&(r=0),t.parent.setChildIndex(t,e.constrain(t.parent.getChildIndex(t)+r,0,t.parent.numChildren-1)),t},e.cur=function(t,r){if(qe("41.1"),n(t))return ht("zim methods - cur(): please provide object"),t;n(r)&&(r="pointer");var i=le.zdf;return t.stage&&(i=t.stage.frame),i.cursors&&i.cursors[r]?(t.cursor="none",t._cursor=r,i.cursorList.add(t,r),t):(i.cursorList&&i.cursorList.add(t,!0),t.cursor=r,t)},e.sha=function(t,r,i,o,l){return qe("41.2"),n(t)?(ht("zim methods - sha(): please provide object"),t):(n(r)&&(r="rgba(0,0,0,.3)"),r.blur?(t.shadow=r,t):(n(i)&&(i=t.width?t.width*.08:5),n(o)&&(o=t.height?t.height*.08:5),n(l)&&(l=t.width?t.width*.16:10),r==-1?t.shadow=null:t.shadow=new ze.Shadow(r,i,o,l),t))},e.dep=function(t,r){if(qe("41.65"),!n(t))return n(r)&&(r=0),t.depth=r,t},e.nam=function(t,r){if(qe("41.67"),!(n(t)||n(r)))return t.name=r,e.zimObjectIDs[r]=t,t},e.movement=function(t,r,i){qe("47.75");var o=t.stage||le.zdf.stage;function l(){o=t.stage,t.zimMovementStage=o,t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent),t.zimMovementEvent=o.on("stagemousemove",function(f){r(f)}),t.on("mouseout",function(){t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent)},null,!0)}return e.mobile()?(t.zimMovementEvent&&o.off("pressmove",t.zimMovementEvent),t.zimMovementEvent=t.on("pressmove",function(f){r(f)})):(t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMouseoverEvent=t.on("mouseover",l),i&&l()),t},e.noMovement=function(t){if(qe("47.9"),!n(t))return t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMovementEvent&&t.zimMovementStage&&t.zimMovementStage.off("stagemousemove",t.zimMovementEvent),t},e.tap=function(t,r,i,o,l,f,h,g,_,P){var C="obj, call, distance, time, once, dbl, dblTime, call2, call3, call4",T;if(T=mt(e.tap,arguments,C))return T;if(qe("47.8"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=f?10:5);var N=v(o);n(o)&&(o=N=="s"?8:8e3),n(l)&&(l=!1),n(f)&&(f=!1),n(h)&&(P?h=N=="s"?.5:500:h=N=="s"?1:1e3),t.cur("pointer");var O=!1,S=!1,k;return f?t.zimDblClickDownEvent=t.on("mousedown",function(x){if(k=!1,O){O=!1;return}if(O=!0,x.currentTarget.type=="List"){if(x.target.type=="WindowBacking")return;var E=x.currentTarget.globalToLocal(x.stageX/e.scaX,x.stageY/e.scaY);if(E.y<=0)return}var L=x.stageX/e.scaX,A=x.stageY/e.scaY,b=Date.now(),F,q;S=!0,t.zimDoubleTimeout&&clearTimeout(t.zimDoubleTimeout),t.zimDoubleTimeout=setTimeout(function(){if(S=!1,O=!1,t.zimDblClickUpEvent&&t.off("pressup",t.zimDblClickUpEvent),k&&P)if(Math.abs(L+A-F/e.scaX-q/e.scaY)<i){if(t.excludeTap)return;P(x)}else g&&g(x)},N=="s"?h*1e3:h),t.zimDblClickUpEvent=t.on("pressup",function(V){if(F=V.stageX,q=V.stageY,k=!0,O){_&&_(V);return}else if(!S)return;if(Math.abs(L+A-V.stageX/e.scaX-V.stageY/e.scaY)<i&&Date.now()-b<(N=="s"?o*1e3:o)){if(t.excludeTap)return;clearTimeout(t.zimDoubleTimeout),r(V)}else g&&g(V);V.remove()})},null,l):t.zimClickDownEvent=t.on("mousedown",function(x){if(x.currentTarget.type=="List"){if(x.target.type=="WindowBacking")return;var E=x.currentTarget.globalToLocal(x.stageX/e.scaX,x.stageY/e.scaY);if(E.y<=0)return}var L=x.stageX/e.scaX,A=x.stageY/e.scaY,b=Date.now();t.zimClickUpEvent=t.on("pressup",function(F){if(Math.abs(L+A-F.stageX/e.scaX-F.stageY/e.scaY)<i&&Date.now()-b<(N=="s"?o*1e3:o)){if(t.excludeTap)return;r(F)}else g&&g(F);F.remove()})},null,l),t}},e.noTap=function(t){if(qe("47.9"),!n(t))return t.cursor&&t.cur("default"),t.zimClickDownEvent&&t.off("mousedown",t.zimClickDownEvent),t.zimClickUpEvent&&t.off("pressup",t.zimClickUpEvent),t.zimDoubleTimeout&&clearInterval(t.zimDoubleTimeout),t},e.hold=function(t,r,i,o,l){if(qe("47.87"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=5);var f=v(o);n(o)&&(o=f=="s"?1.5:1500),n(l)&&(l=!1),t.cur("pointer");var h;return t.zimClickHoldDownEvent=t.on("mousedown",function(g){if(h||(h=g.target.stage),!!h){if(n(h.frame)&&(h.frame=le.zdf),(n(h.frame)||!h.frame.mousemoveEvent)&&(n(h.frame)&&(h.frame={}),h.frame.mouseX=g.stageX/e.scaX,h.frame.mouseY=g.stageY/e.scaY,h.frame.mouseholdEvent&&h.off("stagemousemove",h.frame.mouseholdEvent),h.frame.mouseholdEvent=h.on("stagemousemove",function(N){h.frame.mouseX=N.stageX/e.scaX,h.frame.mouseY=N.stageY/e.scaY})),g.currentTarget.type=="List"){if(g.target.type=="WindowBacking")return;var _=g.currentTarget.globalToLocal(g.stageX/e.scaX,g.stageY/e.scaY);if(_.y<=0)return}var P=g.stageX/e.scaX,C=g.stageY/e.scaY;clearInterval(t.zimHoldInterval);var T=0;t.zimHoldInterval=setInterval(function(){if(T<10)Math.abs(P+C-h.frame.mouseX-h.frame.mouseY)>i&&clearInterval(t.zimHoldInterval);else{if(Math.abs(P+C-h.frame.mouseX-h.frame.mouseY)<i){if(t.excludeHold)return;r(g)}clearInterval(t.zimHoldInterval)}T++},o/10*(f=="s"?1e3:1)),t.zimClickHoldUpEvent=t.on("pressup",function(){clearInterval(t.zimHoldInterval),h&&h.frame.mouseholdEvent&&h.off("stagemousemove",h.frame.mouseholdEvent)},null,!0)}},null,l),t}},e.noHold=function(t){if(qe("47.88"),!n(t))return t.cursor&&t.cur("default"),t.off("mousedown",t.zimClickHoldDownEvent),t.off("pressup",t.zimClickHoldUpEvent),t.stage&&t.stage.frame.mouseEvent&&t.stage.off("stagemousemove",t.stage.frame.mouseEvent),clearInterval(t.zimHoldTimeout),t},e.change=function(t,r,i){if(qe("47.85"),!(n(t)||n(r)||typeof r!="function"))return n(i)&&(i=!1),t.zimChangeEvent=t.on("change",function(o){r(o)},null,i),t},e.noChange=function(t){if(qe("47.95"),!n(t))return t.off("mousedown",t.zimChangeEvent),t},e.drag=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F){var q="obj, boundary, axis, overCursor, dragCursor, all, swipe, localBoundary, onTop, surround, slide, slideFactor, slideSnap, slideSnapDamp, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch",V;if(V=mt(e.drag,arguments,q))return V;if(qe("31"),n(t)||!t.on)return;var I=e.DRAGALL;if(le.DRAGALL!=null&&(I=le.DRAGALL),n(f)&&n(L)&&(f=I),n(f)&&n(L)?L=!1:n(f)?n(L)&&(L=!1):L=f,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(L=!0),r&&r.getBounds&&(t.type=="Container"||t.type=="Tile")&&t.mouseChildren==!0&&!f){var ne=Array.prototype.slice.call(arguments);return ne[4]=!0,setTimeout(function(){t.loop(function(Oe){ne[0]=Oe,e.drag.apply(null,ne)})},b?0:50),t}(n(i)||i=="all"||i!="horizontal"&&i!="vertical")&&(i="both"),t.zimDown&&t.noDrag(),t.cur(n(o)?"pointer":o),n(h)&&(h=!1),n(g)&&(g=!1),n(_)&&(_=!0),n(P)&&(P=!1),n(C)&&(C=!1),n(T)&&(T=.9),n(N)&&(N=!0);var R=["horizontal","vertical","auto"];if(N!==!0&&R.indexOf(N)<0&&(N=!1),N=="auto"&&(N=!0),n(O)&&(O=.1),n(S)&&(S=!1),n(k)&&(k=!0),n(x)&&(x=!0),n(r)&&!n(E)&&(r=E),n(F)&&(F=!1),t.dragPaused=!1,C)var Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe=le.M?20:10,ve,$,ue,xe,Ye=!1,se=!1,be=50;else t.zimDragTicker=function(){};t._draggable=!0,e.setSwipe(t,h),t.zimBoundary=r,t.zimlocalBoundary=g,t.circleBounds=r&&r.type=="Circle"?r.radius:!1,t.downCheck=!1;var te=!1,_e,J,ye,Re,de;t.zimAdded=t.on("added",Me,null,!0),t.zimRemoved=t.on("removed",Be,null,!0),t.parent&&Me();function Me(){if(t.off("added",t.zimAdded),r=t.zimBoundary,r&&r.getBounds&&r.type!="Blob"){if(t.zimlocalBoundary=!1,r.type!="Stage"&&r.type!="StageGL"?r=r.boundsToGlobal():r=new e.Boundary(0,0,r.width,r.height),!P){var Oe=t.boundsToGlobal();de=t.localToGlobal(t.regX,t.regY);var fe=new e.Point(de.x-Oe.x,de.y-Oe.y),Xe=t.borderWidth?t.borderWidth:0;r.x+=fe.x+Xe/2,r.y+=fe.y+Xe/2,r.width-=Oe.width+Xe,r.height-=Oe.height+Xe}t.zimBoundary=r}_e=0,J=0,t.zimBoundary&&t.zimBoundary.type!="Blob"&&(g?(ye=e.boundsToGlobal(t.parent,t.zimBoundary),P&&(Re=t.zimBoundary)):(ye=t.zimBoundary,P&&(Re=e.boundsToGlobal(t.parent,t.zimBoundary,!0)))),ye&&x&&(de=t.parent.localToGlobal(t.x,t.y),me(t,de.x,de.y)),C&&setTimeout(function(){C&&N&&(Q=new e.Damp(null,O),U=new e.Damp(null,O)),t.zimDragImmediate=function(Ze,Ke){d=Ze,D=Ke,ve=$=0,ue=xe=0,G=K=y=w=p=Y=0,C&&N&&(n(Ze)||Q.immediate(Ze),n(Ke)||U.immediate(Ke))},ee=3,ae=0,ie=[],ce=[],j=[],G=t.x,y=t.y,d=t.x,D=t.y,K=t.x,w=t.y,Y=Date.now(),Ee=-1e4,X=-1e4,t.zimDragMoving=!0,He()},50),n(t.zimMaskDynamic)||t.zimMaskApply()}function Be(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)}var he,Ae;t.pointers={};var Ce=!1;t.zimDown=t.on("mousedown",function(Oe){if(!(!t.stage||t.dragPaused)&&!(F&&Ce)){Ce=!0,Ae=t.stage,t.zmu||(t.zmu=Ae.frame.on("mouseupplus",function(ut){t.downCheck&&(C||(t.downCheck=!1),Ne(ut,!0))})),t.dragMouseX=Math.round(Oe.stageX/e.scaX)+Ae.x,t.dragMouseY=Math.round(Oe.stageY/e.scaY)+Ae.y;var fe="id"+Math.abs(Oe.pointerID+1);if(t.pointers[fe]=!0,he=L?Oe.currentTarget:Oe.target,t.zimBoundary&&!he.getBounds()){ht("zim.drag() - drag object needs bounds set");return}if(t.downCheck=!0,t.stage.mouseMoveOutside=!0,e.Ticker.has(t.zimDragTicker)||e.Ticker.add(t.zimDragTicker,t.stage),k&&t.zimTweens)for(var Xe in t.zimTweens){var Ze=t.zimTweens[Xe];Ze.zimObj&&(Ze.zimObj.x!=null||Ze.zimObj.y!=null)&&t.stopAnimate(Xe)}if(he.parent){if(_){var Ke=he.parent.numChildren-1;he.parent.getChildAt(Ke).type=="Keyboard"&&Ke--,he.parent.setChildIndex(he,Ke),he.ZIMoutlineShape&&he.outline()}he.parent==t.stage?de=new e.Point(Oe.stageX/e.scaX,Oe.stageY/e.scaY):de=he.parent.globalToLocal(Oe.stageX/e.scaX,Oe.stageY/e.scaY),S&&(he.x=de.x,he.y=de.y),_e=de.x-he.x,J=de.y-he.y,ye=null,t.zimBoundary&&(g?(ye=e.boundsToGlobal(he.parent,t.zimBoundary),P&&(Re=t.zimBoundary)):(ye=t.zimBoundary,P&&(Re=e.boundsToGlobal(he.parent,t.zimBoundary,!0)))),t.cur(n(l)?"pointer":l),C&&(t.slideStartX=t.x,t.slideStartY=t.y,Z=t.zimDragMoving,ae=0,ie=[de.x],ce=[de.y],j=[Date.now()],Ee=-1e4,X=-1e4,t.zimDragMoving=!0),t.type=="Pen"&&(t.zimDragCheck=!0,te=!1)}}},!0),t.zimMove=t.on("pressmove",function(Oe){if(!(F&&!t.pointers["id"+Math.abs(Oe.pointerID+1)])&&!(!t.downCheck||t.dragPaused)){var fe=(A?Oe.rawX:Oe.stageX)/e.scaX+Ae.x,Xe=(A?Oe.rawY:Oe.stageY)/e.scaY+Ae.y;t.dragMouseX=Math.round(fe),t.dragMouseY=Math.round(Xe),me(he,fe,Xe),he.ZIMoutlineShape&&he.outline(),t.type=="Pen"&&!te&&t.drawing?te=!0:(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize()}},!0);function me(Oe,fe,Xe){var Ze=_e,Ke=J;if(n(Oe)&&(Oe=he||t),!!Oe.parent){if(n(fe)||n(Xe)){var ut=Oe.parent.localToGlobal(Oe.x,Oe.y);_e=J=0,t.zimBoundary&&(g?(ye=e.boundsToGlobal(Oe.parent,t.zimBoundary),P&&(Re=Oe.zimBoundary)):(ye=t.zimBoundary,P&&(Re=e.boundsToGlobal(Oe.parent,t.zimBoundary,!0)))),fe=ut.x,Xe=ut.y,C&&(d=Oe.x,D=Oe.y,he=Oe)}var gt;Ae&&Ae.type?gt=Oe.parent.globalToLocal(fe,Xe):gt=Oe.parent.globalToLocal(fe*e.scaX,Xe*e.scaY);var We=i=="both"||i=="horizontal",it=i=="both"||i=="vertical",ct;C&&N?N=="vertical"?(ct=ge(Oe,gt.x-_e,gt.y-J),We&&(Oe.x=ct.x),it&&(Oe.y=gt.y-J)):N=="horizontal"?(ct=ge(Oe,gt.x-_e,gt.y-J),We&&(Oe.x=gt.x-_e),it&&(Oe.y=ct.y)):(We&&(Oe.x=gt.x-_e),it&&(Oe.y=gt.y-J)):(ct=ge(Oe,gt.x-_e,gt.y-J),We&&(Oe.x=ct.x),it&&(Oe.y=ct.y)),C&&!Z&&(Oe.slideStartX!=Oe.x||Oe.slideStartY!=Oe.y)&&(Z=!0),Oe.downCheck&&(_e=Ze,J=Ke)}}t.zimPosition=me,t.zimUp=t.on("pressup",function(Oe){Ne(Oe)},!0);function Ne(Oe,fe){if(!(F&&!fe&&!t.pointers["id"+Math.abs(Oe.pointerID+1)])){Ce=!1;var Xe="id"+Math.abs((n(Oe.pointerID)?0:Oe.pointerID)+1);if(delete t.pointers[Xe],!(!t.downCheck||t.dragPaused)){if(t.cur(n(o)?"pointer":o),C){if(he.dispatchEvent("slidestart"),he.parent){var Ze=A?Oe.rawX:Oe.stageX,Ke=A?Oe.rawY:Oe.stageY;de=he.parent.globalToLocal(Ze/e.scaX,Ke/e.scaY)}else de=new e.Point(0,0);G=de.x,y=de.y,p=Date.now(),isNaN(G)&&(G=-1e3),isNaN(y)&&(y=-1e3),ue=G-K,xe=y-w;var ut=p-Y;ve=e.constrain(ue*pe/ut,-be,be),$=e.constrain(xe*pe/ut,-be,be),Ye=!1,se=!1,t.downCheck=!1,d=he.x,D=he.y,fe&&(K=G=0,w=y=0,Y=p=0)}else{t.downCheck=!1;var gt=0;for(var We in t.pointers)gt++;gt==0&&e.Ticker.remove(t.zimDragTicker),t.type=="Pen"&&(t.zimDragCheck=!1,te&&t.drawing&&t.stopCheck())}t.stage&&t.stage.update()}}}function ge(Oe,fe,Xe){if(!Oe.parent)return{x:fe,y:Xe};if(ye)if(P){var Ze=Oe.getBounds().width,Ke=Oe.getBounds().height,ut=Oe.getBounds().x,gt=Oe.getBounds().y;Ze<Re.width?fe=Re.x+(Re.width-Ze)/2+(Oe.regX-ut):(fe-(Oe.regX-ut)>Re.x&&(fe=Re.x+(Oe.regX-ut)),fe-(Oe.regX-ut)+Ze<Re.x+Re.width&&(fe=Re.x+Re.width+(Oe.regX-ut)-Ze)),Oe.height<Re.height?Xe=Re.y+(Re.height-Ke)/2+(Oe.regY-gt):(Xe-(Oe.regY-gt)>Re.y&&(Xe=Re.y+(Oe.regY-gt)),Xe-(Oe.regY-gt)+Ke<Re.y+Re.height&&(Xe=Re.y+Re.height+(Oe.regY-gt)-Ke))}else{if(ye.type=="Blob")return ye.shape.hitTestPoint(fe,Xe)?{x:fe,y:Xe}:{x:t.x,y:t.y};if(de=Oe.parent.localToGlobal(fe,Xe),t.circleBounds){var We=ye.x+ye.width/2,it=ye.y+ye.height/2,ct=t.circleBounds;if(e.dist(We,it,de.x,de.y)<=ct)fe=de.x,Xe=de.y;else{var Pe=e.angle(We,it,de.x,de.y)*RAD;fe=We+ct*Math.cos(Pe),Xe=it+ct*Math.sin(Pe)}}else fe=Math.max(ye.x,Math.min(ye.x+ye.width,de.x)),Xe=Math.max(ye.y,Math.min(ye.y+ye.height,de.y));de=Oe.parent.globalToLocal(fe,Xe),fe=de.x,Xe=de.y}return{x:fe,y:Xe}}function Ue(Oe,fe,Xe,Ze,Ke){Math.abs(Oe.x-Ee)<.1&&Math.abs(Oe.y-X)<.1?(t.zimDragMoving=!1,Oe.x=Ze,Oe.y=Ke,Oe.slideStartX=null,Oe.slideStartY=null,Z&&(Oe.dispatchEvent("slidestop"),e.Ticker.remove(t.zimDragTicker)),t.type=="Pen"&&(t.zimDragCheck=!1,te&&t.drawing&&t.stopCheck())):(Ee=fe,X=Xe)}function He(){t.zimDragTicker=function(){if(!n(t.slideStartX))if(he||(he=t),t.downCheck){var Oe;he.parent?Oe=he.parent.globalToLocal(t.dragMouseX,t.dragMouseY):Oe=new e.Point(0,0),ae++,ie.push(Oe.x),ce.push(Oe.y),j.push(Date.now()),ae>=ee?(K=ie.shift(),w=ce.shift(),Y=j.shift()):(K=ie[0],w=ce[0],Y=j[0])}else{if(!t.zimDragMoving)return;ue=ve,xe=$;var fe,Xe;i==BOTH?(fe=he.x+ue,Xe=he.y+xe):i==HORIZONTAL?(fe=he.x+ue,Xe=he.y):i==VERTICAL&&(fe=he.x,Xe=he.y+xe),ve=ue*T,$=xe*T;var Ze;ye&&(Ze=ge(he,fe,Xe),(N===!0||N=="horizontal")&&(Math.round(fe)!=Math.round(Ze.x)&&(Ye||(Q.immediate(fe),Ye=!0),ve=0,fe=Q.convert(Ze.x)),N=="horizontal"&&(Xe=Ze.y)),(N===!0||N=="vertical")&&(Math.round(Xe)!=Math.round(Ze.y)&&(se||(se=!0,U.immediate(Xe),$=0),Xe=U.convert(Ze.y)),N=="vertical"&&(fe=Ze.x)),N||(fe=Ze.x,Xe=Ze.y)),he.x=fe,he.y=Xe,Ue(he,he.x,he.y,fe,Xe)}}}return t},e.noDrag=function(t,r){if(qe("32"),n(t)||!t.on)return;if(n(r)&&(r=!0),r&&t.numChildren&&t.numChildren>1)for(var i=0;i<t.numChildren;i++){var o=t.getChildAt(i);l(o)}l(t);function l(f){f.cur&&f.cur("default"),f._draggable=!1,e.setSwipe(f,!0),f.off("added",f.zimAdded),f.off("removed",f.zimRemoved),f.off("mousedown",f.zimDown),f.off("pressmove",f.zimMove),f.off("pressup",f.zimUp),f.zmu&&(f.stage?f.stage.frame.off("mouseupplus",f.zmu):le.zdf.off("mouseupplus",f.zmu)),e.Ticker&&(f.zimDragSlide&&e.Ticker.remove(f.zimDragSlide),f.zimDragTicker&&e.Ticker.remove(f.zimDragTicker)),f.zimDragMoving=f.zimAdded=f.zimRemoved=f.zimDown=f.zimMove=f.zimUp=f.zimBoundary=f.zimDragSlide=null,f.slideStartX=f.slideStartY=f.zimDragImmediate=null,f.dragMouseX=f.zimPosition=f.dragMouseY=f.zimDown=f.zimUp=null,f.zimDragTicker=f.zimDragSlide=null}return t},e.dragBoundary=function(t,r){if(qe("33"),!(n(t)||!t.on))return t.zimBoundary=r,t.zimDragMoving=!0,t.zimPosition&&t.zimPosition(),t},e.dragRect=e.dragBoundary,e.mouse=function(t){return qe("33.1"),t.zimLastMouse&&(t.mouseChildren=t.zimLastMouse),t.mouseEnabled=!0,t.zimLastMouseEnabled=!0,t},e.noMouse=function(t){return qe("33.15"),t.zimLastMouse=t.mouseChildren,t.mouseChildren=!1,t.mouseEnabled=!1,t.zimLastMouseEnabled=!1,t},e.wire=function(t,r,i,o,l,f,h,g){var _="source, target, prop, twoWay, setSource, filter, call, input",P;if(P=mt(e.wire,arguments,_))return P;if(qe("33.2"),n(e.Ticker)&&Et)return ht("wire() - requires ZIM Frame"),t;if(n(r)&&Et)return ht("wire() - requires a target"),t;var C=e.DEFAULTWIRE;return le.DEFAULTWIRE!=null&&(C=le.DEFAULTWIRE),n(g)&&(C&&C!="currentValue"&&C!="selectedIndex"||C&&Object.prototype.hasOwnProperty.call(t,C)?g=C:Object.prototype.hasOwnProperty.call(t,"currentValue")?g="currentValue":Object.prototype.hasOwnProperty.call(t,"selectedIndex")?g="selectedIndex":g=i),n(i)&&(i=g),t.addChild&&(t.zimWire=!0),r.addChild&&(r.zimWired=!0),e.Ticker.addWire(t,[r,i,o,l,f,h,g]),t},e.noWire=function(t,r,i,o){var l="source, target, prop, input",f;return(f=mt(e.noWire,arguments,l))?f:(qe("33.25"),n(e.Ticker)&&Et?(ht("noWire() - requires ZIM Frame"),t):(e.Ticker.removeWire(t,r,i,o),t))},e.wired=function(t,r,i,o,l,f,h,g){var _="target, source, prop, twoWay, setSource, filter, call, input",P;return(P=mt(e.wired,arguments,_))?P:(qe("33.3"),n(e.Ticker)&&Et?(ht("wired() - requires ZIM Frame"),t):(e.wire(r,t,i,o,l,f,h,g),t))},e.noWired=function(t,r,i,o){var l="target, source, prop, input",f;return(f=mt(e.noWire,arguments,l))?f:(qe("33.35"),n(e.Ticker)&&Et?(ht("noWired() - requires ZIM Frame"),t):(e.Ticker.removeWire(r,t,i,o),t))},typeof m>"u")var m;if(e.bind=function(t,r,i,o,l,f){var h="obj, id, props, extra, filter, bindObj",g;if(g=mt(e.bind,arguments,h))return g;if(qe("33.17"),!m)return Et&&ht("bind() - needs a Bind() object created first"),t;if(n(r))return Et&&ht("bind() - needs a unique id"),t;var _=f||m;return _.add(r,t,i,o,l),t},e.noBind=function(t,r,i,o,l){var f="obj, props, removeConnectionData, call, bindObj",h;if(h=mt(e.noBind,arguments,f))return h;if(qe("33.18"),!m)return t;var g=l||m;return g.remove(t,r,i,o),t},e.transform=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee){var ae="obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame, container",ie;if(ie=mt(e.transform,arguments,ae))return ie;if(t.type=="AC"&&le.zdf)return le.zdf.ac("transform",arguments),t;if(qe("33.5"),n(t)||!t.getBounds)return ht("zim methods - transform(): please provide object with bounds set"),t;if(!t.getBounds())return ht("zim methods - transform(): please setBounds() on object"),t;if(!t.parent)return ht("zim methods - transform(): object should be on stage first"),t;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.width==0&&(i=!1),t.height==0&&(o=!1),n(l)&&(l=!0),n(f)&&(f=!0),n(h)&&(h=!0),n(g)&&(g=!0),n(_)&&(_=!0),n(P)&&(P=!!ce),n(C)&&(C=!!ce),n(T)&&(T=!0),n(N)&&(N=!0),n(O)&&(O=!0),n(S)&&(S="brown"),n(k)&&(k=1),n(I)&&(I=null),n(ne)&&(ne=null),I<0||ne<0?I=ne=null:I!=null&&ne==null&&(ne=1),n(R)&&(R=!0),n(Q)&&(Q=!1),n(U)&&(U=le.zdf);var ce=le.M;n(E)&&(E=!ce),n(L)&&(L=ce?20:10),n(A)&&(A=16),n(b)&&(b=10),n(F)&&(F=5),n(q)&&(q=!0),n(V)&&(V=!1),(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(V=!0),t.mouseChildren=!1;var j=t.getConcatenatedMatrix().decompose(),G=t.stage?t.stage:U.stage;n(ee)&&(ee=G),n(U.eventRemove)&&(G.enableMouseOver(),U.ctrlKey=!1,U.shiftKey=!1,le.addEventListener("keydown",function(ft){U.altKey=ft.altKey,U.ctrlKey=ft.ctrlKey}),le.addEventListener("keyup",function(ft){U.altKey=ft.altKey,U.ctrlKey=ft.ctrlKey}));var y=t.getBounds(),p=new e.Shape({style:!1}),d=new e.Shape({style:!1}),D=new e.Shape({style:!1});d.mouseEnabled=!1,D.controlType="reg";var K=t.parent,w=p.graphics,Y=d.graphics,Ee=D.graphics,X,Z,pe,ve,$,ue,xe,Ye,se,be=new e.Container({style:!1});be.type="TransformControls";var te=new e.Container({style:!1}),_e=new e.Container({style:!1}),J=new e.Container({style:!1}),ye=new e.Container({style:!1}),Re,de,Me,Be,he;n(t.zimMaskDynamic)||t.zimMaskApply();function Ae(ft,It){ft==It&&new e.Triangle(16,12,12,"white",null,null,0).addTo(ft).mov(0,-13.5),new e.Triangle(16,12,12,"white",null,null,0).addTo(ft).mov(13.5).rot(90),ft==It&&new e.Triangle(16,12,12,"white",null,null,0).addTo(ft).mov(0,13.5).rot(180),new e.Triangle(16,12,12,"white",null,null,0).addTo(ft).mov(-13.5).rot(-90),ft==It&&new e.Triangle(10,7,7,"black",null,null,0).addTo(ft).mov(0,-13),new e.Triangle(10,7,7,"black",null,null,0).addTo(ft).mov(13).rot(90),ft==It&&new e.Triangle(10,7,7,"black",null,null,0).addTo(ft).mov(0,13).rot(180),new e.Triangle(10,7,7,"black",null,null,0).addTo(ft).mov(-13).rot(-90),q&&ft.cache(-20,-20,40,40)}if(E){var Ce=new e.Container({style:!1}),me=new e.Container({style:!1});Ae(Ce,Ce),Ae(me,Ce);var Ne={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function ge(){var ft=t;for(Re=0,de=1,Me=1,Be=0,he=0;ft.parent;)Re+=ft.rotation,de*=ft.scaleX,Me*=ft.scaleY,Be+=ft.skewX,he+=ft.skewY,ft=ft.parent}ge();var Ue=Re,He=["nw-resize","ne-resize","nw-resize","ne-resize"],Oe=[2,3,0,1],fe,Xe;for(Xe=0;Xe<4;Xe++)T?(fe=new e.Rectangle(L,L,e.pink,e.grey,2,null,null,null,null,!1),fe.centerReg(te),q&&fe.cache(-1,-1,L+2,L+2)):(fe=new e.Rectangle(L,L,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1),fe.centerReg(te),fe.expand(0)),fe.rotation=Re,xe=E?"none":He[Xe],fe.drag({overCursor:xe,dragCursor:xe,onTop:!1}),fe.controlType="corner",fe.cu=He[Xe];for(Xe=0;Xe<Oe.length;Xe++)te.getChildAt(Xe).op=te.getChildAt(Oe[Xe]);var Ze=["n-resize","e-resize","n-resize","e-resize"];for(Oe=[1,1,0,0],Xe=0;Xe<4;Xe++){var Ke=Xe%2==0?t.width/2:L,ut=Xe%2==0?L:t.height/2;P?(fe=new e.Rectangle(L,L,e.fog,e.dark,2,null,null,null,null,!1),fe.centerReg(Xe%2==0?J:_e),q&&fe.cache(-1,-1,L+2,L+2)):(fe=new e.Rectangle(Ke,ut,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),fe.centerReg(Xe%2==0?J:_e),fe.expand(0)),fe.rotation=Re,xe=E?"none":Ze[Xe],fe.drag({overCursor:xe,dragCursor:xe,onTop:!1}),fe.controlType="side",fe.cu=Ze[Xe]}for(Xe=0;Xe<Oe.length;Xe++){var gt=Xe%2==0?J:_e;gt.getChildAt(Math.floor(Xe/2)).op=gt.getChildAt(Oe[Xe])}var We=["ne-resize","nw-resize","ne-resize","nw-resize"];for(Xe=0;Xe<4;Xe++)C?(fe=new e.Circle(L,e.pink,null,null,null,null,null,null,!1),fe.addTo(ye),q&&fe.cache(-L,-L,L*2,L*2)):(fe=new e.Circle(L,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),fe.addTo(ye),fe.expand(0)),xe=E?"none":We[Xe],fe.drag({overCursor:xe,dragCursor:xe,onTop:!1}),fe.controlType="rotate",fe.cu=We[Xe];var it=1.8;ye.alpha=.5,ct();function ct(){var ft=L*it*e.sign(de),It=L*it*e.sign(Me);ye.getChildAt(0).reg(ft,It),ye.getChildAt(1).reg(-ft,It),ye.getChildAt(2).reg(-ft,-It),ye.getChildAt(3).reg(ft,-It),G.update()}function Pe(){w.c(),Y.c(),Ee.c(),X=t.localToLocal(y.x,y.y,ee),Z=t.localToLocal(y.x+y.width,y.y,ee),pe=t.localToLocal(y.x+y.width,y.y+y.height,ee),ve=t.localToLocal(y.x,y.y+y.height,ee);var ft=t.localToLocal(y.x+y.width/2,y.y,ee),It=t.localToLocal(y.x+y.width,y.y+y.height/2,ee),qt=t.localToLocal(y.x+y.width/2,y.y+y.height,ee),Xt=t.localToLocal(y.x,y.y+y.height/2,ee);$=t.localToLocal(t.regX,t.regY,ee),ue=t.localToLocal(y.x+y.width/2,y.y+y.height/2,ee),se=[X,Z,pe,ve],Ye=[ft,It,qt,Xt],O&&(w.s(S),x&&w.sd([10,5],0),w.ss(k).mt(X.x,X.y).lt(Z.x,Z.y).lt(pe.x,pe.y).lt(ve.x,ve.y).lt(X.x,X.y).cp()),n(I)||(Y.s(I),R&&Y.sd([10,5],0),Y.ss(ne).mt(X.x,X.y).lt(Z.x,Z.y).lt(pe.x,pe.y).lt(ve.x,ve.y).lt(X.x,X.y).cp()),p.setBounds(X.x,X.y,Z.x-X.x,ve.y-X.y),N&&(Ee.s("#eee").ss(k).f("rgba(0,0,0,.1)").dc(0,0,A),Ee.s("#222").ss(k).dc(0,0,A*.3)),ge();for(var rn=Math.min(50,Math.abs(Be))*e.sign(Be),Qt=Math.min(50,Math.abs(he))*e.sign(he),Pt=Re*e.sign(de*Me)*e.sign(t.scaleX*t.scaleY),Wt=0;Wt<se.length;Wt++){var xn=se[Wt];te.getChildAt(Wt).loc(xn.x,xn.y).ske(rn,Qt).rot(Pt),ye.getChildAt(Wt).loc(xn.x,xn.y).rot(Pt);var zt=Ye[Wt],ln=Wt%2==0?J:_e;ln.getChildAt(Math.floor(Wt/2)).loc(zt.x,zt.y).ske(rn,Qt).rot(Pt),P||ln.getChildAt(Math.floor(Wt/2)).sca(Wt%2==0?de/2:1,Wt%2==0?1:Me/2)}D.x=$.x,D.y=$.y}Pe();var Fe=new e.Shape(1e3,1e3,null,null,null,!1);function we(){Fe.x=0,Fe.y=0,Fe.graphics.c().f("rgba(0,0,0,.01)").mt(X.x,X.y).lt(Z.x,Z.y).lt(pe.x,pe.y).lt(ve.x,ve.y).lt(X.x,X.y).cp(),Fe.reg($.x,$.y),Fe.x=$.x,Fe.y=$.y}we(),be.on("dblclick",function(ft){U.ctrlKey&&t.transformControls.visible&&(t.scaleX=1,t.scaleY=1,t.rotation=0,Pe(),we(),G.update()),Ot(ft,!0)});var je=be.on("mousedown",Je),st=t.on("mousedown",Je);function Je(ft){var It=G.getObjectUnderPoint(ft.stageX,ft.stageY,1);ce||It&&(t.contains&&t.contains(It)||!t.contains&&t==It)?t.transformControls.visible||(E?(Bt=!1,Fe.mouseEnabled=!1):U.canvas.style.cursor="move",t.transformControls.show(),t.dispatchEvent("transformshow")):t.transformControls.visible&&(!It||!be.contains(It))&&(t.transformControls.hide(),t.dispatchEvent("transformhide"))}var tt=G.on("stagemousedown",function(ft){var It=G.getObjectUnderPoint(ft.stageX,ft.stageY,1),qt=It&&It.parent&&It.parent.layer&&It.parent.layer==t;t.transformControls.visible&&(!It||!be.contains(It)&&!qt)&&(t.dispatchEvent("transformhide"),t.transformControls.hide())});h||(be.off("mousedown",je),t.off("mousedown",st),G.off("stagemousedown",tt));var Te,et,Ve,Le,Qe,$e,nt,pt,De,at,yt,rt,Tt,xt=!1,Ct=!1,lt,Dt,Mt=t.cursor,St,Ft=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(E){Ft.mouseEnabled=!1,Ft.mouseChildren=!1,Ft.addChild(me),te.on("mouseover",ot),te.on("mouseout",bt),_e.on("mouseover",ot),_e.on("mouseout",bt),J.on("mouseover",ot),J.on("mouseout",bt),ye.on("mouseover",ot),ye.on("mouseout",bt);var Yt=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);Yt.cursor="none"}te.on("mousedown",$t),te.on("pressmove",sn),te.on("pressup",Ot),_e.on("mousedown",$t),_e.on("pressmove",sn),_e.on("pressup",Ot),J.on("mousedown",$t),J.on("pressmove",sn),J.on("pressup",Ot),ye.on("mousedown",$t),ye.on("pressmove",nn),ye.on("pressup",Ot);function $t(ft){Ct=!0,_&&Rt(),lt&&G.off("stagemousemove",lt),Te=ft.target.x,et=ft.target.y,at=t.x,yt=t.y,Ve=t.scaleX,Le=t.scaleY;var It=ee.globalToLocal(ft.stageX/e.scaX,ft.stageY/e.scaY);if(ft.target.controlType=="rotate"){xt=!0,Qe=t.rotation;var qt=It.x,Xt=It.y,rn=K.localToLocal(at,yt,ee);rt=rn.x,Tt=rn.y,$e=Math.atan2(Xt-Tt,qt-rt)*180/Math.PI}U.ctrlKey||ft.target.controlType=="rotate"?(nt=Math.abs(Te-t.x),pt=Math.abs(et-t.y)):(nt=Math.abs(Te-ft.target.op.x),pt=Math.abs(et-ft.target.op.y)),ft.target.controlType!="rotate"&&(De=ft.target.op.parent.localToLocal(ft.target.op.x,ft.target.op.y,t.parent)),Ft.stage?ee.setChildIndex(Ft,ee.getChildIndex(be)):Ft.addTo(ee,ee.getChildIndex(be)+1),Ft.x=It.x,Ft.y=It.y,Ft.cursor=E?"none":ft.target.cu,E&&(t.getConcatenatedMatrix().decompose(j),j.rotation||(j.rotation=0),me.rotation=j.rotation*e.sign(de*Me)*e.sign(t.scaleX*t.scaleY)+Ne[ft.target.cu]+Ue,ft.target.controlType!="side"&&de*Me<0&&(me.rotation+=90),Yt.addTo(ee,1).pos({x:It.x,y:It.y,reg:!0})),Fe.visible=!1,t.cursor="none"}function sn(ft){var It=1;U.ctrlKey&&ft.target.controlType=="corner"?It=nt>pt?(ft.target.x-at)/(Te-at):(ft.target.y-yt)/(et-yt):nt>pt?Te-ft.target.op.x&&(It=(ft.target.x-ft.target.op.x)/(Te-ft.target.op.x)):et-ft.target.op.y&&(It=(ft.target.y-ft.target.op.y)/(et-ft.target.op.y)),ft.target.controlType=="corner"?(t.scaleX=It*Ve,t.scaleY=It*Le):(t.scaleX=ft.target.cu=="e-resize"?It*Ve:Ve,t.scaleY=ft.target.cu=="n-resize"?It*Le:Le),Pe();var qt=ee.globalToLocal(ft.stageX/e.scaX,ft.stageY/e.scaY);if(Ft.x=qt.x,Ft.y=qt.y,E&&(Yt.x=qt.x,Yt.y=qt.y),!U.ctrlKey||ft.target.controlType=="side"){var Xt=ft.target.op.parent.localToLocal(ft.target.op.x,ft.target.op.y,t.parent);t.x-=(Xt.x-De.x)*e.sign(de)*e.sign(t.scaleX),t.y-=(Xt.y-De.y)*e.sign(Me)*e.sign(t.scaleY)}if(Pe(),t.transformControls.events){var rn=ft.target.controlType;Zt(ft,rn)}}function nn(ft){var It=ee.globalToLocal(ft.stageX/e.scaX,ft.stageY/e.scaY),qt=Math.atan2(It.y-Tt,It.x-rt)*180/Math.PI;if(U.shiftKey?t.rot(Math.round((Qe+(qt-$e)*e.sign(de)*e.sign(t.scaleX))/45)*45):t.rot(Qe+(qt-$e)*e.sign(de)*e.sign(t.scaleX)),Pe(),Ft.x=It.x,Ft.y=It.y,E&&(t.getConcatenatedMatrix().decompose(j),j.rotation||(j.rotation=0),me.rotation=j.rotation*e.sign(de*Me)*e.sign(t.scaleX*t.scaleY)+Ne[ft.target.cu]+Ue,ft.target.controlType!="side"&&de*Me<0&&(me.rotation+=90),Yt.x=It.x,Yt.y=It.y),Pe(),t.transformControls.events){var Xt=ft.target.controlType;Zt(ft,Xt,null,!1)}}function Ot(ft,It){ct();var qt=ft?ft.target.controlType:"move";It&&(qt="reset"),E&&Yt.removeFrom(),Zt(ft,qt,!0),G.update()}function Zt(ft,It,qt,Xt){Xt==null&&(Xt=!0);var rn=!1;St=null;var Qt=ee.globalToLocal(ft.stageX/e.scaX,ft.stageY/e.scaY);It=="move"?((t.x!=an.x||t.y!=an.y)&&(St=new ze.Event("transformed"),St.transformType="move"),Xt&&(rn=Fe.hitTestPoint(Qt.x,Qt.y))):It=="corner"?((t.scaleX!=an.scaleX||t.scaleY!=an.scaleY)&&(St=new ze.Event("transformed"),St.transformType="size"),Xt&&(rn=te.hitTestPoint(Qt.x,Qt.y))):It=="side"?((t.scaleX!=an.scaleX||t.scaleY!=an.scaleY)&&(St=new ze.Event("transformed"),St.transformType="stretch"),Xt&&(rn=_e.hitTestPoint(Qt.x,Qt.y)||J.hitTestPoint(Qt.x,Qt.y))):It=="rotate"?(t.rotation!=an.rotation&&(St=new ze.Event("transformed"),St.transformType="rotate"),Xt&&(rn=ye.hitTestPoint(Qt.x,Qt.y))):It=="reg"?(t.regX!=an.regX||t.regY!=an.regY)&&(St=new ze.Event("transformed"),St.transformType="reg"):It=="reset"?(St=new ze.Event("transformed"),St.transformType="reset"):(St=new ze.Event("transformed"),St.transformType="unknown"),Xt&&!rn&&(Ft.removeFrom(),U.canvas.style.cursor="default",t.cursor=Mt),St&&(St.pressup=qt,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.dispatchEvent(St))}function ot(ft){if(!Ct){Ft.stage?ee.setChildIndex(Ft,ee.getChildIndex(be)):Ft.addTo(ee,ee.getChildIndex(be)+1),Yt.addTo(ee,1);var It=ee.globalToLocal(ft.stageX/e.scaX,ft.stageY/e.scaY);Ft.x=It.x,Ft.y=It.y,Yt.x=It.x,Yt.y=It.y,t.getConcatenatedMatrix().decompose(j),j.rotation||(j.rotation=0),me.rotation=j.rotation*e.sign(de*Me)*e.sign(t.scaleX*t.scaleY)+Ne[ft.target.cu]+Ue,ft.target.controlType!="side"&&de*Me<0&&(me.rotation+=90),G.update(),lt&&G.off("stagemousemove",lt),lt=G.on("stagemousemove",function(qt){var Xt=ee.globalToLocal(qt.stageX/e.scaX,qt.stageY/e.scaY);Ft.x=Xt.x,Ft.y=Xt.y,G.update()})}}function bt(){G.off("stagemousemove",lt),!Ct&&(t.cursor=Mt,Ft.removeFrom(),Yt.removeFrom(),G.update())}function Rt(){if(_){var ft=K.numChildren-1;K.getChildAt(ft).type=="Keyboard"&&ft--,K.setChildIndex(t,ft),Ut()}}function Ut(){if(K==ee)be.removeFrom(),ee.addChildAt(be,ee.getChildIndex(t)+1);else{for(var ft=K;ft.parent&&ft.parent!=ee;)ft=ft.parent;t.stage&&(be.parent==ee&&ee.removeChild(be),ee.addChildAt(be,ee.getChildIndex(ft)+1))}}var Gt,wt;D.drag(),D.on("mousedown",Rt),D.on("pressup",function(ft){if(!U.ctrlKey){for(var It=0;It<se.length;It++)if(e.dist(D.x,D.y,se[It].x,se[It].y)<b){D.x=se[It].x,D.y=se[It].y;break}e.dist(D.x,D.y,ue.x,ue.y)<b&&(D.x=ue.x,D.y=ue.y)}var qt=t.rotation;Gt=ee.localToLocal(D.x,D.y,t),K==G?wt=new e.Point(D.x,D.y):wt=ee.localToLocal(D.x,D.y,K),t.reg(Gt.x,Gt.y),t.rotation=0,t.x=t.x+wt.x-t.x,t.y=t.y+wt.y-t.y,t.rotation=qt,Pe(),we(),Ot(ft),G.update()});var Bt=!0;xe=E?"none":"move",Fe.drag({overCursor:xe,dragCursor:xe,onTop:!1}),Fe.controlType="move",E&&(Fe.on("mouseover",Jt),Fe.on("mouseout",Ht));function Ht(){G.off("stagemousemove",Dt),!Ct&&(Ce.removeFrom(be),G.update())}function Jt(ft){if(!(Ct||!E||!Bt)){var It=ee.globalToLocal(ft.stageX/e.scaX,ft.stageY/e.scaY);Ce.addTo(be).pos({x:It.x,y:It.y,reg:!0}),G.update(),Dt&&G.off("stagemousemove",Dt),Dt=G.on("stagemousemove",function(qt){var Xt=ee.globalToLocal(qt.stageX/e.scaX,qt.stageY/e.scaY);Ce.x=Xt.x,Ce.y=Xt.y,G.update()})}}Fe.on("mousedown",Rt),Fe.on("pressmove",function(ft){if(t.transformControls.visible){var It;if(K==G?It=new e.Point(Fe.x,Fe.y):It=ee.localToLocal(Fe.x,Fe.y,K),t.x=It.x,t.y=It.y,Pe(),t.transformControls.events){var qt="move";Zt(ft,qt)}}}),Fe.on("pressup",function(ft){t.transformControls.visible&&Ot(ft)});var cn=G.on("stagemouseup",function(){Ct=!1,Fe.mouseEnabled=!0,Bt||(St=new ze.Event("transformed"),t.x!=an.x||t.y!=an.y?St.transformType="move":St.transformType="select",St.pressup=!0,t.dispatchEvent(St)),Bt=!0,Fe.visible=!0,xt&&!U.ctrlKey&&F>1&&(t.rotation=Math.round(t.rotation/F)*F,Pe()),we(),Fe.mouseEnabled=!0,xt=!1,G.update()});function jt(){an={x:t.x,y:t.y,rotation:t.rotation,regX:t.regX,regY:t.regY,scaleX:t.scaleX,scaleY:t.scaleY}}var an;jt();var en=t.on("mousedown",jt);be.on("mousedown",jt),be.addChild(p),r&&be.addChild(Fe),l&&be.addChild(te),i&&be.addChild(_e),o&&be.addChild(J),f&&be.addChild(ye),be.addChild(D);var yn;r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),yn=t.on("pressmove",function(ft){if(Pe(),we(),ct(),t.transformControls.events){var It="move";Zt(ft,It)}}));var kt=h;return t.transformControls={visible:g,events:V,ghost:!n(I),ghostEnabled:!n(I),show:function(){return _&&Rt(),Ut(),t.toggled=!0,t.transformControls.visible=!0,d.parent&&d.removeFrom(),G.update(),t},hide:function(){if(t.transformControls.ghost)var ft=ee.getChildIndex(be);return ee.removeChild(be),t.transformControls.ghost&&t.transformControls.ghostEnabled&&ee.addChildAt(d,ft),t.toggled=!1,t.transformControls.visible=!1,E&&(lt&&G.off("stagemousemove",lt),Dt&&G.off("stagemousemove",Dt),Ct=!1,Ft.removeFrom(),Yt.removeFrom()),r||t.cur(Mt),G.update(),t},remove:function(ft){ft||t.transformControls.hide(),h=!1,r&&(t.noDrag(),t.off("pressmove",yn))},add:function(ft){ft||t.transformControls.show(),h=kt,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),yn=t.on("pressmove",yn))},allowToggleOn:function(){h=kt=!0,je=be.on("mousedown",je),st=t.on("mousedown",st),tt=G.on("stagemousedown",tt)},allowToggleOff:function(){h=kt=!1,be.off("mousedown",je),t.off("mousedown",st),G.off("stagemousedown",tt)},disable:function(){be.mouseChildren=!1,be.mouseEnabled=!1,r&&(t.noDrag(),t.off("pressmove",yn))},enable:function(){be.mouseChildren=!0,be.mouseEnabled=!0,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),yn=t.on("pressmove",yn))},recordData:function(ft){var It={type:t.type,index:K.getChildIndex(t),x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,skewX:t.skewX,skewY:t.skewY,regX:t.regX,regY:t.regY,controls:t.transformControls.visible};return ft?JSON.stringify(It):It},setData:function(ft,It){if(!n(ft)){It&&(ft=JSON.parse(ft)),delete ft.controls;var qt=ft.index;n(qt)&&(qt=0),delete ft.index;for(var Xt in ft)t[Xt]=ft[Xt];return setTimeout(function(){Pe(),we(),ct(),K.setChildIndex(t,qt),t.transformControls.visible&&t.type!="Layer"?t.transformControls.show():t.transformControls.hide(),t.transformControls.ghost&&!t.transformControls.ghostEnabled&&!t.transformControls.visible&&ee.addChild(d)},90),t}},hideGhost:function(){t.transformControls.ghost=!1,d.removeFrom()},showGhost:function(){if(t.transformControls.ghost=!0,t.transformControls.ghostEnabled&&!t.transformControls.visible){for(var ft=K;ft.parent&&ft.parent!=ee;)ft=ft.parent;d.stage?ee.setChildIndex(d,ee.getChildIndex(ft)+1):ee.addChildAt(d,ee.getChildIndex(ft)+1)}},addGhost:function(){ne>0?(t.transformControls.ghostEnabled=!0,t.transformControls.showGhost()):Et&&ht("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){t.transformControls.ghostEnabled=!1,t.transformControls.hideGhost()},resize:function(ft){if(K=t.parent,Pe(),we(),ct(),g&&t.transformControls.show(),ft){var It=new ze.Event("transformed");It.pressup=!0,It.transformType="resize",t.dispatchEvent(It)}return t},dispose:function(){t.transformControls.hide(),h=!1,r&&(t.noDrag(),t.off("pressmove",yn)),t.transformControls.hideGhost(),Fe.removeAllEventListeners(),ye.removeAllEventListeners(),D.removeAllEventListeners(),_e.removeAllEventListeners(),J.removeAllEventListeners(),te.removeAllEventListeners(),be.removeAllEventListeners(),st&&t.off("mousedown",st),je&&t.off("mousedown",je),tt&&G.off("stagemousedown",tt),lt&&G.off("stagemousemove",lt),Dt&&G.off("stagemousemove",Dt),cn&&G.off("stagemouseup",cn),en&&t.off("mousedown",en),yn&&t.off("pressmove",yn),be=Ft=Yt=null,t.transformControls=null},controls:be,scaleControls:te,stretchXControls:_e,stretchYControls:J,rotateControls:ye},t.toggle=function(ft){return ft===!0?t.transformControls.show():ft===!1||t.transformControls.visible?t.transformControls.hide():t.transformControls.show(),t},t.transformControls.ghost&&(t.transformControls.toggleGhost=function(ft){return ft===!0?t.transformControls.showGhost():ft===!1||t.transformControls.visible?t.transformControls.hideGhost():t.transformControls.showGhost(),t}),g?t.transformControls.show():!Q&&t.transformControls.ghost&&t.transformControls.showGhost(),t},e.gesture=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k){var x="obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBoundary, slide, slideFactor, regControl, onTop, surround, circularBounds, rect",E;if(E=mt(e.gesture,arguments,x))return E;if(qe("34.5"),n(t)||!t.on)return;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),n(_)&&(_=!1),n(g)&&(g=1),n(P)&&(P=!1),n(C)&&(C=5),n(T)&&(T=!1),n(N)&&(N=!0),n(O)&&(O=!1),O&&o&&(O=k=null,Et&&ht("gesture() - does not support surround when rotate is true")),n(S)&&(S=!1),n(l)&&!n(k)&&(l=k);var L,A,b,F,q=v();if(n(t.zimMaskDynamic)||t.zimMaskApply(),!t.zimTouch){var V=new e.Damp(t.scaleX,.05),I=new e.Damp(t.scaleY,.05),ne=t.scaleX/t.scaleY;if(t.zimTouch={move:r,scale:i,rotate:o,pointers:{},checkBounds:function(d,D){if(t.zimTouch.boundary){var K=t.zimTouch.boundary,w=t.parent.localToLocal(d,D,t.parent);O?(d=Math.min(K.x,Math.max(K.x+K.width,w.x)),D=Math.min(K.y,Math.max(K.y+K.height,w.y))):(d=Math.max(K.x,Math.min(K.x+K.width,w.x)),D=Math.max(K.y,Math.min(K.y+K.height,w.y))),w=t.parent.globalToLocal(d,D),d=w.x,D=w.y}return{x:d,y:D}}},l){t.zimTouch.boundary=l,_&&(t.zimTouch.boundary=e.boundsToGlobal(t.parent,l)),t.zimTouch.boundaryStartX=t.zimTouch.boundary.x,t.zimTouch.boundaryStartY=t.zimTouch.boundary.y,t.zimTouch.boundaryStartW=t.zimTouch.boundary.width,t.zimTouch.boundaryStartH=t.zimTouch.boundary.height;var R=t.zimTouch.checkBounds(t.x,t.y);t.x=R.x,t.y=R.y}P&&(b=10,F=5,A=0,L=[],t.zimTouch.slideInterval=e.interval(b/(q=="s"?1e3:1),function(){L[A++%F]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.animate({x:t.x,y:t.y},10/(q=="s"?1e3:1),"quadOut"));var Q,U,ee,ae,ie,ce,j,G;t.zimTouch.mousedown=t.on("mousedown",function(d){if(n(G)?G=1:G++,N){var D=t.parent.numChildren-1;t.parent.getChildAt(D).type=="Keyboard"&&D--,t.parent.setChildIndex(t,D),t.ZIMoutlineShape&&t.outline()}T||(j=null,U=t.scaleX,ee=t.scaleY,ae=t.rotation,ie=t.regX,ce=t.regY,t.reg(0,0),Q=t.getMatrix(),t.regX=ie,t.regY=ce);var K="id"+Math.abs(d.pointerID+1),w=t.parent.globalToLocal(d.stageX/e.scaX,d.stageY/e.scaY);t.zimTouch.pointers[K]={startX:w.x,startY:w.y,x:w.x,y:w.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(){t.zimTouch.total++})),P&&t.zimTouch.total==1&&t.zimTouch.slideInterval.pause(!1),y()}),t.zimTouch.pressmove=t.on("pressmove",function(d){var D="id"+Math.abs(d.pointerID+1),K=t.parent.globalToLocal(d.stageX/e.scaX,d.stageY/e.scaY);t.zimTouch.pointers[D]&&(t.zimTouch.pointers[D].x=K.x,t.zimTouch.pointers[D].y=K.y);var w=0,Y=0,Ee=0,X=0,Z=0,pe=0;if(e.loop(t.zimTouch.pointers,function(Ae,Ce){w+=Ce.x-Ce.startX,Y+=Ce.y-Ce.startY,Ee+=Ce.x,X+=Ce.y}),t.zimTouch.total!=0){Z=w/t.zimTouch.total,pe=Y/t.zimTouch.total,w=t.zimTouch.startX+Z,Y=t.zimTouch.startY+pe,Ee=Ee/t.zimTouch.total,X=X/t.zimTouch.total;var ve={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation};if(t.zimTouch.move){var $=t.zimTouch.checkBounds(w,Y);ve.x=$.x,ve.y=$.y}if(t.zimTouch.pair.length==2){var ue=t.zimTouch.pair[0],xe=t.zimTouch.pair[1];if(t.zimTouch.scale){var Ye=Math.sqrt(Math.pow(xe.startX-ue.startX,2)+Math.pow(xe.startY-ue.startY,2)),se=Math.sqrt(Math.pow(xe.x-ue.x,2)+Math.pow(xe.y-ue.y,2)),be=t.zimTouch.startSX+(se/Ye-1),te=t.zimTouch.startSY+(se/Ye-1);ve.scaleX=be,ve.scaleY=te,ve.scaleX=V.convert(be),ve.scaleY=I.convert(te);var _e=!n(f)&&Math.min(be,te)<f,J=!n(h)&&Math.max(be,te)>h;(_e||J)&&(_e?ne>1?(ve.scaleY=f,ve.scaleX=f*ne):(ve.scaleX=f,ve.scaleY=f/ne):J&&(ne>1?(ve.scaleX=h,ve.scaleY=h/ne):(ve.scaleY=h,ve.scaleX=h*ne)),V.immediate(ve.scaleX),I.immediate(ve.scaleY))}if(t.zimTouch.rotate){var ye=Math.atan2(ue.startY-xe.startY,ue.startX-xe.startX)*(180/Math.PI),Re=Math.atan2(ue.y-xe.y,ue.x-xe.x)*(180/Math.PI),de=Re-ye;ve.rotation=t.zimTouch.startR+de}if(T)t.scaleX=ve.scaleX,t.scaleY=ve.scaleY,t.rotation=ve.rotation,t.zimTouch.move&&(t.x=ve.x,t.y=ve.y);else{t.reg(0,0);var Me=t.parent.localToGlobal(Ee,X);Ee=Me.x,X=Me.y;var Be=n(j)?t.globalToLocal(Ee,X):t.globalToLocal(j.x,j.y),he=Q.clone().translate(Be.x,Be.y).rotate(ve.rotation-ae).scale(ve.scaleX/U,ve.scaleY/ee).translate(-Be.x,-Be.y);he.decompose(t),t.zimTouch.move&&(t.x+=Z,t.y+=pe),j=t.localToGlobal(Be.x,Be.y),t.reg(ie,ce)}t.zimTouch.scale&&t.dispatchEvent("scale"),t.zimTouch.rotate&&t.dispatchEvent("rotate"),t.zimTouch.move&&t.dispatchEvent("move")}else t.x=ve.x,t.y=ve.y,t.zimTouch.move&&t.dispatchEvent("move");(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.ZIMoutlineShape&&t.outline(),t.getStage&&t.stage&&t.stage.update()}}),t.on("mousedown",function(){var d=1;t.stage.on("stagemousedown",function(){d++}),t.stage.on("stagemouseup",function(){d--,d==0&&setTimeout(function(){t.zimTouch&&(t.zimTouch.total=0),t.zimTouch&&(t.zimTouch.pointers={}),G=null},50)})},null,!0),t.zimTouch.pressup=t.on("pressup",function(d){var D="id"+Math.abs(d.pointerID+1);if(delete t.zimTouch.pointers[D],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,o&&!n(g)&&t.zimTouch.total==0&&(g>0?t.rotation=Math.round(t.rotation/g)*g:g==0&&(t.rotation=Math.round(t.rotation))),P&&t.zimTouch.total==0&&G==1){t.zimTouch.slideInterval.pause();var K=L[(A+1)%L.length],w=L[A%L.length],Y=t.x+(K[0]-w[0])*C,Ee=t.y+(K[1]-w[1])*C,X=t.zimTouch.checkBounds(Y,Ee),Z=F*b*C*Math.min((t.x-X.x)/(t.x-Y)||1,(t.y-X.y)/(t.y-Ee)||1);t.animate({x:X.x,y:X.y},Z/(q=="s"?1e3:1),"quadOut",function(){t.dispatchEvent("slidestop")})}t.zimTouch.total==0&&(G=null),t.getStage&&t.stage&&t.stage.update(),y()}),l&&(p(),t.on("move",p))}function y(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(d,D,K){D.startX=D.x,D.startY=D.y,K<=1&&t.zimTouch.pair.push(D)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}function p(){var d=t.localToGlobal(t.regX,t.regY),D;if(S){var K=t.parent.localToGlobal(t.x-t.width/2,t.y-t.height/2),w=t.parent.localToGlobal(t.x+t.width/2,t.y+t.height/2);D={x:K.x,y:K.y,width:w.x-K.x,height:w.y-K.y}}else D=t.boundsToGlobal();var Y={x:t.zimTouch.boundaryStartX+d.x-D.x,y:t.zimTouch.boundaryStartY+d.y-D.y,width:t.zimTouch.boundaryStartW-D.width,height:t.zimTouch.boundaryStartH-D.height};t.gestureBoundary(Y,!1)}return t},e.noGesture=function(t,r,i,o){var l="obj, move, scale, rotate",f;if(f=mt(e.noGesture,arguments,l))return f;if(qe("34.6"),!(n(t)||!t.on||!t.zimTouch))return n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.zimTouch.move=!r,t.zimTouch.scale=!i,t.zimTouch.rotate=!o,!t.zimTouch.move&&!t.zimTouch.scale&&!t.zimTouch.rotate&&(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t},e.gestureBoundary=function(t,r,i){if(qe("34.7"),!(n(t)||!t.on)&&!(n(r)||!t.zimTouch)){t.zimTouch.localBoundary&&t.parent?t.zimTouch.boundary=e.boundsToGlobal(t.parent,r):t.zimTouch.boundary=r,n(i)&&(i=!0),i&&(t.zimTouch.boundaryStartX=r.x,t.zimTouch.boundaryStartY=r.y,t.zimTouch.boundaryStartW=r.width,t.zimTouch.boundaryStartH=r.height);var o=t.zimTouch.checkBounds(t.x,t.y);return t.x=o.x,t.y=o.y,t}},e.effect=function(t,r,i,o,l,f){if(qe("33.16"),n(r))return t;n(t.effects)&&(t.effects={}),Array.isArray(r)||(r=[r]);for(var h=0,g=0;g<r.length;g++){var _=r[g];_.type||(_ instanceof ze.BlurFilter?_.type="BlurEffect":_ instanceof ze.ColorFilter?_.type="ColorEffect":_ instanceof ze.AlphaMaskFilter?_.type="AlphaEffect":_ instanceof ze.ColorMatrixFilter?_.type="MultiEffect":n(_.type)&&(_.type="custom"+h++));var P=_.type.replace(/effect/i,"");t.effects[P.toLowerCase()]=_}t.filters=[];for(var C in t.effects)t.filters.push(t.effects[C]);return t.cache(i,o,l,f),t},e.updateEffects=function(t,r){return qe("33.163"),t.updateCache&&(r?t.cache():t.updateCache()),t},e.noEffect=function(t,r,i){if(qe("33.165"),n(i)&&(i=!1),n(r)){var o;t.effects.multi&&(o=t.effects.multi),t.effects={},o&&(t.effects.multi=o)}else{t.effects||(t.effects={}),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var f=r[l].replace(/effect/i,"");delete t.effects[f.toLowerCase()]}}t.filters=[];for(var h in t.effects)t.filters.push(t.effects[h]);return i||t.filters.length>0?t.updateCache&&t.updateCache():t.uncache&&t.uncache(),t},e.addPhysics=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O){var S="obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution, sensor",k;if(k=mt(e.addPhysics,arguments,S))return k;if(qe("34.8"),n(T)){if(typeof zimPhysics>"u")return Et&&ht("ZIM Physics module must be imported"),t;n(le.zimDefaultPhysics)&&(le.zimDefaultPhysics=new e.Physics),T=le.zimDefaultPhysics}t.physics=T;var x="rectangle";return t.type=="Circle"||t.type=="Dial"?x="circle":t.type=="Triangle"?x="triangle":t.type=="Blob"&&(x="poly"),n(o)&&(o=x),n(_)&&(_=N),Se(t,r,i,o,l,f,h,g,_,P,C,O),t},e.removePhysics=function(t){return qe("34.85"),n(t.physics)||(t==t.physics.followObj&&t.physics.follow(null),t.follow=t.noFollow=t.control=t.noControl=t.sleep=t.wake=null,t.impulse=t.force=t.spin=t.torque=null,t.physics.remove(t.body),t.physics=null),t},e.hitTestPoint=function(t,r,i,o){if(e.zimhtp||(qe("35"),e.zimhtp=!0),!t.stage||n(r)||n(i))return!1;if(!(n(t)||!t.globalToLocal)){if(n(o)&&(o=!0),o){var l=t.getBounds();if(l){var f=t.globalToLocal(r,i);if(f.x>l.x+l.width||f.x<l.x||f.y>l.y+l.height||f.y<l.y)return!1}}var h={x:r,y:i};return t.image||t.spriteSheet||t.type=="Shape"?h=t.globalToLocal(h.x,h.y):h=t.globalToLocal(h.x*e.scaX,h.y*e.scaY),t.hitTest(h.x,h.y)}},e.hitTestReg=function(t,r,i){if(e.zimhtr||(qe("36"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(!(n(t)||n(r)||!t.localToLocal||!r.localToLocal)){n(i)&&(i=!0);var o=r.localToGlobal(r.regX,r.regY),l=t.getBounds();if(i&&l){var f=t.globalToLocal(o.x,o.y);if(f.x>l.x+l.width||f.x<l.x||f.y>l.y+l.height||f.y<l.y)return!1}return t.image||t.spriteSheet||t.type=="Shape"?o=t.globalToLocal(o.x,o.y):o=t.globalToLocal(o.x*e.scaX,o.y*e.scaY),t.hitTest(o.x,o.y)}},e.hitTestRect=function(t,r,i,o,l){if(e.zimhtr||(qe("37"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=0),n(o)&&(o=!0);var f=r.getBounds();if(!f){Et&&ht("hitTestRect():\n please setBounds() on param b object");return}if(o){var h=t.getBounds();if(h&&!e.hitTestBounds(t,r))return!1}function g(S){if(t.image||t.spriteSheet||t.type=="Shape"?S=t.globalToLocal(S.x,S.y):S=t.globalToLocal(S.x*e.scaX,S.y*e.scaY),t.hitTest(S.x,S.y))return!0}var _=f.x+f.width/2,P=f.y+f.height/2,C=r.localToGlobal(_,P),T,N;if(l){if(!g(C))return!1;for(var O=0;O<=i;O++)if(T=f.width*(O+1)/(i+1),N=f.height*(O+1)/(i+1),C=r.localToGlobal(f.x+T,f.y),!g(C)||(C=r.localToGlobal(f.x+f.width,f.y+N),!g(C))||(C=r.localToGlobal(f.x+f.width-T,f.y+f.height),!g(C))||(C=r.localToGlobal(f.x,f.y+f.height-N),!g(C)))return!1;return!0}else{if(g(C))return!0;for(var O=0;O<=i;O++)if(T=f.width*(O+1)/(i+1),N=f.height*(O+1)/(i+1),C=r.localToGlobal(f.x+T,f.y),g(C)||(C=r.localToGlobal(f.x+f.width,f.y+N),g(C))||(C=r.localToGlobal(f.x+f.width-T,f.y+f.height),g(C))||(C=r.localToGlobal(f.x,f.y+f.height-N),g(C)))return!0}},e.hitTestCircle=function(t,r,i,o,l){if(e.zimhtc||(qe("38"),e.zimhtr=!0),qe("38"),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=8),n(o)&&(o=!0);var f=r.getBounds();if(!f){Et&&ht("hitTestCircle():\n please setBounds() on param b object");return}var h=t.getBounds();if(o&&h&&!e.hitTestBounds(t,r))return!1;function g(x){if(t.image||t.spriteSheet||t.type=="Shape"?x=t.globalToLocal(x.x,x.y):x=t.globalToLocal(x.x*e.scaX,x.y*e.scaY),t.hitTest(x.x,x.y))return!0}var _=f.x+f.width/2,P=f.y+f.height/2,C=r.localToGlobal(_,P),T=(f.width+f.height)/2/2,N,O,S;if(l){if(!g(C))return!1;for(var k=0;k<i;k++)if(N=k/i*2*Math.PI,O=_+T*Math.cos(N),S=P+T*Math.sin(N),C=r.localToGlobal(O,S),!g(C))return!1;return!0}else{if(g(C))return!0;for(var k=0;k<i;k++)if(N=k/i*2*Math.PI,O=_+T*Math.cos(N),S=P+T*Math.sin(N),C=r.localToGlobal(O,S),g(C))return!0}return!1},e.hitTestCircleRect=function(t,r,i){if(e.zimhtcr||(qe("38.2"),e.zimhtcr=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=t.getBounds(),f=r.getBounds();if(!l||!f){Et&&ht("hitTestCircleRect():\n please setBounds() on both objects");return}n(i)&&(i=0);var h=(t.radius?t.radius:(l.width+l.height)/2)+i,g=t.getConcatenatedMatrix().decompose().scaleX;h*=g/o.scaleX;var _=r.boundsToGlobal(),P=t.localToGlobal(0,0),C=P.x,T=P.y,N=_.x,O=_.y,S=_.x+_.width,k=_.y+_.height,x=C<N?N:C>S?S:C,E=T<O?O:T>k?k:T,L=x-C,A=E-T;return L*L+A*A<=h*h}}},e.hitTestCircles=function(t,r,i){if(e.zimhtcs||(qe("38.5"),e.zimhtcs=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.hitTest||!t.getBounds||!r.getBounds)){var l=t.getBounds(),f=r.getBounds();if(!l||!f){Et&&ht("hitTestCircles():\n please setBounds() on both objects");return}n(i)&&(i=0);var h=t.localToGlobal(l.x+l.width/2,l.y+l.height/2),g=r.localToGlobal(f.x+f.width/2,f.y+f.height/2),_=t.getConcatenatedMatrix(),P=r.getConcatenatedMatrix(),C=Math.sqrt(_.a/o.scaleX*_.a/o.scaleX+_.c/o.scaleX*_.c/o.scaleX),T=Math.sqrt(_.b/o.scaleY*_.b/o.scaleY+_.d/o.scaleY*_.d/o.scaleY),N=Math.sqrt(P.a/o.scaleX*P.a/o.scaleX+P.c/o.scaleX*P.c/o.scaleX),O=Math.sqrt(P.b/o.scaleY*P.b/o.scaleY+P.d/o.scaleY*P.d/o.scaleY),S=Math.sqrt(Math.abs(Math.pow(h.x-g.x,2)+Math.pow(h.y-g.y,2)));return l.width*Math.max(C,T)/2+f.width*Math.max(N,O)/2>=S-i}}},e.hitTestBounds=function(t,r,i,o){if(e.zimhtb||(qe("39"),e.zimhtb=!0),!(!t.stage||!r.stage)&&!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=!1;o&&o.graphics&&(l=!0);var f=t.getBounds(),h=r.getBounds();if(!f||!h){Et&&ht("hitTestBounds():\n please setBounds() on both objects");return}n(i)&&(i=0);var g=e.boundsToGlobal(t),_=e.boundsToGlobal(r);if(l){var P=o.graphics;P.c(),P.ss(1).s("blue"),P.r(g.x,g.y,g.width,g.height),P.s("green"),P.r(_.x,_.y,_.width,_.height),o.stage.update()}return e.rectIntersect(g,_,i)}},e.hitTestPath=function(t,r,i,o,l,f){if(e.zimhtpa||(qe("37.5"),e.zimhtpa=!0),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||r.type!="Squiggle"&&r.type!="Blob")return;var h=t.getBounds();n(i)&&(i=2),n(o)&&(o=!1),n(l)&&(l=!1),n(f)&&(f=!1);var g=[],_;function P(S){var k;if(t.image||t.spriteSheet||t.type=="Shape"?k=t.globalToLocal(S.x,S.y):k=t.globalToLocal(S.x*e.scaX,S.y*e.scaY),t.hitTest(k.x,k.y))if(l)g.push({x:Math.round(S.x),y:Math.round(S.y)});else if(f)_=T/C.length*100;else return!0}var C=r.interpolate(i,null,!0,null,!0),T,N;if(o)for(r.hitPathPoints?r.hitPathPoints.removeAllChildren():r.hitPathPoints=new e.Container().addTo(),r.hitPathPoints.top(),T=0;T<C.length;T++)N=C[T],N=r.localToGlobal(N.x,N.y),new e.Circle(3).loc(N.x,N.y,r.hitPathPoints);if(h){var O=e.boundsAroundPoints(C);if(!e.rectIntersect(t.boundsToGlobal(h),r.boundsToGlobal(O)))return!1}for(T=0;T<C.length;T++){if(N=C[T],N=r.localToGlobal(N.x,N.y),P(N))return!0;if(_!=null)return _}return g.length>0?g:!1},e.hitTestGrid=function(t,r,i,o,l,f,h,g,_,P,C,T,N){if(e.zimhtg||(qe("41"),e.zimhtg=!0),!t.stage)return!1;if(!n(t)&&!T){var O=t.globalToLocal(f,h);f=O.x,h=O.y}n(g)&&(g=0),n(_)&&(_=0),n(P)&&(P=0),n(C)&&(C=0),r+=P,i+=C;var S=r/o,k=i/l,x=Math.min(o-1,Math.max(0,Math.floor((f-g+P/2)/S))),E=Math.min(l-1,Math.max(0,Math.floor((h-_+C/2)/k)));if(!(N!="open"&&(f-g>S*(x+1)-P||f-g<S*x||h-_>k*(E+1)-C||h-_<k*E))){var L=E*o+x;if(n(N)||N=="index")return L;if(N=="col")return x;if(N=="row")return E;if(N=="array"||N=="open")return[L,x,E]}},e.animate=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye,Re,de){var Me="target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startCall, startParams, animateCall, animateParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck, noAnimateCall, pathDamp";if(t&&(t.props||t.obj)){var Be;if(Be=mt(e.animate,arguments,Me))return Be}if(t.type=="AC"&&le.zdf)return le.zdf.ac("animate",arguments),t;if(e.animateCheck||(qe("45"),e.animateCheck=!0),!t)return;var he=e.ANIMATE;if(le.ANIMATE!=null&&(he=le.ANIMATE),!he)return n(Re)&&(Re=!0),l&&Re&&typeof l=="function"&&l(n(f)?t:f),t;n(ye)&&(ye=!0);var Ae=v(null,J,null,null,n(ye)?!1:!ye);(C||N||T)&&(P=!0),(V||A||V||I||L)&&(E=!0);var Ce,me,Ne,ge=arguments,Ue=Array.prototype.slice.call(arguments);if(n(r)&&!n(ue)&&(r=ue),ue=r,n(ue))return Et&&ht("animate() - need props"),t;if(t.type=="BeadsContainer"&&n(ee)&&(ee=0),t.type=="Tone"&&(be=!1),be===!1?e.pauseAnimateOnBlur=!1:(be||n(be)&&e.pauseAnimateOnBlur!==!1)&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseAnimateOnBlur=!0),!(!n(ee)&&t.addChild)){i=e.Pick.choose(i),o=e.Pick.choose(o),h=e.Pick.choose(h),C=e.Pick.choose(C),T=e.Pick.choose(T),E=e.Pick.choose(E),L=e.Pick.choose(L),n(V)?V=i:V=e.Pick.choose(V),ce=e.Pick.choose(ce),D=e.Pick.choose(D),K=e.Pick.choose(K);var He=["loopCount","loopWait","rewind","rewindWait"];for(me in G)He.indexOf(me)>=0&&(G[me]=e.Pick.choose(G[me]))}var Oe={override:!n(t)&&!n(t.zimX)&&!n(ue.x)||!n(t)&&!n(t.zimY)&&!n(ue.y)};n(P)||(Oe.loop=P),n(C)||(Oe.count=C),n(T)||(Oe.loopWait=T),n(N)||(Oe.loopCall=N),n(k)||(Oe.loopWaitParams=k),n(S)||(Oe.loopWaitCall=S),n(O)||(Oe.loopParams=O),n(x)||(Oe.loopPick=x),n(E)||(Oe.rewind=E),n(L)||(Oe.rewindWait=L),n(A)||(Oe.rewindCall=A),n(b)||(Oe.rewindParams=b),n(F)||(Oe.rewindWaitCall=F),n(q)||(Oe.rewindWaitParams=q),n(ne)||(Oe.startCall=ne),n(R)||(Oe.startParams=R),n(Q)||(Oe.animateCall=Q),n(U)||(Oe.animateParams=U),n(r)||(Oe=e.merge(Oe,G)),G=Oe,e.loop(ue,function(Ge,vt){if(typeof Ge=="string"){var _t=Ge.split(".");if(_t.length>1&&Ge.substr(0,1)!="."&&(ue["."+Ge]=vt,delete ue[Ge],Ge="."+Ge),_t.length>1&&typeof vt=="string"){var At=vt.substr(0,1);At!="+"&&At!="-"&&(ue[Ge]="+"+vt)}}});function fe(Ge,vt){if(vt.substr(0,1)=="."){for(var _t=vt.split("."),At=Ge,Nt=1;Nt<_t.length;Nt++)At=At[_t[Nt]];return At}else return vt=="transform"&&Ge.style?Ge.style.transform:Ge[vt]}function Xe(Ge,vt,_t){if(vt.substr(0,1)=="."){for(var At=vt.split("."),Nt=Ge,Vt=1;Vt<At.length-1;Vt++)Nt=Nt[At[Vt]];Nt[At[At.length-1]]=_t}else Ge[vt]=_t}if(t.zimTweenOriginals={},!n(ee)&&t.addChild){var Ze=[];for(Ce=0;Ce<t.numChildren;Ce++)Ze.push(t.getChildAt(Ce));Ee=t,t=Ze}var Ke=["extra","zoom","speed","layer","fade"],ut={zoom:t.type=="Pen"?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(t instanceof Array){for(ce&&t.reverse(),Ce=0;Ce<t.length;Ce++){var gt=t[Ce];if(D){var We;gt.zimObj={};for(me in ue){if(Ke.indexOf(me)>=0?We=ue[me]:We=e.Pick.choose(ue[me]),gt.zimObj[me]=gt[me],typeof We=="string"&&me!="transform"){var it;gt.zimLastObj&&!n(gt.zimLastObj[me])?it=gt.zimLastObj[me]:it=gt[me],We=it+Number(We.replace(/\s/g,""))}gt.zimLastObj&&(gt.zimLastObj[me]=E?gt.zimTweenOriginals[me]:ue[me]),gt[me]=We}}else{gt.zimObj={};for(me in ue)Ke.indexOf(me)>=0,gt.zimObj[me]=ue[me]}var ct=Ce*ee;Ce==0&&ee!=0&&(ct=Ae=="s"?.02:20),e.animate(gt,gt.zimObj,i,o,Ce==t.length-1?l:null,Ce==t.length-1?f:null,h,g,_,null,null,null,null,null,null,null,x,null,null,null,null,null,null,V,I,ne,R,Q,U,null,ae,ie,null,j,e.copy(G),y,p,d,null,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,ct,se,be,te,_e,J,ye,Re,de)}return Ee}var Pe=i,Fe=V;n(Pe)&&(Pe=Ae=="s"?1:1e3),n(V)&&(V=Fe=Pe),n(o)&&(o="quadInOut"),n(h)&&(h=0),n(L)&&(L=0),n(G)&&(G={override:!n(t.zimX)&&!n(ue.x)||!n(t.zimY)&&!n(ue.y)}),n(f)&&(f=t),n(j)&&(j=!0),n(y)&&(y=!1),n(p)&&(p=!1),n(D)&&(D=!1),n(K)&&(K={}),K.scale&&(K.scaleX=K.scaleY=K.scale,delete K.scale),n(d)||(G.override=d),n(Z)&&(Z=!1),n(ve)&&(ve=!!Z),n(X)&&(X=!1),n(pe)&&(pe=!0),n($)&&($=!0),n(de)&&(de=.15),n(se)&&(se=1),t.futureRate=se;var we,je,st;if(ue instanceof Array){if(Ne=1,ue.length==0)return this;var Je,tt;return Ve(),Zt(),Te(),t}function Te(){t.zimLastObj&&e.loop(t.zimLastObj,function(En){n(t.zimTweenOriginals[En])||(t[En]=t.zimTweenOriginals[En],t.zimLastObj[En]=t.zimTweenOriginals[En])});for(var Ge,vt=h,_t=0,At,Nt,Vt=0;Vt<ue.length;Vt++)if(Ge=ue[Vt],!n(Ge.target)){n(Ge.time)&&(Ge.time=Pe),vt+=Ge.wait?Ge.wait:0,At=Ge.time,Nt=n(Ge.rewindTime)?At:Ge.rewindTime,Ge.rewind&&(At=At+Nt+(Ge.rewindWait?Ge.rewindWait:0)),Ge.loop&&(At*=Ge.loopCount,At+=(Ge.loopCount-1)*(Ge.loopWait?Ge.loopWait:0)),n(Ge.params)&&(Ge.params=Ge.target),tt=Ge.target,vt<0&&(_t+=vt,vt=0);var vn={target:Ge.target,obj:e.copy(Ge.obj),seriesWait:_t,wait:vt,waitedCall:Ge.waitedCall,waitedParams:Ge.waitedParams,time:Ge.time,ease:Ge.ease,from:Ge.from,rewind:Ge.rewind,call:Ge.call,params:Ge.params,loop:Ge.loop,loopCount:Ge.loopCount,loopWait:Ge.loopWait,loopCall:Ge.loopCall,loopParams:Ge.loopParams,loopWaitCall:Ge.loopWaitCall,loopWaitParams:Ge.loopWaitParams,loopPick:Ge.loopPick,rewindWait:Ge.rewindWait,rewindCall:Ge.rewindCall,rewindParams:Ge.rewindParams,rewindWaitCall:Ge.rewindWaitCall,rewindWaitParams:Ge.rewindWaitParams,rewindTime:Ge.rewindTime,rewindEase:Ge.rewindEase,startCall:Ge.startCall,startParams:Ge.startParams,animateCall:Ge.animateCall,animateParams:Ge.animateParams,set:e.copy(Ge.masterSet),events:Y,rate:t.futureRate,pauseOnBlur:Ge.pauseOnBlur,easeAmount:Ge.easeAmount,easeFrequency:Ge.easeFrequency,override:!1,id:w};Vt==ue.length-1&&et(vn),e.animate(vn),_t+=vt+At,vt=0}}function et(Ge){var vt=Ge.call,_t=Ge.params;G.loop&&(!G.count||Ne<G.count)?Ge.call=function(){vt&&typeof vt=="function"&&vt(_t),G.loopCall&&typeof G.loopCall=="function"&&G.loopCall(G.loopParams),G.loopWait?(n(t.zimTweens)&&(t.zimTweens={}),we=t.zimTweens[w]=t.zimTween=ze.Tween.get(t,{override:G.override}).wait(G.loopWait,!0).call(At),we.timeScale=t.futureRate):At();function At(){for(var Nt=0;Nt<Je.objects.length;Nt++)Je.objects[Nt].set&&Je.objects[Nt].set(Je.values[Nt]);G.loopWaitCall&&typeof G.loopWaitCall=="function"&&G.loopWaitCall(G.loopWaitParams),Te()}}:Ge.call=function(){vt&&typeof vt=="function"&&vt(_t),n(f)&&(f=tt),l&&typeof l=="function"&&l(f),t.zimLastObj=null},Ne++}function Ve(){t&&!t.seriesTweens&&(t.seriesTweens=[],t.seriesCalls=[],t.seriesParams=[]);for(var Ge,vt=0;vt<ue.length;vt++)Ge=ue[vt],Ge.target?(Ge.target.seriesTweens||(Ge.target.seriesTweens=[]),Ge.target.seriesCalls||(Ge.target.seriesCalls=[]),Ge.target.seriesParams||(Ge.target.seriesParams=[]),Ge.target.seriesTweens.push(Ge.props),Ge.target.seriesCalls.push(Ge.call),Ge.target.seriesParams.push(Ge.params)):(t.seriesTweens.push(Ge.props),t.seriesCalls.push(Ge.call),t.seriesParams.push(Ge.params));t.seriesCalls.push(l),t.seriesParams.push(f),Ge=ue[0];var _t;for(t?_t=t:_t=Ge.target,_t.zimSeriesOriginals={},vt=ue.length-1;vt>=0;vt--)Ge=ue[vt],n(Ge.props)&&!n(Ge.obj)&&(Ge.props=Ge.obj),Ge.obj=Ge.props,e.loop(Ge.obj,function(hr){hr=="path"?_t.zimSeriesOriginals[hr]=ue[hr]:_t.zimSeriesOriginals[hr]=fe(_t,hr)});var At=new e.Dictionary;for(Je=new e.Dictionary,vt=0;vt<ue.length;vt++)if(Ge=ue[vt],t||(t=Ge.target),n(Ge.target)&&(Ge.target=t),n(Ge.ease)&&(Ge.ease=o),!n(Ge.target)){if(vt==0&&(Ge.target.zimSeriesArgs=ge),n(Ge.props)&&!n(Ge.obj)&&(Ge.props=Ge.obj),Ge.obj=Ge.props,Ge.loop&&(n(Ge.loopCount)||Ge.loopCount<=0)&&(Ge.loopCount=0,ue.splice(vt+1,ue.length)),n(Ge.obj.scale)||(Ge.obj.scaleX=Ge.obj.scaleY=Ge.obj.scale,delete Ge.obj.scale),Ge.from){var Nt=At.at(Ge.target);if(Nt){if(Ge.set){var Vt=e.copy(Ge.obj),vn=e.merge(Nt,Ge.set);Ge.obj=jt(Ge.target,Ge.obj,vn),Ge.set=e.merge(Ge.set,Vt)}else Ge.set=e.copy(Ge.obj),Ge.obj=jt(Ge.target,Ge.obj,Nt);Ge.from=!1}else At.add(Ge.target,jt(Ge.target,Ge.obj,Ge.set))}var En={};for(var Gn in Ge.obj)En[Gn]=Ge.set&&Ge.set[Gn]?Ge.set[Gn]:Ge.target[Gn];n(Je.at(Ge.target))&&Je.add(Ge.target,{});var ar=e.merge(Je.at(Ge.target),En);Je.remove(Ge.target),Je.add(Ge.target,ar),Ge.masterSet=e.copy(Ge.set)}n(t.zimTweens)&&(t.zimTweens={})}if(ue&&(ue.x&&(t.zimX=!0),ue.y&&(t.zimY=!0)),!n(ue.shape)&&ue.shape.type==t.type&&(t.type=="Blob"||t.type=="Squiggle")){var Le=t.pointObjects,Qe=ue.shape.pointObjects;if(Le.length!=Qe.length)Et&&ht("animate() - shapes must be of same number of points"),delete ue.shape;else{delete ue.shape;var $e=n(ue.blobShift)?0:ue.blobShift;delete ue.blobShift;var nt=!0;for(Ce=0;Ce<Le.length;Ce++){var pt=Le[Ce],De=Qe[(Le.length*2e4+Ce+$e)%Le.length];for(Xn=0;Xn<4;Xn++)if(Xn!=1){var at=pt[Xn],yt=e.copy(Ue);yt[0]=at,yt[1]={x:De[Xn].x,y:De[Xn].y,rotation:De[Xn].rotation},nt&&(yt[37]=!0,at.animateEvent&&at.off("animation",at.animateEvent),at.animateEvent=at.on("animation",function(){t.update()})),nt=!1,e.animate.apply(e.animate,yt)}}if(e.isEmpty(ue))return t}}if(n(t))return;t.tweenStates||(t.tweenStates={all:!0});var rt=!1;if(ue.note){if(Array.isArray(ue.note))e.loop(ue.note,function(Ge,vt){typeof Ge=="string"&&(ue.note[vt]=e.Synth.note(Ge))});else if(ue.note.min)ue.note.min=e.Synth.note(ue.note.min),ue.note.max=e.Synth.note(ue.note.max);else if(ue.note.array)e.loop(ue.note.array,function(Ge,vt){typeof Ge=="string"&&(ue.note.array[vt]=e.Synth.note(Ge))});else if(typeof ue.note=="function"){if(Et)return ht("animate() - use frequency in ZIM VEE functions not note"),t}else ue.note=e.Synth.note(ue.note);ue.frequency=ue.note,delete ue.note}function Tt(Ge,vt){return!!Object.getOwnPropertyDescriptor(Ge,vt).get}(t.type=="Sprite"||!Object.prototype.hasOwnProperty.call(t,"paused"))&&(Object.defineProperty(t,"paused",{get:function(){return t.animatePaused},set:function(Ge){t.animatePaused=Ge}}),t.type!=null&&(t.paused=!0),t.animating=!1),t.endTween=function(Ge,vt){if(t.stopAnimate(vt),Ge!="all"&&Ge!="main"&&Ge!="none"&&(Ge="all"),!t.seriesTweens)e.loop(t.zimLastObj,function(At){typeof t.zimLastObj[At]=="string"&&At!="transform"&&(t.zimLastObj[At]=t[At]+Number(t.zimLastObj[At].replace(/\s/g,""))),Xe(t,At,t.zimLastObj[At])}),Ge!="none"&&l&&l(f);else{if(e.loop(t.seriesTweens,function(At,Nt){e.loop(At,function(Vt){typeof At[Vt]=="string"&&Vt!="transform"&&(At[Vt]=t[Vt]+Number(At[Vt].replace(/\s/g,""))),Xe(t,Vt,At[Vt])}),Ge=="all"&&t.seriesCalls[Nt]&&t.seriesCalls[Nt](t.seriesParams[Nt])}),Ge!="none"){var _t=t.seriesCalls[t.seriesCalls.length-1];_t&&_t(t.seriesParams[t.seriesParams.length-1])}t.seriesTweens=null,t.seriesCalls=null,t.seriesParams=null}return t.stage&&t.stage.update(),t};var xt=!1;if(e.loop(ue,function(Ge,vt){Ge=="path"?t.zimTweenOriginals[Ge]=ue[Ge]:t.zimTweenOriginals[Ge]=fe(t,Ge),Ge.match("hue")?(ue.hueBatch=vt,delete ue.hue,xt=!0):Ge.match("saturation")?(ue.saturationBatch=vt,delete ue.saturation,xt=!0):Ge.match("brightness")?(ue.brightnessBatch=vt,delete ue.brightness,xt=!0):Ge.match("contrast")?(ue.contrastBatch=vt,delete ue.contrast,xt=!0):Ge.match(/^.effects/)&&(xt=!0)}),t.resetTween=function(Ge){n(Ge)&&(Ge=!0),t.pauseAnimate(),t.percent=null,t.startPercent=null;var vt=t.zimSeriesOriginals?t.zimSeriesOriginals:t.zimTweenOriginals;return e.loop(vt,function(_t){if(_t=="path"){t.percentComplete=0,t.zimPath=vt[_t];var At;t.zimStartPercent,At=t.zimPath.getCurvePoint(t.zimStartPercent/100),t.loc(At.x,At.y)}else Xe(t,_t,vt[_t])}),t.zimLastObj=null,t.stage&&t.stage.update(),t.stopAnimate(),t.zimPath&&(Ue[1].path=t.zimPath),n(t.zimStartRotation)||(t.rotation=t.zimStartRotation),t.zimStartRotation=null,n(t.zimStartScaleX)||(t.scaleX=t.zimStartScaleX),t.zimStartScaleX=null,n(t.zimStartScaleY)||(t.scaleY=t.zimStartScaleY),t.zimStartScaleY=null,e.animate.apply(null,t.zimSeriesArgs?t.zimSeriesArgs:Ue),t.pauseAnimate(Ge),t},t.replayTween=function(){return t.resetTween(!1),t},ue.path||X){var Ct;t.requestedPercentComplete?Ct=t.requestedPercentComplete:t.percentComplete&&!Tt(t,"percentComplete")&&(Ct=t.percentComplete),t.requestedPercentComplete=null,n(Ct)&&(Ct=0),t.pathRatio=0,t.zimStartRotation=t.rotation,t.percent=null,t.parent&&t.parent.type=="BeadsContainer"||(t.startPercent=null)}y&&(j=!1),n(t.zimTweens)&&(t.zimTweens={});var lt;if(y||(t.stage?lt=t.stage:le.zdf?lt=le.zdf.stage:y=!0),t.setColorRange&&!n(ue.color)){var Dt=ue.color;delete ue.color,ue.colorRange=1,t.setColorRange(t.color,Dt),t.colorRange=0}else if(ue.color&&(t.material||t.isMaterial)){if(t.isMaterial)return ht("ZIM animate - please animate the color on the mesh not the material"),t;var Mt=t;Mt.cT&&e.Ticker.remove(Mt.cT),t={val:0,zimTweens:{},ticker:Mt.cT};var St=Mt.material.color.getHexString(),Ft=ue.color;if(ue={val:1},Mt.cT=e.Ticker.add(function(){var Ge=e.colorRange("#"+St,Ft,t.val);Mt.material.color.set(Ge)}),l){var Yt=l;l=function(){Mt.cT==t.ticker&&(Yt(callParams||Mt),e.Ticker.remove(Mt.cT),Mt.cT=null,t=null)}}else l=function(){Mt.cT==t.ticker&&(e.Ticker.remove(Mt.cT),Mt.cT=null,t=null)}}var $t={};for(Ce in ue)Ke.indexOf(Ce)>=0||($t[Ce]=e.copy(ue[Ce]),ue[Ce]=e.Pick.choose(ue[Ce]));n(ue.scale)||(ue.scaleX=ue.scaleY=e.Pick.choose(ue.scale),delete ue.scale);for(var sn in ue){if(!t.zimBusy)break;t.zimBusy[sn]&&delete ue[sn]}if(e.isEmpty(ue))return;if(t.type!="Sprite")t.type!=null&&(t.paused=!1),t.animating=!0;else for(var nn in ue)if(nn!="normalizedFrame"){t.animating=!0;break}function Ot(){t.zimMouseEnabledCheck||(t.zimMouseEnabledCheck=!0,t.zimLastMouseEnabled=t.mouseEnabled),t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var Ge in ue)t.zimBusy[Ge]=!0;t.zimMouseEnabledCheck=null,t.mouseEnabled=t.zimLastMouseEnabled},70)}(p||G.loop||G.rewind)&&Ot(),Zt();function Zt(){n(w)?w=e.makeID(null,10):(w=String(w),st=w),n(t.zimIdSets)&&(t.zimIdSets={}),n(t.zimIdSets[w])?t.zimTweens&&!n(t.zimTweens[w])&&(je=w,w=e.makeID(null,10),t.zimIdSets[je]=[je],t.zimTweens[je].zimIdSet=je,t.zimIdSets[je].push(w)):(je=w,w=e.makeID(null,10),t.zimIdSets[je].push(w))}Ke.shift();for(Ce in K)K[Ce]=e.Pick.choose(K[Ce]);for(Ce in G)Ce=="waitedCall"||Ce=="waitedParams"||Ce=="loopCall"||Ce=="rewindCall"||Ce=="loopWaitCall"||Ce=="rewindWaitCall"||Ce=="startCall"||Ce=="animateCall"||(G[Ce]=e.Pick.choose(G[Ce]));ot();function ot(){Rt(),Ut(),t.seriesTweens&&(t.seriesTweens[0]=ue),D&&!rt&&(ue=jt(t,ue,K,!0))}function bt(){Rt(),D&&!rt&&(ue=jt(t,ue,K,!0))}function Rt(){var Ge;t.zimLastObj||(t.zimLastObj={});for(Ce in ue){if(typeof ue[Ce]=="string"&&Ce!="transform"){if(Ce.substring&&Ce.substring(0,1)=="."){if(ue[Ce].substr(0,1)=="+"||ue[Ce].substr(0,1)=="-")continue}else if(ue[Ce].substr(0,1)=="+")continue;if(ue[Ce].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[Ce])?Ge=t.zimLastObj[Ce]:Ge=t[Ce],ue[Ce]=Ge+Number(ue[Ce].replace(/\s/g,""))}t.zimLastObj[Ce]=E?t.zimTweenOriginals[Ce]:ue[Ce]}}function Ut(){var Ge;for(Ce in K){if(typeof K[Ce]=="string"&&Ce!="transform"){if(Ce.substring&&Ce.substring(0,1)=="."){if(K[Ce].substr(0,1)=="+"||K[Ce].substr(0,1)=="-")continue}else if(K[Ce].substr(0,1)=="+")continue;if(K[Ce].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[Ce])?Ge=t.zimLastObj[Ce]:Ge=t[Ce],K[Ce]=Ge+Number(K[Ce].replace(/\s/g,""))}t.zimLastObj[Ce]=E?t.zimTweenOriginals[Ce]:ue[Ce]}}t.getBounds&&n(t.percentCompleteCheck)&&(t.percentCompleteCheck=!0,t._percentComplete=0,Object.defineProperty(t,"percentComplete",{get:function(){if(t.paused)return t._percentComplete;if(t.tweenStartTime&&t.tweenEndTime){var Ge=Date.now(),vt;G.loop&&Ge>t.tweenEndTime?vt=(Ge-t.tweenStartTime)%(t.tweenEndTime-t.tweenStartTime):vt=Ge-t.tweenStartTime;var _t=Math.max(0,Math.min(100,vt/(t.tweenEndTime-t.tweenStartTime)*100));return t._percentComplete=_t,_t}else return 0},set:function(Ge){this.zimTween?(Jn=!0,Gt(Ge,!0)):this.requestedPercentComplete=Ge,t._percentComplete=Ge}}),Object.defineProperty(t,"percentCompleteNoAngle",{get:function(){if(t.paused)return t._percentComplete;if(t.tweenStartTime&&t.tweenEndTime){var Ge=Date.now(),vt;G.loop&&Ge>t.tweenEndTime?vt=(Ge-t.tweenStartTime)%(t.tweenEndTime-t.tweenStartTime):vt=Ge-t.tweenStartTime;var _t=Math.max(0,Math.min(100,vt/(t.tweenEndTime-t.tweenStartTime)*100));return t._percentComplete=_t,_t}else return 0},set:function(Ge){this.zimTween?Gt(Ge,!1):this.requestedPercentComplete=Ge,t._percentComplete=Ge}})),Object.defineProperty(t,"rate",{get:function(){return t.futureRate},set:function(Ge){t.futureRate=Ge,e.loop(t.zimTweens,function(vt,_t){_t.timeScale=Ge})},configurable:!0});function Gt(Ge,vt){t.zimTween.startPaused=!1,X?n(t.zimTween.currentTime)||(t.zimTween.currentTime=t.zimTween.currentTime-t.zimTween.position+Ge*t.zimTween.duration/100):t.zimTweens?e.loop(t.zimTweens,function(_t,At,Nt){var Vt=t.tweenStartTime+(t.tweenEndTime-t.tweenStartTime)*Ge/100,vn;At.zimLoop&&Vt<=At.startTime?vn=0:At.zimLoop&&Vt>At.startTime+At.duration?vn=(Vt-At.startTime)%At.duration:vn=Vt-At.startTime,At.percentComplete=Math.max(0,Math.min(100,vn/At.duration*100))}):t.zimTween.setPosition(Math.round(Ge*t.zimTween.duration/100)),vt&&wt&&ue.orient!==!1&&wt.getCurvePoint&&(t.rotation=wt.getCurvePoint(t.pathRatio,null,null,!0).angle+(kn||0)),Jn&&typeof Xt<"u"&&(Xt=Ge),t.handlePath&&t.handlePath()}var wt,Bt,Ht,Jt;if(!n(ue.path)&&ue.path.segmentPoints){n(ue.orient)&&(ue.orient=!0),ue.orient&&n(ue.flip)&&(ue.flip=!0),t.type=="Pen"&&(t.infinite=!0),t.zimOnPath=!0,n(t.pathRatio)&&(t.pathRatio=0),ue.orient&&(ue.orient=ue.path,ue.startOrient=ue.rotation),wt=ue.path,Z?(delete ue.path,delete ue.percent,(Et&&t.startPercent&&t.startPercent>0||t.percent&&t.percent!=100)&&ht("ZIM.animate() - startPercent and percent currently not supported with drag on path"),Bt=wt.getCurvePoint(t.pathRatio,It,Jt),Bt&&(Ht=t.parent.globalToLocal(Bt.x,Bt.y),t.x=Ht.x,t.y=Ht.y)):(n(t.startPercent)&&(t.startPercent=e.Pick.choose(n(ue.startPercent)?0:ue.startPercent)),n(t.percent)&&(t.percent=e.Pick.choose(n(ue.percent)?100:ue.percent)),delete ue.path,delete ue.percent);var cn=!wt.lockControls;delete ue.path,ue.pathRatio=1}function jt(Ge,vt,_t,At){rt=!0,wt&&(!n(Ge.percentComplete)||_t&&!n(_t.percentComplete))&&(_t||(_t={}),n(_t.pathRatio)&&(_t.pathRatio=n(_t.percentComplete)?Ge.percentComplete/100:_t.percentComplete/100));var Nt={};for(Ce in vt)_t&&!n(_t[Ce])?Nt[Ce]=_t[Ce]:Nt[Ce]=Ge[Ce],At&&(Ge[Ce]=vt[Ce]);return Nt}var an=!0,en=!1,yn=!0,kt=!0;n(ue.redirect)||(kt=ue.redirect,delete ue.redirect);function ft(Ge){var vt=wt.globalToLocal(Ge.rawX/e.scaX,Ge.rawY/e.scaY),_t=Un;wt.type=="Blob"&&(wn[0]<wn[4]?Pt=!0:wn[0]>wn[4]&&(Pt=!1),_t<10&&!Pt?(Rn=Un=_t=zt-5,Zn.immediate(Rn/zt*100),wn=[zt-1,zt-2,zt,zt-3,zt-4]):_t>zt-10&&Pt&&(Rn=Un=_t=5,Zn.immediate(Rn/zt*100),wn=[0,0,0,0,0]));var At={x:vt.x,y:vt.y,r:_t};Fn.sort(function(Nt,Vt){var vn={x:Nt.x,y:Nt.y,r:Nt.r*zt},En={x:Vt.x,y:Vt.y,r:Vt.r*zt},Gn=Math.sqrt(Math.pow(At.x-vn.x,2)+Math.pow(At.y-vn.y,2)+Math.pow(At.r-vn.r,2)),ar=Math.sqrt(Math.pow(At.x-En.x,2)+Math.pow(At.y-En.y,2)+Math.pow(At.r-En.r,2));return Gn-ar}),Rn=Fn[0].r*zt,Xt=Rn/zt*100,Xt=e.constrain(Xt,0,99.95),E&&(Xt/=2,we.position>we.duration/2&&(Xt=100-Xt))}if(wt){let Ge=function(_t){return _t.latestTween?_t.latestTween.percentComplete:_t.percentComplete},vt=function(_t,At){_t.zimTween.startPaused=!1,_t.latestTween.percentComplete=At,Jn&&typeof Xt<"u"&&(Xt=value),_t.handlePath&&_t.handlePath()};var It;cn||(Jt=e.copy(wt.segmentPoints),It=e.copy(wt.segmentRatios)),t.currentPercent=t.startPercent+t.percent*t.pathRatio;var qt=(1e6+t.currentPercent)%100/100;if(Bt=wt.getCurvePoint(qt,It,Jt),t.parent&&Bt&&(Ht=t.parent.globalToLocal(Bt.x,Bt.y),t.x=Ht.x,t.y=Ht.y),Z){o="linear",t.cur("pointer");var Xt;ue.startPercent!=null?Xt=ue.startPercent:Xt=0;var rn=!1,Qt=!0,Pt=!0,Wt=Xt,xn=10;Jt=e.copy(wt.segmentPoints);var zt=0;e.loop(Jt,function(_t){zt+=e.distanceAlongCurve(_t)});var ln=Math.round(zt/Jt.length/xn),Fn=wt.interpolate(ln,null,!0,null,!0),Un=(Xt||0)/100*zt,Rn=Un;wt.zimAnimateChanged=!1,t.zimAnimatePathChange=wt.on("change",function(){wt.zimAnimateChanged=!0}),t.zimAnimatePathDown=wt.on("mousedown",function(){rn=!0,t.paused==!0&&(en=!0)}),t.zimAnimatePathUp=wt.on("pressup",function(){en=!1}),t.zimAnimateDragDown=t.on("mousedown",function(_t){lt=_t.target.stage,t.amu||(t.amu=lt.frame.on("mouseupplus",function(){en=!1})),lt.mouseMoveOutside=!0,an=!1,yn=!0,setTimeout(function(){an=!0},50),en=!0,wt.zimAnimateChanged&&(Jt=e.copy(wt.segmentPoints),zt=0,e.loop(Jt,function(Nt){zt+=e.distanceAlongCurve(Nt)}),ln=Math.round(zt/Jt.length/xn),Fn=wt.interpolate(ln,null,!0,null,!0)),wt.zimAnimateChanged=!1,Xt=Ge(t),Zn.immediate(Xt);var At=Xt;E&&(we.position>we.duration/2?At=(100-Xt)*2:At=Xt*2),Un=(At||0)/100*zt,Rn=Un});var nr=!1;t.zimAnimateDragPress=t.on("pressmove",function(_t){nr=!0,ft(_t)}),t.animateReturn=function(){if(!E){Et&&ht("animate() - animateReturn() needs rewind set to true");return}Qt=!1,Pt=!1,Ge(t)<50&&vt(t,100-Ge(t)),t.pauseAnimate(!1)},t.zimAnimateDragUp=t.on("pressup",function(){t.paused==!1&&(en=!1),an=!1,setTimeout(function(){an=!0},50),wn[0]<wn[4]?Pt=!0:wn[0]>wn[4]&&(Pt=!1),!t.paused&&E&&kt&&Pt!=Qt&&(vt(t,100-Ge(t)),Qt=Pt)});var Zn=new e.Damp(Xt,de),Kn=0,dn=0,wn=[0,0,0,0,0],Jn=!1;t.zimDragAnimateTicker=e.Ticker.add(function(){var _t;Z&&(++dn%20&&(wn.push(Rn),wn.shift()),Un=Rn,rn&&(Xt=Ge(t)),en||yn&&t.paused==!0?(rn||Jn||wt.type=="Blob"&&Math.abs(Kn-Xt)>(E?45:90)?(rn=!1,_t=Xt,Zn.immediate(_t),Jn=!1):_t=Zn.convert(Xt),Math.abs(Kn-_t)>.1?(vt(t,_t),Kn=_t):(vt(t,_t),yn=!1,nr=!1)):yn=!1)},lt)}}var un;if(ue.orient){if(ue.orient===!0){var fn=t.parent.localToGlobal(n(ue.x)?t.x:ue.x,n(ue.y)?t.y:ue.y);ue.orient={x:fn.x,y:fn.y}}un=ue.orient,delete ue.orient;var kn=t.rotation;if(t.rotation=wt.getPointAngle(0)+kn,un!=wt){var Vn;un.parent?Vn=un.parent.localToLocal(un.x,un.y,t.parent):Vn=t.parent.globalToLocal(un.x,un.y),t.rotation=e.angle(t.x,t.y,Vn.x,Vn.y)+kn}}var lr=t.scaleX,ur=t.scaleY,Pn=ue.flip!=null?ue.flip:!1,bn=ue.flipVertical!=null?ue.flipVertical:!1,In=t.x,Kt=t.y,on=0;G.loop&&(n(G.count)||(on=G.count,delete G.count,Ne=1));var tn=0;G.loopWait&&(tn=G.loopWait,T=G.loopWait,delete G.loopWait);var _n;G.loopCall&&(_n=G.loopCall,delete G.loopCall);var Mn=t;G.loopParams&&(Mn=G.loopParams,delete G.loopParams),le.TIMECHECK&&ye&&(Pe&&a(Pe,Ae),Fe&&a(Fe,Ae),h&&a(h,Ae),Wn&&a(Wn,Ae),tn&&a(tn,Ae),T&&a(T,Ae),G.rewindWait&&a(G.rewindWait,Ae),xe&&a(xe,Ae),Ye&&a(Ye,Ae)),Ae=="s"&&(Pe&&(Pe*=1e3),Fe&&(Fe*=1e3),h&&(h*=1e3),Wn&&(Wn*=1e3),tn&&(tn*=1e3),T&&(T*=1e3),G.rewindWait&&(G.rewindWait*=1e3),xe&&(xe*=1e3),Ye&&(Ye*=1e3));var Cn=Pe;G.rewind&&(Cn+=Fe),t.zimTweenArgs={time:Cn,wait:h,wait2:Wn,wait3:tn,loopWait:T,rewindWait:G.rewindWait,seriesWait:xe,sequenceWait:Ye};function er(){if(tn>0&&(t.waiting=!1),!!G.loop){if(ae&&typeof ae=="function"){var Ge=n(ie)?t:ie;ae(Ge)}if(_n&&typeof _n=="function"&&_n(Mn||t),x){var vt=e.Pick.choose(t.futureRate);n(t.futureRate)||(we.timeScale=vt);var _t;if(n($t.scale)||(_t=e.Pick.choose($t.scale)),!D&&we.step&&we.step.prev&&we.step.prev.props){for(var At in we.step.prev.props)if(!(Ke.indexOf(At)>=0)){var Nt=e.Pick.choose($t[At]);if(typeof Nt=="string"&&At!="transform"&&Nt.substr(0,1)!="+"&&Nt.substr(0,1)!="-"){var Vt;t.zimLastObj&&!n(t.zimLastObj[At])?Vt=t.zimLastObj[At]:Vt=t[At],Nt=Vt+Number(Nt.replace(/\s/g,""))}t.zimLastObj[At]=E?t.zimTweenOriginals[At]:Nt,E?(n($t[At])||(we.step.prev.props[At]=Nt),At=="scaleX"&&!n(_t)&&(we.step.prev.props.scaleX=_t),At=="scaleY"&&!n(_t)&&(we.step.prev.props.scaleY=_t)):(n($t[At])||(we.step.props[At]=Nt),At=="scaleX"&&!n(_t)&&(we.step.props.scaleX=_t),At=="scaleY"&&!n(_t)&&(we.step.props.scaleY=_t))}}}}}var On;G.loopWaitCall&&(On=G.loopWaitCall,delete G.loopWaitCall);var Hn=t;G.loopWaitParams&&(Hn=G.loopWaitParams,delete G.loopWaitParams);function vr(){On&&typeof On=="function"&&On(Hn||t)}var rr;G.startCall&&(rr=G.startCall,delete G.startCall);var yr;G.startParams&&(yr=G.startParams,delete G.startParams);function mr(Ge){Ge.startCalled||(Ge.startCalled=!0,rr&&typeof rr=="function"&&rr(yr||t))}function $n(Ge){t.latestTween=Ge,t.waiting?Ge.startTime=Date.now():Ge.startTime=xr,Ge.zimLoop=P,t.animating||t.pauseAnimate(!0),Object.defineProperty(Ge,"percentComplete",{get:function(){return this.position/this.duration*100},set:function(vt){this.setPosition(vt*this.duration/100)}})}var fr=Date.now();t.tweenStartTime||(t.tweenStartTime=fr),t.tweenEndTime||(t.tweenEndTime=fr);var xr=fr+(h||0)+(xe||0),wr=xr+(Cn||0);wr>t.tweenEndTime&&(t.tweenEndTime=wr);var _r=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];_r.indexOf(o)!=-1&&(o=Tr(o));function Tr(Ge){var vt=[.4,.75,.9,.95],_t=[.99,-.69,.53,.014],At=[1.18,.69,1,.96];return Ge=="ballisticIn"?Ge=dt(e.zimEase(vt)):Ge=="ballisticOut"?Ge=dt(e.zimEase(vt).reverse()):Ge=="ballisticInOut"?Ge=dt(e.zimEase(vt,null,!0)):Ge=="snapIn"?Ge=dt(e.zimEase(_t)):Ge=="snapOut"?Ge=dt(e.zimEase(_t).reverse()):Ge=="snapInOut"?Ge=dt(e.zimEase(_t,null,!0)):Ge=="slowmoIn"?Ge=dt(e.zimEase(At)):Ge=="slowmoOut"?Ge=dt(e.zimEase(At).reverse()):Ge=="slowmoInOut"&&(Ge=dt(e.zimEase(At,null,!0))),Ge}var mn,An,ir;if(G.rewind&&(o&&(o instanceof Function?mn=dt(o.reverse()):(mn=o,mn.indexOf("InOut")==-1&&(mn.indexOf("Out")!=-1?mn=mn.replace("Out","In"):mn.indexOf("In")!=-1&&(mn=mn.replace("In","Out"))))),I&&(mn=I,_r.indexOf(mn)!=-1&&(mn=Tr(mn)))),o instanceof Function)An=o;else{var Yn="get"+o.charAt(0).toUpperCase()+o.slice(1),Bn=dt(te),Nn=dt(_e);(!n(Bn)||!n(Nn))&&ze.Ease[Yn]?(!n(Nn)&&n(Bn)&&(Bn=1),!n(Bn)&&n(Nn)&&(Nn=.3*1.5),An=ze.Ease[Yn](Bn,Nn)):An=ze.Ease[o]}mn&&(mn instanceof Function?ir=mn:(Yn="get"+mn.charAt(0).toUpperCase()+mn.slice(1),Bn=dt(te),Nn=dt(_e),(!n(Bn)||!n(Nn))&&ze.Ease[Yn]?(!n(Nn)&&n(Bn)&&(Bn=1),!n(Bn)&&n(Nn)&&(Nn=.3*1.5),ir=ze.Ease[Yn](Bn,Nn)):ir=ze.Ease[mn]));function di(){Wn>0&&(t.waiting=!1),Cr&&typeof Cr=="function"&&Cr(Lr)}function pi(){Wn>0&&(t.waiting=!0),Ar&&typeof Ar=="function"&&Ar(Dr)}function Vr(Ge){bt(),h>0?(t.waiting=!0,we=t.zimTweens[w]=t.zimTween=ze.Tween.get(t,{override:G.override}).wait(h,!0).call(function(){t.waiting=!1,h=0,Mr(we),g&&typeof g=="function"&&g(n(_)?t:_)}),we.timeScale=t.futureRate,Ge&&Er(Ge,we),$n(we)):Mr(Ge)}function Mr(Ge){var vt=qr();t.set&&!D&&t.set(K),we=t.zimTweens[w]=t.zimTween=ze.Tween.get(t,G).call(mr).to(ue,Pe,An).call(pi).wait(Wn,!0).call(di).to(vt,Fe,ir).call(Wr).wait(tn,!0).call(er),we.timeScale=t.futureRate,Ge&&Er(Ge,we),Br(),$n(we)}function Hr(Ge){bt(),h>0?(t.waiting=!0,we=t.zimTweens[w]=t.zimTween=ze.Tween.get(t,{override:G.override}).wait(h,!0).call(function(){h=0,t.waiting=!1,Or(we),g&&typeof g=="function"&&g(n(_)?t:_)}),we.timeScale=t.futureRate,Ge&&Er(Ge,we),$n(we)):Or(Ge)}function Or(Ge){t.set&&!D&&t.set(K),we=t.zimTweens[w]=t.zimTween=ze.Tween.get(t,G).call(mr).to(ue,Pe,An).call(Wr).wait(tn,!0).call(er),we.timeScale=t.futureRate,Ge&&Er(Ge,we),Br(),$n(we)}if(G.rewind){var Wn=0;delete G.rewind,E=!0,L=G.rewindWait,G.rewindWait&&(Wn=G.rewindWait,delete G.rewindWait);var Cr;if(G.rewindCall){Cr=G.rewindCall;var Lr=G.rewindParams;n(Lr)&&(Lr=t),delete G.rewindCall,delete G.rewindParams}var Ar;if(G.rewindWaitCall){Ar=G.rewindWaitCall;var Dr=G.rewindWaitParams;n(Dr)&&(Dr=t),delete G.rewindWaitCall,delete G.rewindWaitParams}xe>0||Ye>0||h>0?xe>0||Ye>0?(t.waiting=!0,we=t.zimTweens[w]=t.zimTween=ze.Tween.get(t,{override:G.override}).wait(xe>0?xe:0,!0).wait(Ye>0?Ye:0,!0).call(function(Ge){Ge.waiting=!1,Ye=xe=0,Vr(we)}),we.timeScale=t.futureRate,$n(we)):Vr():(bt(),Mr())}else xe>0||Ye>0||h>0?xe>0||Ye>0?(t.waiting=!0,we=t.zimTweens[w]=t.zimTween=ze.Tween.get(t,{override:G.override}).wait(xe>0?xe:0,!0).wait(Ye>0?Ye:0,!0).call(function(){Ye=xe=0,t.waiting=!1,Hr(we)}),we.timeScale=t.futureRate,$n(we)):Hr():(bt(),Or());function Er(Ge,vt){vt.zimIdSet=Ge.zimIdSet,vt.zimObj=Ge.zimObj,vt.zimTicker=Ge.zimTicker,vt.zimExtraTickers=Ge.zimExtraTickers,vt.requestID=Ge.requestID}we.startPaused=ve,we.rewinding=!1,n(se)||(we.timeScale=e.Pick.choose(se)),G.animateCall&&(Q=G.animateCall,delete G.animateCall),G.animateParams&&(U=G.animateParams,delete G.animateParams);var cr;!y&&j&&(Ct&&(t.pathRatio=t.percentComplete&&Math.round(t.percentComplete)!=100?t.percentComplete/100:0,t.percentCompleteNoAngle=Math.round(Ct)!=100?Ct:0),Y&&!n(Ee)&&Ee.dispatchEvent?cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr(),Ee.dispatchEvent("animation")},lt):Y&&t.dispatchEvent?cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr(),t.dispatchEvent("animation")},lt):Q&&typeof Q=="function"?cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr(),Q(U||t)},lt):cr=e.Ticker.add(function(){xt&&t.updateEffects(),(wt||un||Pn||bn)&&sr()},lt));function gi(Ge){if(Array.isArray(Ge)){for(var vt=0,_t=0,At=Ge.length;_t<At;_t++)vt+=Ge[_t];return vt}}var Rr=[1,1,1],sr=function(){if(!(!t.parent||we.passive||we.startPaused)){if(Z&&E&&(Wt<50&&t.percentComplete>50||Wt>50&&t.percentComplete<50)&&(Qt=t.percentComplete<50),Wt=t.percentComplete,wt){if(cn&&(Jt=wt.segmentPoints,It=wt.segmentRatios),Z)var Ge=wt.getCurvePoint(t.pathRatio,It,Jt);else{t.currentPercent=t.startPercent+t.percent*t.pathRatio;var vt=(1e6+t.currentPercent)%100/100;t.pathRatio==1&&(vt+=t.percent>0?1:0),Ge=wt.getCurvePoint(vt,It,Jt)}if(Ge){var _t=t.parent.globalToLocal(Ge.x,Ge.y);t.x=_t.x,t.y=_t.y}}var At=Math.abs(In-t.x),Nt=Math.abs(Kt-t.y),Vt=kn==90||kn==270||kn==-90;Pn&&an&&(In>t.x&&At>.01&&e.sign(Vt?t.scaleY:t.scaleX)==e.sign(lr)||In<t.x&&At>.01&&e.sign(Vt?t.scaleY:t.scaleX)!=e.sign(lr)||t.percentComplete<99&&t.percentComplete>1&&At<.01&&Nt>.01&&e.sign(Vt?t.scaleY:t.scaleX)!=e.sign(lr))&&(Vt?t.scaleY*=-1:t.scaleX*=-1),bn&&an&&(Kt>t.y&&Nt>.01&&e.sign(Vt?t.scaleX:t.scaleY)==e.sign(ur)||Kt<t.y&&Nt>.01&&e.sign(Vt?t.scaleX:t.scaleY)!=e.sign(ur)||t.percentComplete<99&&t.percentComplete>1&&Nt<.01&&At>.01&&e.sign(Vt?t.scaleX:t.scaleY)!=e.sign(ur))&&(Vt?t.scaleX*=-1:t.scaleY*=-1);var vn;if(un&&At>.05||un&&Nt>.05){if(wt==un)vn=e.angle(In,Kt,t.x,t.y)+kn;else{var En;un.parent?En=un.parent.localToLocal(un.x,un.y,t.parent):En=t.parent.globalToLocal(un.x,un.y),vn=e.angle(t.x,t.y,En.x,En.y)+kn}if(vn!=0&&(!t.paused||nr)){Pn&&In-t.x>.01&&(vn+=180);var Gn=vn;t.rotation=Math.round(Gn==kn?t.rotation:Gn),E&&t.percentComplete>50&&!Pn&&(t.rotation+=180)}}if(Z){var ar=t.x-In+t.y-Kt;Math.abs(ar)>2&&(Rr.push(e.sign(ar)),Rr.shift(),we.forward=gi(Rr))}In=t.x,Kt=t.y}};(wt||un||Pn||bn)&&(t.handlePath=sr),n(t.zimMaskDynamic)||t.zimMaskApply();function Wr(){if(t.seriesTweens&&t.seriesTweens.shift(),t.seriesCalls&&t.seriesCalls.shift(),t.seriesParams&&t.seriesParams.shift(),t.paused&&t.type!="Sprite"){l&&typeof l=="function"&&l(f);return}if(G.loop)if(on>0)if(Ne<on){tn>0&&(t.waiting=!0),vr(),Ne++;return}else E?t.set&&t.set(qr()):t.set&&t.set(ue);else{tn>0&&(t.waiting=!0),vr();return}if($?Nr(w):t.pauseAnimate(!0,w),!G.loop&&ae&&typeof ae=="function"){var Ge=n(ie)?t:ie;ae(Ge)}l&&typeof l=="function"&&l(f)}function qr(){var Ge={};for(var vt in ue)if(y&&t.style)!n(K[vt])&&!D?Ge[vt]=K[vt]:vt=="transform"?Ge[vt]=t.style[vt]:Ge[vt]=jn(t.style[vt]);else if(!n(K[vt])&&!D)Ge[vt]=K[vt];else if(vt.substr(0,1)=="."){for(var _t=vt.split("."),At=t,Nt=1;Nt<_t.length;Nt++)At=At[_t[Nt]];Ge[vt]=At}else Ge[vt]=t[vt];return Ge}function vi(Ge){if(t.zimBusy){for(var vt in Ge)delete t.zimBusy[vt];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}var yi=!1;Br();function Br(){we.zimObj=ue,we.zimTicker=cr,we.zimPaused=yi,je&&(we.zimIdSet=je),st&&(n(e.idSets)&&(e.idSets={}),n(e.idSets[st])?e.idSets[st]=[t]:e.idSets[st].indexOf(t)<0&&e.idSets[st].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function Nr(Ge){if(t.tweenStates&&t.tweenStates[Ge]&&delete t.tweenStates[Ge],!(n(t.zimTweens)||n(t.zimTweens[Ge]))){t.zimX=null,t.zimY=null,vi(t.zimTweens[Ge].zimObj),t.zimTweens[Ge].paused=!0,Qr(Ge);var vt=t.zimTweens[Ge].zimIdSet;if(!n(vt)&&t.zimIdSets){var _t=t.zimIdSets[vt];_t&&_t.splice(_t.indexOf(Ge),1),_t&&_t.length==0&&(delete t.zimIdSets[vt],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),delete t.zimTweens[Ge],t.zimLastObj=null,e.isEmpty(t.zimTweens)&&t.stopAnimate(null,null,null,!1,!0),!(t.zimTweens&&t.zimTweens[Ge]||t.zimIdSets&&t.zimIdSets[vt||Ge])){if(e.idSets&&e.idSets[vt||Ge]){e.idSets[vt||Ge];var At=e.idSets[vt||Ge].indexOf(t);At>=0&&e.idSets[vt||Ge].splice(At,1),e.idSets[vt||Ge].length<=0&&(delete e.idSets[vt||Ge],e.isEmpty(e.idSets)&&delete e.idSets)}}}}function Qr(Ge){-function(){var vt=t.zimTweens[Ge].zimTicker;if(t.zimTweens[Ge].extraTickers)for(var _t=0;_t<t.zimTweens[Ge].extraTickers.length;_t++)e.Ticker.remove(t.zimTweens[Ge].extraTickers[_t]);t.zimTweens[Ge].requestID&&cancelAnimationFrame(t.zimTweens[Ge].requestID),vt&&setTimeout(function(){vt&&e.Ticker.remove(vt),vt=null},200)}()}function br(Ge,vt){var _t=t.zimTweens[Ge];_t.paused=vt,vt!=_t.zimPaused&&(_t.zimPaused=vt,vt?_t.zimTicker&&(_t.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(_t.zimTicker)},200)):(_t.startPaused=!1,clearTimeout(_t.zimAnimateTimeout),_t.zimTicker&&(_t.zimTicker=e.Ticker.add(_t.zimTicker,lt))))}function Zr(Ge){for(var vt=[],_t=0;_t<Ge.length;_t++)t.zimIdSets&&!n(t.zimIdSets[Ge[_t]])?vt=vt.concat(t.zimIdSets[Ge[_t]]):vt.push(Ge[_t]);return vt}(!t.stopAnimate||!t.stopAnimate.real)&&(t.stopAnimate=function(Ge,vt,_t,At,Nt){var Vt;if(t.dynamicAnimation=null,Nt&&Z){t.pauseAnimate();return}if(n(Ge)&&(t.tweenStates={}),vt)return t.endTween(null,Ge),t;if(n(At)&&(At=!0),t.pan==null&&(t.type!=null&&(t.paused=!0),t.animating=!1),t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),n(_t)&&(_t=!0),At&&Z&&(wt&&wt.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),t.amu&&lt.frame.off("mouseupplus",t.amu),e.Ticker.remove(t.zimDragAnimateTicker)),n(Ge)){if(!_t)return t;t.zimBusy=null,ze.Tween.removeTweens(t);for(Vt in t.zimTweens)Qr(Vt);t.zimTweens=null,t.zimIdSets=null,t.zimTween=null,e.idSets&&e.idSets[je||Vt]&&(delete e.idSets[je||Vt],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(Ge)||(Ge=[Ge]);var vn=Zr(Ge);for(Vt in t.zimTweens)t.zimTweens[Vt].requestID&&cancelAnimationFrame(t.zimTweens[Vt].requestID),_t&&vn.indexOf(Vt)>=0&&Nr(Vt,At),!_t&&vn.indexOf(Vt)<0&&Nr(Vt,At)}return t},t.stopAnimate.real=!0,t.pauseAnimate=function(Ge,vt,_t,At){var Nt;if(vt=="pauseOnBlur"?vt=null:n(vt)&&(t.tweenStates={all:Ge===!1}),t.type=="Pen"&&(Ge===!1?t.zimOnPath&&(t.infinite=!0):t.stop()),$r&&!At){if(n(vt))for(Nt in t.zimTweens)br(Nt,Ge);else t.pause(Ge,vt);return t}if(n(Ge)&&(Ge=!0),en=!1,t.type!=null&&(t.paused=Ge),t.animating=!Ge,n(_t)&&(_t=!0),n(vt)&&!_t)return t;if(n(vt))for(Nt in t.zimTweens)br(Nt,Ge);else{Array.isArray(vt)||(vt=[vt]);var Vt=Zr(vt);for(Nt in t.zimTweens)_t&&Vt.indexOf(Nt)>=0&&(br(Nt,Ge),t.tweenStates[Nt]=!Ge),!_t&&Vt.indexOf(Nt)<0&&(br(Nt,Ge),t.tweenStates[Nt]=!Ge)}return t.type=="Sprite"&&(t.running||t.stop()),t}),ve&&t.pauseAnimate(!0,w,null,!0);var Ln;for(ue.extra&&(Ln=ue.extra,delete ue.extra,Array.isArray(Ln)||(Ln=[Ln])),Ce=0;Ce<Ke.length;Ce++){var kr=Ke[Ce];ue[kr]&&(n(Ln)&&(Ln=[]),mi(kr,ue[kr]),delete ue[kr])}function mi(Ge,vt){vt===!0?Ln.push({outputProp:ut[Ge]}):Array.isArray(vt)?Ln.push({outputProp:ut[Ge],outputMin:vt[0],outputMax:vt[1],inputMin:vt[2],inputMax:vt[3]}):Ln.push({outputProp:ut[Ge],outputMax:vt})}if(Ln){t.zimStartScaleX=t.scaleX,t.zimStartScaleY=t.scaleY,we.extraTickers=[];var Kr;for(Ce=0;Ce<Ln.length;Ce++){var hn=Ln[Ce];n(hn.inputObj)&&(hn.inputObj=t),n(hn.inputProp)&&(hn.inputProp="y"),n(hn.inputMin)&&(hn.inputMin=0),n(hn.inputMax)&&(hn.inputMax=hn.inputProp=="x"?lt.width:lt.height),n(hn.outputObj)&&(hn.outputObj=t),n(hn.outputProp)&&(hn.outputProp="scale"),n(hn.outputMin)&&(hn.outputMin=0),n(hn.outputMax)&&(hn.outputMax=hn.outputMin+1),n(hn.constrain)&&(hn.constrain=!0);for(var Xn in hn)ue[Xn]=e.Pick.choose(ue[Xn]);hn.outputProp=="percentSpeed"&&(X=!0),Kr=new e.Proportion(hn.inputMin,hn.inputMax,hn.outputMin,hn.outputMax,hn.factor,hn.outputRound);var Jr=function(){var Ge=hn,vt=Kr;return function(){var _t,At=Ge.outputObj,Nt=Ge.inputObj[Ge.inputProp];if((Ge.inputProp=="x"||Ge.inputProp=="y")&&Ge.inputObj.parent){var Vt=Ge.inputObj.parent.localToGlobal(Nt,Nt);Nt=Vt[Ge.inputProp]}if(Ge.constrain?_t=e.constrain(vt.convert(Nt),Ge.outputMin,Ge.outputMax):_t=vt.convert(Nt),Number.isNaN(_t)&&(_t=Ge.outputMin!=null?Ge.outputMin:0),Ge.outputProp=="scale")At.scaleX=e.sign(At.scaleX)*_t,At.scaleY=e.sign(At.scaleY)*_t;else if(Ge.outputProp=="scaleX")At.scaleX=e.sign(At.scaleX)*_t;else if(Ge.outputProp=="scaleY")At.scaleY=e.sign(At.scaleY)*_t;else if(Ge.outputProp=="layer"){if(!At.parent)return;var vn=e.constrain(Math.round(_t),0,At.parent.numChildren-1);vn!=At.parent.getChildIndex(At)&&At.parent.setChildIndex(At,vn)}else Ge.outputProp=="percentSpeed"?At[Ge.outputProp]=_t*100:At[Ge.outputProp]=_t}}();Jr(),we.extraTickers.push(e.Ticker.add(Jr,lt))}}var $r;function jr(){if(we.requestID=requestAnimationFrame(jr),!(!X||we.startPaused&&t.percentSpeed==0)){we.startPaused=!1,we!=zr&&(zr=we,we.currentTime=0,t.pauseAnimate(!0,w,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,Fr=!Ye&&!xe&&!h&&!on&&G.loop),Fr&&(we.currentTime+=1e4*Yr,we.setPosition(we.currentTime,!0),Fr=!1);var Ge=we.currentTime+xi*t.percentSpeed/100;Xr&&h==0&&(Ge=e.constrain(Ge,0,Xr)),we.currentTime=Ge,we.setPosition(we.currentTime),(wt||un||Pn||bn)&&sr(),lt.update()}}if(X&&(t.dynamicAnimation=!0),X||t.zimAnimateDragDown){if(X){$r=!0,t.pauseAnimate(!0,w,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,we.currentTime=0;var zr=we;n(t.percentSpeed)&&(t.percentSpeed=we.startPaused?0:100);var xi=1e3/60;we.currentTime=0;var Fr=!Ye&&!xe&&!h&&!on&&G.loop;pe&&G.loop&&!on&&(pe=!1);var Yr=i+(E?V||i:0)+(L||0)+(T||0);Yr*=Ae=="s"?1e3:1;var ei=1;G.loop&&on&&(ei=on);var Xr;pe&&(Xr=Yr*ei),jr()}var Pr;t.pause=function(Ge,vt){if(n(Ge)&&(Ge=!0),n(vt)&&(vt=0),Ge){if(t.zimAnimateDragDown&&(Z=!1,t.cur("default"),wt&&wt.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),!X))return;Pr=t.percentSpeed,vt>0?e.animate({target:t,props:{percentSpeed:0},override:!1,ticker:!1,time:vt,call:function(){t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,X=!1,t.dispatchEvent("pause")}}):(we.startPaused=!1,t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,X=!1,setTimeout(function(){t.dispatchEvent("pause")},10))}else{if(t.zimAnimateDragDown&&(Z=!0,t.cur("pointer"),wt&&(t.zimAnimatePathChange=wt.on("change",t.zimAnimatePathChange)),t.zimAnimateDragDown=t.on("mousedown",t.zimAnimateDragDown),t.zimAnimateDragPress=t.on("pressmove",t.zimAnimateDragPress),t.zimAnimateDragUp=t.on("pressup",t.zimAnimateDragUp),!X&&ve!=!1))return;en=!1,we.currentTime=we.position,vt>0?e.animate({target:t,props:{percentSpeed:Pr},override:!1,ticker:!1,time:vt,call:function(){t.percentSpeed=Pr,t.paused=!1,t.animating=!0,X=!0}}):(t.percentSpeed=Pr,t.type!=null&&(t.paused=!1),t.animating=!0,X=!0)}return t}}return t},e.stopAnimate=function(t,r){qe("45.12");var i;if(n(t)){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].stopAnimate(null,r);return}if(Array.isArray(t)||(t=[t]),!!e.idSets)for(var o=0;o<t.length;o++){var l=t[o];if(e.idSets[l]){var f=e.idSets[l].length-1;for(i=f;i>=0;i--)e.idSets[l][i].stopAnimate(l,r)}}},e.stopZimAnimate=function(t){qe("45.1"),e.stopAnimate(t)},e.pauseAnimate=function(t,r){qe("45.22"),n(t)&&(t=!0);var i;if(n(r)||r=="pauseOnBlur"){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].pauseAnimate(t,r);return}if(Array.isArray(r)||(r=[r]),!!e.idSets)for(var o=0;o<r.length;o++){var l=r[o];if(e.idSets[l])for(i=e.idSets[l].length-1;i>=0;i--)e.idSets[l][i].pauseAnimate(t,l)}},e.pauseZimAnimate=function(t,r){qe("45.2"),e.pauseAnimate(t,r)},e.wiggle=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k){var x="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur",E;if(E=mt(e.wiggle,arguments,x))return E;if(qe("45.25"),n(t)||n(i)||n(o))return t;n(l)&&(l=o);var L=v(f,null,40);n(f)&&(f=L=="s"?1:1e3),n(h)&&(h=f),a(h,L,40),n(P)&&(P="quadInOut"),n(C)&&(C=!1),n(T)&&(T=e.makeID()),n(_)&&(_="both"),n(N)&&(N="both"),n(O)&&(O=!0),n(S)&&(S=0),a(g,L,40),n(g)||(t.wiggleTimeout=setTimeout(function(){t.stopAnimate(T),t.dispatchEvent("wigglestop")},g*(L=="s"?1e3:1)));var A=0,b;function F(){var q=e.rand(e.Pick.choose(f),e.Pick.choose(h),!1),V={},I={},ne;I[r]=e.Pick.choose(i),_=="negative"||A==0&&N=="negative"?ne=-e.rand(e.Pick.choose(o),e.Pick.choose(l),C):_=="positive"||A==0&&N=="positive"?ne=e.rand(e.Pick.choose(o),e.Pick.choose(l),C):A==0?ne=e.rand(e.Pick.choose(o),e.Pick.choose(l),C,!0):ne=e.rand(e.Pick.choose(o),e.Pick.choose(l),C)*e.sign(b)*-1,V[r]=e.Pick.choose(i)+ne,A==0&&(q=q/2),b=ne,A++;var R=t.futureRate;_=="negative"||_=="positive"?e.animate({target:t,obj:V,set:I,ease:P,time:q*2,wait:dt(S),rewind:!0,override:!1,call:F,id:T,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:k}):e.animate({target:t,obj:V,ease:P,time:q,wait:dt(S),override:!1,call:F,id:T,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:k}),R&&(t.futureRate=R)}return t.addTo&&!t.stage?t.added(F):F(),t},e.loop=function(t,r,i,o,l,f,h,g,_,P){var C="obj, call, reverse, interval, step, start, end, immediate, complete, completeParams",T;if(T=mt(e.loop,arguments,C))return T;if(e.zimLoopCheck||qe("45.3"),e.zimLoopCheck=!0,n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(g)&&(g=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var N=o===0&&_&&typeof _=="function",O=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":typeof t=="string"?"string":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(O=="container"&&!t.addChild)return;var S,k,x,E;if(O=="number"||O=="string"||O=="array"||O=="nodelist"||O=="htmlcollection"||O=="Dictionary"){if(O=="Dictionary"){var L=e.copy(t.values);t=e.copy(t.objects)}if(S=O=="number"?t:t.length,x=b(S-1),x==0)return;if(i)if(o===0){for(k=f;k>=h;k-=l)if(O=="number"?E=r(k,x,f,h,t):O=="array"||O=="string"?E=r(t[k],k,x,f,h,t):O=="Dictionary"?E=r(t[k],L[k],k,x,f,h,t):E=r(t.item(k),k,x,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(k=F.count,g||k--,l&&(k*=l),k=f-k,O=="number"?E=r(k,x,f,h,t):O=="array"||O=="string"?E=r(t[k],k,x,f,h,t):O=="Dictionary"?E=r(t[k],L[k],k,x,f,h,t):E=r(t.item(k),k,x,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},x,g,null,null,_,P);else if(o===0){for(k=f;k<=h;k+=l)if(O=="number"?E=r(k,x,f,h,t):O=="array"||O=="string"?E=r(t[k],k,x,f,h,t):O=="Dictionary"?E=r(t[k],L[k],k,x,f,h,t):E=r(t.item(k),k,x,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(k=F.count,g||k--,l&&(k*=l),O=="number"?E=r(k,x,f,h,t,F):O=="array"||O=="string"?E=r(t[k],k,x,f,h,t,F):O=="Dictionary"?E=r(t[k],L[k],k,x,f,h,t):E=r(t.item(k),k,x,f,h,t,F),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},x,g,null,null,_,P);return N&&_(P),!0}else if(O=="object"){S=0;var A=[];for(k in t)S++,A.push(k);if(x=b(S-1),x==0)return;if(i)if(o===0){for(k=f;k>=h;k-=l)if(E=r(A[k],t[A[k]],k,x,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(k=F.count,g||k--,l&&(k*=l),k=f-k,E=r(A[k],t[A[k]],k,x,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},x,g,null,null,_,P);else if(o===0){for(k=f;k<=h;k+=l)if(E=r(A[k],t[A[k]],k,x,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(k=F.count,g||k--,l&&(k*=l),E=r(A[k],t[A[k]],k,x,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},x,g,null,null,_,P);return N&&_(P),!0}else{if(x=b(t.numChildren-1),x==0)return;if(i)if(o===0){for(k=f;k>=h;k-=l)if(E=r(t.getChildAt(k),k,x,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(k=F.count,g||k--,l&&(k*=l),k=f-k,E=r(t.getChildAt(k),k,x,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},x,g,null,null,_,P);else if(o===0){for(k=f;k<=h;k+=l)if(E=r(t.getChildAt(k),k,x,f,h,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(F){if(k=F.count,g||k--,l&&(k*=l),E=r(t.getChildAt(k),k,x,f,h,t),E=="next")F.next();else if(typeof E<"u")return F.clear(),E},x,g,null,null,_,P);return N&&_(P),!0}function b(F){return n(f)&&(f=i?F:0),n(h)&&(h=i?0:F),i&&h>f||!i&&f>h||(f<0&&h)<0||f>F&&h>F?0:(f=Math.max(0,Math.min(f,F)),h=Math.max(0,Math.min(h,F)),Math.floor((i?f-h:h-f)/l)+1)}},e.scaleTo=function(t,r,i,o,l,f,h){var g="obj, boundObj, percentX, percentY, type, boundsOnly, simple",_;if(_=mt(e.scaleTo,arguments,g))return _;if(t.type=="AC"&&le.zdf)return le.zdf.ac("scaleTo",arguments),t;if(qe("43"),n(r)&&(r=le.zdf&&le.zdf.stage?le.zdf.stage:null),n(t)||!t.getBounds||!t.getBounds())return qn("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),t;if(n(r)||!r.getBounds||!r.getBounds())return qn("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),t;n(i)&&(i=-1),n(o)&&(o=-1),i==-1&&o==-1&&(i=o=100,n(l)&&(l="fill")),n(l)&&(l="fit"),l=="smallest"?l="fit":l=="biggest"||l=="outside"||l=="largest"?l="fill":(l=="both"||l=="stretch")&&(l="full"),n(f)&&(f=!1),n(h)&&(h=!1);var P=r.getBounds().width*i/100*(f?1:r.scaleX),C=r.getBounds().height*o/100*(f?1:r.scaleY);(r.type=="Stage"||r.type=="StageGL")&&(P=r.width*i/100,C=r.height*o/100);var T,N;if(h)T=t.getBounds().height,N=t.getBounds().width;else{var O=e.boundsToGlobal(t);T=O.height/t.scaleX,N=O.width/t.scaleY,(isNaN(T)||isNaN(N)||T>5e3)&&(T=t.getBounds().height,N=t.getBounds().width)}if((i==-1||o==-1)&&l!="full")return i==-1?e.sca(t,C/T):e.sca(t,P/N),t;var S;return l=="full"?(t.scaleX=i!=-1?P/N:t.scaleX,t.scaleY=o!=-1?C/T:t.scaleY,t):(l=="fill"?S=Math.max(P/N,C/T):S=Math.min(P/N,C/T),e.sca(t,S),t)},e.fit=function(t,r,i,o,l,f){var h="obj, left, top, width, height, type",g;if(g=mt(e.fit,arguments,h))return g;if(t.type=="AC"&&le.zdf)return le.zdf.ac("fit",arguments),t;if(qe("46"),!(n(t)||!t.getBounds)){if(!t.getBounds()){ht("zim methods - fit(): please setBounds() on object");return}if(n(r)){if(!t.stage){ht("zim methods - fit(): please add boundary dimensions or add obj to stage first");return}if(!t.stage.getBounds()){ht("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");return}var _=t.stage.getBounds().width,P=t.stage.getBounds().height;r=0,i=0,o=_,l=P}f===!0?f="fit":f===!1&&(f="fill"),n(f)&&(f="fit"),t.scaleX=t.scaleY=1;var C=o,T=l,N=t.getBounds().width,O=t.getBounds().height,S,k,x,E,L;return f=="full"?(t.scaleX=x=C/N,t.scaleY=E=T/O,S=C,k=T):(f=="fit"?C/T>=N/O?L=T/O:L=C/N:f=="fill"&&(C/T>=N/O?L=C/N:L=T/O),x=E=L),t.scaleX=x,t.scaleY=E,S=N*x,k=O*E,t.x=(t.regX-t.getBounds().x)*x+r+(C-S)/2,t.y=(t.regY-t.getBounds().y)*E+i+(T-k)/2,{x:t.x,y:t.y,width:S,height:k,scale:L,scaleX:x,scaleY:E,bX:r,bY:i,bWidth:o,bHeight:l}}},e.boundsCheck=!1,e.boundsToGlobal=function(t,r,i,o,l){if(e.boundsCheck||(qe("40"),e.boundsCheck=!0),!(n(t)||!t.getBounds)){if(n(i)&&(i=!1),l&&!t.getBounds&&!t.getBounds())return t;var f=t.getBounds();if(!f&&n(r)){ht("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)");return}r&&(f=r);var h,g,_,P;l&&l.type&&!(l.type=="Stage"||l.type=="StageGL")?(h=t.localToLocal(f.x,f.y,l),g=t.localToLocal(f.x+f.width,f.y,l),_=t.localToLocal(f.x+f.width,f.y+f.height,l),P=t.localToLocal(f.x,f.y+f.height,l)):i?(h=t.globalToLocal(f.x,f.y),g=t.globalToLocal(f.x+f.width,f.y),_=t.globalToLocal(f.x+f.width,f.y+f.height),P=t.globalToLocal(f.x,f.y+f.height)):(h=t.localToGlobal(f.x,f.y),g=t.localToGlobal(f.x+f.width,f.y),_=t.localToGlobal(f.x+f.width,f.y+f.height),P=t.localToGlobal(f.x,f.y+f.height));var C=Math.min(h.x,g.x,_.x,P.x),T=Math.min(h.y,g.y,_.y,P.y),N=Math.max(h.x,g.x,_.x,P.x),O=Math.max(h.y,g.y,_.y,P.y);return new ze.Rectangle(C,T,N-C,O-T)}},e.resetBounds=function(t,r,i,o,l,f){var h="obj, a, b, c, d, margin",g;if(g=mt(e.resetBounds,arguments,h))return g;qe("40.5");var _,P,C,T;return n(o)?(_=0,P=r,C=0,T=i):(_=r,P=o,C=i,T=l),n(T)&&(T=P),n(r)?t.setBounds(null):t.setBounds(_,C,P,T),f&&(i=t.getBounds(),i&&t.setBounds(i.x-f,i.y-f,i.width+f*2,i.height+f*2)),t},e.copyMatrix=function(t,r){return qe("45.5"),t.x=r.x,t.y=r.y,t.scaleX=r.scaleX,t.scaleY=r.scaleY,t.regX=r.regX,t.regY=r.regY,t.rotation=r.rotation,t.skewX=r.skewX,t.skewY=r.skewY,t},e.duplicate=function(t,r){qe("45.6");var i=t.clone(r);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&i[o]==null){if(o=="parent"||o=="zimTouch")continue;i[o]=t[o]}return i},e.expand=function(t,r,i,o,l){var f="obj, padding, paddingV, paddingRight, paddingBottom",h;if(h=mt(e.expand,arguments,f))return h;if(qe("50"),n(t)||!t.getBounds||!t.getBounds())return ht("zim methods - expand(): please provide object with bounds set"),t;n(r)&&(r=20),n(i)&&(i=r);var g,_;!n(o)||!n(l)?(n(o)&&(o=r),n(l)&&(l=i),g=r,_=i):(g=o=r,_=l=i);var P=t.getBounds(),C=new e.Shape({style:!1});return C.graphics.f("rgba(0,0,0,.01)").r(P.x-g,P.y-_,P.width+g+o,P.height+_+l),t.hitArea=C,t},e.setSwipe=function(t,r){if(qe("34"),n(t)||!t.on)return;t.zimNoSwipe=r?null:!0,t instanceof ze.Container&&i(t);function i(o){for(var l=o.numChildren,f,h=0;h<l;h++)f=o.getChildAt(h),f.zimNoSwipe=t.zimNoSwipe,f instanceof ze.Container&&i(f)}return t},e.setMask=function(t,r,i){if(qe("50.1"),n(t)&&ht("zim methods - setMask(): please provide obj"),n(r))return l(),t;var o=t.stage||(le.zdf?le.zdf.stage:null);function l(){t.zimMask&&t.zimMask.parent&&t.zimMask.parent.removeChild(t.zimMask),t.zimMask=null,t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.mask=null}t.zimMaskOriginal&&t.zimMaskOriginal!=r&&l(),n(i)&&(i=r.type=="Blob"||!n(r.zimDown)||!n(r.transformControls)||!n(r.zimTouch)||!n(r.zimTweens),r.zimMaskDynamic=i),t.zimMaskOriginal=r;var f;function h(){if(i&&(!o||!r.stage))return t;if(f&&f.dispose&&f.dispose(),f=null,t.zimMask=r.zimMask=f=r.shape.clone(),e.copyMatrix(f,r),r.addChildAt(f,0),f.alpha=0,!t.parent){t.mask=f;return}var g=r.getConcatenatedMatrix().decompose(),_=t.parent.getConcatenatedMatrix().decompose();f.scaleX=g.scaleX/_.scaleX,f.scaleY=g.scaleY/_.scaleY,f.rotation=(g.rotation?g.rotation:0)-(_.rotation?_.rotation:0);var P=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,t.parent);f.x=P.x,f.y=P.y,t.mask=f}return r.zimMaskApply=function(){t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.zimMaskTicker=e.Ticker.add(h)},r&&r.shape?(h(),i&&r.zimMaskApply()):(f=r,t.mask=f),t},e.outline=function(t,r,i,o){var l="obj, color, size, boundsOnly",f;if(f=mt(e.outline,arguments,l))return f;if(t.type=="AC"&&le.zdf)return le.zdf.ac("outline",arguments),t;if(qe("47"),t.type&&t.type=="zimOultineShape")return Et&&ht("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(n(t)||!t.getBounds)return ht("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return ht("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return ht("zim methods - outline(): object should be on stage first"),t;if(n(r)&&(r="brown"),n(i)&&(i=2),i<=0){t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),t.ZIMoutlineShape=t.ZIMoutlineShapeC=null;return}var h=t.getBounds(),g=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new e.Shape;g.type="zimOutlineShape";var _=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new e.Shape;_.type="zimOutlineShape";var P=t.parent;t.outlineToggled=!0,t.outlineToggle=function(b){return b===!0?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):b===!1?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var C=t.localToLocal(h.x,h.y,P),T=t.localToLocal(h.x+h.width,h.y,P),N=t.localToLocal(h.x+h.width,h.y+h.height,P),O=t.localToLocal(h.x,h.y+h.height,P),S=t.localToLocal(0,0,P),k=g.graphics.c(),x=_.graphics.c();if(k.s(r).ss(i).mt(C.x,C.y).lt(T.x,T.y).lt(N.x,N.y).lt(O.x,O.y).lt(C.x,C.y).cp(),!o){var E=10,L=E+1;x.s("white").ss(i+2),x.mt(-L,0).lt(L,0),x.mt(0,-L).lt(0,L),x.s(r).ss(i),x.mt(-E,0).lt(E,0),x.mt(0,-E).lt(0,E),x.cp(),_.x=S.x,_.y=S.y,_.rotation=t.rotation,k.s("white").ss(i+2).dc(t.x,t.y,E+6),k.s(r).ss(i).dc(t.x,t.y,E+6)}t.parent.removeChild(g),t.parent.removeChild(_);var A=t.parent.getChildIndex(t);return t.parent.addChildAt(_,A+1),t.parent.addChildAt(g,A+1),g.mouseEnabled=!1,_.mouseEnabled=!1,t},e.blendmodes=function(t,r,i){qe("47.05"),n(r)&&(r=1);var o=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];i===!1&&o.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var l=0,f=e.interval(r,function(){var h=o[l%o.length];l++,t.ble(h),Gr(h),t.stage&&t.stage.update()});return t.on("mousedown",function(){f.pause(!f.paused)}),t},e.STYLE=null,e.ignore="ignore",e.getStyle=function(t,r,i,o){e.STYLECHECK||(qe("50.34"),e.STYLECHECK=!0);var l=["tap","change","hold","noTap","noChange","noHold","pos","addTo","center","centerReg","reg","mov","move","drag","transform","gesture","mouse","expand","outline","bounds","animate","wiggle","cache"],f=le.STYLE||e.STYLE,h=f,g,_=!1;n(o)||(t=null,r=o,_=!0),f&&f.type&&typeof f.type=="string"&&(f.ttype=f.type,delete f.type);for(var P in f)g=f[P],P.match(/^[(A-Z)]/)?(f.type||(f.type={}),f.type[P]?f.type[P]=e.merge(f.type[P],g):f.type[P]=g,delete f[P]):g.constructor==={}.constructor&&P!="group"&&P!="type"&&!e.isPick(g)&&l.indexOf(P)==-1&&(f.group||(f.group={}),f.group[P]?f.group[P]=e.merge(f.group[P],g):f.group[P]=g,delete f[P]);n(h)?h={}:h=e.copy(h);var C;if(n(i))i={};else for(C=0;C<l.length;C++)delete i[l[C]];var T=i,N=h.type;if(N&&delete h.type,!n(r)&&!n(h.group)){var O=r.split(","),S={};for(C=0;C<O.length;C++){var k=O[C].trim();n(h.group[k])||(S=e.merge(S,h.group[k]))}delete h.group}_?!n(r)&&!n(S)&&(h=S):(!n(t)&&!n(N)&&!n(N[t])&&(h=e.merge(h,N[t])),!n(r)&&!n(S)&&(h=e.merge(h,S)));for(var x in h){if(T[x]){delete h[x];continue}if(g=l.indexOf(x)==-1&&!h.delayPick?e.Pick.choose(h[x]):h[x],g=="ignore"){delete h[x];continue}else g&&g.constructor==={}.constructor&&(g=e.copy(g,!0,!1));var E;for(var L in h)(E=L.match(/^(.+)gColor$/))&&(h[E[1]+"ackgroundColor"]=h[L],delete h[L]);h[x]=g}return h=e.merge(h,T),h.ttype&&!h.type&&(h.type=h.ttype,delete h.ttype),h.style===!1?{}:h},e.styleTransforms=function(t,r){var i=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","blendMode"],o;if(r){for(r.add&&t.addTo(),r.addTo&&t.addTo(r.addTo===!0?null:r.addTo),o=0;o<i.length;o++)r[i[o]]!=null&&(t[i[o]]=e.Pick.choose(r[i[o]]));if((r.regX!=null||r.regY!=null)&&t.reg(n(r.regX)?DEFAULT:r.regX,n(r.regY)?DEFAULT:r.regY),r.bounds&&r.bounds.constructor==={}.constructor&&t.setBounds(r.bounds.x?r.bounds.x:0,r.bounds.y?r.bounds.y:0,r.bounds.width?r.bounds.width:100,r.bounds.height?r.bounds.height:100),r.center&&t.center(r.center===!0?null:r.center),r.centerReg&&t.centerReg(r.centerReg===!0?null:r.centerReg),r.reg!=null&&(r.reg.constructor==={}.constructor?t.reg(e.Pick.choose(r.reg.x),e.Pick.choose(r.reg.y),r.reg.still):t.reg(r.reg)),r.x!=null&&(r.loc?r.loc.x==null&&(r.loc.x=r.x):r.loc={x:r.x}),r.y!=null&&(r.loc?r.loc.y==null&&(r.loc.y=r.y):r.loc={y:r.y}),r.loc&&(r.loc.constructor==={}.constructor?t.loc(e.Pick.choose(r.loc.x),e.Pick.choose(r.loc.y)):t.loc(e.Pick.choose(r.loc))),r.pos)if(r.pos.constructor==={}.constructor)t.pos(e.Pick.choose(r.pos.x),e.Pick.choose(r.pos.y),e.Pick.choose(r.pos.horizontal),e.Pick.choose(r.pos.vertical),e.Pick.choose(r.pos.container),e.Pick.choose(r.pos.index),r.pos.add,e.Pick.choose(r.pos.reg),e.Pick.choose(r.pos.regX),e.Pick.choose(r.pos.regY));else{var l=e.Pick.choose(r.pos);(l=="left"||l=="top")&&t.pos(),l=="right"&&t.pos({horizontal:"right"}),l=="bottom"&&t.pos({vertical:"bottom"}),(l=="rightbottom"||l=="bottomright")&&t.pos({horizontal:"right",vertical:"bottom"}),l=="center"&&t.center()}if((r.mov||r.move)&&(r.move&&(r.mov=r.move),r.mov.constructor==={}.constructor?t.mov(e.Pick.choose(r.mov.x),e.Pick.choose(r.mov.y)):t.mov(e.Pick.choose(r.mov))),r.outline&&setTimeout(function(){t.outline(r.outline.constructor==={}.constructor?r.outline:null),t.stage&&t.stage.update()},20),r.drag&&t.drag(r.drag.constructor==={}.constructor?r.drag:{currentTarget:!0}),r.gesture&&t.gesture(r.gesture.constructor==={}.constructor?r.gesture:null),r.mouse===!1&&t.noMouse(),r.transform&&setTimeout(function(){t.transform(r.transform.constructor==={}.constructor?r.transform:null)},20),r.animate)for(Array.isArray(r.animate)||(r.animate=[r.animate]),o=0;o<r.animate.length;o++)-function(){var h=r.animate[o];h.constructor==={}.constructor&&setTimeout(function(){t.animate(h)},20)}();if(r.wiggle)for(Array.isArray(r.wiggle)||(r.wiggle=[r.wiggle]),o=0;o<r.wiggle.length;o++)-function(){var h=r.wiggle[o];h.constructor==={}.constructor&&setTimeout(function(){t.wiggle(h)},20)}();r.expand&&t.expand(r.expand===!0?null:r.expand),r.cache&&(r.cache.constructor==={}.constructor?r.cache.x?t.cache(e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y),e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y)):t.cache(e.Pick.choose(r.cache.width),e.Pick.choose(r.cache.height)):t.cache()),r.tap&&t.tap&&t.tap(r.tap),r.change&&t.change&&t.change(r.change),r.hold&&t.hold&&t.hold(r.hold),r.noChange&&t.noChange&&t.noChange(),r.noTap&&t.noTap&&t.noTap(),r.noHold&&t.noHold&&t.noHold();var f=le.STYLE||e.STYLE;f&&(f.once===!0||f.once==t.type)&&(le.STYLE?le.STYLE={}:e.STYLE={})}},e.Style={remembered:{},clear:function(){return le.STYLE&&(le.STYLE={}),e.STYLE&&(e.STYLE={}),e.Style},clearTypes:function(){var t=le.STYLE||e.STYLE;return delete t.types,e.Style},clearGroups:function(){var t=le.STYLE||e.STYLE;return delete t.groups,e.Style},remember:function(t){n(t)&&(t="default");var r=le.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=le.STYLE={}),e.Style.remembered[t]=e.copy(r,!0),e.Style},clearRemembered:function(t){return n(t)?e.Style.remembered={}:delete e.Style.remembered[t],e.Style},recall:function(t){return n(t)&&(t="default"),le.STYLE?le.STYLE=e.Style.remembered[t]:e.STYLE=e.Style.remembered[t],e.Style},add:function(t){var r=le.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=le.STYLE={}),le.STYLE?le.STYLE=e.merge(r,t):e.STYLE=e.merge(r,t),e.Style},addType:function(t,r){var i=le.STYLE||e.STYLE;return i||(Lt?i=e.STYLE={}:i=le.STYLE={}),i.type||(i.type={}),i.type[t]=r,e.Style},addGroup:function(t,r){var i=le.STYLE||e.STYLE;return i||(Lt?i=e.STYLE={}:i=le.STYLE={}),i.group||(i.group={}),i.group[t]=r,e.Style},remove:function(t){var r=le.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=le.STYLE={}),delete r[t],e.Style},removeType:function(t){var r=le.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=le.STYLE={}),r.type&&delete r.type[t],e.Style},removeGroup:function(t){var r=le.STYLE||e.STYLE;return r||(Lt?r=e.STYLE={}:r=le.STYLE={}),r.group&&delete r.group[t],e.Style}},e.PATH=null,e.TIME="seconds",e.TIMECHECK=!1,e.DIR="ltr",e.SEEDRAND=null,e.SEEDRANDCOUNT=0,e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.DEFAULTWIRE="currentValue",e.KEYFOCUS=null,e.POSREG=!1,e.DRAGALL=!1,e.MOBILE="default",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,wire:new e.Dictionary,setFPS:function(t,r){n(t)&&n(r)?(t=60,r=60):n(t)?t=60:n(r)&&(r=t),e.Ticker.framerate=ze.Ticker.framerate=e.mobile()?t:r},setTimingMode:function(t){ze.Ticker.timingMode=ze.Ticker.RAF,t=="synched"&&(ze.Ticker.timingMode=ze.Ticker.RAF_SYNCHED),t=="timeout"&&(ze.Ticker.timingMode=ze.Ticker.TIMEOUT)},add:function(t,r){qe("30");var i=e.Ticker;if(i.has(t,r))return t;if((n(r)||!r.update)&&(r=le.zdf.stage),n(t)||typeof t!="function"){ht("zim.Ticker.add() - only add functions");return}return i.list.at(r)?i.list.at(r).push(t):i.list.add(r,[t]),i.ticker||(i.ticker=ze.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},addWire:function(t,r){if(qe("30"),n(r[0]))return t;var i=e.Ticker;i.wire.add(t,r);var o=r[0][r[1]];return r[4]&&(o=r[4](o,"from")),r[3]&&(t[r[6]]=r[7]=o),i.ticker||(i.ticker=ze.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},rawID:{},raw:function(t){qe("30");var r=e.makeID("letters",7);return-function i(o){t(o),e.Ticker.rawID[r]=requestAnimationFrame(i)}(),r},removeRaw:function(t){cancelAnimationFrame(e.Ticker.rawID[t]),delete e.Ticker.rawID[t]},call:function(t){var r=e.Ticker,i,o,l,f=[];for(l=0;l<r.list.length;l++){i=r.list.objects[l],o=r.list.values[l];for(var h=0;h<o.length;h++)o[h](t);var g=!1;(r.alwaysList.at(i)||o.length>0&&(n(r.update)&&!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)||r.update))&&(g=!0),g&&f.indexOf(i)<0&&f.push(i)}for(l=r.wire.length-1;l>=0;l--){var _=r.wire.objects[l],P=r.wire.values[l];if(P){var C=_[P[6]];C!=P[7]&&(P[4]&&(C=P[4](C,"to",P[7])),P[0][P[1]]=P[7]=C,P[5]&&P[5](C),i=P[0].stage,i&&f.indexOf(i)<0&&f.push(i)),P[2]&&P[0]&&(C=P[0][P[1]],P[7]!=C&&(P[4]&&(C=P[4](C,"from",P[7])),_[P[6]]=P[7]=C,P[5]&&P[5](C),i=_.stage,i&&f.indexOf(i)<0&&f.push(i)))}}if(r.list.length==0)for(l=0;l<r.alwaysList.length;l++)i=r.alwaysList.objects[l],f.indexOf(i)<0&&f.push(i);var T=f.length;for(l=0;l<T;l++)f[l].update()},always:function(t){qe("30");var r=e.Ticker;r.framerate||r.setFPS(),(n(t)||!t.update)&&(t=le.zdf.stage),r.alwaysList.add(t,!0),r.ticker||(r.ticker=ze.Ticker.on("tick",r.call))},alwaysOff:function(t){var r=e.Ticker;(n(t)||!t.update)&&(t=le.zdf.stage),r.alwaysList.remove(t)},remove:function(t){var r=e.Ticker;if(n(t)||typeof t!="function"){ht("zim.Ticker - only remove functions");return}for(var i=0;i<r.list.length;i++){var o=r.list.values[i].indexOf(t);o>-1&&r.list.values[i].splice(o,1)}r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(ze.Ticker.off("tick",r.ticker),r.ticker=null)},removeAll:function(t){for(var r=e.Ticker,i,o=0;o<r.list.length;o++)i=r.list.objects[o],(n(t)||t===i)&&(r.list.values[o]=[]);r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(ze.Ticker.off("tick",r.ticker),r.ticker=null)},removeWire:function(t,r,i,o){var l=e.Ticker;if(n(t)&&n(r)&&n(i)&&n(o))l.wire.clear();else for(var f=l.wire.length-1;f>=0;f--){var h=l.wire.objects[f],g=l.wire.values[f];g&&(t&&h!=t||r&&g[0]!=r||i&&g[1]!=i||o&&g[6]!=o||(l.wire.objects.splice(f,1),l.wire.values.splice(f,1)))}l.alwaysList.length>0||l.list.length>0||l.wire.length>0||(ze.Ticker.off("tick",l.ticker),l.ticker=null)},isUpdating:function(t){n(t)&&(t=le.zdf.stage);var r=!1,i=e.Ticker;return(i.alwaysList.at(t)||i.list&&i.list.values.at(t)&&i.list.values.at(t).length>0&&(n(i.update)&&!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)||i.update))&&(r=!0),r},has:function(t,r){return(n(r)||!r.update)&&(r=le.zdf.stage),e.Ticker.list&&e.Ticker.list.at(r)&&e.Ticker.list.at(r).indexOf(t)>=0},getFPS:function(){return ze.Ticker.getMeasuredFPS()},dispose:function(t){for(var r=e.Ticker,i=0,o,l=r.list.length-1;l>=0;l--)o=r.list.objects[l],n(t)||t===o?(r.list.remove(t),r.alwaysList.remove(t)):i+=r.list.values[l].length;if(!(r.alwaysList.length>0))return i==0&&(ze.Ticker.off("tick",r.ticker),r.ticker=null),!0}},e.Ticker.setFPS(),Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var r=e.Ticker;typeof t!="boolean"&&(t=null),r.myUpdate=t,r.myUpdate===!1&&(cancelAnimationFrame(r.ticker),r.alwaysList=new e.Dictionary)}}),e.Pages=function(t,r,i,o,l,f,h,g,_){var P="pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",C;if(C=mt(e.Pages,arguments,P,this))return C;qe("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=g;var T=h===!1?{}:e.getStyle(this.type,this.group,_),N=v(i);if(n(t)&&(t=T.pages!=null?T.pages:[]),this.pages=t,n(r)&&(r=T.transition!=null?T.transition:"none"),n(i)&&(i=T.speed!=null?T.speed:N=="s"?.2:200),n(o)&&(o=T.transitionTable!=null?T.transitionTable:[]),this.transitionTable=o,n(f)&&(f=T.arrowDisableColor!=null?T.arrowDisableColor:e.grey),this.arrowDisableColor=f,n(l)&&(l=T.holder!=null?T.holder:null),n(l)&&le.zdf&&(l=le.zdf.stage),!l.getBounds||!l.getBounds()){ht("zim controls - Pages():\nholder object must have bounds set");return}this.speed=i,this.active=!0;var O=this;O.transitioning=!1;var S=l.getBounds().width,k=l.getBounds().height,x,E;(r!="none"||o!=[])&&L();function L(){x=new ze.Shape,x.graphics.f("black").r(0,0,S,k+1),E=new ze.Shape,E.graphics.f("white").r(0,0,S,k+1)}var A=["left","right","up","down"],b,F,q=!0,V;for(V=0;V<t.length;V++)b=t[V],b.constructor!={}.constructor&&(b=t[V]={page:t[V]}),b.swipe&&(q=!1);for(V=0;V<t.length;V++){if(b=t[V],b.constructor!=={}.constructor&&(b=t[V]={page:t[V]}),q){var I=t[V-1],ne=t[V+1];b.swipe=[I?I.page:null,ne?ne.page:null]}ae(b.page,b.swipe)}var R=this.page=t[0]?t[0].page:null;n(this.page)||(this.index=0),this.addChild(R),ie(R),this.swipe=new e.Swipe(l);var Q,U=!1,ee=this.swipe.on("swipe",function(G){if(O.active){var y=G.currentTarget.direction;if(y!="none"){var p="";y=="left"?p="right":y=="right"?p="left":y=="up"?p="down":y=="down"&&(p="up"),y=p;var d=A.indexOf(y);F=R.zimSwipeArray[d],Q=[F,y,null,null,!0],O.page=R,O.nextPage=F,O.direction=y,O.dispatchEvent("swipe"),setTimeout(function(){U||O.go(F,y,null,null,!0)},50)}}});function ae(G,y){n(G)||(G.zimHTMLList=new e.Dictionary,ce(G),G.zimSwipeArray=y||[],G.zimOriginalAlpha=G.alpha,G.parent&&G.parent.removeChild(b.page))}function ie(G){if(!n(G))for(G.removedHTML=!1,V=0;V<G.zimHTMLList.length;V++)G.addChildAt(G.zimHTMLList.values[V].obj,G.zimHTMLList.values[V].depth)}function ce(G){if(!G.removedHTML){G.removedHTML=!0,G.zimHTMLList.clear();var y,p;for(p=0;p<G.numChildren;p++)if(y=G.getChildAt(p),y.type=="TextArea"||y.type=="Loader"||y.type=="Tag"){var d={obj:y,depth:G.getChildIndex(y)};G.zimHTMLList.add(y,d)}for(p=G.numChildren-1;p>=0;p--)y=G.getChildAt(p),(y.type=="TextArea"||y.type=="Loader"||y.type=="Tag")&&G.removeChild(y)}}this.addPage=function(G,y){ae(G,y),O.pages.push({page:G}),R?G.parent&&G.parent.removeChild(G):(R=O.page=G,O.addChild(R))},this.removePage=function(G){ce(G),O.currentPage==G&&(O.removeChild(G),l.stage&&l.stage.update()),e.loop(O.pages,function(y,p){(y.page==G||y==G)&&O.pages.splice(p,1)},!0),G.zimSwipeArray=null},this.setSwipeArray=function(G,y){n(y)&&(y=[]);var p={page:G,swipe:y};p.page.zimSwipeArray=p.swipe?p.swipe:[]},this.pause=function(){U=!0},this.unpause=function(){U&&O.go(Q[0],Q[1],Q[2],Q[3],Q[4])};var j=!0;this.go=function(G,y,p,d,D){if(typeof G=="number"){var K=O.pages[G];if(n(K))return;G=K.page}setTimeout(function(){U=!1},200);for(var w=[{x:S},{x:-S},{y:k},{y:-k}],Y=[{x:0},{x:0},{y:0},{y:0}],Ee=[{x:S/2,alpha:0},{x:-S/2,alpha:0},{y:k/2,alpha:0},{y:-k/2,alpha:0}],X=r,Z=O.speed,pe=0;pe<O.transitionTable.length;pe++)if(O.transitionTable[pe][0]==R&&O.transitionTable[pe][1]==G){X=O.transitionTable[pe][2],n(O.transitionTable[pe][3])||(Z=O.transitionTable[pe][3]);break}n(p)&&(p=X),n(d)&&(d=Z),O.speed=d;function ve(Be){Be[0].uncache(),Be[1].uncache(),O.transitioning=!1,O.dispatchEvent("pagetransitioned"),O.removeChild(O.lastPage),p=="fan"&&(y=="right"||y=="down"?(O.lastPage.rotation=0,O.lastPage.regY=0,O.lastPage.mov(0,-O.lastPage.height)):(O.page.rotation=0,O.page.regY=0,O.page.mov(0,-O.lastPage.height))),O.removeChild(x),O.removeChild(E),ie(R),j=!0}function $(Be){O.removeChild(O.lastPage),e.animate(Be.shift(),{alpha:0},O.speed/2,null,ve,Be)}if(O.direction=y,G==""||G==null)O.page=R,O.dispatchEvent("nothing");else if(typeof G=="string")O.page=R,O.dispatchEvent(G);else{if(G==R)return;n(y)&&(y="right");var ue=A.indexOf(y);if(!j)return;j=!1,G.x=0,G.y=0,G.alpha=G.zimOriginalAlpha;var xe,Ye=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"];if(Ye.indexOf(p)>=0){var se=p;xe=!0,p="slide"}var be=["explodeDark","explodeLight","explodeZIM"];if(be.indexOf(p)>=0){var te=p;xe=!0,p="fade"}if(p.type=="Emitter"&&(xe=p,p.horizontal||p.vertical?p="slide":p="fade"),O.transitioning=!0,p=="slide"?(G.x=-(w[ue].x|0),G.y=-(w[ue].y|0),G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),R.cache(0,0,(S+1)/R.scaleX,(k+1)/R.scaleY),O.addChild(G),O.addChild(R),e.animate(R,w[ue],O.speed,null,ve,[R,G]),e.animate(G,Y[ue],O.speed)):p=="reveal"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),R.cache(0,0,(S+1)/R.scaleX,(k+1)/R.scaleY),O.addChild(G),O.addChild(R),e.animate(R,Ee[ue],O.speed,null,ve,[R,G])):p=="fade"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),R.cache(0,0,(S+1)/R.scaleX,(k+1)/R.scaleY),G.alpha=1,O.addChild(G),O.addChild(R),e.animate(R,{alpha:0},O.speed,null,ve,[R,G])):p=="black"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),R.cache(0,0,(S+1)/R.scaleX,(k+1)/R.scaleY),G.alpha=1,O.addChild(G),O.addChild(R),x.alpha=0,O.addChild(x),e.animate(x,{alpha:1},O.speed/2,null,$,[x,R,G])):p=="clear"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),R.cache(0,0,(S+1)/R.scaleX,(k+1)/R.scaleY),G.alpha=0,O.addChild(G),O.addChild(R),e.animate(R,{alpha:0},O.speed/2),e.animate(G,{alpha:1},O.speed/2,null,ve,[R,G],O.speed/2)):p=="white"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),R.cache(0,0,(S+1)/R.scaleX,(k+1)/R.scaleY),G.alpha=1,O.addChild(G),O.addChild(R),E.alpha=0,O.addChild(E),e.animate(E,{alpha:1},O.speed/2,null,$,[E,R,G])):p=="fan"?(G.cache(0,0,(S+1)/G.scaleX,(k+1)/G.scaleY),R.cache(0,0,(S+1)/R.scaleX,(k+1)/R.scaleY),G.alpha=1,y=="right"||y=="down"?(O.addChild(G),O.addChild(R),R.regY=R.height,R.mov(0,R.height),e.animate(R,{rotation:-90},O.speed,null,ve,[R,G])):(O.addChild(R),O.addChild(G),G.regY=R.height,G.mov(0,R.height),G.rotation=-90,e.animate(G,{rotation:0},O.speed,null,ve,[R,G]))):(O.transitioning=!1,O.addChild(G),O.removeChild(R),j=!0),xe){var _e=ue<2,J,ye;if(se||p=="slide"){se?(se=="lineDark"||se=="lineLight"?J=new e.Rectangle(_e?30:S+5,_e?k+5:30,se=="lineDark"?e.dark:e.white).alp(.2):se=="lineZIM"?J=new e.Rectangle(_e?50:S+5,_e?k+5:50,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.5):se=="pixelDark"||se=="pixelLight"?J=new e.Rectangle(40,40,e.clear,se=="pixelDark"?e.dark:e.white,2).alp(.7):se=="pixelZIM"?J=new e.Rectangle(40,40,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7):se=="bubbleDark"||se=="bubbleLight"?J=new e.Circle(30,e.clear,se=="bubbleDark"?e.dark:e.white,2).alp(.7):se=="bubbleZIM"&&(J=new e.Circle(30,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),J.centerReg({add:!1}),se=="lineDark"||se=="lineLight"||se=="lineZIM"?ye=new e.Emitter({obj:J,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):ye=new e.Emitter({obj:J,num:6,life:.5,decayTime:.5,width:_e?0:S,height:_e?k:0,vertical:_e,horizontal:!_e,startPaused:!0})):ye=xe;var Re=[{x:0,y:k/2},{x:S,y:k/2},{x:S/2,y:0},{x:S/2,y:k}],de=[{x:S,y:k/2},{x:0,y:k/2},{x:S/2,y:k},{x:S/2,y:0}];ye.centerReg(l).spurt(null,O.speed),ye.x=Re[ue].x,ye.y=Re[ue].y,e.animate(ye,de[ue],O.speed,null,function(){se&&ye.dispose()})}else(te||p=="fade")&&(te?(te=="explodeDark"||te=="explodeLight"?J=new e.Circle(150,te=="explodeDark"?e.dark:e.white).alp(.5):te=="explodeZIM"&&(J=new e.Circle(130,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),ye=new e.Emitter({obj:J,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):ye=xe,ye.centerReg(l).spurt(null,O.speed*.35),ye.on("fizzed",function(){te&&ye.dispose()}));l&&l.type!="Stage"&&l.type!="StageGL"&&ye.particles&&l.shape&&ye.particles.setMask(l.shape)}for(l&&l.shape&&ye&&ye.particles&&ye.particles.setMask(l.shape),ce(R),O.lastPage=R,O.page=G,O.index=-1,pe=0;pe<O.pages.length;pe++){var Me=O.pages[pe].page;Me==O.page&&(O.index=pe)}p=="none"&&ie(G),n(D)&&(D=!1),O.fromSwipe=D,O.dispatchEvent("page"),R=G,O.setArrows(t.index),l.stage&&l.stage.update()}},l&&l.shape&&(l.mouseChildren=!0,l.mouseEnabled=!0,O.setMask(l.shape)),this.resize=function(){S=l.getBounds().width,k=l.getBounds().height,(r!="none"||o!=[])&&L()},this.puff=function(G){for(var y=0;y<t.length;y++)O.addChild(t[y].page);O.addChild(R),G>0&&setTimeout(function(){O.settle()},G*(N=="s"?1e3:1))},this.settle=function(){O.removeAllChildren(),O.addChild(R),O.dispatchEvent("puffed")},this.disable=function(){O.active=!1},this.enable=function(){O.active=!0},this.arrows={},this.setArrows=function(){if(!e.isEmpty(O.arrows)){var G=O.pages[O.index];if(!(!G||!G.swipe)){var y=G.swipe,p=[e.LEFT,e.RIGHT,e.DOWN,e.UP];e.loop(p,function(d,D){y[D]?e.loop(O.arrows[d],function(K){if(K.setDisabled===!0){K.activate(!1,O.arrowDisableColor),K.setDisabled=null;return}K.enabled||K.activate(!0,K.arrowBackgroundColor)}):e.loop(O.arrows[d],function(K){if(K.setDisabled===!1){K.activate(!0,K.arrowBackgroundColor),K.setDisabled=null;return}K.enabled&&K.activate(!1,O.arrowDisableColor)})}),O.stage&&O.stage.update()}}},O.added(function(G){if(G.frame&&G.frame.scaling=="full"){if(!e.globalManager){var y=e.globalManager=new e.Manager;y.frame=G.frame,y.event=G.frame.on("resize",function(){y.resize()})}e.globalManager.add(O)}}),h!==!1&&e.styleTransforms(this,T),this.dispose=function(G,y,p){if(e.globalManager){var d=e.globalManager;d.remove(O),e.globalManager.items.length==0&&(d.frame.off("resize",d.event),d.dispose(),e.globalManager=null)}return O.swipe.off("swipe",ee),O.swipe.dispose(),p||this.zimContainer_dispose(!0),!0}},e.extend(e.Pages,e.Container,["clone","dispose"],"zimContainer",!1),e.Arrow=function(t,r,i,o,l,f,h,g,_,P,C){var T="backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",N;if(N=mt(e.Arrow,arguments,T,this))return N;qe("71.2"),this.group=P;var O=_===!1?{}:e.getStyle("Arrow",this.group,C);n(o)&&(o=O.direction!=null?O.direction:"right"),n(t)&&(t=O.backgroundColor!=null?O.backgroundColor:e.blue),this.arrowBackgroundColor=t,n(r)&&(r=O.rollBackgroundColor!=null?O.rollBackgroundColor:e.blue.lighten(.2)),this.arrowRollBackgroundColor=r,n(l)&&(l=O.type!=null?O.type:"triangle"),n(f)&&(f=O.newPage!=null?O.newPage:null),n(h)&&(h=O.trans!=null?O.trans:null),n(g)&&(g=O.speed!=null?O.speed:null);var S,k,x,E,L;l=="triangle"?(S=new e.Triangle(45,45,45,t,null,null,null,null,-7).rot(90),k=new e.Triangle(45,45,45,r,null,null,null,null,-7).rot(90)):l=="thick"?(S=new e.Shape,x=S.graphics.f(t).command,L="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",S.p(L).reg(-4),k=new e.Shape,E=k.graphics.f(r).command,k.p(L).reg(-4)):l=="thin"?(S=new e.Shape,x=S.graphics.f(t).command,L="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",S.p(L).reg(-4),k=new e.Shape,E=k.graphics.f(r).command,k.p(L).reg(-4)):l=="angle"&&(S=new e.Shape,x=S.graphics.f(t).command,L="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",S.p(L).reg(-3),k=new e.Shape,E=k.graphics.f(r).command,k.p(L).reg(-3)),this.zimButton_constructor(50,50,"",e.clear,e.clear,null,null,null,null,null,null,null,null,null,null,null,S,k),this.type="Arrow";var A=this;if(this.activate=function(V,I){return n(V)&&(V=!0),n(I)&&(I=e.grey),I===!1||(V?(A.enabled=!0,I!==!1&&(l=="triangle"?(A.icon.color=A.arrowBackgroundColor,A.rollIcon.color=A.arrowRollBackgroundColor):(x.style=A.arrowBackgroundColor,E.style=A.arrowRollBackgroundColor))):(A.enabled=!1,I!==!1&&(l=="triangle"?(A.icon.color=I,A.rollIcon.color=I):(x.style=I,E.style=I)))),A},n(i)||i.type!="Pages")return;var b=(Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click";n(i.arrows)&&(i.arrows={}),n(i.arrows[o])&&(i.arrows[o]=[]),i.arrows[o].push(this);var F=q();F||this.activate(!1,i.arrowDisableColor);function q(){var V=i.pages[i.index];if(!(!V||!V.page||!V.page.zimSwipeArray)){var I=V.page.zimSwipeArray;if(o=="left")return I[0];if(o=="right")return I[1];if(o=="up")return I[2];if(o=="down")return I[3]}}this.expand(),this.on(b,function(){if(!i.transitioning){var V=q();V&&i.go(V,o,h,g)}}),_!==!1&&e.styleTransforms(this,O),this.clone=function(){return A.cloneProps(new e.Arrow(t,r,i,o,l,f,h,g,_,this.group,C))}},e.extend(e.Arrow,e.Button,"clone","zimButton",!1),e.HotSpots=function(t,r,i){var o="spots, local, mouseDowns",l;if(l=mt(e.HotSpots,arguments,o,this))return l;qe("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",n(r)&&(r=!0),n(i)&&(i=!1);var f=(Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",h=this,g,_,P=h.hotSpots=[];n(t)&&(t=[]);for(var C=0;C<t.length;C++)T(t[C]);function T(O){var S=null;if(!Array.isArray(O.rect)){if(S=O.rect,!S){ht("zim controls - HotSpots(): HotSpot "+O.page+" "+O.rect+" button does not exist");return}O.rect=[S.x,S.y,S.width||1,S.height||1]}_=new e.HotSpot(O.page,O.rect[0],O.rect[1],O.rect[2],O.rect[3],O.call,O.callOver,O.callOut,r,O.talk),_.zimHSpage=O.page,_.button=S,P.push(_),_.on(f,N),S&&n(O.callOver)&&n(O.callOut)&&(_.spot.mouseEnabled=!1,_.spot.mouseChildren=!1,S.zimHScall=O.call,S.zimHSEvent=S.on(f,N,!0),i||(S.zimHSMDEvent=S.on("mousedown",function(k){k.stopImmediatePropagation()})),S.cur("pointer"))}function N(O){O.stopImmediatePropagation&&O.stopImmediatePropagation(),le.event&&(le.event.cancelBubble=!0),typeof O.currentTarget.zimHScall=="function"&&O.currentTarget.zimHScall(O)}this.add=this.addHotSpot=function(O,S,k,x,E,L){g={page:O,rect:S,call:k,callOver:x,callOut:E,talk:L},t.push(g),T(g)},this.show=function(){for(var O=0;O<P.length;O++)_=P[O],_.button||(_.spot.alpha=.2)},this.hide=function(){for(var O=0;O<P.length;O++)_=P[O],_.spot.alpha=0},this.remove=this.removeHotSpots=function(O,S){for(var k=t.length-1;k>=0;k--)g=t[k],_=P[k],S&&!Array.isArray(S)&&(S=[S.x,S.y,S.getBounds().width,S.getBounds().height]),(n(O)&&n(S)||n(S)&&O==g.page||n(O)&&e.arraysEqual(S,g.rect)||O==g.page&&e.arraysEqual(S,g.rect))&&(t.splice(k,1),_.button&&(_.button.off(f,_.button.zimHSEvent),_.button.zimHSEvent=null,i||(_.button.off("mousedown",_.button.zimHSMDEvent),_.button.zimHSMDEvent=null)),_.off(f,N),_.dispose(),P.splice(k,1))},this.dispose=function(){for(var O=0;O<P.length;O++)_=P[O],_.button&&(_.button.off(f,_.button.zimHSEvent),_.button.zimHSCall=null,_.button.zimHSEvent=null,i||(_.button.off("mousedown",_.button.zimHSMDEvent),_.button.zimHSMDEvent=null)),_.off(f,N),_.dispose();return!0}},e.extend(e.HotSpots,e.Container,"dispose","zimContainer",!1),e.HotSpot=function(t,r,i,o,l,f,h,g,_,P){var C="obj, x, y, width, height, call, callOver, callOut, local, talk",T;if(T=mt(e.HotSpot,arguments,C,this))return T;if(qe("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",n(t)||!t.addChild){ht("zim controls - HotSpot():\nPlease pass in container object for obj");return}if(!(t instanceof ze.Container)){ht("zim controls - HotSpot():\nObjects passed in should be Containers");return}if(n(r)||n(i)||n(o)||n(l)){ht("zim controls - HotSpot():\nPlease pass in x, y, width, height");return}n(_)&&(_=!0);var N=(Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",O=o,S=l,k,x,E;if(_)k=new e.Point(r,i),x=o,E=l;else{k=t.globalToLocal(r,i);var L=t.globalToLocal(r+O,i+S);x=L.x-k.x,E=L.y-k.y}var A=new e.Shape(o,l);if(A.talk=n(P)?"HotSpot":P,A.alpha=0,A.graphics.f("black").dr(0,0,x,E),A.x=k.x,A.y=k.y,A.cur("pointer"),A.expand(0),this.spot=A,typeof f=="function")var b=A.on(N,function(V){f(V)});if(typeof h=="function")var F=A.on("mouseover",function(V){h(V)});if(typeof g=="function")var q=A.on("mouseout",function(V){g(V)});t.addChild(A),this.show=function(){A.alpha=.5,t.stage&&t.stage.update()},this.hide=function(){A.alpha=0,t.stage&&t.stage.update()},this.dispose=function(){return b&&A.off(N,F),F&&A.off("mouseover",F),q&&A.off("mouseout",q),t.removeChild(A),A=null,!0}},e.extend(e.HotSpot,e.Container,"dispose","zimContainer",!1),e.Guide=function(t,r,i,o,l,f,h,g){var _="obj, vertical, pixels, hideKey, pixelKey, style, group, inherit",P;if(P=mt(e.Guide,arguments,_,this))return P;qe("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=h;var C=f===!1?{}:e.getStyle(this.type,this.group,g);if(n(t)&&(le.zdf?t=le.zdf.stage:t="stage"),n(r)&&(r=C.vertical!=null?C.vertical:!0),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){qn("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=C.pixels!=null?C.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=C.hideKey!=null?C.hideKey:"G"),n(l)&&(l=C.pixelKey!=null?C.pixelKey:"P");var T=this,N,O=80,S=26,k=O/6+O/2,x=S*2,E,L,A;r?(A=b("#00c5af","white","white"),A.shape.regX=O+O/6,A.shape.regY=S/2,A.label.x=-O/2-O/6):(A=b("#d61fa0","white","white"),A.shape.regX=O/2,A.shape.regY=S+S/4,A.label.y=-S*3/4);function b(j,G,y){var p=new e.Container({style:!1});return p.shape=new e.Shape,p.shape.graphics.s(G).ss(1).f(j).r(0,0,O,S),p.shape.alpha=.9,p.addChild(p.shape),p.label=new ze.Text("10","16px arial",y),p.label.textAlign="center",p.label.textBaseline="middle",p.addChild(p.label),p.mouseChildren=!1,p.mouseEnabled=!1,p}var F;t!="stage"&&t.addChild(T);var q=e.added(T,U),V=!1,I,ne,R,Q;function U(){if(t=="stage"?(F=T.stage,t=F):F=t.stage,F.frame&&F.frame.scaling=="full"){if(!e.globalManager){var j=e.globalManager=new e.Manager;j.frame=F.frame,j.event=F.frame.on("resize",function(){j.resize()})}e.globalManager.add(T)}t.addChild(T),I=t.getBounds().width,ne=t.getBounds().height,r?(A.y=ne/2,A.label.text="x:"+(T.pixels?Math.round(I*70/100):"70%")):(A.x=I/2,A.label.text="y:"+(T.pixels?Math.round(ne*70/100):"70%")),R=new e.Shape,T.addChild(R),r?R.x=I*.7:R.y=ne*.7,V||(t.addChild(T),ie()),F.off("stagemousemove",N),N=F.on("stagemousemove",ae),F.update()}var ee={x:0,y:0};function ae(j){var G,y;j?(G=t.globalToLocal(j.rawX/e.scaX,j.rawY/e.scaY),ee=G):G={x:ee.x,y:ee.y},i?r?(y=Math.round(Math.abs(G.x-R.x)),A.label.text="x:"+Math.max(0,Math.min(y,Math.round(I))),A.y=Math.max(x,Math.min(G.y,L))):(y=Math.round(Math.abs(G.y-R.y)),A.label.text="y:"+Math.max(0,Math.min(y,Math.round(ne))),A.x=Math.max(k,Math.min(G.x,E))):r?(y=Math.round(Math.abs(G.x-R.x)/I*100),A.label.text="x:"+Math.max(0,Math.min(y,100))+"%",A.y=Math.max(x,Math.min(G.y,L))):(y=Math.round(Math.abs(G.y-R.y)/ne*100),A.label.text="y:"+Math.max(0,Math.min(y,100))+"%",A.x=Math.max(k,Math.min(G.x,E))),F&&F.update()}function ie(){V=!0,I=t.getBounds().width,ne=t.getBounds().height;var j;r?(j="ew-resize",Q=new ze.Rectangle(0,0,I,0)):(j="ns-resize",Q=new ze.Rectangle(0,0,0,ne)),e.noDrag(R),setTimeout(function(){e.drag(R,Q,null,j,j,null,null,!0)},500),F.mouseMoveOutside=!0,F.enableMouseOver(10),E=I-O*2/3,L=ne-S-S,R.uncache();var G=R.graphics;r?(G.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,ne),G.f().s("white").ss(2).mt(0,0).lt(0,ne),G.s("#00c5af").sd([20,20]).mt(0,0).lt(0,ne).sd(),R.cache(-10,0,20,ne)):(G.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(I,0),G.f().s("white").ss(2).mt(0,0).lt(I,0),G.s("#d61fa0").sd([20,20]).mt(0,0).lt(I,0).sd(),R.cache(0,-10,I,20)),r?A.x=I:A.y=ne,T.addChild(A)}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(j){i=j,T.resize()}}),le.addEventListener("keydown",ce);function ce(j){j||(j=event),F&&(String.fromCharCode(j.keyCode)==o.toUpperCase()&&T.toggle(),String.fromCharCode(j.keyCode)==l.toUpperCase()&&(T.pixels=!T.pixels))}this.toggled=!0,this.toggle=function(j){return j===!0?T.visible=T.toggled=!0:j===!1?T.visible=T.toggled=!1:(T.visible=!T.visible,T.toggled=T.visible),F&&(F.off("stagemousemove",N),T.visible&&(N=F.on("stagemousemove",ae,T)),F.update()),T},this.resize=function(){return T?(F&&(ie(),ae()),!0):!1},f!==!1&&e.styleTransforms(this,C),this.dispose=function(){if(!T)return!1;if(e.globalManager){var j=e.globalManager;j.remove(T),e.globalManager.items.length==0&&(j.frame.off("resize",j.event),j.dispose(),e.globalManager=null)}return e.noDrag(R),clearInterval(q),T.removeAllChildren(),le.removeEventListener("keydown",ce),T.parent&&T.parent.removeChild(T),T=null,!0}},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.Grid=function(t,r,i,o,l,f,h,g,_,P,C){var T="obj, color, pixels, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",N;if(N=mt(e.Grid,arguments,T,this))return N;qe("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=P;var O=_===!1?{}:e.getStyle(this.type,this.group,C);if(n(t)&&(le.zdf?t=le.zdf.stage:t="stage"),n(r)&&(r=O.color!=null?O.color:e.black),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){qn("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=O.pixels!=null?O.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=O.hideKey!=null?O.hideKey:"G"),n(l)&&(l=O.pixelKey!=null?O.pixelKey:"P"),n(f)&&(f=O.allowToggle!=null?O.allowToggle:!0),n(h)&&(h=O.cache!=null?O.cache:!0),n(g)&&(g=O.numbers!=null?O.numbers:!0);var S=this,k=10,x;this.mouseChildren=!1,this.mouseEnabled=!1;var E=80,L=26,A=S.numbersX=F("#dddddd",r,"#333333");A.shape.regX=E/2,A.shape.regY=-L/4,A.label.y=L*3/4;var b=S.numbersY=F("#dddddd",r,"#333333");b.shape.regX=-E/6,b.shape.regY=L/2,b.label.x=E/2+E/6,g||(A.visible=!1,b.visible=!1);function F(d,D,K){var w=new e.Container({style:!1});return w.shape=new ze.Shape,w.shape.graphics.s(D).ss(1).f(d).r(0,0,E,L),w.shape.alpha=.9,w.addChild(w.shape),w.label=new ze.Text("10","16px arial",K),w.label.textAlign="center",w.label.textBaseline="middle",w.addChild(w.label),w.mouseChildren=!1,w.mouseEnabled=!1,w}var q=E/6+E/2,V=L*2,I,ne;A.x=q,b.y=V,A.label.text="x:0",b.label.text="y:0";var R;t!="stage"&&t.addChild(S);var Q=e.added(S,ee),U=!1;function ee(){if(t=="stage"?(R=S.stage,t=R):R=t.stage,R.frame&&R.frame.scaling=="full"){if(!e.globalManager){var d=e.globalManager=new e.Manager;d.frame=R.frame,d.event=R.frame.on("resize",function(){d.resize()})}e.globalManager.add(S)}U||(y(),t.addChild(S)),R.off("stagemousemove",x),x=R.on("stagemousemove",ie),R.update()}var ae={x:0,y:0};function ie(d){var D;d?(D=t.globalToLocal(d.rawX/e.scaX,d.rawY/e.scaY),ae=D):D={x:ae.x,y:ae.y},i?(A.label.text="x:"+Math.max(0,Math.min(Math.round(D.x),Math.round(ce))),A.x=Math.max(q,Math.min(D.x,I)),b.label.text="y:"+Math.max(0,Math.min(Math.round(D.y),Math.round(j))),b.y=Math.max(V,Math.min(D.y,ne))):(A.label.text="x:"+Math.max(0,Math.min(Math.round(D.x/ce*100),100))+"%",A.x=Math.max(q,Math.min(D.x,I)),b.label.text="y:"+Math.max(0,Math.min(Math.round(D.y/j*100),100))+"%",b.y=Math.max(V,Math.min(D.y,ne))),R&&R.update()}var ce,j,G;function y(){U=!0,t&&t.getBounds&&(ce=t.getBounds().width,j=t.getBounds().height),R&&(R.mouseMoveOutside=!0,R.enableMouseOver(10)),I=ce-E*2/3,ne=j-L-L,G=S.grid=new e.Container({style:!1}),S.addChild(G);var d=new ze.Shape;G.addChild(d);var D=d.graphics;D.s(r).ss(1);var K=new ze.Shape;G.addChild(K);var w;if(i){for(w=0;w<ce/k;w++)D.mt(w*k,0).lt(w*k,j);for(w=0;w<j/k;w++)D.mt(0,w*k).lt(ce,w*k);for(d.alpha=.3,D=K.graphics,D.s(r).ss(1),w=0;w<ce/(k*10);w++)D.mt(w*(k*10),0).lt(w*(k*10),j);for(w=0;w<j/(k*10);w++)D.mt(0,w*(k*10)).lt(ce,w*(k*10))}else{for(w=1;w<20+1;w++)D.mt(w*ce/20,0).lt(w*ce/20,j);for(w=1;w<20;w++)D.mt(0,w*j/20).lt(ce,w*j/20);for(d.alpha=.3,D=K.graphics,D.s(r).ss(1),w=1;w<10;w++)D.mt(w*ce/10,0).lt(w*ce/10,j);for(w=1;w<10;w++)D.mt(0,w*j/10).lt(ce,w*j/10)}var Y=80;D.s("#FFFFFF").ss(8),D.mt(ce/2,j/2-Y/2).lt(ce/2,j/2+Y/2),D.mt(ce/2-Y/2,j/2).lt(ce/2+Y/2,j/2),D.s("#000000").ss(4),D.mt(ce/2,j/2-Y/2).lt(ce/2,j/2+Y/2),D.mt(ce/2-Y/2,j/2).lt(ce/2+Y/2,j/2),D.s(r).ss(h?3:2),D.dr(0,0,ce,j),K.alpha=.5,h&&G.cache(0,0,ce,j),S.addChild(A),S.addChild(b),R&&R.update()}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(d){i=d,S.resize()}}),le.addEventListener("keydown",p);function p(d){d||(d=event),!(!R||!f)&&(String.fromCharCode(d.keyCode)==o.toUpperCase()&&S.toggle(),String.fromCharCode(d.keyCode)==l.toUpperCase()&&(S.removeChild(G),G=null,S.pixels=!S.pixels))}this.toggled=!0,this.toggle=function(d){return d===!0?S.visible=S.toggled=!0:d===!1?S.visible=S.toggled=!1:(S.visible=!S.visible,S.toggled=S.visible),R.off("stagemousemove",x),S.visible&&(x=R.on("stagemousemove",ie,S)),R&&R.update(),S},this.resize=function(){return S?(S.removeChild(G),G=null,R&&(y(),ie(),setTimeout(function(){S&&S.removeChild(G),G=null,y()},200)),!0):!1},_!==!1&&e.styleTransforms(this,O),this.dispose=function(){if(e.globalManager){var d=e.globalManager;d.remove(S),e.globalManager.items.length==0&&(d.frame.off("resize",d.event),d.dispose(),e.globalManager=null)}return clearInterval(Q),S.removeAllChildren(),le.removeEventListener("keydown",p),S.parent&&S.parent.removeChild(S),S=null,!0}},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.Wrapper=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V){var I="items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",ne=null;if(ne=mt(e.Wrapper,arguments,I,this))return ne;qe("78.5"),this.group=q;var R=F===!1?{}:e.getStyle("Wrapper",this.group,V);n(r)&&(r=R.width!=null?R.width:300),n(S)&&(S=R.height!=null?R.height:null),n(i)&&(i=R.spacingH!=null?R.spacingH:null),n(o)&&(o=R.spacingV!=null?R.spacingV:null),n(l)&&(l=R.wrapperType!=null?R.wrapperType:"spacing"),n(f)&&(f=R.align!=null?R.align:"left"),n(h)&&(h=R.valign!=null?R.valign:"top"),n(g)&&(g=R.alignInner!=null?R.alignInner:"left"),n(_)&&(_=R.valignInner!=null?R.valignInner:"bottom"),n(P)&&(P=R.flip!=null?R.flip:!1),n(C)&&(C=R.reverse!=null?R.reverse:!1),n(T)&&(T=R.bottomFull!=null?R.bottomFull:!1),n(N)&&(N=R.colSize!=null?R.colSize:100),n(O)&&(O=R.rowSize!=null?R.rowSize:null),n(i)&&(i=0),n(o)&&(o=0),n(k)&&(k=R.minSpreadNum!=null?R.minSpreadNum:2),n(x)&&(x=R.minStretchNum!=null?R.minStretchNum:3),n(E)&&(E=R.percentVoidH!=null?R.percentVoidH:0),n(L)&&(L=R.offsetVoidH!=null?R.offsetVoidH:0),n(A)&&(A=R.percentVoidV!=null?R.percentVoidV:0),n(b)&&(b=R.offsetVoidV!=null?R.offsetVoidV:0);var Q=200,U=0,ee=0,ae=0,ie=r;this.items=[];var ce,j;l=="spread"?ce=!0:l=="stretch"&&(j=!0),this.zimContainer_constructor(r,Q),this.type="Wrapper",f=="middle"&&(f="center"),h=="middle"&&(h="center"),g=="middle"&&(g="center"),_=="middle"&&(_="center");var G=this;this.add=function(p){return this.addAt(p,this.numChildren-1),G},this.addAt=function(p,d){return n(p)||((n(d)||d<0)&&(d=0),Array.isArray(p)||(p=[p]),e.loop(p,function(D,K){G.addChildAt(D,d+K)}),G.resize()),G},this.remove=function(p){return Array.isArray(p)||(p=[p]),e.loop(p,function(d){d&&d.removeFrom&&d.removeFrom()},!0),G.resize(),G},this.convert=function(p,d){var D=[];return p.loop(function(K){D.push(K),d&&K.cache()}),G.add(D),p.removeFrom(),G},this.resize=function(p,d){if(!G.preventResize){n(p)||(r=p),n(d)||(S=d),this.items2D=[],this.items=[],U=0,ee=0,ae=0,n(E)&&(E=0),n(L)&&(L=0);var D=e.Pick.choose(E),K=e.Pick.choose(L);ie=r*(100-D)/100,this.setBounds(ie,Q);var w=0,Y=0,Ee=0;G.cols=0,G.rows=0;var X=[],Z=[0],pe=null,ve=0,$=null,ue=e.Pick.choose(N);l!="column"&&(ue=null);var xe=e.Pick.choose(O),Ye=0,se,be;e.loop(this,function(Be,he){T||P?Be.pos(w+(Be.marginRight?Be.marginRight:0),Y+(Be.marginTop?Be.marginTop:0),e.RIGHT,P?e.TOP:e.BOTTOM):Be.pos(w+(Be.marginLeft?Be.marginLeft:0),Y+(Be.marginTop?Be.marginTop:0)),Ye++,$=Be.boundsToGlobal();var Ae=G.globalToLocal($.x,$.y),Ce=G.globalToLocal($.x+$.width,$.y+$.height);if(T||P?se=G.globalToLocal($.x,$.y):se=G.globalToLocal($.x+$.width,$.y+$.height),Be.wrapHeight=Ce.y-Ae.y,Be.wrapWidth=Ce.x-Ae.x,D){var me=G.globalToLocal($.x+Be.wrapWidth/2,$.y+Be.wrapHeight/2);Be.centerX=me.x,Be.centerY=me.y,me=null}ue?be=ue*Ye:T||P?be=ie-se.x+(Be.marginLeft?Be.marginLeft:0)+i:be=se.x+(Be.marginRight?Be.marginRight:0)+i,Math.round(be)-i>ie&&(y(X,pe,Ee,ve,ue,D,K,!1),ve=0,G.cols==0&&(G.cols=he),w=0,Y+=Ee+(xe?0:e.Pick.choose(o)),Ee=0,xe=e.Pick.choose(O),D=e.Pick.choose(E),K=e.Pick.choose(L),Ye=0,G.items2D.push(e.copy(X)),G.rows++,Z.push(Y),X=[],T||P?Be.pos(w+(Be.marginRight?Be.marginRight:0),Y+(Be.marginTop?Be.marginTop:0),e.RIGHT,P?e.TOP:e.BOTTOM):Be.pos(w+(Be.marginLeft?Be.marginLeft:0),Y+(Be.marginTop?Be.marginTop:0)),D&&($=Be.boundsToGlobal(),me=G.globalToLocal($.x+Be.wrapWidth/2,$.y+Be.wrapHeight/2),Be.centerX=me.x,Be.centerY=me.y,me=null),Ye++,ue?be=0:(be=(Be.marginLeft?Be.marginLeft:0)+Be.wrapWidth+(Be.marginRight?Be.marginRight:0)+e.Pick.choose(i),T||P?se.x=ie-((Be.marginRight?Be.marginRight:0)+Be.wrapWidth):se.x=(Be.marginLeft?Be.marginLeft:0)+Be.wrapWidth)),X.push(Be),ve+=Be.wrapWidth,w=be,xe?Ee=xe:Ee=Math.max(Ee,Be.wrapHeight+(Be.marginTop?Be.marginTop:0)+(Be.marginBottom?Be.marginBottom:0)),pe=new e.Point(se.x,Y+Ee)},C&&T?!1:C||T),G.numChildren>0&&(G.cols==0&&(G.cols=G.numChildren),G.items2D.push(e.copy(X)),Z.push(Y),y(X,pe,Ee,ve,ue,D,K,!0),G.rows+=1);var te=e.Pick.choose(h),_e;n(te)&&(te="top"),T&&(_e=Y+Ee-Q,e.loop(this,function(Be){Be.mov(0,_e)}),G.items2D.reverse(),e.loop(G.items2D,function(Be){Be.reverse()}));var J=e.Pick.choose(A),ye=e.Pick.choose(b);if(!n(J)){n(ye)&&(ye=0);var Re=Y+Ee,de=Re*J/100,Me=Re/2+ye/100*Re;e.loop(Z,function(Be,he){if(Be>=Me)return e.loop(G.items2D,function(Ae){e.loop(Ae,function(Ce){Ce.mov(0,de)})},null,1,he),"break"})}return n(S)||(h=="bottom"?(_e=S-(Y+Ee),e.loop(this,function(Be){Be.mov(0,_e)})):(h=="center"||h=="middle")&&(_e=(S-(Y+Ee))/2,e.loop(this,function(Be){Be.mov(0,_e)}))),G.setBounds(null),$=G.getBounds(),$&&G.setBounds(0,$.y,r,$.height),e.loop(G.items2D,function(Be){e.loop(Be,function(he){G.items.push(he)})}),this.stage&&this.stage.update(),G}};function y(p,d,D,K,w,Y,Ee,X){var Z=e.Pick.choose(f),pe=e.Pick.choose(ce),ve=e.Pick.choose(j),$=e.Pick.choose(P),ue=e.Pick.choose(g),xe=e.Pick.choose(_);n(Z)&&(Z="left"),n(xe)&&(xe="top"),n(ue)&&(ue="left"),$&&p.reverse();var Ye=((100-Y)/100/2+Ee/100)*r,se=r*Y/100,be=0,te=!1,_e,J;if(w){(T||P)&&p.reverse();var ye=ie%w,Re=ie/2+Ee/100*ie,de=0,Me=0,Be=Math.floor(ie/w);G.rows!=0&&X&&(te=!0),e.loop(p,function(Ne,ge){be=0,ue=="right"?Me=w*ge+de+w-Ne.wrapWidth:ue=="center"||ue=="middle"?Me=w*ge+de+(w-Ne.wrapWidth)/2:Me=w*ge+de,_e=Ne.x,Ne.pos(Me),J=Ne.x-_e,Ne.centerX+=J,Ne.marginLeft&&(be+=Ne.marginLeft),Ne.marginRight&&(be-=Ne.marginRight);var Ue;Z=="center"||Z=="middle"?(Ue=Math.floor(ie/w)-p.length,be+=(ye+(Ue?Ue*w:0))/2):Z=="right"&&(Ue=Math.floor(ie/w)-p.length,be+=ye+(Ue?Ue*w:0)),Ne.mov(be),Ne.centerX+=be}),Z=="center"&&te&&(p.length+Be)%2!=0&&(be=(Re<=ie/2?-1:1)*w/2,e.loop(p,function(Ne){Ne.mov(be),Ne.centerX+=be}))}else if(pe||ve){var he,Ae;pe?he=p.length?(ie-K)/(p.length+1):0:ve&&(he=p.length-1>0?(ie-K)/(p.length-1):0),p.length<x&&G.rows!=0&&X&&(he=ae,te=!0),ae=he;var Ce=0;if((T||P)&&p.reverse(),e.loop(p,function(Ne,ge){be=0,_e=Ne.x,Ne.pos(he*(ge+(pe?1:0))+Ce),J=Ne.x-_e,Ne.centerX+=J,te||(Ne.marginLeft&&(be+=Ne.marginLeft),Ne.marginRight&&(be-=Ne.marginRight),Ne.mov(be),Ne.centerX+=be),Ce+=Ne.wrapWidth}),te){be=0;var me=pe?he:0;J=0,e.loop(p,function(Ne){if(Z=="right")_e=Ne.x,Ne.pos(me,null,e.RIGHT),J=Ne.x-_e,me+=Ne.wrapWidth+he;else if(Z=="center"){var ge=(ie-(Ce+(p.length-1)*he))/2-(pe?he:0);_e=Ne.x,Ne.pos(me+ge,null,e.RIGHT),J=Ne.x-_e,me+=Ne.wrapWidth+he}Ne.marginLeft&&(be+=Ne.marginLeft),Ne.marginRight&&(be-=Ne.marginRight),Ne.mov(be),Ne.centerX+=J+be},!0)}}else Z=="center"?e.loop(p,function(Ne){be=((T||P?0:r)-d.x)/2,(pe||ve)&&(Ne.marginLeft&&(be+=Ne.marginLeft),Ne.marginRight&&(be-=Ne.marginRight)),Ne.mov(be),Ne.centerX+=be}):(T||P)&&Z=="left"?(Ae=p[p.length-1].marginLeft,e.loop(p,function(Ne){be=-d.x+(Ae||0),pe&&(be+=ee),Ne.mov(be),Ne.centerX+=be})):!(T||P)&&Z=="right"?(Ae=p[p.length-1].marginRight,e.loop(p,function(Ne){be=r-d.x-(Ae||0),pe&&(be-=ee),Ne.mov(be),Ne.centerX+=be})):pe&&pe&&e.loop(p,function(Ne){be=ee*(Z=="right"?-1:1),Ne.mov(be),Ne.centerX+=be});Y&&(Ye=(1/2+Ee/100)*ie,se=r*Y/100,e.loop(p,function(Ne){w||ve||pe?Z=="right"?Ne.centerX>ie-Ye&&Ne.mov(se):Z=="center"?Math.round(Ne.centerX)==Math.round(ie/2+Ee/100*ie)?Ne.mov(se/2):Math.round(Ne.centerX)>Math.round(ie/2+Ee/100*ie)&&Ne.mov(se):Ne.centerX>Ye&&Ne.mov(se):!(T||P)&&Z=="right"?Ne.centerX<r-Ye&&Ne.mov(-se):!(T||P)&&Z=="center"?Ne.centerX>r/2+Ee/100*ie?Ne.mov(se/2):Ne.mov(-se/2):(T||P)&&Z=="right"?Ne.centerX>ie-Ye&&Ne.mov(se):(T||P)&&Z=="center"?Ne.centerX>ie/2+Ee/100*ie&&Ne.mov(se):Ne.centerX>Ye&&Ne.mov(se)})),pe&&(U+=he,ee=U/(G.rows+1)),xe=="center"?e.loop(p,function(Ne){Ne.mov(0,(D-Ne.wrapHeight)/2*(T?-1:1))}):!T&&xe=="bottom"?e.loop(p,function(Ne){Ne.mov(0,D-Ne.wrapHeight-(Ne.marginBottom?Ne.marginBottom:0))}):T&&xe=="top"&&e.loop(p,function(Ne){Ne.mov(0,-(D-Ne.wrapHeight)+(Ne.marginTop?Ne.marginTop:0))})}Object.defineProperty(G,"spacingH",{get:function(){return i},set:function(p){i=p,this.resize()}}),Object.defineProperty(G,"spacingV",{get:function(){return o},set:function(p){o=p,this.resize()}}),Object.defineProperty(G,"wrapperType",{get:function(){return l},set:function(p){p=="spread"?ce=!0:ce=!1,p=="stretch"?j=!0:j=!1,l=p,this.resize()}}),Object.defineProperty(G,"align",{get:function(){return f},set:function(p){f=p,f=="middle"&&(f="center"),this.resize()}}),Object.defineProperty(G,"valign",{get:function(){return h},set:function(p){h=p,h=="middle"&&(h="center"),this.resize()}}),Object.defineProperty(G,"alignInner",{get:function(){return g},set:function(p){g=p,g=="middle"&&(g="center"),this.resize()}}),Object.defineProperty(G,"valignInner",{get:function(){return _},set:function(p){_=p,_=="middle"&&(_="center"),this.resize()}}),Object.defineProperty(G,"colSize",{get:function(){return N},set:function(p){N=p,l=="column"&&this.resize()}}),Object.defineProperty(G,"rowSize",{get:function(){return O},set:function(p){O=p,this.resize()}}),Object.defineProperty(G,"flip",{get:function(){return P},set:function(p){P=p,this.resize()}}),Object.defineProperty(G,"reverse",{get:function(){return C},set:function(p){C=p,this.resize()}}),Object.defineProperty(G,"bottomFull",{get:function(){return T},set:function(p){T=p,this.resize()}}),Object.defineProperty(G,"percentVoidH",{get:function(){return E},set:function(p){E=p,this.resize()}}),Object.defineProperty(G,"offsetVoidH",{get:function(){return L},set:function(p){L=p,this.resize()}}),Object.defineProperty(G,"percentVoidV",{get:function(){return A},set:function(p){A=p,this.resize()}}),Object.defineProperty(G,"offsetVoidV",{get:function(){return b},set:function(p){b=p,this.resize()}}),n(t)||G.add(t),F!==!1&&e.styleTransforms(this,R),this.clone=function(){var p=G.cloneProps(new e.Wrapper(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,this.style,this.group));return p}},e.extend(e.Wrapper,e.Container,"clone","zimContainer",!1),e.Tile=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j){var G="obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, scaleToH, scaleToV, scaleToType, backgroundColor, backing, backdropColor, backdropPadding, backdropPaddingH, backdropPaddingV, mat, style, group, inherit",y;if(y=mt(e.Tile,arguments,G,this))return y;qe("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=ce;var p=ie===!1?{}:e.getStyle(this.type,this.group,j);n(t)&&(t=p.obj!=null?p.obj:new e.Circle),n(r)&&(r=p.cols!=null?p.cols:1121),n(i)&&(i=p.rows!=null?p.rows:1121);var d;r==1121&&i==1121?r=i=d=3:r==1121?r=1:i==1121&&(i=1),n(f)&&(f=p.unique!=null?p.unique:!1),n(h)&&(h=p.width!=null?p.width:null),n(g)&&(g=p.height!=null?p.height:null),n(C)&&(C=p.colSize!=null?p.colSize:null),n(T)&&(T=p.rowSize!=null?p.rowSize:null),n(h)||(C=null),n(g)||(T=null),n(o)&&(o=p.spacingH!=null?p.spacingH:d?3:null),n(l)&&(l=p.spacingV!=null?p.spacingV:d?3:null);var D=o,K=l;(n(o)||!n(C)||!n(h))&&(o=0),(n(l)||!n(T)||!n(g))&&(l=0),n(_)&&(_=p.squeezeH!=null?p.squeezeH:!1),n(P)&&(P=p.squeezeV!=null?p.squeezeV:!1),n(N)&&(N=p.align!=null?p.align:"left"),n(O)&&(O=p.valign!=null?p.valign:"top"),n(S)&&(S=p.count!=null?p.count:f&&Array.isArray(t)?t.length:null),S===0&&(S=null,Et&&ht("ZIM Tile() - count parameter of 0 is ignored - see docs")),n(k)&&(k=p.mirrorH!=null?p.mirrorH:!1),n(x)&&(x=p.mirrorV!=null?p.mirrorV:!1),n(E)&&(E=p.snapToPixel!=null?p.snapToPixel:!0),E&&(t&&t.stage?t.stage.snapToPixelEnabled=!0:typeof elem<"u"&&le.zdf&&(le.zdf.stage.snapToPixelEnabled=!0)),n(L)&&(L=p.clone!=null?p.clone:f?!1:null),L==null&&(L=!(typeof t=="function"&&t.type!="series")),n(A)&&(A=p.events!=null?p.events:!0),n(F)&&(F=p.scaleToH!=null?p.scaleToH:null),n(q)&&(q=p.scaleToV!=null?p.scaleToV:null),n(V)&&(V=p.scaleToType!=null?p.scaleToType:null),n(I)&&(I=p.backgroundColor!=null?p.backgroundColor:null),n(ne)&&(ne=p.backing!=null?p.backing:null),n(R)&&(R=p.backdropColor!=null?p.backdropColor:null),n(Q)&&(Q=p.backdropPadding!=null?p.backdropPadding:null),n(U)&&(U=p.backdropPaddingH!=null?p.backdropPaddingH:n(R)?null:Q||o),n(ee)&&(ee=p.backdropPaddingV!=null?p.backdropPaddingV:n(R)?null:Q||l),(ee||U)&&(Q=!0),n(ae)&&(ae=p.mat!=null?p.mat:!1);var w=this;w.cols=r=Math.round(r),w.rows=i=Math.round(i),w.spacingH=o,w.spacingV=l,w.squeezeH=_,w.squeezeV=P;var Y=typeof N=="function",Ee=typeof O=="function";w.align=Y?"left":N,w.valign=Ee?"top":O,w.mirrorH=k,w.mirrorV=x,w.items=[];var X,Z=0,pe=!1;e:for(var ve=0;ve<i;ve++)for(var $=0;$<r;$++){if(Z++,!n(S)&&Z>S)break e;X=f?t[Z-1]:e.Pick.choose(t),typeof X=="string"&&(X=le.asset(X).centerReg({add:!1}).clone()),n(X)&&(X=new e.Container(0,0,0,0)),L&&(ve!=0||$!=0)&&(X=X.clone(b)),A&&X.on("change",function(we){var je=new ze.Event("change");je.item=we.currentTarget,w.dispatchEvent(je)}),w.items.push(X),X.type=="AC"&&(pe=!0),X.tileNum=Z-1,X.tileCol=$,X.tileRow=ve}pe&&Et&&ht("ZIM Tile - assets must have dimensions for Tile");var ue,xe,Ye,se,be,te,_e,J,ye,Re,de,Me,Be,he;function Ae(){w.removeAllChildren(),ue=[],xe=[],Ye=[],se=[],be=[],te=0,_e=0,J=0,ye=0,Re=[],de=[],Me=[],he=[],Be=[],(!w.items||!w.items.length)&&(w.items=[]),S=w.items.length;var we=0,je,st,Je=0,tt=0,Te,et;for(st=0;st<S;st++)Je=Math.floor(st/w.cols),tt=st%w.cols,n(ue[Je])&&(ue[Je]=[]),n(w.items[st])&&(w.items[st]=new e.Container(0,0,0,0)),ue[Je][tt]=w.items[st];w.rows=Math.max(1,ue.length),w.cols=Math.max(1,n(ue[0])?0:ue[0].length);e:for(Je=0;Je<w.rows;Je++)for(Re.push([]),de.push([]),he.push([]),T&&n(g)&&(Te=e.Pick.choose(T)),st=0;st<w.cols;st++){if(we++,!n(S)&&we>S)break e;je=ue[Je][st],je.snapToPixel=E,w.addChild(je),Re[Je].push(je.scaleX),de[Je].push(je.scaleY),C&&n(h)&&(et=e.Pick.choose(C)),Je==0&&Be.push(e.Pick.choose(N)),(!C||!n(h))&&(et=Math.abs(je.width)),(!T||!n(g))&&(Te=Math.abs(je.height)),he[Je][st]=[et,Te],n(se[st])&&(se[st]=0),n(be[Je])&&(be[Je]=0),et>se[st]&&(se[st]=et),Te>be[Je]&&(be[Je]=Te),n(xe[Je])&&(xe[Je]=0),n(Ye[st])&&(Ye[st]=0),xe[Je]+=et,Ye[st]+=Te,xe[Je]>te&&(te=xe[Je]),Ye[st]>_e&&(_e=Ye[st]),n(Me[st])&&(Me[st]=0),Me[st]++}var Ve;if(w.squeezeH===!1)for(st=0;st<se.length;st++)Ve=se[st],J+=Ve;if(w.squeezeV===!1)for(st=0;st<be.length;st++)Ve=be[st],ye+=Ve}Ae();var Ce=J,me=ye,Ne,ge,Ue,He,Oe=1,fe=1;function Xe(we,je){!n(R)&&Q&&(we-=Math.max(U*2,0),je-=Math.max(ee*2,0)),we<=0&&(we=null),je<=0&&(je=null),!n(we)&&w.squeezeH=="full"?Ne=we:n(we)?J>0?Ne=J+(w.cols-1)*w.spacingH:Ne=te+(w.cols-1)*w.spacingH:F?Ne=we:Ne=Math.max(te+(w.cols-1)*w.spacingH,we),!n(je)&&w.squeezeV=="full"?ge=je:n(je)?ye>0?ge=ye+(w.rows-1)*w.spacingV:ge=_e+(w.rows-1)*w.spacingV:q?ge=je:ge=Math.max(_e+(w.rows-1)*w.spacingV,je),w.setBounds(0,0,Ne,ge),Oe=(Ne-(w.cols-1)*D)/Ce,fe=(ge-(w.rows-1)*K)/me;var st,Je;Ue=[],He=[];var tt=[];for(ve=0;ve<ue.length;ve++)for(st=ue[ve],Je=0,$=0;$<st.length;$++){X=st[$];var Te,et;if(ve==0&&(Ue[$]=0,n(je)||(w.squeezeV=="full"?He[$]=Me[$]>1?(je-Ye[$])/(Me[$]-1):0:w.squeezeV?He[$]=Me[$]>1?Math.max(w.spacingV,(je-Ye[$])/(Me[$]-1)):0:He[$]=Me[$]>1?Math.max(w.spacingV,(ge-Ye[$])/(Me[$]-1)):0),w.squeezeV?w.valign=="center"||w.valign=="middle"?tt[$]=(ge-(Ye[$]+(Me[$]-1)*(n(je)?w.spacingV:He[$])))/2:w.valign=="bottom"?tt[$]=ge-(Ye[$]+(Me[$]-1)*(n(je)?w.spacingV:He[$])):tt[$]=0:tt[$]=0),$==0){n(we)||(w.squeezeH=="full"?et=st.length>1?(we-xe[ve])/(st.length-1):0:w.squeezeH?et=st.length>1?Math.max(w.spacingH,(we-xe[ve])/(st.length-1)):0:et=st.length>1?Math.max(w.spacingH,(Ne-xe[ve])/(st.length-1)):0),w.squeezeH?w.align=="center"||w.align=="middle"?Te=(Ne-(xe[ve]+(st.length-1)*(n(we)?w.spacingH:et)))/2:w.align=="right"?Te=Ne-(xe[ve]+(st.length-1)*(n(we)?w.spacingH:et)):Te=0:Te=0;var Ve=e.Pick.choose(O)}N=Be[$];var Le=he[ve][$][0],Qe=he[ve][$][1];w.mirrorH&&$%2==1&&(X.scaleX=-Re[ve][$]),X.pos(Je,null),!w.squeezeH&&Y?n(we)&&(N=="center"||N=="middle")?X.x+=(se[$]-X.width)/2:n(we)&&N=="right"&&(X.x+=se[$]-X.width):w.squeezeH?n(we)&&(w.align=="center"||w.align=="middle")?X.x+=(Le-X.width)/2:n(we)&&w.align=="right"&&(X.x+=Le-X.width):n(we)&&(w.align=="center"||w.align=="middle")?X.x+=(se[$]-X.width)/2:n(we)&&w.align=="right"&&(X.x+=se[$]-X.width),w.mirrorV&&ve%2==1&&(X.scaleY=-de[ve][$]),X.pos(null,Ue[$]),!w.squeezeV&&Ee?n(je)&&(Ve=="center"||Ve=="middle")?X.y+=(be[ve]-X.height)/2:n(je)&&Ve=="bottom"&&(X.y+=be[ve]-X.height):w.squeezeV?n(je)&&(w.valign=="center"||w.valign=="middle")?X.y+=(Qe-X.height)/2:n(je)&&w.valign=="bottom"&&(X.y+=Qe-X.height):n(je)&&(w.valign=="center"||w.valign=="middle")?X.y+=(be[ve]-X.height)/2:n(je)&&w.valign=="bottom"&&(X.y+=be[ve]-X.height),w.squeezeH===!0||!n(we)?Je+=Le+(n(we)?w.spacingH:et):Je+=se[$]+(n(we)?w.spacingH:et),X.x+=Te,X.y+=tt[$],w.squeezeV===!0||!n(je)?Ue[$]+=Qe+(n(je)?w.spacingV:He[$]):Ue[$]+=be[ve]+(n(je)?w.spacingV:He[$])}}Xe(h,g),this.itemUnderPoint=function(we,je,st){if(n(st)&&(st=!0),!(n(we)||n(je))){var Je=w.globalToLocal(we,je);we=Je.x,je=Je.y;var tt=0,Te=e.loop(se,function(Le,Qe){if(tt+=Le+w.spacingH,(!st||st=="vertical")&&we>tt-w.spacingH&&we<tt)return!1;if(we<tt-w.spacingH/2)return Qe});if(Te!==!1&&(Te===!0&&(Te=r-1),!(we<0||we>Ne||je<0||je>ge))){var et=0,Ve=e.loop(be,function(Le,Qe){var $e=n(g)?w.spacingV:He[$];if((!st||st=="horizontal")&&je>et-$e&&je<et)return!1;if(et+=Le+$e,je<et-$e/2)return Qe});if(Ve!==!1)return Ve===!0&&(Ve=i-1),w.items2D[Ve][Te]}}},this.remake=function(we){return n(we)||(w.items=we),Ae(),Xe(h,g),Fe(!0),w},this.resize=function(we,je){return n(we)&&(we=h),n(je)&&(je=g),h=we,g=je,Xe(we,je),Fe(!0),w};function Ze(we){for(var je=[],st,Je=0;Je<we.length;Je++)Je%w.cols==0&&(st=[],je.push(st)),st.push(we[Je]);return je}function Ke(we){var je=[],st;for(st=0;st<w.cols;st++)je.push([]);for(st=0;st<we.length;st++)je[st%w.cols][Math.floor(st/w.cols)]=we[st];return je}Object.defineProperty(this,"items2D",{get:function(){return Ze(w.items)},set:function(){Et&&ht("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return Ke(w.items)},set:function(){Et&&ht("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var we=[];return e.loop(w.items,function(je){var st=je.getBounds(),Je=je.x-je.regX+st.x+st.width/2,tt=je.y-je.regY+st.y+st.height/2,Te=w.hitTestGrid(w.width,w.height,w.cols,w.rows,Je,tt,null,null,w.spacingH,w.spacingV,!0,"open");Te!=null&&(we[Te[0]]=je)}),we},set:function(){Et&&ht("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return Ze(w.current)},set:function(){Et&&ht("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return Ke(w.current)},set:function(){Et&&ht("Tile() - current2DCols is read only")}});var ut,gt,We,it,ct,Pe;function Fe(we){if(we&&(it&&it.removeFrom(),ae&&ae.removeFrom()),!n(I)||ne||F||q){!we&&(F||q)&&(ct=[],Pe=[]),(!we||n(I))&&(ut=[]),!we&&!n(I)&&(We=[]),!we&&ne&&(gt=[]);var je=(C?D:0)/2,st=(T?K:0)/2,Je,tt=0;if(e.loop(w.items2D,function(et,Ve){e.loop(et,function(Le,Qe){var $e=black;if(n(I)||(we&&!n(I)?($e=We[tt],Je=ut[tt].siz(se[Qe]*Oe-(C?D:0),be[Ve]*fe-(T?K:0)).loc(je,st,w,0)):($e=dt(I),We.push(I),Je=new e.Rectangle({width:se[Qe]*Oe-(C?D:0),height:be[Ve]*fe-(T?K:0),color:$e,style:!1,scaleDimensions:!1,strokeObj:{ignoreScale:!0},group:"background"}).loc(je,st,w,0),ut.push(Je)),Le.pos(0,0,N,O,Je).addTo(w)),je=Je.x+Je.width+D,F||q){var nt,pt;if(we)nt=ct[tt],pt=Pe[tt];else{var nt=dt(F)||100,pt=dt(q)||100;ct.push(nt),Pe.push(pt)}Le.scaleTo(Je,nt,pt,V).pos(0,0,N,O,Je).addTo(w)}if(ne){var De;we?De=gt[tt]:De=dt(ne).clone(null,!1),gt.push(De),De.pos(0,0,N,O,Je).addTo(w)}tt++}),je=(C?D:0)/2,st+=Je.height+K}),ne&&!n(I)&&e.loop(gt,function(et){et.addTo(w,ut.length)},!0),n(I)?(e.loop(ut,function(et){et.dispose()},!0),ut=null,We=null):(w.backgrounds=ut,w.backgroundColors=We),!n(I)&&(C||T)){w.loop(function(et){et.mov(C?-D/2:0,T?-K/2:0)});var Te=w.getBounds();w.setBounds(Te.x,Te.y,Te.width-(C?D:0)*r,Te.height-(T?K:0)*i),Te=w.getBounds()}ne&&(w.backings=gt)}if(ae&&(w.mat=ae,ae.center(w,0)),R){var Te=w.getBounds();it=w.backdrop=new e.Rectangle({width:Te.width+U*2,height:Te.height+ee*2,color:R,style:!1,group:"backdrop"}),it.center(w,0),w.loop(function(Ve){Ve.mov(Math.max(0,U),Math.max(ee,0))}),w.setBounds(0,0,Te.width+Math.max(0,U)*2,Te.height+Math.max(ee,0)*2)}}Fe(),ie!==!1&&e.styleTransforms(this,p),this.clone=function(we){if(we){var je=[];if(I)var st=[];if(ne)var Je=[];for(var tt=0;tt<w.items.length;tt++)je.push(w.items[tt].clone(!0)),I&&st.push(We[tt]),ne&&Je.push(gt[tt].clone(!0))}return w.cloneProps(new e.Tile(we&&je?e.series(je):t.clone?t.clone():t,w.cols,w.rows,w.spacingH,w.spacingV,we?!1:f,h,g,w.squeezeH,w.squeezeV,C,T,N,O,w.items.length,w.mirrorH,w.mirrorV,E,we?!1:L,A,we,F,q,V,we&&st?e.series(st):I,we&&Je?e.series(Je):ne&&ne.clone?ne.clone():ne,R,Q,U,ee,ae&&ae.clone?ae.clone():ae,this.style,this.group))}},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.Pack=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I){var ne="width, height, items, spacingH, spacingV, flatten, direction, lock, backgroundColor, align, valign, lastAlign, paddingH, paddingV, dragOrder, dragColor, dragThickness, dragDashed, reverse, funnel, showPacking, order, style, group, inherit",R;if(R=mt(e.Pack,arguments,ne,this))return R;qe("66.52"),this.group=V;var Q=q===!1?{}:e.getStyle("Pack",this.group,I);n(t)&&(t=Q.width!=null?Q.width:500),n(r)&&(r=Q.height!=null?Q.height:500),this.zimContainer_constructor(t,r),this.type="Pack",n(i)&&(i=Q.items!=null?Q.items:[new e.Rectangle(400,300,e.orange),new e.Rectangle(400,200,e.purple),new e.Rectangle(500,300,e.blue)]),n(o)&&(o=Q.spacingH!=null?Q.spacingH:10),n(l)&&(l=Q.spacingV!=null?Q.spacingV:10),n(f)&&(f=Q.flatten!=null?Q.flatten:"top"),n(h)&&(h=Q.direction!=null?Q.direction:"horizontal"),n(g)&&(g=Q.lock!=null?Q.lock:"auto"),n(_)&&(_=Q.backgroundColor!=null?Q.backgroundColor:e.clear),n(P)&&(P=Q.align!=null?Q.align:"center"),n(C)&&(C=Q.valign!=null?Q.valign:"center"),n(T)&&(T=Q.lastAlign!=null?Q.lastAlign:h=="horizontal"?"left":"top"),n(N)&&(N=Q.paddingH!=null?Q.paddingH:0),n(O)&&(O=Q.paddingV!=null?Q.paddingV:0),n(S)&&(S=Q.dragOrder!=null?Q.dragOrder:!1),n(k)&&(k=Q.dragColor!=null?Q.dragColor:e.white),n(x)&&(x=Q.dragThickness!=null?Q.dragThickness:2),n(E)&&(E=Q.dragDashed!=null?Q.dragDashed:!0),n(L)&&(L=Q.reverse!=null?Q.reverse:!1),n(A)&&(A=Q.funnel!=null?Q.funnel:!1),n(b)&&(b=Q.showPacking!=null?Q.showPacking:!1),n(F)&&(F=Q.order!=null?Q.order:null);var U=this;U.funnel=A;var ee=i.length,ae=t-N*2,ie=r-O*2,ce=50;f===!1&&(f=NONE);var j=this.backing=new Sn({width:t,height:r,color:_,scaleDimensions:!1}).addTo(this);if(U.items=e.copy(i),i.length<=0)return this;if(i.length==1)return y(i[0]),p(i[0]),this;var G=function(me,Ne,ge){return me.width>Ne.width?1:me.width<Ne.width?-1:0};function y(me){me.scaleTo(j,100-N/ae*100*2,100-O/ie*100*2),me.scale*=U.scale,me.scale<0&&(me.scale=.05)}function p(me){me.pos(P!=CENTER&&P!=MIDDLE?N:0,C!=CENTER&&C!=MIDDLE?O:0,P,C,j).addTo(U)}function d(me){var Ne=[];e.loop(me,function(ge,Ue){Ne[Ue]=U.items[ge]}),i=[],e.loop(Ne,function(ge){ge&&i.push(ge)})}var D=U.content=new e.Container,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be;e.loop(i,function(me,Ne){me.zpRotation=me.rotation,me.zpIndex=Ne}),F&&d(F),h==VERTICAL&&te(!0);function te(me){D.rotation=0;var Ne=r;r=t,t=Ne;var ge=ie;ie=ae,ae=ge;var Ue=l;l=o,o=Ue;var He=O;O=N,N=He,f==RIGHT?f=BOTTOM:f!=CENTER&&f!=NONE&&(f=TOP),T==BOTTOM?T=LEFT:T!=CENTER&&T!=MIDDLE&&(T=RIGHT),j.dispose(),j=new Sn(t,r,_).center(U),me?(g==HORIZONTAL?g=VERTICAL:g==VERTICAL&&(g=HORIZONTAL),e.loop(i,function(Oe,fe){var Xe=new e.Container(Oe.height,Oe.width);Oe.rotation+=90,Oe.pos(0,0,TOP,LEFT,Xe),i[fe]=Xe})):(g==HORIZONTAL?g=VERTICAL:g==VERTICAL&&(g=HORIZONTAL),D.rotation-=90,e.loop(i,function(Oe,fe){var Xe=Oe,Ze=Oe.getChildAt(0).addTo(D).sca(Xe.scale);Xe.dispose(),i[fe]=Ze}))}var _e=g;function J(me){g==AUTO&&(g=HORIZONTAL),K=Math.ceil(Math.sqrt(ee)),w=Math.ceil(ee/K),X=null,Z=null,pe=0,be=null,ve=0,$=0,ue=null,xe=null,Ye=null,se=null,Ce(me,K,w),Ae(D,K,w)}J(i),ye();function ye(){if(y(D),p(D),f==NONE){e.loop(i,function(Ue){Ue.surrogate?(i.splice(i.indexOf(Ue),1),Ue.dispose()):Ue.bot()},!0);var me=w*K-ee;if(f==NONE&&me>0){var Ne=D.getChildAt(D.numChildren-1);if(h==HORIZONTAL&&!L&&T!=LEFT){var ge=D.getBounds().width-(Ne.x+(Ne.getBounds().x-Ne.regX)*Ne.scaleX+Ne.width);e.loop(K-me,function(Ue){D.getChildAt(D.numChildren-Ue-1).mov(T==RIGHT?ge:ge/2)})}else if(h==HORIZONTAL&&L&&T!=RIGHT){var ge=Ne.x+(Ne.getBounds().x-Ne.regX)*Ne.scaleX;e.loop(K-me,function(He){D.getChildAt(D.numChildren-He-1).mov(T==LEFT?-ge:-ge/2)})}else if(h==VERTICAL&&!L&&T!=RIGHT){var ge=Ne.x;e.loop(K-me,function(He){D.getChildAt(D.numChildren-He-1).mov(T==LEFT?-ge:-ge/2)})}else if(h==VERTICAL&&L&&T!=LEFT){var ge=D.getBounds().width-Ne.x;e.loop(K-me,function(He){D.getChildAt(D.numChildren-He-1).mov(T==RIGHT?ge:ge/2)})}}}h==VERTICAL&&(te(!1),y(D),p(D)),U.cols=K,U.rows=w,U.iterations=pe-2,U.currentItems=i,U.dispatchEvent("change")}var Re,de,Me;S&&U.added(Be);function Be(){he(),Me=Math.min(30,h==HORIZONTAL?D.height/w/3*U.scale*D.scale:D.width/K/3*U.scale*D.scale),Re?Re.siz(Me,Me).reg(CENTER):Re=U.beacon=new e.Rectangle({width:Me,height:Me,borderColor:k,borderWidth:x,scaleDimensions:!1}).reg(CENTER).rot(45),de||(de=U.ghost=new e.Rectangle({width:100,height:100,borderColor:k,borderWidth:x,dashed:E,scaleDimensions:!1}).reg(CENTER));var me,Ne,ge,Ue;U.mdEvent=U.on("mousedown",function(He){if(ge=He.target,Re.top(),me=null,!(i.indexOf(ge)<0)){Ue=U.localToGlobal(U.getBounds().x,U.getBounds().y);var Oe=ge.boundsToGlobal();U.ghost.siz(Oe.width,Oe.height).reg(CENTER).loc(Oe.x+de.width/2,Oe.y+de.height/2,U.stage),de.diffX=U.stage.frame.mouseX-de.x,de.diffY=U.stage.frame.mouseY-de.y,Ne=D.getChildIndex(ge),U.stage.update()}}),U.pmEvent=U.on("pressmove",function(){if(de.parent){var He=U.stage.frame;de.loc(He.mouseX-de.diffX,He.mouseY-de.diffY);var Oe=U.getObjectUnderPoint((de.x-Ue.x)/U.scaleX,(de.y-Ue.y)/U.scaleY,1);if(i.indexOf(Oe)>=0){var fe=Oe.boundsToGlobal();h==HORIZONTAL?de.x>=fe.x+fe.width/2?(Re.loc(fe.x+fe.width+o/2*U.scaleX*D.scaleX,fe.y+fe.height/2,U.stage),me=D.getChildIndex(Oe)+(L?0:1)):(Re.loc(fe.x-o/2*U.scaleX*D.scaleX,fe.y+fe.height/2,U.stage),me=D.getChildIndex(Oe)+(L?1:0)):de.y>=fe.y+fe.height/2?(Re.loc(fe.x+fe.width/2,fe.y+fe.height+l/2,U.stage),me=D.getChildIndex(Oe)+(L?0:1)):(Re.loc(fe.x+fe.width/2,fe.y-l/2,U.stage),me=D.getChildIndex(Oe)+(L?1:0))}U.stage.update()}}),U.puEvent=U.on("pressup",function(){de.parent&&(me!=null&&(me>Ne&&me--,me!=Ne&&(ge.level=me,i=[],D.loop(function(He,Oe){i.push(He.rot(He.zpRotation||0).sca(1))}),g=_e,h==VERTICAL&&te(!0),J(i),ye())),de.removeFrom(),Re.removeFrom(),U.stage.update())})}function he(){U.mdEvent&&U.off("mousedown",U.mdEvent),U.pmEvent&&U.off("pressmove",U.pmEvent),U.puEvent&&U.off("pressup",U.puEvent),Re&&Re.removeFrom(),de&&de.removeFrom()}function Ae(me,Ne,ge){if(me.scale=1,pe++>20){be&&be.clear();return}var Ue=!1;if(me.height>ie){if(Y=Ne+1,Ee=Math.ceil(ee/Y),Ne==Z&&g==VERTICAL)if($>ve)Y=xe,Ee=se,Ue=!0;else return me}else if(me.height<=ie&&(Y=Math.max(Ne-1,1),Ee=Math.ceil(ee/Y),Ne==Z&&g==HORIZONTAL))if($>ve)Y=xe,Ee=se,Ue=!0;else return me;if(Z=X,X=K,K=Y,w=Ee,e.loop(i,function(He){f==NONE&&He.surrogate?(i.splice(i.indexOf(He),1),He.dispose()):He.siz(null,ie)},!0),Ce(i,K,w),$=ve,xe=ue,se=Ye,_e==AUTO||g==HORIZONTAL&&Math.round(me.width)==ae||g==VERTICAL&&Math.round(me.height)==ie?ve=me.width*me.height:ve=0,ue=K,Ye=w,Ue){be&&be.clear(),p(me),U.stage&&U.stage.update();return}b?(be=si(1,function(){Ae(me,K,w)}),p(me),U.stage&&U.stage.update(),me.sca(1)):(me.sca(1),Ae(me,K,w))}function Ce(me,Ne,ge){var Ue=0;e.loop(me,function(We,it){We.siz(null,ce),Ue+=We.width});var He=Ue/ee,Oe=me;ee%Ne!=0&&f==NONE&&e.loop(Ne-ee%Ne,function(){var We=new e.Rectangle(He,ce,grey);We.surrogate=!0,Oe.push(We)});var fe=new li(Oe,Ne,ge,0,0,!0),Xe=[],Ze=e.copy(fe.items2D);if(f!=NONE&&Ne*ge!=ee&&Ze.length>1){var Ke;if(f==BOTTOM)Ke=U.funnel?Math.floor((Ne*ge-ee)/2):Math.ceil((Ne*ge-ee)/2),e.loop(Ke,function(We){Ze[ge-1].unshift(Ze[ge-2].pop())});else{var ut=Ne*ge-ee;e.loop(Ze,function(We,it,ct){it!=ct-1&&e.loop(We.splice(-ut,ut),function(Pe){Ze[it+1].unshift(Pe)},!0)}),Ke=U.funnel?Math.floor((Ne*ge-ee)/2):Math.ceil((Ne*ge-ee)/2),e.loop(Ke,function(We){Ze[0].push(Ze[1].shift())})}}e.loop(Ze,function(We,it,ct){var Pe=0;e.loop(We,function(st){Pe+=st.width});var Fe=(ae-o*(We.length-1))/Pe;e.loop(We,function(st){st.scale*=Fe});var we=e.copy(We);(L&&h==HORIZONTAL||!L&&h==VERTICAL)&&we.reverse();var je=new li(we,We.length,1,o,0,!0);L&&je.loop(function(st){st.bot()}),Xe.push(je)}),fe.dispose();var gt=0;return D.loc(j,null,U),D.removeAllChildren(),e.loop(Xe,function(We){We.loc(0,gt,D),gt+=We.height+l,We.loop(function(it,ct,Pe){it.addTo(D).ord(-(Pe-ct))},!0)}),e.loop(Xe,function(We){We.dispose()},!0),y(D),D}U.getOrder=function(me){if(n(me)&&(me=!1),me){if(!Ne){var Ne=U.pane=new e.Pane({displayClose:!1,container:U.stage,width:Math.min(500,U.stage.width-20),height:Math.min(500,U.stage.height-20),draggable:!0}),ge=U.textArea=new e.TextArea(Math.min(400,U.stage.width-70),Math.min(400,U.stage.height-70));ge.centerReg(Ne)}Ne.show(),ge.text=JSON.stringify(U.order)}return U.order},this.setOrder=function(me){return d(me),J(i),ye(),U},this.addAt=function(me,Ne){return n(me)||(n(Ne)&&(Ne=U.items.length),Array.isArray(me)||(me=[me]),e.loop(me,function(ge,Ue){U.items.push(ge),ge.zpIndex=U.items.length-1,U.currentItems.splice(Ne+Ue,0,ge)}),J(U.currentItems),ye()),U},this.removeAt=function(me,Ne){n(me)&&(me=1),n(Ne)&&(Ne=U.items.length);var ge=U.currentItems.splice(Ne,me);return e.loop(ge,function(Ue){var He=U.items.indexOf(Ue);U.items.splice(He,1)}),J(U.currentItems),ye(),U},Object.defineProperty(U,"order",{get:function(){var me=[];return D.loop(function(Ne){me.push(Ne.zpIndex)}),me},set:function(me){U.setOrder(me)}}),Object.defineProperty(U,"lock",{get:function(){return _e},set:function(me){me!=_e&&(g=me,J(i),ye(),S&&Be())}}),Object.defineProperty(U,"direction",{get:function(){return h},set:function(me){me!=h&&(h=me,D.rotation=0,i=[],D.loop(function(Ne,ge){i.push(Ne.rot(Ne.zpRotation||0).sca(1))}),h==VERTICAL&&te(!0),J(i),ye(),S&&Be())}}),Object.defineProperty(U,"spacing",{get:function(){return h==VERTICAL?l:o},set:function(me){o=l=me,J(i),ye()}}),Object.defineProperty(U,"outerWidth",{get:function(){return t},set:function(me){t!=me&&(t=me,ae=t-N*2,j&&(j.widthOnly=t,j.center(U)),J(i),ye(),S&&Be())}}),Object.defineProperty(U,"outerHeight",{get:function(){return r},set:function(me){r!=me&&(r=me,ie=r-O*2,j&&(j.heightOnly=r,j.center(U)),J(i),ye(),S&&Be())}}),Object.defineProperty(U,"flatten",{get:function(){return f},set:function(me){f!=me&&(f=me,J(i),ye())}}),Object.defineProperty(U,"dragOrder",{get:function(){return S},set:function(me){me?Be():(he(),U.stage&&U.stage.update())}}),q!==!1&&e.styleTransforms(this,Q),this.dispose=function(me){return S&&he(),U.items=null,U.currentItems=null,me||this.zimContainer_dispose(!0),!0},this.clone=function(){return U.cloneProps(new e.Pack(t,r,e.copy(i,!0),o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,e.copy(U.order),this.style,this.group))}},e.extend(e.Pack,e.Container,["dispose","clone"],"zimContainer",!1),e.Beads=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S){var k="path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",x;if(x=mt(e.Beads,arguments,k,this))return x;qe("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=N;var E=O===!1?{}:e.getStyle(this.type,this.group,S);n(g)&&(g=E.onTop!=null?E.onTop:!1),n(_)&&(_=E.showControls!=null?E.showControls:!1),n(P)&&(P=E.visible!=null?E.visible:!0),n(C)&&(C=E.interactive!=null?E.interactive:!0),n(t)&&(t=E.path!=null?E.path:new e.Blob({color:null,borderWidth:3,borderColor:e.blue})),t.visible=P,t.interactive=C,t.toggle(_),t.onTop=g,n(r)&&(r=E.obj!=null?E.obj:new e.Circle(10)),n(i)&&(i=E.count!=null?E.count:10),n(o)&&(o=E.angle!=null?E.angle:null),n(l)&&(l=E.startPercent!=null?E.startPercent:0),n(f)&&(f=E.endPercent!=null?E.endPercent:100),n(h)&&(h=E.percents!=null?E.percents:null);var L=f;f<l&&(L=100+f);var A;if(n(h)){var b;t.type=="Squiggle"?b=(L-l)/(i-1):b=(L-l)/(i-(l!=L%100?1:0)),h=[];var F=l-b;for(A=0;A<i;A++)h.push(F+b),F+=b,F>100&&(F-=100)}n(T)&&(T=E.clone!=null?E.clone:!0);var q=this;q.count=i,q.percents=h,q.items=[];var V;for(A=0;A<i;A++)V=e.Pick.choose(r),T&&A!=0&&(V=V.clone()),V.beadNum=A,V.startPercent=h[A],q.items.push(V);q.path=t.addTo(q),q.beads=new e.Container().addTo(q,g?0:null),q.beads.type="BeadsContainer",this.resize=function(){for(var I=t.segmentRatios,ne=t.segmentPoints,R=0;R<q.count;R++){var Q=t.getCurvePoint(Math.max(0,Math.min(.9999,h[R]/100)),I,ne,!0);if(Q){var U=q.beads.globalToLocal(Q.x,Q.y);U&&q.items[R].loc(U,null,q.beads).rot(n(o)?Q.angle>180?Q.angle-360+t.rotation:Q.angle+t.rotation:o)}}return this},q.resize(),C&&(t.on("pressmove",q.resize),t.on("update",q.resize)),O!==!1&&e.styleTransforms(this,E),this.dispose=function(I){return I||this.zimContainer_dispose(!0),q.items=[],!0},this.clone=function(I){if(I)for(var ne=[],R=0;R<q.items.length;R++)ne.push(q.items[R].clone(!0));return q.cloneProps(new e.Beads(t.clone(),I?e.series(ne):r.clone?r.clone():r,q.count,o,l,f,h,g,_,P,C,T,this.style,this.group))}},e.extend(e.Beads,e.Container,["clone","dispose"],"zimContainer",!1),e.Layout=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",O;if(O=mt(e.Layout,arguments,N,this))return O;qe("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=C;var S=P===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(t=S.holder!=null?S.holder:null),n(g)&&(g=S.scalingObject!=null?S.scalingObject:null),n(t)||!t.getBounds){qn("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");return}if(g=n(g)?t:g,!g.getBounds||!g.getBounds()){qn("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");return}var k=g.getBounds();t.setBounds(0,0,k.width,k.height),n(i)&&(i=S.lastMargin!=null?S.lastMargin:0),n(o)&&(o=S.lastMarginMin!=null?S.lastMarginMin:0),n(f)&&(f=S.vertical!=null?S.vertical:!0),n(l)&&(l=S.backgroundColor!=null?S.backgroundColor:""),n(_)&&(_=S.hideKey!=null?S.hideKey:"B"),n(h)&&(h=S.showRegions!=null?S.showRegions:null);var x;h&&(x=new e.Shape);var E=this.backing=new e.Shape,L=this;if(this.active=!0,n(r)&&(r=S.regions!=null?e.copy(S.regions):null),n(r))return;e.loop(r,function(y,p){y instanceof ze.DisplayObject&&(r[p]={obj:y}),r[p].object&&(r[p].obj=r[p].object,delete r[p].object)}),this.regions=r;var A,b=0,F="minWidth",q="width",V="height",I="marginLeft",ne="marginMinLeft",R="maxHeight";f&&(F="minHeight",q="height",V="width",I="marginTop",ne="marginMinTop",R="maxWidth");for(var Q=[],U=0,ee=0;ee<r.length;ee++){if(A=r[ee],!A.obj||!A.obj.getBounds()){ht("Layout(): each region object must have an object with setBounds() set");return}A[F]||(A[F]=0),A[q]||(A[q]=0),A.backgroundColor||(A.backgroundColor=""),A.given=0,A.maxGiven=0,A[I]=="auto"?(Q[ee]=!0,U++,A[ne]?A[I]=A[ne]:delete A[I]):A[I]&&A[ne]&&A[I]<A[ne]&&(A[I]=A[ne]),n(A[I])&&(A[I]=1e-4),A[R]||(A[R]=100),f?(A.align||(A.align="middle"),A.valign||(ee==0?A.valign="top":ee==r.length-1?A.valign="bottom":A.valign="middle",r.length==1&&(A.valign="middle"))):(A.valign||(A.valign="top"),A.align||(ee==0?A.align="left":ee==r.length-1?A.align="right":A.align="middle",r.length==1&&(A.align="middle"))),A[q]&&(A[F]=0),b+=A[q]+A[I]}if(i=="auto"?(Q[r.length]=!0,i=o||0):i&&o&&i<o&&(i=o),b+=i,b>100){ht("Layout(): cannot fit regions into 100% bounds");return}var ae=100-b;ie();function ie(){var y=0,p;for(p=0;p<r.length;p++)A=r[p],A.given=0,A[q]==0&&(y+=A.obj.getBounds()[q]);for(p=0;p<r.length;p++)A=r[p],A[q]==0&&(A.given=A.obj.getBounds()[q]/y*ae)}this.resize=function(){var y;if(L.active){for(k=g.getBounds(),t.setBounds(0,0,k.width,k.height),E.graphics.clear(),l!=""&&(ce(E,l),E.graphics.r(0,0,k.width,k.height)),y=0;y<r.length;y++)A=r[y],A.maxGiven=0,A.marginGiven=0;for(var p=!0,d,D,K,w,Y,Ee,X=ae;p;){for(p=!1,d=!0,y=0;y<r.length;y++)A=r[y],A.given>0&&A.maxGiven==0&&(D=A.obj.getBounds()[q],K=A.obj.getBounds()[V],w=A.given*k[q]/100,Y=A[R]*k[V]/100,Ee=K/D*w,Ee>Y&&A.obj.type!="Window"?(A.maxGiven=D/K*Y*100/k[q],X-=A.maxGiven):d=!1);if(d)break;var Z=0;for(y=0;y<r.length;y++)A=r[y],A[q]==0&&A.maxGiven==0&&(Z+=A.obj.getBounds()[q]);for(y=0;y<r.length;y++)A=r[y],A[q]==0&&A.maxGiven==0&&(A.given=A.obj.getBounds()[q]/Z*X)}var pe=!0;if(A=r[0],A.maxGiven>0?A.maxGiven<A[F]&&(A[q]=A[F],pe=!1):A.given>0&&A.given<A[F]&&(A[q]=A[F],pe=!1),A=r[r.length-1],A.maxGiven>0?A.maxGiven<A[F]&&(A[q]=A[F],pe=!1):A.given>0&&A.given<A[F]&&(A[q]=A[F],pe=!1),!pe){for(b=0,y=0;y<r.length;y++)A=r[y],b+=A[q]+A[I];if(b+=i,b>100){ht("zim display - Layout(): cannot fit regions into 100% bounds");return}ae=100-b,ie(),L.resize();return}var ve=!0,$=0,ue=0;for(y=0;y<r.length;y++)A=r[y],$+=A[I],A[q]>0?ue+=A[q]:A.maxGiven>0?ue+=A.maxGiven:A.given>0&&(ue+=A.given),A[q]==0&&(ve=!1);if(ve||d){$+=i;var xe=100-ue-$;if($-=i+r[0][I],xe!=0&&$!=0)for(y=0;y<r.length;y++)y!=0&&(A=r[y],A.marginGiven=A[I]/$*($+xe))}if(U>0){var Ye=0,se=0;for(y=0;y<r.length;y++)A=r[y],A.marginGiven>0?se+=A.marginGiven:se+=A[I],A.marginGiven=0,Ye+=A[I]>.05?A[I]:0;var be=(se-Ye)/U;for(y=0;y<Q.length;y++)Q[y]&&r[y]&&(A=r[y],A.marginGiven=(A[ne]?A[ne]:0)+be)}var te=0,_e=0,J,ye,Re;if(x&&x.graphics){var de=x.graphics;de.c()}for(y=0;y<r.length;y++)A=r[y],A.marginGiven>0?te+=A.marginGiven*k[q]/100:te+=A[I]*k[q]/100,A[q]>0?D=A[q]:A.maxGiven>0?D=A.maxGiven:A.given>0?D=A.given:D=0,D=D*k[q]/100,K=A[R]*k[V]/100,_e=(k[V]-K)/2,f?(A.obj.type=="Wrapper"&&A.obj.resize(K),A.obj.type=="Window"&&A.obj.resize(K,D),A.obj.type=="Region"&&A.obj.setBounds(K,D),J=e.fit(A.obj,_e,te,K,D)):(A.obj.type=="Wrapper"&&A.obj.resize(D),A.obj.type=="Window"&&A.obj.resize(D,K),A.obj.type=="Region"&&A.obj.setBounds(D,K),J=e.fit(A.obj,te,_e,D,K)),A.valign=="top"?A.obj.y=J.bY:A.valign=="bottom"&&(A.obj.y=J.bY+J.bHeight-J.height),A.align=="left"?A.obj.x=J.bX:A.align=="right"&&(A.obj.x=J.bX+J.bWidth-J.width),x&&x.graphics&&(de.s("white").ss(2).r(J.bX,J.bY,J.bWidth,J.bHeight),de.s("#ff8203").sd([20,20]).r(J.bX,J.bY,J.bWidth,J.bHeight).sd()),Re=ye=0,(te==0||te+D==k[q])&&(f?Re=1:ye=1),K==k[V]&&(f?ye=1:Re=1),A.backgroundColor!=""&&(ce(E,A.backgroundColor),E.graphics.r(J.bX,J.bY,J.bWidth+ye,J.bHeight+Re)),te+=D,A.obj.ZIMoutlineShape&&A.obj.outline()}};function ce(y,p){p.type=="GradientColor"?y.graphics.lf(p.colors,p.ratios,p.x0,p.y0,p.x1,p.y1):p.type=="RadialColor"?y.graphics.rf(p.colors,p.ratios,p.x0,p.y0,p.r0,p.x1,p.y1,p.r1):p.type=="BitmapColor"?y.graphics.bf(p.image,p.repetition,p.matrix):y.graphics.f(A.backgroundColor)}this.resize(),x&&t.addChild(x),t.addChildAt(E,0),le.addEventListener("keydown",j);function j(y){y||(y=event),x&&String.fromCharCode(y.keyCode)==_.toUpperCase()&&(L.toggle(),x.stage&&x.stage.update())}this.disable=function(){L.active=!1,le.removeEventListener("keydown",j),x&&(x.alpha=0)},this.enable=function(){L.active=!0,le.addEventListener("keydown",j),L.resize(),x&&(x.alpha=1)},this.removeShape=function(){x&&(x.graphics.clear(),x.dispose(),x=null,x=!1),le.removeEventListener("keydown",j)},this.toggled=!0,this.toggle=function(y){return y===!0?x.visible=!0:y===!1?x.visible=!1:x.visible=!x.visible,L.toggled=x.visible,L},this.addShape=function(y){L.removeShape(),x=y,le.addEventListener("keydown",j),t.addChild(x),L.resize()},P!==!1&&e.styleTransforms(this,S),g.added?g.added(G):G(g);function G(y){if(y&&y.frame&&y.frame.scaling=="full"){if(!e.globalManager){var p=e.globalManager=new e.Manager;p.frame=y.frame,p.event=y.frame.on("resize",function(){p.resize()})}e.globalManager.add(L)}}this.dispose=function(){if(L.resize=null,e.globalManager){var y=e.globalManager;y.remove(L),e.globalManager.items.length==0&&(y.frame.off("resize",y.event),y.dispose(),e.globalManager=null)}return L.backing&&L.backing.dispose(),L.backing=null,L.removeShape(),!0}},e.extend(e.Layout,ze.EventDispatcher,null,"cjsEventDispatcher",!1),e.Accessibility=function(t,r,i,o,l,A,h,g,_,P,C,T,N,O,S){var k="appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",x;if(x=mt(e.Accessibility,arguments,k,this))return x;qe("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",n(t)&&(t="application"),n(o)&&(o=!1),n(l)&&(l=2),n(A)&&(A=le.zdf),n(h)&&(h=!e.mobile()),n(g)&&(g=!1);var E=v(_);if(n(_)&&(_=E=="s"?.7:700),n(P)&&(P="brown"),n(C)&&(C=3),n(T)&&(T=5),n(N)&&(N=.8),n(S)&&(S=.8),n(O)){var L=new e.Shape({style:!1});L.mouseEnabled=!1}else O.mouseEnabled&&(O.mouseEnabled=!1);if(typeof A>"u")var A=le.zdf;if(n(A)){Et&&ht("Accessibility - needs a Frame");return}var b=A.retina&&le.devicePixelRatio||1,F=this;F.cycle=o,F.decimals=l,F.alwaysHighlight=g,F.AHTime=_,F.AHColor=P,F.AHBorderWidth=C,F.AHBorderPadding=T,F.AHAlpha=N,F.AHObjectScale=S;var q=-1,V=-1,I=[],ne=[],R={RadioButtons:"option",Tabs:"tab",Pad:"key"},Q,U=A.canvas.id,ee=e.mobile(),ae=!1,ie=null,ce=[],j,G,y,p,d,D,K,w=150,Y;Object.defineProperty(this,"tabOrder",{get:function(){return q},set:function(ge){var Ue;for(j&&j.removeEventListener("focus",Z),G&&G.removeEventListener("focus",Z),Ue=0;Ue<I.length;Ue++)I[Ue].parentElement&&(I[Ue].outerHTML="");I=[];var He,Oe;for(Ue=0;Ue<ne.length;Ue++)He=q[Ue],He&&ne[Ue][0].off("mousedown",ne[Ue][1]);ne=[],q=[];var fe=[];Y=A.shim?document.body:A.canvas,me=!1;var Xe=0;for(Ue=0;Ue<ge.length;Ue++){if(He=ge[Ue],He.type=="HotSpots"&&(ge.splice.apply(ge,[Ue,1].concat(He.hotSpots)),He=He.hotSpots[0]),He.type=="HotSpot"&&(He=He.spot),He.constructor=={}.constructor){if(Oe=He.obj,!Oe||!Oe.getStage)continue;He.title||(He.title=te(Oe,Ue+Xe))}else Oe=He,He={obj:He,title:te(He,Ue+Xe)};if(Oe.type=="RadioButtons"||Oe.type=="Tabs"||Oe.type=="Pad"){var Ze=[];Xe--;for(var Ke=0;Ke<Oe.buttons.length;Ke++){Xe++;var ut=Oe.buttons[Ke],gt={obj:ut,title:He.title+" - "+R[Oe.type]+": "+(ut.text=="a"||ut.text=="A"?"eh":ut.text)};Ze.push(gt),ut.zimTabParent=Oe,ut.zimTabParent.zimAccessibility=F,ut.zimTabIndex=Ue+Xe,ut.tabIndex=Ke,ut.zimAccessibility=F,_e(gt),Y=J(U+"Tab"+(Ue+Xe),gt.title,Y,gt),ne.push([ut,ut.on("mousedown",be)]),ae||ce.push([ut,ut.on("mousedown",X)])}fe=fe.concat(Ze)}else Oe.zimTabIndex=Ue+Xe,Oe.zimTabParent=Oe,_e(He),Oe.zimAccessibility=F,ne.push([Oe,Oe.on("mousedown",be)]),ae||ce.push([Oe,Oe.on("mousedown",X)]),fe.push(He),Y=J(U+"Tab"+(Ue+Xe),He.title,Y,He)}j=F.startAppTag=J(U+"PrefixTab",t+" start",A.shim?document.body:A.canvas,null,"before"),j.addEventListener("focus",Z),ae||(j.addEventListener("focus",xe),p=J(U+"noAriaTab","",j,null,"before"),p.setAttribute("aria-hidden",!0),p.focusTab=j,p.addEventListener("focus",ue),D=J(U+"noAriaTab","",j),D.setAttribute("aria-hidden",!0),D.focusTab=j,D.addEventListener("focus",ue)),Y=J(U+"BufferTab","",Y),ee&&Y.setAttribute("aria-hidden",!0),Y=G=F.endAppTag=J(U+"SuffixTab",t+" end",Y),G.addEventListener("focus",Z),ae||(G.addEventListener("focus",xe),Y=d=J(U+"noAriaTab","",G),d.setAttribute("aria-hidden",!0),d.focusTab=G,d.addEventListener("focus",ue),K=J(U+"noAriaTab","",G,null,"before"),K.setAttribute("aria-hidden",!0),K.focusTab=G,K.addEventListener("focus",ue)),q=fe}});function Ee(){j&&(j.removeEventListener("focus",Z),j.removeEventListener("focus",xe),j.parentNode&&(j.outerHTML="")),p&&(p.removeEventListener("focus",ue),p.parentNode&&(p.outerHTML="")),D&&(D.removeEventListener("focus",ue),D.parentNode&&(D.outerHTML="")),Y&&Y.parentNode&&(Y.outerHTML=""),G&&(G.removeEventListener("focus",Z),G.removeEventListener("focus",xe),G.parentNode&&(G.outerHTML="")),d&&(d.removeEventListener("focus",ue),d.parentNode&&(d.outerHTML="")),K&&(K.removeEventListener("focus",ue),K.parentNode&&(K.outerHTML=""))}Object.defineProperty(this,"tabIndex",{get:function(){return V},set:function(ge){if(!Ne)return;if(ge<0||ge>=q.length)We();else{ge!=V&&gt();var Ue=q[ge].obj;if(Ue.stage){if(V=ge,Ue.focus=!0,ye=!0,Re=!1,F.changeTitle(Ue),Ue.zimTabTag.focus(),setTimeout(function(){Ue.zimTabTag.focus();var it=new ze.Event("change");it.title=Ue.zimTabTag.getAttribute("aria-label"),F.dispatchEvent(it)},w),F.alwaysHighlight&&(!ie||!ee)){if(F.AHObject){Q=F.AHObject;var ut=e.boundsToGlobal(Ue);F.AHObject.alp(F.AHAlpha).addTo(A.stage,null,!1),F.AHObject.fit(ut.x,ut.y,ut.width,ut.height),F.AHObject.sca(F.AHObject.scaleX*F.AHObjectScale),F.AHTime>0&&(Ae=setTimeout(function(){A.stage.removeChild(F.AHObject),A.stage.update()},F.AHTime*(E=="s"?1e3:1)))}else{Q=L;var He=Ue.getBounds(),Oe=Ue.localToGlobal(He.x-5,He.y-5),fe=Ue.localToGlobal(He.x+He.width+5,He.y-5),Xe=Ue.localToGlobal(He.x+He.width+5,He.y+He.height+5),Ze=Ue.localToGlobal(He.x-5,He.y+He.height+5),Ke=L.graphics;Ke.clear(),Ke.s(F.AHColor).ss(F.AHBorderWidth).mt(Oe.x-F.AHBorderPadding,Oe.y-F.AHBorderPadding).lt(fe.x+F.AHBorderPadding,fe.y-F.AHBorderPadding).lt(Xe.x+F.AHBorderPadding,Xe.y+F.AHBorderPadding).lt(Ze.x-F.AHBorderPadding,Ze.y+F.AHBorderPadding).lt(Oe.x-F.AHBorderPadding,Oe.y-F.AHBorderPadding).cp(),L.alpha=F.AHAlpha,F.AHTime>0&&(Ae=setTimeout(function(){A.stage.removeChild(L),A.stage.update()},F.AHTime*(E=="s"?1e3:1)))}A.stage.addChild(Q),A.stage.update()}}else We()}function gt(){if(V&&V>-1)q&&q[V]&&(q[V].obj.focus=!1);else for(var it=0;it<q.length;it++)q[it].obj.focus=!1}function We(){gt(),ye=!1,F.AHObject&&A.stage.removeChild(F.AHObject),F.alwaysHighlightShape&&A.stage.removeChild(F.alwaysHighlightShape),A.stage.update(),V=-1}}}),Object.defineProperty(this,"aria",{get:function(){return ie},set:function(ge){ie=ge,ie&&pe()}});function X(ge){var Ue=ge.currentTarget,He=Ue.boundsToGlobal(),Oe=He.x+He.width/2,fe=He.y+He.height/2,Xe=5;ge.stageX/e.scaX<Oe-Xe||ge.stageX/e.scaX>Oe+Xe||ge.stageY/e.scaY<fe-Xe||ge.stageY/e.scaY>fe+Xe?ve():pe()}function Z(){y&&(y.innerHTML="")}ee=="android"&&(e.ACTIONEVENT="click",Lt||(le.ACTIONEVENT="click"));function pe(){ie=!0,Ye(),y&&y.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",Lt||(le.ACTIONEVENT="click"),A.stage.removeChild(Q),ee&&(F.alwaysHighlight=!1),A.stage.update();for(var ge,Ue,He,Oe=0;Oe<q.length;Oe++)ge=q[Oe],Ue=ge.obj,He=Ue.zimTabTag,He.disabled=!1,ge.title=ge.title.replace(/\s\(use arrow keys\)/,""),He.setAttribute("aria-label",ge.title),He.addEventListener("focus",$)}function ve(){ie=!1;for(var ge,Ue,He,Oe=0;Oe<q.length;Oe++)ge=q[Oe],Ue=ge.obj,He=Ue.zimTabTag,He.disabled=!1;Ye(),g&&se()}function $(ge){var Ue=ge.currentTarget,He=Ue.zimObject;V=He.zimTabIndex,He.focus=!0;var Oe=new ze.Event("change");Oe.title=Ue.getAttribute("aria-label"),F.dispatchEvent(Oe)}function ue(ge){ie=!1,ge.target.focusTab.focus()}function xe(){n(ie)||ie?pe():ve()}function Ye(){ae=!0,j.removeEventListener("focus",xe),G.removeEventListener("focus",xe),p.removeEventListener("focus",ue),d.removeEventListener("focus",ue),p.parentNode&&(p.parentNode.removeChild(p),d.parentNode.removeChild(d)),D.removeEventListener("focus",ue),K.removeEventListener("focus",ue),D.parentNode&&(D.parentNode.removeChild(D),K.parentNode.removeChild(K));for(var ge=0;ge<ce.length;ge++)ce[ge][0].off("mousedown",ce[ge][1])}function se(){for(var ge=0;ge<I.length;ge++){var Ue=I[ge];Ue.zimObject&&(Ue.zimObject.type=="Loader"||Ue.zimObject.type=="TextArea"||Ue.zimObject.type=="Tag")||(I[ge].style.left="-2000px")}}n(r)?setTimeout(function(){if(q==-1){q=[];var ge=[];e.loop(A.stage,function(Ue){Ue.type&&ge.push(Ue)}),F.tabOrder=ge,n(i)||(F.tabIndex=i)}},50):(q=[],F.tabOrder=r,n(i)||(F.tabIndex=i));function be(ge){var Ue=ge.currentTarget;if(Ue.type=="RadioButton"||Ue.type=="TabsButton"||Ue.type=="PadButton")for(var He=0;He<Ue.zimTabParent.buttons.length;He++){var Oe=Ue.zimTabParent.buttons[He];Oe.zimTabTag.setAttribute("aria-label",Oe.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(Ue.zimTabParent.selectedIndex==Oe.tabIndex?" - currently selected.":" - currently not selected."))}F.tabIndex=ge.currentTarget.zimTabIndex,F.activatedObject=Ue}function te(ge){return ge.talk?ge.talk:ge.type=="TextArea"||ge.type=="RadioButtons"||ge.type=="Tabs"||ge.type=="Pad"?ge.type:ge.type=="Waiter"?"Waiter active - please wait":ge.text?ge.type+" - "+(ge.text=="a"||ge.text=="A"?"eh":ge.text):ge.type+(ge.type=="Dial"||ge.type=="Slider"||ge.type=="ColorPicker"||ge.type=="Stepper"?" (use arrow keys)":"")+(ge.type=="TextArea"?" (press ENTER to edit)":"")}function _e(ge){var Ue=ge.obj;ge.title=ge.title.replace(/\.$/,""),Ue.type=="RadioButton"||Ue.type=="TabsButton"||Ue.type=="PadButton"?ge.title=ge.title+(Ue.tabIndex==Ue.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):Ue.type=="CheckBox"?ge.title=ge.title+(Ue.checked?" - currently checked":" - currently not checked"):Ue.type=="Stepper"?ge.title=ge.title+" - currently displaying "+Ue.currentValue:Ue.type=="Slider"||Ue.type=="Dial"?ge.title=ge.title+" - currently at "+e.decimals(Ue.currentValue,F.decimals):Ue.type=="ColorPicker"?ge.title=ge.title+" - currently at "+Ue.selectedColor:Ue.type=="TextArea"?ge.title=ge.title+(Ue.tag.value!=""?"":" - placeholder: "+Ue.tag.placeholder):Ue.type=="Indicator"?ge.title=ge.title+" - currently "+(Ue.selectedIndex>=0?"at "+(Ue.selectedIndex+1)+" of "+Ue.num:"not indicating"):Ue.type=="TextInput"&&(ge.title=ge.title+(Ue.htmlTag.value!=""?"":" - placeholder: "+Ue.htmlTag.placeholder)),ge.title+="."}function J(ge,Ue,He,Oe,fe){var Xe,Ze;if(Oe&&(Xe=Oe.obj),Oe&&(Xe.type=="TextArea"||Xe.type=="Loader"))return Ze=Xe.tag,Ze.setAttribute("aria-label",Ue),Xe&&Ze.setAttribute("aria-hidden",!Xe.stage),fe=="before"?He.parentNode.insertBefore(Ze,He):He.parentNode.insertBefore(Ze,He.nextSibling),Xe.type=="TextArea"?Ze.style.zIndex=3:Ze.style.zIndex=-5,Ze.zimObject=Xe,Oe.obj.zimTabTag=Ze,I.push(Ze),Ze;if(Oe&&Xe.type=="TextInput")return Ze=Xe.htmlTag,Ze.setAttribute("aria-label",Ue),Xe&&Ze.setAttribute("aria-hidden",!Xe.stage),fe=="before"?He.parentNode.insertBefore(Ze,He):He.parentNode.insertBefore(Ze,He.nextSibling),Ze.style.zIndex=-5,Ze.zimObject=Xe,Oe.obj.zimTabTag=Ze,I.push(Ze),Ze;var Ke;if(Oe&&(Xe.type=="Dial"||Xe.type=="Slider"||Xe.type=="Stepper"||Xe.type=="ColorPicker")){var ut=[];if(Xe.type=="Dial"||Xe.type=="Slider"){var gt=Xe.step<=0?(Xe.max-Xe.min)/20:Xe.step;for(Ke=Xe.min;Ke<Xe.max;Ke=Ke+gt)ut.push(Xe.min+Ke)}else Xe.type=="Stepper"?ut=Xe.stepperArray:Xe.type=="ColorPicker"&&(ut=Xe.colors);Ze=document.createElement("select"),Ze.disabled=!0,Ze.zimObject=Xe,Ze.addEventListener("change",function(Pe){!ie&&!ee=="android"||(Pe.currentTarget.zimObject.zimTabParent.currentValueEvent=Pe.target.value,A.stage.update())}),Ze.size=1;var We,it;for(Ke=0;Ke<ut.length;Ke++)We=ut[Ke],it=document.createElement("option"),it.setAttribute("aria-label",We),it.innerHTML=We,Ze.add(it),We==Xe.zimTabParent.currentValue&&it.setAttribute("selected","selected");Ze.setAttribute("role","button")}else Ze=document.createElement("div"),Xe&&(Ze.zimObject=Xe),Ze.innerHTML="tag",Ze.setAttribute("role",h?"application":"button"),ee=="android"&&Ze.addEventListener("click",function(){Xe.dispatchEvent("click")});if(Ze.setAttribute("id",ge),Ze.setAttribute("tabindex",0),Ze.setAttribute("aria-label",Ue),Xe&&Ze.setAttribute("aria-hidden",!Xe.stage),fe=="before"?He.parentNode.insertBefore(Ze,He):He.parentNode.insertBefore(Ze,He.nextSibling),Ze.style.position="absolute",Oe){Xe=Oe.obj;var ct=Xe.boundsToGlobal();A.retina?(Ze.style.left=A.x+ct.x*A.scale/b+"px",Ze.style.top=A.y+ct.y*A.scale/b+"px",Ze.style.width=ct.width*A.scale/b+"px",Ze.style.height=ct.height*A.scale/b+"px"):(Ze.style.left=A.x+ct.x*A.scale+"px",Ze.style.top=A.y+ct.y*A.scale+"px",Ze.style.width=ct.width*A.scale+"px",Ze.style.height=ct.height*A.scale+"px"),Oe.obj.zimTabTag=Ze}else Ze.style.left="-1000px",Ze.style.top=A.y+"px";return Ze.style.overflow="hidden",Ze.style.zIndex=-5,Ze.style.fontSize="20px",Ze.style.color="rgba(0,0,0,.01)",I.push(Ze),Ze}var ye=!1,Re=!0,de=A.on("keydown",function(ge){if(ge.keyCode==9&&(Me()||(ye=!1,F.tabIndex!=-1&&(F.tabIndex=-1)),ye?he(ge):Be(ge)),ye&&q.length>0&&F.tabIndex>=0&&ge.keyCode==13){var Ue=q[F.tabIndex],He=Ue.obj;if(Ue&&He.stage){var Oe=new ze.Event("mousedown"),fe=new ze.Event("click");Oe.fromEnter=fe.fromEnter=!0,He.type=="Pane"?(He.backdrop.dispatchEvent(Oe),He.backdrop.dispatchEvent(fe)):(He.dispatchEvent(Oe),He.dispatchEvent(fe))}}});function Me(){for(var ge=!1,Ue=0;Ue<I.length;Ue++)if(document.activeElement==I[Ue]){ge=!0;break}return!!(document.activeElement==A.canvas||ge)}function Be(ge){!A.shiftKey&&(Tn(U+"PrefixTab")==document.activeElement||A.canvas==document.activeElement)?(q.length>0&&(q[q.length-1].obj.focus=!0),Re=!0,ye=!0,he(ge)):A.shiftKey&&(Tn(U+"SuffixTab")==document.activeElement||Tn(U+"BufferTab")==document.activeElement)&&(q.length>0&&(q[0].obj.focus=!0),Re=!0,ye=!0,he(ge))}function he(ge){if(ge.ctrlKey){Ce(ge.shiftKey?-1:1);return}ge.shiftKey?F.tab(-1):F.tab(1),ge.preventDefault()}var Ae;this.tab=function(ge){if(clearTimeout(Ae),Q&&A.stage.removeChild(Q),n(ge)&&(ge=1),q.length==0){Ce(ge);return}for(var Ue=0;Ue<q.length;Ue++){var He=q[Ue].obj;if(He.focus){He.focus=!1;var Oe=Ue+ge,fe=(Oe+q.length*1e4)%q.length,Xe=q[fe];He=Xe.obj;for(var Ze=0,Ke=!1;!(He.stage&&(!He.zimTabParent&&(n(He.enabled)||He.enabled)||He.zimTabParent&&(n(He.zimTabParent.enabled)||He.zimTabParent.enabled)));)if(Ze++,Oe=Oe+ge,fe=(Oe+q.length*100)%q.length,Xe=q[fe],He=Xe.obj,Ze==q.length){Ke=!0;break}if(Ke||!F.cycle&&Oe!=fe&&!Re){Ce(ge);return}Re=!1,F.tabIndex=fe;break}}};function Ce(ge){ye=!1,Tn(U+(ge==1?"SuffixTab":"PrefixTab")).focus(),A.stage.removeChild(O),A.stage.update(),F.tabIndex=-1}this.changeTitle=function(ge,Ue,He){if(typeof ge!="number"&&(ge=ge.zimTabIndex),!n(ge)){if(He&&n(Ue)){F.tabIndex=ge;return}var Oe=q[ge],fe=Oe.obj;n(Ue)&&(Ue=fe.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),Oe.title=Ue,_e(Oe),fe.zimTabTag.setAttribute("aria-label",Oe.title),He&&(F.tabIndex=ge)}};var me=!1;this.talk=function(ge){me||(y=J(U+"TalkTab","",G),y.setAttribute("role","alert"),me=!0),y.removeAttribute("role"),y.setAttribute("aria-label",ge),y.setAttribute("role","alert");var Ue=new ze.Event("change");Ue.title=ge,F.dispatchEvent(Ue)},this.resize=function(ge){if(n(ge))for(var Oe=0;Oe<q.length;Oe++)fe(q[Oe].obj);else{if(typeof ge!="number"&&(ge=ge.zimTabIndex),ge<0)return;var Ue=q[ge],He=Ue.obj;!He.stage&&Q&&He==F.currentObject&&(A.stage.removeChild(Q),A.stage.update()),fe(He)}function fe(Xe){if(Xe.type=="TextArea"||Xe.type=="Loader"){Xe.resize();return}else{var Ze=Xe.boundsToGlobal(),Ke=Xe.zimTabTag;A.retina?(Ke.style.left=A.x+Ze.x*A.scale/b+"px",Ke.style.top=A.y+Ze.y*A.scale/b+"px",Ke.style.width=Ze.width*A.scale/b+"px",Ke.style.height=Ze.height*A.scale/b+"px"):(Ke.style.left=A.x+Ze.x*A.scale/b/b+"px",Ke.style.top=A.y+Ze.y*A.scale/b/b+"px",Ke.style.width=Ze.width*A.scale/b/b+"px",Ke.style.height=Ze.height*A.scale/b/b+"px")}Ke.setAttribute("aria-hidden",!Xe.stage),Ke.hidden=!Xe.stage}},Object.defineProperty(this,"currentObject",{get:function(){return q[V]&&q[V].obj?q[V].obj:null},set:function(ge){for(var Ue=0;Ue<q.length;Ue++)if(q[Ue].obj==ge){F.tabIndex=Ue;break}}});var Ne=!0;Object.defineProperty(this,"enabled",{get:function(){return Ne},set:function(ge){Ne=ge}}),this.dispose=function(){L&&L.graphics.clear(),F.tabOrder=[];for(var ge=0;ge<I.length;ge++)I[ge].parentElement&&(I[ge].outerHTML="");Ee(),F.removeAllEventListeners(),A.off("keydown",de)}},e.extend(e.Accessibility,ze.EventDispatcher,null,"cjsEventDispatcher",!1),e.TextureActive=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k){var x="width, height, color, color2, angle, borderColor, borderWidth, corner, interactive, animated, backingOrbit, pattern, scalePattern, style, group, inherit",E;if(E=mt(e.TextureActive,arguments,x,this))return E;qe("35.2"),this.group=S;var L=O===!1?{}:e.getStyle("TextureActive",this.group,k);n(t)&&(t=L.width!=null?L.width:le.zdf.width),n(r)&&(r=L.height!=null?L.height:le.zdf.height),n(_)&&(_=L.interactive!=null?L.interactive:!0),n(P)&&(P=L.animated!=null?L.animated:!0),n(i)&&(i=L.color!=null?L.color:null),n(o)&&(o=L.color2!=null?L.color2:null),n(l)&&(l=L.angle!=null?L.angle:null),n(f)&&(f=L.borderColor!=null?L.borderColor:null),n(h)&&(h=L.borderWidth!=null?L.borderWidth:null),f<0||h<0?f=h=null:f!=null&&h==null&&(h=1),n(g)&&(g=L.corner!=null?L.corner:10),n(C)&&(C=L.backingOrbit!=null?L.backingOrbit:!0),n(T)&&(T=L.pattern!=null?L.pattern:null),n(N)&&(N=L.scalePattern!=null?L.scalePattern:null),this.zimPage_constructor(t,r,i,o,l,T,N,null,O,S,k),this.type="TextureActive",g&&(this.backing.corner=g),n(h)||(this.backing.borderWidth=h),n(f)||(this.backing.borderColor=f),(h||!n(f))&&(this.backing.siz(this.width-h,this.height-h),this.backing.center()),this.backing.mouseChildren=!1,this.interactive=_,this.animated=P,this.backingOrbit=C,O!==!1&&e.styleTransforms(this,L),this.clone=function(){return this.cloneProps(new e.TextureActive(t,r,i,o,l,f,h,g,_,P,C,T,N,O,this.group,k))}},e.extend(e.TextureActive,e.Page,["clone"],"zimPage",!1),e.TextureActive.makeLogo=function(t,r){n(t)&&(t="light");var i=t!="dark",o=i?e.light:e.dark,l=i?e.dark:e.light,f=i?e.white:e.black,h=i?e.black:e.white,g=new e.Container(400,100),_=le.zdf.makeIcon(o,l,[o,o,o,o,o]).ske(0,30).scaleTo(g,100,100).center(g),P=new e.Rectangle((400-_.width)/2+4,80-10,new e.GradientColor([i?o:f,i?f:o,i?o:f],-70),h,.5).addTo(g),C=P.clone().pos(0,0,"right","bottom",g);return new e.Label({text:"Texture",size:50,color:l,variant:!0}).scaleTo(P,75,75).center(P),new e.Label({text:"Active",size:50,color:l,variant:!0}).scaleTo(P,72,72).center(C),r?g:g.noMouse()},e.TextureActive.makeBacking=function(t,r,i,o){n(t)&&(t=800),n(r)&&(r=600),n(i)&&(i="CANVAS WINDOW"),n(o)&&(o=e.light);var l=new e.Container(t,r);return l.icon=le.zdf.makeIcon({box:black}).sca(2),l.label=new e.Label({text:i,size:25,color:o,align:"center"}).reg("center"),l.tile=new e.Tile({obj:[l.icon,l.label],rows:2,spacingV:24,unique:!0,align:CENTER}).scaleTo(l,50,70).center(l),l.tile.items[1].mov(0,10),l},e.TextureActives=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E){var L="actives, threejs, zimThree, renderer, scene, camera, controls, layers, near, far, ignoreList, toggleKey, color, outerColor, damp, style, group, inherit",A;if(A=mt(e.TextureActives,arguments,L,this))return A;qe("35.4"),this.group=x;var b=k===!1?{}:e.getStyle("TextureActives",this.group,E),F,q,V="ZIM TextureActives - need a ZIM Frame";if(n(t)&&n(t[0]))if(le.zdf)q=le.zdf,F=le.zdf.stage;else{ht(V);return}else if(n(t)||n(t[0])||n(t[0].stage))if(le.zdf)q=le.zdf,F=le.zdf.stage;else{ht(V);return}else F=t[0].stage,q=F.frame;n(t)&&(t=b.actives!=null?b.actives:null),n(r)&&(r=b.threejs!=null?b.threejs:null),n(i)&&(i=b.zimThree!=null?b.zimThree:null),n(o)&&(o=b.renderer!=null?b.renderer:null),n(l)&&(l=b.scene!=null?b.scene:null),n(f)&&(f=b.camera!=null?b.camera:null),n(h)&&(h=b.controls!=null?b.controls:null),n(g)&&(g=b.layers!=null?b.layers:[]),Array.isArray(g)||(g=[g]),n(_)&&(_=b.near!=null?b.near:void 0),n(P)&&(P=b.far!=null?b.far:void 0),n(C)&&(C=b.ignoreList!=null?b.ignoreList:[]),Array.isArray(C)||(C=[C]),n(T)&&(T=b.toggleKey!=null?b.toggleKey:"t"),n(N)&&(N=b.color!=null?b.color:e.darker),n(O)&&(O=b.outerColor!=null?b.outerColor:"black"),n(S)&&(S=b.damp!=null?b.damp:null);var I=this;e.TAM||(e.TAM=new e.TextureActivesManager(F,T,S),o&&o.domElement&&o.domElement.addEventListener("mousedown",U=>{U.preventDefault()})),I.manager=e.TAM,this.ignoreList=C,this.raycast=!0,this.renderer=o,this.layers=g,this.animated=!1,this.interactive=!1,this.actives=[],this.threeMeshes=[];var ne=!1;function R(U){n(U)&&(U=[]),Array.isArray(U)||(U=[U]);var ee=0,ae,ie;return e.loop(U,function(ce){I.actives.indexOf(ce)<0&&(I.actives.push(ce),ce.cache(),ce.canvas.content=ce,ce.interactive&&(ae=!0,ce.canvas.isTextureActive=!0),ce.animated&&(ie=!0),ee++)}),ae&&!I.interactive&&(I.interactive=!0,ee>0&&Q()),ie&&!I.animated&&(I.animated=!0),ee}R(t),e.TAM.updateTile(I,I.actives),e.TAM.color=N,e.TAM.outerColor=O,q.canvas.style.display="none";function Q(){if(ne)return;ne=!0,I.pointerCheck||(I.pointerCheck=e.TAM.addPointer(I)),I.pointerData={x:q.mouseX,y:q.mouseY,mousedown:!1};var U=window.innerWidth,ee=window.innerHeight,ae=-1,ie=-2,ce=-1,j=-2;I.overInterval=e.interval(.05,function(){if(ie&&ie!=ae||j&&j!=ce){var te=new ze.Event("rayover");te.mesh=I.mesh=ie,te.material=I.material=j,j.userData&&(te.textureActive=I.textureActive=j.userData.ta_content),te.intersect=I.intersect,I.dispatchEvent(te),h&&!h.screenSpacePanning&&(h.activeLook=!1)}else if(!ie&&ae||!j&&ce){var te=new ze.Event("rayout");te.mesh=ae,te.material=ce,ce.userData&&(te.textureActive=ce.userData.ta_content),te.intersect=I.intersect,I.dispatchEvent(te),h&&!h.screenSpacePanning&&(h.activeLook=!0)}ae=ie,ce=j});var G=I.raycaster=new r.Raycaster(void 0,void 0,_,P);g.length>0&&e.loop(g,function(te){G.layers.set(te)});var y,p;I.XR=le.XR=!1;var d=new r.Matrix4;let D=I.controllerLeft=o.xr.getController(0);D.addEventListener("selectstart",w),D.addEventListener("selectend",Y),D.addEventListener("move",Ee);let K=I.controllerRight=o.xr.getController(1);K.addEventListener("selectstart",X),K.addEventListener("selectend",Z),K.addEventListener("move",pe);function w(te){p=!0,$(te)}function Y(te){p=!0,xe(te)}function Ee(te){p=!0,se(te,"left")}function X(te){p=!0,$(te)}function Z(te){p=!0,xe(te)}function pe(te){p=!0,se(te,"right")}window.addEventListener("pointerdown",ve);function ve(te){p=!1,$(te)}function $(te){if(I.raycast){if(p){var _e=te.target;d.identity().extractRotation(_e.matrixWorld),G.ray.origin.setFromMatrixPosition(_e.matrixWorld),G.ray.direction.set(0,0,-1).applyMatrix4(d),te.data&&te.data.handedness=="left"?te.pointerId=2:te.pointerId=1}else{var J;!i||i.resizeEvent?J={x:te.clientX/window.innerWidth*2-1,y:1-te.clientY/window.innerHeight*2}:J={x:te.clientX/U*2-1,y:1-te.clientY/ee*2},G.setFromCamera(J,f)}var ye=G.intersectObjects(l.children);y=null;var Re,de,Me;for(de=0;de<ye.length;de++)if(Re=ye[de].object,!(I.ignoreList.indexOf(Re)>-1)){if(I.threeMeshes.indexOf(Re)>-1)if(Re.material&&Array.isArray(Re.material))Me=Re.material[ye[de].face.materialIndex];else if(Re.material)Me=Re.material;else break;if(Me&&Me.map&&Me.map.source&&Me.map.source.data&&Me.map.source.data.isTextureActive&&Me.userData.ta_content){y=Re;var Be=Me.userData.ta_content;if(I.pointerData.mousedown=!0,be(Be,ye[de],Me.userData.ta_flipped),ze.handleRemotePointer(I.pointerData.x,I.pointerData.y,"down",te,F,te.pointerId),h&&h.maxAzimuthAngle&&Be)if(Be.backingOrbit){var he=Be.globalToLocal(q.mouseX,q.mouseY),Ae=Be.backing;Ae&&Be.getObjectUnderPoint(he.x,he.y,1)!=Ae?h.enableRotate=!1:h.enableRotate=!0}else h.enableRotate=!1;var Ce=new ze.Event("raydown");Ce.mesh=I.mesh=Re,Ce.material=I.material=Me,Ce.textureActive=I.textureActive=Be,Ce.intersect=I.intersect=ye[de],I.dispatchEvent(Ce);break}else break}}}window.addEventListener("pointerup",ue);function ue(te){p=!1,xe(te)}function xe(te){if(I.raycast){if(I.pointerData.mousedown=!1,h&&h.maxAzimuthAngle&&(h.enableRotate=!0),y){var _e=new ze.Event("rayup");_e.mesh=I.mesh,_e.material=I.material,_e.textureActive=I.textureActive,_e.intersect=I.intersect,I.dispatchEvent(_e)}y=null,p&&(te.data&&te.data.handedness=="left"?te.pointerId=2:te.pointerId=1),ze.handleRemotePointer(null,null,"up",te,F,te.pointerId)}}window.addEventListener("pointermove",Ye);function Ye(te){p=!1,se(te)}function se(te,_e){if(I.raycast){if(p){var J=te.target;d.identity().extractRotation(J.matrixWorld),G.ray.origin.setFromMatrixPosition(J.matrixWorld),G.ray.direction.set(0,0,-1).applyMatrix4(d),_e=="left"?te.pointerId=2:te.pointerId=1}else{var ye;!i||i.resizeEvent?ye={x:te.clientX/window.innerWidth*2-1,y:1-te.clientY/window.innerHeight*2}:ye={x:te.clientX/U*2-1,y:1-te.clientY/ee*2},G.setFromCamera(ye,f)}var Re=!1,de,Me,Be;if(y){let me=G.intersectObject(y);if(me.length>0&&(de=y,de.material&&Array.isArray(de.material)?Be=de.material[me[0].face.materialIndex]:de.material&&(Be=de.material),Be)){var he=Be.userData.ta_content;be(he,me[0],Be.userData.ta_flipped),ze.handleRemotePointer(I.pointerData.x,I.pointerData.y,"move",te,F,te.pointerId),Re=!0;var Ae=new ze.Event("raymove");Ae.mesh=ie=I.mesh=de,Ae.material=j=I.material=Be,Ae.textureActive=I.textureActive=he,Ae.intersect=I.intersect=me[0],I.dispatchEvent(Ae)}}else{var Ce=G.intersectObjects(l.children);for(Me=0;Me<Ce.length;Me++)if(de=Ce[Me].object,!(I.ignoreList.indexOf(de)>-1)){if(I.threeMeshes.indexOf(de)>-1)if(de.material&&Array.isArray(de.material))Be=de.material[Ce[Me].face.materialIndex];else if(de.material)Be=de.material;else break;if(Be&&Be.map&&Be.map.source&&Be.map.source.data&&Be.map.source.data.isTextureActive&&Be.userData.ta_content){var he=Be.userData.ta_content;be(he,Ce[Me],Be.userData.ta_flipped),ze.handleRemotePointer(I.pointerData.x,I.pointerData.y,"move",te,F,te.pointerId),Re=!0;var Ae=new ze.Event("raymove");Ae.material=j=I.material=Be,Ae.mesh=ie=I.mesh=de,Ae.textureActive=I.textureActive=he,Ae.intersect=I.intersect=Ce[Me],I.dispatchEvent(Ae);break}else break}}Re||(ie=null,j=null),e.TAM.setActive(I,Re)}}function be(te,_e,J){if(!(!te||!te.getBounds)){var ye=te.getBounds(),Re=J?ye.width-_e.uv.x*ye.width:_e.uv.x*ye.width,de=(1-_e.uv.y)*ye.height,Me=te.localToGlobal(Re,de);I.pointerData.x=Me.x,I.pointerData.y=Me.y}}}this.add=function(U){var ee=R(U);return ee>0&&e.TAM.updateTile(I,I.actives),I},this.remove=function(U){n(U)&&(U=[]),Array.isArray(U)||(U=[U]);var ee=0;return e.loop(U,function(ae){if(ze.remoteQueue){var ie=ze.remoteQueue.indexOf(ae);ie>=0&&ze.remoteQueue.splice(ie,1)}ie=I.actives.indexOf(ae),ie>=0&&(I.actives.splice(ie,1),ee++),ae.textureMap&&delete ae.textureMap.userData.ta_content,ie=I.threeMeshes.indexOf(ae),ie>=0&&I.threeMeshes.splice(ie,1),ae.dispose()},!0),ee>0&&e.TAM.updateTile(I,I.actives),I},I.addMesh=function(U,ee){if(n(ee)||U.layers.enable(ee),U.material){var ae=I.threeMeshes.indexOf(U);if(ae<0)I.threeMeshes.push(U);else return I;var ie;Array.isArray(U.material)?ie=U.material:ie=[U.material],U.onBeforeRender=function(){U.userData.ta_viewID&&clearTimeout(U.userData.ta_viewID),U.userData.ta_viewID=setTimeout(function(){U.userData.ta_view=!1,ze.remoteQueue&&e.loop(U.userData.ta_content,function(ce){var j=ze.remoteQueue.indexOf(ce);j>=0&&ze.remoteQueue.splice(j,1)},!0)},100),U.userData.ta_view||(U.userData.ta_view=!0,e.loop(U.userData.ta_content,function(ce){ze.remoteQueue.indexOf(ce)<0&&ze.remoteQueue.push(ce)}))},U.userData.ta_content=[],e.loop(ie,function(ce){if(ce&&ce.map&&ce.map.source&&ce.map.source.data&&ce.map.source.data.content){var j=ce.map.source.data.content;U.userData.ta_content.push(j),j.mesh=U,U.textureActive=!0,ce.userData.ta_content=j,j.textureMaps||(j.textureMaps=[]);var G=j.textureMaps.indexOf(ce.map);G<0&&j.textureMaps.push(ce.map),(j.animated||j.interactive)&&(ze.remoteQueue||(ze.remoteQueue=[]))}})}return I},I.dispose=function(){I.raycast=!1,h&&(h.enableRotate=!0,h.enabled=!0),I.remove(I.actives),e.TAM.remove(I),e.TAM.count<1&&(e.TAM.dispose(),e.TAM=null),I.material=I.mesh=I.content=I.intersect=null}},e.extend(e.TextureActives,ze.EventDispatcher,"dispose"),e.TextureActivesManager=function(t,r,i){qe("35.6");var o=this;this.type="TextureActivesManager",o.color=e.darker,o.outerColor="black";var l=!1;o.toggleKey=r||"t",(n(i)||i===!0)&&(i=.2);var f=o.objects=new e.Dictionary(!0),h=t.frame,g=new e.Proportion({baseMin:1e3,baseMax:9e3,targetMin:-.1,targetMax:-.05,clamp:!1});o.backing=new e.Rectangle(100,100,e.faint).addTo(t,0);var _=[];o.updateTile=function(E,L,A){A||f.add(E,L);var b=[];if(_=[],e.loop(f,function(q,V){e.loop(V,function(I){b.push(I),I.loop(function(ne){(ne.type=="Scrambler"||ne.type=="List"||ne.type=="Window")&&_.push(ne)})})}),b.length<0){var F=o.message=new e.Rectangle(W,H,e.yellow);new e.Label("No TextureActives Added").center(F),b.push(F)}o.tile?(o.tile.cols=b.length,o.tile.remake(b)):o.tile=new e.Tile(b,b.length,1,20,0,!0).addTo(t),o.backing.scaleTo(o.tile,100,100,"full").siz(null,t.height,!0),o.swiper&&(o.swiper.sensitivity=e.constrain(g.convert(o.tile.width),-.1,-.01))},this.addPointer=function(E){var L=[];return e.loop(f,function(A){L.indexOf(A.renderer.domElement)<0&&L.push(A.renderer.domElement)}),L.indexOf(E)<0&&L.push(E.renderer.domElement),ze.remotePointers?ze.remotePointers=L:ze.addRemotePointers(t,L),!0},this.setActive=function(E,L){if(E.active=L,!L){var A=e.loop(f,function(b){if(b.active)return!1});A&&(t.mouseInBounds=!1)}};var P=!1,C=this.nav=new e.Panel({width:200,height:80,titleBar:"TextureActives",draggable:!0,close:!0}).pos(50,50,RIGHT,BOTTOM),T=this.slider=new e.Slider({min:0,max:100,damp:!0}).scaleTo(C,80);T.on("mousedown",function(){P=!0,o.swiper.enabled=!1,O()}),T.on("pressup",function(){o.swiper.immediate(T.currentValue),o.swiper.enabled=!0,S(),P=!1}),C.on("close",function(){o.hide(),C.addTo()});var N=0;this.ticker=e.Ticker.add(function(){o.tile.x=-T.currentValue*(o.tile.width-W)/100,l&&!P&&N!=0&&N!=100&&(T.currentValue==0||T.currentValue==100)&&S(),N=T.currentValue}),C.add(T,0,!0),C.removeFrom(),e.Ticker.remove(o.ticker);function O(){l||(l=!0,e.loop(_,function(E){E.enabled=!1}))}function S(){l&&(l=!1,e.loop(_,function(E){E.enabled=!0,E.update()}))}o.swiper=new e.Swiper({swipeOn:o.backing,target:T,property:"currentValue",sensitivity:o.tile?e.constrain(g.convert(tile.width),-.1,-.01):-.1,damp:i}),o.backing.on("mousedown",function(){N=-100,O()}),o.swiper.on("swipestop",S),o.toggled=!1;var k=h.color,x=h.outerColor;this.show=function(){if(!o.toggled)return h.color=o.color,h.outerColor=o.outerColor,o.toggled=!0,e.Ticker.add(o.ticker),C.addTo(),e.loop(f,function(E){E.lastRaycast=E.raycast,E.raycast=!1,E.renderer.domElement.style.display="none"}),ze.remoteQueue&&e.loop(o.tile.items,function(E){ze.remoteQueue.indexOf(E)<0&&ze.remoteQueue.push(E)}),h.canvas.style.display="block",ze.removeRemotePointers(t),this},this.hide=function(){if(o.toggled){h.color=k,h.outerColor=x,o.toggled=!1,e.Ticker.remove(o.ticker),C.removeFrom();var E=[];return e.loop(f,function(L){L.raycast=L.lastRaycast,L.renderer.domElement.style.display="block",E.push(L.renderer.domElement)}),ze.remoteQueue&&(ze.remoteQueue=[],e.loop(o.tile.items,function(L){L.mesh&&(L.mesh.userData.ta_view=!1)})),h.canvas.style.display="none",ze.addRemotePointers(t,E),this}},o.toggle=function(E){return n(E)&&(E=!o.toggled),E&&!o.toggled?o.show():!E&&o.toggled&&o.hide(),this},o.keyEvent=h.on("keydown",function(E){E.key==o.toggleKey&&(o.toggled?o.hide():o.show())}),o.remove=function(E){f.remove(E),o.updateTile(null,null,!0)},o.dispose=function(){o.hide(),C.dispose(),h.off("keydown",o.keyEvent),o.backing.removeAllEventListeners(),o.backing.dispose(),o.objects.dispose(),o.tile.dispose(),o.objects=o.tile=C=null}},e.extend(e.TextureActivesManager,ze.EventDispatcher),e.Manager=function(t){qe("75");var r=this;this.type=t,this.items=[],this.add=function(l){return Array.isArray(l)?r.items=r.items.concat(l):r.items.push(l),r};var i,o;this.remove=function(l){if(r){if(!l)r.items=[];else for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--){o=l[i];var f=r.items.indexOf(o);f!=-1&&r.items.splice(f,1)}return r}},this.resize=function(l){if(r){if(l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.resize();else for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].resize():r.items.splice(i,1);return r}},this.toggle=function(l,f){if(r){if(f)for(Array.isArray(f)||(f=[f]),h=f.length-1;h>=0;h--)o=f[h],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.toggle(l);else for(var h=r.items.length-1;h>=0;h--)r.items[h].resize?r.items[h].toggle(l):r.items.splice(h,1);return r}},this.dispose=function(l){if(r){if(r.resize=null,l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],r.items.indexOf(o)!=-1&&r.items.splice(r.items.indexOf(o)),o.dispose&&o.dispose();else{for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].dispose():r.items.splice(i,1);r.items=null}return!0}}},e.ResizeManager=function(){qe("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.TransformManager=function(t,r){qe("75.7");var i=this;this.type="TransformManager",this.persistID=r,this.items=[];function o(f){!localStorage||f&&!f.pressup||i.savePersist(f)}this.add=function(f){var h=[];Array.isArray(f)?h=f:h=[f];for(var g,_=!1,P=0;P<h.length;P++)if(g=h[P],g.transformControls&&(g.originalVisible=g.transformControls.visible),g.toggle&&g.toggle(!1),i.items.length==0&&P==0&&(_=!0),g.type=="Blob"||g.type=="Squiggle")i.persistID||_&&(_=!1,g.controlsVisible=!0,i.currentObject=g),g.on("change",function(T){var N=new ze.Event("transformed");N.transformObject=T.target,N.transformType=T.controlType,i.dispatchEvent(N)}),g.on("controlsshow",function(T){var N=new ze.Event("transformshow");i.currentObject=N.transformObject=T.target,i.dispatchEvent(N)}),g.on("controlshide",function(T){var N=new ze.Event("transformhide");N.transformObject=T.target,i.currentObject=null,i.dispatchEvent(N)}),g.on("update",function(T){var N=new ze.Event("transformed");N.transformObject=T.target,N.transformType=T.controlType,i.dispatchEvent(N)});else if(g.type=="Connectors")i.persistID||_&&(_=!1,i.currentObject=g),g.on("connection",function(T){var N=new ze.Event("transformed");N.transformObject=T.target,N.transformType="connection",i.dispatchEvent(N)});else if(g.type=="Pack")i.persistID||_&&(_=!1,i.currentObject=g),g.on("change",function(T){var N=new ze.Event("transformed");N.transformObject=T.target,N.transformType="change",i.dispatchEvent(N)});else{var C=g.transformControls;i.persistID||_&&g.type!="Layer"&&(_=!1,g.originalVisible&&(C.show(),i.currentObject=g)),g.on("transformed",function(T){var N=new ze.Event("transformed");N.transformObject=T.target,N.transformType=T.transformType,i.dispatchEvent(N)}),g.on("transformshow",function(T){var N=new ze.Event("transformshow");i.currentObject=N.transformObject=T.target,i.dispatchEvent(N)}),g.on("transformhide",function(T){var N=new ze.Event("transformhide");N.transformObject=T.target,i.currentObject=null,i.dispatchEvent(N)})}i.items=i.items.concat(f),i.persist&&!n(i.persistID)&&i.persist(i.persistID)},this.remove=function(f){if(n(f)){i.items=[];return}Array.isArray(f)||(f=[f]);for(var h,g=0;g<f.length;g++){h=f[g],i.currentObject==h&&(i.currentObject=null),h.transformedEvent&&(h.off("transformed",h.transformedEvent),h.transformedEvent=null),h.type=="Blob"||h.type=="Squiggle"?h.controlsVisible=!1:h.transformControls&&h.transformControls.remove();var _=i.items.indexOf(h);_!=-1&&i.items.splice(_,1)}r&&i.savePersist()},this.show=function(f){if(!n(f)){if(f.type=="Blob"||f.type=="Squiggle")f.controlsVisible||(f.controlsVisible=!0);else{var h=f.transformControls;if(!h||h.visible)return;h.show()}i.currentObject=f}},this.hide=function(f){if(!n(f))if(i.currentObject==f&&(i.currentObject=null),f.type=="Blob"||f.type=="Squiggle")f.controlsVisible&&(f.controlsVisible=!1);else{var h=f.transformControls;if(!h||h.visible)return;h.hide()}},this.hideAll=function(f){for(var h,g,_=0;_<i.items.length;_++)if(g=i.items[_],!g||!(g.transformControls||g.update))i.items.splice(_);else{if(i.items[_]==f)continue;g.type=="Blob"||g.type=="Squiggle"?g.controlsVisible&&(g.controlsVisible=!1):(h=i.items[_].transformControls,h.visible&&h.hide())}i.currentObject=null},this.resize=function(){if(i){for(var f,h=0;h<i.items.length;h++)f=i.items[h],!f||!(f.transformControls||f.update)?i.items.splice(h):f.type=="Blob"||f.type=="Squiggle"?f.update():f.transformControls.resize();r&&i.savePersist()}},n(t)||i.add(t);var l="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(f){var h,g;if(n(f)&&Et){ht(l);return}i.persistID=f;var _=0;if(localStorage&&localStorage[f]){var P=i.persistData=JSON.parse(localStorage[f]);if(P.length==i.items.length)for(g=0;g<i.items.length;g++)P[g].controls&&(i.currentObject=i.items[g]),P[g]&&(P[g].type=="Blob"||P[g].type=="Squiggle")?(i.items[g].points.length!=P[g].points.length&&(i.items[g].points=P[g].points),i.items[g].setData(P[g]),i.items[g]==i.currentObject&&i.currentObject.toggle(!0),_++,_==P.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):P[g]&&P[g].type=="Connectors"?(i.items[g].setSteps(P[g].steps),i.items[g].loc(P[g].x,P[g].y),i.items[g].sca(P[g].scale),_++,_==P.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):P[g]&&P[g].type=="Pack"?(i.items[g].setOrder(P[g].order),i.items[g].outerWidth=P[g].outerWidth,i.items[g].outerHeight=P[g].outerHeight,_++,_==P.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):P[g]&&(n(i.items[g].transformControls)?-function(){var C=h=i.items[g],T=P[g];e.interval(50,function(N){C.transformControls&&(C.transformControls.setData(T),C.dispatchEvent("persistset"),_++,_==P.length&&(setTimeout(function(){C==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),N.clear()))},20,null,null,"ms")}():(i.items[g].transformControls.setData(P[g]),-function(){var C=h=i.items[g];e.interval(50,function(T){C.dispatchEvent("persistset"),_++,_==P.length&&(setTimeout(function(){C==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),T.clear())},20,null,null,"ms")}()))}for(g=0;g<i.items.length;g++)h=i.items[g],h.transformedEvent||(h.type=="Blob"||h.type=="Squiggle"?(h.transformedEvent=h.on("change",function(C){C.pressup=!0,o(C)}),h.transformedUEvent=h.on("update",function(C){C.pressup=!0,o(C)}),h.transformedSEvent=h.on("controlsshow",function(C){C.pressup=!0,o(C)}),h.transformedHEvent=h.on("controlshide",function(C){C.pressup=!0,o(C)})):h.type=="Connectors"?h.transformedEvent=h.on("connection",function(C){C.pressup=!0,o(C)}):h.type=="Pack"?h.transformedEvent=h.on("change",function(C){C.pressup=!0,o(C)}):(h.transformedEvent=h.on("transformed",o),h.transformedSEvent=h.on("transformshow",o),h.transformedHEvent=h.on("transformhide",o)))},this.savePersist=function(){for(var f=[],h=0;h<i.items.length;h++){var g=i.items[h];g.type=="Blob"||g.type=="Squiggle"?g.recordData&&f.push(g.recordData()):g.type=="Connectors"?f.push({type:g.type,x:g.x,y:g.y,scale:g.scale,steps:g.getSteps()}):g.type=="Pack"?f.push({type:g.type,outerWidth:g.outerWidth,outerHeight:g.outerHeight,order:g.getOrder()}):g.transformControls&&g.transformControls.recordData&&f.push(g.transformControls.recordData())}i.persistData=f,localStorage[i.persistID]=JSON.stringify(f)},this.clearPersist=function(f){if(n(f)&&Et){ht(l);return}i.persistData=null,localStorage&&localStorage.removeItem(f)},this.stopPersist=function(){for(var f=0;f<i.items.length;f++){var h=i.items[f];h.transformedEvent&&(h.type=="Blob"||h.type=="Squiggle"?(h.off("change",h.transformedEvent),h.off("update",h.transformedUEvent),h.off("controlsshow",h.transformedSEvent),h.off("controlshide",h.transformedHEvent)):h.type=="Connectors"?h.off("connection",h.transformedEvent):h.type=="Pack"?h.off("change",h.transformedEvent):(h.off("transformed",h.transformedEvent),h.off("transformshow",h.transformedSEvent),h.off("transformhide",h.transformedHEvent)),h.transformedEvent=null,h.transformedUEvent=null,h.transformedSEvent=null,h.transformedHEvent=null)}i.persistData=null},n(r)||i.persist(r),this.dispose=function(f,h){if(n(f)&&(f=!0),i.removeAllEventListeners(),i.persistID&&f&&i.stopPersist(),h)for(var g=0;g<i.items.length;g++){var _=i.items[g];_.type=="Blob"||_.type=="Squiggle"?_.dispose():_.transformControls.dispose()}}},e.extend(e.TransformManager,ze.EventDispatcher,null,"cjsEventDispatcher",!1),e.GuideManager=function(){qe("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.GridManager=function(){qe("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.LayoutManager=function(){qe("81"),e.Manager.call(this,"LayoutManager")},e.LayoutManager.prototype=new e.Manager,e.LayoutManager.prototype.constructor=e.LayoutManager,e.SelectionSet=function(t){qe("81.5"),this.type="SelectionSet",n(t)&&(t=[]),this.selections=t,this.clear=function(){this.selections=[]},this.isSelected=function(r){return this.selections.indexOf(r)>=0},this.add=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear();var f=this.selections.indexOf(r);if(!(f>=0)){if(this.selections.push(r),!n(o)){Array.isArray(o)||(o=[o]);for(var h=0;h<=o.length;h++)o[h].add(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),h=0;h<=l.length;h++)l[h].remove(r,i)}}},this.remove=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||this.selectionManager.setCurrent(this),i||this.clear();var f=this.selections.indexOf(r);if(n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear(),i?f>=0&&this.selections.splice(f,1):this.clear(),!n(o)){Array.isArray(o)||(o=[o]);for(var h=0;h<=o.length;h++)o[h].remove(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),h=0;h<=l.length;h++)l[h].add(r,i)}},this.toggle=function(r,i,o,l){this.isSelected(r)?this.remove(r,i,o,l):this.add(r,i,o,l)},this.dispose=function(){return this.clear(),this.selections=null,!0}},e.SelectionManager=function(t,r,i){qe("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",n(t)&&(t=[]),n(i)&&(i=!0),Array.isArray(t)||(t=[t]),this.sets=t,this.multipleKey=r,this.multipleSets=i,this.multiple=!1;for(var o=this,l=0;l<t.length;l++)t[l].selectionManager=this;this.clear=function(){this.currentSet=null;for(var h=0;h<t.length;h++)t[h].clear()},this.setCurrent=function(h){this.currentSet=h;for(var g=0;g<t.length;g++)t[g]!=h&&(this.multipleSets||t[g].clear())};var f=new ze.Event("keydown");this.eventRemove=f.remove,this.keydownEvent=function(h){h.remove=o.eventRemove,o.multipleKey&&(o.multiple=h[o.multipleKey+"Key"]),o.ctrlKey=h.ctrlKey,o.shiftKey=h.shiftKey,o.metaKey=h.metaKey,o.dispatchEvent(h),h.keyCode==90&&(o.ctrlKey||o.metaKey)&&o.dispatchEvent("undo")},le.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(h){o.multipleKey&&(o.multiple=h[o.multipleKey+"Key"]),o.ctrlKey=h.ctrlKey,o.shiftKey=h.shiftKey,o.metaKey=h.metaKey,h.remove=o.eventRemove,o.dispatchEvent(h)},le.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),le.removeEventListener("keydown",this.keydownEvent),le.removeEventListener("keyup",this.keyupEvent)}},e.extend(e.SelectionManager,ze.EventDispatcher,null,"cjsEventDispatcher",!1),typeof m>"u")var m;e.Bind=function(t,r,i,o,l,f,h,g){var _="connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",P;if(P=mt(e.Bind,arguments,_,this))return P;qe("81.8"),this.type="Bind";var C=this;n(t)&&localStorage&&n(m)&&(n(r)||r==e.LOCALSTORAGE)?(t="zimBind",r=e.LOCALSTORAGE):t&&t.match(/\/|\./)?(n(r)&&(r=e.GET),t.match(/\?/)?t+="&":t+="?"):t&&n(r)&&(r=e.LOCALSTORAGE),n(f)&&(f=!0),r==e.LOCALSTORAGE&&!localStorage&&(Et&&ht("Bind() - no localStorage"),C.error="error - no localStorage"),this.connection=t,this.bindType=r,this.master=i,this.masterFilter=o,this.smartDecimals=f,n(h)&&(h=!1),(!m||g)&&(m=this),Object.defineProperty(C,"default",{get:function(){return C==m},set:function(x){!x&&m==C?m=null:x&&(m=C)}}),this.bindType==e.POST&&(C.ajax=new e.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(x,E,L,A,b){if(n(L)||n(E)||n(x))return C;if(C.bindings[x]){if(C.bindings[x].obj!=E)return Et&&ht("Bind() - id can be used with only one object"),C}else{C.ids.indexOf(x)<=0&&C.ids.push(x),C.bindings[x]={obj:E,props:[]},!n(b)&&typeof b=="function"&&(C.bindings[x].filter=b);var F=C.objIDs.at(E);F?F.indexOf(x)<0&&F.push(x):C.objIDs.add(E,[x])}!Array.isArray(L)&&L.constructor!={}.constructor&&(L=[L]);var q=C.bindings[x].props;Array.isArray(L)?e.loop(L,function(I){V(C.toIDs,I,x),V(C.fromIDs,I,x),q.indexOf(I)<0&&q.push(I)}):e.loop(L,function(I,ne){(ne==e.BOTH||ne==e.TO)&&V(C.toIDs,I,x),(ne==e.BOTH||ne==e.FROM)&&V(C.fromIDs,I,x),q.indexOf(I)<0&&q.push(I)});function V(I,ne,R){n(I[ne])?I[ne]=[R]:I[ne].indexOf(R)<0&&I[ne].push(R)}return h&&k("Bind Report: ADD ["+x+"]",(L?" "+L:"")+(A?" "+A:"")),C.bindType==e.LOCALSTORAGE?(C.from(null,x,L,A),(!C.data||e.isEmpty(C.data))&&C.to(x,L)):(O("bind",null,[b],C.data,A),C.applyData()),C},this.updatefilter=function(x,E){var L=C.bindings[x];return L&&(n(E)?L.filter&&delete L.filter:typeof E=="function"&&(L.filter=E)),C},this.remove=function(x,E,L,A,b,F){var q;if(!n(x)&&!Array.isArray(x)&&(x=[x]),!n(x)){q=[];var V=[];e.loop(x,function(ce){typeof ce=="string"?q.push(ce):V.push(ce)})}!n(E)&&!Array.isArray(E)&&(E=[E]),n(b)&&(b=!0),x=q.concat(V),x.length==0&&(x=null);var I=T("from",x,E,!1),ne=I[0];I=I[1];var R=O("remove",A,ne,I,L);if(R=="stop")return;var Q=e.copy(I);n(E)||E.length==0?(q.length>0&&e.loop(q,function(ce){ie(ce,!0)}),V.length>0&&e.loop(V,function(ce){q=C.objIDs.at(ce),q.length>0&&e.loop(q,function(j){ie(j,!1)}),C.objIDs.remove(ce)})):(q=[],e.loop(I,function(ce,j){var G=C.bindings[ce],y=G.props;e.loop(j,function(p){var d=y.indexOf(p);d>=0&&y.splice(d,1),ae(p,ce)}),y.length==0&&q.push(ce)}),q.length>0&&C.remove(q));function U(ce){F&&typeof F=="function"&&(l&&(ce=e.couple(ce)),F(ce)),h&&k("Bind Report: REMOVE"+(L?" ["+L+"]":""),ce)}if(b){var ee="type="+C.bindType+"&";C.bindType==e.LOCALSTORAGE?(C.to(),U("success")):C.bindType==e.GET?(R=JSON.stringify(Q),l&&(R=e.couple(R)),e.async(C.connection+ee+"remove="+R,U,"callbackRemove")):C.bindType==e.POST?C.ajax.post(C.connection+ee,Q,U,"remove"):C.bindType==e.SOCKET}function ae(ce,j){var G,y;G=C.fromIDs[ce],G&&(y=G.indexOf(j),y>=0&&G.splice(y,1),G.length==0&&delete C.fromIDs[ce]),G=C.toIDs[ce],G&&(y=G.indexOf(j),y>=0&&G.splice(y,1),G.length==0&&delete C.toIDs[ce])}function ie(ce,j){var G=C.bindings[ce].obj,y=C.bindings[ce].props,p=C.objIDs.at(G),d=p.indexOf(ce);d>=0&&p.splice(d,1),j&&p.length==0&&V.push(G),d=C.ids.indexOf(ce),d>=0&&C.ids.splice(d,1),e.loop(y,function(D){ae(D,ce)}),delete C.bindings[ce]}return C};function T(x,E,L){var A=[],b;if(n(E)&&n(L)){if(x=="from"&&C.bindType!=e.LOCALSTORAGE)return e.loop(C.bindings,function(I){I.filter&&A.push(I.filter)}),[A,"full"];b=C.ids}else!n(E)&&!Array.isArray(E)&&(E=[E]),!n(L)&&!Array.isArray(L)&&(L=[L]),E&&(b=[],e.loop(E,function(I){if(typeof I=="string")b.indexOf(I)<0&&b.push(I);else{var ne=C.objIDs.at(I);ne&&e.loop(ne,function(R){b.indexOf(R)<0&&b.push(R)})}}));var F={};return b?q(L):L&&V(),[A,F];function q(I){e.loop(b,function(ne){var R=C.bindings[ne];if(R){R.filter&&A.push(R.filter);var Q=R.obj;e.loop(I||R.props,function(U){var ee=C.toIDs[U];if(ee&&ee.indexOf(ne)>=0)if(x=="from")F[ne]||(F[ne]=[]),F[ne].push(U);else{F[ne]||(F[ne]={});var ae=Q[U];typeof ae=="number"&&C.smartDecimals&&(ae>1?ae=e.decimals(ae,1):ae=e.decimals(ae,2)),F[ne][U]=e.copy(ae)}})}})}function V(){var I=[];e.loop(L,function(ne){e.loop(C.toIDs[ne],function(R){var Q=C.bindings[R];I.indexOf(R)<0&&(Q.filter&&A.push(Q.filter),I.push(R));var U=Q.obj;if(x=="from")F[R]||(F[R]=[]),F[R].push(ne);else{F[R]||(F[R]={});var ee=U[ne];typeof ee=="number"&&C.smartDecimals&&(ee>1?ee=e.decimals(ee,1):ee=e.decimals(ee,2)),F[R][ne]=e.copy(ee)}})})}}this.stopProcess=!1,this.stop=function(){C.stopped=!0};var N=function(){var x=this;x.stop=function(){x.stopped=!0}};function O(x,E,L,A,b){var F=new N,q=A!=null&&!e.isEmpty(A)&&C.data;if(S(F,b))return["stop",A];C.masterFilter&&typeof C.masterFilter=="function"&&(A=C.data=C.masterFilter(A,x,b,F));var V=e.loop(L,function(I){if(typeof I=="function"){if(S(F,b))return"stop";A=C.data=I(A,x,b,F)}});return V=="stop"||S(F,b)?["stop",A]:(E&&typeof E=="function"&&(A=C.data=E(A,x,b,F)),S(F,b)?["stop",A]:(q&&!C.data&&Et&&ht("Bind()"+(x?" ["+x+"]":"")+(b?" ["+b+"]":"")+" - warning, a filter may not have returned data"),["go",A]))}function S(x,E){if(C.stopped||x.stopped)return k("STOP"+(E?" ["+E+"]":""),x.stopped?"process stopped":"bind stopped"),x.stopped?x.stop=null:C.stopped=!1,!0}this.to=function(x,E,L,A,b,F,q,V){var I="targets, props, extra, filter, smartDecimals, call, lock, unique",ne;if(ne=mt(C.to,arguments,I))return ne;var R=T("to",x,E,b),Q=R[0];R=R[1];var U=O("to",A,Q,R,L);if(R=U[1],U[0]=="stop")return;if(C.bindType==e.LOCALSTORAGE)localStorage[C.connection]=JSON.stringify(R),p(R);else{var ee="type="+C.bindType+"&";if(!R||e.isEmpty(R))return C;if(C.bindType==e.GET){var ae=R;e.isJSON(ae)||(ae=JSON.stringify(ae)),l&&(ae=e.couple(ae)),h&&k("Bind Report: TO [bindings]",ae),ae=e.urlEncode(ae);var ie=n(C.master)?"":"&master="+e.urlEncode(i),ce=n(q)?"":"&lock="+e.urlEncode(q),j=n(V)?"":"&unique="+e.urlEncode(V),G=n(L)?"":"&extra="+e.urlEncode(L),y=C.connection+ee+"command=to&data="+ae+ie+ce+j+G;h&&k("Bind Report: TO [url]",y),e.async(y,p,"callbackTo")}else C.bindType==e.POST&&(C.ajax.master=i,C.ajax.couple=l,C.ajax.lock=q,C.ajax.unique=V,h&&k("Bind Report: TO [bindings]",R),C.ajax.post(C.connection+ee,R,"to",L,p))}function p(d){l&&(d=e.decouple(d)),F&&typeof F=="function"&&F(d),h&&k("Bind Report: TO"+(L?" ["+L+"]":" -"),d)}return C},this.toLock=function(x,E,L,A,b,F){var q="targets, props, extra, filter, smartDecimals, call",V;if(V=mt(C.toLock,arguments,q))return V;if(C.bindType.toLowerCase()=="localstorage")return C.to(x,E,L,A,b,F),C;var I=e.makeID();C.from(ne,x,E,L,A,I);function ne(){C.to(x,E,L,A,b,F,I)}return C},this.toUnique=function(x,E,L,A,b,F){var q="targets, props, extra, filter, smartDecimals, call",V;return(V=mt(C.toUnique,arguments,q))?V:(C.to(x,E,L,A,b,F,null,!0),C)},this.toggleReport=function(x){return n(x)?h=!h:h=x,C},h&&k("Bind Report: CREATE ["+r.toUpperCase()+"]",t+(i?" "+i:""));function k(x,E){C==m?Sr(x,E):Ir(x,E)}return this.report=function(){var x="Bind {DATA} Report:",E=e.copy(C.data);return C==m?Sr(x,E):Ir(x,E),x="Bind {BINDINGS} Report:",E=e.copy(C.bindings),C==m?Sr(x,E):Ir(x,E),C},this.from=function(x,E,L,A,b,F){var q="call, targets, props, extra, filter, lock",V;if(V=mt(C.from,arguments,q))return V;var I=T("from",E,L,f),ne=I[0];I=I[1];var R=O("fromTo",b,ne,I,A);if(I=R[1],R[0]=="stop")return;var Q="type="+C.bindType+"&";if(C.bindType==e.LOCALSTORAGE)(!localStorage[C.connection]||localStorage[C.connection]==null)&&(localStorage[C.connection]="{}"),C.data=JSON.parse(localStorage[C.connection]),j(C.data);else if(C.bindType==e.GET){var U=I;e.isJSON(U)||(U=JSON.stringify(U)),l&&(U=e.couple(U)),h&&k("Bind Report: FROM [bindings]",U),U=e.urlEncode(U);var ee=n(C.master)?"":"&master="+e.urlEncode(i),ae=n(F)?"":"&lock="+e.urlEncode(F),ie=n(A)?"":"&extra="+e.urlEncode(A),ce=C.connection+Q+"data="+U+"&command=from"+ee+ae+ie;h&&k("Bind Report: FROM [url]",ce),e.async(ce,j,"callbackFrom")}else C.bindType==e.POST&&(C.ajax.master=i,C.ajax.couple=l,C.ajax.lock=F,h&&k("Bind Report: FROM [bindings]",I),C.ajax.post(C.connection+Q,I,"from",A,j));function j(G){if(C.data=G,l&&(C.data=e.decouple(C.data)),!n(F))var y=JSON.stringify(C.data);var p=O("from",b,ne,C.data,A);if(p[0]!="stop"){var d=!1;(n(F)||y!=JSON.stringify(C.data))&&(d=!0,C.applyData()),h&&k("Bind Report: FROM"+(A?" ["+A+"]":" -"),d?C.data:"data not applied in toLock()"),x&&typeof x=="function"&&x(C.data)}}return C},this.applyData=function(){return e.loop(C.data,function(x,E){var L=C.bindings[x];if(L){var A=C.bindings[x].obj;e.loop(E,function(b,F){A[b]=F})}}),C},this.clear=function(){return C.bindType==e.LOCALSTORAGE&&(localStorage[C.connection]=null),C},this.removeAllBindings=function(x,E){if(n(x)&&(x=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},x){var L="type="+C.bindType+"&";if(C.bindType==e.LOCALSTORAGE)C.clear(),b("success");else if(C.bindType==e.GET){var A=n(C.master)?"":"&master="+encodeURI(i);e.async(C.connection+L+"command=removeAll"+A,b,"callbackRemoveAll")}else C.bindType==e.POST&&(C.ajax.master=i,C.ajax.post(C.connection+L,{},"removeAll",null,b,"removeAll"))}function b(F){E&&typeof E=="function"&&E(F),h&&k("Bind Report: REMOVEALL",F)}return C},C},e.Swipe=function(t,r,i,o,l){var f="obj, distance, duration, isometric, overrideNoSwipe",h;if(h=mt(e.Swipe,arguments,f,this))return h;if(qe("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",n(t)||!t.on){ht("zim controls - Swipe():\nPlease pass in object");return}n(r)&&(r=30);var g=v(i);n(i)&&(i=g=="s"?.08:80),this.distance=r,this.duration=i,this.active=!0;var _,P,C,T,N,O,S=this,k,x,E=t.on("mousedown",function(L){if(!S.active||!l&&L.target.zimNoSwipe)return;S.obj=L.target,T=_=L.stageX/e.scaX,N=P=L.stageY/e.scaY,C=!0,S.dispatchEvent("swipedown"),clearTimeout(O),O=setTimeout(function(){C&&(A(),C=!1)},S.duration*(g=="s"?1e3:1)),k=t.on("pressmove",function(b){T=b.stageX/e.scaX,N=b.stageY/e.scaY}),x=t.on("pressup",function(){C&&(A(),C=!1,clearTimeout(O))});function A(){var b=new ze.Event("swipe");if(b.obj=S.obj,b.stageX=L.stageX/e.scaX,b.stageY=L.stageY/e.scaY,b.rawX=L.rawX/e.scaX,b.rawY=L.rawY/e.scaY,b.swipeX=b.swipeY=0,S.direction="none",o){if(Math.abs(T-_)>S.distance||Math.abs(N-P)>S.distance){var F=Math.atan2(N-P,T-_)*180/Math.PI;F=(F+360)%360,F>=270&&F<360?(b.swipeY=-1,S.direction="up"):F>=0&&F<90?(b.swipeX=1,S.direction="right"):F>=90&&F<180?(b.swipeY=1,S.direction="down"):F>=180&&F<270&&(b.swipeX=-1,S.direction="left")}}else Math.abs(T-_)>Math.abs(N-P)?(T-_>S.distance&&(b.swipeX=1,S.direction="right"),_-T>S.distance&&(b.swipeX=-1,S.direction="left")):(N-P>S.distance&&(b.swipeY=1,S.direction="down"),P-N>S.distance&&(b.swipeY=-1,S.direction="up"));S.dispatchEvent(b)}});this.disable=function(){S.active=!1},this.enable=function(){S.active=!0},this.dispose=function(){E&&t.off("mousedown",E),k&&t.off("pressmove",k),x&&t.off("pressup",x)}},e.extend(e.Swipe,ze.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swiper=function(t,r,i,o,l,f,h,g,_,P,C,T,N){var O="swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",S;if(S=mt(e.Swiper,arguments,O,this))return S;if(qe("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",n(t)||!t.getStage||!t.stage){ht("zim.Swiper() - please provide container on stage");return}if(n(r))return;n(o)&&(o=1),n(l)&&(l="horizontal"),n(g)&&(g=.1),g===!1&&(g=1),n(_)&&(_=!1),n(P)&&(P=1),n(C)&&(C=!1);var k=v(T);n(T)&&(T=k=="s"?.2:200);var x=this,E=t,L,A,b=x.desiredValue=r[i],F;this.target=r,this.property=i,this.sensitivity=o;var q=!1,V=le.zdf||t.stage?t.stage.frame:{};E.canvas?(F=E,x.downEvent=E.on("stagemousedown",function(X){q=!0,j(X),x.moveEvent=E.on("stagemousemove",G),x.upEvent=E.on("stagemouseup",I),x.upEvent2=V.on("mouseupplus",I)})):(F=E.stage,w(),x.downEvent=E.on("mousedown",j),x.moveEvent=E.on("pressmove",G),x.upEvent=E.on("pressup",ne),x.upEvent2=V.on("mouseupplus",ne));function I(){q=!1,E.off("stagemousemove",x.moveEvent),E.off("stagemouseup",x.upEvent),x.dispatchEvent("swipeup")}function ne(){q=!1,x.dispatchEvent("swipeup")}var R,Q,U,ee=Math.sqrt(Math.pow(E.width,2)+Math.pow(E.height,2)),ae,ie,ce=!1;function j(X){ce=!0,F=X.target.stage,U=(E.parent?E.parent:E).localToGlobal(E.x,E.y),q=!0,l=="radial"?(ae=X.stageX/e.scaX,ie=X.stageY/e.scaY,R=Math.atan2(ie-U.y,ae-U.x)*e.DEG):L=l=="horizontal"?X.stageX/e.scaX:X.stageY/e.scaY,A=x.target[x.property],x.dispatchEvent("swipedown")}function G(X){if(q){if(l=="radial"){x.diff=e.dist(ae,ie,X.stageX/e.scaX,X.stageY/e.scaY),Q=Math.atan2(X.stageY/e.scaY-U.y,X.stageX/e.scaX-U.x)*e.DEG;var Z=e.sign(R-Q);if(Math.abs(Q-R)>180){q=!1;return}x.diff=x.diff*Z;var pe=Math.max(10,e.dist(U.x,U.y,X.stageX/e.scaX,X.stageY/e.scaY));x.diff*=(ee-pe)/ee}else x.diff=L-(l=="horizontal"?X.stageX/e.scaX:X.stageY/e.scaY);if(N&&(Math.abs(x.diff)<Math.abs(N.diff)?(x.override=!0,N.override=!1):(x.override=!1,N.override=!0)),!x.override){if(Math.abs(x.diff)>0&&(x.swiperMoving=!0),b=A-x.diff*x.sensitivity*P,!n(f)&&!n(h)&&C){var ve=b;b=(b+(h-f)*1e4-f)%(h-f)+f,Math.abs(ve-b)>Math.abs(h-f)*.8&&(x.immediate(b),L=l=="horizontal"?X.stageX/e.scaX:X.stageY/e.scaY,A=x.target[x.property])}else n(f)||(b=Math.max(b,f)),n(h)||(b=Math.min(b,h));x.desiredValue=b,x.dispatchEvent("swipemove")}}}var y=new e.Damp(x.target[x.property],g),p=b,d=b;x.swiperTicker=e.Ticker.add(function(){b==p?b!=d&&(x.pauseTimeout&&x.pauseTimeout.clear(),d=b,x.pauseTimeout=e.timeout(T,function(){q&&x.dispatchEvent("swipepause"),x.pauseTimeout=null})):(d=null,p=b,x.pauseTimeout&&x.pauseTimeout.clear()),x.swiperMoving&&(x.target[x.property]=_?Math.round(y.convert(b)):y.convert(b),ce&&!q&&Math.abs(x.target[x.property]-b)<Math.abs(o)/2&&(x.swiperMoving=!1,ce=!1,x.target[x.property]=b,x.immediate(x.target[x.property]),x.dispatchEvent("swipestop")))},F),this.immediate=function(X){y.immediate(X),x.target[x.property]=_?Math.round(X):X,x.desiredValue=b=X};var D=!0;Object.defineProperty(x,"enabled",{get:function(){return D},set:function(X){D!=X&&(X?Ee():Y(),D=!!X)}}),Object.defineProperty(x,"desiredValue",{get:function(){return b},set:function(X){x.swiperMoving=!0,b=X}}),Object.defineProperty(x,"damp",{get:function(){return g},set:function(X){g=X,y.damp=g}});function K(){E.off("stagemousedown",x.downEvent),E.off("stagemousemove",x.moveEvent),E.off("stagemouseup",x.upEvent),V.off("mouseupplus",x.upEvent2)}function w(){E.off("mousedown",x.downEvent),E.off("pressmove",x.moveEvent),E.off("pressup",x.upEvent),V.off("mouseupplus",x.upEvent2)}function Y(){E.canvas?K():w(),e.Ticker.remove(x.swiperTicker)}function Ee(){E.canvas?x.downEvent=E.on("stagemousedown",x.downEvent):(x.downEvent=E.on("mousedown",x.downEvent),x.moveEvent=E.on("pressmove",x.moveEvent),x.upEvent=E.on("pressup",x.upEvent),x.upEvent2=V.on("mouseupplus",x.upEvent2)),x.immediate(x.target[x.property]),x.swiperTicker=e.Ticker.add(x.swiperTicker,F)}this.dispose=function(){Y(),y=null,x.swiperTicker=null}},e.extend(e.Swiper,ze.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V){var I="target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBoundary, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate, mouseOutside",ne;if(ne=mt(e.MotionController,arguments,I,this))return ne;qe("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var R=this,Q,U="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(n(k))if(le.zdf)Q=k=le.zdf.stage;else{ht(U);return}else if(n(k.stage))if(le.zdf)Q=le.zdf.stage;else{ht(U);return}else Q=k.stage;var ee=Q.frame;n(P)||(q=P),n(t)&&(t=new e.Container(1,1,null,null,!1));var ae=t.type=="Accelerator";if(n(i)&&(i=r=="pressmove"?20:7),!n(r)&&r.type=="DPad"){var ie=r;r="manual",n(o)&&(o=ie.axis),o=="all"&&(o="both"),ie.on("change",function(){R.convert(t.x+ie.dirX*i,t.y+ie.dirY*i)})}(n(r)||r!="mousemove"&&r!="pressmove"&&r!="pressdrag"&&r!="keydown"&&r!="gamebutton"&&r!="gamestick"&&r!="swipe"&&r!="follow"&&r!="manual")&&(r="mousedown"),n(o)&&(o=ae?"horizontal":"both"),r=="keydown"&&n(f)&&(f=[[65,37],[68,39],[87,38],[83,40]]),r=="gamebutton"&&n(f)&&(T?f=[14,15,e.GamePad.RT,e.GamePad.LT]:f=[14,15,12,13]),r=="gamestick"&&n(f)&&(T?f=[[0,2],[0,2],[1],[1]]:f=[0,0,1,1]),r=="gamestick"&&n(f)&&(f=[0,0,1,1]),n(h)&&(h=!0),(o=="horizontal"||o=="vertical")&&(h=!1),(n(g)||g===!0)&&(g=r=="keydown"||r=="gamebutton"?1:r=="pressmove"?.5:.1),g===!1&&(g=1),n(T)&&(T=!1),n(N)&&(N=i*.4),n(O)&&(O=4),n(S)&&(S=.2),n(E)&&(E=!0),Q.mouseMoveOutside=E,n(L)&&(L=[]),Array.isArray(L)||(L=[L]),t.type=="Pen"&&!t.move?L.push(t,t.paper):L.push(t),l&&l.getBounds&&(L?L.indexOf(l)==-1&&L.push(l):L=[l]),t.motionController=this,this.mousedownIncludes=L,k&&k.backing&&this.mousedownIncludes.push(k.backing),n(F)&&(F=.3),R.dampKeyup=F,this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=N,this.axis=o,this.target=t,this.moveThreshold=O,this.stickThreshold=S,this.boundary=l,t.zimMCStartAngle=t.rotation;var ce=R.speed,j=R.speed,G=0;R.rotation=t.zimMCStartAngle;var y,p;if(ae){p=k.getBounds();var d;!p||o=="vertical"&&!p.height||o!="vertical"&&!p.width?d=1e3:d=o=="vertical"?p.height:p.width,n(A)&&(A=0),n(b)&&(b=100),n(this.target.percentSpeed)&&(this.target.percentSpeed=(b-A)/2),R.x=d/2,R.y=d/2,y=new e.Proportion(0,d,A,b)}else R.x=this.target.x,R.y=this.target.y;var D=R.scaleX=t.scaleX,K=R.scaleY=t.scaleY,w,Y,Ee,X,Z=!1,pe=!1,ve,$,ue,xe,Ye;if(r=="keydown"||r=="gamebutton"){for($=0;$<4;$++)Array.isArray(f[$])||(f[$]=[f[$]]);var se=[0,0,0,0],be=[],te=["X","X","Y","Y"],_e=[-1,1,-1,1],J={dirX:0,dirY:0};if(r=="keydown")var ye=ee.on("keydown",Ne);else{xe=R.gamepad=new e.GamePad;var Re=xe.on("buttondown",Ne)}if(n(C))if(r=="keydown")var de=ee.on("keyup",ge);else var Me=xe.on("buttonup",ge);Ye={rotation:0,speedX:R.speed,speedY:R.speed};var Be=e.Ticker.add(function(){if(T){He(J);return}var tt=R.speed,Te=R.speed;if(R.axis=="both"&&J.dirX!=0&&J.dirY!=0){var et=Xe(J.dirX,J.dirY);tt=et.speedX,Te=et.speedY}(R.axis=="horizontal"||R.axis=="both")&&(R.x+=tt*J.dirX),(R.axis=="vertical"||R.axis=="both")&&(R.y+=Te*J.dirY),Oe()},Q)}else if(r=="mousedown"||r=="mousemove")w=Q.on("stage"+r,function(tt){Q=tt.target.stage;var Te,et;if(!V&&R.boundary&&!R.boundary.type=="Blob"?et=R.boundary:!V&&k&&k.boundsToGlobal&&(et=k.boundsToGlobal()),!(et&&(Te={x:tt.stageX/e.scaX,y:tt.stageY/e.scaY},Te.x<et.x||Te.x>et.x+et.width||Te.y<et.y||Te.y>et.y+et.height))){if(r=="mousedown"){if(Array.isArray(R.mousedownIncludes)||(R.mousedownIncludes=[R.mousedownIncludes]),R.mousedownIncludes.indexOf(k)<0)for($=0;$<k.numChildren;$++){var Ve=k.getChildAt($);if(R.mousedownIncludes.indexOf(Ve)==-1&&Ve.mouseEnabled&&Ve.hitTestPoint&&Ve.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY))return}R.dispatchEvent("mousedown")}var Le=k.globalToLocal(E?tt.rawX/e.scaX:tt.stageX/e.scaX,E?tt.rawY/e.scaY:tt.stageY/e.scaY);R.x=Le.x,R.y=Le.y,Oe()}});else if(r=="pressmove"||r=="pressdrag"||r=="follow")t.type=="Pen"&&(t.write=!1),w=Q.on("stagemousedown",function(tt){var Te,et;if(!V&&R.boundary&&!R.boundary.type=="Blob"?et=R.boundary:!V&&k&&k.boundsToGlobal&&(et=k.boundsToGlobal()),!(et&&(Te={x:tt.stageX/e.scaX,y:tt.stageY/e.scaY},Te.x<et.x||Te.x>et.x+et.width||Te.y<et.y||Te.y>et.y+et.height))&&!(R.boundary&&R.boundary.type=="Blob"&&(r=="pressmove"||r=="pressdrag")&&(Te={x:tt.stageX/e.scaX,y:tt.stageY/e.scaY},!R.boundary.shape.hitTestPoint(Te.x,Te.y)))&&!(r=="pressdrag"&&!t.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY))){pe=!1,Array.isArray(R.mousedownIncludes)||(R.mousedownIncludes=[R.mousedownIncludes]);var Ve=!1;for(R.mouseDownIncludes&&(ve=Q.getObjectUnderPoint(tt.stageX,tt.stageY,1)),$=0;$<R.mousedownIncludes.length;$++)ve&&R.mousedownIncludes[$].hitTestPoint&&R.mousedownIncludes[$].hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY)&&R.mousedownIncludes[$].contains(ve)&&(Ve=!0);if(!Ve)for($=0;$<k.numChildren;$++){var Le=k.getChildAt($);if(R.mousedownIncludes.indexOf(Le)==-1&&Le.mouseEnabled&&Le.hitTestPoint&&Le.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY))return}var Qe=k.globalToLocal(E?tt.rawX/e.scaX:tt.stageX/e.scaX,E?tt.rawY/e.scaY:tt.stageY/e.scaY);r!="follow"&&r!="pressdrag"&&R.immediate(o=="both"||o=="horizontal"?Qe.x:null,o=="both"||o=="vertical"?Qe.y:null),Oe(),R.dispatchEvent("mousedown"),Z=!0,R.moveX=E?tt.rawX/e.scaX:tt.stageX/e.scaX,R.moveY=E?tt.rawY/e.scaY:tt.stageY/e.scaY,Y=Q.on("stagemousemove",function($e){R.moveX=E?$e.rawX/e.scaX:$e.stageX/e.scaX,R.moveY=E?$e.rawY/e.scaY:$e.stageY/e.scaY,r!="follow"&&Ue()}),X&&e.Ticker.remove(X),r=="follow"&&(X=e.Ticker.add(Ue)),t.type=="Pen"&&(t.write=!0,t.paper.noMouse(),t.zimDragCheck=!0)}}),Ee=Q.on("stagemouseup",function(){t.type=="Pen"&&(t.write=!1,t.paper.mouse(),t.zimDragCheck=!1,pe&&t.stopCheck()),X&&e.Ticker.remove(X),Q.off("stagemousemove",Y),Z=!1});else if(r=="gamestick"){for(xe=this.gamepad=new e.GamePad,$=0;$<4;$++)Array.isArray(f[$])||(f[$]=[f[$]]);Ye={rotation:t.zimMCStartAngle,speedX:R.speed,speedY:R.speed};var he=xe.on("data",function(tt){for(J={dirX:0,dirY:0},$=0;$<f[0].length;$++)if(ue=tt.axes[f[0][$]],Math.abs(ue)>R.stickThreshold){J.dirX=ue;break}for($=0;$<f[2].length;$++)if(ue=tt.axes[f[2][$]],Math.abs(ue)>R.stickThreshold){J.dirY=ue;break}if(T){He(J);return}R.x+=R.speed*J.dirX,R.y+=R.speed*J.dirY,Oe()})}else if(r=="swipe")var Ae=new e.Swiper(Q,R,"x",.8),Ce=new e.Swiper(Q,R,"y",.8,!1),me=Ae.on("swipemove",function(){Oe()});function Ne(tt){var Te=r=="keydown"?tt.keyCode:tt.buttonCode,et;for($=0;$<4;$++)if(f[$].indexOf(Te)>-1){if(!h&&R.axis=="both"&&(J.dirX=J.dirY=0),J["dir"+te[$]]=_e[$],se[$]=1,et=be.indexOf($),et==0)return;et>0&&be.splice(et,1),be.unshift($);return}}function ge(tt){var Te=r=="keydown"?tt.keyCode:tt.buttonCode,et;for($=0;$<4;$++)if(f[$].indexOf(Te)>-1){if(se[$]=0,et=be.indexOf($),et>=0&&be.splice(et,1),R.axis!="both"||h)J["dir"+te[$]]=-se[Math.floor($/2)*2]+se[Math.floor($/2)*2+1];else if(be.length>0){J["dir"+te[$]]=0;var Ve=be[0];J["dir"+te[Ve]]=_e[Ve]}else J.dirX=J.dirY=0;return}}function Ue(){var tt=k.globalToLocal(R.moveX,R.moveY);R.x=tt.x,R.y=tt.y,Oe(),t.type=="Pen"&&!pe&&t.drawing&&(pe=!0)}function He(tt){Ye.rotation+=tt.dirX*R.turnSpeed,R.rotation=Ye.rotation,Ye.speedX=Math.sin(Ye.rotation*Math.PI/180)*R.speed*-tt.dirY,Ye.speedY=-Math.cos(Ye.rotation*Math.PI/180)*R.speed*-tt.dirY,R.x+=Ye.speedX,R.y+=Ye.speedY}function Oe(){var tt=R.x-(ae?R.target.percentSpeed:R.target.x),Te=R.y-(ae?R.target.percentSpeed:R.target.y),et=Xe(tt,Te);if(ce=et.speedX,j=et.speedY,!!q){if(n(et.angle)||(R.rotation=et.angle+t.zimMCStartAngle),n(R.rotation)){R.rotation=R.target.rotation;return}R.rotation+=G;var Ve=fe(R.rotation),Le=R.target.rotation=fe(R.target.rotation);Math.abs(Ve-Le)>180&&(Le>Ve?Le-=360:Ve-=360),R.dampR.immediate(Le),R.target.rotation=Le,R.rotation=Ve}}function fe(tt){return(tt%360+360)%360}function Xe(tt,Te){var et=R.speed,Ve=R.speed,Le,Qe=Math.sqrt(Math.pow(tt,2)+Math.pow(Te,2));return Qe>0&&(et=Math.abs(tt)/Qe*R.speed,Ve=Math.abs(Te)/Qe*R.speed,Le=90-Math.atan2(tt,Te)*180/Math.PI),{speedX:et,speedY:Ve,angle:Le}}var Ze=this.x,Ke=this.y,ut=this.x,gt=this.y,We=this.x=ae?d/2:this.target.x,it=this.y=ae?d/2:this.target.y;this.dampX=new e.Damp(We,g),this.dampY=new e.Damp(it,g),this.dampR=new e.Damp(this.target.rotation,g);var ct=0,Pe=0,Fe=e.Ticker.add(function(){if(r=="manual"&&Oe(),R.boundary&&R.boundary.type!="Blob"&&(R.x=e.constrain(R.x,R.boundary.x,R.boundary.x+R.boundary.width),R.y=e.constrain(R.y,R.boundary.y,R.boundary.y+R.boundary.height)),R.axis=="horizontal"||R.axis=="both"){if(R.dirX=e.sign(R.x-We),Math.abs(R.x-We)<ce?We=R.x:We+=R.dirX*ce,J&&J.dirX==0){var tt=R.boundary?R.boundary.width/2:Q.width/2,Te=R.x-(R.x-tt)*(ae?R.dampKeyup:0);We=Te,R.x=We}ae&&p&&p.width?R.target.percentSpeed=y.convert(R.dampX.convert(We)):R.target.x=R.dampX.convert(We)}if(R.axis=="vertical"||R.axis=="both"){if(R.dirY=e.sign(R.y-it),Math.abs(R.y-it)<j?it=R.y:it+=e.sign(R.y-it)*j,J&&J.dirY==0){tt=R.boundary?R.boundary.height/2:Q.height/2;var et=R.y-(R.y-tt)*(ae?R.dampKeyup:0);it=et,R.y=it}ae&&p&&p.height?R.target.percentSpeed=y.convert(R.dampY.convert(it)):R.target.y=R.dampY.convert(it)}if(R.boundary&&R.boundary.type=="Blob"&&(R.boundary.shape.hitTestPoint(R.target.x,R.target.y)?(Ze=R.target.x,Ke=R.target.y):(R.target.x=R.x=Ze,R.target.y=R.y=Ke,R.immediate(Ze,Ke))),r=="pressmove"&&Z&&R.dispatchEvent("pressing"),g==1?(R.movingX=Math.round(ut-R.x)!=0,R.movingY=Math.round(gt-R.y)!=0,ut=R.x,gt=R.y):(R.movingX=Math.abs(We-(ae?R.target.percentSpeed:R.target.x))>R.moveThreshold,R.movingY=Math.abs(it-(ae?R.target.percentSpeed:R.target.y))>R.moveThreshold),R.moving&&!(R.movingX||R.movingY)?R.dispatchEvent("stopmoving"):!R.moving&&(R.movingX||R.movingY)&&R.dispatchEvent("startmoving"),R.moving=R.movingX||R.movingY,R.moving&&R.dispatchEvent("moving"),R.dirX!=ct||R.dirY!=Pe){var Ve=new ze.Event("change"),Le;R.dirX!=ct?(Le=["left",null,"right"],Ve.dir=Le[R.dirX+1],ct=R.dirX,!t.zimMCStartAngle&&(_=="horizontal"||_=="both")&&(R.scaleX=t.scaleX=R.dirX?Math.abs(t.scaleX)*R.dirX:t.scaleX,D!=0&&Math.round(R.scaleX/D)==-1?G=180:G=0)):(Le=["up",null,"down"],Ve.dir=Le[R.dirY+1],Pe=R.dirY,!t.zimMCStartAngle&&(_=="vertical"||_=="both")&&(R.scaleY=t.scaleY=R.dirY?-Math.abs(t.scaleY)*R.dirY:t.scaleY,K!=0&&Math.round(R.scaleY/K)==-1?G=180:G=0)),R.dispatchEvent(Ve)}q&&!n(R.rotation)&&(R.target.rotation=R.dampR.convert(R.rotation))},Q);this.immediate=function(tt,Te,et){return!n(tt)&&R.dampX&&(R.dampX.immediate(tt),ae?R.x=R.target.percentSpeed=We=tt:R.x=R.target.x=We=tt,Ae&&Ae.immediate(tt)),!n(Te)&&R.dampY&&(R.dampY.immediate(Te),ae?R.y=R.target.percentSpeed=it=Te:R.y=R.target.y=it=Te,Ce&&Ce.immediate(Te)),!n(et)&&R.dampR&&(R.dampR.immediate(et),R.rotation=R.target.rotation=et),Ze=R.x,Ke=R.y,R},this.convert=function(tt,Te){n(tt)||(R.x=tt),n(Te)||(R.y=Te),Oe()},Object.defineProperty(R,"pausingSpeed",{get:function(){return R.speed},set:function(tt){R.speed=tt}}),this.paused=!1;var we;this.pause=function(tt,Te,et){return n(tt)&&(tt=!0),n(Te)&&(Te=0),n(et)&&(et=!1),tt?(we=R.speed,Te>0?(e.animate({target:R,obj:{pausingSpeed:0},ticker:!1,time:Te,call:function(){R.speed=0,R.paused=!0,R.enabled=!1,R.immediate(R.target.x,R.target.y),R.dispatchEvent("pause")}}),et&&(Z=!1,Y&&Q.off("stagemousemove",Y),X&&e.Ticker.remove(X),t.type=="Pen"&&(t.write=!1,t.zimDragCheck=!1),Ee&&Q.off("stagemouseup",Ee),pe&&t.stopCheck(),r=="keydown"?de&&ee.off("keyup",de):Me&&xe.off("buttonup",Me))):(R.speed=0,R.paused=!0,R.enabled=!1,R.immediate(R.target.x,R.target.y),setTimeout(function(){R.dispatchEvent("pause")},10))):(R.enabled=!0,Te>0?e.animate({target:R,obj:{pausingSpeed:we},ticker:!1,time:Te,call:function(){R.speed=we,R.paused=!1}}):(R.speed=we,R.paused=!1)),R};var je=!0;Object.defineProperty(R,"enabled",{get:function(){return je},set:function(tt){je!=tt&&(tt?(st(),R.paused=!1):(Je(),R.paused=!0),je=!!tt)}});function st(){r=="keydown"?(ye=ee.on("keydown",ye),de&&(de=ee.on("keyup",de)),Be=e.Ticker.add(Be,Q)):r=="gamebutton"?(Re=xe.on("buttondown",Re),Me&&(Me=xe.on("buttonup",Me)),Be=e.Ticker.add(Be,Q)):r=="gamestick"?he=xe.on("data",he):r=="swipe"?(Ae.enabled=!0,Ce.enabled=!0,me&&(me=Ae.on("swipemove",me))):r=="mousedown"||r=="mousemove"?w=Q.on("stage"+r,w):r=="pressmove"&&(w=Q.on("stagemousedown",w),Y&&(Y=Q.on("stagemousemove",Y)),Ee&&(Ee=Q.on("stagemouseup",Ee))),Fe=e.Ticker.add(Fe,Q)}function Je(){r=="keydown"?(ee.off("keydown",ye),ee.off("keyup",de),e.Ticker.remove(Be)):r=="gamebutton"?(xe.off("buttondown",Re),xe.off("buttonup",Me),e.Ticker.remove(Be)):r=="gamestick"?xe.off("data",he):r=="swipe"?(Ae.enabled=!1,Ce.enabled=!1,Ae.off("swipemove",me)):r=="mousedown"||r=="mousemove"?Q.off("stage"+r,w):r=="pressmove"&&(Q.off("stagemousedown",w),Q.off("stagemousemove",Y),Q.off("stagemouseup",Ee)),e.Ticker.remove(Fe)}this.dispose=function(){Je(),xe&&xe.dispose(),Ae&&Ae.dispose(),Ce&&Ae.dispose()}},e.extend(e.MotionController,ze.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){if(qe("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads){this.error=!0,Et&&ht("zim.GamePad() - no browswer support");return}var t;le.addEventListener("gamepadconnected",i),this.currentIndex=0;var r=this;function i(h){r.connected=!0,l("gamepadconnected",h);var g=navigator.getGamepads()[r.currentIndex];r.lastData=[];for(var _=0;_<g.buttons.length;_++)r.lastData[_]=g.buttons[_].pressed;function P(){if(t=requestAnimationFrame(P),r.data=navigator.getGamepads()[r.currentIndex],!!r.data){for(var C=r.buttons=[],T,N=0;N<r.data.buttons.length;N++)C[N]=r.data.buttons[N].pressed,C[N]!=r.lastData[N]&&(r.lastData[N]=C[N],C[N]?T=new ze.Event("buttondown"):T=new ze.Event("buttonup"),T.buttonCode=N,T.button=B[N],r.dispatchEvent(T));T=new ze.Event("data"),T.axes=r.axes=r.data.axes,T.buttons=r.buttons,r.dispatchEvent(T)}}P()}var o=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(r.connected||i(),clearInterval(o))},500);function l(h,g){var _=new ze.Event(h);_.index=g.gamepad.index,_.id=g.gamepad.id,_.buttons=g.gamepad.buttons,_.axes=g.gamepad.axes,r.dispatchEvent(_)}var f=function(h){h.gamepad.index==r.currentIndex&&(cancelAnimationFrame(t),r.connected=!1,r.dispatchEvent("gamepaddisconnected"))};le.addEventListener("gamepaddisconnected",f),this.dispose=function(){le.removeEventListener("gamepadconnected",i),le.removeEventListener("gamepaddisconnected",f),cancelAnimationFrame(t),clearInterval(o),r.connected=!1}};var B=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(pn=0;pn<B.length;pn++)e.GamePad[B[pn]]=pn;var z=["LSX","LSY","RSX","RSY"];for(pn=0;pn<z.length;pn++)e.GamePad[z[pn]]=pn;e.extend(e.GamePad,ze.EventDispatcher,null,"cjsEventDispatcher"),e.Portal=function(t,r){var i="obj, lands",o;if(o=mt(e.Portal,arguments,i,this))return o;if(qe("69.96"),n(t)||!t.stage)return;this.type="Portal";var l=this,f=r&&r.numChildren&&r.numChildren>0;if(f){var h=r.getChildAt(r.numChildren-1),g=r.getChildAt(r.numChildren-2);r.setChildIndex(g,r.numChildren-1),g.setMask(t)}function _(){r.setChildIndex(h,0),h=g,g=r.getChildAt(r.numChildren-2),r.setChildIndex(g,r.numChildren-1),h.setMask(null),g.setMask(t),t.stage.update()}t.on(e.mobile()?"mousedown":"mouseover",function(){l._enabled&&(f&&_(),l.dispatchEvent("enter"))}),t.on(e.mobile()?"pressup":"mouseout",function(){l._enabled&&l.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(P){if((n(P)||!P.stage)&&Et){ht("zim.Portal() - please provide a Display Object to act as the portal");return}g.setMask(t)}}),Object.defineProperty(this,"currentLand",{get:function(){return h},set:function(P){if(r.contains(P))for(;P!=h;)_()}}),Object.defineProperty(this,"nextLand",{get:function(){return g},set:function(){if(Et){ht("zim.Portal() - nextLand is read only - remake Portal to change");return}}}),this._enabled=!0,Object.defineProperty(l,"enabled",{get:function(){return l._enabled},set:function(P){l._enabled=P}})},e.extend(e.Portal,ze.EventDispatcher,null,"cjsEventDispatcher",!1),le.zimContactListener=null;var oe,ke;function Se(t,r,i,o,l,f,h,g,_,P,C,T){if(qe("69.97"),n(i)&&(i=0),o=="rectangle")t.body=t.physics.makeRectangle(t.width-i,t.height-i,r,l,h,g,_,P,C,f,T);else if(o=="circle")t.body=t.physics.makeCircle(t.width/2-i,r,l,h,g,_,P,C,f,T);else if(o=="triangle")n(t.a)&&(t.a=t.width,t.b=t.c=Math.sqrt(Math.pow(t.a/2,2)+Math.pow(t.height,2))),t.body=t.physics.makeTriangle(t.a-i,t.b-i,t.c-i,r,l,h,g,_,P,C,f,T);else if(o=="poly"){var N=[];t.reg(0,0,!0);var O=t;t.scale!=1&&(O=t.clone().transformPoints("scale",t.scale)),i&&(O=t.clone().transformPoints("scale",Math.max(0,1-i/((t.width+t.height)/4)))),e.loop(O.points,function(k){N.push({x:k[0],y:k[1]})}),t.body=t.physics.makePoly(N,t.width,t.height,r,l,h,g,_,P,C,f,T)}t.body.x=t.x,t.body.y=t.y,t.body.rotation=t.rotation,t.physics.addMap(t.body,t),t.impulse=function(k,x,E,L){n(k)&&(k=0),n(x)&&(x=0);var A=t.body.GetWorldCenter();return n(E)&&(E=A.x*t.physics.scale),n(L)&&(L=A.y*t.physics.scale),t.body.ApplyImpulse(new le.b2Vec2(k,x),new le.b2Vec2(E/t.physics.scale,L/t.physics.scale)),t},t.force=function(k,x,E,L){n(k)&&(k=0),n(x)&&(x=0);var A=t.body.GetWorldCenter();return n(E)&&(E=A.x*t.physics.scale),n(L)&&(L=A.y*t.physics.scale),t.body.ApplyForce(new le.b2Vec2(k,x),new le.b2Vec2(E/t.physics.scale,L/t.physics.scale)),t},t.setLinearVelocity=function(k,x){return t.body.SetLinearVelocity(new le.b2Vec2(k,x)),t},t.setAngularVelocity=function(k){return t.body.SetAngularVelocity(k),t},t.spin=function(k){return n(k)&&(k=10),t.body.ApplyTorque(k*1e3),t},t.torque=function(k){return n(k)&&(k=10),t.body.ApplyTorque(k),t},t.follow=function(k,x,E,L,A,b,F,q,V,I,ne,R){var Q="damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal",U;return(U=mt(t.follow,arguments,Q))?U:(t.physics.follow(t,k,x,E,L,A,b,F,q,V,I,ne,R),t)},t.noFollow=function(){return t.physics.follow(null),t},t.control=function(k,x,E,L,A){var b="type, speed, speedY, horizontal, vertical",F;return(F=mt(t.control,arguments,b))?F:(t.physics.control(t,k,x,E,L,A),t)},t.customControl=function(k,x,E){var L="dir, speed, speedY",A;return(A=mt(t.customControl,arguments,L))?A:(t.physics.customControl(k,x,E),t)},t.noControl=function(){return t.physics.noControl(t),t},t.sleep=function(){return t.body.SetAwake(!1),t},t.wake=function(){return t.body.SetAwake(!0),t};function S(){le.zimContactListener=new le.b2ContactListener,oe=new e.Dictionary(!0),ke=new e.Dictionary(!0),le.zimContactListener.BeginContact=k,le.zimContactListener.EndContact=x;function k(E){var L=oe.at(E.m_fixtureB.GetBody());L&&L(E.m_fixtureA.GetBody().zimObj,E.m_fixtureA.GetBody()),L=oe.at(E.m_fixtureA.GetBody()),L&&L(E.m_fixtureB.GetBody().zimObj,E.m_fixtureB.GetBody())}function x(E){var L=ke.at(E.m_fixtureB.GetBody());L&&L(E.m_fixtureA.GetBody().zimObj,E.m_fixtureA.GetBody()),L=ke.at(E.m_fixtureA.GetBody()),L&&L(E.m_fixtureB.GetBody().zimObj,E.m_fixtureB.GetBody())}t.physics.world.SetContactListener(le.zimContactListener)}t.contact=function(k){return le.zimContactListener||S(),oe.add(t.body,k),t},t.noContact=function(){return oe.remove(t.body),t},t.contactEnd=function(k){return le.zimContactListener||S(),ke.add(t.body,k),t},t.noContactEnd=function(){return ke.remove(t.body),t},t.hasOwnProperty("dynamic")||Object.defineProperty(t,"dynamic",{get:function(){return t.body.GetType()==2},set:function(k){t.body.SetType(k==!0?2:0)}})}for(e.Timeline=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S){var k="objects, width, startPaused, barColor, buttonColor, themeColor, corner, ticks, damp, loop, noLoop, call, style, group, inherit",x;if(x=mt(e.Timeline,arguments,k,this))return x;qe("69.971"),this.group=O;var E=N===!1?{}:e.getStyle("Timeline",O,S),L=this.stage?this.stage:zimDefaultFrame.stage,A=L.frame,b=L.width,F=L.height;n(i)&&(i=E.startPaused!=null?E.startPaused:!1),n(P)&&(P=E.loop!=null?E.loop:!0),n(C)&&(C=E.noLoop!=null?E.noLoop:!1),n(o)&&(o=E.barColor!=null?E.barColor:e.tin),n(l)&&(l=E.buttonColor!=null?E.buttonColor:e.light),n(f)&&(f=E.themeColor!=null?E.themeColor:e.purple),n(r)&&(r=E.width!=null?E.width:b*.5),n(g)&&(g=E.ticks!=null?E.ticks:!0),n(_)&&(_=E.damp!=null?E.damp:!1),n(Z)&&(Z=E.labels!=null?E.labels:!0),n(h)&&(h=E.corner!=null?E.corner:5);var q=50;this.zimContainer_constructor(r,q,null,null,!1),this.type="Timeline";var V=this,I=t,ne=e.toBW(A.color);if(n(I)){if(!e.animatedObjects||!e.animatedObjects.objects)return ht("ZIM Timeline - add Timeline after animated objects"),V;I=e.copy(e.animatedObjects.objects)}Array.isArray(I)||(I=[I]);var R=Date.now(),Q=0;e.loop(I,function(Me){Me.pauseAnimate(),Me.tweenEndTime&&Me.tweenEndTime>Q&&(Q=Me.tweenEndTime)});var U=Math.ceil((Q-R)/1e3),ee=this.backing=new e.Rectangle(r,q,o,null,null,h).alp(.8).addTo(V),ae=ne=="#000000"?0:1,ie=this.shade=new e.Rectangle(q-ae,q-ae*2,black,null,null,[h,0,0,h]).alp(.7).pos(ae,ae,LEFT,TOP,V),ce=this.shade2=new e.Rectangle(q-ae,q-ae*2,black,null,null,[0,h,h,0]).alp(.7).pos(ae,ae,RIGHT,TOP,V),j=new e.Container(50,50).alp(.9);new e.Rectangle(7,24,white).center(j).mov(-6),new e.Rectangle(7,24,white).center(j).mov(6);var G=V.controls=new e.Button({icon:new e.Triangle(30,30,30,white).reg(null,16).rot(90).alp(.9),toggleIcon:j.reg("center"),downBackgroundColor:e.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(ee,null,70).center(ie).addTo(V).expand(10).tap(function(){se.pauseAnimate(!G.toggled)});i||G.toggle();var y=new e.Container(50,50).reg("center").alp(.8).expand(10);new Sn(24,5,e.white).center(y).mov(0,-8),new Sn(24,5,e.white).center(y),new Sn(24,5,e.white).center(y).mov(0,8);var p=!0,d=V.menu=new e.Button({icon:y,downBackgroundColor:e.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(ee,null,70).center(ce).addTo(V).tap(function(){Ye.show(),p&&Ye.loc(V.x,V.y).mov(V.width-Ye.width/2,-Ye.height/2-10)});function D(Me){se.rate=Me,de.speed=Me,V.trailInterval.time=Re.convert(de.speed),localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function K(Me){se.ticks.vis(Me),se.labels.vis(Me),L.update(),de.labels=Me,localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function w(Me){P=Me,de.looping=Me,localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function Y(Me){ye(),Me&&(se.percentComplete=0,setTimeout(function(){J()},50)),de.trailing=Me,localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function Ee(Me){return e.loop([G,d],function(Be){Be.backgroundColor=Me,Be.toggleBackgroundColor=Me,Be.rollBackgroundColor=Me.lighten(.2),Be.rollToggleBackgroundColor=Me.lighten(.2),Be.downBackgroundColor=Me.darken(.2)}),Ye.backing.color=Me,X.slider.bar.color=Me,L.update(),de.color=Me,localStorage&&(localStorage.zim_tl=JSON.stringify(de)),this}this.setThemeColor=Ee;var X=e.List.slider("speed",0,2,1,D,.1),Z=e.List.checkBox("labels",!1,K),pe=e.List.checkBox("loop",!1,w),ve=e.List.checkBox("trails",!1,Y),$=e.List.colorPicker("color",e.purple,new e.ColorPicker({colors:[e.purple,e.pink,e.red,e.orange,e.brown,e.green,e.blue,e.grey,e.black],cols:9}),Ee),ue=this.title=new e.Container(300,25).noMouse();new e.Rectangle(500,70,e.black.toAlpha(.4)).pos(0,-45,CENTER,TOP,ue),this.icon=A.makeIcon({edges:"white",box:faint,slats:["white","white","white","white","white"]}).alp(.6).scaleTo(ue,null,140).pos(7,-10,"left","center",ue),new e.Label({text:"Z  I  M  -  T  I  M  E  L  I  N  E",color:"white"}).alp(.6).sca(.47).loc(51,-4,ue),new e.Line(219,1,"white").alp(.6).center(ue).mov(8,3);var xe=this.list=new e.List({width:300,height:260,backdropColor:clear,borderWidth:-1,shadowColor:-1,viewNum:6,padding:12,scrollBarV:!1,list:[X,Z,pe,ve,$],swipe:!1});X.slider.bar.color=e.purple,xe.tabs.mov(0,8);var Ye=V.pane=new e.Pane({width:xe.width,height:xe.height+40,backgroundColor:e.purple,backdropColor:e.faint,draggable:!0,corner:8,content:xe,resets:!1});Ye.contentContainer.mov(0,20),Ye.backing.on("pressmove",function(){p=!1},null,!0),ue.scaleTo(Ye.contentContainer,100).pos(0,2,"center","top",Ye.contentContainer).setMask(Ye.backing);var se=V.slider=new e.Slider({min:0,max:U,inside:!0,barColor:o,barWidth:q,barLength:r-q*2-12,tickColor:ne.toAlpha(.8),damp:_,useTicks:!0,tickScale:1,tickStep:.1,semiTicks:4,semiTickScale:1,useLabels:!0,labelColor:ne.toAlpha(.8)}).center(V,1);se.bar.dye(e.faint),se.currentValue=0,se.ticks.mov(0,-20),se.bar.widthOnly=se.bar.width+14,new e.Triangle({color:e.dark}).alp(.3).scaleTo(se.button,70,90,"full").center(se.button),se.animate({props:{currentValue:se.max},time:se.max,ease:"linear",startPaused:i,loop:!0,loopWait:.5,loopWaitCall:function(){P||(se.pauseAnimate(),G.toggle(!1),se.currentValue=se.max),te&&V.trailInterval.pause(),T&&typeof T=="function"&&T()},loopCall:function(){e.loop(I,function(Me){Me.percentComplete=0})}}),se.bar.on("mousedown",function(){se.percentComplete=se.currentValue/se.max*100});var be=!0;se.button.on("mousedown",function(){be=se.animating,se.pauseAnimate()}),se.button.on("pressup",function(){be&&se.pauseAnimate(!1),se.percentComplete=se.currentValue/se.max*100}),V.keyEvent=A.on("keydown",function(Me){Me.key==" "&&(G.toggled?(G.toggle(!1),se.pauseAnimate(!0)):(G.toggle(!0),se.pauseAnimate(!1)))}),V.tickerID=e.Ticker.add(function(){var Me=Math.min(100,V.slider.currentValue/U*100)-.01;e.loop(I,function(Be){var he=R+Me/100*(Q-R)-Be.tweenStartTime;C&&(Be.percentComplete=Math.max(0,Math.min(100,he/(Be.tweenEndTime-Be.tweenStartTime)*100))),Be.percentComplete=he/(Be.tweenEndTime-Be.tweenStartTime)*100})});var te;function _e(){e.loop(I,function(Me){var Be=Me.clone().addTo(te).alp(.05);Be.color=clear,Be.borderColor=ne}),te.updateCache("source-over"),te.disposeAllChildren()}V.trailInterval=e.interval(.05,function(){se.animating&&X.slider.currentValue>0&&_e()}),V.trailInterval.pause();function J(){V.trails||(te=new e.Container(b,F).addTo(L,0).cache(),V.trails=new e.Bitmap(te.cacheCanvas).addTo(L,1),V.trailInterval.pause(!1))}function ye(){V.trails&&(V.trailInterval.pause(),V.trails.dispose(),V.trails=null,te.dispose(),te=null)}var Re=new e.Proportion(.1,2,.1,.01);if(localStorage){var de=localStorage.zim_tl;de||(de=JSON.stringify({speed:1,labels:!1,looping:!1,color:purple})),de=JSON.parse(de),D(de.speed),X.slider.currentValue=de.speed,X.stepper.currentValue=de.speed,K(de.labels),Z.checkBox.checked=de.labels,w(de.looping),pe.checkBox.checked=de.looping,Ee(de.color),$.colorPicker.selectedColor=de.color,$.swatch.color=de.color,$.colorLabel.text=de.color.toUpperCase(),de.trailing&&J(),ve.checkBox.checked=de.trailing,V.trailInterval.time=Re.convert(de.speed)}this.pos(0,20,"center","bottom"),f!=e.purple&&Ee(f),this.dispose=function(Me,Be,he){return e.Ticker.remove(V.tickerID),A.off("keydown",V.keyEvent),he||this.zimContainer_dispose(!0),!0},N!==!1&&e.styleTransforms(this,E)},e.extend(e.Timeline,e.Container,"dispose","zimContainer",!1),e.BlurEffect=function(t,r,i,o,l,f){var h="blurX, blurY, quality, style, group, inherit",g;if(g=mt(e.BlurEffect,arguments,h,this))return g;qe("69.972"),this.group=l;var _=o===!1?{}:e.getStyle("BlurEffect",l,f);n(t)&&(t=_.blurX!=null?_.blurX:10),n(r)&&(r=_.blurY!=null?_.blurY:10),n(i)&&(i=_.quality!=null?_.quality:1);var P=C(t,r,i);this.veeObj={blurX:P[0],blurY:P[1],quality:P[2]};function C(){return arguments}t=dt(t),r=dt(r),i=dt(i),this.createjsBlurFilter_constructor(t,r,i),this.type="BlurEffect",this.clone=function(T){return new e.BlurEffect(T||!e.isPick(P[0])?t:P[0],T||!e.isPick(P[1])?r:P[1],T||!e.isPick(P[2])?i:P[2],o,this.group,f)}},e.extend(e.BlurEffect,ze.BlurFilter,"clone","createjsBlurFilter",!1),e.GlowEffect=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",O;if(O=mt(e.GlowEffect,arguments,N,this))return O;qe("69.9725"),this.group=C;var S=P===!1?{}:e.getStyle("GlowEffect",C,T);n(t)&&(t=S.color!=null?S.color:e.white),n(r)&&(r=S.alpha!=null?S.alpha:1),n(i)&&(i=S.blurX!=null?S.blurX:30),n(o)&&(o=S.blurY!=null?S.blurY:30),n(l)&&(l=S.strength!=null?S.strength:1),n(f)&&(f=S.quality!=null?S.quality:1),n(h)&&(h=S.inner!=null?S.inner:!1),n(g)&&(g=S.knockout!=null?S.knockout:!1),n(_)&&(_=S.hideObject!=null?S.hideObject:!1);var k=x(t,r,i,o,l,f,h,g,_);this.veeObj={color:k[0],alpha:k[1],blurX:k[2],blurY:k[3],strength:k[4],quality:k[5],inner:k[6],knockout:k[7],hideObject:k[8]};function x(){return arguments}i=dt(i),o=dt(o),f=dt(f),t=dt(t),this.alpha=dt(r),this.strength=dt(l),this.inner=dt(h),this.knockout=dt(g),this.hideObject=dt(_),this.createjsBlurFilter_constructor(i,o,f),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(E,L,A,b,F,q,V,I){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;q=q||E,V===void 0&&(V=L),I===void 0&&(I=A);var ne=q.getImageData(V,I,b,F),R=ne.data,Q=document.createElement("canvas");Q.width=b,Q.height=F;for(var U=Q.getContext("2d",{willReadFrequently:!0}),ee=U.getImageData(0,0,b,F),ae=ee.data,ie=this.inner,ce=this._red,j=this._green,G=this._blue,y=0,p=ae.length;y<p;y+=4){var d=y+3,D=R[d];ie?D!==255&&(ae[y]=ce,ae[y+1]=j,ae[y+2]=G,ae[d]=255-D):D!==0&&(ae[y]=ce,ae[y+1]=j,ae[y+2]=G,ae[d]=D)}U.putImageData(ee,0,0);var K=this.strength;if(0<K){this.createjsBlurFilter_applyFilter(U,0,0,b,F),255<K&&(K=255);for(var w=1;w<K;w++)U.drawImage(Q,0,0)}var Y=this.alpha;Y<0?Y=0:1<Y&&(Y=1);var Ee;return this.knockout?ie?Ee="source-in":Ee="source-out":this.hideObject?ie?Ee="source-in":Ee="copy":ie?Ee="source-atop":Ee="destination-over",q.save(),q.setTransform(1,0,0,1,0,0),q.globalAlpha=Y,q.globalCompositeOperation=Ee,q.drawImage(Q,V,I),q.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(E){E=e.convertColor(E,"hexNumber"),this._red=E>>16&255,this._green=E>>8&255,this._blue=E&255}}),this.color=t,this.clone=function(E){return new e.GlowFilter(E||!e.isPick(k[0])?t:k[0],E||!e.isPick(k[1])?r:k[1],E||!e.isPick(k[2])?i:k[2],E||!e.isPick(k[3])?o:k[3],E||!e.isPick(k[4])?f:k[4],E||!e.isPick(k[5])?l:k[5],E||!e.isPick(k[6])?h:k[6],E||!e.isPick(k[7])?g:k[7],E||!e.isPick(k[8])?g:k[8],P,this.group,T)}},e.extend(e.GlowEffect,ze.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),e.ShadowEffect=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O){var S="distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",k;if(k=mt(e.ShadowEffect,arguments,S,this))return k;qe("69.973"),this.group=N;var x=T===!1?{}:e.getStyle("ShadowEffect",N,O);n(t)&&(t=x.distance!=null?x.distance:10),n(r)&&(r=x.angle!=null?x.angle:45),n(i)&&(i=x.color!=null?x.color:e.black),n(o)&&(o=x.alpha!=null?x.alpha:.4),n(l)&&(l=x.blurX!=null?x.blurX:15),n(f)&&(f=x.blurY!=null?x.blurY:15),n(h)&&(h=x.strength!=null?x.strength:1),n(g)&&(g=x.quality!=null?x.quality:1),n(_)&&(_=x.inner!=null?x.inner:!1),n(P)&&(P=x.knockout!=null?x.knockout:!1),n(C)&&(C=x.hideObject!=null?x.hideObject:!1);var E=L(t,r,i,o,l,f,h,g,_,P,C);this.veeObj={distance:E[0],angle:E[1],color:E[2],alpha:E[3],blurX:E[4],blurY:E[5],strength:E[6],quality:E[7],inner:E[8],knockout:E[9],hideObject:E[10]};function L(){return arguments}l=dt(l),f=dt(f),g=dt(g),i=dt(i),t=dt(t),r=dt(r);var A=this;this.alpha=dt(o),this.strength=dt(h),this.inner=dt(_),this.knockout=dt(P),this.hideObject=dt(C),this.createjsBlurFilter_constructor(l,f,g),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return r},set:function(F){r=F=(F%360+360)%360,b(t,F)}}),this.angle=r,Object.defineProperty(this,"distance",{get:function(){return t},set:function(F){t=F,b(F,r)}}),this.distance=t;function b(F,q){var V=q*e.RAD;A._offsetX=Math.cos(V)*F,A._offsetY=Math.sin(V)*F}Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(F){F=e.convertColor(F,"hexNumber"),this._red=F>>16&255,this._green=F>>8&255,this._blue=F&255}}),this.color=i,this.applyFilter=function(F,q,V,I,ne,R,Q,U){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;R=R||F,Q===void 0&&(Q=q),U===void 0&&(U=V);var ee=R.getImageData(Q,U,I,ne),ae=ee.data,ie=document.createElement("canvas");ie.width=I,ie.height=ne;for(var ce=ie.getContext("2d",{willReadFrequently:!0}),j=ce.getImageData(0,0,I,ne),G=j.data,y=this.inner,p=this._red,d=this._green,D=this._blue,K=0,w=G.length;K<w;K+=4){var Y=K+3,Ee=ae[Y];y?Ee!==255&&(G[K]=p,G[K+1]=d,G[K+2]=D,G[Y]=255-Ee):Ee!==0&&(G[K]=p,G[K+1]=d,G[K+2]=D,G[Y]=Ee)}ce.putImageData(j,0,0);var X=this.strength;if(0<X){this.createjsBlurFilter_applyFilter(ce,0,0,I,ne),255<X&&(X=255);for(var Z=1;Z<X;Z++)ce.drawImage(ie,0,0)}var pe=this.alpha;pe<0?pe=0:1<pe&&(pe=1);var ve;return this.knockout?y?ve="source-in":ve="source-out":this.hideObject?y?ve="source-in":ve="copy":y?ve="source-atop":ve="destination-over",R.save(),R.setTransform(1,0,0,1,0,0),R.globalAlpha=pe,R.globalCompositeOperation=ve,R.drawImage(ie,Q+this._offsetX,U+this._offsetY),R.restore(),!0},this.getBounds=function(F){var q=this.createjsBlurFilter_getBounds(F),V=this._offsetX,I=this._offsetY;return V!==0&&(V<0?(q.x+=V,q.width+=-V):q.width+=V),I!==0&&(I<0?(q.y+=I,q.height+=-I):q.height+=I),q},this.clone=function(F){return new e.ShadowFilter(F||!e.isPick(E[0])?t:E[0],F||!e.isPick(E[1])?r:E[1],F||!e.isPick(E[2])?i:E[2],F||!e.isPick(E[3])?o:E[3],F||!e.isPick(E[4])?l:E[4],F||!e.isPick(E[5])?f:E[5],F||!e.isPick(E[6])?g:E[6],F||!e.isPick(E[7])?h:E[7],F||!e.isPick(E[8])?_:E[8],F||!e.isPick(E[9])?P:E[9],F||!e.isPick(E[10])?C:E[10],T,this.group,O)}},e.extend(e.ShadowEffect,ze.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),e.ColorEffect=function(t,r,i,o,l,f,h,g,_,P,C){var T="redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",N;if(N=mt(e.ColorEffect,arguments,T,this))return N;qe("69.9735"),this.group=P;var O=_===!1?{}:e.getStyle("ColorEffect",P,C);n(t)&&(t=O.redMultiplier!=null?O.redMultiplier:1),n(r)&&(r=O.greenMultiplier!=null?O.greenMultiplier:1),n(i)&&(i=O.blueMultiplier!=null?O.blueMultiplier:1),n(o)&&(o=O.alphaMultiplier!=null?O.alphaMultiplier:1),n(l)&&(l=O.redOffset!=null?O.redOffset:0),n(f)&&(f=O.greenOffset!=null?O.greenOffset:0),n(h)&&(h=O.blueOffset!=null?O.blueOffset:0),n(g)&&(g=O.alphaOffset!=null?O.alphaOffset:0);var S=k(t,r,i,o,l,f,h,g);this.veeObj={redMultiplier:S[0],greenMultiplier:S[1],blueMultiplier:S[2],alphaMultiplier:S[3],redOffset:S[4],greenOffset:S[5],blueOffset:S[6],alphaOffset:S[7]};function k(){return arguments}t=dt(t),r=dt(r),i=dt(i),o=dt(o),l=dt(l),f=dt(f),h=dt(h),g=dt(g),this.createjsColorFilter_constructor(t,r,i,o,l,f,h,g),this.type="ColorEffect",this.clone=function(x){return new e.ColorEffect(t,r,i,o,l,f,h,g,x||!e.isPick(S[0])?t:S[0],x||!e.isPick(S[1])?r:S[1],x||!e.isPick(S[2])?i:S[2],x||!e.isPick(S[2])?o:S[3],x||!e.isPick(S[2])?l:S[4],x||!e.isPick(S[2])?f:S[5],x||!e.isPick(S[2])?h:S[6],x||!e.isPick(S[2])?g:S[7],_,this.group,C)}},e.extend(e.ColorEffect,ze.ColorFilter,"clone","createjsColorFilter",!1),e.MultiEffect=function(t,r,i,o,l,f,h){var g="hue, saturation, brightness, contrast, style, group, inherit",_;if(_=mt(e.MultiEffect,arguments,g,this))return _;qe("69.974"),this.group=f;var P=l===!1?{}:e.getStyle("MultiEffect",f,h);n(t)&&(t=P.hue!=null?P.hue:0),n(r)&&(r=P.saturation!=null?P.saturation:0),n(i)&&(i=P.brightness!=null?P.brightness:0),n(o)&&(o=P.contrast!=null?P.contrast:0);var C=T(t,r,i,o);this.veeObj={hue:C[0],saturation:C[1],brightness:C[2],contrast:C[3]};function T(){return arguments}t=dt(t),this.createjsColorMatrixFilter_constructor(new ze.ColorMatrix().adjustColor(i,o,r,t)),this.type="MultiEffect",this.adjustColor=function(N,O,S,k){n(t)||(t=dt(N)),n(r)||(r=dt(O)),n(i)||(i=dt(S)),n(o)||(o=dt(k)),this.matrix.reset().adjustColor(N,O,S,k)},Object.defineProperty(this,"brightness",{get:function(){return i},set:function(N){i=dt(N),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"contrast",{get:function(){return o},set:function(N){o=dt(N),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"saturation",{get:function(){return r},set:function(N){r=dt(N),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"hue",{get:function(){return t},set:function(N){t=dt(N),this.matrix=new ze.ColorMatrix().adjustColor(i,o,r,t),this.applyFilter()}}),this.clone=function(N){return new e.MultiEffect(N||!e.isPick(C[0])?t:C[0],N||!e.isPick(C[0])?r:C[0],N||!e.isPick(C[0])?i:C[0],N||!e.isPick(C[0])?o:C[0],l,this.group,h)}},e.extend(e.MultiEffect,ze.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),e.AlphaEffect=function(t,r,i,o){var l="mask, style, group, inherit",f;if(f=mt(e.AlphaEffect,arguments,l,this))return f;qe("69.9745"),this.group=i;var h=r===!1?{}:e.getStyle("AlphaEffect",i,o);n(t)&&(t=h.mask!=null?h.mask:null);var g=_(t);this.veeObj={mask:g[0]};function _(){return arguments}t=dt(t),t.type=="Bitmap"?t=t.image:t.cache&&(t=t.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(P){return new e.AlphaEffect(P||!e.isPick(g[0])?t:g[0],r,this.group,o)}},e.extend(e.AlphaEffect,ze.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),e.Pixel=function(t,r,i,o,l,f,h,g,_,P,C,T,N){var O="obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",S;if(S=mt(e.Pixel,arguments,O,this))return S;qe("69.9747"),this.group=T;var k=C===!1?{}:e.getStyle("Pixel",T,N);n(t)&&(t=k.obj!=null?k.obj:null),n(r)&&(r=k.amount!=null?k.amount:.5),n(i)&&(i=k.amountY!=null?k.amountY:null);var x=!1;i==null&&(x=!0,i=r),n(o)&&(o=k.blur!=null?k.blur:0),n(l)&&(l=k.dynamic!=null?k.dynamic:!1),n(f)&&(f=k.blendmode!=null?k.blendmode:null),n(h)&&(h=k.boundary!=null?k.boundary:new e.Boundary(t.getBounds())),n(g)&&(g=k.expand!=null?k.expand:0),n(_)&&(_=k.amountFactor!=null?k.amountFactor:.6),n(P)&&(P=k.blurFactor!=null?k.blurFactor:.6);var E=L(t,r,i,o,f,_,P);this.veeObj={obj:E[0],amount:E[1],amountY:E[2],blur:E[3],blendmode:E[4],amountFactor:E[5],blurFactor:E[6]};function L(){return arguments}t=dt(t),r=dt(r),i=dt(i),o=dt(o),f=dt(f),_=dt(_),P=dt(P),g&&(Array.isArray(g)?g.length==1?h.contract(-g):g.length==2?h.contract(-g[0],-g[1]):h.contract(-g[0],-g[1],-g[2],-g[3]):h.contract(-g));var A=e.constrain(_*10,0,10),b=e.constrain(P*10,0,10),F=this,q=Math.pow(Math.E,-r*A),V=Math.pow(Math.E,-i*A),I=Math.pow(Math.E,-o*b);n(t)&&(t=new e.Tile(new e.Circle(20,[e.green,e.blue,e.yellow,e.pink,e.purple]),5,5,5,5));var ne=document.createElement("canvas"),R=ne.getContext("2d"),Q=document.createElement("canvas"),U=Q.getContext("2d"),ee=I;this.update=function(){!t.cacheCanvas||I!=ee?(t.cache(h.x,h.y,h.width,h.height,I),ee=I):t.updateCache(f);var ae=t.width,ie=t.height,ce=t.width*q,j=t.height*V;ne.width=ae,ne.height=ie,Q.width=ae,Q.height=ie,U.msImageSmoothingEnabled=!1,U.mozImageSmoothingEnabled=!1,U.webkitImageSmoothingEnabled=!1,U.imageSmoothingEnabled=!1,R.drawImage(t.cacheCanvas,0,0,ce,j),U.drawImage(ne,0,0,ce,j,-g*t.scale,-g*t.scale,Q.width+g*2*t.scaleX,Q.height+g*2*t.scaleY)},this.update(),this.zimBitmap_constructor(Q),l&&(this.dynamicTicker=e.Ticker.add(function(){F.update()})),Object.defineProperty(this,"amount",{get:function(){return r},set:function(ae){r=ae,q=Math.pow(Math.E,-r*A),x&&(V=Math.pow(Math.E,-r*A),i=r),F.update()}}),Object.defineProperty(this,"amountX",{get:function(){return r},set:function(ae){r=ae,x=!1,q=Math.pow(Math.E,-r*A),F.update()}}),Object.defineProperty(this,"amountY",{get:function(){return i},set:function(ae){i=ae,x=!1,V=Math.pow(Math.E,-i*A),F.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return _},set:function(ae){_=ae,A=e.constrain(_*10,0,10),q=Math.pow(Math.E,-r*A),V=Math.pow(Math.E,-i*A),F.update()}}),Object.defineProperty(this,"blur",{get:function(){return o},set:function(ae){o=ae,I=Math.pow(Math.E,-o*b),F.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return P},set:function(ae){P=ae,b=e.constrain(P*10,0,10),I=Math.pow(Math.E,-o*b),F.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return l},set:function(ae){l!=ae&&(l=ae,l?F.dynamicTicker?F.dynamicTicker=e.Ticker.add(F.dynamicTicker):F.dynamicTicker=e.Ticker.add(F.update):F.dynamicTicker&&e.Ticker.remove(F.dynamicTicker))}}),this.dispose=function(){F.dynamicTicker&&e.Ticker.remove(F.dynamicTicker),this.zimBitmap_dispose()},C!==!1&&e.styleTransforms(this,k),this.clone=function(ae){return F.cloneProps(new e.Pixel(ae||!e.isPick(E[0])?t:E[0],ae||!e.isPick(E[1])?r:E[1],ae||!e.isPick(E[2])?i:E[2],ae||!e.isPick(E[3])?o:E[3],l,ae||!e.isPick(E[4])?f:E[4],h,g,ae||!e.isPick(E[5])?_:E[5],ae||!e.isPick(E[6])?P:E[6],C,this.group,N))}},e.extend(e.Pixel,e.Bitmap,["clone","dispose"],"zimBitmap",!1),e.Parallax=function(t,r,i,o,l,f,h){var g="layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",_;if(_=mt(e.Parallax,arguments,g,this))return _;if(qe("68"),this.type="Parallax",n(o))if(t&&t[0]&&t[0].obj&&t[0].obj.stage)o=t[0].obj.stage;else if(le.zdf)o=le.zdf.stage;else return;n(i)?i=!0:i=!1,n(l)&&(l=!1),n(f)&&(f=!1);var P=o.getBounds().width,C=o.getBounds().height;o.mouseMoveOutside=f;var T=this;T.stageEvent=o.on("stagemousemove",function(E){T.mouseX=E.rawX/e.scaX,T.mouseY=E.rawY/e.scaY});var N=n(r)?.1:r;this.addLayer=function(E){if(!(n(E.obj)||n(E.prop)||n(E.propChange))){var L={obj:E.obj,prop:E.prop};L[L.prop]=E.propChange,n(E.input)&&(E.input="mouseX"),L.input=E.input,L.split=n(E.split)?!!(E.input=="mouseX"&&i):E.split;var A=n(E.inMin)?0:E.inMin,b=n(E.inMax)?E.input=="mouseX"||E.input=="scrollX"?P:C:E.inMax,F=n(E.factor)?1:E.factor,q=n(E.integer)?!1:E.integer;return L["p_"+L.prop]=new e.ProportionDamp(A,b,0,L[L.prop],N,F,q,h),L.prop=="scale"?L["s_"+L.prop]=L.obj.scaleX:L.prop=="frame"?L["s_"+L.prop]=L.obj.currentFrame:L["s_"+L.prop]=L.obj[L.prop],n(E.immediate)||L["p_"+L.prop].immediate(E.immediate),O.push(L),T}},this.removeLayer=function(E){if(!n(E)){var L=O[E];return L["p_"+L.prop].dispose(),O.splice(E,1),T}},this.immediate=function(E){for(var L,A=0;A<O.length;A++)L=O[A],L["p_"+L.prop].immediate(E[A]);return T},this.dispose=function(){return o.off("stagemousemove",T.stageEvent),O=null,i&&e.Ticker.remove(k),!0},t=n(t)?[]:t;for(var O=[],S=0;S<t.length;S++)this.addLayer(t[S]);if(i){var k=e.Ticker.add(x,o);l&&e.Ticker.remove(k)}function x(){T.step()}this.step=function(E){for(var L,A,b=0;b<O.length;b++)L=O[b],n(E)?L.input=="mouseX"?A=T.mouseX:L.input=="mouseY"?A=T.mouseY:L.input=="scrollX"?A=e.scrollX():L.input=="scrollY"&&(A=e.scrollY()):A=E,L.prop=="scale"?L.obj.scaleX=L.obj.scaleY=L["s_"+L.prop]+L["p_"+L.prop].convert(A):L.prop=="frame"?L.obj.gotoAndStop(L["s_"+L.prop]+L["p_"+L.prop].convert(A)):(L.obj[L.prop]=L["s_"+L.prop]+L["p_"+L.prop].convert(A),L.split&&(L.obj[L.prop]-=L[L.prop]/2));return T},T.paused=l,T.pause=function(E){return n(E)&&(E=!0),T.paused!=E&&(T.paused=E,k&&(E?e.Ticker.remove(k):k=e.Ticker.add(k))),T},Object.defineProperty(T,"damp",{get:function(){return N},set:function(E){N=E;for(var L,A=0;A<O.length;A++)L=O[A],L["p_"+L.prop].damp=N}})},e.Flipper=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O){var S="front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",k;if(k=mt(e.Flipper,arguments,S,this))return k;qe("68.5"),this.group=N;var x=T===!1?{}:e.getStyle("Flipper",this.group,O);if(n(t)&&(t=x.front!=null?x.front:le.zdf.makeIcon().sca(2)),n(r)&&(r=x.back!=null?x.back:new e.Page(t.width,t.height,e.dark)),this.front=t,this.back=r,f){var E=t;t=r,r=E}var L=Math.max(t.width,r.width),A=Math.max(t.height,r.height);this.zimContainer_constructor(L,A),this.type="Flipper",n(o)&&(o=x.time!=null?x.time:.2),n(l)&&(l=x.vertical!=null?x.vertical:!1),n(i)&&(i=x.interactive!=null?x.interactive:!1),n(f)&&(f=x.flipped!=null?x.flipped:!1),n(h)&&(h=x.easeRoot!=null?x.easeRoot:"quad"),n(g)&&(g=x.frontPress!=null?x.frontPress:!0),n(_)&&(_=x.backPress!=null?x.backPress:!0),n(P)&&(P=x.reverse!=null?x.reverse:!1),n(C)&&(C=x.continuous!=null?x.continuous:!1);var b=f;this.flipped=f;var F=this;t.centerReg(this);var q;(g&&!f||_&&f)&&(q=i&&t.backing?t.backing:t,q.on("mousedown",function(){V(t,r)}),q.cur()),(_&&!f||g&&f)&&(q=i&&r.backing?r.backing:r,q.on("mousedown",function(){V(r,t,-1)}),q.cur()),t.oScale=t.scale,r.oScale=r.scale,t.flipper=F,t.other=r,r.flipper=F,r.other=t,i||(t.mouseChildren=r.mouseChildren=!1),this.flip=function(I,ne){I!=F.flipped&&(F.flipped?V(b?t:r,b?r:t,-1,ne):V(b?r:t,b?t:r,1,ne))};function V(I,ne,R,Q){if(n(R)&&(R=1),R*=P?-1:1,C&&(R=P?b?1:-1:b?-1:1),n(Q)&&(Q=o),F.flipped=!F.flipped,F.dispatchEvent("flip"),Q==0){F.removeAllChildren(),ne.scale=ne.oScale,ne.skewX=ne.skewY=0,ne.centerReg(F),F.dispatchEvent("flipped");return}var U,ee;l?(U={skewX:-90*R,scaleY:I.oScale/2},ee={skewX:0,scaleY:ne.oScale},ne.ske(90*R,0).sca(ne.oScale,ne.oScale/2)):(U={skewY:-90*R,scaleX:I.oScale/2},ee={skewY:0,scaleX:ne.oScale},ne.ske(0,90*R).sca(ne.oScale/2,ne.oScale)),I.animate({props:U,time:o,ease:h+"In",call:function(){I.removeFrom(),ne.centerReg(F).animate({props:ee,time:o,ease:h+"Out",call:function(){F.dispatchEvent("flipped")}})}})}T!==!1&&e.styleTransforms(this,x),this.clone=function(){return F.cloneProps(new e.Flipper(t.clone(),r.clone(),i,o,l,f,h,g,_,P,C,T,this.group,O))}},e.extend(e.Flipper,e.Container,"clone","zimContainer"),e.Book=function(t,r,i,o,l,f,h,g){var _="width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",P;if(P=mt(e.Book,arguments,_,this))return P;qe("68.7"),n(t)&&(t=le.zdf?le.zdf.stage.width:1024),n(r)&&(r=le.zdf?le.zdf.stage.height:768),this.zimContainer_constructor(t,r),this.type="Book",n(i)&&(i=[]),n(o)&&(o=0),n(l)&&(l=!0),n(h)&&(h=e.darker),n(g)&&(g=!0);var C=v(),T=this;if(i.length==0)return;T.backing=new e.Rectangle(t-2,r-2,h),e.loop(i,function(F,q){typeof F=="string"&&(i[q]=e.asset(F)),i[q].zimBookIndex=q,x(F)}),T.added(k);var N,O,S;function k(F){N=F,O=N.frame;var q=new e.Shape,V,I,ne,R,Q,U,ee;T._currentPage=o;function ae(D){if(T._currentPage=D,T.removeAllChildren(),T.backing.loc(1,1,T),T.setMask(T.backing),q.addTo(T),q.c().f(e.black).dr(0,0,0,0),T.moving=!1,i[D-1]?V=i[D-1].reg(0,0).rot(0).loc(0,0,T):D>0&&ee.reg(0,0).rot(0).loc(0,0,T).setMask(null),i[D-2]?I=i[D-2].reg(t/2,r).loc(0,r,T).rot(-90):I=new e.Rectangle(t/2,r,h).reg(t/2,r).loc(0,r,T).rot(-90),i[D-3]?ne=i[D-3].rot(0).loc(0,0,T).setMask(q):ne=new e.Rectangle(t/2,r,h).loc(0,0,T).setMask(q),i[D])R=i[D].rot(0).reg(0,0).pos(0,0,e.RIGHT,e.TOP,T);else{N.update();return}i[D+1]?Q=i[D+1].reg(0,r).loc(t,r,T).rot(90):(Q=new e.Rectangle(t/2,r,h).reg(0,r).loc(t,r,T).rot(90),ee=Q),i[D+2]?U=i[D+2].rot(0).pos(0,0,e.RIGHT,e.TOP,T).setMask(q):U=new e.Rectangle(t/2,r,h).pos(0,0,e.RIGHT,e.TOP,T).setMask(q),N.update()}ae(o),Object.defineProperty(T,"directPage",{get:function(){return T._currentPage},set:function(D){b(),o%2==1?D=Math.ceil(D/2)*2-1:D=Math.ceil(D/2)*2,D!=T.page&&(D>T.page?(Q.reg(0,0),U.setMask(null)):(I.reg(0,0),ne.setMask(null)),ae(D),T.moving=!1,ie=!1,T.currentW=0,T.currentH=0,A())}});var ie=!1;T.currentW=0,T.currentH=0,T.moving=!1;function ce(){T.stageEvent=N.on("stagemousedown",function(){if(T.hitTestPoint(O.mouseX,O.mouseY)){var D,K;if(!T.moving){var w=T.globalToLocal(O.mouseX,O.mouseY);if(!(w.x<0||w.x>t||w.y<0||w.y>r)&&!(f>0&&e.dist(w,new e.Point(0,r))>f&&e.dist(w,new e.Point(t,r))>f)){var Y=w.x>t/2?"right":"left";Y=="right"&&T._currentPage>=i.length-1||Y=="left"&&T._currentPage<=1||(T.moving=!0,Y=="right"?(R.addTo(T),Q.addTo(T),U.addTo(T),T.pageNext=U.zimBookIndex):(V.addTo(T),I.addTo(T),ne.addTo(T),T.rolledUp&&y(0,0,"right"),T.pageNext=I.zimBookIndex),b(),T.direction=Y,T.dispatchEvent("rollpress"),T.moveEvent=N.on("stagemousemove",function(){j&&(j.clear(),j=null);var Ee=T.globalToLocal(O.mouseX,O.mouseY);Y=="right"?D=t-Ee.x:D=Ee.x,K=r-Ee.y+D,T.currentW=D=e.constrain(D,0,t/2),T.currentH=K=e.constrain(K,0,r),y(D,K,Y)}),T.upEvent=N.on("stagemouseup",function(){N.off("stagemousemove",T.moveEvent),!ie&&G(D,K,Y)},null,!0))}}}})}if(ce(),T.rollUp=function(D,K,w,Y,Ee){if(!T.moving&&!(w=="right"&&T._currentPage>=i.length-1)&&!(w=="left"&&T._currentPage<=1)){w=="right"?(R.addTo(T),Q.addTo(T),U.addTo(T)):(T.rolledUp&&y(0,0,"right"),V.addTo(T),I.addTo(T),ne.addTo(T)),T.moving=!0,n(Y)&&(Y=C=="s"?.5:.5/1e3),n(Ee)&&(Ee=null),T.animate({props:{currentW:D,currentH:K},time:Y,ease:Ee,call:function(){e.Ticker.remove(X),T.moving=!1,y(D,K,w)}});var X=e.Ticker.add(function(){y(T.currentW,T.currentH,w)})}},l!==!1){T.rolledUp=!0,l===!0&&(l=C=="s"?1:1/1e3);var j=e.timeout(l,function(){T.rollUp(60,130,"right",.5),T.dispatchEvent("rollup")})}T.rollDown=function(D,K,w,Y){T.moving||w=="right"&&T._currentPage>=i.length-1||w=="left"&&T._currentPage<=1||G(D,K,w,Y)};function G(D,K,w,Y){T.moving=!0,T.rolledUp=!1,n(Y)&&(Y=C=="s"?.7:.7/1e3),T.animate({props:{currentW:0,currentH:0},time:Y,call:function(){e.Ticker.remove(Ee),y(0,0,w),T.moving=!1,A(),T.dispatchEvent("rolldown")}});var Ee=e.Ticker.add(function(){y(T.currentW,T.currentH,w)})}function y(D,K,w){var Y;w=="right"?(q.c().mt(t,r).lt(t-D,r).lt(t,r-K).cp(),Y=Math.atan2(D,K),Q.loc(t-(D+D*Math.cos(2*Y)),r-D*Math.sin(2*Y)).rot(Y*2*e.DEG),!ie&&D>=t/2&&K>=r&&p()):(q.c().mt(0,r).lt(D,r).lt(0,r-K).cp(),Y=Math.atan2(D,K),I.loc(D+D*Math.cos(2*Y),r-D*Math.sin(2*Y)).rot(-Y*2*e.DEG),!ie&&D>=t/2&&K>=r&&d()),N.update()}function p(){b(),ie=!0,T.moving=!0,T.moveEvent&&N.off("stagemousemove",T.moveEvent),T.upEvent&&N.off("stagemouseup",T.upEvent),T.currentW=0,T.currentH=0,T.lastPage=e.constrain(T._currentPage),T.direction="right",T.pageNext=U.zimBookIndex,T.dispatchEvent("pageanimate"),T.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(D),Q.reg(0,0),U.setMask(null),ae(T._currentPage+2),T.moving=!1,ie=!1,T.currentW=0,T.currentH=0,A(),T.dispatchEvent("page")}});var D=e.Ticker.add(function(){q.c().mt(t,r).lt(t/2,r).lt(t-T.currentW,0).lt(t,0).cp()});Q.reg(t/2,r).loc(t/2,r,T).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}function d(){b(),ie=!0,T.moving=!0,T.moveEvent&&N.off("stagemousemove",T.moveEvent),T.upEvent&&N.off("stagemouseup",T.upEvent),T.currentW=0,T.currentH=0,T.lastPage=e.constrain(T._currentPage),T.direction="left",T.pageNext=I.zimBookIndex,T.dispatchEvent("pageanimate"),T.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(D),I.reg(0,0),ne.setMask(null),ae(T._currentPage-2),T.moving=!1,ie=!1,T.currentW=0,T.currentH=0,A(),T.dispatchEvent("page")}});var D=e.Ticker.add(function(){q.c().mt(0,r).lt(t/2,r).lt(T.currentW,0).lt(0,0).cp()});I.reg(0,r).loc(t/2,r,T).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}g&&(g===!0&&(g=.2),T.keydown=O.on("keydown",function(D){D.keyCode==39?T.nextPage(g):D.keyCode==37&&T.prevPage(g)})),T.changeFrame=function(D){return T.stageEvent&&N.off("stagemousedown",T.stageEvent),T.moveEvent&&N.off("stagemousemove",T.moveEvent),T.upEvent&&N.off("stagemouseup",T.upEvent),O=D,N=D.stage,ce(),T},A()}T.nextPage=function(F){if(n(T.rollUp))return setTimeout(function(){T.nextPage(F)},10),T;T.moving||T.rollUp(t/2+.1,r+.1,"right",F,"quadIn")},T.prevPage=function(F){if(n(T.rollUp))return setTimeout(function(){T.prevPage(F)},10),T;T.moving||T.rollUp(t/2+.1,r+.1,"left",F,"quadIn")},T.gotoPage=function(F,q){if(n(T.rollUp))return setTimeout(function(){T.gotoPage(F,q)},10),T;F=e.constrain(F,0,T.pages.length-1),n(q)&&(q=C=="s"?.3:300);var V=q+(C=="s"?.35:350);T.pageInterval=e.interval(V,function(I){var ne=!1;T._currentPage<F?T.nextPage(q):T._currentPage>F?T.prevPage(q):ne=!0,T.dispatchEvent("pageturn"),I.count==I.total-1&&(ne?(A(),T.dispatchEvent("pagedone")):e.timeout(V,function(){A(),T.dispatchEvent("pagedone")}))},Math.floor(Math.abs(F-T._currentPage)/2+1),!0)};function x(F){F.addChild&&(F.zimHTMLList=new e.Dictionary,L(F),F.parent&&F.parent.removeChild(data.page))}function E(F){if(!(n(F)||!F.addChild))for(F.removedHTML=!1,S=0;S<F.zimHTMLList.length;S++)F.addChildAt(F.zimHTMLList.values[S].obj,F.zimHTMLList.values[S].depth)}function L(F){if(!(F.removedHTML||!F.addChild)){F.removedHTML=!0,F.zimHTMLList.clear();var q,V;for(V=0;V<F.numChildren;V++)if(q=F.getChildAt(V),q.type=="TextArea"||q.type=="Loader"||q.type=="Tag"){var I={obj:q,depth:F.getChildIndex(q)};F.zimHTMLList.add(q,I)}for(V=F.numChildren-1;V>=0;V--)q=F.getChildAt(V),(q.type=="TextArea"||q.type=="Loader"||q.type=="Tag")&&F.removeChild(q)}}function A(){T.pages[T.page]&&E(T.pages[T.page]),T.pages[T.page-1]&&E(T.pages[T.page-1])}function b(){T.pages[T.page]&&L(T.pages[T.page]),T.pages[T.page-1]&&L(T.pages[T.page-1])}Object.defineProperty(T,"page",{get:function(){return T._currentPage},set:function(F){T.gotoPage(F,C=="s"?.1:100)}}),Object.defineProperty(T,"pages",{get:function(){return i},set:function(){Et&&ht("Book() - pages is read only")}}),this.dispose=function(F,q,V){return T.stageEvent&&N.off("stagemousedown",T.stageEvent),T.moveEvent&&N.off("stagemousemove",T.moveEvent),T.upEvent&&N.off("stagemouseup",T.upEvent),T.keydown&&O.off("keydown",T.keydown),T.removeFrom(),V||this.zimContainer_dispose(!0),!0}},e.extend(e.Book,e.Container,["clone","dispose"],"zimContainer"),e.Scrambler=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O){var S="tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",k;if(k=mt(e.Scrambler,arguments,S,this))return k;qe("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=N;var x=T===!1?{}:e.getStyle(this.type,this.group,O);n(t)&&(t=x.tile!=null?x.tile:t),n(r)&&(r=x.keys!=null?x.keys:null),n(i)&&(i=x.keyProperty!=null?x.keyProperty:null),n(o)&&(o=x.scramble!=null?x.scramble:!0),n(l)&&(l=x.time!=null?x.time:0),n(f)&&(f=x.wait!=null?x.wait:0),n(h)&&(h=x.num!=null?x.num:1),n(g)&&(g=x.shadowColor!=null?x.shadowColor:"rgba(0,0,0,.3)"),n(_)&&(_=x.shadowBlur!=null?x.shadowBlur:5),n(P)&&(P=x.swap!=null?x.swap:!1),n(C)&&(C=x.swapLock!=null?x.swapLock:!1),C&&(P=!0),n(t)&&(t=new e.Tile(new e.Rectangle(100,100,e.series(e.silver,e.tin,e.grey,e.dark,e.darker)),5,1,5)),t.addTo(this);var E=this;E.tile=t,E.complete=!0;var L=v(l);v(f);var A=(t.width+t.spacingH)/t.cols,b=(t.height+t.spacingV)/t.rows,F=le.zdf,q=e.makeID(null,10),V,I,ne,R=!1;t.pointers={},t.on("mousedown",function(G){if(R)return;R=!0,U(G.target),E.myDownCheck=!0,ne=G.target;var y="id"+Math.abs(G.pointerID+1);if(t.pointers[y]=!0,V=G.target.x,I=G.target.y,C){var p=t.current;if(E.testItem(G.target,p.indexOf(G.target))){G.target.noMouse(),G.target.noDrag(),G.target.locked=!0,E.myDownCheck=R=!1,ee();return}}if(g!=-1&&_>0){var d=new ze.Shadow(g,3,3,_);G.target.backing?G.target.backing.shadow=d:G.target.shadow=d}F&&(E.scrmu||(E.scrmu=F.on("mouseupplusonly",function(w){if(E.myDownCheck){E.myDownCheck=!1;var Y=e.loop(t.pointers,function(Ee,X){return X});Y||(t.pointers.id0=!0),w={target:ne,pointerID:w.pointerID?Y:-1},D(w)}}))),E.upEvent&&t.off("pressup",E.upEvent),E.upEvent=t.on("pressup",function(w){var Y="id"+Math.abs(w.pointerID+1);t.pointers[Y]&&(E.myDownCheck=R=!1,D(w))});function D(w){var Y="id"+Math.abs(w.pointerID+1);if(t.pointers[Y]){delete t.pointers[Y];var Ee=!0;if(ee(),R=!1,E.moveEvent&&t.off("pressmove",E.moveEvent),C){var X=w.target.boundsToGlobal(),Z=t.hitTestGrid(t.width,t.height,t.cols,t.rows,X.x+X.width/2,X.y+X.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(n(Z))Ee=!1;else{var pe=p[Z[0]];w.target==pe?Ee=!1:Ee=!E.testItem(pe,Z[0])}}P&&Ee&&Q(w),w.target.mouseEnabled=!1,w.target.animate({props:{x:V,y:I},time:.1,id:q,timeUnit:"seconds",pauseOnBlur:!1,call:K,params:w})}}function K(w){!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete")),g!=-1&&_>0&&(w.target.backing?w.target.backing.shadow=null:w.target.shadow=null),w.target.mouseEnabled=!0}P||(E.moveEvent&&t.off("pressmove",E.moveEvent),E.moveEvent=t.on("pressmove",function(w){Q(w)}))});function Q(G){var y=G.target;y.stopAnimate();var p=y.boundsToGlobal(),d=t.hitTestGrid(t.width,t.height,t.cols,t.rows,p.x+p.width/2,p.y+p.height/2,null,null,t.spacingH,t.spacingV,null,"open");n(d)||e.loop(t,function(D){if(!(D==y||D.paused===!1)){var K=D.boundsToGlobal(),w=t.hitTestGrid(t.width,t.height,t.cols,t.rows,K.x+K.width/2,K.y+K.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(!n(w)){var Y;d[2]==w[2]&&(D.x>=y.x&&D.x<=y.x+A/2||D.x<=y.x&&D.x>=y.x-A/2)&&(Y=D.x,D.top().ord(-1),D.animate({props:{x:V},time:.2,id:q,timeUnit:"seconds",call:function(){P&&!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete"))}}),V=Y),d[1]==w[1]&&(D.y>=y.y&&D.y<=y.y+b/2||D.y<=y.y&&D.y>=y.y-b/2)&&(Y=D.y,D.top().ord(-1),D.animate({props:{y:I},time:.201,override:!1,id:q,timeUnit:"seconds",call:function(){P&&!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete"))}}),I=Y)}}},!0)}function U(G){t.loop(function(y){y!=G&&y.noMouse()})}function ee(){t.loop(function(G){G.locked||G.mouse()})}this.test=function(){var G=t.current;return e.loop(G,function(y,p){if(n(y)||!E.testItem(y,p))return!1})},this.testItem=function(G,y){if(!n(G)){if(n(y)&&(y=t.current.indexOf(G)),r){var p=n(i)?G.key:G[i];if(p!=r[y])return!1}else if(t.items[y]!=G)return!1;return!0}},this.update=function(){return t.noDrag(),t.drag({boundary:t,singleTouch:!0}),this},this.starts=[];var ae=[];e.loop(t.rows*t.cols,function(G){ae.push(G)});var ie=ae.slice();t.loop(function(G){G.mouseChildren=!1,E.starts.push({x:G.x,y:G.y})}),this.inactive=!1,this.scramble=function(G,y,p){n(y)&&(y=0),n(G)&&(G=0),(n(p)||G==0)&&(p=1),ce(),e.timeout(y,function(){G>0?e.interval(G/p,d,p,!0):d()}),setTimeout(function(){E.complete=!1,t.loop(function(D){D.mouse(),D.locked=!1}),E.mouse(),t.drag({boundary:t,singleTouch:!0}),R=!1},L=="s"?(y+G)*1e3:y+G);function d(){for(var D=!0,K=0;D&&K<50;)K++,e.shuffle(ae),D=e.loop(ae,function(w,Y){var Ee=t.getChildAt(w);if(r){var X=n(i)?Ee.key:Ee[i];if(X!=r[Y])return!1}else if(t.items[Y]!=Ee)return!1});j(ae,G/p),e.timeout(G,function(){E.dispatchEvent("scrambled")})}return E},o?E.scramble(l,f,h):E.added(function(){t.drag({boundary:t,singleTouch:!0})});function ce(){E.upEvent&&t.off("pressup",E.upEvent),E.moveEvent&&t.off("pressmove",E.moveEvent),t.noDrag(),f+l>0&&E.noMouse()}function j(G,y,p){e.stopAnimate(q),e.loop(t.items,function(d,D,K){var w=E.starts[G[D]];y?d.animate({props:{x:w.x,y:w.y},time:y,ease:p?"quadInOut":"quadOut",wait:p,timeUnit:"seconds",id:q}):(d.loc(w),E.stage?d.drag({boundary:t,singleTouch:!0}):D==K-1&&E.added(function(){t.drag({boundary:t,singleTouch:!0})}))})}this.solve=function(G,y,p){n(p)&&(p=!0),n(y)&&(y=0),n(G)&&(G=0),y+G==0&&p&&E.noMouse(),setTimeout(function(){ae=ie.slice(),ce(),j(ae,G,0,p)},L=="s"?y*1e3:y),p||setTimeout(function(){E.mouse(),t.drag({boundary:t,singleTouch:!0})},L=="s"?(y+G)*1e3:y+G)},this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(G){c(E,G),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&E.stage&&E.stage.update()}}),Object.defineProperty(E,"order",{get:function(){var G=[],y=e.loop(t.current,function(p){if(!p)return!1;G.push(p.tileNum)});return!y||G.length!=ae.length||(ae=G),ae},set:function(G){var y=[];e.loop(G,function(p){y.push(t.items[p])}),t.remake(y),t.stage&&t.stage.update()}}),this.dispose=function(G,y,p){return E.scrmu&&F.off("mouseupplus",E.scrmu),t.removeAllEventListeners(),p||(E.zimContainer_dispose(!0),E.stage&&E.stage.update()),!0},T!==!1&&e.styleTransforms(this,x),this.clone=function(){return E.cloneProps(new e.Scrambler(t.clone(),r,i,o,l,f,h,g,_,P,C,T,E.group,O))}},e.extend(e.Scrambler,e.Container,["clone","dispose"],"zimContainer",!1),e.Scroller=function(t,r,i,o,l,f,h,g,_,P,C){var T="backing, speed, direction, horizontal, gapFix, stage, container, backing2, style, group, inherit",N;if(N=mt(e.Scroller,arguments,T,this))return N;qe("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=P;var O=_===!1?{}:e.getStyle(this.type,this.group,C);if(n(t)&&(t=O.backing!=null?O.backing:null),n(t))return;var S=this.backing1=t;if(n(S)||!S.getBounds)return;var k;n(g)?k=this.backing2=t.clone(!0):k=g,n(o)&&(o=O.horizontal!=null?O.horizontal:!0),n(l)&&(l=O.gapFix!=null?O.gapFix:0),n(h)&&(h=O.container!=null?O.container:null),n(f)&&(f=O.stage!=null?O.stage:null);var x=this;n(r)&&(r=O.speed!=null?O.speed:1),this.speed=r;var E=this.baseSpeed=this.speed;n(i)&&(i=O.direction!=null?O.direction:1),this.direction=i;var L=o?S.scaleX:S.scaleY;if(S.type=="AC"){ht("ZIM Scroller(): please provide Pic() with dimensions for backing objects");return}if(!S.getBounds()){ht("ZIM Scroller(): please setBounds() on backing objects");return}if(!f&&!S.stage){ht("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start");return}if(!S.parent){ht("ZIM Scroller(): please add object to container or stage before adding to Scroller");return}if(S.parent.addChildAt(k,S.parent.getChildIndex(S)),f=f||S.stage,n(h)&&(h=f),!h.getBounds()){ht("zim display - Scroller(): please setBounds() on container or stage if no container");return}var A=S.getBounds().width*L-l,b=S.getBounds().height*L-l,F,q;o?k.x=A:k.y=b;var V=!1,I=e.Ticker.add(ne,f);function ne(){F||(F=h.getBounds().width,q=h.getBounds().height),!(x.speed==0||x.direction==0)&&(o?(S.x-=x.speed*x.direction,S.x<k.x?k.x=S.x+A:k.x=S.x-A,x.direction*x.speed>0?k.x<0&&S.x<k.x?S.x=k.x+A:S.x<0&&k.x<S.x&&(k.x=S.x+A):k.x>F&&k.x>S.x?k.x=S.x-A:S.x>F&&S.x>k.x&&(S.x=k.x-A)):(S.y-=x.speed*x.direction,S.y<k.y?k.y=S.y+b:k.y=S.y-b,x.direction*x.speed>0?k.y<0&&S.y<k.y?S.y=k.y+b:S.y<0&&k.y<S.y&&(k.y=S.y+b):k.y>q&&k.y>S.y?k.y=S.y-b:S.y>q&&S.y>k.y&&(S.y=k.y-b)))}this.paused=!1,this.pause=function(R,Q){return n(R)&&(R=!0),n(Q)&&(Q=0),R?(E=x.speed,Q>0?(V=!0,e.animate({target:x,obj:{pausingSpeed:0},ticker:!1,time:Q,call:function(){x.speed=0,x.paused=!0,V=!1,x.dispatchEvent("pause")}})):(V=!1,x.speed=0,x.paused=!0,setTimeout(function(){x.dispatchEvent("pause")},10))):(V=!1,Q>0?e.animate({target:x,obj:{pausingSpeed:E},ticker:!1,time:Q,call:function(){x.speed=E,x.paused=!1,V=!1}}):(x.speed=E,x.paused=!1)),x},Object.defineProperty(x,"percentSpeed",{get:function(){return x.baseSpeed==0?NaN:x.speed/x.baseSpeed*100},set:function(R){V||x.paused||(x.speed=x.baseSpeed*R/100)}}),Object.defineProperty(x,"pausingSpeed",{get:function(){return x.baseSpeed==0?NaN:x.speed/x.baseSpeed*100},set:function(R){x.speed=x.baseSpeed*R/100}}),Object.defineProperty(x,"percentComplete",{get:function(){return o?S.x<0&&S.x>k.x?-S.x/S.width*100:(-k.x/k.width*100+1e9)%100:S.y<0&&S.y>k.y?-S.y/S.height*100:(-k.y/k.height*100+1e9)%100},set:function(R){R=(R+1e9)%100,o?(S.x=-R*S.width/100,k.x=S.x+A):(S.y=-R*S.height/100,k.y=S.y+b)}}),_!==!1&&e.styleTransforms(this,O),this.dispose=function(){return e.Ticker.remove(I),!0}},e.extend(e.Scroller,ze.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",O;if(O=mt(e.Dynamo,arguments,N,this))return O;qe("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=C;var S=P===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(t=S.sprite!=null?S.sprite:null),n(t))return;var k=this.frames=t.parseFrames(i,o,l,!0);if(k.length==0)return;this.totalFrames=k.length;var x=0;n(r)&&(r=S.speed!=null?S.speed:30),n(h)&&(h=S.reversible!=null?S.reversible:!0);var E=this.baseSpeed=this.speed=r;n(f)&&(f=S.update!=null?S.update:!1),n(g)&&(g=S.flip!=null?S.flip:null),n(g)&&h==!1&&(g=!0);var L=this,A,b,F=Date.now(),q,V,I,ne=!1;L.scaleX=t.scaleX,L.scaleY=t.scaleY;function R(){if(A=requestAnimationFrame(R),b=k[x].s,!(L.speed==0||b==0)&&(V=1e3/Math.abs(L.speed)*b,q=Date.now(),q-F>V)){F=q;var Q=L.frame+(L.speed>0||!h?1:-1),U=!1;Q>=k.length&&(U=!0,Q=0),Q<0&&(U=!0,Q=k.length-1),L.frame=Q,g&&(L.speed<0?t.scaleX=-L.scaleX:t.scaleX=L.scaleX),_&&(L.speed<0?t.scaleY=-L.scaleY:t.scaleY=L.scaleY),U&&L.dispatchEvent("loop"),L.dispatchEvent("change"),f&&t.stage&&t.stage.update(),!n(I)&&I==L.frame&&(ne=!1,L.speed=0,L.paused=!0,L.dispatchEvent("pause"))}}R(),this.paused=!1,this.pause=function(Q,U,ee){if(n(Q)&&(Q=!0),Q!=L.paused)return n(U)&&(U=0),Q?(E=L.speed,typeof ee>"u"?U>0?(ne=!0,e.animate({target:L,obj:{pausingSpeed:0},ticker:!1,time:U,call:function(){ne=!1,L.speed=0,L.paused=!0,L.dispatchEvent("pause")}})):(ne=!1,L.speed=0,L.paused=!0,setTimeout(function(){L.dispatchEvent("pause")},10)):(ne=!0,I=ee)):(I=null,U>0?(ne=!0,e.animate({target:L,obj:{pausingSpeed:E},ticker:!1,time:U,call:function(){ne=!1,L.speed=E,L.paused=!1}})):(ne=!1,L.speed=E,L.paused=!1)),L},Object.defineProperty(L,"frame",{get:function(){return x},set:function(Q){x=Math.round(Q)%k.length;var U=k[x];n(U)||(t.frame=U.f)}}),Object.defineProperty(L,"percentSpeed",{get:function(){return L.baseSpeed==0?NaN:ne||L.paused?E/L.baseSpeed*100:L.speed/L.baseSpeed*100},set:function(Q){if(ne||L.paused){E=L.baseSpeed*Q/100;return}L.speed=L.baseSpeed*Q/100}}),Object.defineProperty(L,"pausingSpeed",{get:function(){return L.baseSpeed==0?NaN:L.speed/L.baseSpeed*100},set:function(Q){L.speed=L.baseSpeed*Q/100}}),P!==!1&&e.styleTransforms(this,S),this.dispose=function(){cancelAnimationFrame(A)}},e.extend(e.Dynamo,ze.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(t){qe("69.3"),this.cjsEventDispatcher_constructor();var r=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,f=0;f<o.length;f++)l=r.items.indexOf(o[f]),l<0&&r.items.push(o[f]);return r},t&&this.add(t),this.remove=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,f=0;f<o.length;f++)l=r.items.indexOf(o[f]),l>=0&&r.items.splice(l,1);return r},this.pause=function(i,o,l){if(n(i)&&(i=!0),i==r.paused)return;var f=[];if(i){n(l)||(o=null);for(var h=!1,g=0;g<r.items.length;g++)(!n(o)&&n(l)&&!r.items[g].totalFrames||r.items[g].totalFrames&&(!n(o)||!n(l)))&&(r.items[g].pause(!0,o,l),h=!0,f[g]=1,r.items[g].on("pause",function(){r.paused||(_(!0),r.paused=!0,r.dispatchEvent("pause"))},null,!0));h||(_(),r.paused=!0,setTimeout(function(){r.dispatchEvent("pause")},10))}else r.paused=!1,_();function _(){for(var P=0;P<r.items.length;P++)f[P]!=1&&r.items[P].pause(i)}},Object.defineProperty(r,"percentSpeed",{get:function(){return r._percentSpeed},set:function(i){r._percentSpeed=i;for(var o=0;o<r.items.length;o++)r.items[o].percentSpeed=i}}),this.dispose=function(){for(var i=0;i<r.items.length;i++)r.items[i].dispose();return r.items=null,!0}},e.extend(e.Accelerator,ze.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y){var p="obj, width, height, interval, num, life, fade, shrink, warm, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, focusWarm, style, group, inherit",d;if(d=mt(e.Emitter,arguments,p,this))return d;qe("69.9"),this.type="Emitter",this.group=G;var D=j===!1?{}:e.getStyle(this.type,this.group,y);n(t)&&(t=D.obj!=null?D.obj:[new e.Circle(20,e.pink),new e.Circle(20,e.green),new e.Circle(20,e.blue)]),n(r)&&(r=D.width!=null?D.width:300),n(i)&&(i=D.height!=null?D.height:300);var K=v(o);n(o)&&(o=D.interval!=null?D.interval:K=="s"?.02:20),typeof o=="number"&&(o=Math.max(K=="s"?.01:10,o)),n(l)&&(l=D.num!=null?D.num:1),n(T)&&(T=D.trace!=null?T.size:!1),n(N)&&(N=D.traceFadeTime!=null?D.traceFadeTime:P),n(O)&&(O=D.traceShiftX!=null?D.traceShiftX:0),n(S)&&(S=D.traceShiftY!=null?D.traceShiftY:0),a(f,K),n(f)&&(f=D.life!=null?D.life:K=="s"?1:1e3),n(h)&&(h=D.fade!=null?D.fade:!0),n(g)&&(g=D.shrink!=null?D.shrink:!T),n(_)&&(_=D.warm!=null?D.warm:null),a(P,K),n(P)&&(P=D.decayTime!=null?D.decayTime:K=="s"?1:1e3),n(k)&&(k=D.angle!=null?D.angle:{min:0,max:360}),n(x)&&(x=D.force!=null?D.force:5),n(E)&&(E=D.gravity!=null?D.gravity:9.8),n(L)&&(L=D.wind!=null?D.wind:0),n(A)&&(A=D.layers!=null?D.layers:"top"),n(r)&&(r=D.width!=null?D.width:100),n(i)&&(i=D.height!=null?D.height:100),n(q)&&(q=D.horizontal!=null?D.horizontal:!1),n(V)&&(V=D.vertical!=null?D.vertical:!1),n(I)&&(I=D.sink!=null?D.sink:null),!n(I)&&n(ne)&&(ne=D.sinkForce!=null?D.sinkForce:10),n(Q)&&(Q=D.events!=null?D.events:!1),n(U)&&(U=D.startPaused!=null?D.startPaused:!1),n(ee)&&(ee=D.pool!=null?D.pool:!0),n(ae)&&(ae=D.poolMin!=null?D.poolMin:0),n(ie)&&(ie=D.particles!=null?D.particles:new e.Container),n(ce)&&(ce=D.focusWarm!=null?D.focusWarm:!0),t.type=="shape"&&(ce=!1),ie.type="Particles",ie.emitter=this,this.zimContainer_constructor(r,i,null,null,!1),this.type="Emitter";var w=this;this.regX=r/2,this.regY=i/2,w.obj=t,w.particles=ie,w.interval=o,w.num=l,w.life=f,w.fade=h,w.shrink=g,w.decayTime=P,w.decayStart=C,w.trace=T,w.traceFadeTime=N,w.traceShiftX=O,w.traceShiftY=S,w.angle=k,w.emitterForce=x,w.gravity=E,w.wind=L,w.layers=A,w.animation=b,w.random=F,w.horizontal=q,w.vertical=V,w.sink=I,w.sinkForce=ne,w.events=Q,w.startEmitterPaused=w.emitterPaused=U,w.pool=ee,w.poolMin=ae,w.particlesEmitted=0;var Y=[],Ee=0,X=0,Z,pe;e.added(w,ve);function ve(se){if(w.emitterPaused=null,w.on("added",function(){e.loop(w.particles,function(_e){_e.visible=!1}),w.particles.addTo(w.parent)}),pe=se,n(R)&&(pe.isWebGL?R=!1:R=e.mobile()),R&&(pe.snapToPixelEnabled=!0),pe){let _e=function(){var ye=e.isPick(w.life)?e.Pick.getMinMax(w.life).max:w.life;if(n(ye)&&(ye=K=="s"?1:1e3),w.startEmitterPaused){w.pauseEmitter();return}if(t=Array.isArray(w.obj)?w.obj:[w.obj],t.length<=0)return;var Re,de;function Me(Be,he){return Be-he}Array.isArray(w.interval)?(w.interval.sort(Me),Re=w.interval[0]):w.interval.constructor=={}.constructor?Re=w.interval.min:Re=w.interval,Array.isArray(w.num)?(w.num.sort(Me),de=w.num[w.num.length-1]):w.num.constructor=={}.constructor?de=w.num.max:de=w.num,e.loop(e.Pick.choose(w.num),function(){if(w.decayTime>0){var Be={};w.shrink&&(Be.scale=0),w.fade&&(Be.alpha=0)}var he,Ae,Ce;if(w.pool&&Y.length>0&&X>=Math.max(w.poolMin,ye/Re*de))he=Y[Ee++%Y.length],he.visible=!0,Ce=he.trace?he.getChildAt(0):he,Ce.emitShape&&(Ae=Ce.template,Ce.graphics.c().s(Ae.s?e.Pick.choose(Ae.s):null).ss(Ae.ss?e.Pick.choose(Ae.ss):null).sd(Ae.sd?e.Pick.choose(Ae.sd):null,Ae.offset?e.Pick.choose(Ae.offset):null)),he.trace&&he.cacheCanvas&&he.updateCache(),w.layers=="top"?Ce.emitShape?he.addTo(ie,null,!1):he.addTo(ie,ie.numChildren-1):Ce.emitShape?he.addTo(ie,w.layers=="bottom"?0:e.rand(ie.numChildren),!1):he.addTo(ie,w.layers=="bottom"?0:e.rand(ie.numChildren)),T||he.reg("center"),he.scaleX=1,he.scaleY=1,he.alpha=he.originalAlpha,Ce.scaleX=Ce.originalScaleX,Ce.scaleY=Ce.originalScaleY,Ce.rotation=Ce.originalRotation,Ce.color=Ce.originalColor,Ce.endSpurt=!1;else{X++,w.trace&&(he=new e.Container(r,i,null,null,!1),he.trace=!0);var me=e.Pick.choose(e.shuffle(t)[0]);me.type=="shape"?(Ae=me,Ce=new e.Shape(1,1,null,null,null,!1),Ce.emitShape=!0,Ce.template=Ae,Ce.graphics.s(Ae.s?e.Pick.choose(Ae.s):null).ss(Ae.ss?e.Pick.choose(Ae.ss):null).sd(Ae.sd?e.Pick.choose(Ae.sd):null,Ae.offset?e.Pick.choose(Ae.offset):null),w.trace?Ce.addTo(he,null,!1):w.layers=="top"?Ce.addTo(ie,null,!1):Ce.addTo(ie,w.layers=="bottom"?0:e.rand(ie.numChildren),null,!1)):(Ce=me.clone(),Ce.centerReg||Qn(Ce),w.trace?Ce.centerReg(he).loc(-1e3,-1e3):w.layers=="top"?Ce.centerReg(ie):Ce.centerReg(ie,w.layers=="bottom"?0:e.rand(ie.numChildren))),w.trace&&(w.layers=="top"?he.addTo(ie,null,!1):he.addTo(ie,w.layers=="bottom"?0:e.rand(ie.numChildren),!1),he.cache(O,S,r*2,i*2)),w.trace||(he=Ce),he.particle=Ce,he.originalAlpha=he.alpha,Ce.originalAlpha=Ce.alpha,Ce.originalScaleX=Ce.scaleX,Ce.originalScaleY=Ce.scaleY,Ce.originalRotation=Ce.rotation,Ce.originalColor=Ce.color}w.currentParticle=Ce,w.particlesEmitted++,he.particleNormal=!0,he.particleDecaying=!1,he.particleFizzing=!1;var Ne=e.Pick.choose(w.angle),ge=e.Pick.choose(w.emitterForce),Ue=ge*Math.cos(Ne*Math.PI/180),He=ge*Math.sin(Ne*Math.PI/180);Ce.info={position:{x:w.x,y:w.y},velocity:{x:Ue,y:He},sink:n(ne)?null:dt(ne)},w.horizontal&&(Ce.info.position={x:w.x-w.regX+e.rand(0,r),y:w.y-w.regY+(w.vertical?i/2:0)}),w.vertical&&(Ce.info.position={x:w.x-w.regX+(w.horizontal?r/2:0),y:w.y-w.regY+e.rand(0,i)}),Ce.emitShape?Ce.graphics.mt(Ce.info.position.x,Ce.info.position.y):(Ce.x=Ce.info.position.x,Ce.y=Ce.info.position.y),Ce.alpha=Ce.originalAlpha,w.random&&e.loop(w.random,function(Ke,ut){var gt=e.Pick.choose(ut);Ke=="scale"?Ce.sca(gt):(Ke=="x"?Ce.info.position.x=w.horizontal||w.vertical?gt:gt+r/2:Ke=="y"&&(Ce.info.position.y=w.horizontal||w.vertical?gt:gt+i/2),(Ke=="x"||Ke=="y")&&Ce.emitShape&&Ce.graphics.mt(Ce.info.position.x,Ce.info.position.y),Ce[Ke]=gt,Ce.emitShape&&(Ce.x=0,Ce.y=0))}),R&&!Ce.emitShape&&Ce.cache(Ce.getBounds().x-10,Ce.getBounds().y-10,Ce.getBounds().width+20,Ce.getBounds().height+20);var Oe=Ce.emitShape?!1:w.shrink,fe=(he||Ce).life=dt(w.life);if(w.decayTime>0&&(w.fade||Oe||w.trace&&w.traceFadeTime>0)){if(w.trace&&w.traceFadeTime>0&&he.animate({obj:{alpha:0},time:w.traceFadeTime,wait:fe-w.traceFadeTime,waitedCall:function(Ke){Ke.particleNormal=!1,Ke.particleFizzing=!0},call:$,override:!1,id:"decay"}),w.fade||Oe){var Xe={};w.fade&&(Xe.alpha=0),Oe&&(Xe.scaleX=0,Xe.scaleY=0),Ce.animate({obj:Xe,time:w.decayTime,wait:n(w.decayStart)?fe-w.decayTime:w.decayStart,waitedCall:function(Ke){Ke.parent!=w&&(Ke=Ke.parent),Ke.particleNormal=!1,Ke.particleDecaying=!0},call:function(Ke){w.events&&ue("decayed",Ke),Ke.endSpurt&&ue("spurtdecayed",Ke),w.trace&&w.traceFadeTime>0||(n(w.decayStart)||w.decayStart+w.decayTime>w.life?Ke.parent&&$(Ke.parent.trace?Ke.parent:Ke):-function(){var ut=he;e.timeout(fe-(w.decayStart+w.decayTime),function(){$(ut)})}())},override:!1,id:"decay"})}}else he.life=w.life,w.life>0&&-function(){var Ke=he;Ke.timeOut=e.timeout(w.life,function(){$(Ke)})}();if(w.events&&ue("emitted",he),xe(Ce),w.animation){var Ze=e.Pick.choose(w.animation);Array.isArray(Ze)?e.loop(Ze,function(Ke){n(Ke.override)&&(Ke.override=!1),Ce.animate(e.copy(Ke))}):(n(Ze.override)&&(Ze.override=!1),Ce.animate(e.copy(Ze)))}})},J=function(){e.loop(ie,function(ye){if(ye.trace){var Re=ye;ye=ye.getChildAt(0)}var de=ye.info,Me=0,Be=0;if(!n(w.sink)){var he=w.particles.localToGlobal(de.position.x,de.position.y),Ae;w.sink.parent&&w.sink.parent.localToGlobal?Ae=w.sink.parent.localToGlobal(w.sink.x,w.sink.y):Ae=new ze.Point(e.Pick.choose(w.sink.x),e.Pick.choose(w.sink.y));var Ce=e.angle(he.x,he.y,Ae.x,Ae.y);Me=de.sink*Math.cos(Ce*Math.PI/180),Be=de.sink*Math.sin(Ce*Math.PI/180)}var me=w.wind+Me,Ne=w.gravity+Be;de.velocity.x+=me*te,de.velocity.y+=Ne*te,de.position.x+=de.velocity.x*te*100,de.position.y+=de.velocity.y*te*100,ye.emitShape?ye.graphics.lt(de.position.x,de.position.y):(ye.x=de.position.x,ye.y=de.position.y),w.trace&&Re&&Re.cacheCanvas&&Re.updateCache(ye.emitShape?null:"source-over")})};var be=w.parent.getChildIndex(w);w.parent.addChildAt(ie,be),!q&&!V&&w.centerReg(null,null,!1),w.zimInterval=e.interval(w.interval,_e,null,!0,!0);var te=0;Z=w.emitterTicker=e.Ticker.add(J,pe),te=1/e.Ticker.framerate,w.focusWarm=ce,w.doWarm=function(ye){if(n(ye)||ye===!0){var Re;f.max?Re=f.max:Array.isArray(f)?Re=e.arrayMinMax(f).max:Re=dt(f);var de;o.min?de=o.min:Array.isArray(o)?de=e.arrayMinmin(o).min:de=dt(o),ye=Math.min(200,Math.round(Re/de))}var Me=w.pool;w.pool=!1;var Be=Math.round(o*e.Ticker.framerate);e.loop(Math.round(ye*o*e.Ticker.framerate),function(he){he%Be==0&&_e(),e.loop(ie,function(Ae){Ae.warmTick?Ae.warmTick++:Ae.warmTick=1,Ae.warmTick/e.Ticker.framerate>Ae.life&&$(Ae)}),J()}),e.loop(ie,function(he){if(he.zimTweens){var Ae=he.warmTick/e.Ticker.framerate/he.life*100;Ae>=100&&(he.alpha=0),he.percentComplete=Ae}}),w.pool=Me},_&&w.doWarm(_)}}w.particles.noMouse();function $(se){if(w.events&&ue("fizzed",se),(se.trace?se.getChildAt(0).endSpurt:se.endSpurt)&&(ue("spurtfizzed",se),w.spurting=!1),w.pool&&se.pooled!="end")if(se.pooled){se.visible=!1;return}else{se.pooled=!0,Y&&Y.push(se),se.visible=!1;return}w.removeChild(se),w.trace&&se.uncache(),se=null}function ue(se,be){if(!n(be)){var te=new ze.Event(se);te.particle=be.trace?be.getChildAt(0):be,w.dispatchEvent(te)}}function xe(se){n(w.spurtCount)&&n(w.spurtNum)||(w.spurtCount++,w.spurtCount>=w.spurtNum&&Ye(se))}function Ye(se){w.pauseEmitter(),w.spurtCount=w.spurtNum=null,!n(se)&&(ue("spurted",se),se.endSpurt=!0)}Object.defineProperty(w,"interval",{get:function(){return o},set:function(se){o=se,w.zimInterval&&(w.zimInterval.time=o)}}),this.removeFrom=function(){w.parent&&w.parent.removeChild(w),w.particles.removeFrom()},this.spurting=!1,this.spurt=function(se,be,te){var _e="num, time, restart",J;return(J=mt(w.spurt,arguments,_e))?J:(n(be)||(e.timeout(e.Pick.choose(be),function(){Ye(w.currentParticle)},!0),w.spurting=!0),n(se)||(w.spurtNum=e.Pick.choose(se),w.spurtCount=0,w.spurting=!0),w.pauseEmitter(!1,te,null,!0),w)},this.clearPool=function(){e.loop(w.particles,function(se){se.pooled="end",se.visible||w.removeChild(se)},!0),X=0,Ee=0,Y=[]},w.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(se,be,te,_e){if(w.startEmitterPaused=null,n(se)&&(se=!0),n(be)&&(be=!1),n(te)&&(te=!1),se){if(w.emitterPaused)return w;te&&(Z&&e.Ticker.remove(Z),e.loop(w.particles,function(J){J.pauseAnimate(),J.trace&&J.getChildAt(0).pauseAnimate(),J.timeOut&&J.timeOut.pause()})),w.zimInterval.pause(),w.emitterPaused=!0}else{if(!w.emitterPaused)return w;be&&(e.loop(w.particles,function(J){J.stopAnimate(),J.timeOut&&J.timeOut.clear(),J.trace&&J.getChildAt(0).pauseAnimate()}),w.removeAllChildren()),pe&&Z&&!e.Ticker.has(pe,Z)&&(e.Ticker.add(Z,pe),e.loop(w.particles,function(J){J.pauseAnimate(!1),J.timeOut&&J.timeOut.pause(!1),J.trace&&J.getChildAt(0).pauseAnimate(!1)})),w.zimInterval&&w.zimInterval.pause(!1,_e),w.emitterPaused=!1}return w},this.resize=function(se,be){n(se)||(r=se),n(be)||(i=be),w.setBounds(0,0,r,i),!q&&!V&&w.centerReg(),w.clearPool()},j!==!1&&e.styleTransforms(this,D),this.clone=function(se){var be;return Array.isArray(w.obj)||w.obj.constructor=={}.constructor?be=e.copy(w.obj):w.obj.clone?be=w.obj.clone(se):be=w.obj,w.cloneProps(new e.Emitter(be,r,i,w.interval,w.num,w.life,w.fade,w.shrink,w.decayTime,w.decayStart,w.trace,w.traceFadeTime,w.traceShiftX,w.traceShiftY,w.angle,w.emitterForce,w.gravity,w.wind,w.layers,w.animation,e.copy(w.random),w.horizontal,w.vertical,w.sink,w.sinkForce,R,w.events,U,w.pool,w.poolMin,j,w.group,y))},this.dispose=function(){return w.zimInterval&&w.zimInterval.clear(),Z&&e.Ticker.remove(Z),e.loop(Y,function(se){se&&se.dispose()}),ie&&ie.dispose&&ie.dispose(),w.currentParticle&&w.currentParticle.dispose&&w.currentParticle.dispose(),t&&Array.isArray(t)?e.loop(t,function(se){se.dispose&&se.dispose()}):t&&t.dispose&&t.dispose(),ie=w.currentParticle=w.particles=t=w.obj=Y=w.poolList=null,!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.Generator=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F){var q="color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",V;if(V=mt(e.Generator,arguments,q,this))return V;qe("69.92"),this.group=b;var I=A===!1?{}:e.getStyle("Generator",this.group,F);n(k)&&(k=I.frame!=null?I.frame:le.zdf);var ne=k.stage;n(t)&&(t=I.color!=null?I.color:null),n(r)&&(r=I.strokeColor!=null?I.strokeColor:e.white),n(i)&&(i=I.strokeWidth!=null?I.strokeWidth:1),n(h)&&(h=I.maxCount!=null?I.maxCount:1e3),n(g)&&(g=I.boundary!=null?I.boundary:new e.Boundary(0,0,ne.width,ne.height)),n(_)&&(_=I.drawCount!=null?I.drawCount:1),n(P)&&(P=I.drawPause!=null?I.drawPause:!0),n(C)&&(C=I.drawSpacebarPause!=null?I.drawSpacebarPause:!0),n(T)&&(T=I.startX!=null?I.startX:ne.width/2),n(N)&&(N=I.startY!=null?I.startY:ne.height/2),n(O)&&(O=I.cache!=null?I.cache:!1);var R=this.drawing=new e.Container(g.x,g.y,g.width,g.height).addTo(ne),Q=this.shape=new e.Shape(g.width,g.height).addTo(R);this.drawCount=_,n(P)&&(P=!0),O&&Q.cache(g.x,g.y,g.width,g.height),this.zimContainer_constructor(g.x,g.y,g.width,g.height),this.type="Generator";var U=this;if(U.draw=null,E){U.drawCount=10,!n(l)&&n(o)&&(o=l),l=null;var ee=new e.Loader;U.outputNum=0,U.outputName=E===!0?"gen_":E.match(/_$/)?E:E+"_"}this.color=t,this.strokeColor=r,this.strokeWidth=i;var ae=T,ie=N;this.fill=function(p){return U.color=p,U.currentColor=dt(U.color),Q.f(U.currentColor),this},this.stroke=function(p,d){return n(p)||(U.strokeColor=p,U.currentStrokeColor=dt(U.strokeColor),Q.s(U.currentStrokeColor)),n(d)||(U.strokeWidth=d,U.currentStrokeWidth=dt(U.strokeWidth),Q.ss(U.currentStrokeWidth)),this},this.noStroke=function(){return U.strokeColor=U.currentStrokeColor=null,U.strokeWidth=U.currentStrokeWidth=null,Q.s(),Q.ss(1),this},Q.matrix=Q.getMatrix(),this.translate=function(p,d){n(p)&&(p=0),n(d)&&(d=0),p=dt(p),d=dt(d);var D=Q.matrix.transformPoint(p,d);return ae=D.x,ie=D.y,Q.mt(ae,ie),Q.matrix.translate(p,d),this},this.rotate=function(p){return n(p)&&(p=0),p=dt(p),Q.matrix.rotate(p),this},this.scale=function(p,d){return n(p)&&(p=1),n(d)&&(d=p),p=dt(p),d=dt(d),Q.matrix.scale(p,d),this},this.skew=function(p,d){return n(p)&&(p=0),n(d)&&(d=0),p=dt(p),d=dt(d),Q.matrix.skew(p,d),this},S&&(U.linePoints=[]),this.line=function(p,d,D,K){n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=0),n(K)&&(K=0),p=dt(p),d=dt(d),D=dt(D),K=dt(K),(S=="zero"||S=="nonzero"&&p&&d)&&U.linePoints.push([p,d]),U.translate(p,d);var w=Q.matrix.transformPoint(D,K);return ae=w.x,ie=w.y,Q.lt(ae,ie),S&&U.linePoints.push([ae,ie]),Q.matrix.translate(D,K),this},this.arc=function(p,d,D,K,w,Y){n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=50),p=dt(p),d=dt(d),D=dt(D),D=Math.abs(D),n(K)&&(K=0),n(w)&&(w=180),K=dt(K),w=dt(w),n(Y)&&(Y=!1),Y=dt(Y),U.translate(p,d);var Ee=Q.matrix.transformPoint(0,0);Q.decomp||(Q.decomp={}),Q.matrix.decompose(Q.decomp);var X=(Math.abs(Q.decomp.scaleX)+Math.abs(Q.decomp.scaleY))/2,Z=Q.decomp.rotation||0,pe=D*X;return Q.mt(Ee.x+pe*Math.cos((K+Z)*Math.PI/180),Ee.y+pe*Math.sin((K+Z)*Math.PI/180)),Q.a(Ee.x,Ee.y,pe,(K+Z)*Math.PI/180,(w+Z)*Math.PI/180,Y),this},this.curve=function(p,d,D,K,w,Y){n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=50),n(K)&&(K=50),n(w)&&(w=100),n(Y)&&(Y=0),p=dt(p),d=dt(d),D=dt(D),K=dt(K),w=dt(w),Y=dt(Y),U.translate(p,d);var Ee=Q.matrix.transformPoint(D,K),X=Q.matrix.transformPoint(w,Y),Z=X.x,pe=X.y;return Q.qt(Ee.x,Ee.y,Z,pe),Q.matrix.translate(w,Y),this},this.bezier=function(p,d,D,K,w,Y,Ee,X){n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=50),n(K)&&(K=50),n(w)&&(w=-50),n(Y)&&(Y=-50),n(Ee)&&(Ee=100),n(X)&&(X=0),p=dt(p),d=dt(d),D=dt(D),K=dt(K),w=dt(w),Y=dt(Y),Ee=dt(Ee),X=dt(X),U.translate(p,d);var Z=Q.matrix.transformPoint(D,K),pe=Q.matrix.transformPoint(w,Y),ve=Q.matrix.transformPoint(Ee,X),$=ve.x,ue=ve.y;return Q.bt(Z.x,Z.y,pe.x,pe.y,$,ue),Q.matrix.translate(Ee,X),this},this.rectangle=function(p,d,D,K,w,Y,Ee,X){if(n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=100),n(K)&&(K=D),p=dt(p),d=dt(d),D=dt(D),K=dt(K),!w&&!Y&&!Ee&&!X){U.translate(p,d);var Z=Q.matrix.transformPoint(0,0),pe=Q.matrix.transformPoint(D,0),ve=Q.matrix.transformPoint(D,K),$=Q.matrix.transformPoint(0,K);return Q.mt(Z.x,Z.y).lt(pe.x,pe.y).lt(ve.x,ve.y).lt($.x,$.y).lt(Z.x,Z.y).lt(pe.x,pe.y),Q.mt(Z.x,Z.y),this}n(w)&&(w=0),n(Y)&&(Y=w),n(Ee)&&(Ee=w),n(X)&&(X=w),w=dt(w),Y=dt(Y),Ee=dt(Ee),X=dt(X);var ue=(D<K?D:K)/2,xe=0,Ye=0,se=0,be=0;ue=Math.abs(ue),w<0&&(w*=xe=-1),w>ue&&(w=ue),Y<0&&(Y*=Ye=-1),Y>ue&&(Y=ue),Ee<0&&(Ee*=se=-1),Ee>ue&&(Ee=ue),X<0&&(X*=be=-1),X>ue&&(X=ue),U.translate(p,d),Q.decomp||(Q.decomp={}),Q.matrix.decompose(Q.decomp);var te=(Math.abs(Q.decomp.scaleX)+Math.abs(Q.decomp.scaleY))/2,_e=D<0?-1:1,J=K<0?-1:1,ye=Q.matrix.transformPoint(D-Y*_e,0),Re=Q.matrix.transformPoint(D+Y*Ye*_e,-Y*Ye*J),de=Q.matrix.transformPoint(D,Y*J),Me=Q.matrix.transformPoint(D,K-Ee*J),Be=Q.matrix.transformPoint(D+Ee*se*_e,K+Ee*se*J),he=Q.matrix.transformPoint(D-Ee*_e,K),Ae=Q.matrix.transformPoint(X*_e,K),Ce=Q.matrix.transformPoint(-X*be*_e,K+X*be*J),me=Q.matrix.transformPoint(0,K-X*J),Ne=Q.matrix.transformPoint(0,w*J),ge=Q.matrix.transformPoint(-w*xe*_e,-w*xe*J),Ue=Q.matrix.transformPoint(w*_e,0);return Q.mt(ye.x,ye.y).at(Re.x,Re.y,de.x,de.y,Y*te).lt(Me.x,Me.y).at(Be.x,Be.y,he.x,he.y,Ee*te).lt(Ae.x,Ae.y).at(Ce.x,Ce.y,me.x,me.y,X*te).lt(Ne.x,Ne.y).at(ge.x,ge.y,Ue.x,Ue.y,w*te).cp(),this},this.circle=function(p,d,D,K,w){n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=50),n(K)&&(K=100),n(w)&&(w=!0),p=dt(p),d=dt(d),D=dt(D),K=dt(K),D=Math.abs(D),U.translate(p,d);var Y=Q.matrix.transformPoint(0,0);Q.decomp||(Q.decomp={}),Q.matrix.decompose(Q.decomp);var Ee=(Math.abs(Q.decomp.scaleX)+Math.abs(Q.decomp.scaleY))/2,X=Q.decomp.rotation||0,Z=D*Ee;if(U.circleHeight=Z*2,typeof K=="number"&&K>=0&&K<100){var pe=360*K/100/2;Q.mt(Y.x+Z*Math.cos((-pe-90+X)*Math.PI/180),Y.y+Z*Math.sin((-pe-90+X)*Math.PI/180)),Q.a(Y.x,Y.y,Z,(-pe-90+X)*Math.PI/180,(pe-90+X)*Math.PI/180,!1),w&&Q.cp(),U.circleHeight=Z-Math.cos(pe*Math.PI/180)*Z}else Q.mt(Y.x+Z,Y.y),Q.a(Y.x,Y.y,Z,0,Math.PI*2);return this},this.elipse=function(p,d,D,K){n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=100),n(K)&&(K=50),p=dt(p),d=dt(d),D=dt(D),K=dt(K),U.translate(p,d);var w=Q.matrix.transformPoint(-D/2,-K/2);Q.decomp||(Q.decomp={}),Q.matrix.decompose(Q.decomp);var Y=Q.decomp.scaleX,Ee=Q.decomp.scaleY;return Q.de(w.x,w.y,D*Y,K*Ee),this},this.poly=function(p,d,D,K,w,Y){n(p)&&(p=0),n(d)&&(d=0),n(D)&&(D=100),n(K)&&(K=5),n(w)&&(w=0),n(Y)&&(Y=0),p=dt(p),d=dt(d),D=dt(D),K=dt(K),w=dt(w),Y=dt(Y),D=Math.abs(D),U.translate(p,d);var Ee=Q.matrix.transformPoint(0,0);Q.decomp||(Q.decomp={}),Q.matrix.decompose(Q.decomp);var X=(Math.abs(Q.decomp.scaleX)+Math.abs(Q.decomp.scaleY))/2,Z=Q.decomp.rotation||0,pe=D*X;return Q.dp(Ee.x,Ee.y,pe,K,w,Z),this},this.closePath=this.close=this.cp=function(){return Q.cp(),this},this._noise=new e.Noise(x),this.noise=function(){if(arguments.length==1)return(this._noise.simplex1D.apply(null,arguments)+1)/2;if(arguments.length==2)return(this._noise.simplex2D.apply(null,arguments)+1)/2;if(arguments.length==3)return(this._noise.simplex3D.apply(null,arguments)+1)/2;if(arguments.length==4)return(this._noise.simplex4D.apply(null,arguments)+1)/2},this.stack=[],this.colorStrokeStack=[],this.push=function(){return U.stack.push(Q.matrix.clone()),U.colorStrokeStack.push([U.color,U.strokeColor,U.strokeWidth,U.currentColor,U.currentStrokeColor,U.currentStrokeWidth]),this},this.pop=function(){Q.matrix=U.stack.pop()||Q.matrix;var p=U.colorStrokeStack.pop()||[U.color,U.strokeColor,U.strokeWidth,U.currentColor,U.currentStrokeColor,U.currentStrokeWidth];return U.color=p[0],U.strokeColor=p[1],U.strokeWidth=p[2],U.currentColor=p[3],U.currentStrokeColor=p[4],U.currentStrokeWidth=p[5],Q.f(U.currentColor).s(U.currentStrokeColor).ss(U.currentStrokeWidth),Q.mt(Q.matrix.x,Q.matrix.y),this},this.blit=function(){return Q.updateCache("source-over"),Q.c(),this},this.step=function(){return U.draw&&y(),this},n(U.color)||this.fill(U.color),!n(U.strokeColor)&&U.strokeWidth?this.stroke(U.strokeColor,U.strokeWidth):U.noStroke(),this.translate(ae,ie),typeof f=="function"&&(this.setup=f,e.timeout(.01,function(){f(0,U.count,U),O&&Q.updateCache(),ne.update()}));var ce=0;this.maxCount=h,this.resetup=function(p){return n(p)&&(p=!0),ce=0,p&&U.shape.c(),n(U.color)||this.fill(U.color),!n(U.strokeColor)&&U.strokeWidth?this.stroke(U.strokeColor,U.strokeWidth):U.noStroke(),this.reset(),this.setup&&(f(0,U.count,U),O&&Q.updateCache(),ne.update()),this},this.stampNum=0,typeof l=="function"&&(this.stamp=l,e.timeout(.015,function(){G(0)})),this.restamp=function(p,d){return n(p)&&(p=!0),n(d)&&(d=!0),ce=0,p&&U.shape.c(),d&&U.resetup(p),G(0),this},this.reset=function(){return this.fill(t),!n(r)&&i?this.stroke(r,i):this.noStroke(),Q.matrix.identity(),this.translate(T,N),this},this.clear=function(){return this.shape.c(),this};function j(){ee.save({content:ne,filename:U.outputName+e.decimals(U.outputNum,null,null,6),type:L}),U.outputNum++}E&&(ne.update(),j());function G(p){U.stampNum++;var d=e.loop(U.maxCount,function(D,K){if(U.paused)return U.pausedCount=D,!1;if(U.changeCount)return U.changeCount=!1,!1;ce=D+1;var w=l(D+1,K,U,U.stampNum);if(U.currentColor=dt(U.color),Q.f(U.currentColor),U.currentStrokeColor=dt(U.strokeColor),Q.s(U.currentStrokeColor),U.currentStrokeWidth=dt(U.strokeWidth),Q.ss(U.currentStrokeWidth),E&&(ne.update(),j()),w)return w},null,null,p);O&&Q.updateCache(),d&&U.dispatchEvent("complete"),ne.update()}U.iterator=0,typeof o=="function"&&(this.draw=o,f?setTimeout(function(){U.ticker=e.Ticker.add(y)},100):this.ticker=e.Ticker.add(y),U.generatorPaused=!1,P&&(U.pauseEvent=ne.on("stagemousedown",function(){U.count>=U.maxCount||U.pauseTimeout||(e.Ticker.has(U.ticker)?(e.Ticker.remove(U.ticker),U.generatorPaused=!0,U.dispatchEvent("generatorpaused")):(U.ticker=e.Ticker.add(U.ticker),U.generatorPaused=!1,U.dispatchEvent("generatorunpaused")))})),C&&(U.pauseSpacebarEvent=k.on("keydown",function(p){U.count>=U.maxCount||U.pauseTimeout||p.keyCode==20&&(e.Ticker.has(U.ticker)?(e.Ticker.remove(U.ticker),U.generatorPaused=!0,U.dispatchEvent("generatorpaused")):(U.ticker=e.Ticker.add(U.ticker),U.generatorPaused=!1,U.dispatchEvent("generatorunpaused")))})));function y(){U.iterator++,U.iterator%Math.ceil(U.drawCount)==0&&(U.count++,U.draw(U.count,U.maxCount,U),O&&U.blit(),U.currentColor=dt(U.color),Q.f(U.currentColor),U.currentStrokeColor=dt(U.strokeColor),Q.s(U.currentStrokeColor),U.currentStrokeWidth=dt(U.strokeWidth),Q.ss(U.currentStrokeWidth),U.dispatchEvent("drawing"),ne.update(),E&&j()),U.maxCount&&U.count>=U.maxCount&&(U.dispatchEvent("complete"),e.Ticker.remove(U.ticker))}this.redraw=function(p,d){return n(p)&&(p=!0),U.reset(),n(d)&&(d=!0),U.ticker&&e.Ticker.remove(U.ticker),U.iterator=0,U.count=0,p&&U.shape.c(),d?(U.resetup(p),setTimeout(function(){U.ticker&&(U.ticker=e.Ticker.add(U.ticker))},100)):U.ticker&&(U.ticker=e.Ticker.add(U.ticker)),this},this.paused=!1,this.pause=function(p,d){if(n(p)&&(p=!0),!(U.count>=U.maxCount)){if(p==this.paused)return this;this.paused=p,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?U.ticker&&e.Ticker.remove(U.ticker):U.ticker?U.ticker=e.Ticker.add(U.ticker):G(U.pausedCount,U.maxCount),setTimeout(function(){ne.update()},20),d&&(this.pauseTimeout=e.timeout(d,function(){U.pause(!U.paused),U.pauseTimeout=null})),U.dispatchEvent(U.paused?"paused":"unpaused")}},this.outOfBounds=function(p,d){n(p)&&(p=0),n(d)&&(d=p);var D=U.shape.stage;if(D)return U.currentX>D.width-p||U.currentX<0+p||U.currentY>D.height-d||U.currentY<0+d},this.stop=function(){U.pause(),U.pauseEvent&&ne.off("stagemousedown",U.pauseEvent),U.pauseSpaceEvent&&k.off("keydown",U.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return ce},set:function(p){ce=p,U.stamp&&(U.changeCount=!0,setTimeout(function(){G(ce,U.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return ae},set:function(){Et&&ht("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return ie},set:function(){Et&&ht("Generator() - currentY is read only")}}),this.clone=function(){return U.cloneProps(new e.Generator(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,A,U.group,F))},U.dispose=function(p,d,D){return U.pause(),U.ticker&&e.Ticker.remove(U.ticker),U.pauseEvent&&ne.off("stagemousedown",U.pauseEvent),U.pauseSpacebarEvent&&k.off("keydown",U.pauseSpacebarEvent),U._noise&&(U._noise=null),U.shape&&U.shape.dispose(),U.drawing&&U.drawing.dispose(),U.shape=U.drawing=null,D||U.zimContainer_dispose(),!0},A!==!1&&e.styleTransforms(this,I)},e.extend(e.Generator,e.Container,["clone","dispose"],"zimContainer",!1),e.Pen=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee){var ae="size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, holdDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, pullColor, pullThickness, style, group, inherit",ie;if(ie=mt(e.Pen,arguments,ae,this))return ie;qe("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=U;var ce=Q===!1?{}:e.getStyle(this.type,this.group,ee);n(i)&&(i=ce.penType!=null?ce.penType:"line");var j={size:2,color:e.dark,spread:{min:5,max:20},borderColor:e.darker,borderWidth:0},G={line:{size:2},kitetail:{size:{min:5,max:20},color:e.series(e.pink,e.blue,e.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:e.green,size:3,spread:{min:10,max:30}},hair:{color:[e.pink,e.blue],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:[e.dark,e.darker,e.grey]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};n(G[i])&&(i="line"),n(t)&&(t=ce.size!=null?ce.size:n(G[i].size)?j.size:G[i].size),n(r)&&(r=ce.color!=null?ce.color:n(G[i].color)?j.color:G[i].color),n(o)&&(o=ce.damp!=null?ce.damp:.5),o===!1&&(o=1),n(l)&&(l=ce.spread!=null?ce.spread:n(G[i].spread)?j.spread:G[i].spread),n(f)&&(f=ce.borderColor!=null?ce.borderColor:n(G[i].borderColor)?j.borderColor:G[i].borderColor),n(h)&&(h=ce.borderWidth!=null?ce.borderWidth:n(G[i].borderWidth)?j.borderWidth:G[i].borderWidth),n(g)&&(g=ce.end!=null?ce.end:e.isPick(t)||e.isPick(r)||i!="line"?"butt":"round"),n(N)&&(N=ce.cropScale!=null?ce.cropScale:1),n(C)&&(C=ce.cache!=null?ce.cache:!0),n(O)&&(O=ce.undo!=null?ce.undo:0),n(S)&&(S=ce.undoKeys!=null?ce.undoKeys:!0),n(k)&&(k=ce.move!=null?ce.move:!0),n(E)&&(E=ce.deleteable!=null?ce.deleteable:!0),n(L)&&(L=ce.doubleClickDelete!=null?ce.doubleClickDelete:!0),n(A)&&(A=ce.holdDelete!=null?ce.holdDelete:!0),n(x)&&(x=ce.onTop!=null?ce.onTop:!0),n(b)&&(b=ce.immediateStop!=null?ce.immediateStop:"both"),n(F)&&(F=ce.lineAlpha!=null?ce.lineAlpha:1),n(q)&&(q=ce.lineBlendMode!=null?ce.lineBlendMode:"normal"),n(_)&&(_=ce.paper!=null?ce.paper:new e.Container),n(P)&&(P=ce.nib!=null?ce.nib.clone():null),n(V)&&(V=ce.frame!=null?ce.frame:le.zdf),n(I)&&(I=ce.dashed!=null?ce.dashed:null),I===!0&&(I=[3,100]),n(ne)&&(ne=ce.pullColor!=null?ce.pullColor:null),n(R)&&(R=ce.pullThickness!=null?ce.pullThickness:1);var y=this;this.dampX=new e.Damp(null,o),this.dampY=new e.Damp(null,o);var p=!0;this.drawing=!1,this.immediateStop=b,this.undoLevels=O,this.undoKeys=S,this.move=k,this.draggable=!0,this.lineAlpha=F,this.lineBlendMode=q;var d=y.shape=new e.Shape,D=V.stage.width,K=V.stage.height,w,Y,Ee,X;y.paperNum=0,y.sizeScale=1,y.spreadScale=1,y.sizeFactor=1,y.spreadFactor=1,y.pullThickness=R,y.stop=function(){};var Z;this.added(function(te){Z=te,y.paper=_,D=y.stage.width,K=y.stage.height,n(P)?y.stageDown=Z.on("stagemousedown",function(de){y.dispatchEvent("start")}):y.zimDown?y.nib=P.addTo(y):(y.nib=P.addTo(y.parent,y.parent.getChildIndex(y)),y.nib.x=y.x,y.nib.y=y.y,y.nib.mouseEnabled=!1,y.stageDown=Z.on("stagemousedown",function(de){Z=de.target.stage,y.nibEvent=Z.on("stagemousemove",_e),y.dispatchEvent("start")}),y.stageUp=Z.on("stagemouseup",function(){Z.off("stagemousemove",y.nibEvent)}));function _e(de){y.drawing&&(y.nib.x=de.stageX/e.scaX,y.nib.y=de.stageY/e.scaY)}y.zimDragCheck=!1,y.stop=function(){y.stopCheck(!0)},y.infinite=!1,y.stopCheck=function(de){if(de)y.drawing=!1,y.infinite=!1;else if(y.infinite||y.zimDragCheck||!y.immediateStop&&y.drawing)return;y.immediate(y.x,y.y),setTimeout(function(){var Me;if(!y.drawing){if(C?(d.cache(-(D*N-D)/2,-(K*N-K)/2,D*N,K*N),Me=_.bitmap=new e.Bitmap(d.cacheCanvas).reg((D*N-D)/2,(K*N-K)/2).addTo(_),d.graphics.clear(),d.uncache(),d.top()):Me=d,y.undoLevels>0){var Be={paper:_,line:Me};O.push(Be),O.length>y.undoLevels&&O.shift(),y.dispatchEvent("recordUndo")}C||(d=new e.Shape().clone().addTo(_)),y.lastSegment=Me,y.lastSelected=Me,Me.alpha=y.lineAlpha,Me.blendMode=y.lineBlendMode,Me.paper=_,y.dispatchEvent("stop"),y.dispatchEvent("change")}},y.immediateStop||de?0:50)};var J=0;y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.drawX=y.x,y.lastY=y.lastMidY=y.drawY=y.y;var ye,Re;y.ticker=e.Ticker.add(function(){if(y.parent){var de=y.dampX.convert(p?y.x:y.finishX),Me=y.dampY.convert(p?y.y:y.finishY),Be=y.parent.localToLocal(de,Me,d);if(Math.abs(y.lastX-de)+Math.abs(y.lastY-Me)<1){if(y.drawing&&(y.drawing=!1,y.zimDown?(y.x=y.lastX=y.lastMidX=p?y.x:y.finishX,y.y=y.lastY=y.lastMidY=p?y.y:y.finishY):(y.x=y.finishX=y.lastX=y.lastMidX=de,y.y=y.finishY=y.lastY=y.lastMidY=Me),y.stopCheck(),ye=Re=null),y.lastX=y.lastMidX=de,y.lastY=y.lastMidY=Me,_){var he=_.localToLocal(0,0,y.parent);y.lastMidX-=he.x,y.lastMidY-=he.y}return}else{var Ae=e.Pick.choose(t)*y.sizeScale*y.sizeFactor,Ce=e.Pick.choose(l)*y.spreadScale*y.spreadFactor;y.drawing||($=[],_.getChildIndex(d)!=_.numChildren-1&&d.top()),y.drawing=!0,y.dispatchEvent("drawing")}var me=y.parent.localToLocal(y.lastX,y.lastY,d),Ne;_?Ne=_.localToLocal(y.lastMidX,y.lastMidY,d):Ne=y.parent.localToLocal(y.lastMidX,y.lastMidY,d);var ge,Ue,He;if(i=="splatter")for(var Oe=0;Oe<=3;Oe++){var fe=e.rand(360)*Math.PI/180,Xe=Ce,Ze={x:de+Xe*Math.cos(fe),y:Me+Xe*Math.sin(fe)},Ke=y.parent.localToLocal(Ze.x,Ze.y,d);d.graphics.mt(Ke.x,Ke.y).f(e.Pick.choose(r)).dc(Ke.x,Ke.y,Ae/2)}else i=="grass"||i=="hair"||i=="city"?((i=="grass"||i=="hair")&&(ge=y.lastX+(de-y.lastX)/2,Ue=y.lastY+(Me-y.lastY)/2,He=y.parent.localToLocal(ge,Ue,d),d.graphics.s(e.Pick.choose(r)).ss(Ae,g).mt(He.x,He.y).lt(He.x+e.rand(-Ce/4,Ce/4),i=="hair"?He.y+Ce:He.y-Ce)),(i=="grass"||i=="hair"||i=="city"&&J%3==0)&&d.graphics.s(e.Pick.choose(r)).ss(Ae,g).mt(Be.x,Be.y).lt(Be.x+(i=="city"?0:e.rand(-Ce/4,Ce/4)),i=="hair"?He.y+Ce:Be.y-Ce),J++):(i=="kitetail"&&d.graphics.s(e.Pick.choose(r)).ss(Ae,g),i=="barbwire"?(d.graphics.s(e.Pick.choose(r)).ss(Ae,g),ge=y.lastX+(de-y.lastX)/2+e.rand(-Ce,Ce),Ue=y.lastY+(Me-y.lastY)/2+e.rand(-Ce,Ce)):(ge=y.lastX+(de-y.lastX)/2,Ue=y.lastY+(Me-y.lastY)/2),He=y.parent.localToLocal(ge,Ue,d),i!="line"&&d.graphics.qt(me.x,me.y,He.x,He.y));if(h>0&&i!="line"&&(ge=y.lastX+(de-y.lastX)/2,Ue=y.lastY+(Me-y.lastY)/2,He=y.parent.localToLocal(ge,Ue,d),d.graphics.s(e.Pick.choose(f)).ss(e.Pick.choose(h)).mt(Ne.x,Ne.y).qt(me.x,me.y,He.x,He.y),i=="splatter"&&d.graphics.es()),i=="splatter")d.graphics.f(e.Pick.choose(r));else if(i!="kitetail")if(i=="line"){if(e.isPick(r)||Ae!=Re){var ut=e.Pick.choose(r);(ut!=ye||Ae!=Re)&&d.graphics.s(ut).ss(Ae,g),ye=ut,Re=Ae}}else d.graphics.s(e.Pick.choose(r)).ss(Ae,g);i!="grass"&&i!="hair"&&i!="city"&&i!="splatter"&&d.graphics.mt(Ne.x,Ne.y).qt(me.x,me.y,He.x,He.y),I&&d.graphics.sd(I),y.lastX=de,y.lastY=Me,He&&(y.lastMidX=He.x,y.lastMidY=He.y),y.drawX=y.lastMidX||0,y.drawY=y.lastMidY||0}}),n(ne)||pe(Z),y.mouseChildren=!1});function pe(te){var _e=te.frame;y.ppdEvent&&y.off("drawing",y.ppdEvent),y.ppsEvent&&y.off("stop",y.ppsEvent),y.ppmEvent&&te.off("stagemousedown",y.ppmEvent),y.pullShape||(y.pullShape=new e.Shape),y.ppdEvent=y.on("drawing",function(){setTimeout(function(){var J=_.localToGlobal(y.drawX,y.drawY);y.pullShape.c().s(ne).ss(y.pullThickness).mt(_e.mouseX,_e.mouseY).lt(J.x,J.y)},10)}),y.ppsEvent=y.on("stop",function(){y.pullShape.removeFrom(),y.pullShape.c()}),y.ppmEvent=te.on("stagemousedown",function(){y.pullShape.addTo(te),y.immediate(_e.mouseX,_e.mouseY),y.motionController&&y.motionController.immediate(_e.mouseX,_e.mouseY)})}function ve(){y.ppdEvent&&y.off("drawing",y.ppdEvent),y.ppsEvent&&y.off("stop",y.ppsEvent),y.ppmEvent&&y.off("stagemousedown",y.ppmEvent),y.pullShape&&y.pullShape.dispose()}O=[];var $=[];this.saveState=function(te,_e,J){var ye=te.type=="Container"?"paper":"line",Re={paper:y.paper};Re[ye]=te,Re[ye+"Transform"]={x:te.x,y:te.y,r:te.rotation,a:te.alpha,rX:te.regX,rY:te.regY,sX:te.scaleX,sY:te.scaleY,skX:te.skewX,skY:te.skewY,v:te.visible},!n(_e)&&!n(J)&&_e!=J&&(Re.startLayer=_e,Re.endLayer=J),O.push(Re),y.dispatchEvent("recordUndo"),O.length>y.undoLevels&&O.shift()};var ue={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var te=O.pop();if(te){if($.push(te),te.clear){for(var _e=0;_e<te.clear.length;_e++)te.paper.addChild(te.clear[_e]);te.paper.addChild(d)}else te.line&&te.lineTransform?(n(te.startLayer)||(d.top(),te.paper.setChildIndex(te.line,Ee)),xe("line",te.line)):te.line?te.line.removeFrom():te.paperTransform&&xe("paper",te.paper);y.lastPaper=y.paper,te.paper!=y.paper&&(y.paper=te.paper,y.dispatchEvent("paperChange")),y.dispatchEvent("change"),y.dispatchEvent("undo"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&y.stage&&y.stage.update()}};function xe(te,_e){for(var J,ye=O.length-1;ye>=0;ye--)if(O[ye][te]==_e&&O[ye][te+"Transform"]){J=O[ye][te+"Transform"];break}J||(J=e.copy(ue)),_e.x=J.x,_e.y=J.y,_e.alpha=J.a,_e.rotation=J.r,_e.regX=J.rX,_e.regY=J.rY,_e.scaleX=J.sX,_e.scaleY=J.sY,_e.skewX=J.skX,_e.skewY=J.skY,_e.visible=J.v,te=="line"&&C&&(_e.regX=(D*N-D)/2,_e.regY=(K*N-K)/2)}this.redo=function(){var te=$.pop(),_e,J;te&&(O.push(te),te.clear?(te.paper.removeAllChildren(),te.paper.addChild(d)):te.line&&te.lineTransform?(n(te.endLayer)||(d.top(),te.paper.setChildIndex(te.line,X)),J=te.lineTransform,_e=te.line):te.line?te.line.addTo(te.paper):te.paperTransform&&(J=te.paperTransform,_e=te.paper),_e&&(_e.x=J.x,_e.y=J.y,_e.alpha=J.a,_e.rotation=J.r,_e.regX=J.rX,_e.regY=J.rY,_e.scaleX=J.sX,_e.scaleY=J.sY,_e.skewX=J.skX,_e.skewY=J.skY,_e.visible=J.v),y.lastPaper=y.paper,te.paper!=y.paper&&(y.paper=te.paper,y.dispatchEvent("paperChange")),y.dispatchEvent("change"),y.dispatchEvent("redo"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&y.stage&&y.stage.update())},y.ctrlKey=!1,y.shiftKey=!1,y.ctrlKeyCheck=!1,y.zimkeydownEvent=function(te){y.ctrlKey=te.ctrlKey,y.shiftKey=te.shiftKey,te.keyCode==17&&k&&!y.ctrlKeyCheck&&(y.ctrlKeyCheck=!0,_.noDrag(),_.drag({onTop:x,all:!0})),!(y.undoLevels<=0)&&y.undoKeys&&(te.ctrlKey&&(te.shiftKey&&te.keyCode==90||te.keyCode==89)?y.redo():te.ctrlKey&&te.keyCode==90&&y.undo(),V&&V.ctrlKey&&y.write&&(y.lastWrite=y.write,y.write=!1))},le.addEventListener("keydown",y.zimkeydownEvent),y.zimkeyupEvent=function(te){te.keyCode==17&&k&&y.ctrlKeyCheck&&(y.ctrlKeyCheck=!1,_.noDrag(),_.drag({onTop:x})),te.ctrlKey||(y.ctrlKey=!1),te.shiftKey||(y.shiftKey=!1),V&&!V.ctrlKey&&y.write==!1&&(y.write=y.lastWrite)},le.addEventListener("keyup",y.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return _},set:function(te){te.type=="Container"&&(_=te,d.addTo(_,0,!1),_.shape=d,y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.finishX=y.x,y.lastY=y.lastMidY=y.finishY=y.y,i=="barbwire"&&d.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*y.sizeScale*y.sizeFactor,g),d.graphics.mt(y.x,y.y),_.parent||_.addTo(y.parent,y.parent.getChildIndex(y)),n(_.paperNum)&&(_.paperNum=++y.paperNum,E&&_.on("mousedown",function(_e){y.lastSelected=_e.target,y.nibEvent&&y.stage.off("stagemousemove",y.nibEvent);var J=_e.target.paper;J&&(J!=y.paper&&(y.paper=J,y.dispatchEvent("paperChange")),y.shiftKey&&(y.ctrlKey?y.clear():(_e.target.visible=!1,y.undoLevels>0&&y.saveState(_e.target),y.dispatchEvent("change"))))}),L&&_.on("dblclick",function(_e){_e.target.visible=!1,y.undoLevels>0&&y.saveState(_e.target)}),L&&_.hold(function(_e){_e.target.visible=!1,y.undoLevels>0&&y.saveState(_e.target)}),k&&(_.on("mousedown",function(_e){Z=_e.target.stage,y.draggingCheck=!0,!(y.shiftKey&&E)&&(w=_e.stageX/e.scaX,Y=_e.stageY/e.scaY,d.top(),Ee=_.getChildIndex(_e.target))}),_.drag({onTop:x}),_.on("pressup",function(_e){if(!(E&&y.shiftKey)&&_e.target.visible!=!1&&!(y.undoLevels<=0)){if(Math.abs(_e.stageX/e.scaX-w)<1&&Math.abs(_e.stageY/e.scaY-Y)<1){x&&(d.top(),X=_.getChildIndex(_e.target),Ee!=X&&y.saveState(_e.target,Ee,X));return}y.ctrlKey?(y.saveState(_),y.dispatchEvent("paperChange")):(d.top(),X=_.getChildIndex(_e.target),y.saveState(_e.target,Ee,X)),y.dispatchEvent("change"),d.top()}}))))}}),Object.defineProperty(this,"write",{get:function(){return p},set:function(te){p&&te===!1&&(y.finishX=y.x,y.finishY=y.y),!p&&te&&(d.graphics.es(),d.graphics.ef(),y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.x,y.lastY=y.lastMidY=y.y),p=te}}),Object.defineProperty(this,"size",{get:function(){return t},set:function(te){d.graphics.es(),d.graphics.ef(),t=te,i!="splatter"&&d.graphics.ss(e.Pick.choose(t)*y.sizeScale*y.sizeFactor,g)}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(te){r=te,d.graphics.es(),d.graphics.ef(),i!="splatter"&&d.graphics.s(e.Pick.choose(r))}}),Object.defineProperty(this,"penType",{get:function(){return i},set:function(te){i=te,d.graphics.ef().es(),i!="splatter"?d.graphics.s(e.Pick.choose(r)):d.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*y.sizeScale*y.sizeFactor,g)}}),Object.defineProperty(this,"end",{get:function(){return g},set:function(te){g=te}}),Object.defineProperty(this,"damp",{get:function(){return o},set:function(te){o=te,y.dampX.damp=o,y.dampY.damp=o}}),Object.defineProperty(this,"spread",{get:function(){return l},set:function(te){l=te}});var Ye,se;this.setColorRange=function(te,_e){return n(_e)?(Ye=y.color,se=te):n(te)?(Ye=y.color,se=_e):(Ye=te,se=_e),y};var be=0;Object.defineProperty(y,"colorRange",{get:function(){return be},set:function(te){be=te,!n(Ye)&&!n(se)&&(y.color=e.colorRange(Ye,se,te))}}),Object.defineProperty(this,"borderColor",{get:function(){return f},set:function(te){f=te}}),Object.defineProperty(this,"borderWidth",{get:function(){return h},set:function(te){h=te}}),Object.defineProperty(this,"pullColor",{get:function(){return ne},set:function(te){if(n(te||te==-1))ve(),ne=null;else if(n(ne)){ne=te;var _e=Z||zdf.stage;pe(_e)}else ne=te}}),y.setPen=function(te){y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.finishX=y.x,y.lastY=y.lastMidY=y.finishY=y.y,n(te)&&(te=i),n(G[te])&&(te="line"),y.penType=i=te;var _e=e.merge(j,G[te]);for(var J in _e)y[J]!=_e[J]&&(y[J]=_e[J]);return y},y.immediate=function(te,_e){return n(te)||(y.x=te,y.dampX.immediate(y.x),y.lastX=y.lastMidX=y.finishX=y.x),n(_e)||(y.y=_e,y.dampY.immediate(y.y),y.lastY=y.lastMidY=y.finishY=y.y),y},y.clear=function(){for(var te=[],_e=0;_e<_.numChildren-1;_e++)te.push(_.getChildAt(_e));return O.push({paper:_,clear:te}),O.length>y.undoLevels&&O.shift(),y.dispatchEvent("recordUndo"),_.removeAllChildren(),d.graphics.clear(),_.addChild(d),y.dispatchEvent("change"),y.stage&&y.stage.update(),y},this.deleteSegment=function(te){te.visible=!1,y.undoLevels>0&&y.saveState(te)},this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Pen(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee)))},y.dispose=function(te,_e,J){return n(te)&&(te=!0),le.removeEventListener("keydown",y.zimkeydownEvent),le.removeEventListener("keyup",y.zimkeyupEvent),Z&&y.nibEvent&&Z.off("stagemousemove",y.nibEvent),Z&&y.stageDown&&Z.off("stagemousedown",y.stageDown),Z&&y.stageUp&&Z.off("stagemouseup",y.stageUp),Z&&y.upEvent&&Z.off("stagemouseup",y.upEvent),e.Ticker.remove(y.ticker),y.removeAllEventListeners(),P&&P.removeFrom(),te&&(y.shape&&y.shape.dispose(),y.paper&&y.paper.dispose(),C&&(y.bitmap&&y.bitmap.dispose(),y.bitmap=null),y.zimContainer_dispose(J),_=d=y.shape=null),!0},Q!==!1&&e.styleTransforms(this,ce)},e.extend(e.Pen,e.Container,["dispose","clone"],"zimContainer",!1),e.SoundWave=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",O;if(O=mt(e.SoundWave,arguments,N,this))return O;qe("69.95"),this.type="SoundWave",n(t)&&(t=120),n(r)&&(r="mic"),n(i)&&(i=120/1024),n(o)&&(o=.85),n(l)&&(l=r=="mic"?-80:(r.oscillator,-100)),n(f)&&(f=r=="mic"?-40:(r.oscillator,-10)),n(h)&&(h=function(F,q){return F*(.5+q*1/Math.pow(e.SoundWave.bufferLength,.95))}),n(g)&&(g=r=="mic"?0:(r.oscillator,30)),n(_)&&(_=r=="mic"?1:r.oscillator?5:10),n(P)&&(P=0),n(C)&&(C=5),e.SoundWave.bufferLength=1024;var S=t,k=this;k.baseline=g,k.magnify=_,k.reduce=P,k.input=r,k.adjust=C;var x;r.type=="Tone"||r.type=="SynthSound"?x=r.audioContext:x=new(le.AudioContext||le.webkitAudioContext);var E=k.analyser=x.createAnalyser();E.minDecibels=l,E.maxDecibels=f,E.smoothingTimeConstant=o,Object.defineProperty(this,"smoothing",{get:function(){return E.smoothingTimeConstant},set:function(F){E.smoothingTimeConstant=F}}),Object.defineProperty(this,"num",{get:function(){return S},set:function(F){S=F,L=Math.floor(i*e.SoundWave.bufferLength/S),L<1&&ht("ZIM SoundWave: num is too big")}}),this.setInput=function(F){if(k.input=F,F=="mic"){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(I){var ne=k.source=x.createMediaStreamSource(I);b(ne)}).catch(function(I){ht("ZIM SoundWave: Error occured: "+I)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(I){var ne=k.source=x.createMediaStreamSource(I);b(ne)},function(I){ht("ZIM SoundWave: Error occured: "+I)}):ht("ZIM SoundWave: Sorry, mic not supported");return}else if(F.type=="Tone")b(F.compressor);else if(F.type=="SynthSound")b(F.gain);else{if(F.type&&F.type=="sound"){ht("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");return}var q,V;F.playbackResource?(q=F.playbackResource,V=x.createMediaElementSource(q)):(q=F,V=x.createMediaElementSource(q)),b(V)}},this.setInput(r);var L,A;function b(F){if(A&&A.disconnect(E),A=F,n(T)||T!==0&&T!==1)F.connect(E),r!="mic"&&E.connect(x.destination);else{var q=new ChannelSplitterNode(x,{numberOfOutputs:2});F.connect(q),q.connect(E,T);var V=new ChannelMergerNode(x,{numberOfInputs:2});E.connect(V,0,T),r!="mic"&&V.connect(x.destination)}if(E.fftSize=e.SoundWave.bufferLength*2,L=Math.floor(i*e.SoundWave.bufferLength/S),L<1){ht("ZIM SoundWave: include param is too small or num param is too big");return}var I=E.frequencyBinCount,ne=new Uint8Array(I),R=300,Q=0,U=0,ee=Math.round(60*k.adjust*.8),ae=new e.Damp(R,.01);k.calculate=function(ie){n(ie)&&(ie=!0),E.getByteFrequencyData(ne);var ce=ne.map(h);if(L==1&&!ie)return ce;var j=[],G=0,y;for(y=0;y<=i*e.SoundWave.bufferLength;y++)G+=ce[y],y!=0&&y%L==0&&(j.push(Math.max(0,(G/L-k.baseline)*k.magnify-k.reduce)),G=0);var p=j.length;if(r!="mic"&&(j[0]*=.75,j[1]*=.85,j[2]*=.9,j[p-2]*=.8,j[p-1]*=.75),j[p-1]*=1.3,j[p-2]*=1.2,j[p-3]*=1.1,ie){var d=[];ee++,ee>=60*k.adjust&&(R=Q/ee,Q=0,U=0,ee=0);var D=ae.convert(R);for(y=0;y<p;y++)j[y]>U&&(U=j[y]),d[y]=Math.min(1,D!=0?j[y]/D:0);return Q+=U,d}return j},setTimeout(function(){k.dispatchEvent("ready")},50)}this.dispose=function(F){return F&&x&&x.close(),E&&E.disconnect(),!0}},e.extend(e.SoundWave,ze.EventDispatcher,null,"cjsEventDispatcher",!1),e.Synth=function(t,r){qe("69.955"),this.type="Synth",n(t)&&(t=.3),n(r)&&(r=220),this.volume=t,this.frequency=r;var i=this,o;this.play=function(l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be){var te=Array.prototype.slice.call(arguments);if(te=te.shift(),!o&&(le.AudioContext||le.webkitAudioContext)&&(o=new(le.AudioContext||le.webkitAudioContext),o.z=o.createBufferSource,o.createBufferSource=function(ye){return ye==null&&(ye=o.z()),ye.start=ye.start||function(Re){o.noteOn(Re)},ye}),!!o){for(l=l!=null?dt(l):0,f=f!=null?dt(f):.3,h=h!=null?dt(h):.05,g=g!=null?dt(g):220,_=_!=null?dt(_):0,P=P!=null?dt(P):0,C=C!=null?dt(C):.1,T=T!=null?dt(T):0,N=N!=null?dt(N):1,O=O!=null?dt(O):0,S=S!=null?dt(S):0,k=k!=null?dt(k):0,x=x!=null?dt(x):0,E=E!=null?dt(E):0,L=L!=null?dt(L):0,A=A!=null?dt(A):0,b=b!=null?dt(b):0,F=F!=null?dt(F):0,I=I!=null?dt(I):0,q=q!=null?dt(q):1,V=V!=null?dt(V):0,ie=ie!=null?dt(ie):44100,ce==null&&(ce=99+_*ie),j==null&&(j=P*ie),G==null&&(G=C*ie),y==null&&(y=V*ie),p==null&&(p=F*ie),d==null&&(d=Math.PI*2),D==null&&(D=function(ye){return ye>0?1:-1}),K==null&&(K=ce+y+j+G+p),w==null&&(w=O*=500*d/Math.pow(ie,2)),Y==null&&(Y=g*=(1+h*2*Math.random()-h)*d/ie),Ee==null&&(Ee=D(A)*d/4),X==null&&(X=0),Z==null&&(Z=0),pe==null&&(pe=0),ve==null&&(ve=0),$==null&&($=0),ue==null&&(ue=0),xe==null&&(xe=1),Ye==null&&(Ye=[]),se==null&&(se=o.createBufferSource()),be==null&&(be=o.createBuffer(1,K,ie)),se.connect(o.destination);pe<Math.floor(K);Ye[pe++]=ue)++$>b*100&&($=0,ue=X*g*Math.sin(Z*A*d/ie-Ee),ue=T?T>1?T>2?T>3?Math.sin(Math.pow(ue%d,3)):Math.max(Math.min(Math.tan(ue),1),-1):1-(2*ue/d%2+2)%2:1-4*Math.abs(Math.round(ue/d)-ue/d):Math.sin(ue),ue=(E?1-I+I*Math.sin(d*pe/E):1)*D(ue)*Math.pow(Math.abs(ue),N)*f*i.volume*(pe<ce?pe/ce:pe<ce+y?1-(pe-ce)/y*(1-q):pe<ce+y+j?q:pe<K-p?(K-pe-p)/G*q:0),ue=p?ue/2+(p>pe?0:(pe<K-p?1:(pe-K)/p)*Ye[pe-p|0]/2):ue),X+=1-L+(Math.sin(pe)+1)*1e9%2*L,Z+=1-L+(Math.pow(Math.sin(pe),2)+1)*1e9%2*L,g+=O+=S*500*d/Math.pow(ie,3),xe&&++xe>x*ie&&(g+=k*d/ie,Y+=k*d/ie,xe=0),E&&++ve>E*ie&&(g=Y,O=w,ve=1,xe=xe||1);be.getChannelData(0).set(Ye),se.buffer=be;var _e=new ze.EventDispatcher;_e.type="SynthSound",_e.audioContext=o,_e.gain=o.createGain(),se.connect(_e.gain),_e.gain.connect(o.destination),_e.pan=o.createStereoPanner(),_e.pan.pan.value=l,se.connect(_e.pan),_e.pan.connect(o.destination),se.start(),_e.duration=Ye.length/ie,_e.playing=!0,_e.stop=function(){clearTimeout(_e.completeID),clearInterval(_e.repeatID),_e.gain.gain.setTargetAtTime(0,o.currentTime,.1),_e.playing=!1,setTimeout(function(){o.close()},.1*1e3)};var J;return _e.repeat=_e.loop=function(ye,Re){J=0,ye===!0&&(ye=null),n(Re)&&(Re=0),clearTimeout(_e.completeID);function de(){return _e.duration+dt(Re)}return _e.repeatID=e.interval(de,function(){J++,ye&&J>=ye?(_e.dispatchEvent("complete"),_e.repeatID.clear(),_e.playing=!1):(_e.dispatchEvent("loop"),i.play.apply(i,te))}),_e},_e.play=function(){return i.play.apply(i,te),_e.playing=!0,_e},_e.completeID=setTimeout(function(){_e.dispatchEvent("complete")},(Ye.length/ie+.1)*1e3),_e}},this.Tone=function(l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V){var I="volume, note, shape, pan, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",ne;if(ne=mt(i.Tone,arguments,I,this))return ne;this.type="Tone";var R=this,Q;n(l)&&(l=i.volume),n(f)&&(f=i.frequency),n(h)&&(h=e.SINE),n(g)&&(g=0),n(P)&&(P=.02),n(C)&&(C=.05),n(q)&&(q=0),le.AudioContext||le.webkitAudioContext?Q=this.audioContext=new(le.AudioContext||le.webkitAudioContext):Et&&ht("Synth tone() needs AudioContext"),l=dt(l),f=dt(f),h=dt(h),g=dt(g),_=dt(_),P=dt(P),C=dt(C),T=dt(T),N=dt(N),O=dt(O),S=dt(S),k=dt(k),x=dt(x),E=dt(E),L=dt(L),A=dt(A),b=dt(b),F=dt(F),q=dt(q);var U=v(_);i.duration=_,_&&(_=_*(U=="s"?1:1/1e3)),q&&(v(q),q=q*(U=="s"?1:1/1e3)),i.attack=P,i.release=C,i.rampDuration=.02,i.hush=.1;var ee=this.note=this.oscillator=Q.createOscillator();ee.frequency.value=e.Synth.note(f),e.Synth.setShape(ee,h);var ae=this.filter=Q.createBiquadFilter();ae.type="bandpass",ae.frequency.value=ee.frequency.value,ae.Q.value=0;var ie=this.gain=ee.gain=Q.createGain();ie.type="gain",ie.gain.setValueAtTime(0,Q.currentTime);var ce=this.compressor=Q.createDynamicsCompressor();ce.threshold.setValueAtTime(-50,Q.currentTime),ce.knee.setValueAtTime(40,Q.currentTime),ce.ratio.setValueAtTime(12,Q.currentTime),ce.attack.setValueAtTime(0,Q.currentTime),ce.release.setValueAtTime(.25,Q.currentTime);var j=this.panNode=Q.createStereoPanner();this.panNode.pan.value=g,ee.connect(ae),ae.connect(j),j.connect(ie),ie.connect(ce),ce.connect(Q.destination);function G($,ue){n($)&&($=Q.currentTime),n(ue)&&(ue=i.attack),ee.start($);var xe=le.zdf&&new Date().getTime()-le.zdf.startTime<200?.1:i.attack;ie.gain.setValueAtTime(0,Q.currentTime+.1),ie.gain.linearRampToValueAtTime(l*i.hush,Q.currentTime+.1+xe)}G(q),this.stop=function($){n($)&&($=i.release),ie&&p(ie.gain,0,!0,$),Z&&p(Z.gain,0,!0,$),Y&&p(Y.gain,0,!0,$),setTimeout(function(){R.dispatchEvent("complete")},(.6+$+i.rampDuration)*1e3),setTimeout(function(){Q&&!Q.iamClosed&&(Q.iamClosed=!0,Q.close())},($+1)*1e3),setTimeout(function(){d&&R.removeWah()},($+1)*1e3)},_&&this.stop(q+_-.1);var y=this.notes=[ee];this.addNote=function($,ue,xe,Ye,se,be){n(Ye)&&(Ye=!0),n(se)&&(se=!1),n($)&&($=.1),n(be)&&(be=0);var te={type:"Note"};te._volume=$,te._note=e.Synth.note(ue),y.push(te);var _e=te.oscillator=Q.createOscillator();_e.frequency.value=te._note,_e.type=e.Synth.setShape(_e,xe);var J=te.gain=Q.createGain();return p(J.gain,te._volume,!0),J.connect(Ye?ae:ie),_e.connect(J),Y&&se&&Y.connect(_e.frequency),_e.start(Q.currentTime+be),Object.defineProperty(te,"volume",{get:function(){return te._volume},set:function(ye){n(ye)||(te._volume=dt(ye),p(te.gain.gain,te._volume,!0))}}),Object.defineProperty(te,"note",{get:function(){return te._note},set:function(ye){n(ye)||(te._note=dt(ye),p(te.oscillator.frequency,e.Synth.note(te._note)))}}),te},this.removeNote=function($){var ue=y.indexOf($);return ue>=0&&y.splice(ue,1),$.oscillator.disconnect(),$=null,this};function p($,ue,xe,Ye){n(ue)&&(ue=0),n(Ye)&&(Ye=i.rampDuration),xe?($.cancelScheduledValues(Q.currentTime),$.linearRampToValueAtTime($.value,Q.currentTime+.02),$.linearRampToValueAtTime(ue,Q.currentTime+.05+Ye)):($.cancelScheduledValues(Q.currentTime),$.setTargetAtTime(ue,Q.currentTime,Ye))}this.ramp=function($,ue){p(ie.gain,$*i.hush,!0,ue)},this.rampPan=function($,ue){p(j.pan,$,!1,ue)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.wiggle.apply(null,arguments),this},e.addWires(this);var d,D;function K(){n(T)&&(T=1e3),n(N)&&(N=1),n(O)&&(O="sine"),n(S)&&(S=5),n(k)?k=R.oscillator.frequency.value:k=e.Synth.note(k),n(D)&&(D=200),R.filter.Q.value=S,d=R.wah=i.oscillator(N,T/2,O,k+T/2+D),d.ticker=e.Ticker.add(function(){R.filter.frequency.value=R.wah.amplitude})}(T||N||!n(O)||!n(S))&&K(),R.removeWah=function(){e.Ticker.remove(d.ticker),d.dispose(),d=R.wah=null,R.filter.Q.value=0};var w,Y;function Ee(){n(E)&&(E=5),n(L)&&(L="sine"),n(x)&&(x=10),w=R.vibrato=Q.createOscillator(),Y=R.vibratoGain=Q.createGain(),Y.gain.value=0,w.frequency.value=E,e.Synth.setShape(w,L),w.connect(Y),Y.connect(ee.frequency),w.start(0),Y.gain.setValueAtTime(0,Q.currentTime+.1),Y.gain.linearRampToValueAtTime(x,Q.currentTime+.1+i.attack)}(x||E||!n(L))&&Ee(),R.removeVibrato=function(){p(Y.gain,0,!0),setTimeout(function(){Y.disconnect(),w.disconnect(),w.stop(),w=null},(i.rampDuration+1)*1e3)};var X,Z;function pe(){n(b)&&(b=5),n(F)&&(F="sine"),X=R.tremelo=Q.createOscillator(),Z=R.tremeloGain=Q.createGain(),Z.gain.value=0,X.frequency.value=b,e.Synth.setShape(X,F),X.connect(Z),Z.connect(ie.gain),X.start(0);var $=le.zdf&&new Date().getTime()-le.zdf.startTime<200?.1:i.attack;Z.gain.setValueAtTime(0,Q.currentTime+.1),Z.gain.linearRampToValueAtTime(l*i.hush,Q.currentTime+.1+$)}(A||b||!n(F))&&pe(),R.removeTremelo=function(){p(Z.gain,0,!0),setTimeout(function(){Z.disconnect(),X.disconnect(),X.stop(),X=null},(i.rampDuration+1)*1e3)},Object.defineProperty(this,"volume",{get:function(){return l},set:function($){if(!n($)){var ue;X?(ie.gain.value?ue=Z.gain.value/ie.gain.value:ue=l?A/l:0,l=dt($),l=e.constrain(l,.001),p(Z.gain,l*ue*i.hush,!0)):l=dt($),p(ie.gain,l*i.hush,!1,i.rampDuration)}}}),this.paused=!1;var ve=l;this.pause=function($){n($)&&($=!0),$?(ve=R.volume,R.volume=0):R.volume=ve},V&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return r},set:function($){n($)||(r=dt($),p(ee.frequency,$))}}),Object.defineProperty(this,"note",{get:function(){return f},set:function($){n($)||(f=dt($),ee.frequency.value=e.Synth.note(f))}}),Object.defineProperty(this,"shape",{get:function(){return h},set:function($){h=dt($),e.Synth.setShape(ee,h)}}),Object.defineProperty(this,"pan",{get:function(){return g},set:function($){n($)||(g=dt($),p(j.pan,g,!1,.1))}}),Object.defineProperty(this,"currentTime",{get:function(){return Q.currentTime},set:function(){Et&&ht("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return T},set:function($){n($)||(T=dt($),T=e.constrain(T,i.wahAmountMin,i.wahAmountMax),n(d)?K():d.gain=T/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return N},set:function($){n($)||(N=dt($),N=e.constrain(N,i.wahRateMin,i.wahRateMax),n(d)?K():d.frequency=N)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return S},set:function($){S=dt($),S=e.constrain(S,i.wahThroatMin,i.wahThroatMax),n(d)?K():ae.Q.value=S}}),Object.defineProperty(this,"wahNote",{get:function(){return k},set:function($){n($)||(k=dt($),n(d)?K():d.offset=k+T/2+D)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return D},set:function($){n($)||(D=dt($),n(d)?K():d.offset=k+T/2+D)}}),Object.defineProperty(this,"wahShape",{get:function(){return O},set:function($){O=dt($),n(d)?K():d.shape=O}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return A},set:function($){n($)||(A=dt($),n(X)?pe():Z.gain.setValueAtTime(A,Q.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return b},set:function($){n($)||(b=dt($),n(d)?pe():X.frequency.value=b)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return F},set:function($){F=dt($),n(X)?pe():e.Synth.setShape(X,F)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return x},set:function($){n($)||(x=dt($),n(w)?Ee():Y.gain.setValueAtTime(x,Q.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return E},set:function($){n($)||(E=dt($),n(w)?Ee():w.frequency.value=E)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return L},set:function($){L=dt($),n(w)?Ee():e.Synth.setShape(w,L)}})},e.extend(this.Tone,ze.EventDispatcher),this.tone=function(l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Tone,arguments))},this.Oscillator=function(l,f,h,g){var _="frequency, gain, shape, offset",P;if(P=mt(i.Oscillator,arguments,_,this))return P;this.type="Oscillator",n(l)&&(l=1),n(f)&&(f=10),n(h)&&(h="sine"),n(g)&&(g=0),this.frequency=dt(l),this.gain=dt(f),this.shape=dt(h),this.shape=="saw"&&(this.shape="sawtooth"),this.offset=dt(g),this.paused=!1;var C=this,T=0,N=e.Ticker.framerate;this.ticker=e.Ticker.add(function(){if(!C.paused){var O=0;C.shape=="sine"?O=Math.sin(C.frequency*(Math.PI*2*(T/N))):C.shape=="square"?(O=Math.sin(C.frequency*(Math.PI*2*(T/N))),O=O<=0?0:1):C.shape=="triangle"?O=2/Math.PI*Math.asin(Math.sin(C.frequency*Math.PI*2*T/N)):C.shape=="sawtooth"||C.shape=="saw"?O=-2/Math.PI*Math.atan(1/Math.tan(C.frequency*Math.PI*T/N)):C.shape=="zap"&&(O=2/Math.PI*Math.atan(1/Math.tan(C.frequency*Math.PI*T/N))),C.amplitude=O*C.gain+C.offset,T++}}),this.pause=function(O){C.paused=O},this.dispose=function(){e.Ticker.remove(this.ticker)}},this.oscillator=function(l,f,h,g){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Oscillator,arguments))}},e.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],e.Synth.major=["C","D","E","F","G","A","B","C4"],e.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],e.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],e.Synth.setShape=function(t,r){if(!n(t)){n(r)&&(r="sine"),r=="saw"&&(r="sawtooth");var i;if(typeof r=="number")r=e.Synth.shapes[r],r||(r="sine");else if(r.real&&r.imag)i=t.context.createPeriodicWave(new Float32Array(r.real),new Float32Array(r.imag));else if(r.constructor==PeriodicWave)i=r;else if(typeof r=="string"){var o=e.Synth.shapes.indexOf(r);if(o<0&&(r="sine"),r=="noise"){for(var l=4096,f=new Float32Array(l),h=new Float32Array(l),g=1;g<l;g+=2)h[g]=e.shuffle([0,.5,1])[0];i=t.context.createPeriodicWave(f,h)}else r=="tan"&&(r="sawtooth")}else r="sine";i?(t.setPeriodicWave(i),r="custom"):t.type=r}},e.Synth.getNote=function(t,r){return n(r)&&(r=0),t*Math.pow(2,r/12)},e.Synth.note=function(t){if(typeof t=="string"){var r=t.substr(0,1).toUpperCase(),i=e.loop(t,function(g){if(!isNaN(g))return Number(g)});i=i!==!0&&!isNaN(i)?i:3;var o=e.Synth.notes.indexOf(r);o<0&&(o=9);var l=t.match(/b/g),f=t.match(/#/g);l=l?l.length:0,f=f?f.length:0;var h=(i-3)*12+o+f-l;return e.Synth.getNote(e.Synth.getNote(220,-9),h)}else return typeof t!="number"&&(t=220),t},e.Synth.wave=function(t,r){if(le.AudioContext||le.webkitAudioContext){var i=new(le.AudioContext||le.webkitAudioContext);if(t.real)r=t.imag,t=t.real;else if(n(r)&&Et){ht("Synth.wave() - pass in asset('wave.json') or real and imag properties");return}return t.constructor!==Float32Array&&(t=new Float32Array(t)),r.constructor!==Float32Array&&(r=new Float32Array(r)),i.createPeriodicWave(t,r)}},e.Synth.drawWave=function(t,r,i,o,l,f,h,g,_){var P="shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingV",C;if(C=mt(e.Synth.drawWave,arguments,P))return C;var T=45,N=45;t=dt(t),n(i)&&(i=2),n(r)&&(r=e.darker),n(g)&&(g=8),n(_)&&(_=g);var O=g,S=_,k=new e.Container(T,N);k.mouseChildren=!1,n(o)||(k.backing=new e.Rectangle(T,N,o,l,f,h).addTo(k)),k.shape=new e.Shape(T,N).addTo(k).s(r).ss(i);var x=T-O*2;return t=="square"?k.shape.mt(O,N/2).lt(O,S+3).lt(T/2,S+3).lt(T/2,N-S-3).lt(T-O,N-S-3).lt(T-O,N/2):t=="triangle"?k.shape.mt(O,N/2).lt(O+x/4,S+3).lt(O+x*3/4,N-S-3).lt(T-O,N/2):t=="sawtooth"||t=="saw"?k.shape.mt(O,N/2).lt(T/2,S+2).lt(T/2,N-S-2).lt(T-O,N/2):t=="zap"?k.shape.mt(O,N/2).lt(T/2,N-S-2).lt(T/2,S+2).lt(T-O,N/2):k.shape.mt(O,N/2).bt(T/2,0-15,T/2,N+15,T-O,N/2),k.type=t,k},e.VR=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",O;if(O=mt(e.VR,arguments,N,this))return O;if(qe("69.98"),this.type="VR",!le.zdf){Et&&ht("VR() - please use ZIM Frame");return}var S=le.zdf;(n(T)||!T.getBounds||!T.getBounds().width)&&(T=S.stage),n(r)&&(r=0),n(i)&&(i=100),n(f)&&(f=.5),n(o)&&(o=0),n(l)&&(l=60),n(h)&&(h=.1),n(g)&&(g=0),n(_)&&(_=!1),n(P)&&(P=!0),n(C)&&(C=!0),this.angle=r,this.currentAngle=g,e.mobile()&&(C=!1);var k=this,x=T.width,E=T.height;k.zimContainer_constructor();var L=k.left=new e.Container(x/2,E,null,null,!1),A=new e.Rectangle(x/2,E,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1);L.addChild(A);var b=k.right=L.clone();k.addChild(L,b),b.x=x/2;var F=k.contentLeft=k.content=t,q=k.contentRight=t.clone();if(g!=0)var V=setTimeout(I,100);else I();function I(){F.addTo(L,null,!1).setMask(L.getChildAt(0)).pos({y:(T.height-F.height)/2,reg:!0}),q.addTo(b,null,!1).setMask(b.getChildAt(0)).pos({y:(T.height-F.height)/2,reg:!0})}var ne=[],R=[];function Q(te,_e,J,ye){te.vrMatch=_e,_e.vrMatch=te,te.cacheCanvas&&_e.cache(),te.dep&&!n(te.depth)&&(ne.push(te),R.push(_e),n(J)||J.push(te),n(ye)||ye.push(_e),_e.dep(te.depth)),e.loop(te,function(Re,de){Q(Re,_e.getChildAt(de),J,ye)})}Q(F,q);function U(te,_e){e.loop(te,function(J){J.vrChannel=_e,J.vrStartX=J.x,r!=0&&i!=0&&(J.vrAngle=r,J.vrDistance=i),o!=0&&i!=0&&(J.vrParallax=o/100,J.vrParallaxDistance=0,r!=0&&(J.vrParallaxDamp=new e.Damp(0,h))),J.dep(J.depth)})}if(U(ne,"left"),U(R,"right"),r!=0&&i!=0){var ee=new e.Damp(180+g,f);ee.immediate(180+g);var ae=!1,ie=!1;S.on("deviceorientation",function(te){ce(ee.convert((te.rotation.z>180?-180:180)+te.rotation.z+g)-180)}),e.Ticker.always()}function ce(te){k.currentAngle=te;var _e=-k.currentAngle*i/r;k.contentLeft.x=_e,k.contentRight.x=_e;var J;Math.round(k.currentAngle)<=-r/2&&!ae?(J=new ze.Event("boundaryout"),J.boundary="left",ae=!0,k.dispatchEvent(J)):Math.round(k.currentAngle)>=r/2&&!ie?(J=new ze.Event("boundaryout"),J.boundary="right",ie=!0,k.dispatchEvent(J)):Math.round(k.currentAngle)>-r/2&&Math.round(k.currentAngle)<r/2&&(J=new ze.Event("boundaryin"),ae?(J.boundary="left",k.dispatchEvent(J),ae=!1):ie&&(J.boundary="right",k.dispatchEvent(J),ie=!1))}function j(te){var _e=te.parent.localToLocal(te.vrStartX,0,T),J=te.vrParallaxDamp.convert(te.vrChannel=="left"?k.contentLeft.x+_e.x-x/4:k.contentRight.x+_e.x-x/2-x/4);te.depth<=0&&!_&&(J=0),te.vrParallaxDistance=Math.max(-i/r*l/2,Math.min(i/r*l/2,J)),te.dep(te.depth)}if(o!=0&&i!=0){var G=new e.ProportionDamp(180-l/2,180+l/2,-l/2,l/2,h);G.immediate(180),S.on("deviceorientation",function(te){var _e=0;r==0&&o!=0&&i!=0&&(_e=G.convert((te.rotation.z>180?-180:180)+te.rotation.z)),p(_e)}),e.Ticker.always()}function y(te,_e){te.vrParallaxDistance=te.depth<=0&&!_?0:_e,te.dep(te.depth)}function p(te){r!=0&&i!=0?(e.loop(ne,j),e.loop(R,j)):(e.loop(ne,function(_e){y(_e,te)}),e.loop(R,function(_e){y(_e,te)}))}C&&i!=0&&(r!=0||o!=0)&&k.added(function(){var te={swipeAngle:0};k.swiper=new e.Swiper({swipeOn:k,target:te,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),e.Ticker.add(function(){r!=0&&i!=0&&ce(te.swipeAngle),o!=0&&i!=0&&p(G.convert(te.swipeAngle+180))})});var d=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,D=d,K=!1;F.startRegX=F.regX,q.startRegX=q.regX;var w=this.adjuster=new e.Container(800,300,null,null,!1);A=w.backing=new e.Rectangle(w.width,w.height,e.lighter,null,null,null,null,null,null,!1).center(w).alp(1).sha("rgba(0,0,0,.2)",0,0,30),w.strip=new e.Rectangle(w.width,w.height/3,e.white,null,null,null,null,null,null,!1).center(w).alp(1),w.label=new e.Label({text:"slide to adjust center of left and right",size:28,color:e.dark,align:"center",valign:"center"}).center(w).pos({y:50,reg:!0});var Y=w.close=new e.Rectangle(50,50,e.light,null,null,null,null,null,null,!1).addTo(w).mov(w.width-70,26),Ee=new e.Shape(-40,-40,80,80,null,!1);Ee.graphics.f(e.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),Ee.center(Y).sca(.3),Y.cur("pointer"),Y.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){k.hideAdjuster(),pe.currentValue=(pe.max-pe.min)/2+D,k.dispatchEvent("closed")});var X=new e.Circle(30,e.dark,null,null,null,null,null,null,!1).center(w).pos({x:w.width/4,reg:!0});X.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,!1).center(X);var Z=new e.Circle(30,e.dark,null,null,null,null,null,!1).center(w).pos({x:w.width/4*3,reg:!0});Z.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,null,!1).center(Z);var pe=w.slider=new e.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(w).pos({y:w.height-40,reg:!0});pe.currentValue=(pe.max-pe.min)/2+d;var ve=new e.Proportion(pe.min,pe.max,X.x-w.width/4,X.x+w.width/4,-1),$=new e.Proportion(pe.min,pe.max,Z.x-w.width/4,Z.x+w.width/4);pe.on("change",function(){X.x=ve.convert(pe.currentValue),Z.x=$.convert(pe.currentValue)}),new e.Label("closer",24,null,e.silver).centerReg(w).pos({x:pe.x-220,y:pe.y,reg:!0}),new e.Label("farther",24,null,e.silver).centerReg(w).pos({x:pe.x+220,y:pe.y,reg:!0});var ue=k.ok=new e.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:e.blue,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(w).sca(.8).pos({x:w.width-58,y:pe.y,reg:!0});ue.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=pe.currentValue-(pe.max-pe.min)/2),se(),k.hideAdjuster(),k.dispatchEvent("saved"),k.dispatchEvent("closed")});var xe=k.zero=new e.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:e.yellow,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(w).sca(.8).pos({x:58,y:pe.y,reg:!0});xe.on((Lt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){pe.currentValue=(pe.max-pe.min)/2,X.x=ve.convert(pe.currentValue),Z.x=$.convert(pe.currentValue)});var Ye=new e.Proportion(0,30,-T.width/4,T.width/4);function se(){var te=Ye.convert(pe.currentValue);F.regX=F.startRegX+te,q.regX=q.startRegX-te}se(),this.showAdjuster=function(){if(K)return k;K=!0,X.x=ve.convert(pe.currentValue),Z.x=$.convert(pe.currentValue),D=pe.currentValue-(pe.max-pe.min)/2,w.scaleTo(T,100,100).center(this),T.stage.update()},this.hideAdjuster=function(){if(!K)return k;K=!1,w.removeFrom(this),T.stage.update()},this.position=function(te,_e,J){ye(te),ye(te.vrMatch);function ye(Re){Re.vrStartX=_e,Re.vrParallaxDamp&&Re.vrParallaxDamp.immediate(_e),Re.mov(_e,J)}return te},this.register=function(te){if(!te.parent||!te.parent.vrMatch)return Et&&ht("ZIM VR() - please only register objects already inside content container"),te;var _e=te.clone().addTo(te.parent.vrMatch),J=[],ye=[];return Q(te,_e,J,ye),U(J,"left"),U(ye,"right"),te},r!=0&&i!=0&&P&&(k.boundaryRight=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(k.boundaryRight).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(-90).center(k.boundaryRight).dep(-6),k.boundaryRight.center(t).mov(i/2+24),k.boundaryLeft=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(k.boundaryLeft).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(90).center(k.boundaryLeft).dep(-6),k.boundaryLeft.center(t).mov(-i/2-24),k.register(k.boundaryRight),k.register(k.boundaryLeft));function be(te){var _e=ne.indexOf(te);ne.indexOf(te)>=0&&(ne.splice(_e,1),R.splice(_e,1)),e.loop(te,function(J){be(J)})}this.remove=function(){return e.loop(arguments,function(te,_e){t.contains(_e)&&(be(_e),_e.parent.removeChild(_e),_e.vrMatch.parent.removeChild(_e.vrMatch))}),k},this.resize=function(){x=T.width,E=T.height,L.getChildAt(0).widthOnly=b.getChildAt(0).widthOnly=x/2,L.getChildAt(0).heightOnly=b.getChildAt(0).heightOnly=E,b.x=x/2,L.setBounds(0,0,x/2,E),b.setBounds(0,0,x/2,E),g!=0?(clearTimeout(V),V=setTimeout(I,100)):I(),w.scaleTo(T,100,100).center(this,null,!1)}},e.extend(e.VR,e.Container,"clone","zimContainer",!1),e.scaX=1,e.scaY=1,e.Frame=function(t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce){var j="scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",G;if(G=mt(e.Frame,arguments,j,this))return G;qe("83"),Et&&ui("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var y=this;(!le.zdf||!le.zdf.type)&&(le.zimDefaultFrame=le.zdf=le.F=this),le.M=e.mobile();var p=Date;this.startTime=new p().getTime(),n(L)&&(L=!0);var d=!!le.HTMLCanvasElement;if(!d&&L){setTimeout(function(){y.dispatchEvent("failed")},100);return}var D=e.mobile();n(t)&&(t="full"),t=="outside"&&(t="fill"),n(g)||(le.PATH=g),n(C)&&(C=!D),n(T)&&(T=!0),n(N)&&(N=!1),n(O)&&(O="center"),n(S)&&(S="center");var K="";n(k)&&(le.zdf!=this?(K=e.makeID(null,5),k="myCanvas"+K):k="myCanvas");var w=v(E);n(x)&&(x=20),n(E)&&(E=D?w=="s"?1:1e3:w=="s"?.03:30),n(A)&&(A=!1),n(V)&&(V=!1),n(I)&&(I="circles"),this.loadFailObj=I,n(ne)&&(ne=!1),n(R)&&(R=!0),this.retina=R,n(Q)&&(Q=!1),n(U)&&(U=!0),n(ee)&&(ee=!1),n(ae)&&(ae=10),n(ce)&&(ce=!1),ce&&(T=!0);var Y=ae;y.maxNum=ie,A&&(R=!1),this.retina=R;var Ee=!1,X=!1;this.leftMouseDown=!1;function Z(De){y.leftMouseDown=De.buttons===void 0?De.which===1:De.buttons===1,Ee&&!y.leftMouseDown&&y.dispatchEvent("mouseupplus"),X&&!y.leftMouseDown&&y.dispatchEvent("mouseupplusonly"),Ee=X=y.leftMouseDown}var pe=["fit","fill","full"],ve,$,ue;if(ee){this.shim=!0,ee.stage.frame=this;var xe=this.canvas=ee.canvas;this.scale=ee.stage.scaleX;var Ye,se;setTimeout(function(){be(),se=function(){be(),Ye&&clearTimeout(Ye),Ye=setTimeout(be,50)},le.addEventListener("resize",se)},20),ve=ee.stage,$=ve.getBounds()?ve.getBounds().width:xe.width/ve.scaleX,ue=ve.getBounds()?ve.getBounds().height:xe.height/ve.scaleY,ve.getBounds()||ve.setBounds(0,0,$,ue),o=xe.style.backgroundColor,Ke(),be()}else this.scale=1,this.x=0,this.y=0;function be(){y.scale=ee.stage.scaleX;var De=xe.getBoundingClientRect();y.x=De.x+e.scrollX(),y.y=De.y+e.scrollY(),e.scaX=ze.stageTransformable?1:ee.stage.scaleX,e.scaY=ze.stageTransformable?1:ee.stage.scaleY}var te,_e,J=!1,ye,Re,de=!1,Me=!1,Be=!1;ee||(document.readyState==="interactive"||document.readyState==="complete"?setTimeout(function(){fe()},200):document.addEventListener("DOMContentLoaded",fe));var he,Ae=!1,Ce=t=="full"&&typeof InstallTrigger<"u";if(this.swapRotation=!1,D&&!le.parent){var me=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,Ne=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;this.swapRotation=(le.orientation==0||le.orientation==180)&&me>Ne||Math.abs(le.orientation)==90&&Ne>me}le.addEventListener("resize",Ue);var ge;function Ue(){if(ee){if(ve.canvas){var De=$=ve.canvas.width,at=ue=ve.canvas.height;ve.setBounds(0,0,De,at)}y.dispatchEvent("resize");return}ge=Date.now()+E*(w=="s"?1e3:1),Ce?Ae||(Ae=!0,he=e.Ticker.update,e.tickerFrame||(e.Ticker.update=!1,e.tickerFrame=y),gt(),ct(),clearInterval(y.frameTime),y.frameTime=setInterval(function(){if(Date.now()>ge){clearInterval(y.frameTime),Ae=!1,y==e.tickerFrame&&(e.Ticker.update=he);return}gt(),ct()},50)):(gt(),ct(),clearInterval(y.frameTime),y.frameTime=setInterval(function(){if(Date.now()>ge){clearInterval(y.frameTime);return}gt(),ct()},E*(w=="s"?1e3:1)<50?E*(w=="s"?1e3:1)+5:50))}y.loadAssetsCount=0,n(e.assets)&&(e.assets={},e.assetIDs={});var He=[];He[0]="h",He[1]="c",He[2]="o",He[3]="p",He[4]="e";var Oe=!1;function fe(){if(Be)return;if(Be=!0,pe.indexOf(t)==-1){if(ye=t,n(Tn(ye))){ht("Frame - scaling: HTML tag with id="+t+" must exist");return}Re=y.tag=Tn(ye),y.scaling=t=n(r)||n(i)?"tag":"inline",k.indexOf("myCanvas")==0&&(k=ye+"Canvas"),Re.tagName.toLowerCase()=="canvas"&&(Oe=!0,k=ye)}else y.scaling=t;y.canvasID=k,n(r)&&(r=500),n(i)&&(i=500),$=r,ue=i,n(l)||(y.outerColor=l),Ze(),ut(),D?(N&&setTimeout(function(){le.scrollTo(0,0)},50),setTimeout(De,100),E*(w=="s"?1e3:1)!=100&&setTimeout(De,E*(w=="s"?1e3:1))):(de=!0,Xe());function De(){gt(),de=!0,Xe(),ct(),ve&&ve.update()}if(n(h))Me=!0,Xe();else{var at;h.constructor=={}.constructor&&!(h.audioSprite||h.id||h.data||h.src)?at=y.loadAssets(e.merge(h,{progress:_,queueOnly:!0})):at=y.loadAssets({assets:h,path:g,progress:_,queueOnly:!0}),n(at)||!at.on?(Et&&ht("Frame() - load failed"),Me=!0,Xe()):at.on("complete",function(){Me=!0,Xe()})}}function Xe(){if(de&&Me&&!J)if(ve.width>=1&&ve.height>=1){if(!n(_)&&_.show&&_.hide(),y==le.zdf&&(le.S=ve,le.W=ve.width,le.H=ve.height),f&&typeof f=="function"&&f(y,ve,ve.width,ve.height),!y)return;if(P&&typeof P=="function"){var De=0;if(!y)return;y.updateID=e.Ticker.add(function(){P(++De,y,ve,ve.width,ve.height)}),y.pauseTicker=function(at){n(at)&&(at=!0),at?e.Ticker.remove(y.updateID):e.Ticker.add(y.updateID)}}y.dispatchEvent("ready"),J=!0,ct(),ve.update()}else setTimeout(function(){gt(),Xe()},50)}function Ze(){var De;Oe?De=y.canvas=y.tag:(De=y.canvas=document.createElement("canvas"),De.setAttribute("id",k)),De.setAttribute("tabindex",0);var at=e.windowWidth(),yt=e.windowHeight(),rt=le.devicePixelRatio||1;t=="full"||t=="tag"?R?(y.scale=rt,De.setAttribute("width",at*y.scale),De.setAttribute("height",yt*y.scale),t=="full"&&(De.style.width=at+"px",De.style.height=yt+"px")):(De.setAttribute("width",at),De.setAttribute("height",yt)):(De.setAttribute("width",$),De.setAttribute("height",ue));var Tt=Tn(k+"Alternative");Tt&&De.appendChild(Tt),Oe||(t=="tag"||t=="inline"?Re.appendChild(De):document.body.appendChild(De)),n(o)||(De.style.backgroundColor=o),t=="full"||t=="fit"||t=="fill"?(De.style.position="absolute",V||(document.body.style.overflow="hidden")):getComputedStyle(De.parentElement).position=="static"&&(De.parentElement.style.position="relative"),De.addEventListener("pointerdown",function(xt){De.setPointerCapture(xt.pointerId),y.dispatchEvent(xt)}),De.addEventListener("pointerup",function(xt){De.releasePointerCapture(xt.pointerId),y.dispatchEvent(xt)}),De.addEventListener("pointermove",function(xt){y.dispatchEvent(xt)}),De.addEventListener("pointerenter",function(xt){y.dispatchEvent(xt)}),De.addEventListener("pointerleave",function(xt){y.dispatchEvent(xt)})}function Ke(){U&&(y.mouseX=0,y.mouseY=0,y.mousedownEvent=ve.on("stagemousedown",function(De){y.mouseX=De.stageX/e.scaX,y.mouseY=De.stageY/e.scaY}),y.mousemoveEvent=ve.on("stagemousemove",function(De){y.mouseX=De.stageX/e.scaX,y.mouseY=De.stageY/e.scaY})),le.removeEventListener("mousedown",Z,!0),le.removeEventListener("mousemove",Z,!0),le.removeEventListener("mouseup",Z),le.addEventListener("mousedown",Z,!0),le.addEventListener("mousemove",Z,!0),le.addEventListener("mouseup",Z)}function ut(){gt(),pe.indexOf(t)!=-1&&!V&&(y.zil=Ur()),y.mousedownEvent&&ve&&ve.off("stagemousedown",y.mousedownEvent),y.mousemoveEvent&&ve&&ve.off("stagemousemove",y.mousemoveEvent),ve=A?new e.StageGL(k,b):new e.Stage(k),ve.frame=y,ve.mouseMoveOutside=Q,!n(o)&&A&&ve.setClearColor(e.convertColor(o)),ve.setBounds(0,0,$,ue),ve.width=$,ve.height=ue,R&&gt(),C&&ve.enableMouseOver(x),T&&(ce?ze.Touch.enable(ve,!0,V):ze.Touch.enable(ve,!1,V)),V&&(ve.preventSelection=!1),F&&(ve.nextStage=F.stage),q&&(ve.nextStage=q),Ke(),ve.on("stagemouseup",function(){X=!1})}function gt(){if(y){var De=Tn(k),at=e.windowWidth(),yt=e.windowHeight(),rt,Tt,xt,Ct;if(te=y.orientation=at>yt?"horizontal":"vertical",te!=_e&&(_e=te,y.dispatchEvent("orientation")),D&&N&&setTimeout(function(){le.scrollTo(0,0)},100),!!De){if(t=="fit")y.scale=at/yt>=$/ue?yt/ue:at/$;else if(t=="fill")y.scale=at/yt>=$/ue?at/$:yt/ue;else if(t=="full"){De.style.left=De.style.top="0px",De.width=$=at,De.height=ue=yt,ve&&(ve.setBounds(0,0,$,ue),R?(xt=le.devicePixelRatio||1,De.width=at*xt,De.height=yt*xt,De.style.width=at+"px",De.style.height=yt+"px",y.scale=xt,ve.scaleX=ve.scaleY=y.scale):ve.scaleX=ve.scaleY=1,ve.tickOnUpdate=!1,ve.update(),ve.tickOnUpdate=!0,ve.width=$,ve.height=ue,A&&ve.updateViewport($/ve.scaleX,ue/ve.scaleY),e.scaX=ze.stageTransformable?1:ve.scaleX,e.scaY=ze.stageTransformable?1:ve.scaleY),V||(e.scrollX(0),e.scrollY(0)),it();return}else if(t=="tag"){$=Re.style.width==""?Re.getAttribute("width")||Re.offsetWidth:Re.style.width,ue=Re.style.height==""?Re.getAttribute("height")||Re.offsetHeight:Re.style.height,R?(De.width=$*y.scale,De.height=ue*y.scale,De.style.width=$+"px",De.style.height=ue+"px",ve&&(ve.scaleX=ve.scaleY=y.scale)):(ve&&(ve.scaleX=ve.scaleY=1),De.width=$,De.height=ue),ve&&(ve.tickOnUpdate=!1,ve.update(),ve.tickOnUpdate=!0,ve.setBounds(0,0,$,ue),ve.width=$,ve.height=ue,A&&ve.updateViewport($/ve.scaleX,ue/ve.scaleY),e.scaX=ze.stageTransformable?1:ve.scaleX,e.scaY=ze.stageTransformable?1:ve.scaleY),Re.style.overflow="hidden",De.style.left=De.style.top="0px",Ct=De.getBoundingClientRect(),y.x=Ct.x+e.scrollX(),y.y=Ct.y+e.scrollY(),it();return}else if(t=="inline"){if(R){if(document.styleSheets[0])try{for(var lt=document.styleSheets[0].rules||document.styleSheets[0].cssRules,Dt=0;Dt<lt.length;Dt++){var Mt=lt[Dt];if(Mt.selectorText=="#"+k){var St=Mt.style.getPropertyValue("width");if(St){var Ft=jn(De.style.width),Yt=jn(De.style.height);De.style.width=St}}}}catch(Ot){+function(){}()}var $t=le.getComputedStyle(De),sn=jn($t.getPropertyValue("width"));Ft&&(De.style.height=Yt*sn/Ft+"px",$t=le.getComputedStyle(De));var nn=jn($t.getPropertyValue("height"));xt=le.devicePixelRatio||1,y.scale=sn/r*xt,De.width=$*y.scale,De.height=ue*y.scale,De.style.width=sn+"px",De.style.height=nn+"px",ve&&(ve.scaleX=ve.scaleY=y.scale)}else ve&&(ve.scaleX=ve.scaleY=1);ve&&(ve.tickOnUpdate=!1,ve.update(),ve.tickOnUpdate=!0,ve.setBounds(0,0,$,ue),ve.width=$,ve.height=ue,A&&ve.updateViewport($/ve.scaleX,ue/ve.scaleY),e.scaX=ze.stageTransformable?1:ve.scaleX,e.scaY=ze.stageTransformable?1:ve.scaleY),De.style.left=De.style.top="0px",Ct=De.getBoundingClientRect(),y.x=Ct.x+e.scrollX(),y.y=Ct.y+e.scrollY(),it();return}Tt=ue*y.scale,rt=$*y.scale,R?(xt=le.devicePixelRatio||1,y.scale*=xt,De.width=$*y.scale,De.height=ue*y.scale,De.style.width=$*y.scale/xt+"px",De.style.height=ue*y.scale/xt+"px",ve&&(ve.scaleX=ve.scaleY=y.scale)):(ve&&(ve.scaleX=ve.scaleY=1),De.style.width=rt+"px",De.style.height=Tt+"px"),ve&&(ve.tickOnUpdate=!1,ve.update(),ve.tickOnUpdate=!0),O=="left"?y.x=0:O=="right"?y.x=at-rt:y.x=(at-rt)/2,S=="top"?y.y=0:S=="bottom"?y.y=yt-Tt:y.y=(yt-Tt)/2,De.style.left=y.x+"px",De.style.top=y.y+"px",V||(e.scrollX(0),e.scrollY(0)),it(),ve&&(e.scaX=ze.stageTransformable?1:ve.scaleX,e.scaY=ze.stageTransformable?1:ve.scaleY)}}}var We=He.reverse().join("");this.update=function(){gt(),y.dispatchEvent("update")};function it(){if(t=="fill"){var De=(jn(y.canvas.style.width)-e.windowWidth())/2;O=="left"?(y.visibleLeft=0,y.visibleRight=e.windowWidth()/(e.windowWidth()+De*2)*$):O=="right"?(y.visibleLeft=De*2/(e.windowWidth()+De*2)*$,y.visibleRight=$):(y.visibleLeft=De/(e.windowWidth()+De*2)*$,y.visibleRight=(e.windowWidth()+De)/(e.windowWidth()+De*2)*$);var at=(jn(y.canvas.style.height)-e.windowHeight())/2;S=="top"?(y.visibleTop=0,y.visibleBottom=e.windowHeight()/(e.windowHeight()+at*2)*ue):S=="bottom"?(y.visibleTop=at*2/(e.windowHeight()+at*2)*ue,y.visibleBottom=ue):(y.visibleTop=at/(e.windowHeight()+at*2)*ue,y.visibleBottom=(e.windowHeight()+at)/(e.windowHeight()+at*2)*ue)}else y.visibleLeft=y.visibleTop=0,y.visibleRight=$,y.visibleBottom=ue}function ct(){if(!(!J||!y)){y==le.zdf&&(le.W=y.width,le.H=y.height),y.dispatchEvent("resize");var De=new Date().getTime();setTimeout(function(){new Date().getTime()-De>80&&(gt(),y==le.zdf&&(le.W=y.width,le.H=y.height),setTimeout(function(){y.dispatchEvent("resize"),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&ve&&(t=="full"||t=="tag")&&ve.update()},100))},100),!e.OPTIMIZE&&(Lt||!le.OPTIMIZE)&&ve&&(t=="full"||t=="tag")&&ve.update()}}setTimeout(function(){y&&y.dispatchEvent("orientation")},250);var Pe=["ttf","otf","woff2","woff","fnt"];p[We]=function(){var yt=p.now(),De=Math.floor(yt/1e3%10),at=(at=yt.toString()).substring(0,at.length-2)+(10+De-3)%10+at.substring(at.length-1),yt=Math.floor(yt/1e4%10);return at=(at=at.substring(0,at.length-1)+(yt+1)%10).substring(0,at.length-3)+(De+yt+3)%10+at.substring(at.length-2),Number(at)},this.loadAssets=function(De,at,yt,rt,Tt,xt,Ct,lt,Dt,Mt,St,Ft){if(n(De))return nn();if(n(De.src)){var Yt="assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum",$t;if($t=mt(y.loadAssets,arguments,Yt))return $t}n(at)||(le.PATH=at);var sn=v(Tt||null);if(!n(yt)&&yt.type=="ProgressBar"&&n(rt)&&(rt=!0),n(rt)&&(rt=!0),Array.isArray(De)||(De=[De]),De.length==0)return nn();function nn(){var Kt=new e.Queue;return Kt.isLoading=!1,Kt.loadAssetsCount=0,setTimeout(function(){Kt.dispatchEvent("complete"),y.dispatchEvent("complete")},10),Kt}n(Tt)&&(Tt=0),n(xt)&&(xt=sn=="s"?8:8e3),n(Ct)&&(Ct=!1),n(lt)&&(lt="anonymous"),n(Mt)&&(Mt=!1),n(St)&&(St=Y),n(Ft)&&(Ft=y.maxNum);var Ot=!1,Zt=[],ot,bt,Rt,Ut,Gt,wt=/\.([^.]+)$/i,Bt=[],Ht=[],Jt=[],cn=0,jt=!0;for(Rt=0;Rt<De.length;Rt++){if(ot=De[Rt],ot.assets){var an=[];for(De.splice(Rt,1),Array.isArray(ot.assets)||(ot.assets=[ot.assets]),Ut=0;Ut<ot.assets.length;Ut++){var en=ot.assets[Ut];if(en.split){var yn=en.split("?");bt=yn[0].match(wt)}bt&&Pe.indexOf(bt[1])>=0?Bt.push(en):en.match&&en.match(/fonts\.googleapis\.com/i)?Ht.push(en):en.font?(en.src?en.src=ot.path+en.src:en.font=ot.path+en.font,Bt.push(en)):e.assetIDs[en]?an.push({id:ot.path+en,src:ot.path+en,path:null,loadTimeout:ot.loadTimeout,maxNum:ot.maxNum,noCORSonImage:ot.noCORSonImage}):an.push({id:en,src:en,path:ot.path,loadTimeout:ot.loadTimeout,maxNum:ot.maxNum,noCORSonImage:ot.noCORSonImage})}for(var kt=an.length-1;kt>=0;kt--)De.splice(Rt,0,an[kt]);if(ot=an[0],ot==null)continue}if(ot.constructor=={}.constructor){var ft=0;for(var It in ot)ft++;ft==1&&ot.src&&!ot.src.match(/fonts\.googleapis\.com/i)&&(ot=ot.src)}var qt;if(ot.constructor=={}.constructor)if(ot.audioSprite){Gt=e.copy(ot),ot=Gt.src,Kn(ot);var Xt=[],rn;for(Ut=0;Ut<Gt.audioSprite.length;Ut++)rn=Gt.audioSprite[Ut],Xt.push({id:rn[0],startTime:Math.round(rn[1]*1e3),duration:Math.round((rn[2]-rn[1])*1e3)});delete Gt.audioSprite,Gt.data={audioSprite:Xt},Zt.push(Gt)}else if(ot.data&&ot.data.audioSprite)Gt=e.copy(ot),ot=Gt.src,Kn(ot),Zt.push(Gt);else if(ot.id){if(ot.path){var Qt,Pt;if(ot.path.match(/http/i))ot.src=ot.path+ot.src;else if(ot.path.match(/^\//))Qt=le.location.href,Pt=Qt.match(/(.*?)([^/])\/[^/]/),Qt=Pt[1]+Pt[2],ot.src=Qt+ot.path+ot.src;else{var Wt=le.location.pathname;Qt=le.location.href;var xn=Qt.split(Wt)[0]+Wt;Pt=xn.match(/(.*)\//),ot.src=Pt[1]+"/"+ot.path+ot.src}delete ot.path}if(ot.noCORSonImage){var zt=new Image;Jt.push(zt),zt.src=ot.src,zt.id=ot.id;var ln;zt.onload=function(Kt){var on=Kt.currentTarget,tn=e.assets[on.id]=new e.Bitmap({image:on,style:!1}).expand(0);ln=new ze.Event("assetload"),tn&&typeof tn!="string"&&typeof tn!="number"&&(tn.file=on.id,tn.src=on.src),ln.asset=tn,dn.dispatchEvent(ln),Mt||(ln=new ze.Event("assetload"),ln.asset=tn,y.dispatchEvent(ln)),dn.loadAssetsCount--,dn.loadAssetsCount==0&&In()}}else{e.assetIDs[ot.id]=ot.src;var Fn=ot.maxNum;n(Fn)&&(Fn=Ft);var Un=ot.type,Rn=n(ot.loadTimeout)?xt:ot.loadTimeout;ot=ot.src,Kn(ot),qt={src:ot,loadTimeout:Rn*(sn=="s"?1e3:1),data:Fn,type:Un},n(Dt)||(qt.type=Dt),Zt.push(qt)}}else ot.src&&ot.src.match(/fonts\.googleapis\.com/i)?Ht.push(ot):Bt.push(ot);else{var nr=Kn(ot);nr&&Pe.indexOf(nr[1])>=0?(Bt.push(ot),cn--):ot.match(/fonts\.googleapis\.com/i)?(Ht.push(ot),cn--):(qt={src:ot,loadTimeout:xt*(sn=="s"?1e3:1),data:Ft},n(Dt)||(qt.type=Dt),Zt.push(qt))}if(Ot&&jt){var Zn=document.createElement("audio");Zn.setAttribute("src",(!n(at)&&!ot.match(/^http:\/\/|https:\/\//i)?at:"")+ot),document.body.appendChild(Zn),jt=!1}}function Kn(Kt){if(bt=null,Kt.split){var on=Kt.split("?");bt=on[0].match(wt),bt&&ze.Sound.SUPPORTED_EXTENSIONS.indexOf(bt[1])>=0&&(Ot=!0)}return cn++,bt}y.loadAssetsCount++,y.isLoading=!0;var dn=new e.Queue;dn.isLoading=!0,dn.loadAssetsCount=0,!n(yt)&&yt.show&&(yt.zimActiveLoader=dn,yt.show());var wn;if(Bt.length>0){var Jn=[],un,fn;for(Rt=0;Rt<Bt.length;Rt++){if(fn=Bt[Rt],fn.font&&!fn.src){fn.src=fn.font,fn.font=fn.font.split(".")[0];var kn=fn.font.split("/");fn.font=kn[kn.length-1]}typeof fn=="string"&&(fn={font:fn.split(".")[0],src:fn}),un={src:"url("+(fn.src.match(/\//i)?"":at||"")+fn.src+")"+(fn.type?" format('"+fn.type+"')":""),family:fn.font},fn.weight&&(un.weight=fn.weight),fn.style&&(un.style=fn.style),Jn.push(un)}wn=new ze.FontLoader({src:Jn},!0),wn.on("complete",Vn),wn.on("error",Vn),wn.load(),dn.loadAssetsCount++}if(Ht.length>0)for(Rt=0;Rt<Ht.length;Rt++)fn=Ht[Rt],typeof fn=="string"&&(fn={src:fn}),un={src:fn.src,type:"fontcss"},dn.loadAssetsCount++,wn=new ze.FontLoader(un,!0),wn.on("complete",Vn),wn.on("error",Vn),wn.load();function Vn(){dn.loadAssetsCount--,dn.loadAssetsCount==0&&In()}if(Jt.length>0)for(Rt=0;Rt<Jt.length;Rt++)dn.loadAssetsCount++;function lr(Kt,on){dn.loadAssetsCount--;var tn=on.item,_n=e.assets[tn.id]=Kt;_n.src=tn.src,_n.file=tn.id,_n.item=tn,_n.svg=on.svg;var Mn=new ze.Event("assetload");Mn.item=tn,Mn.asset=_n,_n.type="SVG",dn.dispatchEvent(Mn),Mt||(Mn=new ze.Event("assetload"),Mn.item=tn,Mn.asset=_n,y.dispatchEvent(Mn)),dn.loadAssetsCount==0&&In()}var ur=Date.now(),Pn=new ze.Event("complete");if(cn>0){dn.loadAssetsCount++;var bn=dn.preload=y.preload=new ze.LoadQueue(rt,at,lt);St!=1&&bn.setMaxConnections(St),Ot&&bn.installPlugin(ze.Sound),bn.on("progress",function(Kt){dn.dispatchEvent(Kt),Mt||y.dispatchEvent(Kt)}),bn.on("error",function(Kt){dn.dispatchEvent(Kt),Mt||y.dispatchEvent(Kt)}),bn.on("fileload",function(Kt){if(!Kt.result||(Kt.result.nodeName=="IMG"||Kt.result.nodeName=="SVG")&&!Kt.rawResult&&rt){var on=new ze.Event("error");on=new ze.Event("error"),on.item=Kt.item,dn.dispatchEvent(on),on=new ze.Event("error"),on.item=Kt.item,y.dispatchEvent(on)}else{var tn=Kt.item,_n=Kt.item.type,Mn=tn.id.match(wt),Cn;if(_n&&_n=="sound"){var er=[];if(tn.data&&tn.data.audioSprite)for(var On=0;On<tn.data.audioSprite.length;On++)er.push(tn.data.audioSprite[On].id);else er.push(tn.id);for(On=0;On<er.length;On++)~function(){var Hn=er[On],vr=Kt.item.src,rr=Kt.item;Cn=e.assets[Hn]={type:"sound",path:at,id:Hn,file:Hn,src:vr,item:rr,dispose:function(){delete e.assets[Hn],Cn=null},play:function(yr,mr,$n,fr,xr,wr,_r){var Tr="volume, loop, loopCount, pan, offset, delay, interrupt",mn;if(mn=mt(e.assets[Hn].play,arguments,Tr))return mn;var An={volume:yr,loop:mr,loopCount:$n,pan:fr,offset:xr,delay:wr,interrupt:_r},ir=v(An.offset,null,30);ir=="s"&&(An.offset&&(An.offset*=1e3),An.delay&&(An.delay*=1e3)),An.loop===!0&&(An.loop=-1),An.loopCount&&(An.loop=An.loopCount,delete An.loopCount);var Yn=ze.Sound.play(Hn,An);return Yn.getStage=function(){return ve},Yn.dispose=function(){Yn.destroy()},Yn}}}()}else if(_n=="image")Kt.result.width&&(Cn=e.assets[tn.id]=new e.Bitmap({image:Kt.result,width:Kt.result.width,height:Kt.result.height,style:!1}),tn.avoidCORS&&Cn.expand(0));else if(_n=="svg"){dn.loadAssetsCount++,e.svgToBitmap(Kt.result,lr,null,null,{svg:Kt.result,item:tn,type:_n,ext:Mn});return}else Cn=e.assets[tn.id]=Kt.result;Cn&&typeof Cn!="string"&&typeof Cn!="number"&&_n!="json"&&_n!="xml"&&(Cn.file=Kt.item.id,Cn.src=Kt.item.src,Cn.item=Kt.item),on=new ze.Event("assetload"),on.item=tn,on.asset=Cn,dn.dispatchEvent(on),Mt||(on=new ze.Event("assetload"),on.item=tn,on.asset=Cn,y.dispatchEvent(on))}}),y.preloadEvent=bn.on("complete",function(Kt){Pn=Kt,dn.loadAssetsCount--,dn.loadAssetsCount==0&&In()});try{bn.loadManifest(Zt)}catch(Kt){+function(){}()}}function In(){var Kt=Date.now();Tt=Math.max(0,Tt-(Kt-ur)),setTimeout(function(){y.loadAssetsCount--,y.loadAssetsCount<=0&&(y.isLoading=!1),dn.isLoading=!1,dn.dispatchEvent(Pn),!n(yt)&&yt.show&&yt.hide(),Mt||y.dispatchEvent(Pn)},Tt*(sn=="s"?1e3:1))}return dn},this.ac=function(De,at,yt){yt?(yt.commands||(yt.commands=[]),yt.commands.push([De,at,yt])):(at[0].commands||(at[0].commands=[]),at[0].commands.push([De,at]))},e.asset=this.asset=function(De,at,yt,rt,Tt){if(!n(De)){De=dt(De);var xt=e.assetIDs[De];if(xt&&(De=xt),e.assets[De]&&(!e.assets[De].type||e.assets[De].type&&e.assets[De].type.substr(0,2)!="AC"))return e.assets[De];if(le.PATH!=null&&(e.PATH=le.PATH),Tt){var Ct;return y.loadFailObj=="circles"?Ct=y.makeCircles(14):Ct=y.loadFailObj,Ct&&(Ct.type="EmptyAsset",Ct.id=De,Ct.play=function(){if(Et)return ht("Frame - asset("+De+") not found"),{}}),Ct}else{var lt=new e.Container(at,yt);e.assets[De]=lt,at&&yt?lt.type="ACWD":lt.type="AC";var Dt=y.loadAssets({assets:De,path:De.split("/").length==1?e.PATH:null,queueOnly:!0,maxNum:rt}),Mt=De.split(".");return ze.Sound.SUPPORTED_EXTENSIONS.indexOf(Mt[Mt.length-1])>=0&&(lt.play=function(){return lt.playParams=arguments,lt.proxy=new ze.EventDispatcher,Object.defineProperty(lt.proxy,"volume",{get:function(){return lt.sound?lt.sound.volume:null},set:function(St){lt.volume=St,lt.sound&&(lt.sound.volume=St)}}),Object.defineProperty(lt.proxy,"pan",{get:function(){return lt.sound?lt.sound.pan:null},set:function(St){lt.pan=St,lt.sound&&(lt.sound.pan=St)}}),lt.proxy}),Dt.on("complete",function(){De.id?De=De.id:De.src&&(De=De.src);var St=y.asset(De,null,null,null,!0),Ft=De.split("."),Yt;if(ze.Sound.SUPPORTED_EXTENSIONS.indexOf(Ft[Ft.length-1])>=0)lt.play=St.play,lt.type="Sound",lt.src=St.src,lt.item=St.item,lt.playParams&&(lt.sound=lt.play.apply(null,lt.playParams),lt.volume!=null&&(lt.sound.volume=lt.volume),lt.pan!=null&&(lt.sound.pan=lt.pan),lt.sound.on("complete",function(){lt.proxy.dispatchEvent("complete")}));else if(St.type=="Bitmap"||St.type=="Image"||St.type=="Pic"){if(St.type=="Bitmap"?(St.addTo(lt),lt.bitmap=St,lt.image=St.image,lt.id=St.id,lt.item=St.item):(lt.bitmap=St.getChildAt(0).clone(),lt.bitmap.addTo(lt),lt.image=lt.bitmap.image,lt.id=lt.bitmap.id,lt.item=lt.bitmap.item),lt.mouseChildren=!1,lt.type="Image",lt.commands)for(Yt=0;Yt<lt.commands.length;Yt++)lt.commands[Yt][2]?lt[lt.commands[Yt][0]].apply(lt,lt.commands[Yt][1]):e[lt.commands[Yt][0]].apply(lt,lt.commands[Yt][1]);lt.commands=null,lt.stage&&lt.stage.update()}else if(St.type=="EmptyAsset"){if(St.addTo(lt),lt.mouseChildren=!1,lt.type="EmptyAsset",lt.commands)for(Yt=0;Yt<lt.commands.length;Yt++)lt.commands[Yt][2]?lt[lt.commands[Yt][0]].apply(lt,lt.commands[Yt][1]):e[lt.commands[Yt][0]].apply(lt,lt.commands[Yt][1]);lt.commands=null,lt.stage&&lt.stage.update()}else if(St.type=="SVG"){if(St.addTo(lt),lt.mouseChildren=!1,lt.type="SVG",lt.bitmap=St,lt.svg=St.svg,lt.commands)for(Yt=0;Yt<lt.commands.length;Yt++)lt.commands[Yt][2]?lt[lt.commands[Yt][0]].apply(lt,lt.commands[Yt][1]):e[lt.commands[Yt][0]].apply(lt,lt.commands[Yt][1]);lt.commands=null,lt.stage&&lt.stage.update()}e.assets[De]=lt,lt.dispatchEvent("assetLoad"),lt.dispatchEvent("complete")}),Dt.on("error",function(St){var Ft=new ze.Event("error");Ft.id=St.id,Ft.item=St.item,lt.dispatchEvent(Ft)}),lt}}},e.asset.getIDs=function(){var De=[];for(var at in e.assetIDs)De.push(at);return De},e.image=function(De,at,yt,rt,Tt){return De.match(/^htt/i)&&(De="https://cors.zimjs.com/"+De),e.asset(De,at,yt,rt,Tt)},e.zimObjectIDs={},e.object=this.object=function(De){return e.zimObjectIDs[De]},e.object.getNames=function(){var De=[];for(var at in e.zimObjectIDs)De.push(at);return De},le.zns||(le.asset=this.asset,le.image=e.image,le.object=this.object),this.setDefault=function(){return le.zimDefaultFrame=le.zdf=le.F=y,le.S=ve,le.W=ve.width,le.H=ve.height,y},Object.defineProperty(y,"isDefault",{get:function(){return le.zdf==y},set:function(){ht("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(y,"stage",{get:function(){return ve},set:function(){ht("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(y,"width",{get:function(){return $},set:function(){ht("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(y,"height",{get:function(){return ue},set:function(){ht("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(De){o=De,n(De)?y.canvas.style.backgroundColor="default":(y.canvas.style.backgroundColor=o,!n(o)&&A&&ve.setClearColor(e.convertColor(o)))}});var Fe;Object.defineProperty(this,"outerColor",{get:function(){return Fe},set:function(De){Fe=De,gr("body").css({backgroundColor:Fe})}}),Object.defineProperty(y,"allowDefault",{get:function(){return V},set:function(De){De?(ve.preventSelection=!1,document.body.style.overflow="visible",y.zil&&(le.removeEventListener("keydown",y.zil[0]),le.removeEventListener("wheel",y.zil[1]),le.removeEventListener("DOMMouseScroll",y.zil[2]),y.zil=null)):(ve.preventSelection=!0,ve.enableDOMEvents(!0),(t=="full"||t=="fit"||t=="fill")&&(document.body.style.overflow="hidden"),n(y.zil)&&(y.zil=Ur())),V=De,ve.__touch&&(ve.__touch.preventDefault=!V)}});var we;Object.defineProperty(y,"cursors",{get:function(){return we},set:function(De){we=De&&De.constructor=={}.constructor?De:null,we?je(we):st()}}),y.cursorTypes=["none","auto","pointer","text","wait","crosshair","default","help","move","progress","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","context-menu","cell","vertical-text","alias","copy","no-drop","not-allowed","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","grab","grabbing","zoom-in","zoom-out"],y.cursorList=new e.Dictionary(!0);function je(De){e.loop(De,function(xt,Ct){Ct.noMouse&&Ct.noMouse()}),y.pme&&st(),e.loop(y.cursorList,function(xt){!xt._cursor&&xt.cursor&&De[xt.cursor]&&(xt._cursor=xt.cursor,y.cursorList.add(xt,xt._cursor),xt.cursor="none")}),De.default&&(document.body.style.cursor="none"),y.pme=y.on("pointermove",function(xt){if(y.cursorObj){var Ct=y.cursorObj,lt=y.stage.getObjectUnderPoint(y.mouseX,y.mouseY,1);lt&&(lt._cursor||lt.cursor)?Tt(lt):De.default?(Je("none"),y.cursorObj=De.default,De.default.addTo(y.stage)):Je(),y.cursorObj!=Ct&&Ct.removeFrom&&Ct.removeFrom(),y.cursorObj.x=y.mouseX,y.cursorObj.y=y.mouseY,y.cursorObj.top(),e.Ticker.isUpdating(y.stage)||y.stage.update()}});var at=!1;if(y.mouseX!=0&&y.mouseY!=0){at=!0;var yt=y.stage.getObjectUnderPoint(y.mouseX,y.mouseY,1);yt&&(yt._cursor||yt.cursor)?(qn("setting"),Tt(yt)):De.default?(Je("none"),De.default.x=y.mouseX,De.default.y=y.mouseY,y.cursorObj=De.default,y.cursorObj.mouseChildren=!1,y.cursorObj.mouseEnabled=!1,De.default.addTo(y.stage)):Je(),y.stage.update()}function rt(xt){Je("none"),y.cursorObj=xt,y.cursorObj.x=y.mouseX,y.cursorObj.y=y.mouseY,y.cursorObj.mouseChildren=!1,y.cursorObj.mouseEnabled=!1,y.cursorObj.addTo(y.stage)}y.pee=y.on("pointerenter",function(xt){if(at){at=!1;return}setTimeout(function(){var Ct=y.stage.getObjectUnderPoint(y.mouseX,y.mouseY,1);Ct&&(Ct._cursor||Ct.cursor)||(De.default?rt(De.default):Je(),y.stage.update())},50)}),y.smo=y.stage.on("mouseover",function(xt){Tt(xt.target)});function Tt(xt){var Ct=y.cursorsExclude;if(Ct&&(Array.isArray(Ct)||(Ct=[Ct]),Ct.includes(xt))){xt.cursor=y.cursorTypes.includes(xt._cursor)?xt._cursor:"default";return}if(xt._cursor&&De[xt._cursor]){if(De[xt._cursor]==y.cursorObj)return;y.cursorObj&&y.cursorObj.removeFrom(),rt(De[xt._cursor])}else if(De.default&&(!xt.cursor||!y.cursorTypes.includes(xt.cursor))){if(De.default==y.cursorObj)return;y.cursorObj&&y.cursorObj.removeFrom(),rt(De.default)}else y.cursorTypes.includes(xt.cursor)||(xt.cursor="default"),y.cursorObj&&y.cursorObj.removeFrom();y.stage.update()}y.ple=y.on("pointerdown",function(xt){y.cursorObj&&e.interval(.001,function(){y.cursorObj&&y.cursorObj.top(),y.stage.update()},2,!0)}),y.pde=y.on("pointerleave",function(xt){at=!1,y.cursorObj&&y.cursorObj.removeFrom(),y.stage.update()}),y.smu=y.stage.on("mouseout",function(xt){y.cursorObj&&y.cursorObj.removeFrom(),De.default?rt(De.default):Je()})}function st(){y.pme&&y.off("pointermove",y.pme),y.pee&&y.off("pointerenter",y.pee),y.ple&&y.off("pointerdown",y.ple),y.pde&&y.off("pointerleave",y.pde),y.smo&&y.stage.off("mouseover",y.smo),y.smu&&y.stage.off("mouseout",y.smu),y.pme=y.pee=y.ple=y.pde=y.smo=y.smu=null,e.loop(y.cursorList,function(De,at){at!==!0&&(De.cursor=at),De._cursor=null}),e.loop(y.cursorList,function(De){y.cursorList.add(De,!0)}),y.cursorObj&&(y.cursorObj.dispose(),y.cursorObj=null,y.stage.update()),Je()}function Je(De){De!="none"&&(y.cursorObj=null),y.canvas.parentElement&&(y.canvas.parentElement.style.cursor=De||"default")}function tt(De){y.dispatchEvent(De)}le.addEventListener("contextmenu",tt,!1);var Te=new ze.Event("keydown");this.eventRemove=Te.remove;function et(De){De.remove=y.eventRemove,y.altKey=De.altKey,y.ctrlKey=De.ctrlKey,y.metaKey=De.metaKey,y.shiftKey=De.shiftKey,y.dispatchEvent(De)}le.addEventListener("keydown",et);function Ve(De){y.altKey=De.altKey,y.ctrlKey=De.ctrlKey,y.metaKey=De.metaKey,y.shiftKey=De.shiftKey,De.remove=y.eventRemove,y.dispatchEvent(De)}le.addEventListener("keyup",Ve);function Le(De){y.dispatchEvent(De)}le.addEventListener("wheel",Le);function Qe(De){De.remove=y.eventRemove,y.dispatchEvent(De)}ne&&le.DeviceMotionEvent&&le.addEventListener("devicemotion",Qe);function $e(De){De.remove=y.eventRemove;var at=360-De.alpha;Math.abs(at-nt)>180-45&&Math.abs(at-nt)<180+45&&(pt=pt==0?180:0),nt=at,De.rotation={x:De.beta,y:De.gamma,z:(at+pt)%360},y.dispatchEvent(De)}if(ne&&le.DeviceOrientationEvent){var nt=0,pt=0;le.addEventListener("deviceorientation",$e)}this.isFullscreen=!!document.fullscreenElement,this.htmlobc=gr("html").css("backgroundColor"),this.fullscreen=function(De){if(n(De)&&(De=!0),De){if(document.fullscreenElement)return;var at=y.canvas.parent?y.canvas.parent:document.body;at.requestFullscreen?at.requestFullscreen():at.webkitRequestFullscreen?at.webkitRequestFullscreen():at.mozRequestFullscreen?at.mozRequestFullscreen():at.msRequestFullscreen&&at.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=De},document.addEventListener("fullscreenchange",function(){y.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(gr("html").css("backgroundColor",y.color),y.dispatchEvent("fullscreenenter")):(gr("html").css("backgroundColor",y.htmlobc?y.htmlobc:"transparent"),y.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(De,at){if(t!="full"){n(De)&&(De=$),n(at)&&(at=ue),Tn(k)&&Tn(k).parentNode.removeChild(Tn(k)),$=De,ue=at;for(var yt=[],rt=0;rt<y.stage.numChildren;rt++)yt.push(y.stage.getChildAt(rt));for(Ze(),ut(),rt=0;rt<yt.length;rt++)y.stage.addChild(yt[rt])}},this.follow=function(De,at,yt,rt,Tt,xt,Ct,lt,Dt,Mt,St,Ft,Yt,$t){var sn="obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag",nn;if(nn=mt(y.follow,arguments,sn))return nn;if(y.followObj=null,y.followTicker&&e.Ticker.remove(y.followTicker),n(De))return;De.dirX=De.dirY=0,y.followObj=De,De.followDampX=null,De.followDampY=null,n(at)&&(at=new e.Boundary(0,0,y.stage.width,y.stage.height)),y.followBoundary=at,n(yt)&&(yt=.05),n(rt)&&(rt=yt),n(Tt)&&(Tt=0),n(xt)&&(xt=0),n(Ct)&&(Ct=0),n(lt)&&(lt=0),n(Dt)&&(Dt=.02),n(Mt)&&(Mt=Dt),n(St)&&(St=!0),n(Ft)&&(Ft=!0),n(Yt)&&(Yt=!1),n($t)&&($t=!1),De.parent?Ot():De.on("added",Ot);function Ot(){var Zt=De.parent;y.frameBorderLock=Yt,St&&(y.followDampX=new e.Damp(Zt.x,yt),y.offsetDampX=new e.Damp(at.x+Tt+(at.width-Tt-xt)/2,Dt)),Ft&&(y.followDampY=new e.Damp(Zt.y,rt),y.offsetDampY=new e.Damp(at.y+Ct+(at.height-Ct-lt)/2,Mt)),y.followTicker=e.Ticker.add(function(){var ot=y.followBoundary;if(St){var bt=ot.x+Tt+(ot.width-Tt-xt)/2;y.followOffsetX=[$t?ot.x+ot.width-Tt:bt,bt,$t?ot.x+Tt:bt],y.followObj&&(Zt.x=y.followDampX.convert(y.offsetDampX.convert(y.followOffsetX[De.motionController?De.motionController.dirX+1:1])-De.x))}if(Ft){var Rt=ot.y+Ct+(ot.height-Ct-lt)/2;y.followOffsetY=[$t?ot.y+ot.height-lt:Rt,Rt,$t?ot.y+Ct:Rt],y.followObj&&(Zt.y=y.followDampY.convert(y.offsetDampY.convert(y.followOffsetY[De.motionController?De.motionController.dirY+1:1])-De.y))}y.frameBorderLock&&(Zt.x>y.followBoundary.x&&(Zt.x=y.followBoundary.x),Zt.y>y.followBoundary.y&&(Zt.y=y.followBoundary.y),Zt.x<y.followBoundary.x+y.followBoundary.width-Zt.width&&(Zt.x=y.followBoundary.x+y.followBoundary.width-Zt.width),Zt.y<y.followBoundary.y+y.followBoundary.height-Zt.height&&(Zt.y=y.followBoundary.y+y.followBoundary.height-Zt.height))})}return De},n(e.blurCheck)&&e.setBlurDetect(),this.keyboardMessage=function(De,at,Mt,rt,Tt){var xt="color, backgroundColor, message, response, percent",Ct;if(Ct=mt(y.keyboardMessage,arguments,xt))return Ct;n(De)&&(De=e.yellow),n(at)&&(at="black"),n(Mt)&&(Mt="PRESS SCREEN FOR KEYBOARD CONTROL"),n(rt)&&(rt="YOU HAVE KEYBOARD CONTROL"),n(Tt)&&(Tt=80);function lt(){try{return window.self!==window.top}catch(Ft){return!0}}var Dt=lt();Dt&&(y.canvas.style.pointerEvents="none");var Mt=new e.Label({text:Mt,size:40,color:De,backgroundColor:at,paddingV:15,paddingH:30,shiftV:1,align:CENTER}).scaleTo(y.stage,Tt).ske(10).reg(CENTER).pos(0,50,CENTER,BOTTOM);document.addEventListener("mousedown",St),document.addEventListener("pointerdown",St);function St(){Dt&&(y.canvas.style.pointerEvents="auto"),document.removeEventListener("mousedown",St),document.removeEventListener("pointerdown",St),Mt&&(Mt.text=rt,Mt.animate({props:{alpha:0},wait:1,call:()=>{Mt.dispose(),Mt=null}}),y.stage.update())}return Mt},this.dispose=function(){y.zil&&y.zil.length&&(le.removeEventListener("keydown",y.zil[0]),le.removeEventListener("wheel",y.zil[1]),le.removeEventListener("DOMMouseScroll",y.zil[2])),xe&&xe.removeAllEventListeners(),se&&le.removeEventListener("resize",se),le.removeEventListener("resize",Ue),le.removeEventListener("contextmenu",tt),le.removeEventListener("keydown",et),le.removeEventListener("keyup",Ve),le.removeEventListener("wheel",Le),le.removeEventListener("devicemotion",Qe),le.removeEventListener("deviceorientation",$e),le.removeEventListener("mousedown",Z,!0),le.removeEventListener("mousemove",Z,!0),le.removeEventListener("mouseup",Z),V||(document.body.style.overflow="auto"),De(ve);function De(at){if(at.dispose)at.dispose();else{if(at.removeAllEventListeners(),at.numChildren)for(var yt=at.numChildren-1;yt>=0;yt--)De(at.getChildAt(yt));at.parent&&at.parent.removeChild(at)}at=null}return Tn(k)&&Tn(k).parentNode.removeChild(Tn(k)),y==e.tickerFrame&&(e.tickerFrame=null),y===le.zdf&&(le.zdf=le.S=le.W=le.H=null),ve=null,y=null,!0},this.makeCircles=function(De,at){n(De)&&(De=100);var yt=[e.orange,e.green,e.pink,e.blue,e.brown,e.dark],rt,Tt;if(at)for(rt=new e.Container({style:!1}),rt.radius=De,Tt=0;Tt<yt.length;Tt++)rt.addChild(new e.Circle(rt.radius/yt.length*(yt.length-Tt),yt[Tt],null,null,null,null,null,null,!1));else{rt=new e.Shape({style:!1});var xt=rt.graphics;for(rt.radius=De,Tt=0;Tt<yt.length;Tt++)xt.f(yt[Tt]).dc(0,0,rt.radius/yt.length*(yt.length-Tt));rt.setBounds(-rt.radius,-rt.radius,rt.radius*2,rt.radius*2)}return rt},this.madeWith=function(De,at,yt,rt,Tt,xt,Ct){var lt="color, text, edges, box, slats, borderColor, borderWidth",Dt;if(Dt=mt(y.madeWith,arguments,lt))return Dt;n(De)&&(De=e.dark),n(at)&&(at="Made with ZIM");var Mt=new e.Container,St=Mt.icon=y.makeIcon(yt,rt,Tt,xt,Ct).sca(.5).alp(.92).hov(1).addTo(Mt).tap(function(){St.alp(.92),St.stage.update(),or("https://zimjs.com","_blank")});return Mt.label=new e.Label(at,16,null,De).sca(.7).pos(0,-19,e.CENTER,e.BOTTOM,Mt),Mt},this.makeIcon=function(De,at,yt,rt,Tt){var xt="edges, box, slats, borderColor, borderWidth",Ct;if(Ct=mt(y.makeIcon,arguments,xt))return Ct;var lt=new e.Container(-20,-13,102,120).reg(-20,-13);n(De)&&(De=e.light),n(at)&&(at=e.dark),yt===!0&&(yt=[e.silver,e.silver,e.silver,e.silver,e.silver]),new e.Rectangle(lt.width,lt.height,at,rt,Tt).loc(-20,-13,lt);var Dt=[[yt?yt[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[yt?yt[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[yt?yt[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[yt?yt[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[yt?yt[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[De,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return e.loop(Dt,function(Mt){var St=new e.Shape().addTo(lt);St.graphics.f(Mt[0]).p(Mt[1]),St.setTransform(Mt[2],Mt[3])}),lt.mouseChildren=!1,lt},this.makeAbstract=function(De){n(De)&&(De="black");var at=[[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],yt=new e.Rectangle(200,200);e.loop(at,function(Tt){var xt=new e.Shape().f(Tt[2]).p(Tt[3]);xt.setTransform(Tt[0]+20,Tt[1]+27),xt.addTo(yt)},!0);var rt=new e.Container;return yt.sca(.4).addTo(rt),rt.mouseChildren=!1,rt},this.makeCat=function(De){n(De)&&(De=246);var at=[[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],yt=new e.Container(157.5,246);e.loop(at,function(Tt){var xt=new e.Shape().f(Tt[2]).s(Tt[3]).ss(Tt[4]?Tt[4][0]:null,Tt[4]?Tt[4][1]:null,Tt[4]?Tt[4][2]:null).p(Tt[5]);xt.setTransform(Tt[0],Tt[1]),xt.addTo(yt)},!0);var rt=new e.Container;return yt.sca(De/246).addTo(rt).mov(0,-.4),D&&rt.cache(),rt.mouseChildren=!1,rt}},e.extend(e.Frame,ze.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},e.extend(e.Queue,ze.EventDispatcher,null,"cjsEventDispatcher"),e.Pic=function(t,r,i,o,l,f,h){var g="file, width, height, noCors, style, group, inherit",_;if(_=mt(e.Pic,arguments,g,this))return _;qe("83.03"),this.group=f;var P=l===!1?{}:e.getStyle("Pic",this.group,h);if(n(t)&&(t=P.file!=null?P.file:null),n(o)&&(o=P.noCors!=null?P.noCors:!1),n(t)){Et&&ht("ZIM Pic - needs a file");return}this.zimContainer_constructor(r,i);var C=this,T=t;t=C.file=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var N=o?e.image(t):e.asset(t);C.mouseChildren=!1,N.type=="Bitmap"||N.type=="Image"?(N.type=="Bitmap"?C.bitmap=N.clone().addTo(C):C.bitmap=N.getChildAt(0).clone().addTo(C),C.id=N.id,C.image=C.bitmap.image,C.src=C.bitmap.src,C.item=C.bitmap.item,C.setBounds(null),C.type="Pic",setTimeout(function(){C.dispatchEvent("ready"),C.dispatchEvent("complete")},20)):N.on("complete",function(){if(C.bitmap=N.getChildAt(0).clone().addTo(C),C.id=N.id,C.setBounds(null),C.type="Pic",C.commands)for(var O=0;O<C.commands.length;O++)C.commands[O][2]?C[C.commands[O][0]].apply(C,C.commands[O][1]):e[C.commands[O][0]].apply(C,C.commands[O][1]);C.image=C.bitmap.image,C.src=C.bitmap.src,C.item=C.bitmap.item,C.commands=null,C.dispatchEvent("ready"),C.dispatchEvent("complete"),C.stage&&C.stage.update()}),C.keyOut=function(O,S,k){return C.type=="AC"&&le.zdf?(le.zdf.ac("keyOut",arguments,C),C):(C.bitmap&&C.bitmap.keyOut(O,S,k),C.stage&&C.stage.update(),C)},l!==!1&&e.styleTransforms(this,P),C.clone=function(O){return this.cloneProps(new e.Pic(O?t:T,r,i,o,l,this.group,h))}},e.extend(e.Pic,e.Container,["clone"],"zimContainer",!1),e.Aud=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",O;if(O=mt(e.Aud,arguments,N,this))return O;qe("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=C;var S=P===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(t=S.file!=null?S.file:null),n(t)){Et&&ht("ZIM Sound - needs a file");return}n(r)&&(r=S.volume!=null?S.volume:1),n(i)&&(i=S.loop!=null?S.loop:!1),n(o)&&(o=S.loopCount!=null?S.loopCount:null),n(l)&&(l=S.pan!=null?S.pan:0),n(f)&&(f=S.offset!=null?S.offset:0),n(h)&&(h=S.delay!=null?S.delay:0),n(g)&&(g=S.interrupt!=null?S.interrupt:"none"),n(_)&&(_=S.maxNum!=null?S.maxNum:null);var k=this;t=k.file=e.Pick.choose(t);var x=k.sound=e.asset(t,null,null,_);x.type=="AC"?x.on("complete",function(){k.src=x.src,k.item=x.item,k.dispatchEvent("ready"),k.dispatchEvent("complete")}):setTimeout(function(){k.src=x.src,k.item=x.item,k.dispatchEvent("ready"),k.dispatchEvent("complete")},20),k.volume=r,k.loop=i,k.loopCount=o,k.pan=l,k.offset=f,k.delay=h,k.interrupt=g,k.maxNum=_,k.play=function(E,L,A,b,F,q,V){var I="volume, loop, loopCount, pan, offset, delay, interrupt",ne;return(ne=mt(k.play,arguments,I))?ne:(n(E)&&(E=k.volume),n(L)&&(L=k.loop),n(A)&&(A=k.loopCount),n(b)&&(b=k.pan),n(F)&&(F=k.offset),n(q)&&(q=k.delay),n(V)&&(V=k.interrupt),k.sound.play(E,L,A,b,F,q,V))},k.dispose=function(){return k.sound&&k.sound.dispose(),k.sound=null,!0}},e.extend(e.Aud,ze.EventDispatcher,null,"cjsEventDispatcher"),e.Vid=function(t,r,i,o,l,f,h,g,_,P,C,T){var N="file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",O;if(O=mt(e.Vid,arguments,N,this))return O;qe("83.07"),this.group=C;var S=P===!1?{}:e.getStyle("Vid",this.group,T);if(n(t)&&(t=S.file!=null?S.file:null),n(t)){Et&&ht("ZIM Vid - needs a file");return}n(r)&&(r=S.width!=null?S.width:null),n(i)&&(i=S.height!=null?S.height:null),n(o)&&(o="fit"),n(f)&&(f=S.loop!=null?S.loop:!1),n(l)&&(l=S.volume!=null?S.volume:1),n(h)&&(h=S.align!=null?S.align:"center"),n(g)&&(g=S.valign!=null?S.valign:"center"),n(_)&&(_=S.type!=null?S.type:"video/mp4"),this.zimContainer_constructor(r,i),r&&i?this.type="ACWD":this.type="AC";var k=this,x,E=t;t=e.Pick.choose(t),k.file=t,le.PATH!=null&&(e.PATH=le.PATH);var L="";t.split("/").length==1&&e.PATH&&(L=e.PATH),this.mouseChildren=!1;var A=k.source=document.createElement("video");document.body.appendChild(A),A.style.display="none",A.setAttribute("autoplay","autoplay"),A.setAttribute("playsinline","playsinline"),A.setAttribute("crossorigin","anonymous"),f&&A.setAttribute("loop","loop");var b=k.innerSource=document.createElement("source");t.split("?").length==1&&(t+="?playsinline=1"),b.setAttribute("src",L+t),b.setAttribute("type",_),A.appendChild(b),q();var F=0;function q(){F++>5&&k.dispatchEvent("error"),A.addEventListener("stalled",q),A.addEventListener("error",q),A.addEventListener("canplay",V)}function V(){k.type="Vid",A.removeEventListener("stalled",q),A.removeEventListener("error",q),A.removeEventListener("canplay",V),A.pause();var I=A.videoWidth,ne=A.videoHeight;if(k.setBounds(0,0,r||I,i||ne),x=k.bitmap=new e.Bitmap(A,I,ne).addTo(k),x.setBounds(0,0,I,ne),x.scaleTo(k,100,100,o).pos(0,0,h,g,k),k.commands)for(var R=0;R<k.commands.length;R++)k.commands[R][2]?k[k.commands[R][0]].apply(k,k.commands[R][1]):e[k.commands[R][0]].apply(k,k.commands[R][1]);k.commands=null,k.dispatchEvent("ready")}k.videoPaused=!0,k.play=function(){if(!x){Et&&ht("ZIM Vid - no file found");return}if(A.play(),A.volume=l,k.videoPaused=!1,!k.ticker)if(k.keyObj){var I=k.keyObj.color,ne=k.keyObj.tolerance,R=k.keyObj.replacement;k.ticker=e.Ticker.add(function(){x.keyOut(I,ne,R)})}else k.ticker=e.Ticker.add(function(){});return k},k.keyOut=function(I,ne,R){return k.ticker?(e.Ticker.remove(k.ticker),k.ticker=e.Ticker.add(function(){x.keyOut(I,ne,R)})):k.keyObj={color:I,tolerance:ne,replacement:R},k},k.pause=function(I){return n(I)&&(I=!0),k.videoPaused=I,I?(A.pause(),k.ticker&&e.Ticker.remove(k.ticker)):(k.ticker&&e.Ticker.add(k.ticker),A.play()),k},Object.defineProperty(this,"duration",{get:function(){return A.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return A.currentTime},set:function(I){A.currentTime=I}}),Object.defineProperty(this,"volume",{get:function(){return A.volume},set:function(I){l=I,A.volume=I}}),P!==!1&&e.styleTransforms(this,S),k.clone=function(I){return this.cloneProps(new e.Vid(I?t:E,r,i,o,l,f,h,g,_,P,this.group,T))},k.dispose=function(I,ne,R){this.ticker&&e.Ticker.remove(this.ticker);var Q=k.stage;return k.bitmap.dispose(),x=k.bitmap=null,A.pause(),A.removeAttribute("src"),A.load(),A.remove(),A=null,R||this.zimContainer_dispose(!0),Q&&Q.update(),!0}},e.extend(e.Vid,e.Container,["clone","dispose"],"zimContainer",!1),e.SVG=function(t,r,i,o,l,f,h,g,_,P,C){var T="svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",N;if(N=mt(e.SVG,arguments,T,this))return N;qe("83.09"),this.group=P;var O=_===!1?{}:e.getStyle("SVG",this.group,C);if(n(t)&&(t=O.svg!=null?O.svg:null),n(t)){Et&&ht("ZIM SVG - needs a svg value");return}n(o)&&(o=O.bitmap!=null?O.bitmap:!0),n(l)&&(l=O.splitTypes!=null?O.splitTypes:!1),n(f)&&(f=O.geometric!=null?O.geometric:!0),n(h)&&(h=O.showControls!=null?O.showControls:!0),n(g)&&(g=O.interactive!=null?O.interactive:!0),this.zimContainer_constructor(r,i);var S=this;o&&(this.mouseChildren=!1);var k=t;t=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var x=e.assets[t];if(x&&(S.src=x.src,S.file=x.file,S.item=x.item,S.svg=x.svg),x&&x.type=="Bitmap")S.type="SVG",S.bitmap=x.clone(),L();else if(x&&x.type=="AC")x.on("complete",function(){S.type="SVG",S.bitmap=x.bitmap.clone(),L(n(r)&&n(i))});else if(x&&x.type=="ACWB")n(r)&&n(i)&&S.setBounds(0,0,x.width,x.height),x.on("complete",function(){S.type="SVG",S.bitmap=x.bitmap.clone(),L()});else if(x&&x.type=="SVG")S.type="SVG",x.bitmap?S.bitmap=x.bitmap.clone():S.bitmap=x.clone(),L();else if(t&&t.match(/<svg/i)&&(S.svg=t),S.svg&&S.svg.match(/<svg/i))S.type="SVG",L();else{var E=e.asset(t);E.on("complete",function(){S.type="SVG",E.bitmap&&(S.src=E.bitmap.src,S.file=E.bitmap.file,S.item=E.bitmap.item,S.svg=E.bitmap.svg,S.bitmap=E.bitmap.clone()),L(n(r)&&n(i))})}function L(b){if(o)S.bitmap?(S.svg=S.bitmap.svg,S.bitmap.addTo(S),b&&A(),setTimeout(function(){S.dispatchEvent("ready"),S.dispatchEvent("complete")},20)):e.svgToBitmap(S.svg,function(V){S.bitmap=V,S.bitmap.addTo(S),A(),S.dispatchEvent("ready"),S.dispatchEvent("complete"),S.stage&&S.stage.update()});else if(S.bitmap&&(S.svg=S.bitmap.svg),t.match(/<svg/i)||x&&x.type=="SVG"||b){var F=new e.SVGContainer(S.svg);F.loop(function(V){V&&V.addTo(S)},!0),b&&A(),setTimeout(function(){S.dispatchEvent("ready"),S.dispatchEvent("complete")},20)}else{var q=e.asset(t);q.on("complete",function(){var V=new e.SVGContainer(q);V.loop(function(I){I&&I.addTo(S)},!0),A(),S.dispatchEvent("ready"),S.dispatchEvent("complete"),S.stage&&S.stage.update()})}}function A(){if(n(r)&&n(i)&&S.setBounds(null),S.type="SVG",S.commands)for(var b=0;b<S.commands.length;b++)S.commands[b][2]?S[S.commands[b][0]].apply(S,S.commands[b][1]):e[S.commands[b][0]].apply(S,S.commands[b][1]);S.commands=null}S.keyOut=function(b,F,q){return S.type=="AC"&&le.zdf?(le.zdf.ac("keyOut",arguments,S),S):(S.bitmap&&S.bitmap.keyOut(b,F,q),S.stage&&S.stage.update(),S)},_!==!1&&e.styleTransforms(this,O),S.clone=function(b){return this.cloneProps(new e.SVG(b?t:k,r,i,o,l,f,h,g,_,this.group,C))}},e.extend(e.SVG,e.Container,["clone"],"zimContainer",!1),e.SensorAsk=function(t,r,i,o,l,f,h){var g="callback, sensorType, color, backgroundColor, style, group, inherit",_;if(_=mt(e.SensorAsk,arguments,g,this))return _;qe("83.01"),this.group=f;var P=l===!1?{}:e.getStyle("SensorAsk",this.group,h);if(n(r)&&(r=P.sensorType!=null?P.sensorType:"deviceorientation"),r!="devicemotion"&&(r="deviceorientation"),this.sensorType=r,!n(t)){n(i)&&(i=P.color!=null?P.color:e.dark),n(o)&&(o=P.backgroundColor!=null?P.backgroundColor:e.lighter),this.zimPane_constructor("",o,i,200,200,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="SensorAsk";var C=this;if(Style.addGroup("sensorAsk",{width:100,color:i,rollColor:o,corner:10,backgroundColor:e.faint,rollBackgroundColor:i,borderColor:i,borderWidth:2}),C.yes=new e.Button({label:"YES",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){C.hide(!0);var N=DeviceMotionEvent;r!="devicemotion"&&(N=DeviceOrientationEvent),N.requestPermission().then(function(O){O!="denied"?t(!0):t(!1)})}),C.label=new e.Label("Use sensor?",null,null,i,null,null,null,"center").sca(.9).centerReg(this),C.no=new e.Button({label:"NO",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){C.hide(!1),t(!1)}),new e.Circle(110,e.clear,i,1).center(this).alp(.8),new e.Circle(120,e.clear,i,1).center(this).alp(.5),new e.Circle(130,e.clear,i,1).center(this).alp(.2),l!==!1&&e.styleTransforms(this,P),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")C.show();else{let N=function(O){r=="deviceorientation"?O.alpha==null||O.alpha==0&&O.beta==0&&O.gamma==0?t(!1):t(!0):!O.acceleration||O.acceleration.x==null||O.acceleration.x==0&&O.acceleration.y==0&&O.acceleration.z==0?t(!1):t(!0),T=!0,le.removeEventListener(r,N)};var T=!1;le.addEventListener(r,N),setTimeout(function(){T||t(!1)},100)}}},e.extend(e.SensorAsk,e.Pane,null,"zimPane",!1),e.colorsHex=["#fb4758","#f58e25","#ebcb35","#acd241","#50c4b7","#993399","#e472c4","#d1a170","#112233","#000000","#111111","#222222","#333333","#444444","#555555","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],e.colors=["red","orange","yellow","green","blue","purple","pink","brown","interstellar","black","darker","licorice","dark","charcoal","grey","gray","granite","tin","pewter","silver","fog","mist","light","moon","lighter","white","faint","clear"],pn=0;pn<e.colors.length;pn++)e[e.colors[pn]]=e.colorsHex[pn];return String.prototype.darken=function(t){return e.darken(this,t)},String.prototype.lighten=function(t){return e.lighten(this,t)},String.prototype.toColor=function(t,r){return e.toColor(this,t,r)},String.prototype.toAlpha=function(t){return e.toAlpha(this,t)},e.FIT="fit",e.FILL="fill",e.FULL="full",e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.MIDDLE="middle",e.START="start",e.END="end",e.TOP="top",e.BOTTOM="bottom",e.OVER="over",e.UNDER="under",e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.BOTH="both",e.RADIAL="radial",e.UP="up",e.DOWN="down",e.NEXT="next",e.PREV="prev",e.AUTO="auto",e.AVE="ave",e.DEFAULT="default",e.ALL="all",e.NONE="none",e.GET="get",e.POST="post",e.LOCALSTORAGE="localStorage",e.SOCKET="socket",e.TO="to",e.FROM="from",e.SINE="sine",e.SQUARE="square",e.TRIANGLE="triangle",e.SAW="saw",e.SAWTOOTH="saw",e.ZAP="zap",e.DISTILL=!1,e.distillery=[],e.distill=function(){!le.zns&&e&&(e.DISTILL||le.DISTILL)&&e.distillery.push("83.3","83.35");function t(r,i,o){return o.indexOf(r)===i}e.distillery.length>0?(e.distillery=e.distillery.filter(t),ht("zim.distill() - go to https://zimjs.com/distill and enter the following:"),qn(e.distillery.join(" "))):ht("must set zim.DISTILL = true;")},e.parseAudioSprite=function(t,r){if(qe("83.25"),!(n(t)||n(t.resources)||n(t.spritemap))){var i=t,o=i.resources[0],l=i.spritemap,f=[],h,g={src:o,data:{}};for(var _ in l)h=l[_],f.push({id:_,startTime:Math.round(h.start*1e3),duration:Math.round((h.end-h.start)*1e3)});return g.data.audioSprite=f,r&&ht(JSON.stringify(g)),g}},e.previewAudioSprite=function(t,r,i){if(qe("83.26"),!n(t)){if(n(r)&&(r=3),typeof i>"u"){if(n(le.zdf))return;var i=le.zdf}var o=i.width,l=t,f=[],h=[];if(l.constructor=={}.constructor)l.resources&&(l=e.parseAudioSprite(l)),l.audioSprite?e.loop(l.audioSprite,function(_){f.push(_[0].substr(0,r)),h.push(_[0])}):l.data&&l.data.audioSprite&&e.loop(l.data.audioSprite,function(_){f.push(_.id.substr(0,r)),h.push(_.id)});else return;var g=new e.Tabs({tabs:f,width:o,currentEnabled:!0}).addTo();return g.on("change",function(){i.asset(h[g.selectedIndex]).play()}),g}},e.svgToBitmap=function(t,r,i,o,l){if(qe("83.27"),!n(t.draggable)){var f=new DOMParser;t=t.innerHTML?f.parseFromString(t.innerHTML,"text/xml"):t;var h=t.getElementsByTagName("svg"),g=h?t.getElementsByTagName("svg")[0]:null;t=g}if(!XMLSerializer&&Et){ht("ZIM svgToBitmap() - sorry, not supported in Browser");return}var _=typeof t=="string"?t:new XMLSerializer().serializeToString(t);if(_){var P=_.split(">")[0];if(P.length>1){var C=P.split(/width/i);if(C.length==1){var T=100,N=100,O=P.split(/viewBox/i);if(O.length>1){var S=O[1].split('"')[1];if(S){var k=S.split(" ");k.length>1&&(T=k[k.length-2],N=k[k.length-1])}}_=_.replace(/svg /i,'svg  width="'+T+'" height="'+N+'" ')}}_.match(/xmlns/i)||(_=_.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var x=self.URL||self.webkitURL||self,E=new Image;E.onload=function(){var A=new e.Bitmap(E,i,o);r(A,l),x.revokeObjectURL(L)};var L=x.createObjectURL(new document.Blob([_],{type:"image/svg+xml"}));E.src=L},e.makeContent=function(t,r,i){qe("83.29");var o;if(n(i)&&(i=e.dark),typeof t=="string"||typeof t=="number")t=this.message=new e.Label(t,null,null,i);else if(t.constructor=={}.constructor){var l=t;l.buttonScale||(l.buttonScale=.5),n(l.spacingH)&&(l.spacingH=20*l.buttonScale),n(l.spacingV)&&(l.spacingV=20);var f=l.spacingH,h=l.spacingV;l.align||(l.align="center"),t=new e.Container;var g=new ai(10,h).addTo(t);if(l.header&&l.header.pos(0,h,"left","top",t),l.message)var _=new e.Label(l.message,null,null,n(l.color)?i:l.color).loc(0,t.height+(l.header?h:0),t);if(l.display&&l.display.pos(0,-l.display.height-(l.header||l.message?h:0),"left","bottom",t),l.buttons){Array.isArray(l.buttons)||(l.buttons=[l.buttons]);for(var P=l.length*100,C=new e.Container().loc(0,t.height+(l.header||l.message||l.display?h:0),t),T=0;T<l.buttons.length;T++){var N=l.buttons[T],O=N.call||function(){};N.button||(N.button=new e.Button({width:N.width,label:N.label,backgroundColor:N.backgroundColor||N.bgColor,color:N.color,rollBackgroundColor:N.rollBackgroundColor||N.rollBgColor,rollColor:N.rollColor})),N.button.call=O,N.button.sca(l.buttonScale).loc(T==0?0:C.width+f,0,C).tap(function(k){k.target.call(k.target)})}}for(o=0;o<t.numChildren;o++){var S=t.getChildAt(o);S.lastY=S.y,l.align=="center"?S.center(t).loc(null,S.lastY):l.align=="right"&&S.pos(0,null,"right")}if(r&&typeof r=="number"&&(t.width=Math.min(t.width,r-f*2-(l.scrollBar===!0?12:l.scrollBar>0?l.scrollBar:0))),new e.Container(10,h).pos(0,-g.height,"center","bottom",t).bot(),g.top(),t.config=l,t.header=l.header,t.message=_,t.text=l.message,t.display=l.display,l.buttons)for(t.buttons=[],o=0;o<C.numChildren;o++)t.buttons.push(C.getChildAt(o))}return t},e}(Ie||{});function qe(e){Ie&&(Ie.DISTILL||le.DISTILL)&&Ie.distillery.push(e)}function Qn(e,v,a,u,c,m){if(qe("83.3"),e&&e.noDrag)return e;m!==!0&&(m=null);var B={drag:function(Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x){return gn(arguments)?(arguments[0].obj=this,Ie.drag(arguments[0])):Ie.drag(this,Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x)},noDrag:function(Se){return Ie.noDrag(this,Se)},mouse:function(){return Ie.mouse(this)},noMouse:function(){return Ie.noMouse(this)},effect:function(Se,t,r,i,o){return Ie.effect(this,Se,t,r,i,o)},noEffect:function(Se,t){return Ie.noEffect(this,Se,t)},updateEffects:function(Se){return Ie.updateEffects(this,Se)},wire:function(Se,t,r,i,o,l,f){return gn(arguments)?(arguments[0].source=this,Ie.wire(arguments[0])):Ie.wire(this,Se,t,r,i,o,l,f)},noWire:function(Se,t,r){return gn(arguments)?(arguments[0].source=this,Ie.noWire(arguments[0])):Ie.noWire(this,Se,t,r)},wired:function(Se,t,r,i,o,l,f){return gn(arguments)?(arguments[0].target=this,Ie.wired(arguments[0])):Ie.wired(this,Se,t,r,i,o,l,f)},noWired:function(Se,t,r){return gn(arguments)?(arguments[0].target=this,Ie.noWired(arguments[0])):Ie.noWired(this,Se,t,r)},bind:function(Se,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.bind(arguments[0])):Ie.bind(this,Se,t,r,i,o)},noBind:function(Se,t,r,i){return gn(arguments)?(arguments[0].obj=this,Ie.noBind(arguments[0])):Ie.noBind(this,Se,t,r,i)},dragBoundary:function(Se){return Ie.dragBoundary(this,Se)},dragRect:function(Se){return Ie.dragBoundary(this,Se)},transform:function(Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q){return gn(arguments)?(arguments[0].obj=this,Ie.transform(arguments[0])):Ie.transform(this,Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q)},setSwipe:function(Se){return Ie.setSwipe(this,Se)},gesture:function(Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O){return gn(arguments)?(arguments[0].obj=this,Ie.gesture(arguments[0])):Ie.gesture(this,Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O)},noGesture:function(Se,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.noGesture(arguments[0])):Ie.noGesture(this,Se,t,r)},gestureBoundary:function(Se,t){return Ie.gestureBoundary(this,Se,t)},gestureRect:function(Se,t){return Ie.gestureBoundary(this,Se,t)},addPhysics:function(Se,t,r,i,o,l,f,h,g,_,P){return gn(arguments)?(arguments[0].obj=this,Ie.addPhysics(arguments[0])):Ie.addPhysics(this,Se,t,r,i,o,l,f,h,g,_,P)},removePhysics:function(){return Ie.removePhysics(this)},hitTestPoint:function(Se,t,r){return Ie.hitTestPoint(this,Se,t,r)},hitTestReg:function(Se,t){return Ie.hitTestReg(this,Se,t)},hitTestRect:function(Se,t,r,i){return Ie.hitTestRect(this,Se,t,r,i)},hitTestCircle:function(Se,t,r,i){return Ie.hitTestCircle(this,Se,t,r,i)},hitTestCircleRect:function(Se,t){return Ie.hitTestCircleRect(this,Se,t)},hitTestCircles:function(Se,t){return Ie.hitTestCircles(this,Se,t)},hitTestBounds:function(Se,t,r){return Ie.hitTestBounds(this,Se,t,r)},boundsToGlobal:function(Se,t,r,i){return Ie.boundsToGlobal(this,Se,t,r,i)},resetBounds:function(Se,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.resetBounds(arguments[0])):Ie.resetBounds(this,Se,t,r,i,o)},hitTestPath:function(Se,t,r,i,o){return Ie.hitTestPath(this,Se,t,r,i,o)},hitTestGrid:function(Se,t,r,i,o,l,f,h,g,_,P,C){return Ie.hitTestGrid(this,Se,t,r,i,o,l,f,h,g,_,P,C)},animate:function(Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye){return Se&&(Se.props||Se.obj)&&gn(arguments)?(arguments[0].target=this,Ie.animate(arguments[0])):Ie.animate(this,Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O,S,k,x,E,L,A,b,F,q,V,I,ne,R,Q,U,ee,ae,ie,ce,j,G,y,p,d,D,K,w,Y,Ee,X,Z,pe,ve,$,ue,xe,Ye,se,be,te,_e,J,ye)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O){return gn(arguments)?(arguments[0].target=this,Ie.wiggle(arguments[0])):Ie.wiggle(this,Se,t,r,i,o,l,f,h,g,_,P,C,T,N,O)},loop:function(Se,t,r,i,o,l,f,h,g,_){return gn(arguments)?(arguments[0].obj=this,Ie.loop(arguments[0])):Ie.loop(this,Se,t,r,i,o,l,f,h,g,_)},copyMatrix:function(Se){return Ie.copyMatrix(this,Se)},duplicate:function(Se){return Ie.duplicate(this,Se)},cur:function(Se){return Ie.cur(this,Se)},sha:function(Se,t,r,i){return Ie.sha(this,Se,t,r,i)},pos:function(Se,t,r,i,o,l,f,h,g,_){return gn(arguments)?(arguments[0].obj=this,Ie.pos(arguments[0])):Ie.pos(this,Se,t,r,i,o,l,f,h,g,_)},loc:function(Se,t,r,i,o,l,f){return gn(arguments)?(arguments[0].obj=this,Ie.loc(arguments[0])):Ie.loc(this,Se,t,r,i,o,l,f)},mov:function(Se,t){return gn(arguments)?(arguments[0].obj=this,Ie.mov(arguments[0])):Ie.mov(this,Se,t)},top:function(){return Ie.top(this)},bot:function(){return Ie.bot(this)},ord:function(Se){return Ie.ord(this,Se)},dep:function(Se){return Ie.dep(this,Se)},nam:function(Se){return Ie.nam(this,Se)},alp:function(Se){return Ie.alp(this,Se)},vis:function(Se){return Ie.vis(this,Se)},ble:function(Se){return Ie.ble(this,Se)},dye:function(Se){return Ie.dye(this,Se)},hov:function(Se,t){return Ie.hov(this,Se,t)},rot:function(Se,t,r){return Ie.rot(this,Se,t,r)},siz:function(Se,t,r){return Ie.siz(this,Se,t,r)},ske:function(Se,t){return Ie.ske(this,Se,t)},reg:function(Se,t,r){return Ie.reg(this,Se,t,r)},sca:function(Se,t){return Ie.sca(this,Se,t)},scaleTo:function(Se,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.scaleTo(arguments[0])):Ie.scaleTo(this,Se,t,r,i,o)},fit:function(Se,t,r,i,o){return gn(arguments)?(arguments[0].obj=this,Ie.fit(arguments[0])):Ie.fit(this,Se,t,r,i,o)},outline:function(Se,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.outline(arguments[0])):Ie.outline(this,Se,t,r)},blendmodes:function(Se){return Ie.blendmodes(this,Se)},addTo:function(Se,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.addTo(arguments[0])):Ie.addTo(this,Se,t,r)},removeFrom:function(Se){return Ie.removeFrom(this,Se)},added:function(Se,t,r){return Ie.added(this,Se,t,r)},movement:function(Se,t){return Ie.movement(this,Se,t)},noMovement:function(){return Ie.noMovement(this)},tap:function(Se,t,r,i,o,l,f,h,g){return gn(arguments)?(arguments[0].obj=this,Ie.tap(arguments[0])):Ie.tap(this,Se,t,r,i,o,l,f,h,g)},noTap:function(){return Ie.noTap(this)},hold:function(Se,t,r,i){return Ie.hold(this,Se,t,r,i)},noHold:function(){return Ie.noHold(this)},change:function(Se,t){return Ie.change(this,Se,t)},noChange:function(){return Ie.noChange(this)},centerReg:function(Se,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.centerReg(arguments[0])):Ie.centerReg(this,Se,t,r)},center:function(Se,t,r){return gn(arguments)?(arguments[0].obj=this,Ie.center(arguments[0])):Ie.center(this,Se,t,r)},place:function(Se){return Ie.place(this,Se)},placeReg:function(Se){return Ie.placeReg(this,Se)},expand:function(Se,t,r,i){return gn(arguments)?(arguments[0].obj=this,Ie.expand(arguments[0])):Ie.expand(this,Se,t,r,i)},setMask:function(Se,t){return Ie.setMask(this,Se,t)},cloneProps:function(Se){return Se.type=this.type,Se.group=this.group,Se.style=this.style,Se.alpha=this.alpha,Se.rotation=this.rotation,Se.mouseEnabled=this.mouseEnabled,Se.mouseChildren=this.mouseChildren,Se.tickEnabled=this.tickEnabled,Se.x=this.x,Se.y=this.y,Se.scaleX=this.scaleX,Se.scaleY=this.scaleY,Se.skewX=this.skewX,Se.skewY=this.skewY,Se.name&&(Se.name=this.name),Se.regX=this.regX*Se.width/(this.width||1),Se.regY=this.regY*Se.height/(this.height||1),Se.visible=this.visible,Se.shadow=this.shadow,(!this.type||this.type=="Shape")&&Ie.copyMatrix(Se,this),Se.compositeOperation=this.compositeOperation,Se.snapToPixel=this.snapToPixel,this.filters&&this.filters.length>0&&(Se.filters=this.filters.slice(0),Se.cache()),Se.mask=this.mask,Se.hitArea=this.hitArea,(!this.type||this.type=="Shape"||this.type=="Blob"||this.type=="Squiggle")&&this._bounds&&Se.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),Se},cloneChildren:function(Se,t){Se.children.length&&Se.removeAllChildren();for(var r=Se.children,i=0,o=this.children.length;i<o;i++){var l=this.children[i].clone(t);l.parent=Se,r.push(l)}return Se}};if(!n(m)){m=[];for(var z in B)m.push(z);return m}for(var oe in B)Object.prototype.hasOwnProperty.call(B,oe)&&(e[oe]=B[oe]);if(Ie&&(e.cjsLocalToGlobal=e.localToGlobal,e.cjsGlobalToLocal=e.globalToLocal,e.cjsLocalToLocal=e.localToLocal,e.localToGlobal=function(Se,t){return Ie.localToGlobal(Se,t,e,e.cjsLocalToGlobal)},e.globalToLocal=function(Se,t){return Ie.globalToLocal(Se,t,e,e.cjsGlobalToLocal)},e.localToLocal=function(Se,t,r){return Ie.localToLocal(Se,t,r,e)},e.hueBatch||Ie.displayBase(e)),!n(v)&&!n(a)&&!n(u)&&!n(c)?v=v:!n(v)&&!n(a)&&(u=v,c=a,v=0,a=0),!n(v)&&!n(a)&&!n(u)&&!n(c))e.setBounds(v,a,u,c);else if(e.nominalBounds!=null&&e.getBounds&&e.getBounds()==null){var ke=e.nominalBounds;e.setBounds(ke.x,ke.y,ke.width,ke.height)}return e.parent&&e.parent.actionFrames&&!e.parent.addPhysics&&Qn(e.parent,zdf?zdf.width:null,zdf?zdf.height:null),e}var Bi;function Ni(e){qe("83.35"),document.Window=Window,document.Blob=Blob,Bi="ignore",n(e)&&(e=[]),Array.isArray(e)||(e=[e]);var v=Qn(null,null,null,null,null,!0),a=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var u in Ie)(v.indexOf(u)==-1||a.indexOf(u)>=0)&&e.indexOf(u)==-1&&(window[u]=Ie[u])}Ie.fastFrame=function(e,v){if(qe("83.355"),ze=e,n(le.zdf))return v.frame=new Ie.Frame({shim:{stage:v,canvas:v.canvas}}),le.zimDefaultFrame=le.zdf=v.frame,Ie.scaX=ze.stageTransformable?1:v.scaleX,Ie.scaY=ze.stageTransformable?1:v.scaleY,v.frame};Ie.addWires=function(e){return qe("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),Ie.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),Ie.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),Ie.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),Ie.noWired.apply(null,arguments),e},e};Ie.setBlurDetect=function(){qe("83.36"),Ie.blurCheck=!0,Ie.pauseAnimateOnBlur=!0,Ie.pauseOnBlur=[],Ie.blurDetect=function(){var e,v,a={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in a)if(e in document){v=a[e];break}return function(u){return u&&document.addEventListener(v,u),!document[e]}}(),Ie.blurDetect(function(){var e,v,a;if(Ie.blurDetect())setTimeout(function(){if(Ie.pauseOnBlur)for(e=0;e<Ie.pauseOnBlur.length;e++)v=Ie.pauseOnBlur[e],v.pauseOnBlurPaused||v.pause(!1);if(Ie.pauseAnimateOnBlur&&Ie.animatedObjects){var u=[],c;for(e=0;e<Ie.animatedObjects.objects.length;e++){v=Ie.animatedObjects.objects[e];var m=Ie.copy(v.tweenStates);if(!v.tweenStates)v.pauseAnimate(!1);else if(n(m.all)||m.all){if(v.pauseAnimate(!1),!v.dynamicAnimation)for(a in m)a!="all"&&m[a]===!1&&v.pauseAnimate(!0,a)}else{v.pauseAnimate(!0);for(a in m)a!="all"&&m[a]&&v.pauseAnimate(!1,a)}v.type=="Sprite"&&(v.paused=!0),v.parent&&v.parent.type=="Particles"&&v.parent.emitter&&v.parent.emitter.focusWarm&&(c=v.parent.emitter,u.indexOf(v.parent.emitter)<0&&u.push(v.parent.emitter))}if(u.length>0)for(e=0;e<u.length;e++)u[e].doWarm(u[e].focusWarm)}},300),le.zdf&&le.zdf.dispatchEvent("tabfocus");else{if(Ie.pauseOnBlur)for(e=0;e<Ie.pauseOnBlur.length;e++)v=Ie.pauseOnBlur[e],v.pauseOnBlurPaused=v.paused,v.pause(!0);Ie.pauseAnimateOnBlur&&Ie.animatedObjects&&Ie.pauseAnimate(!0,"pauseOnBlur"),le.zdf&&le.zdf.dispatchEvent("tabblur")}})};var hi=!1;Ie=function(e){e.ZIMON={stringify:function(a,u){if(qe("83.39"),n(a))return;if(!hi){Et&&ht("ZIMON - set ZIMONON=true before using ZIMON.stringify()");return}return a=e.copy(a),c(a),JSON.stringify({obj:a,key:u,zimon:1,info:"https://zimjs.com/zimon/"});function c(m,B,z){if(!n(m))if(Array.isArray(m))e.loop(m,function(ke,Se){c(ke,m,Se)});else if(m.constructor=={}.constructor)e.loop(m,function(ke,Se){c(Se,m,ke)});else if(m.type){var oe={zimon:m.type};m.arguments&&(oe.args=Array.prototype.slice.call(m.arguments),c(oe.args)),m.type=="series"&&(oe.args=Array.prototype.slice.call(m.array),c(oe.args)),u&&u[m.type]&&u[m.type].props&&(oe.props=[],e.loop(u[m.type].props,function(ke){oe.props.push(m[ke])})),B?B[z]=oe:a=oe}else typeof m!="string"&&typeof m!="number"&&typeof m!="boolean"&&m!==null&&Et&&ht("ZIMON - potentially bad JSON value"+m)}},parse:function(a,u){if(qe("83.39"),n(a))return;var c=JSON.parse(a),m=c.obj;return u=c.key,z(m),m;function B(oe){try{return Function("return("+oe+")")()}catch(ke){return Et&&ht("ZIMON - bad function scope or name: "+oe),null}}function z(oe,ke,Se){if(!n(oe)){if(Array.isArray(oe))e.loop(oe,function(f,h){z(f,oe,h)});else if(n(oe.zimon)&&oe.constructor=={}.constructor)e.loop(oe,function(f,h){z(h,oe,f)});else if(oe.zimon){var t=oe.zimon,r="";u&&(u[t]&&u[t].scope?r=u[t].scope+".":u.scope&&(r=u.scope+"."));var i=B(r+t),o=oe.args;n(o)&&(o=[]),z(o);var l;oe.type=="series"?l=e.series(o):l=i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(o)))):null,ke?ke[Se]=l:m=l,u&&u[t]&&u[t].props&&l&&e.loop(u[t].props,function(f,h){n(oe.props[h])||(l[f]=oe.props[h])})}}}}},e.Wonder=function(a,u,c,m,B){var z="wid, client, app, notes, server",oe;if(oe=mt(e.Wonder,arguments,z,this))return oe;if(qe("82"),n(a)){ht("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");return}n(B)&&(B="https://wonder.zimjs.org/wonder");var ke=this;n(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var Se=[],t=setInterval(i,1e3),r=0;function i(){Se.length>0&&(e.async(B+"?wonder="+JSON.stringify(Se)),Se=[],r++)}var o,l=setInterval(function(){r>28&&(Se.push({id:a,c:u,a:c,n:m,k:o,t:"e",v:"frequency max - terminated",s:e.wonderSession}),ht("zim.Wonder() - frequency max - terminated"),ke.dispose()),r=0},30*1e3);this.countsOff={},this.timesOff={},this.ordersOff={};function f(_,P){return n(_)?(ht("zim.Wonder "+P+" - please provide a keyword"),!1):!ke[P+"sOff"][_]}this.count=function(_){f(_,"count")&&(o=_,Se.push({id:a,c:u,a:c,n:m,k:_,t:"c",v:1,s:e.wonderSession}))};var h={};this.timeStart=function(_){f(_,"time")&&(ke.timeEnd(_),o=_,h[_]=new Date().getTime())};var g={};this.timePause=function(_){f(_,"time")&&(g[_]||(g[_]=new Date().getTime()))},this.timeUnpause=function(_){if(f(_,"time")&&g[_]){var P=new Date().getTime()-g[_];h[_]&&(h[_]+=P),delete g[_]}},this.timeEnd=function(_){if(f(_,"time")&&h[_]){var P=g[_]?g[_]:new Date().getTime(),C=Math.round((P-h[_])/1e3);delete g[_],delete h[_],Se.push({id:a,c:u,a:c,n:m,k:_,t:"t",v:C,s:e.wonderSession})}},this.order=function(_,P){if(f(_,"order")){if(o=_,n(P)){ht("zim.Wonder order() - please provide an item");return}Se.push({id:a,c:u,a:c,n:m,k:_,t:"o",v:P,s:e.wonderSession})}},this.countOff=function(_){ke.countsOff[_]=1},this.countOn=function(_){delete ke.countOff[_]},this.timeOff=function(_){ke.timesOff[_]=1},this.timeOn=function(_){delete ke.timesOff[_]},this.orderOff=function(_){ke.ordersOff[_]=1},this.orderOn=function(_){delete ke.ordersOff[_]},this.dispose=function(){return i(),clearInterval(t),clearInterval(l),!0}},e.VERSION="015/zim",e.getLatestVersions=function(a){qe("82.2");var u="https://zimjs.com/live/getLatestVersions.php";function c(m){a(JSON.parse(m))}e.async(u,c,"returnLatestVersions")},typeof ze<"u"&&(e.PWA=function(a,u,c,m,B,z,oe){var ke="call, label, backgroundColor, color, backdropColor, pane, noScale",Se;if(Se=mt(e.PWA,arguments,ke,this))return Se;qe("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var t,r=this,i=le.M=="ios"?"In Safari, please add to\nhome screen as an app":"Please add to\nhome screen as an app";if(n(u)&&(u=new e.Label({text:i,align:e.LEFT,lineHeight:44,color:m})),n(c)&&(c=e.yellow),n(z)){z=new e.Pane({width:1200,height:230,content:u,backgroundColor:c,backdropColor:B});var o=new e.Container;new e.Shape().s(e.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.7).addTo(o),new e.Shape().s(e.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.7).addTo(o).mov(0,-38);var l=new e.Tile([o,u],2,1,40,0,!0);l.width>zdf.stage.width*.7&&(l.width=zdf.stage.width*.7),l.setBounds(-70,-10,480,100),o.mov(-30,35),l.center(z)}M&&!(le.matchMedia("(display-mode: standalone)").matches||le.navigator.standalone||document.referrer.includes("android-app://"))?f():(a&&a.constructor===Function&&a(),setTimeout(function(){r.dispatchEvent("ready")},20));function f(){r.pane=t=z.show(),t.on("close",function(){a&&a.constructor===Function&&a(),r.scaleEvent&&h.off("resize",r.scaleEvent),r.dispatchEvent("ready"),le.zdf.stage.update()});var h=h||le.zdf;h&&!oe&&(t.scaleTo(h.stage,105).center(),(h.scaling=="full"||h.scaling=="tag")&&(r.scaleEvent=h.on("resize",function(){t.scaleTo(h.stage,105).center()})),h.stage.update())}this.show=function(){return f(),this}},e.extend(e.PWA,ze.EventDispatcher,null,"cjsEventDispatcher",!1)),e.QR=function(a,u,c,m,B,z){var oe="url, color, backgroundColor, size, clickable, correctLevel",ke;if(ke=mt(e.QR,arguments,oe,this))return ke;qe("82.5"),n(a)&&(a="https://zimjs.com"),n(m)&&(m=256),n(u)&&(u=e.black),n(c)&&(c=e.white),n(B)&&(B=!0),n(z)&&(z=2);var Se=document.createElement("div");if(typeof QRCode>"u"){ht("ZIM QR - needs qrcode.js library - see docs");return}var t=new QRCode(Se,{text:a,width:m,height:m,colorDark:u,colorLight:c,correctLevel:z});this.zimBitmap_constructor(t._oDrawing._oContext.canvas),B&&this.cur().on("click",function(){or(a,"_blank")}),Se=null},e.extend(e.QR,e.Bitmap,null,"zimBitmap",!1),e.GIF=function(a,u,c,m){var B="file, width, height, startPaused",z;if(z=mt(e.GIF,arguments,B,this))return z;if(qe("82.7"),typeof gifler>"u"){ht("ZIM GIF - needs gifler.js library - see docs");return}n(u)&&(u=100),n(c)&&(c=100);var oe=this;oe.paused=!1,this.zimBitmap_constructor(null,u,c),this.cache();var ke,Se,t;if(le.PATH!=null&&(e.PATH=le.PATH),a.match(/http/)||a.match(/^\//)?t=a:t=(e.PATH?e.PATH:"")+a,oe.gifler=gifler(t).animate(this.cacheCanvas).then(function(l){oe.animator=l,m&&(ke=setInterval(function(){oe.animator.running()&&(Se=setTimeout(function(){oe.animator.stop(),oe.paused=!0},.1),clearInterval(ke))},.05))}),!oe.ticker)if(oe.keyObj){var r=oe.keyObj.color,i=oe.keyObj.tolerance,o=oe.keyObj.replacement;oe.ticker=e.Ticker.add(function(){oe.keyOut(r,i,o)})}else oe.ticker=e.Ticker.add(function(){});oe.keyOut=function(l,f,h){return oe.ticker?(e.Ticker.remove(oe.ticker),oe.ticker=e.Ticker.add(function(){oe.keyOut(l,f,h)})):oe.keyObj={color:l,tolerance:f,replacement:h},oe},this.pause=function(l){return n(l)&&(l=!0),oe.animator&&(ke&&clearInterval(ke),Se&&clearTimeout(Se),l&&oe.animator.running()?(oe.animator.stop(),e.Ticker.remove(oe.ticker)):!l&&!oe.animator.running()&&(oe.animator.start(),e.Ticker.add(oe.ticker))),oe.paused=l,oe},this.stop=function(){oe.dispose()},this.reset=function(){return oe.animator.reset(),oe.paused&&(oe.animator.start(),e.Ticker.add(oe.ticker)),oe},this.clone=function(){return this.cloneProps(new e.GIF(a,u,c,m))},this.dispose=function(){oe.animator.stop(),oe.parent&&oe.removeFrom(),e.Ticker.remove(oe.ticker),e.gD(this)}},e.extend(e.GIF,e.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),e.Theme={set:function(a,u,c,m,B){var z="name, lightenRatio, tint, tintRatio, exclude",oe;if(oe=mt(e.Theme.set,arguments,z))return oe;qe("82.8"),n(a)&&(a="zim");var ke=a.toLowerCase();n(u)&&(u=0),c==-1&&(c=null),n(m)&&(m=0),B==-1&&(B=null),!n(B)&&!Array.isArray(B)&&(B=[B]),e.THEME=window.THEME={name:ke,lightenRatio:u,tint:c,tintRatio:m,exclude:B};var Se={},t,r=e.colors.slice(0,8),i=e.colors.slice(8,25);ke=="zim"?e.loop(e.colors,function(o,l){o=="clear"||o=="faint"||(Se[o]=e.colorsHex[l])}):ke=="html"?(e.loop(r,function(o){Se[o]=o}),e.loop(i,function(o,l){Se[o]=e.colorsHex[l+8]})):ke=="future"?(t=["f25019","fd8918","ffc955","1dcfae","00a5ab","007175","00969b","d6b361"],e.loop(r,function(o,l){Se[o]="#"+t[l]}),e.loop(i,function(o,l){Se[o]=e.colorsHex[l+8].toColor("#1dcfae",.4-l*.025)})):ke=="invert"?(Se={},e.loop(e.colorsHex,function(o,l,f){if(l==f-2)return 1;Se[e.colors[l]]=e.invertColor(o)})):ke=="greyscale"?(t=["222222","aaaaaa","dddddd","888888","333333","111111","777777","bbbbbb"],e.loop(r,function(o,l){Se[o]="#"+t[l]})):ke=="neon"?(t=["FF3624","ff6f00","e2f705","a3f307","05f9e2","ED0AF5","ff33c9","e16d00"],e.loop(r,function(o,l){Se[o]="#"+t[l]}),e.loop(i,function(o,l){Se[o]=e.colorsHex[l+8].toColor("#000",.9)}),Se.light=e.lighter,Se.moon=e.lighter,Se.lighter=e.white,Se.white=e.white):ke=="seventies"?(t=["e5771e","f4a127","ffecb4","6F8212","75c8ae","5a3d2b","956e4e","4c3607"],e.loop(r,function(o,l){Se[o]="#"+t[l]}),e.loop(i,function(o,l){Se[o]=e.colorsHex[l+8].toColor(l<8?"#344f00":"#f4a127",.8-l*.04)})):ke=="warm"?(t=["965746","c07768","ffecb4","8da279","6da0b1","745c58","9a7e79","be8858"],e.loop(r,function(o,l){Se[o]="#"+t[l]}),e.loop(i,function(o,l){Se[o]=e.colorsHex[l+8].toColor(l<8?"#4e352e":"#745c58",.8-l*.05)})):ke.constructor=={}.constructor&&(Se=ke,e.loop(Se,function(o){e.colors.indexOf(o)==-1&&delete Se[o]})),e.loop(B,function(o){o.toLowerCase()=="colors"?e.loop(e.colors,function(l,f){if(f>=8)return 1;B.push(l)}):(o.toLowerCase()=="greys"||o.toLowerCase()=="grays")&&e.loop(e.colors,function(l,f){f<8||B.push(l)})}),e.loop(Se,function(o,l){B&&B.indexOf(o)!=-1||(c&&(l=l.toColor(c,m)),u!=0&&(l=l.lighten(u)),Lt||(window[o]=l),e[o]=l)})},apply:function(a,u,c,m,B){var z="name, lightenRatio, tint, tintRatio, exclude",oe;if(oe=mt(e.Theme.apply,arguments,z))return oe;if(localStorage){n(a)&&(a="zim");var ke=a.toLowerCase();n(u)&&(u=0),n(c)&&(c=-1),n(m)&&(m=0),n(B)?B=-1:Array.isArray(B)||(B=[B]),localStorage.setItem(v,JSON.stringify({name:ke,lightenRatio:u,tint:c,tintRatio:m,exclude:B})),window.location.reload()}else ht("ZIM applyTheme() - needs localStorage")},clear:function(){localStorage&&localStorage.getItem(v)&&localStorage.removeItem(v),window.location.reload()}};var v=window.location.href.replace(/[.\/:]/g,"");return localStorage&&localStorage.getItem(v)?(e.THEME=window.THEME=JSON.parse(localStorage.getItem(v)),e.Theme.set(pr.name,pr.lightenRatio,pr.tint,pr.tintRatio,pr.exclude)):e.THEME=window.THEME=null,e}(Ie||{});var ri=[["zog",qn],["zid",Tn],["zss",Oi],["zgo",or],["zum",jn],["zot",n],["zop",Li],["zil",Ur],["zet",gr],["zob",mt],["zik",dt],["zta",Di],["zor",Ri],["zogg",ui],["zogp",Mi],["zogb",Gr],["zogr",fi],["zogy",ht],["zogo",ci],["zogl",Sr],["zogd",Ir],["zimplify",Ni],["zimify",Qn]];for(pn=0;pn<ri.length;pn++)zn=ri[pn],le[zn[0]]=Ie[zn[0]]=zn[1];var zn,ii=[["FIT",Ie.FIT],["FILL",Ie.FILL],["FULL",Ie.FULL],["LEFT",Ie.LEFT],["RIGHT",Ie.RIGHT],["CENTER",Ie.CENTER],["MIDDLE",Ie.MIDDLE],["START",Ie.START],["END",Ie.END],["TOP",Ie.TOP],["BOTTOM",Ie.BOTTOM],["OVER",Ie.OVER],["UNDER",Ie.UNDER],["HORIZONTAL",Ie.HORIZONTAL],["VERTICAL",Ie.VERTICAL],["BOTH",Ie.BOTH],["RADIAL",Ie.RADIAL],["UP",Ie.UP],["DOWN",Ie.DOWN],["NEXT",Ie.NEXT],["PREV",Ie.PREV],["AUTO",Ie.AUTO],["AVE",Ie.AVE],["DEFAULT",Ie.DEFAULT],["ALL",Ie.ALL],["NONE",Ie.NONE],["GET",Ie.GET],["POST",Ie.POST],["LOCALSTORAGE",Ie.LOCALSTORAGE],["SOCKET",Ie.SOCKET],["TO",Ie.TO],["FROM",Ie.FROM],["SINE",Ie.SINE],["SQUARE",Ie.SQUARE],["TRIANGLE",Ie.TRIANGLE],["SAW",Ie.SAW],["SAWTOOTH",Ie.SAWTOOTH],["ZAP",Ie.ZAP],["TAU",Ie.TAU],["DEG",Ie.DEG],["RAD",Ie.RAD],["PHI",Ie.PHI]];for(pn=0;pn<ii.length;pn++)zn=ii[pn],le[zn[0]]=zn[1];var zn;for(pn=0;pn<Ie.colors.length;pn++)le[Ie.colors[pn]]=Ie.colorsHex[pn];le.zim=Ie;var Gi=Ie;var Ui=Ie.chop,Vi=Ie.shuffle,Hi=Ie.pluck,Wi=Ie.rand,qi=Ie.seedRandom,Qi=Ie.odds,Zi=Ie.rarity,Ki=Ie.repeats,Ji=Ie.series,$i=Ie.loop,ji=Ie.getTIME,si=Ie.timeout,Fi=Ie.interval,zi=Ie.async,es=Ie.couple,ts=Ie.decouple,ns=Ie.convertColor,rs=Ie.colorRange,is=Ie.lighten,ss=Ie.darken,as=Ie.toColor,os=Ie.toAlpha,ls=Ie.toBW,us=Ie.invertColor,fs=Ie.zimEase,cs=Ie.spline,hs=Ie.pointAlongCurve,ds=Ie.distanceAlongCurve,ps=Ie.closestPointAlongCurve,gs=Ie.transformPoints,vs=Ie.trimEndPoints,ys=Ie.reversePoints,ms=Ie.appendPoints,xs=Ie.prependPoints,ws=Ie.splitPoints,_s=Ie.makeID,Ts=Ie.makeSyllable,Cs=Ie.makePrimitive,As=Ie.makeMath,Es=Ie.swapProperties,bs=Ie.mobile,ks=Ie.vee,Ps=Ie.extend,Ss=Ie.copy,Is=Ie.merge,Ms=Ie.sortObject,Os=Ie.arraysEqual,Ls=Ie.arrayMinMax,Ds=Ie.isEmpty,Rs=Ie.isJSON,Bs=Ie.isPick,Ns=Ie.decimals,Fs=Ie.countDecimals,Ys=Ie.sign,Xs=Ie.constrain,Gs=Ie.dist,Us=Ie.rectIntersect,Vs=Ie.boundsAroundPoints,Hs=Ie.angle,Ws=Ie.smoothStep,qs=Ie.unicodeToUTF,Qs=Ie.capitalizeFirst,Zs=Ie.Ajax,Ks=Ie.Noise,Js=Ie.Point,$s=Ie.Bezier,js=Ie.Boundary,zs=Ie.GradientColor,ea=Ie.RadialColor,ta=Ie.BitmapColor,na=Ie.Damp,ra=Ie.Proportion,ia=Ie.ProportionDamp,sa=Ie.Dictionary,aa=Ie.Hierarchy,oa=Ie.Pick,la=Ie.scrollX,ua=Ie.scrollY,fa=Ie.windowWidth,ca=Ie.windowHeight,ha=Ie.browserZoom,da=Ie.getQueryString,pa=Ie.swapHTML,ga=Ie.urlEncode,va=Ie.urlDecode,ya=Ie.setCookie,ma=Ie.getCookie,xa=Ie.deleteCookie,wa=Ie.Stage,_a=Ie.StageGL,ai=Ie.Container,Ta=Ie.Shape,Ca=Ie.Bitmap,Aa=Ie.Sprite,Ea=Ie.MovieClip,ba=Ie.SVGContainer,ka=Ie.CustomShape,Pa=Ie.Circle,Sn=Ie.Rectangle,Sa=Ie.Triangle,Ia=Ie.Poly,Ma=Ie.Line,Oa=Ie.Squiggle;var La=Ie.Flare,Da=Ie.MultiFlare,Ra=Ie.FlareBox,oi=Ie.Label,Ba=Ie.LabelOnPath,Na=Ie.LabelOnArc,Fa=Ie.LabelLetters,Ya=Ie.Emoji,Xa=Ie.Button,Ga=Ie.CheckBox,Ua=Ie.RadioButtons,Va=Ie.Toggle,Ha=Ie.Tip,Wa=Ie.Pane,qa=Ie.Panel;var Qa=Ie.Page,Za=Ie.Central,Ka=Ie.Layer,Ja=Ie.Waiter,$a=Ie.ProgressBar,ja=Ie.Indicator,za=Ie.TextInput,eo=Ie.List,to=Ie.Stepper,no=Ie.Slider,ro=Ie.Selector,io=Ie.Dial,so=Ie.Tabs,ao=Ie.Pad,oo=Ie.NumPad,lo=Ie.DPad,uo=Ie.Radial,fo=Ie.RadialMenu,co=Ie.ColorPicker,ho=Ie.EmojiPicker,po=Ie.TextEditor,go=Ie.Keyboard,vo=Ie.Organizer,yo=Ie.Connectors,mo=Ie.Marquee,xo=Ie.Carousel,wo=Ie.Loader,_o=Ie.TextArea,To=Ie.Tag,Co=Ie.localToGlobal,Ao=Ie.globalToLocal,Eo=Ie.localToLocal,bo=Ie.addTo,ko=Ie.removeFrom,Po=Ie.added,So=Ie.centerReg,Io=Ie.center,Mo=Ie.place,Oo=Ie.placeReg,Lo=Ie.pos,Do=Ie.loc,Ro=Ie.mov,Bo=Ie.sca,No=Ie.alp,Fo=Ie.vis,Yo=Ie.ble,Xo=Ie.dye,Go=Ie.hov,Uo=Ie.rot,Vo=Ie.siz,Ho=Ie.ske,Wo=Ie.reg,qo=Ie.top,Qo=Ie.bot,Zo=Ie.ord,Ko=Ie.cur,Jo=Ie.sha,$o=Ie.dep,jo=Ie.nam,zo=Ie.movement,el=Ie.noMovement,tl=Ie.tap,nl=Ie.noTap,rl=Ie.hold,il=Ie.noHold,sl=Ie.change,al=Ie.noChange,ol=Ie.drag,ll=Ie.noDrag,ul=Ie.dragBoundary,fl=Ie.mouse,cl=Ie.noMouse,hl=Ie.wire,dl=Ie.noWire,pl=Ie.wired,gl=Ie.noWired,vl=Ie.bind,yl=Ie.noBind,ml=Ie.transform,xl=Ie.gesture,wl=Ie.noGesture,_l=Ie.gestureBoundary,Tl=Ie.effect,Cl=Ie.updateEffects,Al=Ie.noEffect,El=Ie.addPhysics,bl=Ie.removePhysics,kl=Ie.hitTestPoint,Pl=Ie.hitTestReg,Sl=Ie.hitTestRect,Il=Ie.hitTestCircle,Ml=Ie.hitTestCircleRect,Ol=Ie.hitTestCircles,Ll=Ie.hitTestBounds,Dl=Ie.hitTestPath,Rl=Ie.hitTestGrid,Bl=Ie.animate,Nl=Ie.stopAnimate,Fl=Ie.pauseAnimate,Yl=Ie.wiggle,Xl=Ie.scaleTo,Gl=Ie.fit,Ul=Ie.boundsToGlobal,Vl=Ie.resetBounds,Hl=Ie.copyMatrix,Wl=Ie.duplicate,ql=Ie.expand,Ql=Ie.setSwipe,Zl=Ie.setMask,Kl=Ie.outline,Jl=Ie.blendmodes,$l=Ie.Pages,jl=Ie.Arrow,zl=Ie.HotSpots,eu=Ie.HotSpot,tu=Ie.Guide,nu=Ie.Grid,ru=Ie.Wrapper,li=Ie.Tile,iu=Ie.Pack,su=Ie.Beads,au=Ie.Layout,ou=Ie.Accessibility,lu=Ie.TextureActive,uu=Ie.TextureActives,fu=Ie.TextureActivesManager,cu=Ie.Manager,hu=Ie.ResizeManager,du=Ie.TransformManager,pu=Ie.GuideManager,gu=Ie.GridManager,vu=Ie.LayoutManager,yu=Ie.SelectionSet,mu=Ie.SelectionManager,xu=Ie.Bind,wu=Ie.Swipe,_u=Ie.Swiper,Tu=Ie.MotionController,Cu=Ie.GamePad,Au=Ie.Portal,Eu=Ie.Physics,bu=Ie.TimeLine,ku=Ie.BlurEffect,Pu=Ie.GlowEffect,Su=Ie.ShadowEffect,Iu=Ie.ColorEffect,Mu=Ie.MultiEffect,Ou=Ie.AlphaEffect,Lu=Ie.Pixel,Du=Ie.Parallax,Ru=Ie.Flipper,Bu=Ie.Book,Nu=Ie.Scrambler,Fu=Ie.Scroller,Yu=Ie.Dynamo,Xu=Ie.Accelerator,Gu=Ie.Emitter,Uu=Ie.Generator,Vu=Ie.Pen,Hu=Ie.SoundWave,Wu=Ie.Synth,qu=Ie.VR,Qu=Ie.Frame,Zu=Ie.Pic,Ku=Ie.Aud,Ju=Ie.Vid,$u=Ie.SVG,ju=Ie.SensorAsk,zu=Ie.distill,ef=Ie.parseAudioSprite,tf=Ie.previewAudioSprite,nf=Ie.svgToBitmap,rf=Ie.makeContent,sf=Ie.fastFrame,af=Ie.addWires,of=Ie.setBlurDetect,lf=Ie.Wonder,uf=Ie.getLatestVersions,ff=Ie.PWA,cf=Ie.QR,hf=Ie.GIF,pr=Ie.THEME;})();
/*! ZIM - JavaScript Canvas Framework - Code Creativity
https://zimjs.com (c) 2023 modified MIT License
Donations welcome https://zimjs.com/donate
Node module - also see ES6 modules at https://zimjs.com/cdn
*/
/*! Bundled license information:

@danzen/createjs/create.js:
  (*!
  * CreateJS
  * Visit http://createjs.com/ for documentation, updates and examples.
  *
  * Copyright (c) 2010 gskinner.com, inc.
  *
  * Permission is hereby granted, free of charge, to any person
  * obtaining a copy of this software and associated documentation
  * files (the "Software"), to deal in the Software without
  * restriction, including without limitation the rights to use,
  * copy, modify, merge, publish, distribute, sublicense, and/or sell
  * copies of the Software, and to permit persons to whom the
  * Software is furnished to do so, subject to the following
  * conditions:
  *
  * The above copyright notice and this permission notice shall be
  * included in all copies or substantial portions of the Software.
  *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  * OTHER DEALINGS IN THE SOFTWARE.
  *)
*/
